"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_2 = require("@chakra-ui/react");
const Switch_1 = __importDefault(require("@components/Switch"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const TextField_1 = __importDefault(require("@components/TextField"));
const lodash_1 = __importDefault(require("lodash"));
const sendUpdatesOptions = [
    { label: 'All', value: 'all' },
    { label: 'External Only', value: 'externalOnly' },
    { label: 'None', value: 'none' }
];
const transparencyOptions = [
    { label: 'Opaque', value: 'opaque' },
    { label: 'Transparent', value: 'transparent' }
];
const visibilityOptions = [
    { label: 'Default', value: 'default' },
    { label: 'Public', value: 'public' },
    { label: 'Private', value: 'private' }
];
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("@config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function CMPWStep1(props) {
    const [sendUpdates, setSendUpates] = (0, react_1.useState)(props?.sendUpdates);
    const [guestsCanInviteOthers, setGuestsCanInviteOthers] = (0, react_1.useState)(props?.guestsCanInviteOthers);
    const [transparency, setTransparency] = (0, react_1.useState)(props?.transparency);
    const [visibility, setVisibility] = (0, react_1.useState)(props?.visibility);
    const [name, setName] = (0, react_1.useState)(props?.name);
    (0, react_1.useEffect)(() => {
        if (name !== props?.name) {
            setName(props?.name);
        }
    }, [name, props?.name]);
    const setParentSendUpdates = props?.setParentSendUpdates;
    const setParentGuestsCanInviteOthers = props?.setParentGuestsCanInviteOthers;
    const setParentTransparency = props?.setParentTransparency;
    const setParentVisibility = props?.setParentVisibility;
    const setParentName = props?.setParentName;
    const changeSendUpdates = (value) => {
        setSendUpates(value);
        setParentSendUpdates(value);
    };
    const changeGuestsCanInviteOthers = (value) => {
        setGuestsCanInviteOthers(value);
        setParentGuestsCanInviteOthers(value);
    };
    const changeTransparency = (value) => {
        setTransparency(value);
        setParentTransparency(value);
    };
    const changeVisibility = (value) => {
        setVisibility(value);
        setParentVisibility(value);
    };
    const changeName = (e) => {
        setName(e?.target?.value);
        setParentName(e?.target?.value);
    };
    return ((0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", minHeight: "65vh", maxHeight: "65vh", width: "100%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, pt: { phone: 'l', tablet: 'xl' }, flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '70%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Name", placeholder: "John Doe", onChange: changeName, value: name, style: { width: '100%' } }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Google calendar option on who to notify - Google users vs non-Google users', "aria-label": 'A tooltip', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Select who should receive updates" }), (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "for event changes?" })] }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", pt: { phone: 'm', tablet: 's' }, children: (0, jsx_runtime_1.jsxs)("select", { value: sendUpdates, onChange: (e) => changeSendUpdates(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "Send updates to..." }), lodash_1.default.map(sendUpdatesOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Can Guests invite others?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", children: (0, jsx_runtime_1.jsx)(Switch_1.default, { checked: guestsCanInviteOthers, onValueChange: changeGuestsCanInviteOthers, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Should it block time on your calendar', "aria-label": 'A tooltip', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Will the event be transparent?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", children: (0, jsx_runtime_1.jsxs)("select", { value: transparency, onChange: (e) => changeTransparency(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "transparency" }), lodash_1.default.map(transparencyOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Who can see the details of the event - anyone or just attendees', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Who can see this event?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", children: (0, jsx_runtime_1.jsxs)("select", { value: visibility, onChange: (e) => changeVisibility(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "visibility..." }), lodash_1.default.map(visibilityOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] })] }));
}
exports.default = CMPWStep1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ01QV1N0ZXAxLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ01QV1N0ZXAxLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQWlDQSxnREFxQ0M7O0FBdEVELGlDQUE0RTtBQUU1RSw0Q0FBMEM7QUFDekMsZ0VBQXdDO0FBQ3pDLGlFQUF3QztBQUN4QyxtRUFBMEM7QUFDMUMsc0VBQTZDO0FBQzdDLG9EQUFzQjtBQUl0QixNQUFNLGtCQUFrQixHQUFHO0lBQ3ZCLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFO0lBQzlCLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFDO0lBQ2hELEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDO0NBQ2xDLENBQUE7QUFFRCxNQUFNLG1CQUFtQixHQUFHO0lBQ3hCLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO0lBQ3BDLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFO0NBQ2pELENBQUE7QUFFRCxNQUFNLGlCQUFpQixHQUFHO0lBQ3RCLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO0lBQ3RDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO0lBQ3BDLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO0NBQ3pDLENBQUE7QUFHRCx3RUFBOEM7QUFDOUMseURBQXFEO0FBQ3JELDhFQUFxRDtBQUU5QyxLQUFLLFVBQVUsa0JBQWtCLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFpRDtJQUNoRywwRkFBMEY7SUFDMUYsc0NBQXNDO0lBQ3RDLHlFQUF5RTtJQUN6RSwwQkFBZSxDQUFDLElBQUksQ0FBQyxJQUFBLDZCQUFhLEdBQUUsQ0FBQyxD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RUFBQyxVQUFVLEVBQUMsUUFBUSxZQUNwRSx1QkFBQyxlQUFPLElBQUMsS0FBSyxFQUFDLGlFQUFpRSxFQUFDLEVBQUUsRUFBQyxZQUFZLEVBQUMsS0FBSyxFQUFDLE9BQU8sWUFDNUcsdUJBQUMsY0FBSSxJQUFDLE9BQU8sRUFBQyxZQUFZLHdDQUVuQixHQUNDLEdBQ1IsRUFDTix1QkFBQyxhQUFHLElBQUMsYUFBYSxFQUFDLEtBQUssRUFBQyxjQUFjLEVBQUMsVUFBVSxFQUFDLFVBQVUsRUFBQyxRQUFRLFlBQ3BFLG9DQUFRLEtBQUssRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQXlDLENBQUMsRUFBRSxTQUFTLEVBQUMsdUNBQXVDLGFBQ2pLLG1DQUFRLFFBQVEsUUFBQyxRQUFRLG9DQUF1QixFQUMvQyxnQkFBQyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQ2hDLG1DQUVFLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxZQUNuQixNQUFNLENBQUMsS0FBSyxJQUZQLE1BQU0sQ0FBQyxLQUFLLENBRUssQ0FDekIsQ0FBQyxJQUNDLEdBQ0wsSUFDRixJQUNGLENBRVQsQ0FBQTtBQUlMLENBQUM7QUFFRCxrQkFBZSxTQUFTLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgRGlzcGF0Y2gsIFNldFN0YXRlQWN0aW9uIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBjb2xvcnNQYWxldHRlIGFzIENvbG9ycyB9IGZyb20gJ0BsaWIvdGhlbWUvY29sb3JzUGFsZXR0ZSdcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdAY2hha3JhLXVpL3JlYWN0J1xuIGltcG9ydCBTd2l0Y2gxIGZyb20gJ0Bjb21wb25lbnRzL1N3aXRjaCdcbmltcG9ydCBCb3ggZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL0JveCdcbmltcG9ydCBUZXh0IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9UZXh0J1xuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdAY29tcG9uZW50cy9UZXh0RmllbGQnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyBTZW5kVXBkYXRlc1R5cGUsIFZpc2liaWxpdHlUeXBlIH0gZnJvbSAnQGxpYi9jYWxlbmRhckxpYi90eXBlcydcbmltcG9ydCB7IFRyYW5zcGFyZW5jeVR5cGUgfSBmcm9tICdAbGliL2NhbGVuZGFyTGliL3R5cGVzJztcblxuY29uc3Qgc2VuZFVwZGF0ZXNPcHRpb25zID0gW1xuICAgIHsgbGFiZWw6ICdBbGwnLCB2YWx1ZTogJ2FsbCcgfSxcbiAgICB7IGxhYmVsOiAnRXh0ZXJuYWwgT25seScsIHZhbHVlOiAnZXh0ZXJuYWxPbmx5J30sXG4gICAgeyBsYWJlbDogJ05vbmUnLCB2YWx1ZTogJ25vbmUnfVxuXVxuXG5jb25zdCB0cmFuc3BhcmVuY3lPcHRpb25zID0gW1xuICAgIHsgbGFiZWw6ICdPcGFxdWUnLCB2YWx1ZTogJ29wYXF1ZScgfSxcbiAgICB7IGxhYmVsOiAnVHJhbnNwYXJlbnQnLCB2YWx1ZTogJ3RyYW5zcGFyZW50JyB9XG5dXG5cbmNvbnN0IHZpc2liaWxpdHlPcHRpb25zID0gW1xuICAgIHsgbGFiZWw6ICdEZWZhdWx0JywgdmFsdWU6ICdkZWZhdWx0JyB9LFxuICAgIHsgbGFiZWw6ICdQdWJsaWMnLCB2YWx1ZTogJ3B1YmxpYycgfSxcbiAgICB7IGxhYmVsOiAnUHJpdmF0ZScsIHZhbHVlOiAncHJpdmF0ZScgfVxuXVxuXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgc3VwZXJ0b2tlbnNOb2RlIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUnXG5pbXBvcnQgeyBiYWNrZW5kQ29uZmlnIH0gZnJvbSAnQGNvbmZpZy9iYWNrZW5kQ29uZmlnJ1xuaW1wb3J0IFNlc3Npb24gZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZS9yZWNpcGUvc2Vzc2lvbidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzIH06IHsgcmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UgfSkge1xuICAgIC8vIE5vdGljZSBob3cgdGhlIHNlcnZlciB1c2VzIGBBUElgIGZyb20gYHdpdGhTU1JDb250ZXh0YCwgaW5zdGVhZCBvZiB0aGUgdG9wLWxldmVsIGBBUElgLlxuICAgIC8vIGNvbnN0IFNTUiA9IHdpdGhTU1JDb250ZXh0KHsgcmVxIH0pXG4gICAgLy8gdGhpcyBydW5zIG9uIHRoZSBiYWNrZW5kLCBzbyB3ZSBtdXN0IGNhbGwgaW5pdCBvbiBzdXBlcnRva2Vucy1ub2RlIFNES1xuICAgIHN1cGVydG9rZW5zTm9kZS5pbml0KGJhY2tlbmRDb25maWcoKSlcbiAgICBsZXQgc2Vzc2lvblxuICAgIHRyeSB7XG4gICAgICAgIHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmdldFNlc3Npb24ocmVxLCByZXMsIHtcbiAgICAgICAgICAgIG92ZXJyaWRlR2xvYmFsQ2xhaW1WYWxpZGF0b3JzOiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5UUllfUkVGUkVTSF9UT0tFTikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyLnR5cGUgPT09IFNlc3Npb24uRXJyb3IuVU5BVVRIT1JJU0VEKSB7XG4gICAgICAgICAgICAvLyB0aGlzIHdpbGwgZm9yY2UgdGhlIGZyb250ZW5kIHRvIHRyeSBhbmQgcmVmcmVzaCB3aGljaCB3aWxsIGZhaWxcbiAgICAgICAgICAgIC8vIGNsZWFyaW5nIGFsbCBjb29raWVzIGFuZCByZWRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUgbG9naW4gc2NyZWVuLlxuICAgICAgICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyXG4gICAgfVxuXG4gICAgaWYgKCFzZXNzaW9uPy5nZXRVc2VySWQoKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9Vc2VyL0xvZ2luL1VzZXJMb2dpbicsXG4gICAgICAgICAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wczoge1xuICAgICAgICBzdWI6IHNlc3Npb24uZ2V0VXNlcklkKCksXG4gICAgICAgIH1cbiAgICB9XG59XG5cbnR5cGUgUHJvcHMgPSB7XG4gICAgc2VuZFVwZGF0ZXM6IFNlbmRVcGRhdGVzVHlwZSxcbiAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnM6IGJvb2xlYW4sXG4gICAgdHJhbnNwYXJlbmN5OiBUcmFuc3BhcmVuY3lUeXBlLFxuICAgIHZpc2liaWxpdHk6IFZpc2liaWxpdHlUeXBlLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBzZXRQYXJlbnRTZW5kVXBkYXRlczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248U2VuZFVwZGF0ZXNUeXBlPj4sXG4gICAgc2V0UGFyZW50R3Vlc3RzQ2FuSW52aXRlT3RoZXJzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxib29sZWFuPj4sXG4gICAgc2V0UGFyZW50VHJhbnNwYXJlbmN5OiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxUcmFuc3BhcmVuY3lUeXBlPj4sXG4gICAgc2V0UGFyZW50VmlzaWJpbGl0eTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248VmlzaWJpbGl0eVR5cGU+PixcbiAgICBzZXRQYXJlbnROYW1lOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxzdHJpbmc+Pixcbn1cblxuZnVuY3Rpb24gQ01QV1N0ZXAxKHByb3BzOiBQcm9wcykge1xuICAgIGNvbnN0IFtzZW5kVXBkYXRlcywgc2V0U2VuZFVwYXRlc10gPSB1c2VTdGF0ZTxTZW5kVXBkYXRlc1R5cGU+KHByb3BzPy5zZW5kVXBkYXRlcylcbiAgICBjb25zdCBbZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzLCBzZXRHdWVzdHNDYW5JbnZpdGVPdGhlcnNdID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/Lmd1ZXN0c0Nhbkludml0ZU90aGVycylcbiAgICBjb25zdCBbdHJhbnNwYXJlbmN5LCBzZXRUcmFuc3BhcmVuY3ldID0gdXNlU3RhdGU8VHJhbnNwYXJlbmN5VHlwZT4ocHJvcHM/LnRyYW5zcGFyZW5jeSlcbiAgICBjb25zdCBbdmlzaWJpbGl0eSwgc2V0VmlzaWJpbGl0eV0gPSB1c2VTdGF0ZTxWaXNpYmlsaXR5VHlwZT4ocHJvcHM/LnZpc2liaWxpdHkpXG4gICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGU8c3RyaW5nPihwcm9wcz8ubmFtZSlcblxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKG5hbWUgIT09IHByb3BzPy5uYW1lKSB7XG4gICAgICAgICAgc2V0TmFtZShwcm9wcz8ubmFtZSlcbiAgICAgICAgfVxuICAgIH0sIFtuYW1lLCBwcm9wcz8ubmFtZV0pXG5cbiAgICBjb25zdCBzZXRQYXJlbnRTZW5kVXBkYXRlcyA9IHByb3BzPy5zZXRQYXJlbnRTZW5kVXBkYXRlc1xuICAgIGNvbnN0IHNldFBhcmVudEd1ZXN0c0Nhbkludml0ZU90aGVycyA9IHByb3BzPy5zZXRQYXJlbnRHdWVzdHNDYW5JbnZpdGVPdGhlcnNcbiAgICBjb25zdCBzZXRQYXJlbnRUcmFuc3BhcmVuY3kgPSBwcm9wcz8uc2V0UGFyZW50VHJhbnNwYXJlbmN5XG4gICAgY29uc3Qgc2V0UGFyZW50VmlzaWJpbGl0eSA9IHByb3BzPy5zZXRQYXJlbnRWaXNpYmlsaXR5XG4gICAgY29uc3Qgc2V0UGFyZW50TmFtZSA9IHByb3BzPy5zZXRQYXJlbnROYW1lXG5cbiAgICBjb25zdCBjaGFuZ2VTZW5kVXBkYXRlcyA9ICh2YWx1ZTogJ2FsbCcgfCAnZXh0ZXJuYWxPbmx5JykgPT4ge1xuICAgICAgICBzZXRTZW5kVXBhdGVzKHZhbHVlKVxuICAgICAgICBzZXRQYXJlbnRTZW5kVXBkYXRlcyh2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VHdWVzdHNDYW5JbnZpdGVPdGhlcnMgPSAodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2V0R3Vlc3RzQ2FuSW52aXRlT3RoZXJzKHZhbHVlKVxuICAgICAgICBzZXRQYXJlbnRHdWVzdHNDYW5JbnZpdGVPdGhlcnModmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVHJhbnNwYXJlbmN5ID0gKHZhbHVlOiAnb3BhcXVlJyB8ICd0cmFuc3BhcmVudCcpID0+IHtcbiAgICAgICAgc2V0VHJhbnNwYXJlbmN5KHZhbHVlKVxuICAgICAgICBzZXRQYXJlbnRUcmFuc3BhcmVuY3kodmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVmlzaWJpbGl0eSA9ICh2YWx1ZTogJ2RlZmF1bHQnIHwgJ3B1YmxpYycgfCAncHJpdmF0ZScpID0+IHtcbiAgICAgICAgc2V0VmlzaWJpbGl0eSh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50VmlzaWJpbGl0eSh2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VOYW1lID0gKGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBSZWFjdC5TZXRTdGF0ZUFjdGlvbjxzdHJpbmc+IH0gfSkgPT4ge1xuICAgICAgICBzZXROYW1lKGU/LnRhcmdldD8udmFsdWUpXG4gICAgICAgIHNldFBhcmVudE5hbWUoZT8udGFyZ2V0Py52YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Qm94IGZsZXg9ezF9IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIG1pbkhlaWdodD1cIjY1dmhcIiBtYXhIZWlnaHQ9XCI2NXZoXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICAgICAgPEJveCBmbGV4PXsxfSBwdD17eyBwaG9uZTogJ2wnLCB0YWJsZXQ6ICd4bCcgfX0gZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzcwJScgfX0+XG4gICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWVcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJKb2huIERvZVwiXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Y2hhbmdlTmFtZX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPEJveCBmbGV4PXsxfSBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBmbGV4RGlyZWN0aW9uPXt7IHRhYmxldDogXCJyb3dcIn19IGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiB3aWR0aD1cIjcwJVwiPlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9J0dvb2dsZSBjYWxlbmRhciBvcHRpb24gb24gd2hvIHRvIG5vdGlmeSAtIEdvb2dsZSB1c2VycyB2cyBub24tR29vZ2xlIHVzZXJzJyBhcmlhLWxhYmVsPSdBIHRvb2x0aXAnIGJnPSdwdXJwbGUuNzAwJyBjb2xvcj0nd2hpdGUnPlxuICAgICAgICAgICAgICAgICAgICA8Qm94ICBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0IHdobyBzaG91bGQgcmVjZWl2ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBldmVudCBjaGFuZ2VzP1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e3NlbmRVcGRhdGVzfSBvbkNoYW5nZT17KGUpID0+IGNoYW5nZVNlbmRVcGRhdGVzKGU/LnRhcmdldD8udmFsdWUgYXMgXCJhbGxcIiB8IFwiZXh0ZXJuYWxPbmx5XCIpfSBjbGFzc05hbWU9XCJzZWxlY3Qgc2VsZWN0LXByaW1hcnkgdy1mdWxsIG1heC13LXhzXCI+XG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHNlbGVjdGVkPlNlbmQgdXBkYXRlcyB0by4uLjwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAge18ubWFwKHNlbmRVcGRhdGVzT3B0aW9ucywgb3B0aW9uID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgPntvcHRpb24ubGFiZWx9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCb3ggZmxleD17MX0gcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gZmxleERpcmVjdGlvbj17eyB0YWJsZXQ6IFwicm93XCJ9fSBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWJldHdlZW5cIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgd2lkdGg9XCI3MCVcIj5cbiAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19PlxuICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICBDYW4gR3Vlc3RzIGludml0ZSBvdGhlcnM/XG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiPlxuICAgICAgICAgICAgICAgIDxTd2l0Y2gxXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2d1ZXN0c0Nhbkludml0ZU90aGVyc31cbiAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17Y2hhbmdlR3Vlc3RzQ2FuSW52aXRlT3RoZXJzfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkJvdHRvbTogMjB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8Qm94IGZsZXg9ezF9IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IGZsZXhEaXJlY3Rpb249e3sgdGFibGV0OiBcInJvd1wifX0ganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1iZXR3ZWVuXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHdpZHRoPVwiNzAlXCI+XG4gICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtc3RhcnRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9J1Nob3VsZCBpdCBibG9jayB0aW1lIG9uIHlvdXIgY2FsZW5kYXInIGFyaWEtbGFiZWw9J0EgdG9vbHRpcCcgYmc9J3B1cnBsZS43MDAnIGNvbG9yPSd3aGl0ZSc+XG4gICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgIFdpbGwgdGhlIGV2ZW50IGJlIHRyYW5zcGFyZW50P1xuICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgPHNlbGVjdCB2YWx1ZT17dHJhbnNwYXJlbmN5fSBvbkNoYW5nZT17KGUpID0+IGNoYW5nZVRyYW5zcGFyZW5jeShlPy50YXJnZXQ/LnZhbHVlIGFzICdvcGFxdWUnIHwgJ3RyYW5zcGFyZW50Jyl9IGNsYXNzTmFtZT1cInNlbGVjdCBzZWxlY3QtcHJpbWFyeSB3LWZ1bGwgbWF4LXcteHNcIj5cbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgc2VsZWN0ZWQ+dHJhbnNwYXJlbmN5PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICB7Xy5tYXAodHJhbnNwYXJlbmN5T3B0aW9ucywgb3B0aW9uID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgPntvcHRpb24ubGFiZWx9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCb3ggZmxleD17MX0gcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gZmxleERpcmVjdGlvbj17eyB0YWJsZXQ6IFwicm93XCJ9fSBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWJldHdlZW5cIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgd2lkdGg9XCI3MCVcIj5cbiAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcCBsYWJlbD0nV2hvIGNhbiBzZWUgdGhlIGRldGFpbHMgb2YgdGhlIGV2ZW50IC0gYW55b25lIG9yIGp1c3QgYXR0ZW5kZWVzJyBiZz0ncHVycGxlLjcwMCcgY29sb3I9J3doaXRlJz5cbiAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgICAgICAgIFdobyBjYW4gc2VlIHRoaXMgZXZlbnQ/XG4gICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtZW5kXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXt2aXNpYmlsaXR5fSBvbkNoYW5nZT17KGUpID0+IGNoYW5nZVZpc2liaWxpdHkoZT8udGFyZ2V0Py52YWx1ZSBhcyAnZGVmYXVsdCcgfCAncHVibGljJyB8ICdwcml2YXRlJyl9IGNsYXNzTmFtZT1cInNlbGVjdCBzZWxlY3QtcHJpbWFyeSB3LWZ1bGwgbWF4LXcteHNcIj5cbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgc2VsZWN0ZWQ+dmlzaWJpbGl0eS4uLjwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAge18ubWFwKHZpc2liaWxpdHlPcHRpb25zLCBvcHRpb24gPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17b3B0aW9uLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICA+e29wdGlvbi5sYWJlbH08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgIDwvQm94PlxuXG4gICAgKVxuXG5cblxufVxuXG5leHBvcnQgZGVmYXVsdCBDTVBXU3RlcDFcblxuXG4iXX0=