"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const Switch_1 = __importDefault(require("@components/Switch"));
const TextField_1 = __importDefault(require("@components/TextField"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("@config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function EditCategoryStep2(props) {
    const [defaultAvailability, setDefaultAvailability] = (0, react_1.useState)(props?.defaultAvailability ?? false);
    const [defaultTimeBlocking, setDefaultTimeBlocking] = (0, react_1.useState)(props?.defaultTimeBlocking);
    const [beforeEvent, setBeforeEvent] = (0, react_1.useState)(props?.defaultTimeBlocking?.beforeEvent ?? 0);
    const [afterEvent, setAfterEvent] = (0, react_1.useState)(props?.defaultTimeBlocking?.afterEvent ?? 0);
    const [enableTimeBlocking, setEnableTimeBlocking] = (0, react_1.useState)(props?.defaultTimeBlocking?.beforeEvent > 0 || props?.defaultTimeBlocking?.afterEvent > 0);
    const setParentDefaultAvailability = props?.setParentDefaultAvailability;
    const setParentDefaultTimeBlocking = props?.setParentDefaultTimeBlocking;
    const changeDefaultAvailability = (value) => {
        setDefaultAvailability(value);
        setParentDefaultAvailability(value);
    };
    const changeDefaultTimeBlocking = (value) => {
        setDefaultTimeBlocking(value);
        setParentDefaultTimeBlocking(value);
    };
    const changeBeforeEvent = (value) => {
        setBeforeEvent(parseInt(value.replace(/[^0-9.]/g, ''), 10));
        setEnableTimeBlocking(parseInt(value.replace(/[^0-9.]/g, ''), 10) > 0);
        changeDefaultTimeBlocking({ ...defaultTimeBlocking, beforeEvent: parseInt(value.replace(/[^0-9.]/g, ''), 10) });
    };
    const changeAfterEvent = (value) => {
        setAfterEvent(parseInt(value.replace(/[^0-9.]/g, ''), 10));
        setEnableTimeBlocking(parseInt(value.replace(/[^0-9.]/g, ''), 10) > 0);
        changeDefaultTimeBlocking({ ...defaultTimeBlocking, afterEvent: parseInt(value.replace(/[^0-9.]/g, ''), 10) });
    };
    const onChangeEnableTimeBlocking = (value) => {
        setEnableTimeBlocking(value);
        if (!value) {
            changeDefaultTimeBlocking({ beforeEvent: 0, afterEvent: 0 });
        }
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 flex flex-col justify-center items-center", style: { minHeight: '70vh' }, children: [(0, jsx_runtime_1.jsxs)(Box_1.default, { style: { width: '90%' }, pt: { phone: 'm', tablet: 's' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", pt: { phone: 'xs', tablet: 's' }, children: "Set default availability / transparency for any new events with the given tag?" }), (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "comment", pt: { phone: 'xs', tablet: 's' }, children: defaultAvailability ? 'Transparent/not busy or available for meeting' : 'Opaque/busy or not available for meeting' })] }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { checked: defaultAvailability, onValueChange: changeDefaultAvailability, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { style: { width: '90%' }, pt: { phone: 'm', tablet: 's' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", pt: { phone: 'xs', tablet: 's' }, children: "Enable default buffer times for any new events with the given tag?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { checked: enableTimeBlocking, onValueChange: onChangeEnableTimeBlocking, style: { marginBottom: 20 } }) })] }), enableTimeBlocking
                    ? ((0, jsx_runtime_1.jsxs)(Box_1.default, { style: { width: '90%' }, pt: { phone: 'm', tablet: 's' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "space-between", alignItems: "center", p: { phone: 's', tablet: 'm' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Default prep time before event", trailingAccessory: (0, jsx_runtime_1.jsx)(Text_1.default, { children: "Minutes" }), value: `${beforeEvent}`, onChange: (e) => changeBeforeEvent(e?.target?.value), type: "number", style: { marginBottom: 20, width: '15%' } }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "space-between", alignItems: "center", p: { phone: 's', tablet: 'm' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Default debrief/review time after event", trailingAccessory: (0, jsx_runtime_1.jsx)(Text_1.default, { children: "Minutes" }), value: `${afterEvent}`, onChange: (e) => changeAfterEvent(e?.target?.value), type: "number", style: { marginBottom: 20, width: '15%' } }) })] })) : null] }) }));
}
exports.default = EditCategoryStep2;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdENhdGVnb3J5U3RlcDIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJFZGl0Q2F0ZWdvcnlTdGVwMi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFnQkEsZ0RBcUNDOztBQXJERCxpQ0FJYztBQUVkLGdFQUF3QztBQUN4QyxzRUFBNkM7QUFDN0MsaUVBQXdDO0FBQ3hDLG1FQUEwQztBQUcxQyx3RUFBOEM7QUFDOUMseURBQXFEO0FBQ3JELDhFQUFxRDtBQUU5QyxLQUFLLFVBQVUsa0JBQWtCLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFpRDtJQUNoRywwRkFBMEY7SUFDMUYsc0NBQXNDO0lBQ3RDLHlFQUF5RTtJQUN6RSwwQkFBZSxDQUFDLElBQUksQ0FBQyxJQUFBLDZCQUFhLEdBQUUsQ0FBQyxDQUFBO0lBQ3JDLElBQUksT0FBTyxDQUFBO0lBQ1gsSUFBSSxDQUFDO1FBQ0QsT0FBTyxHQUFHLE1BQU0saUJBQU8sQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRTtZQUN6Qyw2QkFBNkIsRUFBRSxLQUFLO2dCQUNoQyxPQUFPLEVBQUUsQ0FBQTtZQUNiLENBQUM7U0FDSixDQUFDLENBQUE7SUFDTixDQUFDO0lBQUMsT0FBTyxHQUFRLEVBQUUsQ0FBQztRQUNoQixJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssaUJBQU8sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUMvQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxFQUFFLENBQUE7UUFDMUQsQ0FBQzthQUFNLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUNqRCxrRUFBa0U7WUFDbEUscUVBQXFFO1lBQ3JFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLEVBQUUsQ0FBQTtRQUMxRCxDQUFDO1FBQ0QsTUFB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QUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFlBQy9ILHVCQUFDLG1CQUFTLElBQ04sS0FBSyxFQUFDLHlDQUF5QyxFQUMvQyxpQkFBaUIsRUFBRSx1QkFBQyxjQUFJLDBCQUFlLEVBQ3ZDLEtBQUssRUFBRSxHQUFHLFVBQVUsRUFBRSxFQUN0QixRQUFRLEVBQUUsQ0FBQyxDQUFnQyxFQUFFLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUNsRixJQUFJLEVBQUMsUUFBUSxFQUNiLEtBQUssRUFBRSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUMzQyxHQUNBLElBQ1IsQ0FDTCxDQUFDLENBQUMsQ0FBQyxJQUFJLElBRWQsR0FDSixDQUNULENBQUE7QUFDTCxDQUFDO0FBRUQsa0JBQWUsaUJBQWlCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtcbiAgdXNlU3RhdGUsXG4gIERpc3BhdGNoLFxuICBTZXRTdGF0ZUFjdGlvbixcbn0gZnJvbSAncmVhY3QnXG5cbmltcG9ydCBTd2l0Y2gxIGZyb20gJ0Bjb21wb25lbnRzL1N3aXRjaCdcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQGNvbXBvbmVudHMvVGV4dEZpZWxkJ1xuaW1wb3J0IEJveCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vQm94J1xuaW1wb3J0IFRleHQgZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL1RleHQnXG5pbXBvcnQgeyBEZWZhdWx0VGltZUJsb2NraW5nVHlwZSB9IGZyb20gJ0BsaWIvZGF0YVR5cGVzL0NhdGVnb3J5VHlwZSdcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBzdXBlcnRva2Vuc05vZGUgZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZSdcbmltcG9ydCB7IGJhY2tlbmRDb25maWcgfSBmcm9tICdAY29uZmlnL2JhY2tlbmRDb25maWcnXG5pbXBvcnQgU2Vzc2lvbiBmcm9tICdzdXBlcnRva2Vucy1ub2RlL3JlY2lwZS9zZXNzaW9uJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMgfTogeyByZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSB9KSB7XG4gICAgLy8gTm90aWNlIGhvdyB0aGUgc2VydmVyIHVzZXMgYEFQSWAgZnJvbSBgd2l0aFNTUkNvbnRleHRgLCBpbnN0ZWFkIG9mIHRoZSB0b3AtbGV2ZWwgYEFQSWAuXG4gICAgLy8gY29uc3QgU1NSID0gd2l0aFNTUkNvbnRleHQoeyByZXEgfSlcbiAgICAvLyB0aGlzIHJ1bnMgb24gdGhlIGJhY2tlbmQsIHNvIHdlIG11c3QgY2FsbCBpbml0IG9uIHN1cGVydG9rZW5zLW5vZGUgU0RLXG4gICAgc3VwZXJ0b2tlbnNOb2RlLmluaXQoYmFja2VuZENvbmZpZygpKVxuICAgIGxldCBzZXNzaW9uXG4gICAgdHJ5IHtcbiAgICAgICAgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb24uZ2V0U2Vzc2lvbihyZXEsIHJlcywge1xuICAgICAgICAgICAgb3ZlcnJpZGVHbG9iYWxDbGFpbVZhbGlkYXRvcnM6IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlRSWV9SRUZSRVNIX1RPS0VOKSB7XG4gICAgICAgICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICAgICAgfSBlbHNlIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5VTkFVVEhPUklTRUQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBmb3JjZSB0aGUgZnJvbnRlbmQgdG8gdHJ5IGFuZCByZWZyZXNoIHdoaWNoIHdpbGwgZmFpbFxuICAgICAgICAgICAgLy8gY2xlYXJpbmcgYWxsIGNvb2tpZXMgYW5kIHJlZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBsb2dpbiBzY3JlZW4uXG4gICAgICAgICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJcbiAgICB9XG5cbiAgICBpZiAoIXNlc3Npb24/LmdldFVzZXJJZCgpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWRpcmVjdDoge1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL1VzZXIvTG9naW4vVXNlckxvZ2luJyxcbiAgICAgICAgICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgIHN1Yjogc2Vzc2lvbi5nZXRVc2VySWQoKSxcbiAgICAgICAgfVxuICAgIH1cbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgICBkZWZhdWx0QXZhaWxhYmlsaXR5OiBib29sZWFuLFxuICAgIHNldFBhcmVudERlZmF1bHRBdmFpbGFiaWxpdHk6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPGJvb2xlYW4+PixcbiAgICBkZWZhdWx0VGltZUJsb2NraW5nOiBEZWZhdWx0VGltZUJsb2NraW5nVHlwZSxcbiAgICBzZXRQYXJlbnREZWZhdWx0VGltZUJsb2NraW5nPzogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248RGVmYXVsdFRpbWVCbG9ja2luZ1R5cGU+Pixcbn1cblxuZnVuY3Rpb24gRWRpdENhdGVnb3J5U3RlcDIocHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgW2RlZmF1bHRBdmFpbGFiaWxpdHksIHNldERlZmF1bHRBdmFpbGFiaWxpdHldID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/LmRlZmF1bHRBdmFpbGFiaWxpdHkgPz8gZmFsc2UpXG4gICAgY29uc3QgW2RlZmF1bHRUaW1lQmxvY2tpbmcsIHNldERlZmF1bHRUaW1lQmxvY2tpbmddID0gdXNlU3RhdGU8RGVmYXVsdFRpbWVCbG9ja2luZ1R5cGU+KHByb3BzPy5kZWZhdWx0VGltZUJsb2NraW5nKVxuICAgIGNvbnN0IFtiZWZvcmVFdmVudCwgc2V0QmVmb3JlRXZlbnRdID0gdXNlU3RhdGU8bnVtYmVyPihwcm9wcz8uZGVmYXVsdFRpbWVCbG9ja2luZz8uYmVmb3JlRXZlbnQgPz8gMClcbiAgICBjb25zdCBbYWZ0ZXJFdmVudCwgc2V0QWZ0ZXJFdmVudF0gPSB1c2VTdGF0ZTxudW1iZXI+KHByb3BzPy5kZWZhdWx0VGltZUJsb2NraW5nPy5hZnRlckV2ZW50ID8/IDApXG4gICAgY29uc3QgW2VuYWJsZVRpbWVCbG9ja2luZywgc2V0RW5hYmxlVGltZUJsb2NraW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHByb3BzPy5kZWZhdWx0VGltZUJsb2NraW5nPy5iZWZvcmVFdmVudCA+IDAgfHwgcHJvcHM/LmRlZmF1bHRUaW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQgPiAwKVxuICAgIFxuICAgIGNvbnN0IHNldFBhcmVudERlZmF1bHRBdmFpbGFiaWxpdHkgPSBwcm9wcz8uc2V0UGFyZW50RGVmYXVsdEF2YWlsYWJpbGl0eVxuICAgIGNvbnN0IHNldFBhcmVudERlZmF1bHRUaW1lQmxvY2tpbmcgPSBwcm9wcz8uc2V0UGFyZW50RGVmYXVsdFRpbWVCbG9ja2luZ1xuICAgIFxuICAgIGNvbnN0IGNoYW5nZURlZmF1bHRBdmFpbGFiaWxpdHkgPSAodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2V0RGVmYXVsdEF2YWlsYWJpbGl0eSh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50RGVmYXVsdEF2YWlsYWJpbGl0eSh2YWx1ZSlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY2hhbmdlRGVmYXVsdFRpbWVCbG9ja2luZyA9ICh2YWx1ZTogRGVmYXVsdFRpbWVCbG9ja2luZ1R5cGUpID0+IHtcbiAgICAgICAgc2V0RGVmYXVsdFRpbWVCbG9ja2luZyh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50RGVmYXVsdFRpbWVCbG9ja2luZyh2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VCZWZvcmVFdmVudCA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldEJlZm9yZUV2ZW50KHBhcnNlSW50KHZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpLCAxMCkpXG4gICAgICAgIHNldEVuYWJsZVRpbWVCbG9ja2luZyhwYXJzZUludCh2YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSwgMTApID4gMClcbiAgICAgICAgY2hhbmdlRGVmYXVsdFRpbWVCbG9ja2luZyh7IC4uLmRlZmF1bHRUaW1lQmxvY2tpbmcsIGJlZm9yZUV2ZW50OiBwYXJzZUludCh2YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSwgMTApIH0pXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlQWZ0ZXJFdmVudCA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldEFmdGVyRXZlbnQocGFyc2VJbnQodmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCAnJyksIDEwKSlcbiAgICAgICAgc2V0RW5hYmxlVGltZUJsb2NraW5nKHBhcnNlSW50KHZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpLCAxMCkgPiAwKVxuICAgICAgICBjaGFuZ2VEZWZhdWx0VGltZUJsb2NraW5nKHsgLi4uZGVmYXVsdFRpbWVCbG9ja2luZywgYWZ0ZXJFdmVudDogcGFyc2VJbnQodmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCAnJyksIDEwKSB9KVxuICAgIH1cblxuICAgIGNvbnN0IG9uQ2hhbmdlRW5hYmxlVGltZUJsb2NraW5nID0gKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHNldEVuYWJsZVRpbWVCbG9ja2luZyh2YWx1ZSlcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgY2hhbmdlRGVmYXVsdFRpbWVCbG9ja2luZyh7IGJlZm9yZUV2ZW50OiAwLCBhZnRlckV2ZW50OiAwIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgICA8Qm94IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyXCIgc3R5bGU9e3sgbWluSGVpZ2h0OiAnNzB2aCcgfX0+XG4gICAgICAgICAgICAgICAgPEJveCBzdHlsZT17eyB3aWR0aDogJzkwJScgfX0gcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBzdHlsZT17eyB3aWR0aDogJzkwJScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cIm9wdGlvbkhlYWRlclwiIHB0PXt7IHBob25lOiAneHMnLCB0YWJsZXQ6ICdzJ319PlNldCBkZWZhdWx0IGF2YWlsYWJpbGl0eSAvIHRyYW5zcGFyZW5jeSBmb3IgYW55IG5ldyBldmVudHMgd2l0aCB0aGUgZ2l2ZW4gdGFnPzwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiY29tbWVudFwiIHB0PXt7IHBob25lOiAneHMnLCB0YWJsZXQ6ICdzJyB9fT57ZGVmYXVsdEF2YWlsYWJpbGl0eSA/ICdUcmFuc3BhcmVudC9ub3QgYnVzeSBvciBhdmFpbGFibGUgZm9yIG1lZXRpbmcnIDogJ09wYXF1ZS9idXN5IG9yIG5vdCBhdmFpbGFibGUgZm9yIG1lZXRpbmcnfTwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2RlZmF1bHRBdmFpbGFiaWxpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17Y2hhbmdlRGVmYXVsdEF2YWlsYWJpbGl0eX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDIwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8Qm94IHN0eWxlPXt7IHdpZHRoOiAnOTAlJyB9fSBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCIgcHQ9e3sgcGhvbmU6ICd4cycsIHRhYmxldDogJ3MnIH19PkVuYWJsZSBkZWZhdWx0IGJ1ZmZlciB0aW1lcyBmb3IgYW55IG5ldyBldmVudHMgd2l0aCB0aGUgZ2l2ZW4gdGFnPzwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtlbmFibGVUaW1lQmxvY2tpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17b25DaGFuZ2VFbmFibGVUaW1lQmxvY2tpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyMCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVUaW1lQmxvY2tpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggc3R5bGU9e3sgd2lkdGg6ICc5MCUnIH19IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWJldHdlZW5cIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgcD17eyBwaG9uZTogJ3MnLCB0YWJsZXQ6ICdtJyB9fSBzdHlsZT17eyB3aWR0aDogJzYwJScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJEZWZhdWx0IHByZXAgdGltZSBiZWZvcmUgZXZlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsaW5nQWNjZXNzb3J5PXs8VGV4dD5NaW51dGVzPC9UZXh0Pn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YCR7YmVmb3JlRXZlbnR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiBjaGFuZ2VCZWZvcmVFdmVudChlPy50YXJnZXQ/LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDIwLCB3aWR0aDogJzE1JScgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+ICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIkRlZmF1bHQgZGVicmllZi9yZXZpZXcgdGltZSBhZnRlciBldmVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxpbmdBY2Nlc3Nvcnk9ezxUZXh0Pk1pbnV0ZXM8L1RleHQ+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtgJHthZnRlckV2ZW50fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlOiB7IHRhcmdldDogeyB2YWx1ZTogc3RyaW5nIH0gfSkgPT4gY2hhbmdlQWZ0ZXJFdmVudChlPy50YXJnZXQ/LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDIwLCB3aWR0aDogJzE1JScgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Cb3g+IFxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Cb3g+XG4gICAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFZGl0Q2F0ZWdvcnlTdGVwMlxuIl19