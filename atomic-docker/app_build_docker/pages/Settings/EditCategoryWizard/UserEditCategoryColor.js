"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const lodash_1 = __importDefault(require("lodash"));
const react_1 = require("react");
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const react_native_1 = require("react-native");
const colorsPalette_1 = require("@lib/theme/colorsPalette");
const react_color_circle_1 = __importDefault(require("@uiw/react-color-circle"));
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("@config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
const INITIAL_COLOR = colorsPalette_1.colorsPalette.blue30;
const colors = [
    '#20303C', '#43515C', '#66737C', '#858F96', '#A3ABB0', '#C2C7CB', '#E0E3E5', '#F2F4F5',
    '#3182C8', '#4196E0', '#459FED', '#57a8ef', '#8fc5f4', '#b5d9f8', '#daecfb', '#ecf5fd',
    '#00AAAF', '#32BABC', '#3CC7C5', '#64D4D2', '#8BDFDD', '#B1E9E9', '#D8F4F4', '#EBF9F9',
    '#00A65F', '#32B76C', '#65C888', '#84D3A0', '#A3DEB8', '#C1E9CF', '#E8F7EF', '#F3FBF7',
    '#E2902B', '#FAA030', '#FAAD4D', '#FBBD71', '#FCCE94', '#FDDEB8', '#FEEFDB', '#FEF7ED',
    '#D9644A', '#E66A4E', '#F27052', '#F37E63', '#F7A997', '#FAC6BA', '#FCE2DC', '#FEF0ED',
    '#CF262F', '#EE2C38', '#F2564D', '#F57871', '#F79A94', '#FABBB8', '#FCDDDB', '#FEEEED',
    '#8B1079', '#A0138E', '#B13DAC', '#C164BD', '#D08BCD', '#E0B1DE', '#EFD8EE', '#F7EBF7'
];
function UserEditCategoryColor(props) {
    const [color, setColor] = (0, react_1.useState)(props?.color ?? INITIAL_COLOR);
    const [customColors, setCustomColors] = (0, react_1.useState)([]);
    const [paletteChange, setPaletteChange] = (0, react_1.useState)(false);
    const setParentColor = props.setParentColor;
    const setParentEnableColor = props.setParentEnableSelectColor;
    const close = () => {
        setParentEnableColor(false);
    };
    const onSubmit = (color) => {
        customColors.push(color);
        setColor(color);
        setCustomColors(lodash_1.default.cloneDeep(customColors));
        setPaletteChange(false);
        setParentColor(color);
    };
    const onValueChange = (value) => {
        setColor(value);
        setPaletteChange(false);
        setParentColor(value);
    };
    const onPaletteValueChange = (value) => {
        setColor(value);
        setPaletteChange(true);
        setParentColor(value);
    };
    const paletteValue = paletteChange ? (color || INITIAL_COLOR) : undefined;
    const pickerValue = !paletteChange ? (color || INITIAL_COLOR) : undefined;
    return ((0, jsx_runtime_1.jsxs)(Box_1.default, { style: { width: '100%' }, flex: 1, justifyContent: "center", alignItems: "center", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { style: { width: '100%' }, justifyContent: "center", alignItems: "center", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", p: { phone: 'xs', tablet: 's' }, children: "Choose a color for your tag" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, style: { width: '100%' }, justifyContent: "center", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_color_circle_1.default, { colors: ['#039be5', '#7986cb', '#33b679', '#8e24aa', '#e67c73', '#f6c026', '#f5511d', '#616161', '#3f51b5', '#0b8043', '#d60000'], color: color, onChange: (color) => {
                        onPaletteValueChange(color.hex);
                    } }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { justifyContent: "center", alignItems: "center", p: { phone: 'xs', tablet: 's' }, children: (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: close, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Close" }) }) })] }));
}
exports.default = UserEditCategoryColor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlckVkaXRDYXRlZ29yeUNvbG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVXNlckVkaXRDYXRlZ29yeUNvbG9yLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQWlCQSxnREFxQ0M7O0FBdERELG9EQUFzQjtBQUN0QixpQ0FJYztBQUVkLGlFQUF3QztBQUN4QyxtRUFBMEM7QUFDMUMsK0NBQXdDO0FBQ3hDLDREQUFrRTtBQUNsRSxpRkFBNEM7QUFFNUMsd0VBQThDO0FBQzlDLHlEQUFxRDtBQUNyRCw4RUFBcUQ7QUFFOUMsS0FBSyxVQUFVLGtCQUFrQixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBaUQ7SUFDaEcsMEZBQTBGO0lBQzFGLHNDQUFzQztJQUN0Qyx5RUFBeUU7SUFDekUsMEJBQWUsQ0FBQyxJQUFJLENBQUMsSUFBQSw2QkFBYSxHQUFFLENBQUMsQ0FBQTtJQUNyQyxJQUFJLE9BQU8sQ0FBQTtJQUNYLElBQUksQ0FBQztRQUNELE9BQU8sR0FBRyxNQUFNLGlCQUFPLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDekMsNkJBQTZCLEVBQUUsS0FBSztnQkFDaEMsT0FBTyxFQUFFLENBQUE7WUFDYixDQUFDO1NBQ0osQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUFDLE9BQU8sR0FBUSxFQUFFLENBQUM7UUFDaEIsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFPLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDL0MsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsRUFBRSxDQUFBO1FBQzFELENBQUM7YUFBTSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssaUJBQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDakQsa0VBQWtFO1lBQ2xFLHFFQUFxRTtZQUNyRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsZUFBZSxFQUFFLGVBQWUs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UyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFFLEVBQ25JLEtBQUssRUFBRSxLQUFLLEVBQ1osUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7d0JBQ2hCLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDcEMsQ0FBQyxHQUNILEdBQ0EsRUFDTix1QkFBQyxhQUFHLElBQUMsY0FBYyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsUUFBUSxFQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxZQUM1RSx1QkFBQyx3QkFBUyxJQUFDLE9BQU8sRUFBRSxLQUFLLFlBQ3JCLHVCQUFDLGNBQUksSUFBQyxPQUFPLEVBQUMsWUFBWSxzQkFFbkIsR0FDQyxHQUNWLElBQ0osQ0FDVCxDQUFBO0FBQ0wsQ0FBQztBQUdELGtCQUFlLHFCQUFxQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IFJlYWN0LCB7XG4gICAgdXNlU3RhdGUsXG4gICAgRGlzcGF0Y2gsXG4gICAgU2V0U3RhdGVBY3Rpb24sXG59IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgQm94IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9Cb3gnXG5pbXBvcnQgVGV4dCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vVGV4dCdcbmltcG9ydCB7IFByZXNzYWJsZSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSdcbmltcG9ydCB7IGNvbG9yc1BhbGV0dGUgYXMgQ29sb3JzIH0gZnJvbSAnQGxpYi90aGVtZS9jb2xvcnNQYWxldHRlJ1xuaW1wb3J0IENpcmNsZSBmcm9tICdAdWl3L3JlYWN0LWNvbG9yLWNpcmNsZSdcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBzdXBlcnRva2Vuc05vZGUgZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZSdcbmltcG9ydCB7IGJhY2tlbmRDb25maWcgfSBmcm9tICdAY29uZmlnL2JhY2tlbmRDb25maWcnXG5pbXBvcnQgU2Vzc2lvbiBmcm9tICdzdXBlcnRva2Vucy1ub2RlL3JlY2lwZS9zZXNzaW9uJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMgfTogeyByZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSB9KSB7XG4gICAgLy8gTm90aWNlIGhvdyB0aGUgc2VydmVyIHVzZXMgYEFQSWAgZnJvbSBgd2l0aFNTUkNvbnRleHRgLCBpbnN0ZWFkIG9mIHRoZSB0b3AtbGV2ZWwgYEFQSWAuXG4gICAgLy8gY29uc3QgU1NSID0gd2l0aFNTUkNvbnRleHQoeyByZXEgfSlcbiAgICAvLyB0aGlzIHJ1bnMgb24gdGhlIGJhY2tlbmQsIHNvIHdlIG11c3QgY2FsbCBpbml0IG9uIHN1cGVydG9rZW5zLW5vZGUgU0RLXG4gICAgc3VwZXJ0b2tlbnNOb2RlLmluaXQoYmFja2VuZENvbmZpZygpKVxuICAgIGxldCBzZXNzaW9uXG4gICAgdHJ5IHtcbiAgICAgICAgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb24uZ2V0U2Vzc2lvbihyZXEsIHJlcywge1xuICAgICAgICAgICAgb3ZlcnJpZGVHbG9iYWxDbGFpbVZhbGlkYXRvcnM6IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlRSWV9SRUZSRVNIX1RPS0VOKSB7XG4gICAgICAgICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICAgICAgfSBlbHNlIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5VTkFVVEhPUklTRUQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBmb3JjZSB0aGUgZnJvbnRlbmQgdG8gdHJ5IGFuZCByZWZyZXNoIHdoaWNoIHdpbGwgZmFpbFxuICAgICAgICAgICAgLy8gY2xlYXJpbmcgYWxsIGNvb2tpZXMgYW5kIHJlZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBsb2dpbiBzY3JlZW4uXG4gICAgICAgICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJcbiAgICB9XG5cbiAgICBpZiAoIXNlc3Npb24/LmdldFVzZXJJZCgpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWRpcmVjdDoge1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL1VzZXIvTG9naW4vVXNlckxvZ2luJyxcbiAgICAgICAgICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgIHN1Yjogc2Vzc2lvbi5nZXRVc2VySWQoKSxcbiAgICAgICAgfVxuICAgIH1cbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgICBjb2xvcjogc3RyaW5nLFxuICAgIHNldFBhcmVudENvbG9yOiAoY29sb3I6IHN0cmluZykgPT4gdm9pZCxcbiAgICBzZXRQYXJlbnRFbmFibGVTZWxlY3RDb2xvcjogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248Ym9vbGVhbj4+LFxufVxuXG5cbmNvbnN0IElOSVRJQUxfQ09MT1IgPSBDb2xvcnMuYmx1ZTMwXG5jb25zdCBjb2xvcnMgPSBbXG4gICcjMjAzMDNDJywgJyM0MzUxNUMnLCAnIzY2NzM3QycsICcjODU4Rjk2JywgJyNBM0FCQjAnLCAnI0MyQzdDQicsICcjRTBFM0U1JywgJyNGMkY0RjUnLFxuICAnIzMxODJDOCcsICcjNDE5NkUwJywgJyM0NTlGRUQnLCAnIzU3YThlZicsICcjOGZjNWY0JywgJyNiNWQ5ZjgnLCAnI2RhZWNmYicsICcjZWNmNWZkJyxcbiAgJyMwMEFBQUYnLCAnIzMyQkFCQycsICcjM0NDN0M1JywgJyM2NEQ0RDInLCAnIzhCREZERCcsICcjQjFFOUU5JywgJyNEOEY0RjQnLCAnI0VCRjlGOScsXG4gICcjMDBBNjVGJywgJyMzMkI3NkMnLCAnIzY1Qzg4OCcsICcjODREM0EwJywgJyNBM0RFQjgnLCAnI0MxRTlDRicsICcjRThGN0VGJywgJyNGM0ZCRjcnLFxuICAnI0UyOTAyQicsICcjRkFBMDMwJywgJyNGQUFENEQnLCAnI0ZCQkQ3MScsICcjRkNDRTk0JywgJyNGRERFQjgnLCAnI0ZFRUZEQicsICcjRkVGN0VEJyxcbiAgJyNEOTY0NEEnLCAnI0U2NkE0RScsICcjRjI3MDUyJywgJyNGMzdFNjMnLCAnI0Y3QTk5NycsICcjRkFDNkJBJywgJyNGQ0UyREMnLCAnI0ZFRjBFRCcsXG4gICcjQ0YyNjJGJywgJyNFRTJDMzgnLCAnI0YyNTY0RCcsICcjRjU3ODcxJywgJyNGNzlBOTQnLCAnI0ZBQkJCOCcsICcjRkNERERCJywgJyNGRUVFRUQnLFxuICAnIzhCMTA3OScsICcjQTAxMzhFJywgJyNCMTNEQUMnLCAnI0MxNjRCRCcsICcjRDA4QkNEJywgJyNFMEIxREUnLCAnI0VGRDhFRScsICcjRjdFQkY3J1xuXVxuXG5mdW5jdGlvbiBVc2VyRWRpdENhdGVnb3J5Q29sb3IocHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgW2NvbG9yLCBzZXRDb2xvcl0gPSB1c2VTdGF0ZTxzdHJpbmc+KHByb3BzPy5jb2xvciA/PyBJTklUSUFMX0NPTE9SKVxuICAgIGNvbnN0IFtjdXN0b21Db2xvcnMsIHNldEN1c3RvbUNvbG9yc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pXG4gICAgY29uc3QgW3BhbGV0dGVDaGFuZ2UsIHNldFBhbGV0dGVDaGFuZ2VdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG5cbiAgICBjb25zdCBzZXRQYXJlbnRDb2xvciA9IHByb3BzLnNldFBhcmVudENvbG9yXG4gICAgY29uc3Qgc2V0UGFyZW50RW5hYmxlQ29sb3IgPSBwcm9wcy5zZXRQYXJlbnRFbmFibGVTZWxlY3RDb2xvclxuICAgIFxuICAgIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgICAgICBzZXRQYXJlbnRFbmFibGVDb2xvcihmYWxzZSlcbiAgICB9XG5cbiAgICBjb25zdCBvblN1Ym1pdCA9IChjb2xvcjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGN1c3RvbUNvbG9ycy5wdXNoKGNvbG9yKVxuICAgICAgICBzZXRDb2xvcihjb2xvcilcbiAgICAgICAgc2V0Q3VzdG9tQ29sb3JzKF8uY2xvbmVEZWVwKGN1c3RvbUNvbG9ycykpXG4gICAgICAgIHNldFBhbGV0dGVDaGFuZ2UoZmFsc2UpXG4gICAgICAgIHNldFBhcmVudENvbG9yKGNvbG9yKVxuICAgIH1cblxuICAgIGNvbnN0IG9uVmFsdWVDaGFuZ2UgPSAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICBzZXRDb2xvcih2YWx1ZSlcbiAgICAgICAgc2V0UGFsZXR0ZUNoYW5nZShmYWxzZSlcbiAgICAgICAgc2V0UGFyZW50Q29sb3IodmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3Qgb25QYWxldHRlVmFsdWVDaGFuZ2UgPSAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICBzZXRDb2xvcih2YWx1ZSlcbiAgICAgICAgc2V0UGFsZXR0ZUNoYW5nZSh0cnVlKVxuICAgICAgICBzZXRQYXJlbnRDb2xvcih2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBwYWxldHRlVmFsdWUgPSBwYWxldHRlQ2hhbmdlID8gKGNvbG9yIHx8IElOSVRJQUxfQ09MT1IpIDogdW5kZWZpbmVkXG4gICAgY29uc3QgcGlja2VyVmFsdWUgPSAhcGFsZXR0ZUNoYW5nZSA/IChjb2xvciB8fCBJTklUSUFMX0NPTE9SKSA6IHVuZGVmaW5lZFxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEJveCBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX0gZmxleD17MX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8Qm94IHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCIgcD17eyBwaG9uZTogJ3hzJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgICAgICAgIENob29zZSBhIGNvbG9yIGZvciB5b3VyIHRhZ1xuICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4PXsxfSBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPENpcmNsZVxuICAgICAgICAgICAgICAgICAgICBjb2xvcnM9e1sgJyMwMzliZTUnLCAnIzc5ODZjYicsICcjMzNiNjc5JywgJyM4ZTI0YWEnLCAnI2U2N2M3MycsICcjZjZjMDI2JywgJyNmNTUxMWQnLCAnIzYxNjE2MScsICcjM2Y1MWI1JywgJyMwYjgwNDMnLCAnI2Q2MDAwMCcgXX1cbiAgICAgICAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGNvbG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblBhbGV0dGVWYWx1ZUNoYW5nZShjb2xvci5oZXgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3gganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgcD17eyBwaG9uZTogJ3hzJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgICAgPFByZXNzYWJsZSBvblByZXNzPXtjbG9zZX0+XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBDbG9zZVxuICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgPC9QcmVzc2FibGU+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgPC9Cb3g+XG4gICAgKVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJFZGl0Q2F0ZWdvcnlDb2xvclxuXG5cbiJdfQ==