"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const router_1 = require("next/router");
const react_native_1 = require("react-native");
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("@config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
const AtomAgentSettings_1 = __importDefault(require("@components/Settings/AtomAgentSettings")); // Import the new component
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function UserViewSettings() {
    const router = (0, router_1.useRouter)();
    const navigateToChangePass = () => router.push({ pathname: '/User/Login/UserChangePassword' });
    const navigateToCalendarIntegrations = () => router.push({ pathname: '/Settings/UserViewCalendarAndContactIntegrations' });
    const navigateToPrimaryCalendar = () => router.push({ pathname: '/Settings/UserSelectPrimaryCalendarForSettings' });
    const navigateToCategories = () => router.push({ pathname: '/Settings/UserEditCategories' });
    const navigateToCalendarPreferences = () => router.push({ pathname: '/Settings/UserCalendarPreferences' });
    const navigateToUserDeleteAccount = () => router.push({ pathname: '/User/Delete/UserDeleteAccount' });
    const navigateToListUserContactInfo = () => router.push({ pathname: '/Contact/ListUserContactInfo' });
    const navigateToUserViewAutopilot = () => router.push({ pathname: '/Settings/Autopilot/UserViewAutopilot' });
    const navigateToUserChatMeetingPreferences = () => router.push({ pathname: '/Settings/UserChatMeetingPreferences' });
    return ((0, jsx_runtime_1.jsx)(react_native_1.ScrollView, { style: { flex: 1, width: '100%', minHeight: '65vh', maxHeight: '65vh' }, contentContainerStyle: { alignItems: 'center' }, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", minHeight: "70vh", children: [(0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToListUserContactInfo, children: "Your Contact Info" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToUserViewAutopilot, children: "Autopilot" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToChangePass, children: "Change Password" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToCalendarIntegrations, children: "Calendar & Contact Integrations" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToPrimaryCalendar, children: "Select Primary Calendar" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToCalendarPreferences, children: "Calendar Preferences" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToCategories, children: "Edit Tags" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", onPress: navigateToUserChatMeetingPreferences, children: "Meeting Preferences via Chat" }) }), (0, jsx_runtime_1.jsx)("div", { className: "pt-3", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "redLink", onPress: navigateToUserDeleteAccount, children: "Delete Account" }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { width: "100%", alignItems: "center", mt: "l", children: [" ", (0, jsx_runtime_1.jsx)(AtomAgentSettings_1.default, {})] }), typeof window !== 'undefined' && !window.__TAURI__ && ((0, jsx_runtime_1.jsxs)(Box_1.default, { width: "100%", alignItems: "center", mt: "l", children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "sectionHeader", children: "Cloud Settings" }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: "s", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Cloud Version Available" }) })] }))] }) }));
}
exports.default = UserViewSettings;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlclZpZXdTZXR0aW5ncy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlVzZXJWaWV3U2V0dGluZ3MudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBV0EsZ0RBcUNDOztBQS9DRCxpRUFBd0M7QUFDeEMsbUVBQTBDO0FBQzFDLHdDQUF1QztBQUN2QywrQ0FBeUM7QUFFekMsd0VBQThDO0FBQzlDLHlEQUFxRDtBQUNyRCw4RUFBcUQ7QUFDckQsK0ZBQXVFLENBQUMsMkJBQTJCO0FBRTVGLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQWlEO0lBQ2hHLDBGQUEwRjtJQUMxRixzQ0FBc0M7SUFDdEMseUVBQXlFO0lBQ3pFLDBCQUFlLENBQUMsSUFBSSxDQUFDLElBQUEsNkJBQWEsR0FBRSxDQUFDLENBQUE7SUFDckMsSUFBSSxPQUFPLENBQUE7SUFDWCxJQUFJLENBQUM7UUFDRCxPQUFPLEdBQUcsTUFBTSxpQkFBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLDZCQUE2QixFQUFFLEtBQUs7Z0JBQ2hDLE9BQU8sRUFBRSxDQUFBO1lBQ2IsQ0FBQztTQUNKLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFBQyxPQUFPLEdBQVEsRUFBRSxDQUFDO1FBQ2hCLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQy9DLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLEVBQUUsQ0FBQTtRQUMxRCxDQUFDO2FBQU0sSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ2pELGtFQUFrRTtZQUNsRSxxRUFBcUU7WUFDckUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsRUFBRSxDQUFBO1FBQzFELENB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QUNLLENBQ2QsQ0FBQTtBQUVILENBQUM7QUFFRCxrQkFBZSxnQkFBZ0IsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBCb3ggZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL0JveCdcbmltcG9ydCBUZXh0IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9UZXh0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgeyBTY3JvbGxWaWV3IH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHN1cGVydG9rZW5zTm9kZSBmcm9tICdzdXBlcnRva2Vucy1ub2RlJ1xuaW1wb3J0IHsgYmFja2VuZENvbmZpZyB9IGZyb20gJ0Bjb25maWcvYmFja2VuZENvbmZpZydcbmltcG9ydCBTZXNzaW9uIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUvcmVjaXBlL3Nlc3Npb24nXG5pbXBvcnQgQXRvbUFnZW50U2V0dGluZ3MgZnJvbSAnQGNvbXBvbmVudHMvU2V0dGluZ3MvQXRvbUFnZW50U2V0dGluZ3MnOyAvLyBJbXBvcnQgdGhlIG5ldyBjb21wb25lbnRcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzIH06IHsgcmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UgfSkge1xuICAgIC8vIE5vdGljZSBob3cgdGhlIHNlcnZlciB1c2VzIGBBUElgIGZyb20gYHdpdGhTU1JDb250ZXh0YCwgaW5zdGVhZCBvZiB0aGUgdG9wLWxldmVsIGBBUElgLlxuICAgIC8vIGNvbnN0IFNTUiA9IHdpdGhTU1JDb250ZXh0KHsgcmVxIH0pXG4gICAgLy8gdGhpcyBydW5zIG9uIHRoZSBiYWNrZW5kLCBzbyB3ZSBtdXN0IGNhbGwgaW5pdCBvbiBzdXBlcnRva2Vucy1ub2RlIFNES1xuICAgIHN1cGVydG9rZW5zTm9kZS5pbml0KGJhY2tlbmRDb25maWcoKSlcbiAgICBsZXQgc2Vzc2lvblxuICAgIHRyeSB7XG4gICAgICAgIHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmdldFNlc3Npb24ocmVxLCByZXMsIHtcbiAgICAgICAgICAgIG92ZXJyaWRlR2xvYmFsQ2xhaW1WYWxpZGF0b3JzOiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5UUllfUkVGUkVTSF9UT0tFTikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyLnR5cGUgPT09IFNlc3Npb24uRXJyb3IuVU5BVVRIT1JJU0VEKSB7XG4gICAgICAgICAgICAvLyB0aGlzIHdpbGwgZm9yY2UgdGhlIGZyb250ZW5kIHRvIHRyeSBhbmQgcmVmcmVzaCB3aGljaCB3aWxsIGZhaWxcbiAgICAgICAgICAgIC8vIGNsZWFyaW5nIGFsbCBjb29raWVzIGFuZCByZWRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUgbG9naW4gc2NyZWVuLlxuICAgICAgICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyXG4gICAgfVxuXG4gICAgaWYgKCFzZXNzaW9uPy5nZXRVc2VySWQoKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9Vc2VyL0xvZ2luL1VzZXJMb2dpbicsXG4gICAgICAgICAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wczoge1xuICAgICAgICBzdWI6IHNlc3Npb24uZ2V0VXNlcklkKCksXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIFVzZXJWaWV3U2V0dGluZ3MoKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpXG5cbiAgY29uc3QgbmF2aWdhdGVUb0NoYW5nZVBhc3MgPSAoKSA9PiByb3V0ZXIucHVzaCh7IHBhdGhuYW1lOiAnL1VzZXIvTG9naW4vVXNlckNoYW5nZVBhc3N3b3JkJyB9KVxuXG4gIGNvbnN0IG5hdmlnYXRlVG9DYWxlbmRhckludGVncmF0aW9ucyA9ICgpID0+IHJvdXRlci5wdXNoKHsgcGF0aG5hbWU6ICcvU2V0dGluZ3MvVXNlclZpZXdDYWxlbmRhckFuZENvbnRhY3RJbnRlZ3JhdGlvbnMnIH0pXG5cbiAgY29uc3QgbmF2aWdhdGVUb1ByaW1hcnlDYWxlbmRhciA9ICgpID0+IHJvdXRlci5wdXNoKHsgcGF0aG5hbWU6ICcvU2V0dGluZ3MvVXNlclNlbGVjdFByaW1hcnlDYWxlbmRhckZvclNldHRpbmdzJyB9KVxuXG4gIGNvbnN0IG5hdmlnYXRlVG9DYXRlZ29yaWVzID0gKCkgPT4gcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9TZXR0aW5ncy9Vc2VyRWRpdENhdGVnb3JpZXMnIH0pXG5cbiAgY29uc3QgbmF2aWdhdGVUb0NhbGVuZGFyUHJlZmVyZW5jZXMgPSAoKSA9PiByb3V0ZXIucHVzaCh7IHBhdGhuYW1lOiAnL1NldHRpbmdzL1VzZXJDYWxlbmRhclByZWZlcmVuY2VzJ30pXG5cbiAgY29uc3QgbmF2aWdhdGVUb1VzZXJEZWxldGVBY2NvdW50ID0gKCkgPT4gcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9Vc2VyL0RlbGV0ZS9Vc2VyRGVsZXRlQWNjb3VudCd9KVxuXG4gIGNvbnN0IG5hdmlnYXRlVG9MaXN0VXNlckNvbnRhY3RJbmZvID0gKCkgPT4gcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9Db250YWN0L0xpc3RVc2VyQ29udGFjdEluZm8nfSlcblxuICBjb25zdCBuYXZpZ2F0ZVRvVXNlclZpZXdBdXRvcGlsb3QgPSAoKSA9PiByb3V0ZXIucHVzaCh7IHBhdGhuYW1lOiAnL1NldHRpbmdzL0F1dG9waWxvdC9Vc2VyVmlld0F1dG9waWxvdCd9KVxuXG4gIGNvbnN0IG5hdmlnYXRlVG9Vc2VyQ2hhdE1lZXRpbmdQcmVmZXJlbmNlcyA9ICgpID0+IHJvdXRlci5wdXNoKHsgcGF0aG5hbWU6ICcvU2V0dGluZ3MvVXNlckNoYXRNZWV0aW5nUHJlZmVyZW5jZXMnfSlcblxuICByZXR1cm4gKFxuICAgIDxTY3JvbGxWaWV3IHN0eWxlPXt7IGZsZXg6IDEsIHdpZHRoOiAnMTAwJScsIG1pbkhlaWdodDogJzY1dmgnLCBtYXhIZWlnaHQ6ICc2NXZoJyB9fSBjb250ZW50Q29udGFpbmVyU3R5bGU9e3sgYWxpZ25JdGVtczogJ2NlbnRlcid9fT5cbiAgICAgIDxCb3ggZmxleD17MX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgbWluSGVpZ2h0PVwiNzB2aFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTNcIj5cbiAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiIG9uUHJlc3M9e25hdmlnYXRlVG9MaXN0VXNlckNvbnRhY3RJbmZvfT5cbiAgICAgICAgICAgIFlvdXIgQ29udGFjdCBJbmZvXG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0zXCI+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIiBvblByZXNzPXtuYXZpZ2F0ZVRvVXNlclZpZXdBdXRvcGlsb3R9PlxuICAgICAgICAgICAgQXV0b3BpbG90XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0zXCI+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIiBvblByZXNzPXtuYXZpZ2F0ZVRvQ2hhbmdlUGFzc30+XG4gICAgICAgICAgICBDaGFuZ2UgUGFzc3dvcmRcbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTNcIj5cbiAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiIG9uUHJlc3M9e25hdmlnYXRlVG9DYWxlbmRhckludGVncmF0aW9uc30+XG4gICAgICAgICAgICBDYWxlbmRhciAmIENvbnRhY3QgSW50ZWdyYXRpb25zXG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0zXCI+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIiBvblByZXNzPXtuYXZpZ2F0ZVRvUHJpbWFyeUNhbGVuZGFyfT5cbiAgICAgICAgICAgIFNlbGVjdCBQcmltYXJ5IENhbGVuZGFyXG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0zXCI+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIiBvblByZXNzPXtuYXZpZ2F0ZVRvQ2FsZW5kYXJQcmVmZXJlbmNlc30+XG4gICAgICAgICAgICBDYWxlbmRhciBQcmVmZXJlbmNlc1xuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtM1wiPlxuICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCIgb25QcmVzcz17bmF2aWdhdGVUb0NhdGVnb3JpZXN9PlxuICAgICAgICAgICAgRWRpdCBUYWdzXG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0zXCI+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIiBvblByZXNzPXtuYXZpZ2F0ZVRvVXNlckNoYXRNZWV0aW5nUHJlZmVyZW5jZXN9PlxuICAgICAgICAgICAgTWVldGluZyBQcmVmZXJlbmNlcyB2aWEgQ2hhdFxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtM1wiPlxuICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJyZWRMaW5rXCIgb25QcmVzcz17bmF2aWdhdGVUb1VzZXJEZWxldGVBY2NvdW50fT5cbiAgICAgICAgICAgIERlbGV0ZSBBY2NvdW50XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQXRvbSBBZ2VudCBTZXR0aW5ncyBTZWN0aW9uICovfVxuICAgICAgICA8Qm94IHdpZHRoPVwiMTAwJVwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBtdD1cImxcIj4gey8qIEVuc3VyZSBpdCB0YWtlcyBhcHByb3ByaWF0ZSB3aWR0aCBhbmQgaGFzIHNvbWUgbWFyZ2luICovfVxuICAgICAgICAgIDxBdG9tQWdlbnRTZXR0aW5ncyAvPlxuICAgICAgICA8L0JveD5cbiAgICAgICAgXG4gICAgICAgIHsvKiBDbG91ZCBTZXR0aW5ncyBTZWN0aW9uICovfVxuICAgICAgICB7dHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvdy5fX1RBVVJJX18gJiYgKFxuICAgICAgICAgIDxCb3ggd2lkdGg9XCIxMDAlXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIG10PVwibFwiPlxuICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cInNlY3Rpb25IZWFkZXJcIj5DbG91ZCBTZXR0aW5nczwvVGV4dD5cbiAgICAgICAgICAgIDxCb3ggbXQ9XCJzXCI+XG4gICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgICAgQ2xvdWQgVmVyc2lvbiBBdmFpbGFibGVcbiAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgICl9XG4gICAgICA8L0JveD5cbiAgICA8L1Njcm9sbFZpZXc+XG4gIClcblxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VyVmlld1NldHRpbmdzXG4iXX0=