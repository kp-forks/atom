"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
/* eslint-disable react/no-unknown-property */
const react_1 = require("react");
const react_2 = require("@chakra-ui/react");
const client_1 = require("@apollo/client");
const date_utils_1 = require("@lib/date-utils");
const Box_1 = __importDefault(require("@components/common/Box"));
const Button_1 = __importDefault(require("@components/Button"));
const router_1 = require("next/router");
const Text_1 = __importDefault(require("@components/common/Text"));
const RegularCard_1 = __importDefault(require("@components/RegularCard"));
const listMeetingAssists_1 = __importDefault(require("@lib/apollo/gql/listMeetingAssists"));
const theme_1 = require("@lib/theme/theme");
const react_native_1 = require("react-native");
const UserMeetingAssistHelper_1 = require("@lib/Assist/UserMeetingAssistHelper");
const themed_1 = require("@rneui/themed");
// IoMdTrash
const io_1 = require("react-icons/io");
const user_context_1 = require("@lib/user-context");
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
const getFrequencyVocab = (value) => {
    switch (value) {
        case 'daily':
            return 'days';
        case 'weekly':
            return 'weeks';
        case 'monthly':
            return 'months';
        case 'yearly':
            return 'years';
    }
};
function MeetingAssistItem(props) {
    const [isDelete, setIsDelete] = (0, react_1.useState)(false);
    const router = (0, router_1.useRouter)();
    const toast = (0, react_2.useToast)();
    const deleteItem = async () => {
        try {
            await (0, UserMeetingAssistHelper_1.deleteMeetingAssistGivenId)(props?.client, props?.item?.id);
            await props?.refetch();
        }
        catch (e) {
            console.log(e, ' unable to delete item');
            toast({
                status: 'error',
                title: 'Error',
                description: 'Something went wrong with deletion',
                duration: 9000,
                isClosable: true,
            });
        }
    };
    const navigateToEditMeetingAssist = () => {
        router.push({ pathname: '/Assist/UserEditMeetingAssist', query: { meetingId: props?.item?.id } });
    };
    const enableDeletion = async () => {
        try {
            await deleteItem();
        }
        catch (e) {
            console.log(e, ' unable to delete');
        }
        setIsDelete(false);
    };
    const disableDeletion = () => setIsDelete(false);
    const showDeletion = () => setIsDelete(true);
    return ((0, jsx_runtime_1.jsxs)(RegularCard_1.default, { children: [(0, jsx_runtime_1.jsxs)(Box_1.default, { justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { pt: { phone: 'm', tablet: 's' }, variant: "cardTitle", style: { color: theme_1.palette.darkGray }, children: props?.item?.summary }), (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", style: { color: theme_1.palette.darkGray }, children: props?.item?.notes }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsxs)(Text_1.default, { variant: "cardCaption", children: ["Time Window Start: ", (0, date_utils_1.dayjs)(props?.item?.windowStartDate).format('MM/DD/YYYY h:mm A')] }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsxs)(Text_1.default, { variant: "cardCaption", children: ["Time Window End: ", (0, date_utils_1.dayjs)(props?.item?.windowEndDate).format('MM/DD/YYYY h:mm A')] }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsxs)(Text_1.default, { variant: "cardCaption", children: ["Duration: ", props?.item?.duration] }) }), props?.item?.location?.address?.streetName
                        ? ((0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", style: { color: theme_1.palette.darkGray }, children: props?.item?.location?.address?.streetName }) })) : null, props?.item?.conferenceApp === 'zoom'
                        ? ((0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", style: { color: theme_1.palette.darkGray }, children: "Conference App: Zoom" }) })) : null, props?.item?.conferenceApp === 'google'
                        ? ((0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", style: { color: theme_1.palette.darkGray }, children: "Conference App: Google" }) })) : null, (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsxs)(Text_1.default, { variant: "cardCaption", children: ["Responded: ", props?.item?.attendeeRespondedCount] }) }), props?.item?.cancelled
                        ? ((0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", children: "Cancelled" }) })) : null, props?.item?.frequency
                        ? ((0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", children: `${props?.item?.interval && props?.item?.interval > 1 ? 'Every ' + props?.item?.interval : ''} ${props?.item?.interval && props?.item?.interval > 1 ? getFrequencyVocab(props?.item?.frequency) : props?.item?.frequency?.[0]?.toUpperCase() + props?.item?.frequency?.slice(1)}` }) })) : null, props?.item?.until
                        ? ((0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsxs)(Text_1.default, { variant: "cardCaption", children: ["Until: ", (0, date_utils_1.dayjs)(props?.item?.until).format('MM/DD/YYYY h:mm A')] }) })) : null, (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "cardCaption", style: { color: theme_1.palette.darkGray }, children: `Visibility: ${props?.item?.visibility ?? 'default'}` }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, justifyContent: "center", alignItems: "center", width: "100%", children: (0, jsx_runtime_1.jsx)(Button_1.default, { onClick: navigateToEditMeetingAssist, children: "Edit" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { width: "100%", flexDirection: "row", justifyContent: "flex-end", children: (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: showDeletion, children: (0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, children: (0, jsx_runtime_1.jsx)(io_1.IoMdTrash, { size: "3em", color: theme_1.palette.purplePrimary }) }) }) })] }), (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(themed_1.Overlay, { overlayStyle: { backgroundColor: theme_1.palette.white, justifyContent: 'center', alignItems: 'center' }, isVisible: isDelete, onBackdropPress: disableDeletion, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { justifyContent: "center", alignItems: "center", style: { width: '80%', backgroundColor: theme_1.palette.white }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, justifyContent: "center", alignItems: "center", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Do you want to delete this meeting assist?" }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { justifyContent: "center", alignItems: "center", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, justifyContent: "center", alignItems: "center", children: (0, jsx_runtime_1.jsx)(Button_1.default, { onClick: enableDeletion, children: "Okay" }) }), (0, jsx_runtime_1.jsx)(Button_1.default, { disabled: true, onClick: disableDeletion, children: "Cancel" })] })] }) }) })] }));
}
function UserListMeetingAssists() {
    const [searchResults, setSearchResults] = (0, react_1.useState)();
    const [search, setSearch] = (0, react_1.useState)('');
    // const sub = props?.sub
    // const client = props?.client
    const router = (0, router_1.useRouter)();
    const { sub, client } = (0, user_context_1.useAppContext)();
    const toast = (0, react_2.useToast)();
    const { loading: assistLoading, error: assistError, data: assistData, refetch } = (0, client_1.useQuery)(listMeetingAssists_1.default, {
        variables: {
            userId: sub,
        }
    });
    const updateSearch = (text) => setSearch(text);
    const onClearSearch = () => setSearch('');
    const onCancelSearch = () => {
        setSearch('');
        setSearchResults([]);
    };
    console.log(searchResults && searchResults?.length > 0, ' searchResults?.length > 0');
    const onSubmitSearch = async () => {
        try {
            // validate
            if (!search) {
                return;
            }
            console.log(search, ' text search');
            const newResults = await (0, UserMeetingAssistHelper_1.searchMeetingAssists)(client, sub, search);
            // searchMeetingAssists
            console.log(newResults, ' newResults inside onSubmitSearch');
            if (newResults && newResults?.length > 0) {
                setSearchResults(newResults);
            }
        }
        catch (e) {
            console.log(e, ' onsubmit search');
        }
    };
    //<ActivityIndicator size="large" color="#00ff00" />
    if (assistLoading) {
        return ((0, jsx_runtime_1.jsx)(Box_1.default, { backgroundColor: "primaryCardBackground", flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, minHeight: "80vh", children: (0, jsx_runtime_1.jsx)(react_native_1.ActivityIndicator, { size: "large", color: theme_1.palette.white }) }));
    }
    if (assistError) {
        toast({
            status: 'error',
            title: 'Error',
            description: assistError.message,
            duration: 9000,
            isClosable: true,
        });
    }
    const renderItem = ({ item, index }) => ((0, jsx_runtime_1.jsx)(MeetingAssistItem, { item: item, refetch: refetch, client: client }));
    return ((0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsxs)("form", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "default-search", className: "mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white", children: "Search" }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)("div", { className: "absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none", children: (0, jsx_runtime_1.jsx)("svg", { "aria-hidden": "true", className: "w-5 h-5 text-gray-500 dark:text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", children: (0, jsx_runtime_1.jsx)("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" }) }) }), (0, jsx_runtime_1.jsx)("input", { value: search, onChange: (e) => updateSearch(e?.target?.value), type: "search", id: "default-search", className: "block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-purple-500 dark:focus:border-purple-500", placeholder: "Type Name Here And Enter...", required: true }), (0, jsx_runtime_1.jsx)("button", { onClick: onSubmitSearch, className: "text-white absolute right-2.5 bottom-2.5 bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-800", children: "Search" })] })] }) }), searchResults && searchResults?.length > 0
                ? ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: searchResults, keyExtractor: item => item.id, renderItem: renderItem }) }))
                : ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: assistData?.Meeting_Assist, keyExtractor: item => item.id, renderItem: renderItem }) }))] }));
}
exports.default = UserListMeetingAssists;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlckxpc3RNZWV0aW5nQXNzaXN0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlVzZXJMaXN0TWVldGluZ0Fzc2lzdHMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBMkJBLGdEQXFDQzs7QUFoRUQsOENBQThDO0FBQzlDLGlDQUF1QztBQUN2Qyw0Q0FBMkM7QUFDM0MsMkNBQXFIO0FBQ3JILGdEQUF1QztBQUN2QyxpRUFBd0M7QUFDeEMsZ0VBQXVDO0FBQ3ZDLHdDQUF1QztBQUN2QyxtRUFBMEM7QUFDMUMsMEVBQWlEO0FBQ2pELDRGQUFvRTtBQUdwRSw0Q0FBMEM7QUFDMUMsK0NBQWtKO0FBRWxKLGlGQUFzRztBQUV0RywwQ0FBa0Q7QUFDbEQsWUFBWTtBQUNaLHVDQUEyQztBQUMzQyxvREFBaUQ7QUFFakQsd0VBQThDO0FBQzlDLDhEQUEwRDtBQUMxRCw4RUFBcUQ7QUFFOUMsS0FBSyxVQUFVLGtCQUFrQixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBaUQ7SUFDbEcsMEZBQTBGO0lBQzFGLHNDQUFzQztJQUN0Qyx5RUFBeUU7SUFDekUsMEJBQWUsQ0FBQyxJQUFJLENBQUMsSUFBQSw2QkFBYSxHQUFFLENBQUMsQ0FBQTtJQUNyQyxJQUFJLE9BQU8sQ0FBQTtJQUNYLElBQUksQ0FBQztRQUNILE9BQU8sR0FBRyxNQUFNLGlCQUFPLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDM0MsNkJBQTZCLEVBQUUsS0FBSztnQkFDbEMsT0FBTyxFQUFFLENBQUE7WUFDWCxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUFDLE9BQU8sR0FBUSxFQUFFLENBQUM7UUFDbEIsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFPLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDakQsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsRUFBRSxDQUFBO1FBQ3hE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USxFQUFDLFVBQVUsRUFBRyxRQUFRLEVBQUMsS0FBSyxFQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUN4Rix1QkFBQyx1QkFBUSxJQUNMLElBQUksRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUNoQyxZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUM3QixVQUFVLEVBQUUsVUFBVSxHQUN4QixHQUNBLENBQ1QsSUFFSCxDQUNULENBQUE7QUFDTCxDQUFDO0FBR0Qsa0JBQWUsc0JBQXNCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9uby11bmtub3duLXByb3BlcnR5ICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQGNoYWtyYS11aS9yZWFjdCdcbmltcG9ydCB7IEFwb2xsb0NsaWVudCwgQXBvbGxvUXVlcnlSZXN1bHQsIE5vcm1hbGl6ZWRDYWNoZU9iamVjdCwgT3BlcmF0aW9uVmFyaWFibGVzLCB1c2VRdWVyeSB9IGZyb20gJ0BhcG9sbG8vY2xpZW50J1xuaW1wb3J0IHsgZGF5anMgfSBmcm9tICdAbGliL2RhdGUtdXRpbHMnXG5pbXBvcnQgQm94IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9Cb3gnXG5pbXBvcnQgQnV0dG9uIGZyb20gJ0Bjb21wb25lbnRzL0J1dHRvbidcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IFRleHQgZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL1RleHQnXG5pbXBvcnQgUmVndWxhckNhcmQgZnJvbSAnQGNvbXBvbmVudHMvUmVndWxhckNhcmQnXG5pbXBvcnQgbGlzdE1lZXRpbmdBc3Npc3RzIGZyb20gJ0BsaWIvYXBvbGxvL2dxbC9saXN0TWVldGluZ0Fzc2lzdHMnO1xuaW1wb3J0IHsgTWVldGluZ0Fzc2lzdFR5cGUgfSBmcm9tICdAbGliL2RhdGFUeXBlcy9NZWV0aW5nQXNzaXN0VHlwZSdcblxuaW1wb3J0IHsgcGFsZXR0ZSB9IGZyb20gJ0BsaWIvdGhlbWUvdGhlbWUnXG5pbXBvcnQgeyBBY3Rpdml0eUluZGljYXRvciwgQXBwZWFyYW5jZSwgRmxhdExpc3QsIE5hdGl2ZVN5bnRoZXRpY0V2ZW50LCBQbGF0Zm9ybSwgUHJlc3NhYmxlLCBUZXh0SW5wdXRTdWJtaXRFZGl0aW5nRXZlbnREYXRhIH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuaW1wb3J0IHsgUmVjdXJyZW5jZUZyZXF1ZW5jeVR5cGUgfSBmcm9tICdAbGliL0NhbGVuZGFyL3R5cGVzJ1xuaW1wb3J0IHsgZGVsZXRlTWVldGluZ0Fzc2lzdEdpdmVuSWQsIHNlYXJjaE1lZXRpbmdBc3Npc3RzIH0gZnJvbSAnQGxpYi9Bc3Npc3QvVXNlck1lZXRpbmdBc3Npc3RIZWxwZXInXG5cbmltcG9ydCB7IE92ZXJsYXksIFNlYXJjaEJhciB9IGZyb20gJ0BybmV1aS90aGVtZWQnXG4vLyBJb01kVHJhc2hcbmltcG9ydCB7IElvTWRUcmFzaCB9IGZyb20gXCJyZWFjdC1pY29ucy9pb1wiO1xuaW1wb3J0IHsgdXNlQXBwQ29udGV4dCB9IGZyb20gJ0BsaWIvdXNlci1jb250ZXh0J1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHN1cGVydG9rZW5zTm9kZSBmcm9tICdzdXBlcnRva2Vucy1ub2RlJ1xuaW1wb3J0IHsgYmFja2VuZENvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZy9iYWNrZW5kQ29uZmlnJ1xuaW1wb3J0IFNlc3Npb24gZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZS9yZWNpcGUvc2Vzc2lvbidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzIH06IHsgcmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UgfSkge1xuICAvLyBOb3RpY2UgaG93IHRoZSBzZXJ2ZXIgdXNlcyBgQVBJYCBmcm9tIGB3aXRoU1NSQ29udGV4dGAsIGluc3RlYWQgb2YgdGhlIHRvcC1sZXZlbCBgQVBJYC5cbiAgLy8gY29uc3QgU1NSID0gd2l0aFNTUkNvbnRleHQoeyByZXEgfSlcbiAgLy8gdGhpcyBydW5zIG9uIHRoZSBiYWNrZW5kLCBzbyB3ZSBtdXN0IGNhbGwgaW5pdCBvbiBzdXBlcnRva2Vucy1ub2RlIFNES1xuICBzdXBlcnRva2Vuc05vZGUuaW5pdChiYWNrZW5kQ29uZmlnKCkpXG4gIGxldCBzZXNzaW9uXG4gIHRyeSB7XG4gICAgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb24uZ2V0U2Vzc2lvbihyZXEsIHJlcywge1xuICAgICAgb3ZlcnJpZGVHbG9iYWxDbGFpbVZhbGlkYXRvcnM6IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlRSWV9SRUZSRVNIX1RPS0VOKSB7XG4gICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICB9IGVsc2UgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlVOQVVUSE9SSVNFRCkge1xuICAgICAgLy8gdGhpcyB3aWxsIGZvcmNlIHRoZSBmcm9udGVuZCB0byB0cnkgYW5kIHJlZnJlc2ggd2hpY2ggd2lsbCBmYWlsXG4gICAgICAvLyBjbGVhcmluZyBhbGwgY29va2llcyBhbmQgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIGxvZ2luIHNjcmVlbi5cbiAgICAgIHJldHVybiB7IHByb3BzOiB7IGZyb21TdXBlcnRva2VuczogJ25lZWRzLXJlZnJlc2gnIH0gfVxuICAgIH1cbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIGlmICghc2Vzc2lvbj8uZ2V0VXNlcklkKCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgZGVzdGluYXRpb246ICcvVXNlci9Mb2dpbi9Vc2VyTG9naW4nLFxuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBzdWI6IHNlc3Npb24uZ2V0VXNlcklkKCksXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGdldEZyZXF1ZW5jeVZvY2FiID0gKHZhbHVlOiBSZWN1cnJlbmNlRnJlcXVlbmN5VHlwZSkgPT4ge1xuICAgIHN3aXRjaCh2YWx1ZSkge1xuICAgICAgICBjYXNlICdkYWlseSc6XG4gICAgICAgICAgICByZXR1cm4gJ2RheXMnXG4gICAgICAgIGNhc2UgJ3dlZWtseSc6XG4gICAgICAgICAgICByZXR1cm4gJ3dlZWtzJ1xuICAgICAgICBjYXNlICdtb250aGx5JzpcbiAgICAgICAgICAgIHJldHVybiAnbW9udGhzJ1xuICAgICAgICBjYXNlICd5ZWFybHknOlxuICAgICAgICAgICAgcmV0dXJuICd5ZWFycydcbiAgICB9XG59XG5cbnR5cGUgTWVldGluZ0Fzc2lzdEl0ZW1UeXBlID0ge1xuICAgIGl0ZW06IE1lZXRpbmdBc3Npc3RUeXBlLFxuICAgIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gICAgcmVmZXRjaDogKHZhcmlhYmxlcz86IFBhcnRpYWw8T3BlcmF0aW9uVmFyaWFibGVzPikgPT4gUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDx7XG4gICAgICAgIE1lZXRpbmdfQXNzaXN0OiBNZWV0aW5nQXNzaXN0VHlwZVtdO1xuICAgIH0+PlxufVxuXG5mdW5jdGlvbiBNZWV0aW5nQXNzaXN0SXRlbShwcm9wczogTWVldGluZ0Fzc2lzdEl0ZW1UeXBlKSB7XG4gICAgY29uc3QgW2lzRGVsZXRlLCBzZXRJc0RlbGV0ZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSlcbiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKVxuICAgIGNvbnN0IHRvYXN0ID0gdXNlVG9hc3QoKVxuICAgIGNvbnN0IGRlbGV0ZUl0ZW0gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVNZWV0aW5nQXNzaXN0R2l2ZW5JZChwcm9wcz8uY2xpZW50LCBwcm9wcz8uaXRlbT8uaWQpXG4gICAgICAgICAgICBhd2FpdCBwcm9wcz8ucmVmZXRjaCgpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGRlbGV0ZSBpdGVtJylcbiAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIGRlbGV0aW9uJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5hdmlnYXRlVG9FZGl0TWVldGluZ0Fzc2lzdCA9ICgpID0+IHtcbiAgICAgICAgcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9Bc3Npc3QvVXNlckVkaXRNZWV0aW5nQXNzaXN0JywgcXVlcnk6IHsgbWVldGluZ0lkOiBwcm9wcz8uaXRlbT8uaWQgfSB9KVxuICAgIH1cblxuICAgIGNvbnN0IGVuYWJsZURlbGV0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZGVsZXRlSXRlbSgpICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBkZWxldGUnKVxuICAgICAgICB9XG4gICAgICAgIHNldElzRGVsZXRlKGZhbHNlKVxuICAgIH1cblxuICAgIGNvbnN0IGRpc2FibGVEZWxldGlvbiA9ICgpID0+IHNldElzRGVsZXRlKGZhbHNlKVxuXG4gICAgY29uc3Qgc2hvd0RlbGV0aW9uID0gKCkgPT4gc2V0SXNEZWxldGUodHJ1ZSlcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxSZWd1bGFyQ2FyZD5cbiAgICAgICAgICAgIDxCb3gganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgICAgICA8VGV4dCBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSB2YXJpYW50PVwiY2FyZFRpdGxlXCIgc3R5bGU9e3sgY29sb3I6IHBhbGV0dGUuZGFya0dyYXkgfX0+XG4gICAgICAgICAgICAgICAgICAgIHtwcm9wcz8uaXRlbT8uc3VtbWFyeX1cbiAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgPEJveCAgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX0+XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJjYXJkQ2FwdGlvblwiIHN0eWxlPXt7IGNvbG9yOiBwYWxldHRlLmRhcmtHcmF5IH19PlxuICAgICAgICAgICAgICAgICAgICAgICAge3Byb3BzPy5pdGVtPy5ub3Rlc31cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgIDxCb3ggIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiY2FyZENhcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWUgV2luZG93IFN0YXJ0OiB7ZGF5anMocHJvcHM/Lml0ZW0/LndpbmRvd1N0YXJ0RGF0ZSkuZm9ybWF0KCdNTS9ERC9ZWVlZIGg6bW0gQScpfVxuICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgPEJveCAgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX0+XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJjYXJkQ2FwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgVGltZSBXaW5kb3cgRW5kOiB7ZGF5anMocHJvcHM/Lml0ZW0/LndpbmRvd0VuZERhdGUpLmZvcm1hdCgnTU0vREQvWVlZWSBoOm1tIEEnKX1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgIDxCb3ggIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiY2FyZENhcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uOiB7cHJvcHM/Lml0ZW0/LmR1cmF0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAge3Byb3BzPy5pdGVtPy5sb2NhdGlvbj8uYWRkcmVzcz8uc3RyZWV0TmFtZVxuICAgICAgICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICc2MCUnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJjYXJkQ2FwdGlvblwiIHN0eWxlPXt7IGNvbG9yOiBwYWxldHRlLmRhcmtHcmF5IH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJvcHM/Lml0ZW0/LmxvY2F0aW9uPy5hZGRyZXNzPy5zdHJlZXROYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAge3Byb3BzPy5pdGVtPy5jb25mZXJlbmNlQXBwID09PSAnem9vbScgXG4gICAgICAgICAgICAgICAgICAgID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJjYXJkQ2FwdGlvblwiIHN0eWxlPXt7IGNvbG9yOiBwYWxldHRlLmRhcmtHcmF5IH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmVyZW5jZSBBcHA6IFpvb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHtwcm9wcz8uaXRlbT8uY29uZmVyZW5jZUFwcCA9PT0gJ2dvb2dsZScgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Qm94IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiY2FyZENhcHRpb25cIiBzdHlsZT17eyBjb2xvcjogcGFsZXR0ZS5kYXJrR3JheSB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZlcmVuY2UgQXBwOiBHb29nbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPEJveCBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBzdHlsZT17eyB3aWR0aDogJzYwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cImNhcmRDYXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBSZXNwb25kZWQ6IHtwcm9wcz8uaXRlbT8uYXR0ZW5kZWVSZXNwb25kZWRDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM/Lml0ZW0/LmNhbmNlbGxlZFxuICAgICAgICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cImNhcmRDYXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbGxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzPy5pdGVtPy5mcmVxdWVuY3lcbiAgICAgICAgICAgICAgICAgICAgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm94IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJjYXJkQ2FwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YCR7cHJvcHM/Lml0ZW0/LmludGVydmFsICYmIHByb3BzPy5pdGVtPy5pbnRlcnZhbCA+IDEgPyAnRXZlcnkgJyArIHByb3BzPy5pdGVtPy5pbnRlcnZhbCA6ICcnfSAke3Byb3BzPy5pdGVtPy5pbnRlcnZhbCAmJiBwcm9wcz8uaXRlbT8uaW50ZXJ2YWwgPiAxID8gZ2V0RnJlcXVlbmN5Vm9jYWIocHJvcHM/Lml0ZW0/LmZyZXF1ZW5jeSkgOiBwcm9wcz8uaXRlbT8uZnJlcXVlbmN5Py5bMF0/LnRvVXBwZXJDYXNlKCkgKyBwcm9wcz8uaXRlbT8uZnJlcXVlbmN5Py5zbGljZSgxKX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzPy5pdGVtPy51bnRpbFxuICAgICAgICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJjYXJkQ2FwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbnRpbDoge2RheWpzKHByb3BzPy5pdGVtPy51bnRpbCkuZm9ybWF0KCdNTS9ERC9ZWVlZIGg6bW0gQScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8Qm94IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiY2FyZENhcHRpb25cIiBzdHlsZT17eyBjb2xvcjogcGFsZXR0ZS5kYXJrR3JheSB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtgVmlzaWJpbGl0eTogJHtwcm9wcz8uaXRlbT8udmlzaWJpbGl0eSA/PyAnZGVmYXVsdCd9YH1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17bmF2aWdhdGVUb0VkaXRNZWV0aW5nQXNzaXN0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+ICBcbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8Qm94IHdpZHRoPVwiMTAwJVwiIGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgIDxQcmVzc2FibGUgb25QcmVzcz17c2hvd0RlbGV0aW9ufT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElvTWRUcmFzaCBzaXplPVwiM2VtXCIgY29sb3I9e3BhbGV0dGUucHVycGxlUHJpbWFyeX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8L1ByZXNzYWJsZT5cbiAgICAgICAgICAgICAgICA8L0JveD4gICAgICBcbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveD5cbiAgICAgICAgICAgICAgICA8T3ZlcmxheSBvdmVybGF5U3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBwYWxldHRlLndoaXRlLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19IGlzVmlzaWJsZT17aXNEZWxldGV9IG9uQmFja2Ryb3BQcmVzcz17ZGlzYWJsZURlbGV0aW9ufT5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzgwJScsIGJhY2tncm91bmRDb2xvcjogcGFsZXR0ZS53aGl0ZX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJvcHRpb25IZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEbyB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBtZWV0aW5nIGFzc2lzdD9cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtlbmFibGVEZWxldGlvbn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2theVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPiAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gZGlzYWJsZWQgb25DbGljaz17ZGlzYWJsZURlbGV0aW9ufT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPiAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgPC9PdmVybGF5PlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgIDwvUmVndWxhckNhcmQ+XG4gICAgKVxufVxuXG5mdW5jdGlvbiBVc2VyTGlzdE1lZXRpbmdBc3Npc3RzKCkge1xuICAgIGNvbnN0IFtzZWFyY2hSZXN1bHRzLCBzZXRTZWFyY2hSZXN1bHRzXSA9IHVzZVN0YXRlPE1lZXRpbmdBc3Npc3RUeXBlW10+KClcbiAgICBjb25zdCBbc2VhcmNoLCBzZXRTZWFyY2hdID0gdXNlU3RhdGU8c3RyaW5nPignJylcblxuICAgIC8vIGNvbnN0IHN1YiA9IHByb3BzPy5zdWJcbiAgICAvLyBjb25zdCBjbGllbnQgPSBwcm9wcz8uY2xpZW50XG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcbiAgICBjb25zdCB7IHN1YiwgY2xpZW50IH0gPSB1c2VBcHBDb250ZXh0KClcbiAgICBjb25zdCB0b2FzdCA9IHVzZVRvYXN0KClcblxuICAgIGNvbnN0IHsgbG9hZGluZzogYXNzaXN0TG9hZGluZywgZXJyb3I6IGFzc2lzdEVycm9yLCBkYXRhOiBhc3Npc3REYXRhLCByZWZldGNoIH0gPSB1c2VRdWVyeTx7IE1lZXRpbmdfQXNzaXN0OiBNZWV0aW5nQXNzaXN0VHlwZVtdIH0+KGxpc3RNZWV0aW5nQXNzaXN0cywge1xuICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgIHVzZXJJZDogc3ViLFxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHVwZGF0ZVNlYXJjaCA9ICh0ZXh0OiBzdHJpbmcpID0+IHNldFNlYXJjaCh0ZXh0KVxuXG4gICAgY29uc3Qgb25DbGVhclNlYXJjaCA9ICgpID0+IHNldFNlYXJjaCgnJylcblxuICAgIGNvbnN0IG9uQ2FuY2VsU2VhcmNoID0gKCkgPT4ge1xuICAgICAgICBzZXRTZWFyY2goJycpXG4gICAgICAgIHNldFNlYXJjaFJlc3VsdHMoW10pXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coc2VhcmNoUmVzdWx0cyAmJiBzZWFyY2hSZXN1bHRzPy5sZW5ndGggPiAwLCAnIHNlYXJjaFJlc3VsdHM/Lmxlbmd0aCA+IDAnKVxuXG4gICAgY29uc3Qgb25TdWJtaXRTZWFyY2ggPSBhc3luYyAoXG4gICAgKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyB2YWxpZGF0ZVxuICAgICAgICAgICAgaWYgKCFzZWFyY2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VhcmNoLCAnIHRleHQgc2VhcmNoJylcblxuICAgICAgICAgICAgY29uc3QgbmV3UmVzdWx0cyA9IGF3YWl0IHNlYXJjaE1lZXRpbmdBc3Npc3RzKFxuICAgICAgICAgICAgICAgIGNsaWVudCxcbiAgICAgICAgICAgICAgICBzdWIsXG4gICAgICAgICAgICAgICAgc2VhcmNoLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBzZWFyY2hNZWV0aW5nQXNzaXN0c1xuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3UmVzdWx0cywgJyBuZXdSZXN1bHRzIGluc2lkZSBvblN1Ym1pdFNlYXJjaCcpXG5cbiAgICAgICAgICAgIGlmIChuZXdSZXN1bHRzICYmIG5ld1Jlc3VsdHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZXRTZWFyY2hSZXN1bHRzKG5ld1Jlc3VsdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSwgJyBvbnN1Ym1pdCBzZWFyY2gnKVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vPEFjdGl2aXR5SW5kaWNhdG9yIHNpemU9XCJsYXJnZVwiIGNvbG9yPVwiIzAwZmYwMFwiIC8+XG4gICAgaWYgKGFzc2lzdExvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxCb3ggYmFja2dyb3VuZENvbG9yPVwicHJpbWFyeUNhcmRCYWNrZ3JvdW5kXCIgZmxleD17MX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319IG1pbkhlaWdodD1cIjgwdmhcIj5cbiAgICAgICAgICAgICAgICA8QWN0aXZpdHlJbmRpY2F0b3Igc2l6ZT1cImxhcmdlXCIgY29sb3I9e3BhbGV0dGUud2hpdGV9IC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgKVxuICAgIH1cblxuICAgIGlmIChhc3Npc3RFcnJvcikge1xuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhc3Npc3RFcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHR5cGUgcmVuZGVySXRlbSA9IHtcbiAgICAgICAgaXRlbTogTWVldGluZ0Fzc2lzdFR5cGUsXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVySXRlbSA9ICh7IGl0ZW0sIGluZGV4IH06IHJlbmRlckl0ZW0pID0+IChcbiAgICAgICAgPE1lZXRpbmdBc3Npc3RJdGVtXG4gICAgICAgICAgICBpdGVtPXtpdGVtfVxuICAgICAgICAgICAgcmVmZXRjaD17cmVmZXRjaH1cbiAgICAgICAgICAgIGNsaWVudD17Y2xpZW50fVxuICAgICAgICAvPlxuICAgIClcblxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEJveCBmbGV4PXsxfT5cbiAgICAgICAgICAgIDxCb3g+XG4gICAgICAgICAgICAgICAgPGZvcm0+ICAgXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZGVmYXVsdC1zZWFyY2hcIiBjbGFzc05hbWU9XCJtYi0yIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBzci1vbmx5IGRhcms6dGV4dC13aGl0ZVwiPlNlYXJjaDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQteS0wIGxlZnQtMCBmbGV4IGl0ZW1zLWNlbnRlciBwbC0zIHBvaW50ZXItZXZlbnRzLW5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzTmFtZT1cInctNSBoLTUgdGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGQ9XCJNMjEgMjFsLTYtNm0yLTVhNyA3IDAgMTEtMTQgMCA3IDcgMCAwMTE0IDB6XCI+PC9wYXRoPjwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e3NlYXJjaH0gb25DaGFuZ2U9eyhlKSA9PiB1cGRhdGVTZWFyY2goZT8udGFyZ2V0Py52YWx1ZSl9IHR5cGU9XCJzZWFyY2hcIiBpZD1cImRlZmF1bHQtc2VhcmNoXCIgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIHAtNCBwbC0xMCB0ZXh0LXNtIHRleHQtZ3JheS05MDAgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIGJnLWdyYXktNTAgZm9jdXM6cmluZy1wdXJwbGUtNTAwIGZvY3VzOmJvcmRlci1wdXJwbGUtNTAwIGRhcms6YmctZ3JheS03MDAgZGFyazpib3JkZXItZ3JheS02MDAgZGFyazpwbGFjZWhvbGRlci1ncmF5LTQwMCBkYXJrOnRleHQtd2hpdGUgZGFyazpmb2N1czpyaW5nLXB1cnBsZS01MDAgZGFyazpmb2N1czpib3JkZXItcHVycGxlLTUwMFwiIHBsYWNlaG9sZGVyPVwiVHlwZSBOYW1lIEhlcmUgQW5kIEVudGVyLi4uXCIgcmVxdWlyZWQgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25TdWJtaXRTZWFyY2h9IGNsYXNzTmFtZT1cInRleHQtd2hpdGUgYWJzb2x1dGUgcmlnaHQtMi41IGJvdHRvbS0yLjUgYmctcHVycGxlLTcwMCBob3ZlcjpiZy1wdXJwbGUtODAwIGZvY3VzOnJpbmctNCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy1wdXJwbGUtMzAwIGZvbnQtbWVkaXVtIHJvdW5kZWQtbGcgdGV4dC1zbSBweC00IHB5LTIgZGFyazpiZy1wdXJwbGUtNjAwIGRhcms6aG92ZXI6YmctcHVycGxlLTcwMCBkYXJrOmZvY3VzOnJpbmctcHVycGxlLTgwMFwiPlNlYXJjaDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIHtzZWFyY2hSZXN1bHRzICYmIHNlYXJjaFJlc3VsdHM/Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4ID0geyAxIH0ganVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiIGFsaWduSXRlbXMgPSBcImNlbnRlclwiIHN0eWxlID0ge3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGbGF0TGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e3NlYXJjaFJlc3VsdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5RXh0cmFjdG9yPXtpdGVtID0+IGl0ZW0uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVySXRlbT17cmVuZGVySXRlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICA6IChcbiAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4ID0geyAxIH0ganVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiIGFsaWduSXRlbXMgPSBcImNlbnRlclwiIHN0eWxlID0ge3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGbGF0TGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e2Fzc2lzdERhdGE/Lk1lZXRpbmdfQXNzaXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUV4dHJhY3Rvcj17aXRlbSA9PiBpdGVtLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckl0ZW09e3JlbmRlckl0ZW19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgIDwvQm94PlxuICAgIClcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBVc2VyTGlzdE1lZXRpbmdBc3Npc3RzIFxuXG5cblxuXG5cbiJdfQ==