"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const colorsPalette_1 = require("@lib/theme/colorsPalette");
const react_2 = require("@chakra-ui/react");
const Switch_1 = __importDefault(require("@components/Switch"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const TextField_1 = __importDefault(require("@components/TextField"));
const react_native_1 = require("react-native");
const styles = {
    minThresholdCount: {
        fontSize: '21px',
        lineHeight: '28px',
    },
    container: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        width: '100%',
    },
};
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../../config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function EditMeetingAssistBaseStep7(props) {
    const [anyoneCanAddSelf, setAnyoneCanAddSelf] = (0, react_1.useState)(props?.anyoneCanAddSelf);
    const [guestsCanSeeOtherGuests, setGuestsCanSeeOtherGuests] = (0, react_1.useState)(props?.guestsCanSeeOtherGuests);
    const [minThresholdCount, setMinThresholdCount] = (0, react_1.useState)(props?.minThresholdCount);
    const [guaranteeAvailability, setGuaranteeAvailability] = (0, react_1.useState)(props?.guaranteeAvailability);
    const [isRecurring, setIsRecurring] = (0, react_1.useState)(props?.isRecurring);
    const [lockAfter, setLockAfter] = (0, react_1.useState)(props?.lockAfter);
    const [isMessage, setIsMessage] = (0, react_1.useState)(false);
    const { height: fullHeight } = react_native_1.Dimensions.get('window');
    const setParentAnyoneCanAddSelf = props?.setParentAnyoneCanAddSelf;
    const setParentGuestsCanSeeOtherGuests = props?.setParentGuestsCanSeeOtherGuests;
    const setParentMinThresholdCount = props?.setParentMinThresholdCount;
    const setParentGuaranteeAvailability = props?.setParentGuaranteeAvailability;
    const setParentIsRecurring = props?.setParentIsRecurring;
    const setParentLockAfter = props?.setParentLockAfter;
    const changeAnyoneCanAddSelf = (value) => {
        setAnyoneCanAddSelf(value);
        setParentAnyoneCanAddSelf(value);
    };
    const changeGuestsCanSeeOtherGuests = (value) => {
        setGuestsCanSeeOtherGuests(value);
        setParentGuestsCanSeeOtherGuests(value);
    };
    const changeMinThresholdCount = (e) => {
        setMinThresholdCount(parseInt(e?.target?.value.replace(/[^0-9.]/g, ''), 10));
        setParentMinThresholdCount(parseInt(e?.target?.value.replace(/[^0-9.]/g, ''), 10));
    };
    const changeGuaranteeAvailability = (value) => {
        setGuaranteeAvailability(value);
        setParentGuaranteeAvailability(value);
    };
    const changeIsRecurring = (value) => {
        setIsRecurring(value);
        setParentIsRecurring(value);
    };
    const changeLockAfter = (value) => {
        setLockAfter(value);
        setParentLockAfter(value);
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_native_1.ScrollView, { style: { flex: 1, width: '100%' }, contentContainerStyle: { alignItems: 'center' }, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Can non-invited guests add themselves?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { onColor: colorsPalette_1.colorsPalette.purple30, offColor: colorsPalette_1.colorsPalette.purple60, checked: anyoneCanAddSelf, onValueChange: changeAnyoneCanAddSelf, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Can guests see other guests?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { onColor: colorsPalette_1.colorsPalette.purple30, offColor: colorsPalette_1.colorsPalette.purple60, checked: guestsCanSeeOtherGuests, onValueChange: changeGuestsCanSeeOtherGuests, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, justifyContent: "center", alignItems: "center", style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", pt: { phone: 'm', tablet: 's' }, children: "How many minimum number of attendees (including host) needed before creating a new event?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Minimum threshold count", type: "number", onChange: changeMinThresholdCount, value: `${minThresholdCount}`, placeholder: "1", style: styles.minThresholdCount }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Users will able to select custom timeslots that can overlap with already registered events', bg: 'purple.700', color: 'white', "aria-label": 'A tooltip', children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", pt: { phone: 'm', tablet: 's' }, children: "Do you like to guarantee availability of any time slot regardless of being busy or not?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { onColor: colorsPalette_1.colorsPalette.purple30, offColor: colorsPalette_1.colorsPalette.purple60, checked: guaranteeAvailability, onValueChange: changeGuaranteeAvailability, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", pt: { phone: 'm', tablet: 's' }, children: "Do you want this meeting to be recurring?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { onColor: colorsPalette_1.colorsPalette.purple30, offColor: colorsPalette_1.colorsPalette.purple60, checked: isRecurring, onValueChange: changeIsRecurring, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, style: { width: '90%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Every time the AI planner runs, it will look for a more optimal time given the schedule context. By enabling lock after, the AI planner will no longer be able to move the meeting after the first cycle.', bg: 'purple.700', color: 'white', "aria-label": 'A tooltip', children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", pt: { phone: 'm', tablet: 's' }, children: "Do you want to lock after or make it not modifiable for AI planner after meeting is formed?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { onColor: colorsPalette_1.colorsPalette.purple30, offColor: colorsPalette_1.colorsPalette.purple60, checked: lockAfter, onValueChange: changeLockAfter, style: { marginBottom: 20 } }) })] })] }) }) }));
}
exports.default = EditMeetingAssistBaseStep7;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdE1lZXRpbmdBc3Npc3RCYXNlU3RlcDcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJFZGl0TWVldGluZ0Fzc2lzdEJhc2VTdGVwNy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFnQ0EsZ0RBcUNDOztBQXJFRCxpQ0FJYztBQUVkLDREQUFrRTtBQUNsRSw0Q0FBMEM7QUFDMUMsZ0VBQXdDO0FBQ3hDLGlFQUF3QztBQUN4QyxtRUFBMEM7QUFDMUMsc0VBQTZDO0FBRTdDLCtDQUFzRDtBQUV0RCxNQUFNLE1BQU0sR0FBRztJQUNYLGlCQUFpQixFQUFFO1FBQ2YsUUFBUSxFQUFFLE1BQU07UUFDaEIsVUFBVSxFQUFFLE1BQU07S0FDckI7SUFDRCxTQUFTLEVBQUU7UUFDVCxJQUFJLEVBQUUsQ0FBQztRQUNQLGNBQWMsRUFBRSxRQUFRO1FBQ3RCLFVBQVUsRUFBRSxRQUFRO1FBQ3BCLEtBQUssRUFBRSxNQUFNO0tBQ2hCO0NBQ0osQ0FBQTtBQUVELHdFQUE4QztBQUM5QyxpRUFBNkQ7QUFDN0QsOEVBQXFEO0FBRTlDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQWlEO0lBQ2xHLDBGQUEwRjtJQUMxRixzQ0FBc0M7SUFDdEMseUVBQXlFO0lBQ3pFLDBCQUFlLENBQUMsSUFBSSxDQUFDLElBQUEsNkJBQWEsR0FBRSxDQUFDLENBQUE7SUFDckMsSUFBSSxPQUFPLENBQUE7SUFDWCxJQUFJLENBQUM7UUFDSCxPQUFPLEdBQUcsTUFBTSxpQkFBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO1lBQzNDLDZCQUE2QixFQUFFLEtBQUs7Z0JBQ2xDLE9BQU8sRUFBRSxDQUFBO1lBQ1gsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFBQyxPQUFPLEdBQVEsRUFBRSxDQUFDO1FBQ2xCLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIs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RSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxhQUM3RCx1QkFBQyxhQUFHLElBQUMsYUFBYSxFQUFDLEtBQUssRUFBQyxjQUFjLEVBQUMsWUFBWSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUMsWUFDekUsdUJBQUMsZUFBTyxJQUFDLEtBQUssRUFBQywyTUFBMk0sRUFBQyxFQUFFLEVBQUMsWUFBWSxFQUFDLEtBQUssRUFBQyxPQUFPLGdCQUFZLFdBQVcsWUFDM1EsdUJBQUMsY0FBSSxJQUFDLE9BQU8sRUFBQyxZQUFZLEVBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLDRHQUVuRCxHQUNELEdBQ1IsRUFDTix1QkFBQyxhQUFHLElBQUMsYUFBYSxFQUFDLEtBQUssRUFBQyxjQUFjLEVBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUMsWUFDdkUsdUJBQUMsZ0JBQU8sSUFDSixPQUFPLEVBQUUsNkJBQU0sQ0FBQyxRQUFRLEVBQ3hCLFFBQVEsRUFBRSw2QkFBTSxDQUFDLFFBQVEsRUFDekIsT0FBTyxFQUFFLFNBQVMsRUFDbEIsYUFBYSxFQUFFLGVBQWUsRUFDOUIsS0FBSyxFQUFFLEVBQUMsWUFBWSxFQUFFLEVBQUUsRUFBQyxHQUMzQixHQUNBLElBQ0osSUFDQSxHQUNHLEdBRVgsQ0FDVCxDQUFBO0FBQ0wsQ0FBQztBQUVELGtCQUFlLDBCQUEwQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7XG4gICAgdXNlU3RhdGUsXG4gICAgRGlzcGF0Y2gsXG4gICAgU2V0U3RhdGVBY3Rpb24sXG59IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgeyBjb2xvcnNQYWxldHRlIGFzIENvbG9ycyB9IGZyb20gJ0BsaWIvdGhlbWUvY29sb3JzUGFsZXR0ZSdcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdAY2hha3JhLXVpL3JlYWN0J1xuaW1wb3J0IFN3aXRjaDEgZnJvbSAnQGNvbXBvbmVudHMvU3dpdGNoJ1xuaW1wb3J0IEJveCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vQm94J1xuaW1wb3J0IFRleHQgZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL1RleHQnXG5pbXBvcnQgVGV4dEZpZWxkIGZyb20gJ0Bjb21wb25lbnRzL1RleHRGaWVsZCdcblxuaW1wb3J0IHsgU2Nyb2xsVmlldywgRGltZW5zaW9ucyB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmNvbnN0IHN0eWxlcyA9IHtcbiAgICBtaW5UaHJlc2hvbGRDb3VudDoge1xuICAgICAgICBmb250U2l6ZTogJzIxcHgnLFxuICAgICAgICBsaW5lSGVpZ2h0OiAnMjhweCcsXG4gICAgfSxcbiAgICBjb250YWluZXI6IHtcbiAgICAgIGZsZXg6IDEsXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgIH0sXG59XG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgc3VwZXJ0b2tlbnNOb2RlIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUnXG5pbXBvcnQgeyBiYWNrZW5kQ29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vY29uZmlnL2JhY2tlbmRDb25maWcnXG5pbXBvcnQgU2Vzc2lvbiBmcm9tICdzdXBlcnRva2Vucy1ub2RlL3JlY2lwZS9zZXNzaW9uJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMgfTogeyByZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSB9KSB7XG4gIC8vIE5vdGljZSBob3cgdGhlIHNlcnZlciB1c2VzIGBBUElgIGZyb20gYHdpdGhTU1JDb250ZXh0YCwgaW5zdGVhZCBvZiB0aGUgdG9wLWxldmVsIGBBUElgLlxuICAvLyBjb25zdCBTU1IgPSB3aXRoU1NSQ29udGV4dCh7IHJlcSB9KVxuICAvLyB0aGlzIHJ1bnMgb24gdGhlIGJhY2tlbmQsIHNvIHdlIG11c3QgY2FsbCBpbml0IG9uIHN1cGVydG9rZW5zLW5vZGUgU0RLXG4gIHN1cGVydG9rZW5zTm9kZS5pbml0KGJhY2tlbmRDb25maWcoKSlcbiAgbGV0IHNlc3Npb25cbiAgdHJ5IHtcbiAgICBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbi5nZXRTZXNzaW9uKHJlcSwgcmVzLCB7XG4gICAgICBvdmVycmlkZUdsb2JhbENsYWltVmFsaWRhdG9yczogYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBpZiAoZXJyLnR5cGUgPT09IFNlc3Npb24uRXJyb3IuVFJZX1JFRlJFU0hfVE9LRU4pIHtcbiAgICAgIHJldHVybiB7IHByb3BzOiB7IGZyb21TdXBlcnRva2VuczogJ25lZWRzLXJlZnJlc2gnIH0gfVxuICAgIH0gZWxzZSBpZiAoZXJyLnR5cGUgPT09IFNlc3Npb24uRXJyb3IuVU5BVVRIT1JJU0VEKSB7XG4gICAgICAvLyB0aGlzIHdpbGwgZm9yY2UgdGhlIGZyb250ZW5kIHRvIHRyeSBhbmQgcmVmcmVzaCB3aGljaCB3aWxsIGZhaWxcbiAgICAgIC8vIGNsZWFyaW5nIGFsbCBjb29raWVzIGFuZCByZWRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUgbG9naW4gc2NyZWVuLlxuICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgfVxuICAgIHRocm93IGVyclxuICB9XG5cbiAgaWYgKCFzZXNzaW9uPy5nZXRVc2VySWQoKSkge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBkZXN0aW5hdGlvbjogJy9Vc2VyL0xvZ2luL1VzZXJMb2dpbicsXG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvcHM6IHtcbiAgICAgIHN1Yjogc2Vzc2lvbi5nZXRVc2VySWQoKSxcbiAgICB9XG4gIH1cbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgICBhbnlvbmVDYW5BZGRTZWxmOiBib29sZWFuLFxuICAgIGd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzOiBib29sZWFuLFxuICAgIG1pblRocmVzaG9sZENvdW50OiBudW1iZXIsXG4gICAgZ3VhcmFudGVlQXZhaWxhYmlsaXR5OiBib29sZWFuLFxuICAgIGlzUmVjdXJyaW5nOiBib29sZWFuLFxuICAgIGxvY2tBZnRlcjogYm9vbGVhbixcbiAgICBzZXRQYXJlbnRBbnlvbmVDYW5BZGRTZWxmOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxib29sZWFuPj4sXG4gICAgc2V0UGFyZW50R3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPGJvb2xlYW4+PixcbiAgICBzZXRQYXJlbnRNaW5UaHJlc2hvbGRDb3VudDogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248bnVtYmVyPj4sXG4gICAgc2V0UGFyZW50R3VhcmFudGVlQXZhaWxhYmlsaXR5OiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxib29sZWFuPj4sXG4gICAgc2V0UGFyZW50SXNSZWN1cnJpbmc6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPGJvb2xlYW4+PixcbiAgICBzZXRQYXJlbnRMb2NrQWZ0ZXI6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPGJvb2xlYW4+Pixcbn1cblxuZnVuY3Rpb24gRWRpdE1lZXRpbmdBc3Npc3RCYXNlU3RlcDcocHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgW2FueW9uZUNhbkFkZFNlbGYsIHNldEFueW9uZUNhbkFkZFNlbGZdID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/LmFueW9uZUNhbkFkZFNlbGYpXG4gICAgY29uc3QgW2d1ZXN0c0NhblNlZU90aGVyR3Vlc3RzLCBzZXRHdWVzdHNDYW5TZWVPdGhlckd1ZXN0c10gPSB1c2VTdGF0ZTxib29sZWFuPihwcm9wcz8uZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMpXG4gICAgY29uc3QgW21pblRocmVzaG9sZENvdW50LCBzZXRNaW5UaHJlc2hvbGRDb3VudF0gPSB1c2VTdGF0ZTxudW1iZXI+KHByb3BzPy5taW5UaHJlc2hvbGRDb3VudClcbiAgICBjb25zdCBbZ3VhcmFudGVlQXZhaWxhYmlsaXR5LCBzZXRHdWFyYW50ZWVBdmFpbGFiaWxpdHldID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/Lmd1YXJhbnRlZUF2YWlsYWJpbGl0eSlcbiAgICBjb25zdCBbaXNSZWN1cnJpbmcsIHNldElzUmVjdXJyaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHByb3BzPy5pc1JlY3VycmluZylcbiAgICBjb25zdCBbbG9ja0FmdGVyLCBzZXRMb2NrQWZ0ZXJdID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/LmxvY2tBZnRlcilcbiAgICBjb25zdCBbaXNNZXNzYWdlLCBzZXRJc01lc3NhZ2VdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG5cblxuICAgIGNvbnN0IHsgaGVpZ2h0OiBmdWxsSGVpZ2h0IH0gPSBEaW1lbnNpb25zLmdldCgnd2luZG93JylcblxuICAgIGNvbnN0IHNldFBhcmVudEFueW9uZUNhbkFkZFNlbGYgPSBwcm9wcz8uc2V0UGFyZW50QW55b25lQ2FuQWRkU2VsZlxuICAgIGNvbnN0IHNldFBhcmVudEd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzID0gcHJvcHM/LnNldFBhcmVudEd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzXG4gICAgY29uc3Qgc2V0UGFyZW50TWluVGhyZXNob2xkQ291bnQgPSBwcm9wcz8uc2V0UGFyZW50TWluVGhyZXNob2xkQ291bnRcbiAgICBjb25zdCBzZXRQYXJlbnRHdWFyYW50ZWVBdmFpbGFiaWxpdHkgPSBwcm9wcz8uc2V0UGFyZW50R3VhcmFudGVlQXZhaWxhYmlsaXR5XG4gICAgY29uc3Qgc2V0UGFyZW50SXNSZWN1cnJpbmcgPSBwcm9wcz8uc2V0UGFyZW50SXNSZWN1cnJpbmdcbiAgICBjb25zdCBzZXRQYXJlbnRMb2NrQWZ0ZXIgPSBwcm9wcz8uc2V0UGFyZW50TG9ja0FmdGVyXG5cbiAgICBjb25zdCBjaGFuZ2VBbnlvbmVDYW5BZGRTZWxmID0gKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHNldEFueW9uZUNhbkFkZFNlbGYodmFsdWUpXG4gICAgICAgIHNldFBhcmVudEFueW9uZUNhbkFkZFNlbGYodmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlR3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMgPSAodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2V0R3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHModmFsdWUpXG4gICAgICAgIHNldFBhcmVudEd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzKHZhbHVlKVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZU1pblRocmVzaG9sZENvdW50ID0gKGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiB7XG4gICAgICAgIHNldE1pblRocmVzaG9sZENvdW50KHBhcnNlSW50KGU/LnRhcmdldD8udmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCAnJyksIDEwKSlcbiAgICAgICAgc2V0UGFyZW50TWluVGhyZXNob2xkQ291bnQocGFyc2VJbnQoZT8udGFyZ2V0Py52YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSwgMTApKVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZUd1YXJhbnRlZUF2YWlsYWJpbGl0eSA9ICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuICAgICAgICBzZXRHdWFyYW50ZWVBdmFpbGFiaWxpdHkodmFsdWUpXG4gICAgICAgIHNldFBhcmVudEd1YXJhbnRlZUF2YWlsYWJpbGl0eSh2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VJc1JlY3VycmluZyA9ICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuICAgICAgICBzZXRJc1JlY3VycmluZyh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50SXNSZWN1cnJpbmcodmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlTG9ja0FmdGVyID0gKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHNldExvY2tBZnRlcih2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50TG9ja0FmdGVyKHZhbHVlKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxCb3ggZmxleD17MX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cblxuICAgICAgICAgICAgPFNjcm9sbFZpZXcgc3R5bGU9e3sgZmxleDogMSwgd2lkdGg6ICcxMDAlJyB9fSBjb250ZW50Q29udGFpbmVyU3R5bGU9e3sgYWxpZ25JdGVtczogJ2NlbnRlcid9fT4gXG4gICAgICAgICAgICAgICAgPEJveCBmbGV4PXsxfSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICAgICAgICA8Qm94IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnOTAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbiBub24taW52aXRlZCBndWVzdHMgYWRkIHRoZW1zZWx2ZXM/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtZW5kXCIgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2gxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29sb3I9e0NvbG9ycy5wdXJwbGUzMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmQ29sb3I9e0NvbG9ycy5wdXJwbGU2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17YW55b25lQ2FuQWRkU2VsZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17Y2hhbmdlQW55b25lQ2FuQWRkU2VsZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IDIwfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8Qm94IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnOTAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbiBndWVzdHMgc2VlIG90aGVyIGd1ZXN0cz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2gxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29sb3I9e0NvbG9ycy5wdXJwbGUzMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmQ29sb3I9e0NvbG9ycy5wdXJwbGU2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Z3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9e2NoYW5nZUd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkJvdHRvbTogMjB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICc5MCUnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJvcHRpb25IZWFkZXJcIiBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSG93IG1hbnkgbWluaW11bSBudW1iZXIgb2YgYXR0ZW5kZWVzIChpbmNsdWRpbmcgaG9zdCkgbmVlZGVkIGJlZm9yZSBjcmVhdGluZyBhIG5ldyBldmVudD9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTWluaW11bSB0aHJlc2hvbGQgY291bnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Y2hhbmdlTWluVGhyZXNob2xkQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YCR7bWluVGhyZXNob2xkQ291bnR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGVzLm1pblRocmVzaG9sZENvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDxCb3ggcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICc5MCUnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBsYWJlbD0nVXNlcnMgd2lsbCBhYmxlIHRvIHNlbGVjdCBjdXN0b20gdGltZXNsb3RzIHRoYXQgY2FuIG92ZXJsYXAgd2l0aCBhbHJlYWR5IHJlZ2lzdGVyZWQgZXZlbnRzJyBiZz0ncHVycGxlLjcwMCcgY29sb3I9J3doaXRlJyBhcmlhLWxhYmVsPSdBIHRvb2x0aXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCIgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvIHlvdSBsaWtlIHRvIGd1YXJhbnRlZSBhdmFpbGFiaWxpdHkgb2YgYW55IHRpbWUgc2xvdCByZWdhcmRsZXNzIG9mIGJlaW5nIGJ1c3kgb3Igbm90P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2gxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29sb3I9e0NvbG9ycy5wdXJwbGUzMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmQ29sb3I9e0NvbG9ycy5wdXJwbGU2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Z3VhcmFudGVlQXZhaWxhYmlsaXR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXtjaGFuZ2VHdWFyYW50ZWVBdmFpbGFiaWxpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiAyMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBzdHlsZT17eyB3aWR0aDogJzkwJScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtc3RhcnRcIiBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cIm9wdGlvbkhlYWRlclwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEbyB5b3Ugd2FudCB0aGlzIG1lZXRpbmcgdG8gYmUgcmVjdXJyaW5nP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbG9yPXtDb2xvcnMucHVycGxlMzB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZkNvbG9yPXtDb2xvcnMucHVycGxlNjB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzUmVjdXJyaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXtjaGFuZ2VJc1JlY3VycmluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IDIwfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8Qm94IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnOTAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIGxhYmVsPSdFdmVyeSB0aW1lIHRoZSBBSSBwbGFubmVyIHJ1bnMsIGl0IHdpbGwgbG9vayBmb3IgYSBtb3JlIG9wdGltYWwgdGltZSBnaXZlbiB0aGUgc2NoZWR1bGUgY29udGV4dC4gQnkgZW5hYmxpbmcgbG9jayBhZnRlciwgdGhlIEFJIHBsYW5uZXIgd2lsbCBubyBsb25nZXIgYmUgYWJsZSB0byBtb3ZlIHRoZSBtZWV0aW5nIGFmdGVyIHRoZSBmaXJzdCBjeWNsZS4nIGJnPSdwdXJwbGUuNzAwJyBjb2xvcj0nd2hpdGUnIGFyaWEtbGFiZWw9J0EgdG9vbHRpcCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIiBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG8geW91IHdhbnQgdG8gbG9jayBhZnRlciBvciBtYWtlIGl0IG5vdCBtb2RpZmlhYmxlIGZvciBBSSBwbGFubmVyIGFmdGVyIG1lZXRpbmcgaXMgZm9ybWVkP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbG9yPXtDb2xvcnMucHVycGxlMzB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmQ29sb3I9e0NvbG9ycy5wdXJwbGU2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtsb2NrQWZ0ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17Y2hhbmdlTG9ja0FmdGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiAyMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDwvU2Nyb2xsVmlldz5cblxuICAgICAgICA8L0JveD5cbiAgICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IEVkaXRNZWV0aW5nQXNzaXN0QmFzZVN0ZXA3XG5cblxuIl19