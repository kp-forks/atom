"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const colorsPalette_1 = require("@lib/theme/colorsPalette");
const react_2 = require("@chakra-ui/react");
const Switch_1 = __importDefault(require("@components/Switch"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const TextField_1 = __importDefault(require("@components/TextField"));
const lodash_1 = __importDefault(require("lodash"));
const sendUpdatesOptions = [
    { label: 'All', value: 'all' },
    { label: 'External Only', value: 'externalOnly' }
];
const transparencyOptions = [
    { label: 'Opaque', value: 'opaque' },
    { label: 'Transparent', value: 'transparent' }
];
const visibilityOptions = [
    { label: 'Default', value: 'default' },
    { label: 'Public', value: 'public' },
    { label: 'Private', value: 'private' }
];
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../../config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function EditMeetingAssistBaseStep3(props) {
    const [sendUpdates, setSendUpates] = (0, react_1.useState)(props?.sendUpdates);
    const [guestsCanInviteOthers, setGuestsCanInviteOthers] = (0, react_1.useState)(props?.guestsCanInviteOthers);
    const [transparency, setTransparency] = (0, react_1.useState)(props?.transparency);
    const [visibility, setVisibility] = (0, react_1.useState)(props?.visibility);
    const [isMessage, setIsMessage] = (0, react_1.useState)(false);
    const [hostName, setHostName] = (0, react_1.useState)(props?.hostName);
    (0, react_1.useEffect)(() => {
        if (hostName !== props?.hostName) {
            setHostName(props?.hostName);
        }
    }, [hostName, props?.hostName]);
    const setParentSendUpdates = props?.setParentSendUpdates;
    const setParentGuestsCanInviteOthers = props?.setParentGuestsCanInviteOthers;
    const setParentTransparency = props?.setParentTransparency;
    const setParentVisibility = props?.setParentVisibility;
    const setParentHostName = props?.setParentHostName;
    const changeSendUpdates = (value) => {
        setSendUpates(value);
        setParentSendUpdates(value);
    };
    const changeGuestsCanInviteOthers = (value) => {
        setGuestsCanInviteOthers(value);
        setParentGuestsCanInviteOthers(value);
    };
    const changeTransparency = (value) => {
        setTransparency(value);
        setParentTransparency(value);
    };
    const changeVisibility = (value) => {
        setVisibility(value);
        setParentVisibility(value);
    };
    const changeHostName = (e) => {
        setHostName(e?.target?.value);
        setParentHostName(e?.target?.value);
    };
    return ((0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, pt: { phone: 'l', tablet: 'xl' }, flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '80%' }, children: (0, jsx_runtime_1.jsx)(Box_1.default, { style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Host Name", placeholder: "John Doe", onChange: changeHostName, value: hostName, style: { width: '100%' } }) }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, justifyContent: "center", alignItems: "flex-start", style: { width: '80%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Google calendar option on who to notify - Google users vs non-Google users', "aria-label": 'A tooltip', children: (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Select who should receive updates" }), (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "for event changes?" })] }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", style: { width: '90%' }, children: (0, jsx_runtime_1.jsxs)("select", { value: sendUpdates, onChange: (e) => changeSendUpdates(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "Send updates to..." }), lodash_1.default.map(sendUpdatesOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, style: { width: '80%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Can Guests invite others?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Switch_1.default, { onColor: colorsPalette_1.colorsPalette.purple30, offColor: colorsPalette_1.colorsPalette.purple60, checked: guestsCanInviteOthers, onValueChange: changeGuestsCanInviteOthers, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, justifyContent: "center", alignItems: "center", style: { width: '80%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Should it block time on your calendar', "aria-label": 'A tooltip', children: (0, jsx_runtime_1.jsx)(Text_1.default, { p: { phone: 's', tablet: 'm' }, variant: "buttonLink", children: "Will the event be transparent?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsxs)("select", { value: transparency, onChange: (e) => changeTransparency(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "transparency" }), lodash_1.default.map(transparencyOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, justifyContent: "center", alignItems: "center", style: { width: '80%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Who can see the details of the event - anyone or just attendees', "aria-label": 'A tooltip', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsx)(Text_1.default, { p: { phone: 's', tablet: 'm' }, variant: "buttonLink", children: "Who can see this event?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsxs)("select", { value: visibility, onChange: (e) => changeVisibility(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "visibility...." }), lodash_1.default.map(visibilityOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] })] }));
}
exports.default = EditMeetingAssistBaseStep3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdE1lZXRpbmdBc3Npc3RCYXNlU3RlcDMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJFZGl0TWVldGluZ0Fzc2lzdEJhc2VTdGVwMy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFpQ0EsZ0RBcUNDOztBQXRFRCxpQ0FBNEU7QUFHNUUsNERBQWtFO0FBQ2xFLDRDQUEwQztBQUMxQyxnRUFBd0M7QUFDeEMsaUVBQXdDO0FBQ3hDLG1FQUEwQztBQUMxQyxzRUFBNkM7QUFHN0Msb0RBQXNCO0FBRXRCLE1BQU0sa0JBQWtCLEdBQUc7SUFDdkIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7SUFDOUIsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUM7Q0FDbkQsQ0FBQTtBQUVELE1BQU0sbUJBQW1CLEdBQUc7SUFDeEIsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUU7SUFDcEMsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUU7Q0FDakQsQ0FBQTtBQUVELE1BQU0saUJBQWlCLEdBQUc7SUFDdEIsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7SUFDdEMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUU7SUFDcEMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7Q0FDekMsQ0FBQTtBQUVELHdFQUE4QztBQUM5QyxpRUFBNkQ7QUFDN0QsOEVBQXFEO0FBRTlDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQWlEO0lBQ2xHLDBGQUEwRjtJQUMxRixzQ0FBc0M7SUFDdEMseUVBQXlFO0lBQ3pFLDBCQUFlLENBQUMsSUFBSSxDQUFDLElBQUEsNkJBQWEsR0FBRSxDQUFDLENBQUE7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LEtBQUssQ0FFSyxDQUN6QixDQUFDLElBQ0csR0FFSCxJQUNGLElBQ0YsQ0FFVCxDQUFBO0FBRUwsQ0FBQztBQUVELGtCQUFlLDBCQUEwQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIERpc3BhdGNoLCBTZXRTdGF0ZUFjdGlvbiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgQXBwZWFyYW5jZSwgS2V5Ym9hcmRBdm9pZGluZ1ZpZXcsIFBsYXRmb3JtLCBQcmVzc2FibGUsIFN0eWxlU2hlZXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnXG5cbmltcG9ydCB7IGNvbG9yc1BhbGV0dGUgYXMgQ29sb3JzIH0gZnJvbSAnQGxpYi90aGVtZS9jb2xvcnNQYWxldHRlJ1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ0BjaGFrcmEtdWkvcmVhY3QnXG5pbXBvcnQgU3dpdGNoMSBmcm9tICdAY29tcG9uZW50cy9Td2l0Y2gnXG5pbXBvcnQgQm94IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9Cb3gnXG5pbXBvcnQgVGV4dCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vVGV4dCdcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQGNvbXBvbmVudHMvVGV4dEZpZWxkJ1xuXG5pbXBvcnQgeyBwYWxldHRlIH0gZnJvbSAnQGxpYi90aGVtZS90aGVtZSdcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCdcblxuY29uc3Qgc2VuZFVwZGF0ZXNPcHRpb25zID0gW1xuICAgIHsgbGFiZWw6ICdBbGwnLCB2YWx1ZTogJ2FsbCcgfSxcbiAgICB7IGxhYmVsOiAnRXh0ZXJuYWwgT25seScsIHZhbHVlOiAnZXh0ZXJuYWxPbmx5J31cbl1cblxuY29uc3QgdHJhbnNwYXJlbmN5T3B0aW9ucyA9IFtcbiAgICB7IGxhYmVsOiAnT3BhcXVlJywgdmFsdWU6ICdvcGFxdWUnIH0sXG4gICAgeyBsYWJlbDogJ1RyYW5zcGFyZW50JywgdmFsdWU6ICd0cmFuc3BhcmVudCcgfVxuXVxuXG5jb25zdCB2aXNpYmlsaXR5T3B0aW9ucyA9IFtcbiAgICB7IGxhYmVsOiAnRGVmYXVsdCcsIHZhbHVlOiAnZGVmYXVsdCcgfSxcbiAgICB7IGxhYmVsOiAnUHVibGljJywgdmFsdWU6ICdwdWJsaWMnIH0sXG4gICAgeyBsYWJlbDogJ1ByaXZhdGUnLCB2YWx1ZTogJ3ByaXZhdGUnIH1cbl1cbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBzdXBlcnRva2Vuc05vZGUgZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZSdcbmltcG9ydCB7IGJhY2tlbmRDb25maWcgfSBmcm9tICcuLi8uLi8uLi9jb25maWcvYmFja2VuZENvbmZpZydcbmltcG9ydCBTZXNzaW9uIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUvcmVjaXBlL3Nlc3Npb24nXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcyB9OiB7IHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlIH0pIHtcbiAgLy8gTm90aWNlIGhvdyB0aGUgc2VydmVyIHVzZXMgYEFQSWAgZnJvbSBgd2l0aFNTUkNvbnRleHRgLCBpbnN0ZWFkIG9mIHRoZSB0b3AtbGV2ZWwgYEFQSWAuXG4gIC8vIGNvbnN0IFNTUiA9IHdpdGhTU1JDb250ZXh0KHsgcmVxIH0pXG4gIC8vIHRoaXMgcnVucyBvbiB0aGUgYmFja2VuZCwgc28gd2UgbXVzdCBjYWxsIGluaXQgb24gc3VwZXJ0b2tlbnMtbm9kZSBTREtcbiAgc3VwZXJ0b2tlbnNOb2RlLmluaXQoYmFja2VuZENvbmZpZygpKVxuICBsZXQgc2Vzc2lvblxuICB0cnkge1xuICAgIHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmdldFNlc3Npb24ocmVxLCByZXMsIHtcbiAgICAgIG92ZXJyaWRlR2xvYmFsQ2xhaW1WYWxpZGF0b3JzOiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfSxcbiAgICB9KVxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5UUllfUkVGUkVTSF9UT0tFTikge1xuICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgfSBlbHNlIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5VTkFVVEhPUklTRUQpIHtcbiAgICAgIC8vIHRoaXMgd2lsbCBmb3JjZSB0aGUgZnJvbnRlbmQgdG8gdHJ5IGFuZCByZWZyZXNoIHdoaWNoIHdpbGwgZmFpbFxuICAgICAgLy8gY2xlYXJpbmcgYWxsIGNvb2tpZXMgYW5kIHJlZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBsb2dpbiBzY3JlZW4uXG4gICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICB9XG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICBpZiAoIXNlc3Npb24/LmdldFVzZXJJZCgpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIGRlc3RpbmF0aW9uOiAnL1VzZXIvTG9naW4vVXNlckxvZ2luJyxcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgc3ViOiBzZXNzaW9uLmdldFVzZXJJZCgpLFxuICAgIH1cbiAgfVxufVxuXG50eXBlIFByb3BzID0ge1xuICAgIHNlbmRVcGRhdGVzOiAnYWxsJyB8ICdleHRlcm5hbE9ubHknLFxuICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogYm9vbGVhbixcbiAgICB0cmFuc3BhcmVuY3k6ICdvcGFxdWUnIHwgJ3RyYW5zcGFyZW50JyxcbiAgICB2aXNpYmlsaXR5OiAnZGVmYXVsdCcgfCAncHVibGljJyB8ICdwcml2YXRlJyxcbiAgICBob3N0TmFtZTogc3RyaW5nLFxuICAgIHNldFBhcmVudFNlbmRVcGRhdGVzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjwnYWxsJyB8ICdleHRlcm5hbE9ubHknPj4sXG4gICAgc2V0UGFyZW50R3Vlc3RzQ2FuSW52aXRlT3RoZXJzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxib29sZWFuPj4sXG4gICAgc2V0UGFyZW50VHJhbnNwYXJlbmN5OiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjwnb3BhcXVlJyB8ICd0cmFuc3BhcmVudCc+PixcbiAgICBzZXRQYXJlbnRWaXNpYmlsaXR5OiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjwnZGVmYXVsdCcgfCAncHVibGljJyB8ICdwcml2YXRlJz4+LFxuICAgIHNldFBhcmVudEhvc3ROYW1lOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxzdHJpbmc+Pixcbn1cblxuZnVuY3Rpb24gRWRpdE1lZXRpbmdBc3Npc3RCYXNlU3RlcDMocHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgW3NlbmRVcGRhdGVzLCBzZXRTZW5kVXBhdGVzXSA9IHVzZVN0YXRlPCdhbGwnIHwgJ2V4dGVybmFsT25seSc+KHByb3BzPy5zZW5kVXBkYXRlcylcbiAgICBjb25zdCBbZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzLCBzZXRHdWVzdHNDYW5JbnZpdGVPdGhlcnNdID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/Lmd1ZXN0c0Nhbkludml0ZU90aGVycylcbiAgICBjb25zdCBbdHJhbnNwYXJlbmN5LCBzZXRUcmFuc3BhcmVuY3ldID0gdXNlU3RhdGU8J29wYXF1ZScgfCAndHJhbnNwYXJlbnQnPihwcm9wcz8udHJhbnNwYXJlbmN5KVxuICAgIGNvbnN0IFt2aXNpYmlsaXR5LCBzZXRWaXNpYmlsaXR5XSA9IHVzZVN0YXRlPCdkZWZhdWx0JyB8ICdwdWJsaWMnIHwgJ3ByaXZhdGUnPihwcm9wcz8udmlzaWJpbGl0eSlcbiAgICBjb25zdCBbaXNNZXNzYWdlLCBzZXRJc01lc3NhZ2VdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gICAgY29uc3QgW2hvc3ROYW1lLCBzZXRIb3N0TmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KHByb3BzPy5ob3N0TmFtZSlcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoaG9zdE5hbWUgIT09IHByb3BzPy5ob3N0TmFtZSkge1xuICAgICAgICBzZXRIb3N0TmFtZShwcm9wcz8uaG9zdE5hbWUpXG4gICAgICB9XG4gICAgfSwgW2hvc3ROYW1lLCBwcm9wcz8uaG9zdE5hbWVdKVxuXG4gICAgY29uc3Qgc2V0UGFyZW50U2VuZFVwZGF0ZXMgPSBwcm9wcz8uc2V0UGFyZW50U2VuZFVwZGF0ZXNcbiAgICBjb25zdCBzZXRQYXJlbnRHdWVzdHNDYW5JbnZpdGVPdGhlcnMgPSBwcm9wcz8uc2V0UGFyZW50R3Vlc3RzQ2FuSW52aXRlT3RoZXJzXG4gICAgY29uc3Qgc2V0UGFyZW50VHJhbnNwYXJlbmN5ID0gcHJvcHM/LnNldFBhcmVudFRyYW5zcGFyZW5jeVxuICAgIGNvbnN0IHNldFBhcmVudFZpc2liaWxpdHkgPSBwcm9wcz8uc2V0UGFyZW50VmlzaWJpbGl0eVxuICAgIGNvbnN0IHNldFBhcmVudEhvc3ROYW1lID0gcHJvcHM/LnNldFBhcmVudEhvc3ROYW1lXG5cbiAgICBjb25zdCBjaGFuZ2VTZW5kVXBkYXRlcyA9ICh2YWx1ZTogJ2FsbCcgfCAnZXh0ZXJuYWxPbmx5JykgPT4ge1xuICAgICAgICBzZXRTZW5kVXBhdGVzKHZhbHVlKVxuICAgICAgICBzZXRQYXJlbnRTZW5kVXBkYXRlcyh2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VHdWVzdHNDYW5JbnZpdGVPdGhlcnMgPSAodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2V0R3Vlc3RzQ2FuSW52aXRlT3RoZXJzKHZhbHVlKVxuICAgICAgICBzZXRQYXJlbnRHdWVzdHNDYW5JbnZpdGVPdGhlcnModmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVHJhbnNwYXJlbmN5ID0gKHZhbHVlOiAnb3BhcXVlJyB8ICd0cmFuc3BhcmVudCcpID0+IHtcbiAgICAgICAgc2V0VHJhbnNwYXJlbmN5KHZhbHVlKVxuICAgICAgICBzZXRQYXJlbnRUcmFuc3BhcmVuY3kodmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVmlzaWJpbGl0eSA9ICh2YWx1ZTogJ2RlZmF1bHQnIHwgJ3B1YmxpYycgfCAncHJpdmF0ZScpID0+IHtcbiAgICAgICAgc2V0VmlzaWJpbGl0eSh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50VmlzaWJpbGl0eSh2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VIb3N0TmFtZSA9IChlOiB7IHRhcmdldDogeyB2YWx1ZTogc3RyaW5nIH0gfSkgPT4ge1xuICAgICAgc2V0SG9zdE5hbWUoZT8udGFyZ2V0Py52YWx1ZSlcbiAgICAgIHNldFBhcmVudEhvc3ROYW1lKGU/LnRhcmdldD8udmFsdWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcblxuICAgICAgICA8Qm94IGZsZXg9ezF9IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgPEJveCBmbGV4PXsxfSBwdD17eyBwaG9uZTogJ2wnLCB0YWJsZXQ6ICd4bCcgfX0gZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzgwJSd9fT5cbiAgICAgICAgICAgICAgPEJveCAgc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX0+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJIb3N0IE5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiSm9obiBEb2VcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtjaGFuZ2VIb3N0TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aG9zdE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggZmxleD17MX0gcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiZmxleC1zdGFydFwiIHN0eWxlPXt7IHdpZHRoOiAnODAlJyB9fT5cbiAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuXG4gICAgICAgICAgICAgIDxUb29sdGlwIGxhYmVsPSdHb29nbGUgY2FsZW5kYXIgb3B0aW9uIG9uIHdobyB0byBub3RpZnkgLSBHb29nbGUgdXNlcnMgdnMgbm9uLUdvb2dsZSB1c2VycycgYXJpYS1sYWJlbD0nQSB0b29sdGlwJz5cbiAgICAgICAgICAgICAgICAgICAgPEJveCAgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdCB3aG8gc2hvdWxkIHJlY2VpdmUgdXBkYXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBldmVudCBjaGFuZ2VzP1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgPC9Cb3g+XG5cbiAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzkwJScgfX0+XG4gICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtzZW5kVXBkYXRlc30gb25DaGFuZ2U9eyhlKSA9PiBjaGFuZ2VTZW5kVXBkYXRlcyhlPy50YXJnZXQ/LnZhbHVlIGFzIFwiYWxsXCIgfCBcImV4dGVybmFsT25seVwiKX0gY2xhc3NOYW1lPVwic2VsZWN0IHNlbGVjdC1wcmltYXJ5IHctZnVsbCBtYXgtdy14c1wiPlxuICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHNlbGVjdGVkPlNlbmQgdXBkYXRlcyB0by4uLjwvb3B0aW9uPlxuICAgICAgICAgICAgICB7Xy5tYXAoc2VuZFVwZGF0ZXNPcHRpb25zLCBvcHRpb24gPT4gKFxuICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBrZXk9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgID57b3B0aW9uLmxhYmVsfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggZmxleD17MX0gcD17eyBwaG9uZTogJ3MnLCB0YWJsZXQ6ICdtJyB9fSBzdHlsZT17eyB3aWR0aDogJzgwJScgfX0+XG4gICAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cIm9wdGlvbkhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICBDYW4gR3Vlc3RzIGludml0ZSBvdGhlcnM/XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgICAgICAgICA8U3dpdGNoMVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ29sb3I9e0NvbG9ycy5wdXJwbGUzMH1cbiAgICAgICAgICAgICAgICAgICAgICBvZmZDb2xvcj17Q29sb3JzLnB1cnBsZTYwfVxuICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2d1ZXN0c0Nhbkludml0ZU90aGVyc31cbiAgICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXtjaGFuZ2VHdWVzdHNDYW5JbnZpdGVPdGhlcnN9XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IDIwfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCb3ggZmxleD17MX0gcD17eyBwaG9uZTogJ3MnLCB0YWJsZXQ6ICdtJyB9fSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzgwJSd9fSA+XG4gICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtc3RhcnRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319PlxuICAgICAgICAgICAgICA8VG9vbHRpcCBsYWJlbD0nU2hvdWxkIGl0IGJsb2NrIHRpbWUgb24geW91ciBjYWxlbmRhcicgYXJpYS1sYWJlbD0nQSB0b29sdGlwJz5cbiAgICAgICAgICAgICAgICA8VGV4dCBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgICAgICBXaWxsIHRoZSBldmVudCBiZSB0cmFuc3BhcmVudD9cbiAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e3RyYW5zcGFyZW5jeX0gb25DaGFuZ2U9eyhlKSA9PiBjaGFuZ2VUcmFuc3BhcmVuY3koZT8udGFyZ2V0Py52YWx1ZSBhcyAnb3BhcXVlJyB8ICd0cmFuc3BhcmVudCcpfSBjbGFzc05hbWU9XCJzZWxlY3Qgc2VsZWN0LXByaW1hcnkgdy1mdWxsIG1heC13LXhzXCI+XG4gICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgc2VsZWN0ZWQ+dHJhbnNwYXJlbmN5PC9vcHRpb24+XG4gICAgICAgICAgICAgIHtfLm1hcCh0cmFuc3BhcmVuY3lPcHRpb25zLCBvcHRpb24gPT4gKFxuICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBrZXk9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgID57b3B0aW9uLmxhYmVsfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8Qm94IGZsZXg9ezF9IHA9e3sgcGhvbmU6ICdzJywgdGFibGV0OiAnbScgfX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICc4MCUnIH19PlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cblxuICAgICAgICAgICAgICA8VG9vbHRpcCBsYWJlbD0nV2hvIGNhbiBzZWUgdGhlIGRldGFpbHMgb2YgdGhlIGV2ZW50IC0gYW55b25lIG9yIGp1c3QgYXR0ZW5kZWVzJyBhcmlhLWxhYmVsPSdBIHRvb2x0aXAnIGJnPSdwdXJwbGUuNzAwJyBjb2xvcj0nd2hpdGUnPlxuICAgICAgICAgICAgICAgIDxUZXh0IHA9e3sgcGhvbmU6ICdzJywgdGFibGV0OiAnbScgfX0gdmFyaWFudD1cImJ1dHRvbkxpbmtcIj5cbiAgICAgICAgICAgICAgICAgIFdobyBjYW4gc2VlIHRoaXMgZXZlbnQ/XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e3Zpc2liaWxpdHl9IG9uQ2hhbmdlPXsoZSkgPT4gY2hhbmdlVmlzaWJpbGl0eShlPy50YXJnZXQ/LnZhbHVlIGFzICdkZWZhdWx0JyB8ICdwdWJsaWMnIHwgJ3ByaXZhdGUnKX0gY2xhc3NOYW1lPVwic2VsZWN0IHNlbGVjdC1wcmltYXJ5IHctZnVsbCBtYXgtdy14c1wiPlxuICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHNlbGVjdGVkPnZpc2liaWxpdHkuLi4uPC9vcHRpb24+XG4gICAgICAgICAgICAgIHtfLm1hcCh2aXNpYmlsaXR5T3B0aW9ucywgb3B0aW9uID0+IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAga2V5PXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICA+e29wdGlvbi5sYWJlbH08L29wdGlvbj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgIFxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgIDwvQm94PlxuXG4gICAgKVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEVkaXRNZWV0aW5nQXNzaXN0QmFzZVN0ZXAzXG4iXX0=