"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_2 = require("@chakra-ui/react");
const Switch_1 = __importDefault(require("@components/Switch"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const TextField_1 = __importDefault(require("@components/TextField"));
const lodash_1 = __importDefault(require("lodash"));
const sendUpdatesOptions = [
    { label: 'All', value: 'all' },
    { label: 'External Only', value: 'externalOnly' }
];
const transparencyOptions = [
    { label: 'Opaque', value: 'opaque' },
    { label: 'Transparent', value: 'transparent' }
];
const visibilityOptions = [
    { label: 'Default', value: 'default' },
    { label: 'Public', value: 'public' },
    { label: 'Private', value: 'private' }
];
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../../config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function CreateMeetingAssistBaseStep3(props) {
    const [sendUpdates, setSendUpates] = (0, react_1.useState)(props?.sendUpdates);
    const [guestsCanInviteOthers, setGuestsCanInviteOthers] = (0, react_1.useState)(props?.guestsCanInviteOthers);
    const [transparency, setTransparency] = (0, react_1.useState)(props?.transparency);
    const [visibility, setVisibility] = (0, react_1.useState)(props?.visibility);
    const [hostName, setHostName] = (0, react_1.useState)(props?.hostName);
    (0, react_1.useEffect)(() => {
        if (hostName !== props?.hostName) {
            setHostName(props?.hostName);
        }
    }, [hostName, props?.hostName]);
    const setParentSendUpdates = props?.setParentSendUpdates;
    const setParentGuestsCanInviteOthers = props?.setParentGuestsCanInviteOthers;
    const setParentTransparency = props?.setParentTransparency;
    const setParentVisibility = props?.setParentVisibility;
    const setParentHostName = props?.setParentHostName;
    const changeSendUpdates = (value) => {
        setSendUpates(value);
        setParentSendUpdates(value);
    };
    const changeGuestsCanInviteOthers = (value) => {
        setGuestsCanInviteOthers(value);
        setParentGuestsCanInviteOthers(value);
    };
    const changeTransparency = (value) => {
        setTransparency(value);
        setParentTransparency(value);
    };
    const changeVisibility = (value) => {
        setVisibility(value);
        setParentVisibility(value);
    };
    const changeHostName = (e) => {
        setHostName(e?.target?.value);
        setParentHostName(e?.target?.value);
    };
    return ((0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, minHeight: "65vh", maxHeight: "65vh", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, pt: { phone: 'l', tablet: 'xl' }, flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '90%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Host Name", placeholder: "John Doe", onChange: changeHostName, value: hostName, style: { width: '100%' } }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Google calendar option on who to notify - Google users vs non-Google users', "aria-label": 'A tooltip', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsxs)(Box_1.default, { pt: { phone: 'm', tablet: 's' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Select who should receive updates" }), (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "for event changes?" })] }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", children: (0, jsx_runtime_1.jsxs)("select", { value: sendUpdates, onChange: (e) => changeSendUpdates(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "Send updates to..." }), lodash_1.default.map(sendUpdatesOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", pt: { phone: 'm', tablet: 's' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Can Guests invite others?" }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", children: (0, jsx_runtime_1.jsx)(Switch_1.default, { checked: guestsCanInviteOthers, onValueChange: changeGuestsCanInviteOthers, style: { marginBottom: 20 } }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Should it block time on your calendar', "aria-label": 'A tooltip', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Will the event be transparent?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", children: (0, jsx_runtime_1.jsxs)("select", { value: transparency, onChange: (e) => changeTransparency(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "transparency" }), lodash_1.default.map(transparencyOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, pt: { phone: 'm', tablet: 's' }, flexDirection: { tablet: "row" }, justifyContent: "space-between", alignItems: "center", width: "70%", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-start", alignItems: "center", children: (0, jsx_runtime_1.jsx)(react_2.Tooltip, { label: 'Who can see the details of the event - anyone or just attendees', bg: 'purple.700', color: 'white', children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: "Who can see this event?" }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flexDirection: "row", justifyContent: "flex-end", alignItems: "center", children: (0, jsx_runtime_1.jsxs)("select", { value: visibility, onChange: (e) => changeVisibility(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, selected: true, children: "visibility..." }), lodash_1.default.map(visibilityOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) })] })] }));
}
exports.default = CreateMeetingAssistBaseStep3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3JlYXRlTWVldGluZ0Fzc2lzdEJhc2VTdGVwMy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkNyZWF0ZU1lZXRpbmdBc3Npc3RCYXNlU3RlcDMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBaUNBLGdEQXFDQzs7QUF0RUQsaUNBQTRFO0FBRzVFLDRDQUEwQztBQUN6QyxnRUFBd0M7QUFDekMsaUVBQXdDO0FBQ3hDLG1FQUEwQztBQUMxQyxzRUFBNkM7QUFFN0Msb0RBQXNCO0FBRXRCLE1BQU0sa0JBQWtCLEdBQUc7SUFDdkIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7SUFDOUIsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUM7Q0FDbkQsQ0FBQTtBQUVELE1BQU0sbUJBQW1CLEdBQUc7SUFDeEIsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUU7SUFDcEMsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUU7Q0FDakQsQ0FBQTtBQUVELE1BQU0saUJBQWlCLEdBQUc7SUFDdEIsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7SUFDdEMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUU7SUFDcEMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7Q0FDekMsQ0FBQTtBQUlELHdFQUE4QztBQUM5QyxpRUFBNkQ7QUFDN0QsOEVBQXFEO0FBRTlDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQWlEO0lBQ2xHLDBGQUEwRjtJQUMxRixzQ0FBc0M7SUFDdEMseUVBQXlFO0lBQ3pFLDBCQUFlLENBQUMsSUFBSSxDQUFDLElBQUEsNkJBQWEsR0FBRSxDQUFDLENBQUE7SUFDckMsSUFB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QUFLLEVBQUMsaUVBQWlFLEVBQUMsRUFBRSxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsT0FBTyxZQUM1Ryx1QkFBQyxjQUFJLElBQUMsT0FBTyxFQUFDLFlBQVksd0NBRW5CLEdBQ0MsR0FDUixFQUNOLHVCQUFDLGFBQUcsSUFBQyxhQUFhLEVBQUMsS0FBSyxFQUFDLGNBQWMsRUFBQyxVQUFVLEVBQUMsVUFBVSxFQUFDLFFBQVEsWUFDcEUsb0NBQVEsS0FBSyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBeUMsQ0FBQyxFQUFFLFNBQVMsRUFBQyx1Q0FBdUMsYUFDakssbUNBQVEsUUFBUSxRQUFDLFFBQVEsb0NBQXVCLEVBQy9DLGdCQUFDLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FDaEMsbUNBRUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLFlBQ25CLE1BQU0sQ0FBQyxLQUFLLElBRlAsTUFBTSxDQUFDLEtBQUssQ0FFSyxDQUN6QixDQUFDLElBQ0MsR0FDTCxJQUNGLElBQ0YsQ0FFVCxDQUFBO0FBRUwsQ0FBQztBQUdELGtCQUFlLDRCQUE0QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIERpc3BhdGNoLCBTZXRTdGF0ZUFjdGlvbiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgQXBwZWFyYW5jZSwgUHJlc3NhYmxlLCBTdHlsZVNoZWV0IH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuaW1wb3J0IHsgY29sb3JzUGFsZXR0ZSBhcyBDb2xvcnMgfSBmcm9tICdAbGliL3RoZW1lL2NvbG9yc1BhbGV0dGUnXG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnQGNoYWtyYS11aS9yZWFjdCdcbiBpbXBvcnQgU3dpdGNoMSBmcm9tICdAY29tcG9uZW50cy9Td2l0Y2gnXG5pbXBvcnQgQm94IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9Cb3gnXG5pbXBvcnQgVGV4dCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vVGV4dCdcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQGNvbXBvbmVudHMvVGV4dEZpZWxkJ1xuaW1wb3J0IHsgcGFsZXR0ZSB9IGZyb20gJ0BsaWIvdGhlbWUvdGhlbWUnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5cbmNvbnN0IHNlbmRVcGRhdGVzT3B0aW9ucyA9IFtcbiAgICB7IGxhYmVsOiAnQWxsJywgdmFsdWU6ICdhbGwnIH0sXG4gICAgeyBsYWJlbDogJ0V4dGVybmFsIE9ubHknLCB2YWx1ZTogJ2V4dGVybmFsT25seSd9XG5dXG5cbmNvbnN0IHRyYW5zcGFyZW5jeU9wdGlvbnMgPSBbXG4gICAgeyBsYWJlbDogJ09wYXF1ZScsIHZhbHVlOiAnb3BhcXVlJyB9LFxuICAgIHsgbGFiZWw6ICdUcmFuc3BhcmVudCcsIHZhbHVlOiAndHJhbnNwYXJlbnQnIH1cbl1cblxuY29uc3QgdmlzaWJpbGl0eU9wdGlvbnMgPSBbXG4gICAgeyBsYWJlbDogJ0RlZmF1bHQnLCB2YWx1ZTogJ2RlZmF1bHQnIH0sXG4gICAgeyBsYWJlbDogJ1B1YmxpYycsIHZhbHVlOiAncHVibGljJyB9LFxuICAgIHsgbGFiZWw6ICdQcml2YXRlJywgdmFsdWU6ICdwcml2YXRlJyB9XG5dXG5cblxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHN1cGVydG9rZW5zTm9kZSBmcm9tICdzdXBlcnRva2Vucy1ub2RlJ1xuaW1wb3J0IHsgYmFja2VuZENvbmZpZyB9IGZyb20gJy4uLy4uLy4uL2NvbmZpZy9iYWNrZW5kQ29uZmlnJ1xuaW1wb3J0IFNlc3Npb24gZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZS9yZWNpcGUvc2Vzc2lvbidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzIH06IHsgcmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UgfSkge1xuICAvLyBOb3RpY2UgaG93IHRoZSBzZXJ2ZXIgdXNlcyBgQVBJYCBmcm9tIGB3aXRoU1NSQ29udGV4dGAsIGluc3RlYWQgb2YgdGhlIHRvcC1sZXZlbCBgQVBJYC5cbiAgLy8gY29uc3QgU1NSID0gd2l0aFNTUkNvbnRleHQoeyByZXEgfSlcbiAgLy8gdGhpcyBydW5zIG9uIHRoZSBiYWNrZW5kLCBzbyB3ZSBtdXN0IGNhbGwgaW5pdCBvbiBzdXBlcnRva2Vucy1ub2RlIFNES1xuICBzdXBlcnRva2Vuc05vZGUuaW5pdChiYWNrZW5kQ29uZmlnKCkpXG4gIGxldCBzZXNzaW9uXG4gIHRyeSB7XG4gICAgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb24uZ2V0U2Vzc2lvbihyZXEsIHJlcywge1xuICAgICAgb3ZlcnJpZGVHbG9iYWxDbGFpbVZhbGlkYXRvcnM6IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlRSWV9SRUZSRVNIX1RPS0VOKSB7XG4gICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICB9IGVsc2UgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlVOQVVUSE9SSVNFRCkge1xuICAgICAgLy8gdGhpcyB3aWxsIGZvcmNlIHRoZSBmcm9udGVuZCB0byB0cnkgYW5kIHJlZnJlc2ggd2hpY2ggd2lsbCBmYWlsXG4gICAgICAvLyBjbGVhcmluZyBhbGwgY29va2llcyBhbmQgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIGxvZ2luIHNjcmVlbi5cbiAgICAgIHJldHVybiB7IHByb3BzOiB7IGZyb21TdXBlcnRva2VuczogJ25lZWRzLXJlZnJlc2gnIH0gfVxuICAgIH1cbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIGlmICghc2Vzc2lvbj8uZ2V0VXNlcklkKCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgZGVzdGluYXRpb246ICcvVXNlci9Mb2dpbi9Vc2VyTG9naW4nLFxuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBzdWI6IHNlc3Npb24uZ2V0VXNlcklkKCksXG4gICAgfVxuICB9XG59XG5cblxudHlwZSBQcm9wcyA9IHtcbiAgICBzZW5kVXBkYXRlczogJ2FsbCcgfCAnZXh0ZXJuYWxPbmx5JyxcbiAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnM6IGJvb2xlYW4sXG4gICAgdHJhbnNwYXJlbmN5OiAnb3BhcXVlJyB8ICd0cmFuc3BhcmVudCcsXG4gICAgdmlzaWJpbGl0eTogJ2RlZmF1bHQnIHwgJ3B1YmxpYycgfCAncHJpdmF0ZScsXG4gICAgaG9zdE5hbWU6IHN0cmluZyxcbiAgICBzZXRQYXJlbnRTZW5kVXBkYXRlczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248J2FsbCcgfCAnZXh0ZXJuYWxPbmx5Jz4+LFxuICAgIHNldFBhcmVudEd1ZXN0c0Nhbkludml0ZU90aGVyczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248Ym9vbGVhbj4+LFxuICAgIHNldFBhcmVudFRyYW5zcGFyZW5jeTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248J29wYXF1ZScgfCAndHJhbnNwYXJlbnQnPj4sXG4gICAgc2V0UGFyZW50VmlzaWJpbGl0eTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248J2RlZmF1bHQnIHwgJ3B1YmxpYycgfCAncHJpdmF0ZSc+PixcbiAgICBzZXRQYXJlbnRIb3N0TmFtZTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248c3RyaW5nPj4sXG59XG5cbmZ1bmN0aW9uIENyZWF0ZU1lZXRpbmdBc3Npc3RCYXNlU3RlcDMocHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgW3NlbmRVcGRhdGVzLCBzZXRTZW5kVXBhdGVzXSA9IHVzZVN0YXRlPCdhbGwnIHwgJ2V4dGVybmFsT25seSc+KHByb3BzPy5zZW5kVXBkYXRlcylcbiAgICBjb25zdCBbZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzLCBzZXRHdWVzdHNDYW5JbnZpdGVPdGhlcnNdID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/Lmd1ZXN0c0Nhbkludml0ZU90aGVycylcbiAgICBjb25zdCBbdHJhbnNwYXJlbmN5LCBzZXRUcmFuc3BhcmVuY3ldID0gdXNlU3RhdGU8J29wYXF1ZScgfCAndHJhbnNwYXJlbnQnPihwcm9wcz8udHJhbnNwYXJlbmN5KVxuICAgIGNvbnN0IFt2aXNpYmlsaXR5LCBzZXRWaXNpYmlsaXR5XSA9IHVzZVN0YXRlPCdkZWZhdWx0JyB8ICdwdWJsaWMnIHwgJ3ByaXZhdGUnPihwcm9wcz8udmlzaWJpbGl0eSlcbiAgICBjb25zdCBbaG9zdE5hbWUsIHNldEhvc3ROYW1lXSA9IHVzZVN0YXRlPHN0cmluZz4ocHJvcHM/Lmhvc3ROYW1lKVxuXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGhvc3ROYW1lICE9PSBwcm9wcz8uaG9zdE5hbWUpIHtcbiAgICAgICAgc2V0SG9zdE5hbWUocHJvcHM/Lmhvc3ROYW1lKVxuICAgICAgfVxuICAgIH0sIFtob3N0TmFtZSwgcHJvcHM/Lmhvc3ROYW1lXSlcblxuICAgIGNvbnN0IHNldFBhcmVudFNlbmRVcGRhdGVzID0gcHJvcHM/LnNldFBhcmVudFNlbmRVcGRhdGVzXG4gICAgY29uc3Qgc2V0UGFyZW50R3Vlc3RzQ2FuSW52aXRlT3RoZXJzID0gcHJvcHM/LnNldFBhcmVudEd1ZXN0c0Nhbkludml0ZU90aGVyc1xuICAgIGNvbnN0IHNldFBhcmVudFRyYW5zcGFyZW5jeSA9IHByb3BzPy5zZXRQYXJlbnRUcmFuc3BhcmVuY3lcbiAgICBjb25zdCBzZXRQYXJlbnRWaXNpYmlsaXR5ID0gcHJvcHM/LnNldFBhcmVudFZpc2liaWxpdHlcbiAgICBjb25zdCBzZXRQYXJlbnRIb3N0TmFtZSA9IHByb3BzPy5zZXRQYXJlbnRIb3N0TmFtZVxuXG4gICAgY29uc3QgY2hhbmdlU2VuZFVwZGF0ZXMgPSAodmFsdWU6ICdhbGwnIHwgJ2V4dGVybmFsT25seScpID0+IHtcbiAgICAgICAgc2V0U2VuZFVwYXRlcyh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50U2VuZFVwZGF0ZXModmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlR3Vlc3RzQ2FuSW52aXRlT3RoZXJzID0gKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHNldEd1ZXN0c0Nhbkludml0ZU90aGVycyh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50R3Vlc3RzQ2FuSW52aXRlT3RoZXJzKHZhbHVlKVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZVRyYW5zcGFyZW5jeSA9ICh2YWx1ZTogJ29wYXF1ZScgfCAndHJhbnNwYXJlbnQnKSA9PiB7XG4gICAgICAgIHNldFRyYW5zcGFyZW5jeSh2YWx1ZSlcbiAgICAgICAgc2V0UGFyZW50VHJhbnNwYXJlbmN5KHZhbHVlKVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZVZpc2liaWxpdHkgPSAodmFsdWU6ICdkZWZhdWx0JyB8ICdwdWJsaWMnIHwgJ3ByaXZhdGUnKSA9PiB7XG4gICAgICAgIHNldFZpc2liaWxpdHkodmFsdWUpXG4gICAgICAgIHNldFBhcmVudFZpc2liaWxpdHkodmFsdWUpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlSG9zdE5hbWUgPSAoZTogeyB0YXJnZXQ6IHsgdmFsdWU6IFJlYWN0LlNldFN0YXRlQWN0aW9uPHN0cmluZz4gfSB9KSA9PiB7XG4gICAgICBzZXRIb3N0TmFtZShlPy50YXJnZXQ/LnZhbHVlKVxuICAgICAgc2V0UGFyZW50SG9zdE5hbWUoZT8udGFyZ2V0Py52YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Qm94IGZsZXg9ezF9IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0gbWluSGVpZ2h0PVwiNjV2aFwiIG1heEhlaWdodD1cIjY1dmhcIj5cbiAgICAgICAgICA8Qm94IGZsZXg9ezF9IHB0PXt7IHBob25lOiAnbCcsIHRhYmxldDogJ3hsJyB9fSBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnOTAlJyB9fT5cbiAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgIGxhYmVsPVwiSG9zdCBOYW1lXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiSm9obiBEb2VcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2NoYW5nZUhvc3ROYW1lfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2hvc3ROYW1lfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPEJveCBmbGV4PXsxfSBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBmbGV4RGlyZWN0aW9uPXt7IHRhYmxldDogXCJyb3dcIn19IGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiB3aWR0aD1cIjcwJVwiPlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9J0dvb2dsZSBjYWxlbmRhciBvcHRpb24gb24gd2hvIHRvIG5vdGlmeSAtIEdvb2dsZSB1c2VycyB2cyBub24tR29vZ2xlIHVzZXJzJyBhcmlhLWxhYmVsPSdBIHRvb2x0aXAnIGJnPSdwdXJwbGUuNzAwJyBjb2xvcj0nd2hpdGUnPlxuICAgICAgICAgICAgICAgICAgICA8Qm94ICBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0IHdobyBzaG91bGQgcmVjZWl2ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBldmVudCBjaGFuZ2VzP1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG5cbiAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e3NlbmRVcGRhdGVzfSBvbkNoYW5nZT17KGUpID0+IGNoYW5nZVNlbmRVcGRhdGVzKGU/LnRhcmdldD8udmFsdWUgYXMgXCJhbGxcIiB8IFwiZXh0ZXJuYWxPbmx5XCIpfSBjbGFzc05hbWU9XCJzZWxlY3Qgc2VsZWN0LXByaW1hcnkgdy1mdWxsIG1heC13LXhzXCI+XG4gICAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCBzZWxlY3RlZD5TZW5kIHVwZGF0ZXMgdG8uLi48L29wdGlvbj5cbiAgICAgICAgICAgICAgICB7Xy5tYXAoc2VuZFVwZGF0ZXNPcHRpb25zLCBvcHRpb24gPT4gKFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgPntvcHRpb24ubGFiZWx9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgIFxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPEJveCBmbGV4PXsxfSBwdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdzJyB9fSBmbGV4RGlyZWN0aW9uPXt7IHRhYmxldDogXCJyb3dcIn19IGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiB3aWR0aD1cIjcwJVwiPlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0+XG4gICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJvcHRpb25IZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgIENhbiBHdWVzdHMgaW52aXRlIG90aGVycz9cbiAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtZW5kXCI+XG4gICAgICAgICAgICAgICAgPFN3aXRjaDFcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Z3Vlc3RzQ2FuSW52aXRlT3RoZXJzfVxuICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXtjaGFuZ2VHdWVzdHNDYW5JbnZpdGVPdGhlcnN9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiAyMH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCb3ggZmxleD17MX0gcHQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gZmxleERpcmVjdGlvbj17eyB0YWJsZXQ6IFwicm93XCJ9fSBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWJldHdlZW5cIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgd2lkdGg9XCI3MCVcIj5cbiAgICAgICAgICAgIDxCb3ggZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiA+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9J1Nob3VsZCBpdCBibG9jayB0aW1lIG9uIHlvdXIgY2FsZW5kYXInIGFyaWEtbGFiZWw9J0EgdG9vbHRpcCcgYmc9J3B1cnBsZS43MDAnIGNvbG9yPSd3aGl0ZSc+XG4gICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgIFdpbGwgdGhlIGV2ZW50IGJlIHRyYW5zcGFyZW50P1xuICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiA+XG4gICAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e3RyYW5zcGFyZW5jeX0gb25DaGFuZ2U9eyhlKSA9PiBjaGFuZ2VUcmFuc3BhcmVuY3koZT8udGFyZ2V0Py52YWx1ZSBhcyAnb3BhcXVlJyB8ICd0cmFuc3BhcmVudCcpfSBjbGFzc05hbWU9XCJzZWxlY3Qgc2VsZWN0LXByaW1hcnkgdy1mdWxsIG1heC13LXhzXCI+XG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHNlbGVjdGVkPnRyYW5zcGFyZW5jeTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAge18ubWFwKHRyYW5zcGFyZW5jeU9wdGlvbnMsIG9wdGlvbiA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17b3B0aW9uLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgID57b3B0aW9uLmxhYmVsfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8Qm94IGZsZXg9ezF9IHB0PXt7IHBob25lOiAnbScsIHRhYmxldDogJ3MnIH19IGZsZXhEaXJlY3Rpb249e3sgdGFibGV0OiBcInJvd1wifX0ganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1iZXR3ZWVuXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHdpZHRoPVwiNzAlXCI+XG4gICAgICAgICAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtc3RhcnRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgbGFiZWw9J1dobyBjYW4gc2VlIHRoZSBkZXRhaWxzIG9mIHRoZSBldmVudCAtIGFueW9uZSBvciBqdXN0IGF0dGVuZGVlcycgYmc9J3B1cnBsZS43MDAnIGNvbG9yPSd3aGl0ZSc+XG4gICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICAgICAgICBXaG8gY2FuIHNlZSB0aGlzIGV2ZW50P1xuICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgPHNlbGVjdCB2YWx1ZT17dmlzaWJpbGl0eX0gb25DaGFuZ2U9eyhlKSA9PiBjaGFuZ2VWaXNpYmlsaXR5KGU/LnRhcmdldD8udmFsdWUgYXMgJ2RlZmF1bHQnIHwgJ3B1YmxpYycgfCAncHJpdmF0ZScpfSBjbGFzc05hbWU9XCJzZWxlY3Qgc2VsZWN0LXByaW1hcnkgdy1mdWxsIG1heC13LXhzXCI+XG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHNlbGVjdGVkPnZpc2liaWxpdHkuLi48L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgIHtfLm1hcCh2aXNpYmlsaXR5T3B0aW9ucywgb3B0aW9uID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29wdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgPntvcHRpb24ubGFiZWx9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICA8L0JveD5cblxuICAgIClcblxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IENyZWF0ZU1lZXRpbmdBc3Npc3RCYXNlU3RlcDNcblxuIl19