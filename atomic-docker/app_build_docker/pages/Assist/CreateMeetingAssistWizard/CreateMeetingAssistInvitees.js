"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
/* eslint-disable react/no-unknown-property */
const react_1 = require("react");
const react_native_1 = require("react-native");
const TextField_1 = __importDefault(require("@components/TextField"));
const themed_1 = require("@rneui/themed");
const Fab_1 = __importDefault(require("@mui/material/Fab"));
const Add_1 = __importDefault(require("@mui/icons-material/Add"));
const styles_1 = require("@mui/material/styles");
const Zoom_1 = __importDefault(require("@mui/material/Zoom"));
const SpeedDial_1 = __importDefault(require("@mui/material/SpeedDial"));
const SpeedDialIcon_1 = __importDefault(require("@mui/material/SpeedDialIcon"));
const SpeedDialAction_1 = __importDefault(require("@mui/material/SpeedDialAction"));
const colors_1 = require("@mui/material/colors");
const ImportContacts_1 = __importDefault(require("@mui/icons-material/ImportContacts"));
const Keyboard_1 = __importDefault(require("@mui/icons-material/Keyboard"));
const Edit_1 = __importDefault(require("@mui/icons-material/Edit"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const Button_1 = __importDefault(require("@components/Button"));
const RegularCard_1 = __importDefault(require("@components/RegularCard"));
const ContactHelper_1 = require("@lib/Contact/ContactHelper");
const UserMeetingAssistHelper_1 = require("@lib/Assist/UserMeetingAssistHelper");
const theme_1 = require("@lib/theme/theme");
const styles = {
    safeArea: {
        alignItems: 'flex-end',
    },
    container: {
        ...react_native_1.StyleSheet.absoluteFillObject,
        justifyContent: 'flex-end',
    },
    fab: {
        margin: 16,
        marginTop: 0,
    },
    container2: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
    },
};
const fabStyle = {
    position: 'absolute',
    bottom: 16,
    right: 16,
};
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../../config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
function SearchContact(props) {
    const [selected, setSelected] = (0, react_1.useState)(props?.invitees.findIndex(i => i.id === props?.contact.id) > -1);
    const { hostId, hostName, meetingId } = props;
    const updateSelected = () => {
        const value = !selected;
        setSelected(value);
        if (value === true) {
            if (props?.searchResults) {
                if (props?.setSearchResults) {
                    props?.updateSearchContactSelection(value, props?.contact, props?.contacts, props?.searchResults, props?.setContacts, props?.setSearchResults, props?.index);
                }
            }
            props?.addContactToInvitees(props?.contact, props?.invitees, props?.setInvitees, props?.setParentI, hostId, hostName, meetingId);
        }
        else if (value === false) {
            if (props?.contacts) {
                if (props?.searchResults) {
                    if (props?.setSearchResults) {
                        props?.updateSearchContactSelection(value, props?.contact, props?.contacts, props?.searchResults, props?.setContacts, props?.setSearchResults, props?.index);
                    }
                }
            }
            if (props?.searchResults) {
                if (props?.setSearchResults) {
                    props?.removeContactFromSearchInvitee(props?.contact, props?.invitees, props?.searchResults, props?.setInvitees, props?.setSearchResults, props?.setParentI);
                }
            }
        }
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsxs)(RegularCard_1.default, { children: [(0, jsx_runtime_1.jsx)(Box_1.default, { p: { phone: 's', tablet: 'm' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: props?.contact?.name }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "caption", children: props?.contact?.emails?.filter(i => (i.primary === true))?.[0]?.value }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { p: { phone: 's', tablet: 'm' }, children: (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: updateSelected, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: selected ? 'Remove' : 'Add' }) }) })] }) }));
}
function Contact(props) {
    const [selected, setSelected] = (0, react_1.useState)(props?.invitees.findIndex(i => i.id === props?.contact.id) > -1);
    const { hostId, hostName, meetingId } = props;
    const updateSelected = () => {
        const value = !selected;
        setSelected(value);
        if (value === true) {
            props?.updateContactSelection(value, props?.contact, props?.contacts, props?.setContacts, props?.index);
            props?.addContactToInvitees(props?.contact, props?.invitees, props?.setInvitees, props?.setParentI, hostId, hostName, meetingId);
        }
        else if (value === false) {
            props?.updateContactSelection(value, props?.contact, props?.contacts, props?.setContacts, props?.index);
            props?.removeContactFromInvitee(props?.contact, props?.invitees, props?.setInvitees, props?.setParentI);
        }
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsxs)(RegularCard_1.default, { children: [(0, jsx_runtime_1.jsx)(Box_1.default, { p: { phone: 's', tablet: 'm' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: props?.contact?.name }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "caption", children: props?.contact?.emails?.filter(i => (i.primary === true))?.[0]?.value }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { p: { phone: 's', tablet: 'm' }, children: (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: updateSelected, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "buttonLink", children: selected ? 'Remove' : 'Add' }) }) })] }) }));
}
function Contacts(props) {
    const [contacts, setContacts] = (0, react_1.useState)(props?.contacts);
    const [searchResults, setSearchResults] = (0, react_1.useState)(props?.contacts);
    const [search, setSearch] = (0, react_1.useState)('');
    const { hostId, hostName, meetingId, client } = props;
    const updateSearch = (text) => setSearch(text);
    const onCancelSearch = () => {
        setSearch('');
        setSearchResults([]);
    };
    const onClearSearch = () => setSearch('');
    const onSubmitSearch = async () => {
        try {
            // validate
            if (!search) {
                return;
            }
            console.log(search, ' search search');
            const newResults = await (0, ContactHelper_1.searchContactsByName)(client, hostId, search);
            console.log(newResults, ' newResults post searchContactsByName');
            if (newResults?.length > 0) {
                setSearchResults(newResults?.map(c => ({ ...c, selected: props?.invitees?.findIndex(i => i?.id === c?.id) > -1 })));
            }
        }
        catch (e) {
            console.log(e, ' unable to submit search results');
        }
    };
    const closeContacts = props?.closeContacts;
    console.log(searchResults && searchResults?.length > 0, ' searchResults?.length > 0');
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, minHeight: "65vh", maxHeight: "65vh", style: { width: '100%' }, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsx)(Box_1.default, { style: { width: '80%' }, children: (0, jsx_runtime_1.jsxs)("form", { className: "m-4", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "default-search", className: "mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white", children: "Search" }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)("div", { className: "absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none", children: (0, jsx_runtime_1.jsx)("svg", { "aria-hidden": "true", className: "w-5 h-5 text-gray-500 dark:text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", children: (0, jsx_runtime_1.jsx)("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" }) }) }), (0, jsx_runtime_1.jsx)("input", { value: search, onChange: (e) => updateSearch(e?.target?.value), type: "search", id: "default-search", className: "block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-purple-500 dark:focus:border-purple-500", placeholder: "Type Name Here And Enter...", required: true }), (0, jsx_runtime_1.jsx)("button", { onClick: onSubmitSearch, className: "text-white absolute right-2.5 bottom-2.5 bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-800", children: "Search" })] })] }) }), searchResults && searchResults?.length > 0
                    ? ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: contacts, renderItem: ({ item, index }) => ((0, jsx_runtime_1.jsx)(SearchContact, { contact: item, addContactToInvitees: UserMeetingAssistHelper_1.addContactToInvitees, removeContactFromSearchInvitee: UserMeetingAssistHelper_1.removeContactFromSearchInvitee, updateSearchContactSelection: UserMeetingAssistHelper_1.updateSearchContactSelection, contacts: contacts, searchResults: searchResults, setContacts: setContacts, setParentI: props?.setParentI, setSearchResults: setSearchResults, invitees: props?.invitees, setInvitees: props?.setInvitees, index: index, hostId: hostId, hostName: hostName, meetingId: meetingId })), keyExtractor: (item, index) => `${item}-${index}` }) })) : ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: contacts?.length > 0
                        ? ((0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: contacts, renderItem: ({ item, index }) => ((0, jsx_runtime_1.jsx)(Contact, { contact: item, addContactToInvitees: UserMeetingAssistHelper_1.addContactToInvitees, removeContactFromInvitee: UserMeetingAssistHelper_1.removeContactFromInvitee, updateContactSelection: UserMeetingAssistHelper_1.updateContactSelection, contacts: contacts, setContacts: setContacts, setParentI: props?.setParentI, invitees: props?.invitees, setInvitees: props?.setInvitees, index: index, hostId: hostId, hostName: hostName, meetingId: meetingId })), keyExtractor: (item, index) => `${item}-${index}` })) : ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '90%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "subheaderNormal", children: "You have no contacts saved. Go to settings to enable and sync Contacts from your phone or 3rd party provider." }) })) })), (0, jsx_runtime_1.jsx)(Box_1.default, { justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: closeContacts, children: (0, jsx_runtime_1.jsx)(Text_1.default, { p: { phone: 'm', tablet: 'l' }, variant: "buttonLink", children: "Close" }) }) })] }) }));
}
function ManualEntry(props) {
    const [email, setEmail] = (0, react_1.useState)(props?.email || '');
    const [name, setName] = (0, react_1.useState)('');
    const setManualEntries = props?.setManualEntries;
    const manualEntries = props?.manualEntries;
    const index = props?.index;
    const setParentI = props?.setParentI;
    const parentIndex = props?.parentIndex;
    const invitees = props?.invitees;
    const setInvitees = props?.setInvitees;
    console.log(manualEntries, ' manualEntries');
    console.log(invitees, ' invitees');
    const onEmailChange = (e) => {
        setEmail(e?.target?.value);
        (0, UserMeetingAssistHelper_1.updateEntryInManualEntries)(manualEntries, setManualEntries, index, invitees, setInvitees, setParentI, parentIndex, e?.target?.value, name);
    };
    const onNameChange = (e) => {
        setName(e?.target?.value);
        (0, UserMeetingAssistHelper_1.updateEntryInManualEntries)(manualEntries, setManualEntries, index, invitees, setInvitees, setParentI, parentIndex, email, e?.target?.value);
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsxs)(RegularCard_1.default, { children: [(0, jsx_runtime_1.jsxs)(Box_1.default, { p: { phone: 's', tablet: 'm' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Email" }), (0, jsx_runtime_1.jsx)(TextField_1.default, { placeholder: "r@r.com", onChange: onEmailChange, value: email || '', style: { width: '60%' }, type: "email", validate: "email", validationMessage: "Please provide a valid email address" })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { p: { phone: 's', tablet: 'm' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Display Name" }), (0, jsx_runtime_1.jsx)(TextField_1.default, { placeholder: "name", onChange: onNameChange, value: name || manualEntries?.[index]?.name || '', style: { width: '60%' } })] }), (0, jsx_runtime_1.jsx)(Button_1.default, { onClick: () => (0, UserMeetingAssistHelper_1.removeEntryFromManualEntries)(manualEntries, setManualEntries, invitees, setInvitees, setParentI, index, parentIndex), children: "Remove" })] }) }));
}
function ManualEntries(props) {
    const [pageOffset, setPageOffset] = (0, react_1.useState)(0);
    const { height: fullHeight } = react_native_1.Dimensions.get('window');
    const theme = (0, styles_1.useTheme)();
    const transitionDuration = {
        enter: theme.transitions.duration.enteringScreen,
        exit: theme.transitions.duration.leavingScreen,
    };
    const closeManual = props?.closeManual;
    const addNewEntry = () => {
        (0, UserMeetingAssistHelper_1.addOneToManualEntries)(props?.manualEntries, props?.setManualEntries, props?.invitees, props?.setInvitees, props?.setParentI, props?.hostId, props?.hostName, props?.meetingId);
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, style: { width: '100%' }, minHeight: "65vh", maxHeight: "65vh", children: (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, style: { width: '100%' }, children: [props?.manualEntries?.length > 0
                    ? ((0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: props?.manualEntries, renderItem: ({ item, index }) => ((0, jsx_runtime_1.jsx)(ManualEntry, { ...item, index: index, setManualEntries: props?.setManualEntries, manualEntries: props?.manualEntries, setParentI: props?.setParentI, parentIndex: props?.invitees.findIndex(a => (a?.id === item?.id)), invitees: props?.invitees, setInvitees: props?.setInvitees })), keyExtractor: (item) => item?.id })) : ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "subheader", children: "Add a New Entry" }) })), (0, jsx_runtime_1.jsx)(Box_1.default, { justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: closeManual, children: (0, jsx_runtime_1.jsx)(Text_1.default, { p: { phone: 'm', tablet: 'l' }, variant: "buttonLink", children: "Close" }) }) }), (0, jsx_runtime_1.jsx)(Zoom_1.default, { in: true, timeout: transitionDuration, style: {
                        transitionDelay: `${transitionDuration.exit}ms`,
                    }, unmountOnExit: true, children: (0, jsx_runtime_1.jsx)(Fab_1.default, { sx: fabStyle, "aria-label": 'Add', color: "primary", onClick: addNewEntry, children: (0, jsx_runtime_1.jsx)(Add_1.default, { sx: { color: colors_1.pink[500] } }) }) })] }) }));
}
function CreateMeetingAssistInvitees(props) {
    const [invitees, setInvitees] = (0, react_1.useState)(props?.invitees);
    const [isManual, setIsManual] = (0, react_1.useState)(false);
    const [manualEntries, setManualEntries] = (0, react_1.useState)([]);
    const [isContacts, setIsContacts] = (0, react_1.useState)(false);
    const [contacts, setContacts] = (0, react_1.useState)([]);
    const [isOpen, setIsOpen] = (0, react_1.useState)(false);
    const userId = props?.userId;
    const meetingId = props?.meetingId;
    const hostName = props?.hostName;
    const setParentInvitees = props?.setParentInvitees;
    const client = props?.client;
    console.log(invitees, ' parentInvitees');
    // get any contacts
    (0, react_1.useEffect)(() => {
        (async () => {
            if (!client || !userId) {
                return;
            }
            const newContacts = await (0, ContactHelper_1.listUserContactsHelper)(client, userId);
            if (newContacts && newContacts?.length > 0) {
                setContacts(newContacts
                    .map(c => ({ ...c, selected: false }))
                // .filter(c => (c?.emails?.[0]?.value?.length > 0))
                );
            }
        })();
    }, [client, userId]);
    const onManualChange = () => {
        setIsContacts(isManual);
        setIsManual(!isManual);
    };
    const onContactsChange = () => {
        setIsManual(isContacts);
        setIsContacts(!isContacts);
    };
    const closeContacts = () => setIsContacts(false);
    const closeManual = () => setIsManual(false);
    const actions = [
        { icon: (0, jsx_runtime_1.jsx)(ImportContacts_1.default, { color: "secondary" }), name: 'Import Contacts', method: onContactsChange },
        { icon: (0, jsx_runtime_1.jsx)(Keyboard_1.default, { color: "secondary" }), name: 'Manual Entry', method: onManualChange },
    ];
    if (isManual) {
        return ((0, jsx_runtime_1.jsx)(ManualEntries, { setManualEntries: setManualEntries, manualEntries: manualEntries, invitees: invitees, setInvitees: setInvitees, setParentI: setParentInvitees, closeManual: closeManual, hostId: userId, hostName: hostName, meetingId: meetingId }));
    }
    if (isContacts) {
        return ((0, jsx_runtime_1.jsx)(Contacts, { contacts: contacts, setParentI: setParentInvitees, invitees: invitees, setInvitees: setInvitees, closeContacts: closeContacts, hostId: userId, hostName: hostName, meetingId: meetingId, client: client }));
    }
    return ((0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, style: { width: '100%' }, minHeight: "65vh", maxHeight: "65vh", children: [invitees?.length > 0
                ? ((0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: invitees, renderItem: ({ item }) => ((0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(themed_1.ListItem, { containerStyle: {
                                backgroundColor: theme_1.palette.white,
                                borderBottomWidth: react_native_1.StyleSheet.hairlineWidth,
                                borderColor: theme_1.palette.darkGray
                            }, children: (0, jsx_runtime_1.jsxs)(themed_1.ListItem.Content, { children: [(0, jsx_runtime_1.jsx)(themed_1.ListItem.Title, { style: { color: theme_1.palette?.textBlack, fontWeight: 'bold' }, children: item?.name }), (0, jsx_runtime_1.jsx)(themed_1.ListItem.Subtitle, { style: { color: theme_1.palette?.textBlack, }, children: item?.email })] }) }) })), keyExtractor: (item) => item?.id })) : ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "subheader", children: "Add an invitee from your contacts or manually enter one" }) })), (0, jsx_runtime_1.jsx)("div", { className: "absolute inset-0 z-20 pointer-events-none", children: (0, jsx_runtime_1.jsx)(SpeedDial_1.default, { ariaLabel: "Calendar SpeedDial", sx: { position: 'absolute', bottom: 24, right: 24, zIndex: 'speedDial' }, icon: (0, jsx_runtime_1.jsx)(SpeedDialIcon_1.default, { icon: (0, jsx_runtime_1.jsx)(Edit_1.default, {}), sx: { color: colors_1.pink[500] } }), children: actions.map((action) => ((0, jsx_runtime_1.jsx)(SpeedDialAction_1.default, { icon: action.icon, tooltipTitle: action.name, FabProps: {
                            onClick: action.method,
                        } }, action.name))) }) })] }));
}
exports.default = CreateMeetingAssistInvitees;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3JlYXRlTWVldGluZ0Fzc2lzdEludml0ZWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ3JlYXRlTWVldGluZ0Fzc2lzdEludml0ZWVzLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQW9GQSxnREFxQ0M7O0FBekhELDhDQUE4QztBQUM5QyxpQ0FLYztBQUNkLCtDQVdxQjtBQUNyQixzRUFBNkM7QUFDN0MsMENBSXVCO0FBQ3ZCLDREQUFvQztBQUNwQyxrRUFBOEM7QUFDOUMsaURBQXdEO0FBQ3hELDhEQUFxQztBQUNyQyx3RUFBZ0Q7QUFDaEQsZ0ZBQXdEO0FBQ3hELG9GQUE0RDtBQUM1RCxpREFBMkM7QUFDM0Msd0ZBQW9FO0FBQ3BFLDRFQUF3RDtBQUN4RCxvRUFBZ0Q7QUFHaEQsaUVBQXdDO0FBQ3hDLG1FQUEwQztBQUMxQyxnRUFBdUM7QUFDdkMsMEVBQWlEO0FBRWpELDhEQUdtQztBQUduQyxpRkFBMlE7QUFJM1EsNENBQTBDO0FBRTFDLE1BQU0sTUFBTSxHQUFHO0lBQ1gsUUFBUSxFQUFFO1FBQ1IsVUFBVSxFQUFFLFVBQVU7S0FDdkI7SUFDRCxTQUFTLEVBQUU7UUFDVCxHQUFHLHlCQUFVLENBQUMsa0JBQWtCO1FBQ2hDLGNBQWMsRUFBRSxVQUFVO0tBQzNCO0lBQ0QsR0FBRyxFQUFFO1FBQ0gsTUFBTSxFQUFFLEVBQUU7UUFDVixTQUFTLEVBQUUsQ0FBQztLQUNiO0lBQ0QsVUFBVSxFQUFFO1FBQ1YsSUFBSSxFQUFFLENBQUM7UUFDUCxjQUFjLEVBQUUsUUFBUTtRQUN4QixVQUFVLEVBQUUsUUFBUTtLQUNyQjtDQUNKLENBQUE7QUFFRCxNQUFNLFFBQVEsR0FBRztJQUNmLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLE1BQU0sRUFBRSxFQUFFO0lBQ1YsS0FBSyxFQUFFLEVBQUU7Q0FDVixDQUFBO0FBRUQsd0VBQThDO0FBQzlDLGlFQUE2RDtBQUM3RCw4RUFBcUQ7QUFFOUMsS0FBSyxVQUFVLGtCQUFrQixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBaUQ7SUFDbEcsMEZBQTBGO0lBQzFGLHNDQUFzQztJQUN0Qyx5RUFBeUU7SUFDekUsMEJBQWUsQ0FBQyxJQUFJLENBQUMsSUFBQSw2QkFBYSxHQUFFLENBQUMsQ0FBQTtJQUNyQyxJQUFJLE9BQU8sQ0FBQTtJQUNYLElBQUksQ0FBQztRQUNILE9BQU8sR0FBRyxNQUFNLGlCQUFPLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDM0MsNkJBQTZCLEVBQUUsS0FBSztnQkFDbEMsT0FBTyxFQUFFLENBQUE7WUFDWCxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUFDLE9BQU8sR0FBUSxFQUFFLENBQUM7UUFDbEIsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFPLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDakQsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsRUFBRSxDQUFBO1FBQ3hELENBQUM7YUFBTSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssaUJBQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbkQsa0VBQWtFO1lBQ2xFLHFFQUFxRTtZQUNyRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxFQUFFLENBQUE7UUFDeEQsQ0FBQztRQUNELE1BQU0sR0FBRyxDQUFBO0lBQ1gsQ0FBQztJQUVELElBQUksQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLEVBQUUsQ0FBQztRQUMxQixPQUFPO1lBQ0wsUUFBUSxFQUFFO2dCQUNSLFdBQVcsRUFBRSx1QkFBdUI7Z0JBQ3BDLFNBQVMsRUFBRSxLQUFLO2FBQ2pCO1NBQ0YsQ0FBQTtJQUNILENBQUM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFO1lBQ0wsR0FBRyxFQUFFLE9BQU8sQ0FBQyxTQUFTLEVBQUU7U0FDekI7S0FDRixDQUFBO0FBQ0gsQ0FBQztBQWlERCxTQUFTLGFBQWEsQ0FBQyxLQUFxQztJQUMxRCxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBVSxLQUFLLEVBQUUsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2xILE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEtBQUssQ0FBQTtJQUM3QyxNQUFNLGNBQWMsR0FBRyxHQUFHLEVBQUU7UUFDMUIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxRQUFRLENBQUE7UUFDdkIsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBRWxCLElBQUksS0FBSyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ25CLElBQUksS0FBSyxFQUFFLGFBQWEsRUFBRSxDQUFDO2dCQUN6QixJQUFJLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO29CQUM1QixLQUFLLEVBQUUsNEJBQTRCLENBQ2pDLEtBQUssRUFDTCxLQUFLLEVBQUUsT0FBTyxFQUNkLEtBQUssRUFBRSxRQUFRLEVBQ2YsS0FBSyxFQUFFLGFBQWEsRUFDcEIsS0FBSyxFQUFFLFdBQVcsRUFDbEIsS0FBSyxFQUFFLGdCQUFnQixFQUN2QixLQUFLLEVBQUUsS0FBSyxDQUNiLENBQUE7Z0JBQ0gsQ0FBQztZQUVILENBQUM7WUFHRCxLQUFLLEVBQUUsb0JBQW9CLENBQ3pCLEtBQUssRUFBRSxPQUFPLEVBQ2QsS0FBSyxFQUFFLFFBQVEsRUFDZixLQUFLLEVBQUUsV0FBVyxFQUNsQixLQUFLLEVBQUUsVUFBVSxFQUNqQixNQUFNLEVBQ04sUUFBUSxFQUNSLFNBQVMsQ0FDVixDQUFBO1FBQ0gsQ0FBQzthQUFNLElBQUksS0FBSyxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQzNCLElBQUksS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDO2dCQUNwQixJQUFJLEtBQUssRUFBRSxhQUFhLEVBQUUsQ0FBQztvQkFDekIsSUFBSSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQzt3QkFDM0IsS0FBSyxFQUFFLDRCQUE0QixDQUNsQyxLQUFLLEVBQ0wsS0FBSyxFQUFFLE9BQU8sRUFDZCxLQUFLLEVBQUUsUUFBUSxFQUNmLEtBQUssRUFBRSxhQUFhLEVBQ3BCLEtBQUssRUFBRSxXQUFXLEVBQ2xCLEtBQUssRUFBRSxnQkFBZ0IsRUFDdkIsS0FBSyxFQUFFLEtBQUssQ0FDYixDQUFBO29CQUNILENBQUM7Z0JBRUgsQ0FBQztZQUVILENBQUM7WUFHRCxJQUFJLEtBQUssRUFBRSxhQUFhLEVBQUUsQ0FBQztnQkFDekIsSUFBSSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQztvQkFDNUIsS0FBSyxFQUFFLDhCQUE4QixDQUNuQyxLQUFLLEVBQUUsT0FBTyxFQUNkLEtBQUssRUFBRSxRQUFRLEVBQ2YsS0FBSyxFQUFFLGFBQWEsRUFDcEIsS0FBSyxFQUFFLFdBQVcsRUFDbEIsS0FBSyxFQUFFLGdCQUFnQixFQUN2QixLQUFLLEVBQUUsVUFBVSxDQUNsQixDQUFBO2dCQUNILENBQUM7WUFFSCxDQUFDO1FBRUgsQ0FBQztJQUNILENBQUMsQ0FBQTtJQUVELE9BQU8sQ0FDTCx1QkFBQyxhQUFHLGNBQ0Ysd0JBQUMscUJBQVcsZUFDVix1QkFBQyxhQUFHLElBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFlBQ2pDLHVCQUFDLGNBQUksSUFBQyxPQUFPLEVBQUMsY0FBYyxZQUN6QixLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksR0FDaEIsR0FDSCxFQUNOLHVCQUFDLGFBQUcsY0FDRix1QkFBQyxjQUFJLElBQUMsT0FBTyxFQUFDLFNBQVMsWUFDcEIsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEdBQ2pFLEdBQ0gsRUFDTix1QkFBQyxhQUFHLElBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFlBQ2pDLHVCQUFDLHdCQUFTLElBQUMsT0FBTyxFQUFFLGNBQWMsWUFDaEMsdUJBQUMsY0FBSSxJQUFDLE9BQU8sRUFBQyxZQUFZLFlBQ3ZCLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQ3ZCLEdBQ0csR0FDUixJQUNNLEdBQ1YsQ0FDUCxDQUFBO0FBQ0gsQ0FBQztBQWNELFNBQVMsT0FBTyxDQUFDLEtBQTJCO0lBQzFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFVLEtBQUssRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFLLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDbEgsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFBO0lBQzdDLE1BQU0sY0FBYyxHQUFHLEdBQUcsRUFBRTtRQUMxQixNQUFNLEtBQUssR0FBRyxDQUFDLFFBQVEsQ0FBQTtRQUN2QixXQUFXLENBQUMsS0FBSyxDQUFDLENBQUE7UUFFbEIsSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFLENBQUM7WUFDbkIsS0FBSyxFQUFFLHNCQUFzQixDQUMzQixLQUFLLEVBQ0wsS0FBSyxFQUFFLE9BQU8sRUFDZCxLQUFLLEVBQUUsUUFBUSxFQUNmLEtBQUssRUFBRSxXQUFXLEVBQ2xCLEtBQUssRUFBRSxLQUFLLENBQ2IsQ0FBQTtZQUVELEtBQUssRUFBRSxvQkFBb0IsQ0FDekIsS0FBSyxFQUFFLE9BQU8sRUFDZCxLQUFLLEVBQUUsUUFBUSxFQUNmLEtBQUssRUFBRSxXQUFXLEVBQ2xCLEtBQUssRUFBRSxVQUFVLEVBQ2pCLE1BQU0sRUFDTixRQUFRLEVBQ1IsU0FBUyxDQUNWLENBQUE7UUFDSCxDQUFDO2FBQU0sSUFBSSxLQUFLLEtBQUssS0FBSyxFQUFFLENBQUM7WUFDM0IsS0FBSyxFQUFFLHNCQUFzQixDQUMzQixLQUFLLEVBQ0wsS0FBSyxFQUFFLE9BQU8sRUFDZCxLQUFLLEVBQUUsUUFBUSxFQUNmLEtBQUssRUFBRSxXQUFXLEVBQ2xCLEtBQUssRUFBRSxLQUFLLENBQ2IsQ0FBQTtZQUVELEtBQUssRUFBRSx3QkFBd0IsQ0FDN0IsS0FBSyxFQUFFLE9BQU8sRUFDZCxLQUFLLEVBQUUsUUFBUSxFQUNmLEtBQUssRUFBRSxXQUFXLEVBQ2xCLEtBQUssRUFBRSxVQUFVLENBQ2xCLENBQUE7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxDQUFBO0lBRUQsT0FBTyxDQUNMLHVCQUFDLGFBQUcsY0FDRix3QkFBQyxxQkFBVyxlQUNWLHVCQUFDLGFBQUcsSUFBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsWUFDakMsdUJBQUMsY0FBSSxJQUFDLE9BQU8sRUFBQyxjQUFjLFlBQ3pCLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxHQUNoQixHQUNILEVBQ04sdUJBQUMsYUFBRyxjQUNGLHVCQUFDLGNBQUksSUFBQyxPQUFPLEVBQUMsU0FBUyxZQUNwQixLQUFLLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssR0FDakUsR0FDSCxFQUNOLHVCQUFDLGFBQUcsSUFBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsWUFDakMsdUJBQUMsd0JBQVMsSUFBQyxPQUFPLEVBQUUsY0FBYyxZQUNoQyx1QkFBQyxjQUFJLElBQUMsT0FBTyxFQUFDLFlBQVksWUFDdkIsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FDdkIsR0FDRyxHQUNSLElBQ00sR0FDVixDQUNQLENBQUE7QUFDSCxDQUFDO0FBR0QsU0FBUyxRQUFRLENBQUMsS0FBNEI7SUFDNUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQXdCLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNoRixNQUFNLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUF3QixLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDMUYsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVMsRUFBRSxDQUFDLENBQUE7SUFFaEQsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQTtJQUVyRCxNQUFNLFlBQVksR0FBRyxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFBO0lBRXRELE1BQU0sY0FBYyxHQUFHLEdBQUcsRUFBRTtRQUMxQixTQUFTLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDYixnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUN0QixDQUFDLENBQUE7SUFFRCxNQUFNLGFBQWEsR0FBRyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUE7SUFFekMsTUFBTSxjQUFjLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDaEMsSUFBSSxDQUFDO1lBQ0gsV0FBVztZQUNYLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDWixPQUFNO1lBQ1IsQ0FBQztZQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLGdCQUFnQixDQUFDLENBQUE7WUFFckMsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFBLG9DQUFvQixFQUMzQyxNQUFNLEVBQ04sTUFBTSxFQUNOLE1BQU0sQ0FDUCxDQUFBO1lBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsdUNBQXVDLENBQUMsQ0FBQTtZQUVoRSxJQUFJLFVBQVUsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQzNCLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUNySCxDQUFDO1FBQ0gsQ0FBQztRQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxrQ0FBa0MsQ0FBQyxDQUFBO1FBQ3BELENBQUM7SUFDSCxDQUFDLENBQUE7SUFFRCxNQUFNLGFBQWEsR0FBRyxLQUFLLEVBQUUsYUFBYSxDQUFBO0lBRTFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxJQUFJLGFBQWEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLDRCQUE0QixDQUFDLENBQUE7SUFDckYsT0FBTyxDQUNMLHVCQUFDLGFBQUcsSUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFHLFNBQVMsRUFBQyxNQUFNLEVBQUMsU0FBUyxFQUFDLE1BQU0sRUFBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQ3ZFLHdCQUFDLGFBQUcsSUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLFFBQVEsRUFBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLGFBQ2hGLHVCQUFDLGFBQUcsSUFBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFlBQzFCLGtDQUFNLFNBQVMsRUFBQyxLQUFLLGFBQ2pCLGtDQUFPLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxTQUFTLEVBQUMsZ0VBQWdFLHVCQUFlLEVBQ3pILGlDQUFLLFNBQVMsRUFBQyxVQUFVLGFBQ3JCLGdDQUFLLFNBQVMsRUFBQyxzRUFBc0UsWUFDakYsK0NBQWlCLE1BQU0sRUFBQyxTQUFTLEVBQUMsMENBQTBDLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxNQUFNLEVBQUMsY0FBYyxFQUFDLE9BQU8sRUFBQyxXQUFXLEVBQUMsS0FBSyxFQUFDLDRCQUE0QixZQUFDLG1EQUFxQixPQUFPLHFCQUFpQixPQUFPLGtCQUFjLEdBQUcsRUFBQyxDQUFDLEVBQUMsNkNBQTZDLEdBQVEsR0FBTSxHQUN2UyxFQUNOLGtDQUFPLEtBQUssRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsRUFBRSxJQUFJLEVBQUMsUUFBUSxFQUFDLEVBQUUsRUFBQyxnQkFBZ0IsRUFBQyxTQUFTLEVBQUMsaVJBQWlSLEVBQUMsV0FBVyxFQUFDLDZCQUE2QixFQUFDLFFBQVEsU0FBRyxFQUMxYixtQ0FBUSxPQUFPLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBQyxrUEFBa1AsdUJBQWdCLElBQzNTLElBQ0gsR0FDSCxFQUVMLGFBQWEsSUFBSSxhQUFhLEVBQUUsTUFBTSxHQUFHLENBQUM7b0JBQzNDLENBQUMsQ0FBQyxDQUNBLHVCQUFDLGFBQUcsSUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLFFBQVEsRUFBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLFlBQy9FLHVCQUFDLHVCQUFRLElBQ1AsSUFBSSxFQUFFLFFBQVEsRUFDZCxVQUFVLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FDL0IsdUJBQUMsYUFBYSxJQUNaLE9BQU8sRUFBRSxJQUFJLEVBQ2Isb0JBQW9CLEVBQUUsOENBQW9CLEVBQzFDLDhCQUE4QixFQUFFLHdEQUE4QixFQUM5RCw0QkFBNEIsRUFBRSxzREFBNEIsRUFDMUQsUUFBUSxFQUFFLFFBQVEsRUFDbEIsYUFBYSxFQUFFLGFBQWEsRUFDNUIsV0FBVyxFQUFFLFdBQVcsRUFDeEIsVUFBVSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQzdCLGdCQUFnQixFQUFFLGdCQUFnQixFQUNsQyxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFDekIsV0FBVyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQy9CLEtBQUssRUFBRSxLQUFLLEVBQ1osTUFBTSxFQUFFLE1BQU0sRUFDZCxRQUFRLEVBQUUsUUFBUSxFQUNsQixTQUFTLEVBQUUsU0FBUyxHQUNwQixDQUNILEVBQ0QsWUFBWSxFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLElBQUksS0FBSyxFQUFFLEdBQ2pELEdBQ0UsQ0FDUCxDQUFDLENBQUMsQ0FBQyxDQUNKLHVCQUFDLGFBQUcsSUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLFFBQVEsRUFBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLFlBRS9FLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQzt3QkFDcEIsQ0FBQyxDQUFDLENBQ0EsdUJBQUMsdUJBQVEsSUFDUCxJQUFJLEVBQUUsUUFBUSxFQUNkLFVBQVUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUMvQix1QkFBQyxPQUFPLElBQ04sT0FBTyxFQUFFLElBQUksRUFDYixvQkFBb0IsRUFBRSw4Q0FBb0IsRUFDMUMsd0JBQXdCLEVBQUUsa0RBQXdCLEVBQ2xELHNCQUFzQixFQUFFLGdEQUFzQixFQUM5QyxRQUFRLEVBQUUsUUFBUSxFQUNsQixXQUFXLEVBQUUsV0FBVyxFQUN4QixVQUFVLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFDN0IsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQ3pCLFdBQVcsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUMvQixLQUFLLEVBQUUsS0FBSyxFQUNaLE1BQU0sRUFBRSxNQUFNLEVBQ2QsUUFBUSxFQUFFLFFBQVEsRUFDbEIsU0FBUyxFQUFFLFNBQVMsR0FDcEIsQ0FDSCxFQUNELFlBQVksRUFBRSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxJQUFJLEtBQUssRUFBRSxHQUNqRCxDQUNILENBQUMsQ0FBQyxDQUFDLENBQ0YsdUJBQUMsYUFBRyxJQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsUUFBUSxFQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUMsWUFDOUUsdUJBQUMsY0FBSSxJQUFDLE9BQU8sRUFBQyxpQkFBaUIsOEhBSXhCLEdBQ0gsQ0FDUCxHQUVHLENBQ0wsRUFDRCx1QkFBQyxhQUFHLElBQUMsY0FBYyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsUUFBUSxFQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFDdkUsdUJBQUMsd0JBQVMsSUFBQyxPQUFPLEVBQUUsYUFBYSxZQUMvQix1QkFBQyxjQUFJLElBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFDLFlBQVksc0JBRW5ELEdBQ0csR0FDUixJQUNGLEdBQ0YsQ0FDUCxDQUFBO0FBQ0gsQ0FBQztBQTZCRCxTQUFTLFdBQVcsQ0FBQyxLQUEyQjtJQUM5QyxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBUyxLQUFLLEVBQUUsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQzlELE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFTLEVBQUUsQ0FBQyxDQUFBO0lBQzVDLE1BQU0sZ0JBQWdCLEdBQUcsS0FBSyxFQUFFLGdCQUFnQixDQUFBO0lBQ2hELE1BQU0sYUFBYSxHQUFHLEtBQUssRUFBRSxhQUFhLENBQUE7SUFDMUMsTUFBTSxLQUFLLEdBQUcsS0FBSyxFQUFFLEtBQUssQ0FBQTtJQUMxQixNQUFNLFVBQVUsR0FBRyxLQUFLLEVBQUUsVUFBVSxDQUFBO0lBQ3BDLE1BQU0sV0FBVyxHQUFHLEtBQUssRUFBRSxXQUFXLENBQUE7SUFDdEMsTUFBTSxRQUFRLEdBQUcsS0FBSyxFQUFFLFFBQVEsQ0FBQTtJQUNoQyxNQUFNLFdBQVcsR0FBRyxLQUFLLEVBQUUsV0FBVyxDQUFBO0lBSXRDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLENBQUE7SUFDNUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUE7SUFHbEMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxDQUFnQyxFQUFFLEVBQUU7UUFDekQsUUFBUSxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDMUIsSUFBQSxvREFBMEIsRUFBQyxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUM1SSxDQUFDLENBQUE7SUFFRCxNQUFNLFlBQVksR0FBRyxDQUFDLENBQWdDLEVBQUUsRUFBRTtRQUN4RCxPQUFPLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUN6QixJQUFBLG9EQUEwQixFQUFDLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQzdJLENBQUMsQ0FBQTtJQUVELE9BQU8sQ0FFTCx1QkFBQyxhQUFHLGNBQ0Ysd0JBQUMscUJBQVcsZUFDVix3QkFBQyxhQUFHLElBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGFBQ2pDLHVCQUFDLGNBQUksSUFBQyxPQUFPLEVBQUMsY0FBYyxzQkFFckIsRUFFTCx1QkFBQyxtQkFBUyxJQUNSLFdBQVcsRUFBQyxTQUFTLEVBQ3JCLFFBQVEsRUFBRSxhQUFhLEVBQ3ZCLEtBQUssRUFBRSxLQUFLLElBQUksRUFBRSxFQUNsQixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFDLEVBQ3RCLElBQUksRUFBQyxPQUFPLEVBQ1osUUFBUSxFQUFDLE9BQU8sRUFDaEIsaUJBQWlCLEVBQUMsc0NBQXNDLEdBQ3hELElBRUEsRUFDTix3QkFBQyxhQUFHLElBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGFBQ2pDLHVCQUFDLGNBQUksSUFBQyxPQUFPLEVBQUMsY0FBYyw2QkFFckIsRUFFTCx1QkFBQyxtQkFBUyxJQUNSLFdBQVcsRUFBQyxNQUFNLEVBQ2xCLFFBQVEsRUFBRSxZQUFZLEVBQ3RCLEtBQUssRUFBRSxJQUFJLElBQUksYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFDakQsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBQyxHQUN0QixJQUVBLEVBQ04sdUJBQUMsZ0JBQU0sSUFBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBQSxzREFBNEIsRUFBQyxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyx1QkFFbEksSUFDRyxHQUNWLENBRVAsQ0FBQTtBQUNILENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxLQUE2QjtJQUNsRCxNQUFNLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBUyxDQUFDLENBQUMsQ0FBQTtJQUV2RCxNQUFNLEVBQUMsTUFBTSxFQUFFLFVBQVUsRUFBQyxHQUFHLHlCQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBRXJELE1BQU0sS0FBSyxHQUFHLElBQUEsaUJBQVEsR0FBRSxDQUFBO0lBRXhCLE1BQU0sa0JBQWtCLEdBQUc7UUFDekIsS0FBSyxFQUFFLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLGNBQWM7UUFDaEQsSUFBSSxFQUFFLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLGFBQWE7S0FDL0MsQ0FBQTtJQUlELE1BQU0sV0FBVyxHQUFHLEtBQUssRUFBRSxXQUFXLENBQUE7SUFFdEMsTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFO1FBRXZCLElBQUEsK0NBQXFCLEVBQ25CLEtBQUssRUFBRSxhQUFhLEVBQ3BCLEtBQUssRUFBRSxnQkFBZ0IsRUFDdkIsS0FBSyxFQUFFLFFBQVEsRUFDZixLQUFLLEVBQUUsV0FBVyxFQUNsQixLQUFLLEVBQUUsVUFBVSxFQUNqQixLQUFLLEVBQUUsTUFBTSxFQUNiLEtBQUssRUFBRSxRQUFRLEVBQ2YsS0FBSyxFQUFFLFNBQVMsQ0FDakIsQ0FBQTtJQUNILENBQUMsQ0FBQTtJQUNELE9BQU8sQ0FDTCx1QkFBQyxhQUFHLElBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsU0FBUyxFQUFDLE1BQU0sRUFBQyxTQUFTLEVBQUMsTUFBTSxZQUN2RSx3QkFBQyxhQUFHLElBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLGFBRWxDLEtBQUssRUFBRSxhQUFhLEVBQUUsTUFBTSxHQUFHLENBQUM7b0JBQ2hDLENBQUMsQ0FBQyxDQUNBLHVCQUFDLHVCQUFRLElBQ1AsSUFBSSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQzFCLFVBQVUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUMvQix1QkFBQyxXQUFXLE9BQ04sSUFBSSxFQUNSLEtBQUssRUFBRSxLQUFLLEVBQ1osZ0JBQWdCLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUN6QyxhQUFhLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFDbkMsVUFBVSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQzdCLFdBQVcsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFDakUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQ3pCLFdBQVcsRUFBRSxLQUFLLEVBQUUsV0FBVyxHQUMvQixDQUNILEVBQ0QsWUFBWSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUNoQyxDQUNILENBQUMsQ0FBQyxDQUFDLENBQ0YsdUJBQUMsYUFBRyxJQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsUUFBUSxZQUN2RCx1QkFBQyxjQUFJLElBQUMsT0FBTyxFQUFDLFdBQVcsZ0NBRWhCLEdBQ0wsQ0FDUCxFQUVILHVCQUFDLGFBQUcsSUFBQyxjQUFjLEVBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxRQUFRLEVBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUN2RSx1QkFBQyx3QkFBUyxJQUFDLE9BQU8sRUFBRSxXQUFXLFlBQzdCLHVCQUFDLGNBQUksSUFBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUMsWUFBWSxzQkFFbkQsR0FDRyxHQUNSLEVBQ0osdUJBQUMsY0FBSSxJQUNELEVBQUUsUUFDRixPQUFPLEVBQUUsa0JBQWtCLEVBQzNCLEtBQUssRUFBRTt3QkFDTCxlQUFlLEVBQUUsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLElBQUk7cUJBQ2hELEVBQ0QsYUFBYSxrQkFFZix1QkFBQyxhQUFHLElBQUMsRUFBRSxFQUFFLFFBQW1CLGdCQUFjLEtBQUssRUFBRSxLQUFLLEVBQUMsU0FBUyxFQUFDLE9BQU8sRUFBRSxXQUFXLFlBQ25GLHVCQUFDLGFBQU8sSUFBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsYUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUssR0FDbEMsR0FDRCxJQUVMLEdBQ0YsQ0FDUCxDQUFBO0FBQ0gsQ0FBQztBQUdELFNBQVMsMkJBQTJCLENBQUMsS0FBWTtJQUMvQyxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBNEIsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ3BGLE1BQU0sQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFVLEtBQUssQ0FBQyxDQUFBO0lBQ3hELE1BQU0sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQTRCLEVBQUUsQ0FBQyxDQUFBO0lBQ2pGLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFVLEtBQUssQ0FBQyxDQUFBO0lBQzVELE1BQU0sQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUF3QixFQUFFLENBQUMsQ0FBQTtJQUNuRSxNQUFNLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBVSxLQUFLLENBQUMsQ0FBQTtJQUVwRCxNQUFNLE1BQU0sR0FBRyxLQUFLLEVBQUUsTUFBTSxDQUFBO0lBQzVCLE1BQU0sU0FBUyxHQUFHLEtBQUssRUFBRSxTQUFTLENBQUE7SUFDbEMsTUFBTSxRQUFRLEdBQUcsS0FBSyxFQUFFLFFBQVEsQ0FBQTtJQUVoQyxNQUFNLGlCQUFpQixHQUFHLEtBQUssRUFBRSxpQkFBaUIsQ0FBQTtJQUNsRCxNQUFNLE1BQU0sR0FBRyxLQUFLLEVBQUUsTUFBTSxDQUFBO0lBRTVCLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDLENBQUE7SUFFeEMsbUJBQW1CO0lBQ25CLElBQUEsaUJBQVMsRUFBQyxHQUFHLEVBQUU7UUFDYixDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ1YsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUN2QixPQUFNO1lBQ1IsQ0FBQztZQUNELE1BQU0sV0FBVyxHQUFHLE1BQU0sSUFBQSxzQ0FBc0IsRUFBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUE7WUFFaEUsSUFBSSxXQUFXLElBQUksV0FBVyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDM0MsV0FBVyxDQUFDLFdBQVc7cUJBQ3BCLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUEwQixDQUFBLENBQUM7Z0JBQzdELG9EQUFvRDtpQkFDckQsQ0FBQTtZQUNILENBQUM7UUFDSCxDQUFDLENBQUMsRUFBRSxDQUFBO0lBQ04sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUE7SUFFcEIsTUFBTSxjQUFjLEdBQUcsR0FBRyxFQUFFO1FBQzFCLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUN2QixXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUN4QixDQUFDLENBQUE7SUFFRCxNQUFNLGdCQUFnQixHQUFHLEdBQUcsRUFBRTtRQUM1QixXQUFXLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDdkIsYUFBYSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUE7SUFDNUIsQ0FBQyxDQUFBO0lBRUQsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBRWhELE1BQU0sV0FBVyxHQUFHLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUU1QyxNQUFNLE9BQU8sR0FBRztRQUNaLEVBQUUsSUFBSSxFQUFFLHVCQUFDLHdCQUFrQixJQUFDLEtBQUssRUFBQyxXQUFXLEdBQUcsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFO1FBQ3JHLEVBQUUsSUFBSSxFQUFFLHVCQUFDLGtCQUFZLElBQUMsS0FBSyxFQUFDLFdBQVcsR0FBRyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRTtLQUU3RixDQUFBO0lBRUQsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUNiLE9BQU8sQ0FDTCx1QkFBQyxhQUFhLElBQ1osZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLFVBQVUsRUFBRSxpQkFBaUIsRUFDN0IsV0FBVyxFQUFFLFdBQVcsRUFDeEIsTUFBTSxFQUFFLE1BQU0sRUFDZCxRQUFRLEVBQUUsUUFBUSxFQUNsQixTQUFTLEVBQUUsU0FBUyxHQUNwQixDQUNILENBQUE7SUFDSCxDQUFDO0lBRUQsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FDTCx1QkFBQyxRQUFRLElBQ1AsUUFBUSxFQUFFLFFBQVEsRUFDbEIsVUFBVSxFQUFFLGlCQUFpQixFQUM3QixRQUFRLEVBQUUsUUFBUSxFQUNsQixXQUFXLEVBQUUsV0FBVyxFQUN4QixhQUFhLEVBQUUsYUFBYSxFQUM1QixNQUFNLEVBQUUsTUFBTSxFQUNkLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLE1BQU0sRUFBRSxNQUFNLEdBQ2QsQ0FDSCxDQUFBO0lBQ0gsQ0FBQztJQUVBLE9BQU8sQ0FDUCx3QkFBQyxhQUFHLElBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsU0FBUyxFQUFDLE1BQU0sRUFBQyxTQUFTLEVBQUMsTUFBTSxhQUVyRSxRQUFRLEVBQUUsTUFBTSxHQUFHLENBQUM7Z0JBQ3BCLENBQUMsQ0FBQyxDQUNBLHVCQUFDLHVCQUFRLElBQ1AsSUFBSSxFQUFFLFFBQVEsRUFDZCxVQUFVLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUN6Qix1QkFBQyxhQUFHLGNBQ0YsdUJBQUMsaUJBQVEsSUFDTixjQUFjLEVBQUU7Z0NBQ2QsZUFBZSxFQUFFLGVBQU8sQ0FBQyxLQUFLO2dDQUM5QixpQkFBaUIsRUFBRSx5QkFBVSxDQUFDLGFBQWE7Z0NBQzNDLFdBQVcsRUFBRSxlQUFPLENBQUMsUUFBUTs2QkFDOUIsWUFHRix3QkFBQyxpQkFBUSxDQUFDLE9BQU8sZUFDZix1QkFBQyxpQkFBUSxDQUFDLEtBQUssSUFBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsZUFBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFlBQ3JFLElBQUksRUFBRSxJQUFJLEdBQ0ksRUFDakIsdUJBQUMsaUJBQVEsQ0FBQyxRQUFRLElBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLGVBQU8sRUFBRSxTQUFTLEdBQUcsWUFDckQsSUFBSSxFQUFFLEtBQUssR0FDTSxJQUNILEdBQ1YsR0FDTixDQUNQLEVBQ0QsWUFBWSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUNoQyxDQUNILENBQUMsQ0FBQyxDQUFDLENBQ0YsdUJBQUMsYUFBRyxJQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsUUFBUSxZQUN2RCx1QkFBQyxjQUFJLElBQUMsT0FBTyxFQUFDLFdBQVcsd0VBRWxCLEdBQ0gsQ0FDUCxFQUVKLGdDQUFLLFNBQVMsRUFBQywyQ0FBMkMsWUFDdEQsdUJBQUMsbUJBQVMsSUFDTixTQUFTLEVBQUMsb0JBQW9CLEVBQzlCLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsRUFDeEUsSUFBSSxFQUFFLHVCQUFDLHVCQUFhLElBQUMsSUFBSSxFQUFFLHVCQUFDLGNBQVEsS0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxhQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBSSxZQUVwRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUNyQix1QkFBQyx5QkFBZSxJQUVaLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxFQUNqQixZQUFZLEVBQUUsTUFBTSxDQUFDLElBQUksRUFDekIsUUFBUSxFQUFFOzRCQUNOLE9BQU8sRUFBRSxNQUFNLENBQUMsTUFBTTt5QkFDekIsSUFMSSxNQUFNLENBQUMsSUFBSSxDQU1sQixDQUNMLENBQUMsR0FDTSxHQUNWLElBQ0QsQ0FDUCxDQUFBO0FBRUYsQ0FBQztBQUVELGtCQUFlLDJCQUEyQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVhY3Qvbm8tdW5rbm93bi1wcm9wZXJ0eSAqL1xuaW1wb3J0IFJlYWN0LCB7XG4gICAgdXNlU3RhdGUsXG4gICAgdXNlRWZmZWN0LFxuICAgIERpc3BhdGNoLFxuICAgIFNldFN0YXRlQWN0aW9uLFxufSBmcm9tICdyZWFjdCdcbmltcG9ydCB7XG4gICAgRmxhdExpc3QsXG4gICAgUGxhdGZvcm0sXG4gICAgU2FmZUFyZWFWaWV3LFxuICAgIFN0eWxlU2hlZXQsXG4gICAgUHJlc3NhYmxlLFxuICAgIFRleHRJbnB1dFN1Ym1pdEVkaXRpbmdFdmVudERhdGEsXG4gICAgTmF0aXZlU3ludGhldGljRXZlbnQsXG4gICAgQXBwZWFyYW5jZSxcbiAgICBEaW1lbnNpb25zLFxuICAgIENvbG9yVmFsdWUsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSdcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQGNvbXBvbmVudHMvVGV4dEZpZWxkJ1xuaW1wb3J0IHtcbiAgTGlzdEl0ZW0sXG5cbiAgU2VhcmNoQmFyLFxuIH0gZnJvbSAnQHJuZXVpL3RoZW1lZCdcbmltcG9ydCBGYWIgZnJvbSAnQG11aS9tYXRlcmlhbC9GYWInO1xuaW1wb3J0IEFkZEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9BZGQnO1xuaW1wb3J0IHsgU3hQcm9wcywgdXNlVGhlbWUgfSBmcm9tICdAbXVpL21hdGVyaWFsL3N0eWxlcydcbmltcG9ydCBab29tIGZyb20gJ0BtdWkvbWF0ZXJpYWwvWm9vbSdcbmltcG9ydCBTcGVlZERpYWwgZnJvbSAnQG11aS9tYXRlcmlhbC9TcGVlZERpYWwnO1xuaW1wb3J0IFNwZWVkRGlhbEljb24gZnJvbSAnQG11aS9tYXRlcmlhbC9TcGVlZERpYWxJY29uJztcbmltcG9ydCBTcGVlZERpYWxBY3Rpb24gZnJvbSAnQG11aS9tYXRlcmlhbC9TcGVlZERpYWxBY3Rpb24nO1xuaW1wb3J0IHsgcGluayB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwvY29sb3JzJ1xuaW1wb3J0IEltcG9ydENvbnRhY3RzSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0ltcG9ydENvbnRhY3RzJztcbmltcG9ydCBLZXlib2FyZEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9LZXlib2FyZCc7XG5pbXBvcnQgRWRpdEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9FZGl0JztcblxuXG5pbXBvcnQgQm94IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9Cb3gnXG5pbXBvcnQgVGV4dCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vVGV4dCdcbmltcG9ydCBCdXR0b24gZnJvbSAnQGNvbXBvbmVudHMvQnV0dG9uJ1xuaW1wb3J0IFJlZ3VsYXJDYXJkIGZyb20gJ0Bjb21wb25lbnRzL1JlZ3VsYXJDYXJkJ1xuXG5pbXBvcnQge1xuICAgIGxpc3RVc2VyQ29udGFjdHNIZWxwZXIsXG4gICAgc2VhcmNoQ29udGFjdHNCeU5hbWUsXG59IGZyb20gJ0BsaWIvQ29udGFjdC9Db250YWN0SGVscGVyJ1xuXG5pbXBvcnQgeyBDb250YWN0VHlwZSB9IGZyb20gJ0BsaWIvZGF0YVR5cGVzL0NvbnRhY3RUeXBlJ1xuaW1wb3J0IHsgYWRkQ29udGFjdFRvSW52aXRlZXMsIGFkZE9uZVRvTWFudWFsRW50cmllcywgcmVtb3ZlQ29udGFjdEZyb21JbnZpdGVlLCByZW1vdmVDb250YWN0RnJvbVNlYXJjaEludml0ZWUsIHJlbW92ZUVudHJ5RnJvbU1hbnVhbEVudHJpZXMsIHVwZGF0ZUNvbnRhY3RTZWxlY3Rpb24sIHVwZGF0ZUVudHJ5SW5NYW51YWxFbnRyaWVzLCB1cGRhdGVTZWFyY2hDb250YWN0U2VsZWN0aW9uIH0gZnJvbSAnQGxpYi9Bc3Npc3QvVXNlck1lZXRpbmdBc3Npc3RIZWxwZXInXG5cbmltcG9ydCB7IEFwb2xsb0NsaWVudCwgTm9ybWFsaXplZENhY2hlT2JqZWN0IH0gZnJvbSAnQGFwb2xsby9jbGllbnQnXG5pbXBvcnQgeyBNZWV0aW5nQXNzaXN0SW52aXRlVHlwZSB9IGZyb20gJ0BsaWIvZGF0YVR5cGVzL01lZXRpbmdBc3Npc3RJbnZpdGVUeXBlJ1xuaW1wb3J0IHsgcGFsZXR0ZSB9IGZyb20gJ0BsaWIvdGhlbWUvdGhlbWUnXG5cbmNvbnN0IHN0eWxlcyA9IHtcbiAgICBzYWZlQXJlYToge1xuICAgICAgYWxpZ25JdGVtczogJ2ZsZXgtZW5kJyxcbiAgICB9LFxuICAgIGNvbnRhaW5lcjoge1xuICAgICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcbiAgICB9LFxuICAgIGZhYjoge1xuICAgICAgbWFyZ2luOiAxNixcbiAgICAgIG1hcmdpblRvcDogMCxcbiAgICB9LFxuICAgIGNvbnRhaW5lcjI6IHtcbiAgICAgIGZsZXg6IDEsXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICB9LFxufVxuXG5jb25zdCBmYWJTdHlsZSA9IHtcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIGJvdHRvbTogMTYsXG4gIHJpZ2h0OiAxNixcbn1cbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBzdXBlcnRva2Vuc05vZGUgZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZSdcbmltcG9ydCB7IGJhY2tlbmRDb25maWcgfSBmcm9tICcuLi8uLi8uLi9jb25maWcvYmFja2VuZENvbmZpZydcbmltcG9ydCBTZXNzaW9uIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUvcmVjaXBlL3Nlc3Npb24nXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcyB9OiB7IHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlIH0pIHtcbiAgLy8gTm90aWNlIGhvdyB0aGUgc2VydmVyIHVzZXMgYEFQSWAgZnJvbSBgd2l0aFNTUkNvbnRleHRgLCBpbnN0ZWFkIG9mIHRoZSB0b3AtbGV2ZWwgYEFQSWAuXG4gIC8vIGNvbnN0IFNTUiA9IHdpdGhTU1JDb250ZXh0KHsgcmVxIH0pXG4gIC8vIHRoaXMgcnVucyBvbiB0aGUgYmFja2VuZCwgc28gd2UgbXVzdCBjYWxsIGluaXQgb24gc3VwZXJ0b2tlbnMtbm9kZSBTREtcbiAgc3VwZXJ0b2tlbnNOb2RlLmluaXQoYmFja2VuZENvbmZpZygpKVxuICBsZXQgc2Vzc2lvblxuICB0cnkge1xuICAgIHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmdldFNlc3Npb24ocmVxLCByZXMsIHtcbiAgICAgIG92ZXJyaWRlR2xvYmFsQ2xhaW1WYWxpZGF0b3JzOiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfSxcbiAgICB9KVxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5UUllfUkVGUkVTSF9UT0tFTikge1xuICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgfSBlbHNlIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbi5FcnJvci5VTkFVVEhPUklTRUQpIHtcbiAgICAgIC8vIHRoaXMgd2lsbCBmb3JjZSB0aGUgZnJvbnRlbmQgdG8gdHJ5IGFuZCByZWZyZXNoIHdoaWNoIHdpbGwgZmFpbFxuICAgICAgLy8gY2xlYXJpbmcgYWxsIGNvb2tpZXMgYW5kIHJlZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBsb2dpbiBzY3JlZW4uXG4gICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICB9XG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICBpZiAoIXNlc3Npb24/LmdldFVzZXJJZCgpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIGRlc3RpbmF0aW9uOiAnL1VzZXIvTG9naW4vVXNlckxvZ2luJyxcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgc3ViOiBzZXNzaW9uLmdldFVzZXJJZCgpLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdHlwZSBTZWxlY3RlZENvbnRhY3RUeXBlID0gQ29udGFjdFR5cGUgJiB7XG4gIHNlbGVjdGVkOiBib29sZWFuLFxufVxuXG50eXBlIFByb3BzID0ge1xuICBpbnZpdGVlczogTWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXSxcbiAgc2V0UGFyZW50SW52aXRlZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10+PixcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIGhvc3ROYW1lOiBzdHJpbmcsXG4gIG1lZXRpbmdJZDogc3RyaW5nLFxufVxuXG50eXBlIHNlbGVjdGVkQ29udGFjdFByb3BzID0ge1xuICBjb250YWN0OiBTZWxlY3RlZENvbnRhY3RUeXBlLFxuICBhZGRDb250YWN0VG9JbnZpdGVlczogdHlwZW9mIGFkZENvbnRhY3RUb0ludml0ZWVzXG4gIHJlbW92ZUNvbnRhY3RGcm9tSW52aXRlZTogdHlwZW9mIHJlbW92ZUNvbnRhY3RGcm9tSW52aXRlZSxcbiAgdXBkYXRlQ29udGFjdFNlbGVjdGlvbjogdHlwZW9mIHVwZGF0ZUNvbnRhY3RTZWxlY3Rpb24sXG4gIGNvbnRhY3RzOiBTZWxlY3RlZENvbnRhY3RUeXBlW10sXG4gIHNldENvbnRhY3RzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxTZWxlY3RlZENvbnRhY3RUeXBlW10+PixcbiAgc2V0UGFyZW50STogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248TWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXT4+LFxuICBpbnZpdGVlczogTWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXSxcbiAgc2V0SW52aXRlZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10+PixcbiAgaW5kZXg6IG51bWJlcixcbiAgaG9zdElkOiBzdHJpbmcsXG4gIGhvc3ROYW1lOiBzdHJpbmcsXG4gIG1lZXRpbmdJZDogc3RyaW5nLFxufVxuXG50eXBlIFNlbGVjdGVkU2VhcmNoQ29udGFjdFR5cGVQcm9wcyA9IHtcbiAgY29udGFjdDogU2VsZWN0ZWRDb250YWN0VHlwZSxcbiAgYWRkQ29udGFjdFRvSW52aXRlZXM6IHR5cGVvZiBhZGRDb250YWN0VG9JbnZpdGVlc1xuICByZW1vdmVDb250YWN0RnJvbVNlYXJjaEludml0ZWU6IHR5cGVvZiByZW1vdmVDb250YWN0RnJvbVNlYXJjaEludml0ZWUsXG4gIHVwZGF0ZVNlYXJjaENvbnRhY3RTZWxlY3Rpb246IHR5cGVvZiB1cGRhdGVTZWFyY2hDb250YWN0U2VsZWN0aW9uLFxuICBjb250YWN0czogU2VsZWN0ZWRDb250YWN0VHlwZVtdLFxuICBzZWFyY2hSZXN1bHRzOiBTZWxlY3RlZENvbnRhY3RUeXBlW10sXG4gIHNldENvbnRhY3RzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxTZWxlY3RlZENvbnRhY3RUeXBlW10+PixcbiAgc2V0UGFyZW50STogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248TWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXT4+LFxuICBzZXRTZWFyY2hSZXN1bHRzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxTZWxlY3RlZENvbnRhY3RUeXBlW10+PixcbiAgaW52aXRlZXM6IE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10sXG4gIHNldEludml0ZWVzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxNZWV0aW5nQXNzaXN0SW52aXRlVHlwZVtdPj4sXG4gIGluZGV4OiBudW1iZXIsXG4gIGhvc3RJZDogc3RyaW5nLFxuICBob3N0TmFtZTogc3RyaW5nLFxuICBtZWV0aW5nSWQ6IHN0cmluZyxcbn1cblxuZnVuY3Rpb24gU2VhcmNoQ29udGFjdChwcm9wczogU2VsZWN0ZWRTZWFyY2hDb250YWN0VHlwZVByb3BzKSB7XG4gIGNvbnN0IFtzZWxlY3RlZCwgc2V0U2VsZWN0ZWRdID0gdXNlU3RhdGU8Ym9vbGVhbj4ocHJvcHM/Lmludml0ZWVzLmZpbmRJbmRleChpID0+IGkuaWQgPT09IHByb3BzPy5jb250YWN0LmlkKSA+IC0xKVxuICBjb25zdCB7IGhvc3RJZCwgaG9zdE5hbWUsIG1lZXRpbmdJZCB9ID0gcHJvcHNcbiAgY29uc3QgdXBkYXRlU2VsZWN0ZWQgPSAoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSAhc2VsZWN0ZWRcbiAgICBzZXRTZWxlY3RlZCh2YWx1ZSlcblxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHByb3BzPy5zZWFyY2hSZXN1bHRzKSB7XG4gICAgICAgIGlmIChwcm9wcz8uc2V0U2VhcmNoUmVzdWx0cykge1xuICAgICAgICAgIHByb3BzPy51cGRhdGVTZWFyY2hDb250YWN0U2VsZWN0aW9uKFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBwcm9wcz8uY29udGFjdCxcbiAgICAgICAgICAgIHByb3BzPy5jb250YWN0cyxcbiAgICAgICAgICAgIHByb3BzPy5zZWFyY2hSZXN1bHRzLFxuICAgICAgICAgICAgcHJvcHM/LnNldENvbnRhY3RzLFxuICAgICAgICAgICAgcHJvcHM/LnNldFNlYXJjaFJlc3VsdHMsXG4gICAgICAgICAgICBwcm9wcz8uaW5kZXgsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXG5cbiAgICAgIHByb3BzPy5hZGRDb250YWN0VG9JbnZpdGVlcyhcbiAgICAgICAgcHJvcHM/LmNvbnRhY3QsXG4gICAgICAgIHByb3BzPy5pbnZpdGVlcyxcbiAgICAgICAgcHJvcHM/LnNldEludml0ZWVzLFxuICAgICAgICBwcm9wcz8uc2V0UGFyZW50SSxcbiAgICAgICAgaG9zdElkLCBcbiAgICAgICAgaG9zdE5hbWUsIFxuICAgICAgICBtZWV0aW5nSWQsXG4gICAgICApXG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChwcm9wcz8uY29udGFjdHMpIHtcbiAgICAgICAgaWYgKHByb3BzPy5zZWFyY2hSZXN1bHRzKSB7XG4gICAgICAgICAgaWYgKHByb3BzPy5zZXRTZWFyY2hSZXN1bHRzKSB7XG4gICAgICAgICAgICAgcHJvcHM/LnVwZGF0ZVNlYXJjaENvbnRhY3RTZWxlY3Rpb24oXG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICBwcm9wcz8uY29udGFjdCxcbiAgICAgICAgICAgICAgcHJvcHM/LmNvbnRhY3RzLFxuICAgICAgICAgICAgICBwcm9wcz8uc2VhcmNoUmVzdWx0cyxcbiAgICAgICAgICAgICAgcHJvcHM/LnNldENvbnRhY3RzLFxuICAgICAgICAgICAgICBwcm9wcz8uc2V0U2VhcmNoUmVzdWx0cyxcbiAgICAgICAgICAgICAgcHJvcHM/LmluZGV4LFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXG5cbiAgICAgIGlmIChwcm9wcz8uc2VhcmNoUmVzdWx0cykge1xuICAgICAgICBpZiAocHJvcHM/LnNldFNlYXJjaFJlc3VsdHMpIHtcbiAgICAgICAgICBwcm9wcz8ucmVtb3ZlQ29udGFjdEZyb21TZWFyY2hJbnZpdGVlKFxuICAgICAgICAgICAgcHJvcHM/LmNvbnRhY3QsXG4gICAgICAgICAgICBwcm9wcz8uaW52aXRlZXMsXG4gICAgICAgICAgICBwcm9wcz8uc2VhcmNoUmVzdWx0cyxcbiAgICAgICAgICAgIHByb3BzPy5zZXRJbnZpdGVlcyxcbiAgICAgICAgICAgIHByb3BzPy5zZXRTZWFyY2hSZXN1bHRzLFxuICAgICAgICAgICAgcHJvcHM/LnNldFBhcmVudEksXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8Qm94PlxuICAgICAgPFJlZ3VsYXJDYXJkPlxuICAgICAgICA8Qm94IHA9e3sgcGhvbmU6ICdzJywgdGFibGV0OiAnbScgfX0+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cIm9wdGlvbkhlYWRlclwiPlxuICAgICAgICAgICAge3Byb3BzPy5jb250YWN0Py5uYW1lfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgPC9Cb3g+XG4gICAgICAgIDxCb3g+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImNhcHRpb25cIj5cbiAgICAgICAgICAgIHtwcm9wcz8uY29udGFjdD8uZW1haWxzPy5maWx0ZXIoaSA9PiAoaS5wcmltYXJ5ID09PSB0cnVlKSk/LlswXT8udmFsdWV9XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L0JveD5cbiAgICAgICAgPEJveCBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19PlxuICAgICAgICAgIDxQcmVzc2FibGUgb25QcmVzcz17dXBkYXRlU2VsZWN0ZWR9PlxuICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIj5cbiAgICAgICAgICAgICAge3NlbGVjdGVkID8gJ1JlbW92ZScgOiAnQWRkJyB9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9QcmVzc2FibGU+XG4gICAgICAgIDwvQm94PlxuICAgICAgPC9SZWd1bGFyQ2FyZD5cbiAgICA8L0JveD5cbiAgKVxufVxuXG50eXBlIHNlbGVjdGVkQ29udGFjdHNQcm9wcyA9IHtcbiAgY29udGFjdHM6IFNlbGVjdGVkQ29udGFjdFR5cGVbXSxcbiAgc2V0UGFyZW50STogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248TWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXT4+LFxuICBpbnZpdGVlczogTWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXSxcbiAgc2V0SW52aXRlZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10+PixcbiAgY2xvc2VDb250YWN0czogKCkgPT4gdm9pZCxcbiAgaG9zdElkOiBzdHJpbmcsXG4gIGhvc3ROYW1lOiBzdHJpbmcsXG4gIG1lZXRpbmdJZDogc3RyaW5nLFxuICBjbGllbnQ6IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+LFxufVxuXG5mdW5jdGlvbiBDb250YWN0KHByb3BzOiBzZWxlY3RlZENvbnRhY3RQcm9wcykge1xuICBjb25zdCBbc2VsZWN0ZWQsIHNldFNlbGVjdGVkXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHByb3BzPy5pbnZpdGVlcy5maW5kSW5kZXgoaSA9PiBpLmlkID09PSBwcm9wcz8uY29udGFjdC5pZCkgPiAtMSlcbiAgY29uc3QgeyBob3N0SWQsIGhvc3ROYW1lLCBtZWV0aW5nSWQgfSA9IHByb3BzXG4gIGNvbnN0IHVwZGF0ZVNlbGVjdGVkID0gKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gIXNlbGVjdGVkXG4gICAgc2V0U2VsZWN0ZWQodmFsdWUpXG5cbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcbiAgICAgIHByb3BzPy51cGRhdGVDb250YWN0U2VsZWN0aW9uKFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgcHJvcHM/LmNvbnRhY3QsXG4gICAgICAgIHByb3BzPy5jb250YWN0cyxcbiAgICAgICAgcHJvcHM/LnNldENvbnRhY3RzLFxuICAgICAgICBwcm9wcz8uaW5kZXgsXG4gICAgICApXG5cbiAgICAgIHByb3BzPy5hZGRDb250YWN0VG9JbnZpdGVlcyhcbiAgICAgICAgcHJvcHM/LmNvbnRhY3QsXG4gICAgICAgIHByb3BzPy5pbnZpdGVlcyxcbiAgICAgICAgcHJvcHM/LnNldEludml0ZWVzLFxuICAgICAgICBwcm9wcz8uc2V0UGFyZW50SSxcbiAgICAgICAgaG9zdElkLCBcbiAgICAgICAgaG9zdE5hbWUsIFxuICAgICAgICBtZWV0aW5nSWQsXG4gICAgICApXG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHByb3BzPy51cGRhdGVDb250YWN0U2VsZWN0aW9uKFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgcHJvcHM/LmNvbnRhY3QsXG4gICAgICAgIHByb3BzPy5jb250YWN0cyxcbiAgICAgICAgcHJvcHM/LnNldENvbnRhY3RzLFxuICAgICAgICBwcm9wcz8uaW5kZXgsXG4gICAgICApXG5cbiAgICAgIHByb3BzPy5yZW1vdmVDb250YWN0RnJvbUludml0ZWUoXG4gICAgICAgIHByb3BzPy5jb250YWN0LFxuICAgICAgICBwcm9wcz8uaW52aXRlZXMsXG4gICAgICAgIHByb3BzPy5zZXRJbnZpdGVlcyxcbiAgICAgICAgcHJvcHM/LnNldFBhcmVudEksXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8Qm94PlxuICAgICAgPFJlZ3VsYXJDYXJkPlxuICAgICAgICA8Qm94IHA9e3sgcGhvbmU6ICdzJywgdGFibGV0OiAnbScgfX0+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cIm9wdGlvbkhlYWRlclwiPlxuICAgICAgICAgICAge3Byb3BzPy5jb250YWN0Py5uYW1lfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgPC9Cb3g+XG4gICAgICAgIDxCb3g+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cImNhcHRpb25cIj5cbiAgICAgICAgICAgIHtwcm9wcz8uY29udGFjdD8uZW1haWxzPy5maWx0ZXIoaSA9PiAoaS5wcmltYXJ5ID09PSB0cnVlKSk/LlswXT8udmFsdWV9XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICA8L0JveD5cbiAgICAgICAgPEJveCBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19PlxuICAgICAgICAgIDxQcmVzc2FibGUgb25QcmVzcz17dXBkYXRlU2VsZWN0ZWR9PlxuICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cImJ1dHRvbkxpbmtcIj5cbiAgICAgICAgICAgICAge3NlbGVjdGVkID8gJ1JlbW92ZScgOiAnQWRkJyB9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9QcmVzc2FibGU+XG4gICAgICAgIDwvQm94PlxuICAgICAgPC9SZWd1bGFyQ2FyZD5cbiAgICA8L0JveD5cbiAgKVxufVxuXG5cbmZ1bmN0aW9uIENvbnRhY3RzKHByb3BzOiBzZWxlY3RlZENvbnRhY3RzUHJvcHMpIHtcbiAgY29uc3QgW2NvbnRhY3RzLCBzZXRDb250YWN0c10gPSB1c2VTdGF0ZTxTZWxlY3RlZENvbnRhY3RUeXBlW10+KHByb3BzPy5jb250YWN0cylcbiAgY29uc3QgW3NlYXJjaFJlc3VsdHMsIHNldFNlYXJjaFJlc3VsdHNdID0gdXNlU3RhdGU8U2VsZWN0ZWRDb250YWN0VHlwZVtdPihwcm9wcz8uY29udGFjdHMpXG4gIGNvbnN0IFtzZWFyY2gsIHNldFNlYXJjaF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKVxuXG4gIGNvbnN0IHsgaG9zdElkLCBob3N0TmFtZSwgbWVldGluZ0lkLCBjbGllbnQgfSA9IHByb3BzXG5cbiAgY29uc3QgdXBkYXRlU2VhcmNoID0gKHRleHQ6IHN0cmluZykgPT4gc2V0U2VhcmNoKHRleHQpXG5cbiAgY29uc3Qgb25DYW5jZWxTZWFyY2ggPSAoKSA9PiB7XG4gICAgc2V0U2VhcmNoKCcnKVxuICAgIHNldFNlYXJjaFJlc3VsdHMoW10pXG4gIH1cblxuICBjb25zdCBvbkNsZWFyU2VhcmNoID0gKCkgPT4gc2V0U2VhcmNoKCcnKVxuXG4gIGNvbnN0IG9uU3VibWl0U2VhcmNoID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyB2YWxpZGF0ZVxuICAgICAgaWYgKCFzZWFyY2gpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKHNlYXJjaCwgJyBzZWFyY2ggc2VhcmNoJylcblxuICAgICAgY29uc3QgbmV3UmVzdWx0cyA9IGF3YWl0IHNlYXJjaENvbnRhY3RzQnlOYW1lKFxuICAgICAgICBjbGllbnQsXG4gICAgICAgIGhvc3RJZCxcbiAgICAgICAgc2VhcmNoLFxuICAgICAgKVxuXG4gICAgICBjb25zb2xlLmxvZyhuZXdSZXN1bHRzLCAnIG5ld1Jlc3VsdHMgcG9zdCBzZWFyY2hDb250YWN0c0J5TmFtZScpXG5cbiAgICAgIGlmIChuZXdSZXN1bHRzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNldFNlYXJjaFJlc3VsdHMobmV3UmVzdWx0cz8ubWFwKGMgPT4gKHsgLi4uYywgc2VsZWN0ZWQ6IHByb3BzPy5pbnZpdGVlcz8uZmluZEluZGV4KGkgPT4gaT8uaWQgPT09IGM/LmlkKSA+IC0xIH0pKSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBzdWJtaXQgc2VhcmNoIHJlc3VsdHMnKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNsb3NlQ29udGFjdHMgPSBwcm9wcz8uY2xvc2VDb250YWN0c1xuXG4gIGNvbnNvbGUubG9nKHNlYXJjaFJlc3VsdHMgJiYgc2VhcmNoUmVzdWx0cz8ubGVuZ3RoID4gMCwgJyBzZWFyY2hSZXN1bHRzPy5sZW5ndGggPiAwJylcbiAgcmV0dXJuIChcbiAgICA8Qm94IGZsZXg9ezF9ICBtaW5IZWlnaHQ9XCI2NXZoXCIgbWF4SGVpZ2h0PVwiNjV2aFwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICA8Qm94IGZsZXg9ezF9IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgIDxCb3ggc3R5bGU9e3sgd2lkdGg6ICc4MCUnIH19PlxuICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cIm0tNFwiPiAgIFxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImRlZmF1bHQtc2VhcmNoXCIgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgc3Itb25seSBkYXJrOnRleHQtd2hpdGVcIj5TZWFyY2g8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LXktMCBsZWZ0LTAgZmxleCBpdGVtcy1jZW50ZXIgcGwtMyBwb2ludGVyLWV2ZW50cy1ub25lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHN2ZyBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjJcIiBkPVwiTTIxIDIxbC02LTZtMi01YTcgNyAwIDExLTE0IDAgNyA3IDAgMDExNCAwelwiPjwvcGF0aD48L3N2Zz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPXtzZWFyY2h9IG9uQ2hhbmdlPXsoZSkgPT4gdXBkYXRlU2VhcmNoKGU/LnRhcmdldD8udmFsdWUpfSB0eXBlPVwic2VhcmNoXCIgaWQ9XCJkZWZhdWx0LXNlYXJjaFwiIGNsYXNzTmFtZT1cImJsb2NrIHctZnVsbCBwLTQgcGwtMTAgdGV4dC1zbSB0ZXh0LWdyYXktOTAwIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBiZy1ncmF5LTUwIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCBkYXJrOmJnLWdyYXktNzAwIGRhcms6Ym9yZGVyLWdyYXktNjAwIGRhcms6cGxhY2Vob2xkZXItZ3JheS00MDAgZGFyazp0ZXh0LXdoaXRlIGRhcms6Zm9jdXM6cmluZy1wdXJwbGUtNTAwIGRhcms6Zm9jdXM6Ym9yZGVyLXB1cnBsZS01MDBcIiBwbGFjZWhvbGRlcj1cIlR5cGUgTmFtZSBIZXJlIEFuZCBFbnRlci4uLlwiIHJlcXVpcmVkIC8+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uU3VibWl0U2VhcmNofSBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGFic29sdXRlIHJpZ2h0LTIuNSBib3R0b20tMi41IGJnLXB1cnBsZS03MDAgaG92ZXI6YmctcHVycGxlLTgwMCBmb2N1czpyaW5nLTQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctcHVycGxlLTMwMCBmb250LW1lZGl1bSByb3VuZGVkLWxnIHRleHQtc20gcHgtNCBweS0yIGRhcms6YmctcHVycGxlLTYwMCBkYXJrOmhvdmVyOmJnLXB1cnBsZS03MDAgZGFyazpmb2N1czpyaW5nLXB1cnBsZS04MDBcIj5TZWFyY2g8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L0JveD5cblxuICAgICAgICB7c2VhcmNoUmVzdWx0cyAmJiBzZWFyY2hSZXN1bHRzPy5sZW5ndGggPiAwXG4gICAgICAgID8gKFxuICAgICAgICAgIDxCb3ggZmxleD17MX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319PlxuICAgICAgICAgICAgPEZsYXRMaXN0XG4gICAgICAgICAgICAgIGRhdGE9e2NvbnRhY3RzfVxuICAgICAgICAgICAgICByZW5kZXJJdGVtPXsoeyBpdGVtLCBpbmRleCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgPFNlYXJjaENvbnRhY3RcbiAgICAgICAgICAgICAgICAgIGNvbnRhY3Q9e2l0ZW19XG4gICAgICAgICAgICAgICAgICBhZGRDb250YWN0VG9JbnZpdGVlcz17YWRkQ29udGFjdFRvSW52aXRlZXN9XG4gICAgICAgICAgICAgICAgICByZW1vdmVDb250YWN0RnJvbVNlYXJjaEludml0ZWU9e3JlbW92ZUNvbnRhY3RGcm9tU2VhcmNoSW52aXRlZX1cbiAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlYXJjaENvbnRhY3RTZWxlY3Rpb249e3VwZGF0ZVNlYXJjaENvbnRhY3RTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICBjb250YWN0cz17Y29udGFjdHN9XG4gICAgICAgICAgICAgICAgICBzZWFyY2hSZXN1bHRzPXtzZWFyY2hSZXN1bHRzfVxuICAgICAgICAgICAgICAgICAgc2V0Q29udGFjdHM9e3NldENvbnRhY3RzfVxuICAgICAgICAgICAgICAgICAgc2V0UGFyZW50ST17cHJvcHM/LnNldFBhcmVudEl9XG4gICAgICAgICAgICAgICAgICBzZXRTZWFyY2hSZXN1bHRzPXtzZXRTZWFyY2hSZXN1bHRzfVxuICAgICAgICAgICAgICAgICAgaW52aXRlZXM9e3Byb3BzPy5pbnZpdGVlc31cbiAgICAgICAgICAgICAgICAgIHNldEludml0ZWVzPXtwcm9wcz8uc2V0SW52aXRlZXN9XG4gICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgICAgICBob3N0SWQ9e2hvc3RJZH0gXG4gICAgICAgICAgICAgICAgICBob3N0TmFtZT17aG9zdE5hbWV9XG4gICAgICAgICAgICAgICAgICBtZWV0aW5nSWQ9e21lZXRpbmdJZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBrZXlFeHRyYWN0b3I9eyhpdGVtLCBpbmRleCkgPT4gYCR7aXRlbX0tJHtpbmRleH1gfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgKSA6IChcbiAgICAgICAgPEJveCBmbGV4PXsxfSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX0+XG4gICAgICAgIHtcbiAgICAgICAgICBjb250YWN0cz8ubGVuZ3RoID4gMFxuICAgICAgICAgID8gKFxuICAgICAgICAgICAgPEZsYXRMaXN0XG4gICAgICAgICAgICAgIGRhdGE9e2NvbnRhY3RzfVxuICAgICAgICAgICAgICByZW5kZXJJdGVtPXsoeyBpdGVtLCBpbmRleCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgPENvbnRhY3RcbiAgICAgICAgICAgICAgICAgIGNvbnRhY3Q9e2l0ZW19XG4gICAgICAgICAgICAgICAgICBhZGRDb250YWN0VG9JbnZpdGVlcz17YWRkQ29udGFjdFRvSW52aXRlZXN9XG4gICAgICAgICAgICAgICAgICByZW1vdmVDb250YWN0RnJvbUludml0ZWU9e3JlbW92ZUNvbnRhY3RGcm9tSW52aXRlZX1cbiAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbnRhY3RTZWxlY3Rpb249e3VwZGF0ZUNvbnRhY3RTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICBjb250YWN0cz17Y29udGFjdHN9XG4gICAgICAgICAgICAgICAgICBzZXRDb250YWN0cz17c2V0Q29udGFjdHN9XG4gICAgICAgICAgICAgICAgICBzZXRQYXJlbnRJPXtwcm9wcz8uc2V0UGFyZW50SX1cbiAgICAgICAgICAgICAgICAgIGludml0ZWVzPXtwcm9wcz8uaW52aXRlZXN9XG4gICAgICAgICAgICAgICAgICBzZXRJbnZpdGVlcz17cHJvcHM/LnNldEludml0ZWVzfVxuICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgaG9zdElkPXtob3N0SWR9IFxuICAgICAgICAgICAgICAgICAgaG9zdE5hbWU9e2hvc3ROYW1lfVxuICAgICAgICAgICAgICAgICAgbWVldGluZ0lkPXttZWV0aW5nSWR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAga2V5RXh0cmFjdG9yPXsoaXRlbSwgaW5kZXgpID0+IGAke2l0ZW19LSR7aW5kZXh9YH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxCb3ggZmxleD17MX0ganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICc5MCUnfX0+XG4gICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJzdWJoZWFkZXJOb3JtYWxcIj5cbiAgICAgICAgICAgICAgICBZb3UgaGF2ZSBubyBjb250YWN0cyBzYXZlZC5cbiAgICAgICAgICAgICAgICBHbyB0byBzZXR0aW5ncyB0byBlbmFibGUgYW5kIHN5bmMgQ29udGFjdHMgZnJvbSB5b3VyIHBob25lXG4gICAgICAgICAgICAgICAgb3IgM3JkIHBhcnR5IHByb3ZpZGVyLlxuICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgPC9Cb3g+XG4gICAgICAgICl9XG4gICAgICAgIDxCb3gganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICA8UHJlc3NhYmxlIG9uUHJlc3M9e2Nsb3NlQ29udGFjdHN9PlxuICAgICAgICAgICAgPFRleHQgcD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdsJyB9fSB2YXJpYW50PVwiYnV0dG9uTGlua1wiPlxuICAgICAgICAgICAgICBDbG9zZVxuICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgIDwvUHJlc3NhYmxlPlxuICAgICAgICA8L0JveD5cbiAgICAgIDwvQm94PlxuICAgIDwvQm94PlxuICApXG59XG5cbnR5cGUgTWFudWFsRW50cnlUeXBlUHJvcHMgPSBNZWV0aW5nQXNzaXN0SW52aXRlVHlwZSAmIHtcbiAgLy8gdXBkYXRlRW50cnlJbk1hbnVhbEVudHJpZXM6IHR5cGVvZiB1cGRhdGVFbnRyeUluTWFudWFsRW50cmllcyxcbiAgLy8gcmVtb3ZlRW50cnlGcm9tTWFudWFsRW50cmllczogdHlwZW9mIHJlbW92ZUVudHJ5RnJvbU1hbnVhbEVudHJpZXMsXG4gIGluZGV4OiBudW1iZXIsXG4gIHNldE1hbnVhbEVudHJpZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10+PixcbiAgbWFudWFsRW50cmllczogTWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXSxcbiAgc2V0UGFyZW50STogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248TWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXT4+LFxuICBwYXJlbnRJbmRleDogbnVtYmVyLFxuICBpbnZpdGVlczogTWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXSxcbiAgc2V0SW52aXRlZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10+Pixcbn1cblxudHlwZSBNYW51YWxFbnRyaWVzVHlwZVByb3BzID0ge1xuICBzZXRNYW51YWxFbnRyaWVzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxNZWV0aW5nQXNzaXN0SW52aXRlVHlwZVtdPj4sXG4gIG1hbnVhbEVudHJpZXM6IE1lZXRpbmdBc3Npc3RJbnZpdGVUeXBlW10sXG4gIGludml0ZWVzOiBNZWV0aW5nQXNzaXN0SW52aXRlVHlwZVtdLFxuICBzZXRJbnZpdGVlczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248TWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXT4+LFxuICBzZXRQYXJlbnRJOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxNZWV0aW5nQXNzaXN0SW52aXRlVHlwZVtdPj4sXG4gIGNsb3NlTWFudWFsOiAoKSA9PiB2b2lkLFxuICAvLyB1cGRhdGVFbnRyeUluTWFudWFsRW50cmllczogdHlwZW9mIHVwZGF0ZUVudHJ5SW5NYW51YWxFbnRyaWVzLFxuICAvLyByZW1vdmVFbnRyeUZyb21NYW51YWxFbnRyaWVzOiB0eXBlb2YgcmVtb3ZlRW50cnlGcm9tTWFudWFsRW50cmllcyxcbiAgLy8gYWRkT25lVG9NYW51YWxFbnRyaWVzOiB0eXBlb2YgYWRkT25lVG9NYW51YWxFbnRyaWVzLFxuICBob3N0SWQ6IHN0cmluZyxcbiAgaG9zdE5hbWU6IHN0cmluZyxcbiAgbWVldGluZ0lkOiBzdHJpbmcsXG59XG5cbmZ1bmN0aW9uIE1hbnVhbEVudHJ5KHByb3BzOiBNYW51YWxFbnRyeVR5cGVQcm9wcykge1xuICBjb25zdCBbZW1haWwsIHNldEVtYWlsXSA9IHVzZVN0YXRlPHN0cmluZz4ocHJvcHM/LmVtYWlsIHx8ICcnKVxuICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKVxuICBjb25zdCBzZXRNYW51YWxFbnRyaWVzID0gcHJvcHM/LnNldE1hbnVhbEVudHJpZXNcbiAgY29uc3QgbWFudWFsRW50cmllcyA9IHByb3BzPy5tYW51YWxFbnRyaWVzXG4gIGNvbnN0IGluZGV4ID0gcHJvcHM/LmluZGV4XG4gIGNvbnN0IHNldFBhcmVudEkgPSBwcm9wcz8uc2V0UGFyZW50SVxuICBjb25zdCBwYXJlbnRJbmRleCA9IHByb3BzPy5wYXJlbnRJbmRleFxuICBjb25zdCBpbnZpdGVlcyA9IHByb3BzPy5pbnZpdGVlc1xuICBjb25zdCBzZXRJbnZpdGVlcyA9IHByb3BzPy5zZXRJbnZpdGVlc1xuXG4gIFxuXG4gIGNvbnNvbGUubG9nKG1hbnVhbEVudHJpZXMsICcgbWFudWFsRW50cmllcycpXG4gIGNvbnNvbGUubG9nKGludml0ZWVzLCAnIGludml0ZWVzJylcblxuXG4gIGNvbnN0IG9uRW1haWxDaGFuZ2UgPSAoZTogeyB0YXJnZXQ6IHsgdmFsdWU6IHN0cmluZyB9IH0pID0+IHtcbiAgICBzZXRFbWFpbChlPy50YXJnZXQ/LnZhbHVlKVxuICAgIHVwZGF0ZUVudHJ5SW5NYW51YWxFbnRyaWVzKG1hbnVhbEVudHJpZXMsIHNldE1hbnVhbEVudHJpZXMsIGluZGV4LCBpbnZpdGVlcywgc2V0SW52aXRlZXMsIHNldFBhcmVudEksIHBhcmVudEluZGV4LCBlPy50YXJnZXQ/LnZhbHVlLCBuYW1lKVxuICB9XG5cbiAgY29uc3Qgb25OYW1lQ2hhbmdlID0gKGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiB7XG4gICAgc2V0TmFtZShlPy50YXJnZXQ/LnZhbHVlKVxuICAgIHVwZGF0ZUVudHJ5SW5NYW51YWxFbnRyaWVzKG1hbnVhbEVudHJpZXMsIHNldE1hbnVhbEVudHJpZXMsIGluZGV4LCBpbnZpdGVlcywgc2V0SW52aXRlZXMsIHNldFBhcmVudEksIHBhcmVudEluZGV4LCBlbWFpbCwgZT8udGFyZ2V0Py52YWx1ZSlcbiAgfVxuXG4gIHJldHVybiAoXG5cbiAgICA8Qm94PlxuICAgICAgPFJlZ3VsYXJDYXJkPlxuICAgICAgICA8Qm94IHA9e3sgcGhvbmU6ICdzJywgdGFibGV0OiAnbScgfX0+XG4gICAgICAgICAgPFRleHQgdmFyaWFudD1cIm9wdGlvbkhlYWRlclwiPlxuICAgICAgICAgICAgRW1haWxcbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgXG4gICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwickByLmNvbVwiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkVtYWlsQ2hhbmdlfVxuICAgICAgICAgICAgICB2YWx1ZT17ZW1haWwgfHwgJyd9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319XG4gICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgIHZhbGlkYXRlPVwiZW1haWxcIlxuICAgICAgICAgICAgICB2YWxpZGF0aW9uTWVzc2FnZT1cIlBsZWFzZSBwcm92aWRlIGEgdmFsaWQgZW1haWwgYWRkcmVzc1wiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIFxuICAgICAgICA8L0JveD5cbiAgICAgICAgPEJveCBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19PlxuICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJvcHRpb25IZWFkZXJcIj5cbiAgICAgICAgICAgIERpc3BsYXkgTmFtZVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICBcbiAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJuYW1lXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uTmFtZUNoYW5nZX1cbiAgICAgICAgICAgICAgdmFsdWU9e25hbWUgfHwgbWFudWFsRW50cmllcz8uW2luZGV4XT8ubmFtZSB8fCAnJ31cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgXG4gICAgICAgIDwvQm94PlxuICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IHJlbW92ZUVudHJ5RnJvbU1hbnVhbEVudHJpZXMobWFudWFsRW50cmllcywgc2V0TWFudWFsRW50cmllcywgaW52aXRlZXMsIHNldEludml0ZWVzLCBzZXRQYXJlbnRJLCBpbmRleCwgcGFyZW50SW5kZXgpfT5cbiAgICAgICAgICBSZW1vdmVcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L1JlZ3VsYXJDYXJkPlxuICAgIDwvQm94PlxuXG4gIClcbn1cblxuZnVuY3Rpb24gTWFudWFsRW50cmllcyhwcm9wczogTWFudWFsRW50cmllc1R5cGVQcm9wcykge1xuICBjb25zdCBbcGFnZU9mZnNldCwgc2V0UGFnZU9mZnNldF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApXG5cbiAgY29uc3Qge2hlaWdodDogZnVsbEhlaWdodH0gPSBEaW1lbnNpb25zLmdldCgnd2luZG93JylcblxuICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKClcblxuICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gPSB7XG4gICAgZW50ZXI6IHRoZW1lLnRyYW5zaXRpb25zLmR1cmF0aW9uLmVudGVyaW5nU2NyZWVuLFxuICAgIGV4aXQ6IHRoZW1lLnRyYW5zaXRpb25zLmR1cmF0aW9uLmxlYXZpbmdTY3JlZW4sXG4gIH1cblxuXG5cbiAgY29uc3QgY2xvc2VNYW51YWwgPSBwcm9wcz8uY2xvc2VNYW51YWxcblxuICBjb25zdCBhZGROZXdFbnRyeSA9ICgpID0+IHtcblxuICAgIGFkZE9uZVRvTWFudWFsRW50cmllcyhcbiAgICAgIHByb3BzPy5tYW51YWxFbnRyaWVzLFxuICAgICAgcHJvcHM/LnNldE1hbnVhbEVudHJpZXMsXG4gICAgICBwcm9wcz8uaW52aXRlZXMsXG4gICAgICBwcm9wcz8uc2V0SW52aXRlZXMsXG4gICAgICBwcm9wcz8uc2V0UGFyZW50SSxcbiAgICAgIHByb3BzPy5ob3N0SWQsXG4gICAgICBwcm9wcz8uaG9zdE5hbWUsXG4gICAgICBwcm9wcz8ubWVldGluZ0lkLFxuICAgIClcbiAgfVxuICByZXR1cm4gKFxuICAgIDxCb3ggZmxleD17MX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSBtaW5IZWlnaHQ9XCI2NXZoXCIgbWF4SGVpZ2h0PVwiNjV2aFwiPlxuICAgICAgPEJveCBmbGV4PXsxfSBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICB7XG4gICAgICAgICAgcHJvcHM/Lm1hbnVhbEVudHJpZXM/Lmxlbmd0aCA+IDBcbiAgICAgICAgICA/IChcbiAgICAgICAgICAgIDxGbGF0TGlzdFxuICAgICAgICAgICAgICBkYXRhPXtwcm9wcz8ubWFudWFsRW50cmllc31cbiAgICAgICAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSwgaW5kZXggfSkgPT4gKFxuICAgICAgICAgICAgICAgIDxNYW51YWxFbnRyeVxuICAgICAgICAgICAgICAgICAgey4uLml0ZW19XG4gICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgICAgICBzZXRNYW51YWxFbnRyaWVzPXtwcm9wcz8uc2V0TWFudWFsRW50cmllc31cbiAgICAgICAgICAgICAgICAgIG1hbnVhbEVudHJpZXM9e3Byb3BzPy5tYW51YWxFbnRyaWVzfVxuICAgICAgICAgICAgICAgICAgc2V0UGFyZW50ST17cHJvcHM/LnNldFBhcmVudEl9XG4gICAgICAgICAgICAgICAgICBwYXJlbnRJbmRleD17cHJvcHM/Lmludml0ZWVzLmZpbmRJbmRleChhID0+IChhPy5pZCA9PT0gaXRlbT8uaWQpKX1cbiAgICAgICAgICAgICAgICAgIGludml0ZWVzPXtwcm9wcz8uaW52aXRlZXN9XG4gICAgICAgICAgICAgICAgICBzZXRJbnZpdGVlcz17cHJvcHM/LnNldEludml0ZWVzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIGtleUV4dHJhY3Rvcj17KGl0ZW0pID0+IGl0ZW0/LmlkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPEJveCBmbGV4PXsxfSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgPFRleHQgdmFyaWFudD1cInN1YmhlYWRlclwiPlxuICAgICAgICAgICAgICAgIEFkZCBhIE5ldyBFbnRyeVxuICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICA8Qm94IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgPFByZXNzYWJsZSBvblByZXNzPXtjbG9zZU1hbnVhbH0+XG4gICAgICAgICAgICA8VGV4dCBwPXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19IHZhcmlhbnQ9XCJidXR0b25MaW5rXCI+XG4gICAgICAgICAgICAgIENsb3NlXG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9QcmVzc2FibGU+XG4gICAgICAgIDwvQm94PlxuICAgICAgICAgIDxab29tXG4gICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgIHRpbWVvdXQ9e3RyYW5zaXRpb25EdXJhdGlvbn1cbiAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk6IGAke3RyYW5zaXRpb25EdXJhdGlvbi5leGl0fW1zYCxcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdW5tb3VudE9uRXhpdFxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPEZhYiBzeD17ZmFiU3R5bGUgYXMgU3hQcm9wc30gYXJpYS1sYWJlbD17J0FkZCd9IGNvbG9yPVwicHJpbWFyeVwiIG9uQ2xpY2s9e2FkZE5ld0VudHJ5fT5cbiAgICAgICAgICAgICAgPEFkZEljb24gc3g9e3sgY29sb3I6IHBpbmtbNTAwXSB9fSAgLz5cbiAgICAgICAgICAgIDwvRmFiPlxuICAgICAgICAgIDwvWm9vbT5cblxuICAgICAgPC9Cb3g+XG4gICAgPC9Cb3g+XG4gIClcbn1cblxuXG5mdW5jdGlvbiBDcmVhdGVNZWV0aW5nQXNzaXN0SW52aXRlZXMocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IFtpbnZpdGVlcywgc2V0SW52aXRlZXNdID0gdXNlU3RhdGU8TWVldGluZ0Fzc2lzdEludml0ZVR5cGVbXT4ocHJvcHM/Lmludml0ZWVzKVxuICBjb25zdCBbaXNNYW51YWwsIHNldElzTWFudWFsXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuICBjb25zdCBbbWFudWFsRW50cmllcywgc2V0TWFudWFsRW50cmllc10gPSB1c2VTdGF0ZTxNZWV0aW5nQXNzaXN0SW52aXRlVHlwZVtdPihbXSlcbiAgY29uc3QgW2lzQ29udGFjdHMsIHNldElzQ29udGFjdHNdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gIGNvbnN0IFtjb250YWN0cywgc2V0Q29udGFjdHNdID0gdXNlU3RhdGU8U2VsZWN0ZWRDb250YWN0VHlwZVtdPihbXSlcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuXG4gIGNvbnN0IHVzZXJJZCA9IHByb3BzPy51c2VySWRcbiAgY29uc3QgbWVldGluZ0lkID0gcHJvcHM/Lm1lZXRpbmdJZFxuICBjb25zdCBob3N0TmFtZSA9IHByb3BzPy5ob3N0TmFtZVxuXG4gIGNvbnN0IHNldFBhcmVudEludml0ZWVzID0gcHJvcHM/LnNldFBhcmVudEludml0ZWVzXG4gIGNvbnN0IGNsaWVudCA9IHByb3BzPy5jbGllbnRcblxuICBjb25zb2xlLmxvZyhpbnZpdGVlcywgJyBwYXJlbnRJbnZpdGVlcycpXG5cbiAgLy8gZ2V0IGFueSBjb250YWN0c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIWNsaWVudCB8fCAhdXNlcklkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgbmV3Q29udGFjdHMgPSBhd2FpdCBsaXN0VXNlckNvbnRhY3RzSGVscGVyKGNsaWVudCwgdXNlcklkKVxuICAgICAgXG4gICAgICBpZiAobmV3Q29udGFjdHMgJiYgbmV3Q29udGFjdHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2V0Q29udGFjdHMobmV3Q29udGFjdHNcbiAgICAgICAgICAubWFwKGMgPT4gKHsgLi4uYywgc2VsZWN0ZWQ6IGZhbHNlIH0gYXMgU2VsZWN0ZWRDb250YWN0VHlwZSkpXG4gICAgICAgICAgLy8gLmZpbHRlcihjID0+IChjPy5lbWFpbHM/LlswXT8udmFsdWU/Lmxlbmd0aCA+IDApKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSkoKVxuICB9LCBbY2xpZW50LCB1c2VySWRdKVxuXG4gIGNvbnN0IG9uTWFudWFsQ2hhbmdlID0gKCkgPT4ge1xuICAgIHNldElzQ29udGFjdHMoaXNNYW51YWwpXG4gICAgc2V0SXNNYW51YWwoIWlzTWFudWFsKVxuICB9XG5cbiAgY29uc3Qgb25Db250YWN0c0NoYW5nZSA9ICgpID0+IHtcbiAgICBzZXRJc01hbnVhbChpc0NvbnRhY3RzKVxuICAgIHNldElzQ29udGFjdHMoIWlzQ29udGFjdHMpXG4gIH1cblxuICBjb25zdCBjbG9zZUNvbnRhY3RzID0gKCkgPT4gc2V0SXNDb250YWN0cyhmYWxzZSlcblxuICBjb25zdCBjbG9zZU1hbnVhbCA9ICgpID0+IHNldElzTWFudWFsKGZhbHNlKVxuXG4gIGNvbnN0IGFjdGlvbnMgPSBbXG4gICAgICB7IGljb246IDxJbXBvcnRDb250YWN0c0ljb24gY29sb3I9XCJzZWNvbmRhcnlcIiAvPiwgbmFtZTogJ0ltcG9ydCBDb250YWN0cycsIG1ldGhvZDogb25Db250YWN0c0NoYW5nZSB9LFxuICAgICAgeyBpY29uOiA8S2V5Ym9hcmRJY29uIGNvbG9yPVwic2Vjb25kYXJ5XCIgLz4sIG5hbWU6ICdNYW51YWwgRW50cnknLCBtZXRob2Q6IG9uTWFudWFsQ2hhbmdlIH0sXG5cbiAgXVxuXG4gIGlmIChpc01hbnVhbCkge1xuICAgIHJldHVybiAoXG4gICAgICA8TWFudWFsRW50cmllc1xuICAgICAgICBzZXRNYW51YWxFbnRyaWVzPXtzZXRNYW51YWxFbnRyaWVzfVxuICAgICAgICBtYW51YWxFbnRyaWVzPXttYW51YWxFbnRyaWVzfVxuICAgICAgICBpbnZpdGVlcz17aW52aXRlZXN9XG4gICAgICAgIHNldEludml0ZWVzPXtzZXRJbnZpdGVlc31cbiAgICAgICAgc2V0UGFyZW50ST17c2V0UGFyZW50SW52aXRlZXN9XG4gICAgICAgIGNsb3NlTWFudWFsPXtjbG9zZU1hbnVhbH1cbiAgICAgICAgaG9zdElkPXt1c2VySWR9XG4gICAgICAgIGhvc3ROYW1lPXtob3N0TmFtZX1cbiAgICAgICAgbWVldGluZ0lkPXttZWV0aW5nSWR9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIGlmIChpc0NvbnRhY3RzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDb250YWN0c1xuICAgICAgICBjb250YWN0cz17Y29udGFjdHN9XG4gICAgICAgIHNldFBhcmVudEk9e3NldFBhcmVudEludml0ZWVzfVxuICAgICAgICBpbnZpdGVlcz17aW52aXRlZXN9XG4gICAgICAgIHNldEludml0ZWVzPXtzZXRJbnZpdGVlc31cbiAgICAgICAgY2xvc2VDb250YWN0cz17Y2xvc2VDb250YWN0c31cbiAgICAgICAgaG9zdElkPXt1c2VySWR9XG4gICAgICAgIGhvc3ROYW1lPXtob3N0TmFtZX1cbiAgICAgICAgbWVldGluZ0lkPXttZWV0aW5nSWR9XG4gICAgICAgIGNsaWVudD17Y2xpZW50fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICAgcmV0dXJuIChcbiAgIDxCb3ggZmxleD17MX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSBtaW5IZWlnaHQ9XCI2NXZoXCIgbWF4SGVpZ2h0PVwiNjV2aFwiPlxuICAgICB7XG4gICAgICAgaW52aXRlZXM/Lmxlbmd0aCA+IDBcbiAgICAgICA/IChcbiAgICAgICAgIDxGbGF0TGlzdFxuICAgICAgICAgICBkYXRhPXtpbnZpdGVlc31cbiAgICAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSB9KSA9PiAoXG4gICAgICAgICAgICA8Qm94PlxuICAgICAgICAgICAgICA8TGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGU9e3sgXG4gICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBwYWxldHRlLndoaXRlLFxuICAgICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbVdpZHRoOiBTdHlsZVNoZWV0LmhhaXJsaW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IHBhbGV0dGUuZGFya0dyYXlcbiAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TGlzdEl0ZW0uQ29udGVudD5cbiAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbS5UaXRsZSBzdHlsZT17eyBjb2xvcjogcGFsZXR0ZT8udGV4dEJsYWNrLCBmb250V2VpZ2h0OiAnYm9sZCcgfX0+XG4gICAgICAgICAgICAgICAgICAgIHtpdGVtPy5uYW1lfVxuICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbS5UaXRsZT5cbiAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbS5TdWJ0aXRsZSBzdHlsZT17eyBjb2xvcjogcGFsZXR0ZT8udGV4dEJsYWNrLCB9fT5cbiAgICAgICAgICAgICAgICAgICAge2l0ZW0/LmVtYWlsfVxuICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbS5TdWJ0aXRsZT5cbiAgICAgICAgICAgICAgICA8L0xpc3RJdGVtLkNvbnRlbnQ+XG4gICAgICAgICAgICAgIDwvTGlzdEl0ZW0+XG4gICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICl9XG4gICAgICAgICAgIGtleUV4dHJhY3Rvcj17KGl0ZW0pID0+IGl0ZW0/LmlkfVxuICAgICAgICAgLz5cbiAgICAgICApIDogKFxuICAgICAgICAgPEJveCBmbGV4PXsxfSBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgPFRleHQgdmFyaWFudD1cInN1YmhlYWRlclwiPlxuICAgICAgICAgICAgIEFkZCBhbiBpbnZpdGVlIGZyb20geW91ciBjb250YWN0cyBvciBtYW51YWxseSBlbnRlciBvbmVcbiAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgPC9Cb3g+XG4gICAgICAgKVxuICAgICB9XG4gICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHotMjAgcG9pbnRlci1ldmVudHMtbm9uZVwiPlxuICAgICAgICA8U3BlZWREaWFsXG4gICAgICAgICAgICBhcmlhTGFiZWw9XCJDYWxlbmRhciBTcGVlZERpYWxcIlxuICAgICAgICAgICAgc3g9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIGJvdHRvbTogMjQsIHJpZ2h0OiAyNCwgekluZGV4OiAnc3BlZWREaWFsJyB9fVxuICAgICAgICAgICAgaWNvbj17PFNwZWVkRGlhbEljb24gaWNvbj17PEVkaXRJY29uIC8+fSBzeD17eyBjb2xvcjogcGlua1s1MDBdIH19IC8+fVxuICAgICAgICA+XG4gICAgICAgICAgICB7YWN0aW9ucy5tYXAoKGFjdGlvbikgPT4gKFxuICAgICAgICAgICAgICAgIDxTcGVlZERpYWxBY3Rpb25cbiAgICAgICAgICAgICAgICAgICAga2V5PXthY3Rpb24ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgaWNvbj17YWN0aW9uLmljb259XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBUaXRsZT17YWN0aW9uLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIEZhYlByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBhY3Rpb24ubWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgPC9TcGVlZERpYWw+XG4gICAgPC9kaXY+XG4gICA8L0JveD5cbiApXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3JlYXRlTWVldGluZ0Fzc2lzdEludml0ZWVzXG4iXX0=