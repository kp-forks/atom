"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const date_utils_1 = require("@lib/date-utils");
// import DatePicker from 'react-native-date-picker'
// import DateTimePicker from 'react-datetime-picker/dist/entry.nostyle'
const react_2 = require("@chakra-ui/react");
const TextField_1 = __importDefault(require("@components/TextField"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const react_native_1 = require("react-native");
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../../config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
const dark = react_native_1.Appearance.getColorScheme() === 'dark';
function CreateEventBaseStep(props) {
    const [title, setTitle] = (0, react_1.useState)(props?.title);
    const [notes, setNotes] = (0, react_1.useState)(props?.notes);
    const [location, setLocation] = (0, react_1.useState)(props?.location);
    const [startDate, setStartDate] = (0, react_1.useState)(props?.startDate);
    const [endDate, setEndDate] = (0, react_1.useState)(props?.endDate);
    const [isStartDatePickerVisible, setIsStartDatePickerVisible] = (0, react_1.useState)(false);
    const [isEndDatePickerVisible, setIsEndDatePickerVisible] = (0, react_1.useState)(false);
    const [pageOffset, setPageOffset] = (0, react_1.useState)(0);
    const { height: fullHeight } = react_native_1.Dimensions.get('window');
    const setParentTitle = props?.setParentTitle;
    const setParentNotes = props?.setParentNotes;
    const setParentLocation = props?.setParentLocation;
    const setParentEndDate = props?.setParentEndDate;
    const setParentStartDate = props?.setParentStartDate;
    const onLayout = ({ nativeEvent: { layout: { height: height1 }, }, }) => {
        const pageOffset1 = fullHeight - height1;
        setPageOffset(pageOffset1);
    };
    // useEffect(() => {}, [])
    const changeTitle = (value) => {
        setTitle(value);
        setParentTitle(value);
    };
    const changeNotes = (value) => {
        setNotes(value);
        setParentNotes(value);
    };
    const changeLocation = (value) => {
        setLocation(value);
        setParentLocation(value);
    };
    const changeStartDate = (value) => {
        setStartDate(value);
        setParentStartDate(value);
    };
    const changeEndDate = (value) => {
        setEndDate(value);
        setParentEndDate(value);
    };
    const showStartDatePicker = () => {
        setIsStartDatePickerVisible(true);
    };
    const hideStartDatePicker = () => {
        setIsStartDatePickerVisible(false);
    };
    const showEndDatePicker = () => {
        setIsEndDatePickerVisible(true);
    };
    const hideEndDatePicker = () => {
        setIsEndDatePickerVisible(false);
    };
    return ((0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, style: { width: '100%' }, onLayout: onLayout, children: (0, jsx_runtime_1.jsx)(react_native_1.ScrollView, { style: { flex: 1, width: '100%' }, contentContainerStyle: { alignItems: 'center' }, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, justifyContent: "center", alignItems: "center", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, style: { width: '60%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "Start" }), (0, jsx_runtime_1.jsx)(react_2.Input, { placeholder: "Select Date and Time", size: "md", type: "datetime-local", onChange: (e) => {
                                    const durationMinutes = date_utils_1.dayjs.duration((0, date_utils_1.dayjs)(endDate).diff((0, date_utils_1.dayjs)(startDate))).asMinutes();
                                    const newEndDate = (0, date_utils_1.dayjs)(e?.target?.value, "YYYY-MM-DDTHH:mm").add(durationMinutes, 'minutes').toDate();
                                    changeStartDate((0, date_utils_1.dayjs)(e?.target?.value, "YYYY-MM-DDTHH:mm").toDate());
                                    changeEndDate(newEndDate);
                                }, value: (0, date_utils_1.dayjs)(startDate).format("YYYY-MM-DDTHH:mm") })] }), (0, jsx_runtime_1.jsxs)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, style: { width: '60%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: "End" }), (0, jsx_runtime_1.jsx)(react_2.Input, { placeholder: "Select Date and Time", size: "md", type: "datetime-local", onChange: (e) => {
                                    changeEndDate((0, date_utils_1.dayjs)(e?.target?.value, "YYYY-MM-DDTHH:mm").toDate());
                                }, value: (0, date_utils_1.dayjs)(endDate).format("YYYY-MM-DDTHH:mm") })] }), (0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Title", placeholder: "title", onChange: (e) => changeTitle(e?.target?.value), value: title || props?.title, style: { width: '100%' } }) }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flex: 3, p: { phone: 's', tablet: 'm' }, flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Notes", onChange: (e) => changeNotes(e?.target?.value), value: notes || props?.notes, style: { width: '100%' }, multiline: true, numberOfLines: 3 }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { flex: 1, p: { phone: 's', tablet: 'm' }, flexDirection: "row", justifyContent: "flex-start", alignItems: "center", style: { width: '60%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Location", placeholder: "location if any", onChange: (e) => changeLocation(e?.target?.value), value: location || props?.location, style: { width: '100%' } }) })] }) }) }));
}
exports.default = CreateEventBaseStep;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3JlYXRlRXZlbnRCYXNlU3RlcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkNyZWF0ZUV2ZW50QmFzZVN0ZXAudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBa0JBLGdEQXFDQzs7QUF2REQsaUNBSWM7QUFDZCxnREFBdUM7QUFDdkMsb0RBQW9EO0FBQ3BELHdFQUF3RTtBQUN4RSw0Q0FBd0M7QUFDeEMsc0VBQTZDO0FBQzdDLGlFQUF3QztBQUN4QyxtRUFBMEM7QUFDMUMsK0NBQXdGO0FBRXhGLHdFQUE4QztBQUM5QyxpRUFBNkQ7QUFDN0QsOEVBQXFEO0FBRTlDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQWlEO0lBQ2xHLDBGQUEwRjtJQUMxRixzQ0FBc0M7SUFDdEMseUVBQXlFO0lBQ3pFLDBCQUFlLENBQUMsSUFBSSxDQUFDLElBQUEsNkJBQWEsR0FBRSxDQUFDLENBQUE7SUFDckMsSUFBSSxPQUFPLENBQUE7SUFDWCxJQUFJLENBQUM7UUFDSCxPQUFPLEdBQUcsTUFBTSxpQkFBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO1lBQzNDLDZCQUE2QixFQUFFLEtBQUs7Z0JBQ2xDLE9BQU8sRUFBRSxDQUFBO1lBQ1gsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFBQyxPQUFPLEdBQVEsRUFBRSxDQUFDO1FBQ2xCLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ2pELE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLEVBQUUsQ0FBQTtRQUN4RCxDQUFDO2FBQU0sSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ25ELGtFQUFrRTtZQUNsRSxxRUFBcUU7WUFDckUsT0FBTyxFQUFFLEtBQUssRUFB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LENBQ1AsQ0FBQTtBQUNILENBQUM7QUFFRCxrQkFBZSxtQkFBbUIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge1xuICB1c2VTdGF0ZSxcbiAgRGlzcGF0Y2gsXG4gIFNldFN0YXRlQWN0aW9uLFxufSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGRheWpzIH0gZnJvbSAnQGxpYi9kYXRlLXV0aWxzJ1xuLy8gaW1wb3J0IERhdGVQaWNrZXIgZnJvbSAncmVhY3QtbmF0aXZlLWRhdGUtcGlja2VyJ1xuLy8gaW1wb3J0IERhdGVUaW1lUGlja2VyIGZyb20gJ3JlYWN0LWRhdGV0aW1lLXBpY2tlci9kaXN0L2VudHJ5Lm5vc3R5bGUnXG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0BjaGFrcmEtdWkvcmVhY3QnXG5pbXBvcnQgVGV4dEZpZWxkIGZyb20gJ0Bjb21wb25lbnRzL1RleHRGaWVsZCdcbmltcG9ydCBCb3ggZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL0JveCdcbmltcG9ydCBUZXh0IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9UZXh0J1xuaW1wb3J0IHsgQXBwZWFyYW5jZSwgRGltZW5zaW9ucywgUHJlc3NhYmxlLCBTY3JvbGxWaWV3LCBTdHlsZVNoZWV0IH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHN1cGVydG9rZW5zTm9kZSBmcm9tICdzdXBlcnRva2Vucy1ub2RlJ1xuaW1wb3J0IHsgYmFja2VuZENvbmZpZyB9IGZyb20gJy4uLy4uLy4uL2NvbmZpZy9iYWNrZW5kQ29uZmlnJ1xuaW1wb3J0IFNlc3Npb24gZnJvbSAnc3VwZXJ0b2tlbnMtbm9kZS9yZWNpcGUvc2Vzc2lvbidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzIH06IHsgcmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UgfSkge1xuICAvLyBOb3RpY2UgaG93IHRoZSBzZXJ2ZXIgdXNlcyBgQVBJYCBmcm9tIGB3aXRoU1NSQ29udGV4dGAsIGluc3RlYWQgb2YgdGhlIHRvcC1sZXZlbCBgQVBJYC5cbiAgLy8gY29uc3QgU1NSID0gd2l0aFNTUkNvbnRleHQoeyByZXEgfSlcbiAgLy8gdGhpcyBydW5zIG9uIHRoZSBiYWNrZW5kLCBzbyB3ZSBtdXN0IGNhbGwgaW5pdCBvbiBzdXBlcnRva2Vucy1ub2RlIFNES1xuICBzdXBlcnRva2Vuc05vZGUuaW5pdChiYWNrZW5kQ29uZmlnKCkpXG4gIGxldCBzZXNzaW9uXG4gIHRyeSB7XG4gICAgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb24uZ2V0U2Vzc2lvbihyZXEsIHJlcywge1xuICAgICAgb3ZlcnJpZGVHbG9iYWxDbGFpbVZhbGlkYXRvcnM6IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlRSWV9SRUZSRVNIX1RPS0VOKSB7XG4gICAgICByZXR1cm4geyBwcm9wczogeyBmcm9tU3VwZXJ0b2tlbnM6ICduZWVkcy1yZWZyZXNoJyB9IH1cbiAgICB9IGVsc2UgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlVOQVVUSE9SSVNFRCkge1xuICAgICAgLy8gdGhpcyB3aWxsIGZvcmNlIHRoZSBmcm9udGVuZCB0byB0cnkgYW5kIHJlZnJlc2ggd2hpY2ggd2lsbCBmYWlsXG4gICAgICAvLyBjbGVhcmluZyBhbGwgY29va2llcyBhbmQgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIGxvZ2luIHNjcmVlbi5cbiAgICAgIHJldHVybiB7IHByb3BzOiB7IGZyb21TdXBlcnRva2VuczogJ25lZWRzLXJlZnJlc2gnIH0gfVxuICAgIH1cbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIGlmICghc2Vzc2lvbj8uZ2V0VXNlcklkKCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgZGVzdGluYXRpb246ICcvVXNlci9Mb2dpbi9Vc2VyTG9naW4nLFxuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBzdWI6IHNlc3Npb24uZ2V0VXNlcklkKCksXG4gICAgfVxuICB9XG59XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHRpdGxlOiBzdHJpbmcsXG4gIG5vdGVzOiBzdHJpbmcsXG4gIGxvY2F0aW9uOiBzdHJpbmcsXG4gIHN0YXJ0RGF0ZTogRGF0ZSxcbiAgZW5kRGF0ZTogRGF0ZSxcbiAgc2V0UGFyZW50VGl0bGU6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPHN0cmluZz4+LFxuICBzZXRQYXJlbnROb3RlczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248c3RyaW5nPj4sXG4gIHNldFBhcmVudExvY2F0aW9uOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxzdHJpbmc+PixcbiAgc2V0UGFyZW50U3RhcnREYXRlOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxEYXRlPj4sXG4gIHNldFBhcmVudEVuZERhdGU6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPERhdGU+Pixcbn1cblxuY29uc3QgZGFyayA9IEFwcGVhcmFuY2UuZ2V0Q29sb3JTY2hlbWUoKSA9PT0gJ2RhcmsnXG5cbmZ1bmN0aW9uIENyZWF0ZUV2ZW50QmFzZVN0ZXAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IFt0aXRsZSwgc2V0VGl0bGVdID0gdXNlU3RhdGU8c3RyaW5nPihwcm9wcz8udGl0bGUpXG4gIGNvbnN0IFtub3Rlcywgc2V0Tm90ZXNdID0gdXNlU3RhdGU8c3RyaW5nPihwcm9wcz8ubm90ZXMpXG4gIGNvbnN0IFtsb2NhdGlvbiwgc2V0TG9jYXRpb25dID0gdXNlU3RhdGU8c3RyaW5nPihwcm9wcz8ubG9jYXRpb24pXG4gIGNvbnN0IFtzdGFydERhdGUsIHNldFN0YXJ0RGF0ZV0gPSB1c2VTdGF0ZTxEYXRlPihwcm9wcz8uc3RhcnREYXRlKVxuICBjb25zdCBbZW5kRGF0ZSwgc2V0RW5kRGF0ZV0gPSB1c2VTdGF0ZTxEYXRlPihwcm9wcz8uZW5kRGF0ZSlcbiAgY29uc3QgW2lzU3RhcnREYXRlUGlja2VyVmlzaWJsZSwgc2V0SXNTdGFydERhdGVQaWNrZXJWaXNpYmxlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuICBjb25zdCBbaXNFbmREYXRlUGlja2VyVmlzaWJsZSwgc2V0SXNFbmREYXRlUGlja2VyVmlzaWJsZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSlcbiAgY29uc3QgW3BhZ2VPZmZzZXQsIHNldFBhZ2VPZmZzZXRdID0gdXNlU3RhdGU8bnVtYmVyPigwKVxuXG4gIGNvbnN0IHsgaGVpZ2h0OiBmdWxsSGVpZ2h0IH0gPSBEaW1lbnNpb25zLmdldCgnd2luZG93JylcbiAgXG5cbiAgY29uc3Qgc2V0UGFyZW50VGl0bGUgPSBwcm9wcz8uc2V0UGFyZW50VGl0bGVcbiAgY29uc3Qgc2V0UGFyZW50Tm90ZXMgPSBwcm9wcz8uc2V0UGFyZW50Tm90ZXNcbiAgY29uc3Qgc2V0UGFyZW50TG9jYXRpb24gPSBwcm9wcz8uc2V0UGFyZW50TG9jYXRpb25cbiAgY29uc3Qgc2V0UGFyZW50RW5kRGF0ZSA9IHByb3BzPy5zZXRQYXJlbnRFbmREYXRlXG4gIGNvbnN0IHNldFBhcmVudFN0YXJ0RGF0ZSA9IHByb3BzPy5zZXRQYXJlbnRTdGFydERhdGVcblxuXG5cbiAgY29uc3Qgb25MYXlvdXQgPSAoe1xuICAgICAgICBuYXRpdmVFdmVudDoge1xuICAgICAgICBsYXlvdXQ6IHtoZWlnaHQ6IGhlaWdodDF9LFxuICAgICAgfSxcbiAgfTogeyBuYXRpdmVFdmVudDogeyBsYXlvdXQ6IHsgaGVpZ2h0OiBudW1iZXJ9fX0pID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VPZmZzZXQxID0gZnVsbEhlaWdodCAtIGhlaWdodDFcbiAgICAgIHNldFBhZ2VPZmZzZXQocGFnZU9mZnNldDEpXG4gIH1cblxuICAvLyB1c2VFZmZlY3QoKCkgPT4ge30sIFtdKVxuXG4gIGNvbnN0IGNoYW5nZVRpdGxlID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBzZXRUaXRsZSh2YWx1ZSlcbiAgICBzZXRQYXJlbnRUaXRsZSh2YWx1ZSlcbiAgfVxuXG4gIGNvbnN0IGNoYW5nZU5vdGVzID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBzZXROb3Rlcyh2YWx1ZSlcbiAgICBzZXRQYXJlbnROb3Rlcyh2YWx1ZSlcbiAgfVxuXG4gIGNvbnN0IGNoYW5nZUxvY2F0aW9uID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBzZXRMb2NhdGlvbih2YWx1ZSlcbiAgICBzZXRQYXJlbnRMb2NhdGlvbih2YWx1ZSlcbiAgfVxuXG4gIGNvbnN0IGNoYW5nZVN0YXJ0RGF0ZSA9ICh2YWx1ZTogRGF0ZSkgPT4ge1xuICAgIHNldFN0YXJ0RGF0ZSh2YWx1ZSlcbiAgICBzZXRQYXJlbnRTdGFydERhdGUodmFsdWUpXG4gIH1cblxuICBjb25zdCBjaGFuZ2VFbmREYXRlID0gKHZhbHVlOiBEYXRlKSA9PiB7XG4gICAgc2V0RW5kRGF0ZSh2YWx1ZSlcbiAgICBzZXRQYXJlbnRFbmREYXRlKHZhbHVlKVxuICB9XG5cbiAgY29uc3Qgc2hvd1N0YXJ0RGF0ZVBpY2tlciA9ICgpID0+IHtcbiAgICBzZXRJc1N0YXJ0RGF0ZVBpY2tlclZpc2libGUodHJ1ZSlcbiAgfVxuXG4gIGNvbnN0IGhpZGVTdGFydERhdGVQaWNrZXIgPSAoKSA9PiB7XG4gICAgc2V0SXNTdGFydERhdGVQaWNrZXJWaXNpYmxlKGZhbHNlKVxuICB9XG5cbiAgY29uc3Qgc2hvd0VuZERhdGVQaWNrZXIgPSAoKSA9PiB7XG4gICAgc2V0SXNFbmREYXRlUGlja2VyVmlzaWJsZSh0cnVlKVxuICB9XG5cbiAgY29uc3QgaGlkZUVuZERhdGVQaWNrZXIgPSAoKSA9PiB7XG4gICAgc2V0SXNFbmREYXRlUGlja2VyVmlzaWJsZShmYWxzZSlcbiAgfVxuXG5cblxuICByZXR1cm4gKFxuICAgIDxCb3ggZmxleD17MX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSBvbkxheW91dD17b25MYXlvdXR9PlxuICAgICAgICA8U2Nyb2xsVmlldyBzdHlsZT17eyBmbGV4OiAxLCB3aWR0aDogJzEwMCUnIH19IGNvbnRlbnRDb250YWluZXJTdHlsZT17eyBhbGlnbkl0ZW1zOiAnY2VudGVyJ319PiBcbiAgICAgICAgICA8Qm94IGZsZXg9ezF9IGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgIDxCb3ggZmxleD17MX0gcD17eyBwaG9uZTogJ3MnLCB0YWJsZXQ6ICdtJyB9fSBzdHlsZT17eyB3aWR0aDogJzYwJSd9fT5cbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICBTdGFydFxuICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBEYXRlIGFuZCBUaW1lXCJcbiAgICAgICAgICAgICAgICBzaXplPVwibWRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRldGltZS1sb2NhbFwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbk1pbnV0ZXMgPSBkYXlqcy5kdXJhdGlvbihkYXlqcyhlbmREYXRlKS5kaWZmKGRheWpzKHN0YXJ0RGF0ZSkpKS5hc01pbnV0ZXMoKVxuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RW5kRGF0ZSA9IGRheWpzKGU/LnRhcmdldD8udmFsdWUsIFwiWVlZWS1NTS1ERFRISDptbVwiKS5hZGQoZHVyYXRpb25NaW51dGVzLCAnbWludXRlcycpLnRvRGF0ZSgpXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VTdGFydERhdGUoZGF5anMoZT8udGFyZ2V0Py52YWx1ZSwgXCJZWVlZLU1NLUREVEhIOm1tXCIpLnRvRGF0ZSgpKVxuICAgICAgICAgICAgICAgICAgY2hhbmdlRW5kRGF0ZShuZXdFbmREYXRlKVxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17ZGF5anMoc3RhcnREYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREVEhIOm1tXCIpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4PXsxfSBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19IHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwib3B0aW9uSGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICBFbmRcbiAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBEYXRlIGFuZCBUaW1lXCJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJtZFwiXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUVuZERhdGUoZGF5anMoZT8udGFyZ2V0Py52YWx1ZSwgXCJZWVlZLU1NLUREVEhIOm1tXCIpLnRvRGF0ZSgpKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB9fSBcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtkYXlqcyhlbmREYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREVEhIOm1tXCIpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggZmxleD17MX0gcD17eyBwaG9uZTogJ3MnLCB0YWJsZXQ6ICdtJyB9fSBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICA8Qm94PlxuICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGl0bGVcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ0aXRsZVwiXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiBjaGFuZ2VUaXRsZShlPy50YXJnZXQ/LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aXRsZSB8fCBwcm9wcz8udGl0bGV9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBmbGV4PXszfSBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19IGZsZXhEaXJlY3Rpb249XCJyb3dcIiBqdXN0aWZ5Q29udGVudD1cImZsZXgtc3RhcnRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICc2MCUnfX0+XG4gICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5vdGVzXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiBjaGFuZ2VOb3RlcyhlPy50YXJnZXQ/LnZhbHVlKX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17bm90ZXMgfHwgcHJvcHM/Lm5vdGVzfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJSd9fVxuICAgICAgICAgICAgICAgIG11bHRpbGluZVxuICAgICAgICAgICAgICAgIG51bWJlck9mTGluZXM9ezN9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggZmxleD17MX0gcD17eyBwaG9uZTogJ3MnLCB0YWJsZXQ6ICdtJyB9fSBmbGV4RGlyZWN0aW9uPVwicm93XCIganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHN0eWxlPXt7IHdpZHRoOiAnNjAlJ319PlxuICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJMb2NhdGlvblwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJsb2NhdGlvbiBpZiBhbnlcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZTogeyB0YXJnZXQ6IHsgdmFsdWU6IHN0cmluZyB9IH0pID0+IGNoYW5nZUxvY2F0aW9uKGU/LnRhcmdldD8udmFsdWUpfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtsb2NhdGlvbiB8fCBwcm9wcz8ubG9jYXRpb259XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJ319XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICA8L1Njcm9sbFZpZXc+XG4gICAgPC9Cb3g+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3JlYXRlRXZlbnRCYXNlU3RlcFxuXG4vKiogZW5kICovXG4iXX0=