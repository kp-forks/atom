"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
/* eslint-disable react-hooks/exhaustive-deps */
const react_1 = require("@chakra-ui/react");
const Button_1 = __importDefault(require("@components/Button"));
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const ChatHelper_1 = require("@lib/Chat/ChatHelper");
const date_utils_1 = require("@lib/date-utils");
const constants_1 = require("@lib/GPT/MeetingRequest/constants");
const theme_1 = require("@lib/theme/theme");
const user_context_1 = require("@lib/user-context");
const session_1 = __importDefault(require("supertokens-web-js/recipe/session"));
const router_1 = require("next/router");
const react_2 = require("react");
const io_1 = require("react-icons/io");
const react_native_1 = require("react-native");
const ScrollContainer_1 = __importDefault(require("@components/chat/ScrollContainer"));
const Message_1 = __importDefault(require("@components/chat/Message"));
const ChatInput_1 = __importDefault(require("@components/chat/ChatInput"));
const googleCalendarHelper_1 = require("@lib/calendarLib/googleCalendarHelper");
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("../../../config/backendConfig");
const session_2 = __importDefault(require("supertokens-node/recipe/session"));
const OnBoardHelper_1 = require("@lib/OnBoard/OnBoardHelper");
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_2.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_2.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_2.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
const styles = {
    container: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        width: '100%',
    },
    duration: {
        fontSize: '21px',
        lineHeight: '28px',
    },
    centeredView: {
        flex: 1,
        justifyContent: "center",
        alignItems: "center",
        marginTop: 22,
        marginBottom: 22,
    },
    modalView: {
        flex: 1,
        alignItems: "center",
    },
};
let socket;
function UserViewChat() {
    const [chatHistory, setChatHistory] = (0, react_2.useState)([{
            role: 'assistant',
            content: 'How can I help you today?',
            id: 0,
            date: (0, date_utils_1.dayjs)().format(),
        }]);
    const [messageHistory, setMessageHistory] = (0, react_2.useState)([{
            skill: 'pending',
            query: 'pending',
            messages: [],
        }]);
    const [isNewSession, setIsNewSession] = (0, react_2.useState)(false);
    const [isLoading, setIsLoading] = (0, react_2.useState)(false);
    // const [token, setToken] = useState<string>('')
    // const [socket, setSocket] = useState<WebSocket>()
    const [formData, setFormData] = (0, react_2.useState)({
        type: 'select',
        value: date_utils_1.dayjs.tz.guess(),
        name: date_utils_1.dayjs.tz.guess(),
    });
    const [receiverTimezone, setReceiverTimezone] = (0, react_2.useState)(date_utils_1.dayjs.tz.guess());
    const [search, setSearch] = (0, react_2.useState)('');
    const [isSelect, setIsSelect] = (0, react_2.useState)(false);
    const [checkBoxArray, setCheckBoxArray] = (0, react_2.useState)([]);
    const [filteredTimezones, setFilteredTimezones] = (0, react_2.useState)([]);
    const [isForm, setIsForm] = (0, react_2.useState)(false);
    const [reconnect, setReconnect] = (0, react_2.useState)(false);
    const [htmlEmail, setHtmlEmail] = (0, react_2.useState)('');
    // formattedTimezones: TimezoneObjectType[]
    const router = (0, router_1.useRouter)();
    const { sub, client } = (0, user_context_1.useAppContext)();
    const userId = sub;
    const toast = (0, react_1.useToast)();
    const { dispatchAgentCommand } = useAgentAudioControl(); // Import from context
    // renew push notifictions
    (0, react_2.useEffect)(() => {
        if (userId) {
            (async () => (0, googleCalendarHelper_1.checkIfCalendarWebhookExpired)(client, userId))();
        }
    }, [client, userId]);
    // check onboarding
    (0, react_2.useEffect)(() => {
        (async () => {
            if (!sub) {
                return;
            }
            const user_preferenceDoc = await (0, OnBoardHelper_1.getUserPreference)(client, sub);
            console.log(user_preferenceDoc?.onBoarded, ' user_preferenceDoc?.onBoarded');
            if (!user_preferenceDoc?.onBoarded) {
                console.log(' no user preference created');
                return router.push({ pathname: '/OnBoard/UserOnBoard' });
            }
        })();
    }, [client, router, sub]);
    (0, react_2.useEffect)(() => {
        // This effect manages the WebSocket connection lifecycle.
        let currentSocketInstance = null;
        const connectAndSetupSocket = async () => {
            try {
                const access_token = await session_1.default.getAccessToken();
                if (!access_token) {
                    console.warn("UserViewChat: No access token, WebSocket connection not attempted.");
                    return;
                }
                const newSocket = await (0, ChatHelper_1.createChatSocket)(access_token);
                if (newSocket) {
                    socket = newSocket; // Assign to module-level variable (as per existing pattern)
                    currentSocketInstance = newSocket; // Local instance for this effect's cleanup
                    console.log("UserViewChat: WebSocket connection initiated.");
                    setReconnect(false);
                    newSocket.onopen = (event) => {
                        console.log("UserViewChat: WebSocket connection established.", event);
                    };
                    newSocket.onmessage = async (event) => {
                        console.log("UserViewChat: Raw message from server: ", event.data);
                        try {
                            const rawData = JSON.parse(event.data);
                            // TYPE GUARD for AgentAudioCommand
                            // Assuming AgentClientCommand has 'action' and 'command_id'
                            // and a wrapper type like { type: 'AGENT_COMMAND', payload: AgentAudioCommand }
                            if (rawData && rawData.type === 'AGENT_COMMAND' &&
                                rawData.payload && typeof rawData.payload.action === 'string' &&
                                typeof rawData.payload.command_id === 'string') {
                                const commandPayload = rawData.payload; // AgentAudioCommand needs to be imported or defined
                                console.log("UserViewChat: Received AGENT_COMMAND for audio:", commandPayload);
                                if (dispatchAgentCommand) {
                                    dispatchAgentCommand(commandPayload);
                                }
                                else {
                                    console.error("UserViewChat: dispatchAgentCommand from AgentAudioControlContext is not available.");
                                }
                                return; // Command handled
                            }
                            if (rawData === 'ping') {
                                console.log("UserViewChat: Received ping.");
                                return;
                            }
                            // Process general agent messages (expected to include text, and optionally structuredData, audioUrl)
                            const agentMessagePayload = rawData; // Define a proper type for this payload later
                            const newAssistantMessage = {
                                id: chatHistory.length, // Placeholder for ID, ideally replace "working..."
                                role: 'assistant',
                                content: agentMessagePayload.text || "Received a message with no text.",
                                date: (0, date_utils_1.dayjs)().format(),
                                audioUrl: agentMessagePayload.audioUrl,
                            };
                            if (agentMessagePayload.structuredData && agentMessagePayload.structuredData.displayType === 'semantic_search_results') {
                                newAssistantMessage.customComponentType = 'semantic_search_results';
                                newAssistantMessage.customComponentProps = { results: agentMessagePayload.structuredData.data };
                                newAssistantMessage.content = agentMessagePayload.structuredData.summaryText || agentMessagePayload.text;
                                console.log("UserViewChat (WebSocket): Populated customComponent for semantic_search_results", newAssistantMessage);
                            }
                            else if (agentMessagePayload.structuredData && agentMessagePayload.structuredData.displayType === 'meeting_prep_results') {
                                newAssistantMessage.customComponentType = 'meeting_prep_results';
                                // Assuming the 'data' field in structuredData contains the AggregatedPrepResults object
                                newAssistantMessage.customComponentProps = { briefing: agentMessagePayload.structuredData.data };
                                // Use a summary text or the original text if no specific summary is provided for the component
                                newAssistantMessage.content = agentMessagePayload.structuredData.summaryText || agentMessagePayload.text || "Here's your meeting preparation:";
                                console.log("UserViewChat (WebSocket): Populated customComponent for meeting_prep_results", newAssistantMessage);
                            }
                            // Update chatHistory: Replace "working..." or append
                            setChatHistory(prevChatHistory => {
                                const reversePrevChat = [...prevChatHistory].reverse();
                                const workingIndex = reversePrevChat.findIndex(m => m.role === 'assistant' && m.content === 'working ...');
                                if (workingIndex !== -1) {
                                    const originalIndex = prevChatHistory.length - 1 - workingIndex;
                                    const updatedHistory = [...prevChatHistory];
                                    updatedHistory[originalIndex] = { ...newAssistantMessage, id: prevChatHistory[originalIndex].id }; // Preserve ID
                                    return updatedHistory;
                                }
                                // If "working..." not found (shouldn't happen if optimistic update is correct), append
                                return [...prevChatHistory, { ...newAssistantMessage, id: prevChatHistory.length }];
                            });
                            setIsLoading(false); // Message displayed
                            // Still call onReceiveMessage if it's used for logging or other side effects with messageHistory
                            // but it should NOT call setChatHistory anymore for this flow.
                            // The rawData might still be useful for skill-specific logging if it matches SkillMessageHistoryType.
                            if (rawData.skill && rawData.query) { // Heuristic: if it looks like SkillMessageHistoryType
                                await onReceiveMessage(rawData);
                            }
                        }
                        catch (e) {
                            console.error("UserViewChat: Error processing WebSocket message from server:", e, "Raw data:", event.data);
                            // Potentially add an error message to chatHistory here
                            setChatHistory(prev => [...prev, {
                                    id: prev.length, role: 'assistant', content: "Error processing message from server.", date: (0, date_utils_1.dayjs)().format()
                                }]);
                            setIsLoading(false);
                        }
                    };
                    newSocket.onerror = (event) => {
                        console.error("UserViewChat: WebSocket error observed.", event);
                    };
                    newSocket.onclose = (event) => {
                        console.log("UserViewChat: WebSocket connection closed.", event);
                        if (socket === currentSocketInstance) { // Avoid issues if a new socket was created by reconnect logic
                            socket = null;
                        }
                        // Optionally trigger reconnect logic here if needed, e.g., by setting `setReconnect(true)`
                        // if (!event.wasClean) { setReconnect(true); }
                    };
                }
                else {
                    console.error("UserViewChat: createChatSocket returned null or undefined.");
                }
            }
            catch (e) {
                console.error("UserViewChat: Error in connectAndSetupSocket:", e);
            }
        };
        if (sub) { // Only connect if user (sub) is available
            connectAndSetupSocket();
        }
        return () => {
            // Cleanup function
            if (currentSocketInstance) {
                console.log("UserViewChat: Cleaning up WebSocket instance.");
                currentSocketInstance.onopen = null;
                currentSocketInstance.onmessage = null;
                currentSocketInstance.onerror = null;
                currentSocketInstance.onclose = null;
                if (currentSocketInstance.readyState === WebSocket.OPEN || currentSocketInstance.readyState === WebSocket.CONNECTING) {
                    currentSocketInstance.close();
                }
                if (socket === currentSocketInstance) { // Ensure module-level var is also cleared if it's this instance
                    socket = null;
                }
            }
        };
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [reconnect, isNewSession, sub, dispatchAgentCommand]); // Added sub and dispatchAgentCommand
    const onReceiveMessage = async (
    // This function is now primarily for updating messageHistory (skill log)
    // It should not call setChatHistory. That's handled directly in onmessage for WebSockets
    // or in onSendMessage for HTTP.
    skillDataForLog) => {
        try {
            // Pass only the necessary setters for messageHistory
            await (0, ChatHelper_1.receiveMessageFromBrain)(skillDataForLog, 
            // chatHistory, // Not needed if receiveMessageFromBrain doesn't setChatHistory
            messageHistory, 
            // setChatHistory, // Removed
            setMessageHistory);
        }
        catch (e) {
            console.log(e, ' unable to process skill data for message history log');
        }
    };
    // Removed direct socket.addEventListener calls as they are now handled within the useEffect's socket instance
    (0, react_2.useEffect)(() => {
        (() => {
            // generate checked array
            const newCheckedArray = constants_1.formattedTimezones?.map(_ => false);
            setCheckBoxArray(newCheckedArray);
        })();
    }, []);
    const onSelectedItem = (index) => {
        // set selected checkbox
        const newCheckBoxArray = checkBoxArray?.map(_ => false);
        newCheckBoxArray[index] = true;
        setCheckBoxArray(newCheckBoxArray);
        const selectedTimezone = constants_1.formattedTimezones[index];
        setReceiverTimezone(selectedTimezone?.value);
        setFormData({
            type: 'select',
            value: selectedTimezone?.value,
            name: selectedTimezone?.label,
        });
    };
    const closeIsSelect = async () => {
        setIsSelect(false);
        await onSendMessage(formData?.value);
    };
    const openIsSelect = () => setIsSelect(true);
    const updateSearch = (text) => {
        setSearch(text);
        const regex = new RegExp(`\.*${text || ''}\.*`, 'gmi');
        const newFilteredArray = constants_1.formattedTimezones?.filter(t => (regex.test(t?.label)));
        setFilteredTimezones(newFilteredArray);
    };
    const RenderItem = ({ item }) => {
        const foundIndex = constants_1.formattedTimezones?.findIndex(t => (t?.value === item?.value));
        return ((0, jsx_runtime_1.jsx)("button", { onClick: () => onSelectedItem(foundIndex), children: (0, jsx_runtime_1.jsxs)(Box_1.default, { style: { borderColor: theme_1.palette.darkGray, borderBottomWidth: react_native_1.StyleSheet.hairlineWidth }, p: { phone: 'm', tablet: 's' }, flexDirection: "row", justifyContent: "space-between", alignItems: "center", children: [(0, jsx_runtime_1.jsx)(Box_1.default, { style: { width: '70%' }, children: (0, jsx_runtime_1.jsx)(Text_1.default, { variant: "optionHeader", children: item?.label }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { style: { width: '30%' }, pr: { phone: 'l', tablet: 'm' }, flexDirection: "row", justifyContent: "flex-end", alignItems: "center", children: checkBoxArray?.[foundIndex] ? (0, jsx_runtime_1.jsx)(io_1.IoIosCheckmark, { size: "3em", color: theme_1.palette.pinkPrimary }) : null })] }) }));
    };
    const callNewSession = () => {
        (0, ChatHelper_1.newSession)(setChatHistory, setMessageHistory, setReconnect, reconnect);
        setIsNewSession(false);
    };
    const onSendMessage = async (text) => {
        try {
            const index = messageHistory?.length === 0 ? 0 : messageHistory?.length - 1;
            switch (messageHistory[index]?.skill) {
                case 'generate-meeting-invite':
                    messageHistory[index].formData = formData;
                case 'send-meeting-invite':
                    messageHistory[index].formData = formData;
            }
            console.log(text, ' text inside onSendMessage');
            // Add user's message to chat history immediately
            const newUserMessage = {
                id: chatHistory.length, // Or a more robust ID generation
                content: text,
                role: 'user',
                date: (0, date_utils_1.dayjs)().format(),
            };
            setChatHistory(prevChatHistory => [...prevChatHistory, newUserMessage]);
            setIsLoading(true);
            try {
                const response = await fetch('/api/atom/message', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message: text }),
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `API Error: ${response.status}`);
                }
                const data = await response.json(); // data is expected to be { text: string, audioUrl?: string, error?: string }
                let content = data.text;
                if (!content) {
                    if (data.error) {
                        content = `Error: ${data.error}`;
                    }
                    else {
                        content = "Atom didn't provide a text response.";
                    }
                }
                const atomResponse = {
                    id: chatHistory.length + 1, // Or a more robust ID generation, consider uuid
                    content: data.text, // Default to data.text
                    role: 'assistant',
                    date: (0, date_utils_1.dayjs)().format(),
                    audioUrl: data.audioUrl,
                };
                // Check for structured data from the agent
                if (data.structuredData && data.structuredData.displayType === 'semantic_search_results') {
                    atomResponse.customComponentType = 'semantic_search_results';
                    atomResponse.customComponentProps = { results: data.structuredData.data };
                    atomResponse.content = data.structuredData.summaryText || data.text;
                    console.log("UserViewChat (HTTP): Populated customComponent for semantic_search_results", atomResponse);
                }
                else if (data.structuredData && data.structuredData.displayType === 'meeting_prep_results') {
                    atomResponse.customComponentType = 'meeting_prep_results';
                    atomResponse.customComponentProps = { briefing: data.structuredData.data };
                    atomResponse.content = data.structuredData.summaryText || data.text || "Here's your meeting preparation:";
                    console.log("UserViewChat (HTTP): Populated customComponent for meeting_prep_results", atomResponse);
                }
                else {
                    // Ensure content is set if no structuredData or not the expected type
                    atomResponse.content = content;
                }
                setChatHistory(prevChatHistory => [...prevChatHistory, atomResponse]);
            }
            catch (e) {
                console.error(e, ' unable to send message to Atom API');
                const errorMessage = {
                    id: chatHistory.length + 1,
                    content: `Error: ${e.message || 'Failed to get response from Atom.'}`,
                    role: 'assistant', // Display error as an assistant message
                    date: (0, date_utils_1.dayjs)().format(),
                };
                setChatHistory(prevChatHistory => [...prevChatHistory, errorMessage]);
            }
            finally {
                setIsLoading(false);
            }
        }
        catch (e) {
            console.log(e, ' general error in onSendMessage');
            // Fallback for unexpected errors before API call attempt
            const errorMessage = {
                id: chatHistory.length + (chatHistory.find(m => m.role === 'user' && m.content === text) ? 1 : 0), // avoid duplicate id if user message was added
                content: `An unexpected error occurred.`,
                role: 'assistant',
                date: (0, date_utils_1.dayjs)().format(),
            };
            // Check if user message was already added to avoid duplicates if error is before API call
            setChatHistory(prevChatHistory => {
                if (!prevChatHistory.find(m => m.role === 'user' && m.content === text && m.id === newUserMessage.id)) {
                    return [...prevChatHistory, newUserMessage, errorMessage];
                }
                return [...prevChatHistory, errorMessage];
            });
            setIsLoading(false);
        }
    };
    const renderSelectTimezone = () => ((0, jsx_runtime_1.jsx)("div", { children: isForm ?
            ((0, jsx_runtime_1.jsxs)(Box_1.default, { justifyContent: "flex-start", alignItems: "center", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { textAlign: "center", p: { phone: 's', tablet: 'm' }, variant: "optionHeader", style: { width: '80%' }, children: "Select Receiver's timezone" }), (0, jsx_runtime_1.jsx)(react_native_1.Pressable, { onPress: openIsSelect, children: (0, jsx_runtime_1.jsx)(Text_1.default, { textAlign: "center", variant: "buttonLink", children: receiverTimezone }) })] })) : null }));
    return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col items-center h-[60vh] bg-gray-500", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-primary-content flex flex-col justify-center items-center w-full lg:w-1/2 h-full", children: [(0, jsx_runtime_1.jsx)(ScrollContainer_1.default, { scrollCta: "New Message!", isNewSession: isNewSession, children: chatHistory?.map((m, i) => {
                            // isLoading for a specific message can be true if it's the last assistant message and global isLoading is true.
                            const showLoadingForThisMessage = m.role === 'assistant' && isLoading && (chatHistory.length - 1 === i);
                            // For forms/custom components, they are now part of the message object itself if customComponentType is set.
                            // The `formData` prop in Message.tsx will be used for this.
                            return ((0, jsx_runtime_1.jsxs)("div", { children: [" ", (0, jsx_runtime_1.jsx)(Message_1.default, { message: m, isLoading: showLoadingForThisMessage, 
                                        // The formData prop in Message.tsx will now directly use m.customComponentProps
                                        // if m.customComponentType indicates it.
                                        // No need to pass complex React.createElement here.
                                        // Message.tsx will handle the rendering based on m.customComponentType.
                                        formData: undefined, htmlEmail: m.role === 'assistant' ? htmlEmail : undefined }, m.id || `msg-item-${i}`)] }, m.id || `msg-${i}`));
                        }) }), (0, jsx_runtime_1.jsx)(ChatInput_1.default, { sendMessage: onSendMessage, 
                        // For Atom, isNewSession and callNewSession might not be directly applicable in the same way
                        // but we'll keep them for now to avoid breaking ChatInput's expected props.
                        // Consider how "new session" should behave with Atom later.
                        isNewSession: false, callNewSession: () => {
                            console.log("New session clicked, behavior for Atom TBD");
                            // Potentially clear chatHistory for Atom or send a specific new session signal
                            // For now, let's just log it. A simple clear:
                            // setChatHistory([{ role: 'assistant', content: 'How can I help you today?', id:0, date: dayjs().format() }]);
                        } })] }), isForm && ((0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(react_native_1.Modal, { animationType: "slide", visible: isSelect, onRequestClose: closeIsSelect, children: (0, jsx_runtime_1.jsx)(Box_1.default, { style: styles.centeredView, children: (0, jsx_runtime_1.jsxs)(Box_1.default, { style: styles.modalView, children: [(0, jsx_runtime_1.jsxs)("form", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "default-search", className: "mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white", children: "Search" }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)("div", { className: "absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none", children: (0, jsx_runtime_1.jsx)("svg", { "aria-hidden": "true", className: "w-5 h-5 text-gray-500 dark:text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" }) }) }), (0, jsx_runtime_1.jsx)("input", { value: search, onChange: (e) => updateSearch(e?.target?.value), type: "search", id: "default-search", className: "block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-purple-500 dark:focus:border-purple-500", placeholder: "Type Timezone", required: true })] })] }), filteredTimezones?.length > 0
                                    ? ((0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: filteredTimezones, keyExtractor: item => item.key, renderItem: RenderItem }))
                                    : ((0, jsx_runtime_1.jsx)(react_native_1.FlatList, { data: constants_1.formattedTimezones, keyExtractor: item => item.key, renderItem: RenderItem })), (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(Button_1.default, { onClick: closeIsSelect, children: "Close" }) })] }) }) }) }))] }));
}
exports.default = UserViewChat;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlclZpZXdDaGF0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVXNlclZpZXdDaGF0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQWtDQSxnREFxQ0M7O0FBdkVELGdEQUFnRDtBQUVoRCw0Q0FBMkM7QUFDM0MsZ0VBQXVDO0FBQ3ZDLGlFQUF3QztBQUN4QyxtRUFBMEM7QUFDMUMscURBQStHO0FBRy9HLGdEQUF1QztBQUN2QyxpRUFBc0U7QUFFdEUsNENBQTBDO0FBQzFDLG9EQUFpRDtBQUNqRCxnRkFBdUQ7QUFDdkQsd0NBQXVDO0FBQ3ZDLGlDQUFrRDtBQUNsRCx1Q0FBK0M7QUFDL0MsK0NBR3FCO0FBRXJCLHVGQUE4RDtBQUM5RCx1RUFBOEM7QUFDOUMsMkVBQWtEO0FBQ2xELGdGQUFxRjtBQUdyRix3RUFBOEM7QUFDOUMsaUVBQTZEO0FBQzdELDhFQUFzRDtBQUN0RCw4REFBOEQ7QUFFdkQsS0FBSyxVQUFVLGtCQUFrQixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBaUQ7SUFDbEcsMEZBQTBGO0lBQzFGLHNDQUFzQztJQUN0Qyx5RUFBeUU7SUFDekUsMEJBQWUsQ0FBQyxJQUFJLENBQUMsSUFBQSw2QkFBYSxHQUFFLENBQUMsQ0FBQTtJQUNyQyxJQUFJLE9BQU8sQ0FBQTtJQUNYLElBQUksQ0FBQztRQUNILE9BQU8sR0FBRyxNQUFNLGlCQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDNUMsNkJBQTZCLEVBQUUsS0FBSztnQkFDbEMsT0FBTyxFQUFFLENBQUE7WUFDWCxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUFDLE9BQU8sR0FBUSxFQUFFLENBQUM7UUFDbEIsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDbEQsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsRUFBRSxD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LFlBQVksQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcyAqL1xuXG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0BjaGFrcmEtdWkvcmVhY3QnXG5pbXBvcnQgQnV0dG9uIGZyb20gJ0Bjb21wb25lbnRzL0J1dHRvbidcbmltcG9ydCBCb3ggZnJvbSAnQGNvbXBvbmVudHMvY29tbW9uL0JveCdcbmltcG9ydCBUZXh0IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9UZXh0J1xuaW1wb3J0IHsgYWRkTWVzc2FnZVRvQnJhaW4sIGNyZWF0ZUNoYXRTb2NrZXQsIG5ld1Nlc3Npb24sIHJlY2VpdmVNZXNzYWdlRnJvbUJyYWluIH0gZnJvbSAnQGxpYi9DaGF0L0NoYXRIZWxwZXInXG5pbXBvcnQgeyBDaGF0SGlzdG9yeVR5cGUsIFNraWxsQ2hhdEhpc3RvcnlUeXBlLCBTa2lsbE1lc3NhZ2VIaXN0b3J5VHlwZSB9IGZyb20gJ0BsaWIvZGF0YVR5cGVzL01lc3NhZ2luZy9NZXNzYWdpbmdUeXBlcydcbmltcG9ydCB7IFJlY2VpdmVyVGltZXpvbmVGb3JtRGF0YVJlc3BvbnNlVHlwZSB9IGZyb20gJ0BsaWIvZGF0YVR5cGVzL01lc3NhZ2luZy9SZWNlaXZlclRpbWV6b25lRm9ybURhdGFSZXNwb25zZVR5cGUnXG5pbXBvcnQgeyBkYXlqcyB9IGZyb20gJ0BsaWIvZGF0ZS11dGlscydcbmltcG9ydCB7IGZvcm1hdHRlZFRpbWV6b25lcyB9IGZyb20gJ0BsaWIvR1BUL01lZXRpbmdSZXF1ZXN0L2NvbnN0YW50cydcbmltcG9ydCB7IFRpbWV6b25lT2JqZWN0VHlwZSB9IGZyb20gJ0BsaWIvR1BUL01lZXRpbmdSZXF1ZXN0L3R5cGVzJ1xuaW1wb3J0IHsgcGFsZXR0ZSB9IGZyb20gJ0BsaWIvdGhlbWUvdGhlbWUnXG5pbXBvcnQgeyB1c2VBcHBDb250ZXh0IH0gZnJvbSAnQGxpYi91c2VyLWNvbnRleHQnXG5pbXBvcnQgU2Vzc2lvbiBmcm9tIFwic3VwZXJ0b2tlbnMtd2ViLWpzL3JlY2lwZS9zZXNzaW9uXCJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IElvSW9zQ2hlY2ttYXJrIH0gZnJvbSBcInJlYWN0LWljb25zL2lvXCJcbmltcG9ydCB7XG4gICAgRGltZW5zaW9ucywgUHJlc3NhYmxlLCBTdHlsZVNoZWV0LFxuICAgIEZsYXRMaXN0LCBNb2RhbCwgVG91Y2hhYmxlT3BhY2l0eSxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuaW1wb3J0IGNscyBmcm9tICdjbGFzc25hbWVzJ1xuaW1wb3J0IFNjcm9sbENvbnRhaW5lciBmcm9tICdAY29tcG9uZW50cy9jaGF0L1Njcm9sbENvbnRhaW5lcidcbmltcG9ydCBNZXNzYWdlIGZyb20gJ0Bjb21wb25lbnRzL2NoYXQvTWVzc2FnZSdcbmltcG9ydCBDaGF0SW5wdXQgZnJvbSAnQGNvbXBvbmVudHMvY2hhdC9DaGF0SW5wdXQnXG5pbXBvcnQgeyBjaGVja0lmQ2FsZW5kYXJXZWJob29rRXhwaXJlZCB9IGZyb20gJ0BsaWIvY2FsZW5kYXJMaWIvZ29vZ2xlQ2FsZW5kYXJIZWxwZXInXG5pbXBvcnQgeyBPYmplY3RGaWVsZFR5cGUgfSBmcm9tICdAbGliL2RhdGFUeXBlcy9NZXNzYWdpbmcvUmVxdWlyZWRGaWVsZHNUeXBlJ1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHN1cGVydG9rZW5zTm9kZSBmcm9tICdzdXBlcnRva2Vucy1ub2RlJ1xuaW1wb3J0IHsgYmFja2VuZENvbmZpZyB9IGZyb20gJy4uLy4uLy4uL2NvbmZpZy9iYWNrZW5kQ29uZmlnJ1xuaW1wb3J0IFNlc3Npb24xIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUvcmVjaXBlL3Nlc3Npb24nXG5pbXBvcnQgeyBnZXRVc2VyUHJlZmVyZW5jZSB9IGZyb20gJ0BsaWIvT25Cb2FyZC9PbkJvYXJkSGVscGVyJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMgfTogeyByZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSB9KSB7XG4gIC8vIE5vdGljZSBob3cgdGhlIHNlcnZlciB1c2VzIGBBUElgIGZyb20gYHdpdGhTU1JDb250ZXh0YCwgaW5zdGVhZCBvZiB0aGUgdG9wLWxldmVsIGBBUElgLlxuICAvLyBjb25zdCBTU1IgPSB3aXRoU1NSQ29udGV4dCh7IHJlcSB9KVxuICAvLyB0aGlzIHJ1bnMgb24gdGhlIGJhY2tlbmQsIHNvIHdlIG11c3QgY2FsbCBpbml0IG9uIHN1cGVydG9rZW5zLW5vZGUgU0RLXG4gIHN1cGVydG9rZW5zTm9kZS5pbml0KGJhY2tlbmRDb25maWcoKSlcbiAgbGV0IHNlc3Npb25cbiAgdHJ5IHtcbiAgICBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbjEuZ2V0U2Vzc2lvbihyZXEsIHJlcywge1xuICAgICAgb3ZlcnJpZGVHbG9iYWxDbGFpbVZhbGlkYXRvcnM6IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVyci50eXBlID09PSBTZXNzaW9uMS5FcnJvci5UUllfUkVGUkVTSF9UT0tFTikge1xuICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgfSBlbHNlIGlmIChlcnIudHlwZSA9PT0gU2Vzc2lvbjEuRXJyb3IuVU5BVVRIT1JJU0VEKSB7XG4gICAgICAvLyB0aGlzIHdpbGwgZm9yY2UgdGhlIGZyb250ZW5kIHRvIHRyeSBhbmQgcmVmcmVzaCB3aGljaCB3aWxsIGZhaWxcbiAgICAgIC8vIGNsZWFyaW5nIGFsbCBjb29raWVzIGFuZCByZWRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUgbG9naW4gc2NyZWVuLlxuICAgICAgcmV0dXJuIHsgcHJvcHM6IHsgZnJvbVN1cGVydG9rZW5zOiAnbmVlZHMtcmVmcmVzaCcgfSB9XG4gICAgfVxuICAgIHRocm93IGVyclxuICB9XG5cbiAgaWYgKCFzZXNzaW9uPy5nZXRVc2VySWQoKSkge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBkZXN0aW5hdGlvbjogJy9Vc2VyL0xvZ2luL1VzZXJMb2dpbicsXG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvcHM6IHtcbiAgICAgIHN1Yjogc2Vzc2lvbi5nZXRVc2VySWQoKSxcbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0ge1xuICAgIGNvbnRhaW5lcjoge1xuICAgICAgICBmbGV4OiAxLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgIH0sXG4gICAgZHVyYXRpb246IHtcbiAgICAgICAgZm9udFNpemU6ICcyMXB4JyxcbiAgICAgICAgbGluZUhlaWdodDogJzI4cHgnLFxuICAgIH0sXG4gICBjZW50ZXJlZFZpZXc6IHtcbiAgICBmbGV4OiAxLFxuICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgbWFyZ2luVG9wOiAyMixcbiAgICAgICBtYXJnaW5Cb3R0b206IDIyLFxuICB9IGFzIGFueSxcbiAgICBtb2RhbFZpZXc6IHtcbiAgICAgIGZsZXg6IDEsXG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgfSBhcyBhbnksXG59XG5cbmxldCBzb2NrZXQ6IFdlYlNvY2tldFxuXG5mdW5jdGlvbiBVc2VyVmlld0NoYXQoKSB7XG5cbiAgICBjb25zdCBbY2hhdEhpc3RvcnksIHNldENoYXRIaXN0b3J5XSA9IHVzZVN0YXRlPENoYXRIaXN0b3J5VHlwZSB8IFtdPihbe1xuICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgY29udGVudDogJ0hvdyBjYW4gSSBoZWxwIHlvdSB0b2RheT8nLFxuICAgICAgICBpZDogMCxcbiAgICAgICAgZGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICB9XSlcbiAgICBjb25zdCBbbWVzc2FnZUhpc3RvcnksIHNldE1lc3NhZ2VIaXN0b3J5XSA9IHVzZVN0YXRlPFNraWxsQ2hhdEhpc3RvcnlUeXBlIHwgW10+KFt7XG4gICAgICAgIHNraWxsOiAncGVuZGluZycsXG4gICAgICAgIHF1ZXJ5OiAncGVuZGluZycsXG4gICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICB9XSlcbiAgICBjb25zdCBbaXNOZXdTZXNzaW9uLCBzZXRJc05ld1Nlc3Npb25dID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gICAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuICAgIC8vIGNvbnN0IFt0b2tlbiwgc2V0VG9rZW5dID0gdXNlU3RhdGU8c3RyaW5nPignJylcbiAgICAvLyBjb25zdCBbc29ja2V0LCBzZXRTb2NrZXRdID0gdXNlU3RhdGU8V2ViU29ja2V0PigpXG4gICAgY29uc3QgW2Zvcm1EYXRhLCBzZXRGb3JtRGF0YV0gPSB1c2VTdGF0ZTxSZWNlaXZlclRpbWV6b25lRm9ybURhdGFSZXNwb25zZVR5cGU+KHtcbiAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgIHZhbHVlOiBkYXlqcy50ei5ndWVzcygpLFxuICAgICAgICBuYW1lOiBkYXlqcy50ei5ndWVzcygpLFxuICAgIH0pXG4gICAgY29uc3QgW3JlY2VpdmVyVGltZXpvbmUsIHNldFJlY2VpdmVyVGltZXpvbmVdID0gdXNlU3RhdGU8c3RyaW5nPihkYXlqcy50ei5ndWVzcygpKVxuICAgIGNvbnN0IFtzZWFyY2gsIHNldFNlYXJjaF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKVxuICAgIGNvbnN0IFtpc1NlbGVjdCwgc2V0SXNTZWxlY3RdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gICAgY29uc3QgW2NoZWNrQm94QXJyYXksIHNldENoZWNrQm94QXJyYXldID0gdXNlU3RhdGU8Ym9vbGVhbltdPihbXSlcbiAgICBjb25zdCBbZmlsdGVyZWRUaW1lem9uZXMsIHNldEZpbHRlcmVkVGltZXpvbmVzXSA9IHVzZVN0YXRlPFRpbWV6b25lT2JqZWN0VHlwZVtdPihbXSlcbiAgICBjb25zdCBbaXNGb3JtLCBzZXRJc0Zvcm1dID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gICAgY29uc3QgW3JlY29ubmVjdCwgc2V0UmVjb25uZWN0XSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuICAgIGNvbnN0IFtodG1sRW1haWwsIHNldEh0bWxFbWFpbF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKVxuXG4gICAgLy8gZm9ybWF0dGVkVGltZXpvbmVzOiBUaW1lem9uZU9iamVjdFR5cGVbXVxuXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcbiAgICBjb25zdCB7IHN1YiwgY2xpZW50IH0gPSB1c2VBcHBDb250ZXh0KClcbiAgICBjb25zdCB1c2VySWQgPSBzdWJcbiAgICBjb25zdCB0b2FzdCA9IHVzZVRvYXN0KClcbiAgICBjb25zdCB7IGRpc3BhdGNoQWdlbnRDb21tYW5kIH0gPSB1c2VBZ2VudEF1ZGlvQ29udHJvbCgpOyAvLyBJbXBvcnQgZnJvbSBjb250ZXh0XG5cblxuICAgIC8vIHJlbmV3IHB1c2ggbm90aWZpY3Rpb25zXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICAoYXN5bmMgKCkgPT4gY2hlY2tJZkNhbGVuZGFyV2ViaG9va0V4cGlyZWQoY2xpZW50LCB1c2VySWQpKSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSwgW2NsaWVudCwgdXNlcklkXSlcblxuICAgIC8vIGNoZWNrIG9uYm9hcmRpbmdcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlmICghc3ViKSB7XG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1c2VyX3ByZWZlcmVuY2VEb2MgPSBhd2FpdCBnZXRVc2VyUHJlZmVyZW5jZShjbGllbnQsIHN1YilcbiAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyX3ByZWZlcmVuY2VEb2M/Lm9uQm9hcmRlZCwgJyB1c2VyX3ByZWZlcmVuY2VEb2M/Lm9uQm9hcmRlZCcpXG4gICAgICAgICAgaWYgKCF1c2VyX3ByZWZlcmVuY2VEb2M/Lm9uQm9hcmRlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJyBubyB1c2VyIHByZWZlcmVuY2UgY3JlYXRlZCcpXG4gICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9PbkJvYXJkL1VzZXJPbkJvYXJkJ30pXG4gICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pKClcbiAgICAgIH0sIFtjbGllbnQsIHJvdXRlciwgc3ViXSlcbiAgICBcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBUaGlzIGVmZmVjdCBtYW5hZ2VzIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBsaWZlY3ljbGUuXG4gICAgICAgIGxldCBjdXJyZW50U29ja2V0SW5zdGFuY2U6IFdlYlNvY2tldCB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIGNvbnN0IGNvbm5lY3RBbmRTZXR1cFNvY2tldCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzX3Rva2VuID0gYXdhaXQgU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgICAgICAgICAgIGlmICghYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVzZXJWaWV3Q2hhdDogTm8gYWNjZXNzIHRva2VuLCBXZWJTb2NrZXQgY29ubmVjdGlvbiBub3QgYXR0ZW1wdGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NvY2tldCA9IGF3YWl0IGNyZWF0ZUNoYXRTb2NrZXQoYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3U29ja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldCA9IG5ld1NvY2tldDsgLy8gQXNzaWduIHRvIG1vZHVsZS1sZXZlbCB2YXJpYWJsZSAoYXMgcGVyIGV4aXN0aW5nIHBhdHRlcm4pXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTb2NrZXRJbnN0YW5jZSA9IG5ld1NvY2tldDsgLy8gTG9jYWwgaW5zdGFuY2UgZm9yIHRoaXMgZWZmZWN0J3MgY2xlYW51cFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXJWaWV3Q2hhdDogV2ViU29ja2V0IGNvbm5lY3Rpb24gaW5pdGlhdGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVjb25uZWN0KGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXdTb2NrZXQub25vcGVuID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXJWaWV3Q2hhdDogV2ViU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQuXCIsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBuZXdTb2NrZXQub25tZXNzYWdlID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXJWaWV3Q2hhdDogUmF3IG1lc3NhZ2UgZnJvbSBzZXJ2ZXI6IFwiLCBldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3RGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSBhcyBzdHJpbmcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVFlQRSBHVUFSRCBmb3IgQWdlbnRBdWRpb0NvbW1hbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3N1bWluZyBBZ2VudENsaWVudENvbW1hbmQgaGFzICdhY3Rpb24nIGFuZCAnY29tbWFuZF9pZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgYSB3cmFwcGVyIHR5cGUgbGlrZSB7IHR5cGU6ICdBR0VOVF9DT01NQU5EJywgcGF5bG9hZDogQWdlbnRBdWRpb0NvbW1hbmQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXdEYXRhICYmIHJhd0RhdGEudHlwZSA9PT0gJ0FHRU5UX0NPTU1BTkQnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RhdGEucGF5bG9hZCAmJiB0eXBlb2YgcmF3RGF0YS5wYXlsb2FkLmFjdGlvbiA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHJhd0RhdGEucGF5bG9hZC5jb21tYW5kX2lkID09PSAnc3RyaW5nJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmRQYXlsb2FkID0gcmF3RGF0YS5wYXlsb2FkIGFzIEFnZW50QXVkaW9Db21tYW5kOyAvLyBBZ2VudEF1ZGlvQ29tbWFuZCBuZWVkcyB0byBiZSBpbXBvcnRlZCBvciBkZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlclZpZXdDaGF0OiBSZWNlaXZlZCBBR0VOVF9DT01NQU5EIGZvciBhdWRpbzpcIiwgY29tbWFuZFBheWxvYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGF0Y2hBZ2VudENvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoQWdlbnRDb21tYW5kKGNvbW1hbmRQYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVc2VyVmlld0NoYXQ6IGRpc3BhdGNoQWdlbnRDb21tYW5kIGZyb20gQWdlbnRBdWRpb0NvbnRyb2xDb250ZXh0IGlzIG5vdCBhdmFpbGFibGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gQ29tbWFuZCBoYW5kbGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd0RhdGEgPT09ICdwaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXJWaWV3Q2hhdDogUmVjZWl2ZWQgcGluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGdlbmVyYWwgYWdlbnQgbWVzc2FnZXMgKGV4cGVjdGVkIHRvIGluY2x1ZGUgdGV4dCwgYW5kIG9wdGlvbmFsbHkgc3RydWN0dXJlZERhdGEsIGF1ZGlvVXJsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFnZW50TWVzc2FnZVBheWxvYWQgPSByYXdEYXRhIGFzIGFueTsgLy8gRGVmaW5lIGEgcHJvcGVyIHR5cGUgZm9yIHRoaXMgcGF5bG9hZCBsYXRlclxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QXNzaXN0YW50TWVzc2FnZTogVXNlckNoYXRUeXBlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY2hhdEhpc3RvcnkubGVuZ3RoLCAvLyBQbGFjZWhvbGRlciBmb3IgSUQsIGlkZWFsbHkgcmVwbGFjZSBcIndvcmtpbmcuLi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWdlbnRNZXNzYWdlUGF5bG9hZC50ZXh0IHx8IFwiUmVjZWl2ZWQgYSBtZXNzYWdlIHdpdGggbm8gdGV4dC5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9Vcmw6IGFnZW50TWVzc2FnZVBheWxvYWQuYXVkaW9VcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZ2VudE1lc3NhZ2VQYXlsb2FkLnN0cnVjdHVyZWREYXRhICYmIGFnZW50TWVzc2FnZVBheWxvYWQuc3RydWN0dXJlZERhdGEuZGlzcGxheVR5cGUgPT09ICdzZW1hbnRpY19zZWFyY2hfcmVzdWx0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXNzaXN0YW50TWVzc2FnZS5jdXN0b21Db21wb25lbnRUeXBlID0gJ3NlbWFudGljX3NlYXJjaF9yZXN1bHRzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXNzaXN0YW50TWVzc2FnZS5jdXN0b21Db21wb25lbnRQcm9wcyA9IHsgcmVzdWx0czogYWdlbnRNZXNzYWdlUGF5bG9hZC5zdHJ1Y3R1cmVkRGF0YS5kYXRhIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Fzc2lzdGFudE1lc3NhZ2UuY29udGVudCA9IGFnZW50TWVzc2FnZVBheWxvYWQuc3RydWN0dXJlZERhdGEuc3VtbWFyeVRleHQgfHwgYWdlbnRNZXNzYWdlUGF5bG9hZC50ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXJWaWV3Q2hhdCAoV2ViU29ja2V0KTogUG9wdWxhdGVkIGN1c3RvbUNvbXBvbmVudCBmb3Igc2VtYW50aWNfc2VhcmNoX3Jlc3VsdHNcIiwgbmV3QXNzaXN0YW50TWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudE1lc3NhZ2VQYXlsb2FkLnN0cnVjdHVyZWREYXRhICYmIGFnZW50TWVzc2FnZVBheWxvYWQuc3RydWN0dXJlZERhdGEuZGlzcGxheVR5cGUgPT09ICdtZWV0aW5nX3ByZXBfcmVzdWx0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXNzaXN0YW50TWVzc2FnZS5jdXN0b21Db21wb25lbnRUeXBlID0gJ21lZXRpbmdfcHJlcF9yZXN1bHRzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXNzdW1pbmcgdGhlICdkYXRhJyBmaWVsZCBpbiBzdHJ1Y3R1cmVkRGF0YSBjb250YWlucyB0aGUgQWdncmVnYXRlZFByZXBSZXN1bHRzIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBc3Npc3RhbnRNZXNzYWdlLmN1c3RvbUNvbXBvbmVudFByb3BzID0geyBicmllZmluZzogYWdlbnRNZXNzYWdlUGF5bG9hZC5zdHJ1Y3R1cmVkRGF0YS5kYXRhIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBhIHN1bW1hcnkgdGV4dCBvciB0aGUgb3JpZ2luYWwgdGV4dCBpZiBubyBzcGVjaWZpYyBzdW1tYXJ5IGlzIHByb3ZpZGVkIGZvciB0aGUgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Fzc2lzdGFudE1lc3NhZ2UuY29udGVudCA9IGFnZW50TWVzc2FnZVBheWxvYWQuc3RydWN0dXJlZERhdGEuc3VtbWFyeVRleHQgfHwgYWdlbnRNZXNzYWdlUGF5bG9hZC50ZXh0IHx8IFwiSGVyZSdzIHlvdXIgbWVldGluZyBwcmVwYXJhdGlvbjpcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyVmlld0NoYXQgKFdlYlNvY2tldCk6IFBvcHVsYXRlZCBjdXN0b21Db21wb25lbnQgZm9yIG1lZXRpbmdfcHJlcF9yZXN1bHRzXCIsIG5ld0Fzc2lzdGFudE1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjaGF0SGlzdG9yeTogUmVwbGFjZSBcIndvcmtpbmcuLi5cIiBvciBhcHBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDaGF0SGlzdG9yeShwcmV2Q2hhdEhpc3RvcnkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlUHJldkNoYXQgPSBbLi4ucHJldkNoYXRIaXN0b3J5XS5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtpbmdJbmRleCA9IHJldmVyc2VQcmV2Q2hhdC5maW5kSW5kZXgobSA9PiBtLnJvbGUgPT09ICdhc3Npc3RhbnQnICYmIG0uY29udGVudCA9PT0gJ3dvcmtpbmcgLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JraW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbEluZGV4ID0gcHJldkNoYXRIaXN0b3J5Lmxlbmd0aCAtIDEgLSB3b3JraW5nSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkSGlzdG9yeSA9IFsuLi5wcmV2Q2hhdEhpc3RvcnldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEhpc3Rvcnlbb3JpZ2luYWxJbmRleF0gPSB7IC4uLm5ld0Fzc2lzdGFudE1lc3NhZ2UsIGlkOiBwcmV2Q2hhdEhpc3Rvcnlbb3JpZ2luYWxJbmRleF0uaWQgfTsgLy8gUHJlc2VydmUgSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkSGlzdG9yeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBcIndvcmtpbmcuLi5cIiBub3QgZm91bmQgKHNob3VsZG4ndCBoYXBwZW4gaWYgb3B0aW1pc3RpYyB1cGRhdGUgaXMgY29ycmVjdCksIGFwcGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLnByZXZDaGF0SGlzdG9yeSwgeyAuLi5uZXdBc3Npc3RhbnRNZXNzYWdlLCBpZDogcHJldkNoYXRIaXN0b3J5Lmxlbmd0aCB9XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7IC8vIE1lc3NhZ2UgZGlzcGxheWVkXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGlsbCBjYWxsIG9uUmVjZWl2ZU1lc3NhZ2UgaWYgaXQncyB1c2VkIGZvciBsb2dnaW5nIG9yIG90aGVyIHNpZGUgZWZmZWN0cyB3aXRoIG1lc3NhZ2VIaXN0b3J5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGl0IHNob3VsZCBOT1QgY2FsbCBzZXRDaGF0SGlzdG9yeSBhbnltb3JlIGZvciB0aGlzIGZsb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJhd0RhdGEgbWlnaHQgc3RpbGwgYmUgdXNlZnVsIGZvciBza2lsbC1zcGVjaWZpYyBsb2dnaW5nIGlmIGl0IG1hdGNoZXMgU2tpbGxNZXNzYWdlSGlzdG9yeVR5cGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd0RhdGEuc2tpbGwgJiYgcmF3RGF0YS5xdWVyeSkgeyAvLyBIZXVyaXN0aWM6IGlmIGl0IGxvb2tzIGxpa2UgU2tpbGxNZXNzYWdlSGlzdG9yeVR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgb25SZWNlaXZlTWVzc2FnZShyYXdEYXRhIGFzIFNraWxsTWVzc2FnZUhpc3RvcnlUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVXNlclZpZXdDaGF0OiBFcnJvciBwcm9jZXNzaW5nIFdlYlNvY2tldCBtZXNzYWdlIGZyb20gc2VydmVyOlwiLCBlLCBcIlJhdyBkYXRhOlwiLCBldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3RlbnRpYWxseSBhZGQgYW4gZXJyb3IgbWVzc2FnZSB0byBjaGF0SGlzdG9yeSBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2hhdEhpc3RvcnkocHJldiA9PiBbLi4ucHJldiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJldi5sZW5ndGgsIHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBcIkVycm9yIHByb2Nlc3NpbmcgbWVzc2FnZSBmcm9tIHNlcnZlci5cIiwgZGF0ZTogZGF5anMoKS5mb3JtYXQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIG5ld1NvY2tldC5vbmVycm9yID0gKGV2ZW50OiBFdmVudCkgPT4geyAvLyBVc2luZyBnZW5lcmFsIEV2ZW50IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVc2VyVmlld0NoYXQ6IFdlYlNvY2tldCBlcnJvciBvYnNlcnZlZC5cIiwgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIG5ld1NvY2tldC5vbmNsb3NlID0gKGV2ZW50OiBDbG9zZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXJWaWV3Q2hhdDogV2ViU29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkLlwiLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29ja2V0ID09PSBjdXJyZW50U29ja2V0SW5zdGFuY2UpIHsgLy8gQXZvaWQgaXNzdWVzIGlmIGEgbmV3IHNvY2tldCB3YXMgY3JlYXRlZCBieSByZWNvbm5lY3QgbG9naWNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW9uYWxseSB0cmlnZ2VyIHJlY29ubmVjdCBsb2dpYyBoZXJlIGlmIG5lZWRlZCwgZS5nLiwgYnkgc2V0dGluZyBgc2V0UmVjb25uZWN0KHRydWUpYFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCFldmVudC53YXNDbGVhbikgeyBzZXRSZWNvbm5lY3QodHJ1ZSk7IH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVc2VyVmlld0NoYXQ6IGNyZWF0ZUNoYXRTb2NrZXQgcmV0dXJuZWQgbnVsbCBvciB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVXNlclZpZXdDaGF0OiBFcnJvciBpbiBjb25uZWN0QW5kU2V0dXBTb2NrZXQ6XCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzdWIpIHsgLy8gT25seSBjb25uZWN0IGlmIHVzZXIgKHN1YikgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgICBjb25uZWN0QW5kU2V0dXBTb2NrZXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uXG4gICAgICAgICAgICBpZiAoY3VycmVudFNvY2tldEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyVmlld0NoYXQ6IENsZWFuaW5nIHVwIFdlYlNvY2tldCBpbnN0YW5jZS5cIik7XG4gICAgICAgICAgICAgICAgY3VycmVudFNvY2tldEluc3RhbmNlLm9ub3BlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgY3VycmVudFNvY2tldEluc3RhbmNlLm9ubWVzc2FnZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgY3VycmVudFNvY2tldEluc3RhbmNlLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTb2NrZXRJbnN0YW5jZS5vbmNsb3NlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNvY2tldEluc3RhbmNlLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOIHx8IGN1cnJlbnRTb2NrZXRJbnN0YW5jZS5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ09OTkVDVElORykge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U29ja2V0SW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNvY2tldCA9PT0gY3VycmVudFNvY2tldEluc3RhbmNlKSB7IC8vIEVuc3VyZSBtb2R1bGUtbGV2ZWwgdmFyIGlzIGFsc28gY2xlYXJlZCBpZiBpdCdzIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtyZWNvbm5lY3QsIGlzTmV3U2Vzc2lvbiwgc3ViLCBkaXNwYXRjaEFnZW50Q29tbWFuZF0pOyAvLyBBZGRlZCBzdWIgYW5kIGRpc3BhdGNoQWdlbnRDb21tYW5kXG5cblxuICAgIGNvbnN0IG9uUmVjZWl2ZU1lc3NhZ2UgPSBhc3luYyAoXG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgbm93IHByaW1hcmlseSBmb3IgdXBkYXRpbmcgbWVzc2FnZUhpc3RvcnkgKHNraWxsIGxvZylcbiAgICAgICAgLy8gSXQgc2hvdWxkIG5vdCBjYWxsIHNldENoYXRIaXN0b3J5LiBUaGF0J3MgaGFuZGxlZCBkaXJlY3RseSBpbiBvbm1lc3NhZ2UgZm9yIFdlYlNvY2tldHNcbiAgICAgICAgLy8gb3IgaW4gb25TZW5kTWVzc2FnZSBmb3IgSFRUUC5cbiAgICAgICAgc2tpbGxEYXRhRm9yTG9nOiBTa2lsbE1lc3NhZ2VIaXN0b3J5VHlwZSxcbiAgICApID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFBhc3Mgb25seSB0aGUgbmVjZXNzYXJ5IHNldHRlcnMgZm9yIG1lc3NhZ2VIaXN0b3J5XG4gICAgICAgICAgICBhd2FpdCByZWNlaXZlTWVzc2FnZUZyb21CcmFpbihcbiAgICAgICAgICAgICAgICBza2lsbERhdGFGb3JMb2csXG4gICAgICAgICAgICAgICAgLy8gY2hhdEhpc3RvcnksIC8vIE5vdCBuZWVkZWQgaWYgcmVjZWl2ZU1lc3NhZ2VGcm9tQnJhaW4gZG9lc24ndCBzZXRDaGF0SGlzdG9yeVxuICAgICAgICAgICAgICAgIG1lc3NhZ2VIaXN0b3J5LFxuICAgICAgICAgICAgICAgIC8vIHNldENoYXRIaXN0b3J5LCAvLyBSZW1vdmVkXG4gICAgICAgICAgICAgICAgc2V0TWVzc2FnZUhpc3RvcnksXG4gICAgICAgICAgICAgICAgLy8gc2V0SXNMb2FkaW5nLCAvLyBpc0xvYWRpbmcgaXMgbWFuYWdlZCBieSB0aGUgY2FsbGVyIChvbm1lc3NhZ2Ugb3Igb25TZW5kTWVzc2FnZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gcHJvY2VzcyBza2lsbCBkYXRhIGZvciBtZXNzYWdlIGhpc3RvcnkgbG9nJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlbW92ZWQgZGlyZWN0IHNvY2tldC5hZGRFdmVudExpc3RlbmVyIGNhbGxzIGFzIHRoZXkgYXJlIG5vdyBoYW5kbGVkIHdpdGhpbiB0aGUgdXNlRWZmZWN0J3Mgc29ja2V0IGluc3RhbmNlXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAoKCkgPT4ge1xuICAgICAgICAgICAgLy8gZ2VuZXJhdGUgY2hlY2tlZCBhcnJheVxuICAgICAgICAgICAgY29uc3QgbmV3Q2hlY2tlZEFycmF5ID0gZm9ybWF0dGVkVGltZXpvbmVzPy5tYXAoXyA9PiBmYWxzZSlcblxuICAgICAgICAgICAgc2V0Q2hlY2tCb3hBcnJheShuZXdDaGVja2VkQXJyYXkpXG4gICAgICAgIH0pKClcbiAgICB9LCBbXSlcblxuICAgIGNvbnN0IG9uU2VsZWN0ZWRJdGVtID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgLy8gc2V0IHNlbGVjdGVkIGNoZWNrYm94XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrQm94QXJyYXkgPSBjaGVja0JveEFycmF5Py5tYXAoXyA9PiBmYWxzZSlcbiAgICAgICAgbmV3Q2hlY2tCb3hBcnJheVtpbmRleF0gPSB0cnVlXG4gICAgICAgIHNldENoZWNrQm94QXJyYXkobmV3Q2hlY2tCb3hBcnJheSlcblxuICAgICAgICBjb25zdCBzZWxlY3RlZFRpbWV6b25lID0gZm9ybWF0dGVkVGltZXpvbmVzW2luZGV4XVxuICAgICAgICBzZXRSZWNlaXZlclRpbWV6b25lKHNlbGVjdGVkVGltZXpvbmU/LnZhbHVlKVxuICAgICAgICBzZXRGb3JtRGF0YSh7XG4gICAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICAgIHZhbHVlOiBzZWxlY3RlZFRpbWV6b25lPy52YWx1ZSxcbiAgICAgICAgICAgIG5hbWU6IHNlbGVjdGVkVGltZXpvbmU/LmxhYmVsLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGNsb3NlSXNTZWxlY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHNldElzU2VsZWN0KGZhbHNlKVxuICAgICAgICBhd2FpdCBvblNlbmRNZXNzYWdlKGZvcm1EYXRhPy52YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBvcGVuSXNTZWxlY3QgPSAoKSA9PiBzZXRJc1NlbGVjdCh0cnVlKVxuICAgIFxuICAgIGNvbnN0IHVwZGF0ZVNlYXJjaCA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgc2V0U2VhcmNoKHRleHQpXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXFwuKiR7dGV4dCB8fCAnJ31cXC4qYCwgJ2dtaScpXG4gICAgICAgIGNvbnN0IG5ld0ZpbHRlcmVkQXJyYXkgPSBmb3JtYXR0ZWRUaW1lem9uZXM/LmZpbHRlcih0ID0+IChyZWdleC50ZXN0KHQ/LmxhYmVsKSkpXG5cbiAgICAgICAgc2V0RmlsdGVyZWRUaW1lem9uZXMobmV3RmlsdGVyZWRBcnJheSlcbiAgICB9XG5cbiAgICB0eXBlIFJlbmRlckl0ZW1UeXBlID0ge1xuICAgICAgICBpdGVtOiBUaW1lem9uZU9iamVjdFR5cGUsXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgfVxuXG4gICAgY29uc3QgUmVuZGVySXRlbSA9ICh7IGl0ZW0gfTogUmVuZGVySXRlbVR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IGZvcm1hdHRlZFRpbWV6b25lcz8uZmluZEluZGV4KHQgPT4gKHQ/LnZhbHVlID09PSBpdGVtPy52YWx1ZSkpXG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25TZWxlY3RlZEl0ZW0oZm91bmRJbmRleCl9ID5cbiAgICAgICAgICAgICAgICA8Qm94IHN0eWxlPXt7IGJvcmRlckNvbG9yOiBwYWxldHRlLmRhcmtHcmF5LCBib3JkZXJCb3R0b21XaWR0aDogU3R5bGVTaGVldC5oYWlybGluZVdpZHRoIH19IHA9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAncycgfX0gZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBzdHlsZT17eyB3aWR0aDogJzcwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHZhcmlhbnQ9XCJvcHRpb25IZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbT8ubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8Qm94IHN0eWxlPXt7IHdpZHRoOiAnMzAlJ319IHByPXt7IHBob25lOiAnbCcsIHRhYmxldDogJ20nfX0gZmxleERpcmVjdGlvbj1cInJvd1wiIGp1c3RpZnlDb250ZW50PVwiZmxleC1lbmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2hlY2tCb3hBcnJheT8uW2ZvdW5kSW5kZXhdID8gPElvSW9zQ2hlY2ttYXJrIHNpemU9XCIzZW1cIiBjb2xvcj17cGFsZXR0ZS5waW5rUHJpbWFyeX0gLz4gOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgY2FsbE5ld1Nlc3Npb24gPSAoKSA9PiB7XG4gICAgICAgIG5ld1Nlc3Npb24oXG4gICAgICAgICAgICBzZXRDaGF0SGlzdG9yeSxcbiAgICAgICAgICAgIHNldE1lc3NhZ2VIaXN0b3J5LFxuICAgICAgICAgICAgc2V0UmVjb25uZWN0LFxuICAgICAgICAgICAgcmVjb25uZWN0LFxuICAgICAgICApXG5cbiAgICAgICAgc2V0SXNOZXdTZXNzaW9uKGZhbHNlKVxuICAgIH1cblxuICAgIGNvbnN0IG9uU2VuZE1lc3NhZ2UgPSBhc3luYyAodGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbWVzc2FnZUhpc3Rvcnk/Lmxlbmd0aCA9PT0gMCA/IDAgOiBtZXNzYWdlSGlzdG9yeT8ubGVuZ3RoIC0gMVxuXG4gICAgICAgICAgICBzd2l0Y2gobWVzc2FnZUhpc3RvcnlbaW5kZXhdPy5za2lsbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dlbmVyYXRlLW1lZXRpbmctaW52aXRlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUhpc3RvcnlbaW5kZXhdLmZvcm1EYXRhID0gZm9ybURhdGFcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdzZW5kLW1lZXRpbmctaW52aXRlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUhpc3RvcnlbaW5kZXhdLmZvcm1EYXRhID0gZm9ybURhdGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0LCAnIHRleHQgaW5zaWRlIG9uU2VuZE1lc3NhZ2UnKVxuICAgICAgICAgICAgLy8gQWRkIHVzZXIncyBtZXNzYWdlIHRvIGNoYXQgaGlzdG9yeSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgY29uc3QgbmV3VXNlck1lc3NhZ2U6IFVzZXJDaGF0VHlwZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY2hhdEhpc3RvcnkubGVuZ3RoLCAvLyBPciBhIG1vcmUgcm9idXN0IElEIGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgICBjb250ZW50OiB0ZXh0LFxuICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICBkYXRlOiBkYXlqcygpLmZvcm1hdCgpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNldENoYXRIaXN0b3J5KHByZXZDaGF0SGlzdG9yeSA9PiBbLi4ucHJldkNoYXRIaXN0b3J5LCBuZXdVc2VyTWVzc2FnZV0pO1xuICAgICAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYXRvbS9tZXNzYWdlJywge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiB0ZXh0IH0pLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEuZXJyb3IgfHwgYEFQSSBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsgLy8gZGF0YSBpcyBleHBlY3RlZCB0byBiZSB7IHRleHQ6IHN0cmluZywgYXVkaW9Vcmw/OiBzdHJpbmcsIGVycm9yPzogc3RyaW5nIH1cblxuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gZGF0YS50ZXh0O1xuICAgICAgICAgICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGBFcnJvcjogJHtkYXRhLmVycm9yfWA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gXCJBdG9tIGRpZG4ndCBwcm92aWRlIGEgdGV4dCByZXNwb25zZS5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGF0b21SZXNwb25zZTogVXNlckNoYXRUeXBlID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogY2hhdEhpc3RvcnkubGVuZ3RoICsgMSwgLy8gT3IgYSBtb3JlIHJvYnVzdCBJRCBnZW5lcmF0aW9uLCBjb25zaWRlciB1dWlkXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEudGV4dCwgLy8gRGVmYXVsdCB0byBkYXRhLnRleHRcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvVXJsOiBkYXRhLmF1ZGlvVXJsLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc3RydWN0dXJlZCBkYXRhIGZyb20gdGhlIGFnZW50XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RydWN0dXJlZERhdGEgJiYgZGF0YS5zdHJ1Y3R1cmVkRGF0YS5kaXNwbGF5VHlwZSA9PT0gJ3NlbWFudGljX3NlYXJjaF9yZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgICBhdG9tUmVzcG9uc2UuY3VzdG9tQ29tcG9uZW50VHlwZSA9ICdzZW1hbnRpY19zZWFyY2hfcmVzdWx0cyc7XG4gICAgICAgICAgICAgICAgICAgIGF0b21SZXNwb25zZS5jdXN0b21Db21wb25lbnRQcm9wcyA9IHsgcmVzdWx0czogZGF0YS5zdHJ1Y3R1cmVkRGF0YS5kYXRhIH07XG4gICAgICAgICAgICAgICAgICAgIGF0b21SZXNwb25zZS5jb250ZW50ID0gZGF0YS5zdHJ1Y3R1cmVkRGF0YS5zdW1tYXJ5VGV4dCB8fCBkYXRhLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlclZpZXdDaGF0IChIVFRQKTogUG9wdWxhdGVkIGN1c3RvbUNvbXBvbmVudCBmb3Igc2VtYW50aWNfc2VhcmNoX3Jlc3VsdHNcIiwgYXRvbVJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuc3RydWN0dXJlZERhdGEgJiYgZGF0YS5zdHJ1Y3R1cmVkRGF0YS5kaXNwbGF5VHlwZSA9PT0gJ21lZXRpbmdfcHJlcF9yZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgICBhdG9tUmVzcG9uc2UuY3VzdG9tQ29tcG9uZW50VHlwZSA9ICdtZWV0aW5nX3ByZXBfcmVzdWx0cyc7XG4gICAgICAgICAgICAgICAgICAgIGF0b21SZXNwb25zZS5jdXN0b21Db21wb25lbnRQcm9wcyA9IHsgYnJpZWZpbmc6IGRhdGEuc3RydWN0dXJlZERhdGEuZGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICBhdG9tUmVzcG9uc2UuY29udGVudCA9IGRhdGEuc3RydWN0dXJlZERhdGEuc3VtbWFyeVRleHQgfHwgZGF0YS50ZXh0IHx8IFwiSGVyZSdzIHlvdXIgbWVldGluZyBwcmVwYXJhdGlvbjpcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyVmlld0NoYXQgKEhUVFApOiBQb3B1bGF0ZWQgY3VzdG9tQ29tcG9uZW50IGZvciBtZWV0aW5nX3ByZXBfcmVzdWx0c1wiLCBhdG9tUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBjb250ZW50IGlzIHNldCBpZiBubyBzdHJ1Y3R1cmVkRGF0YSBvciBub3QgdGhlIGV4cGVjdGVkIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgYXRvbVJlc3BvbnNlLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldENoYXRIaXN0b3J5KHByZXZDaGF0SGlzdG9yeSA9PiBbLi4ucHJldkNoYXRIaXN0b3J5LCBhdG9tUmVzcG9uc2VdKTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlLCAnIHVuYWJsZSB0byBzZW5kIG1lc3NhZ2UgdG8gQXRvbSBBUEknKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2U6IFVzZXJDaGF0VHlwZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNoYXRIaXN0b3J5Lmxlbmd0aCArIDEsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBFcnJvcjogJHtlLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UgZnJvbSBBdG9tLid9YCxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsIC8vIERpc3BsYXkgZXJyb3IgYXMgYW4gYXNzaXN0YW50IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNldENoYXRIaXN0b3J5KHByZXZDaGF0SGlzdG9yeSA9PiBbLi4ucHJldkNoYXRIaXN0b3J5LCBlcnJvck1lc3NhZ2VdKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSwgJyBnZW5lcmFsIGVycm9yIGluIG9uU2VuZE1lc3NhZ2UnKVxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgZm9yIHVuZXhwZWN0ZWQgZXJyb3JzIGJlZm9yZSBBUEkgY2FsbCBhdHRlbXB0XG4gICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlOiBVc2VyQ2hhdFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGNoYXRIaXN0b3J5Lmxlbmd0aCArIChjaGF0SGlzdG9yeS5maW5kKG0gPT4gbS5yb2xlID09PSAndXNlcicgJiYgbS5jb250ZW50ID09PSB0ZXh0KSA/IDE6IDApLCAvLyBhdm9pZCBkdXBsaWNhdGUgaWQgaWYgdXNlciBtZXNzYWdlIHdhcyBhZGRlZFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLmAsXG4gICAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgICAgICAgZGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIG1lc3NhZ2Ugd2FzIGFscmVhZHkgYWRkZWQgdG8gYXZvaWQgZHVwbGljYXRlcyBpZiBlcnJvciBpcyBiZWZvcmUgQVBJIGNhbGxcbiAgICAgICAgICAgIHNldENoYXRIaXN0b3J5KHByZXZDaGF0SGlzdG9yeSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcmV2Q2hhdEhpc3RvcnkuZmluZChtID0+IG0ucm9sZSA9PT0gJ3VzZXInICYmIG0uY29udGVudCA9PT0gdGV4dCAmJiBtLmlkID09PSBuZXdVc2VyTWVzc2FnZS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4ucHJldkNoYXRIaXN0b3J5LCBuZXdVc2VyTWVzc2FnZSwgZXJyb3JNZXNzYWdlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5wcmV2Q2hhdEhpc3RvcnksIGVycm9yTWVzc2FnZV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNvbnN0IHJlbmRlclNlbGVjdFRpbWV6b25lID0gKCkgPT4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAge2lzRm9ybSA/XG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICA8Qm94IGp1c3RpZnlDb250ZW50PVwiZmxleC1zdGFydFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCB0ZXh0QWxpZ249XCJjZW50ZXJcIiBwPXt7IHBob25lOiAncycsIHRhYmxldDogJ20nIH19IHZhcmlhbnQ9XCJvcHRpb25IZWFkZXJcIiBzdHlsZT17eyB3aWR0aDogJzgwJSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3QgUmVjZWl2ZXImYXBvcztzIHRpbWV6b25lXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UHJlc3NhYmxlIG9uUHJlc3M9e29wZW5Jc1NlbGVjdH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQgdGV4dEFsaWduPVwiY2VudGVyXCIgdmFyaWFudD1cImJ1dHRvbkxpbmtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlY2VpdmVyVGltZXpvbmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9QcmVzc2FibGU+XG4gICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGgtWzYwdmhdIGJnLWdyYXktNTAwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXByaW1hcnktY29udGVudCBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciB3LWZ1bGwgbGc6dy0xLzIgaC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPFNjcm9sbENvbnRhaW5lciBzY3JvbGxDdGE9XCJOZXcgTWVzc2FnZSFcIiBpc05ld1Nlc3Npb249e2lzTmV3U2Vzc2lvbn0gPlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoY2hhdEhpc3RvcnkgYXMgQ2hhdEhpc3RvcnlUeXBlKT8ubWFwKChtLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXNMb2FkaW5nIGZvciBhIHNwZWNpZmljIG1lc3NhZ2UgY2FuIGJlIHRydWUgaWYgaXQncyB0aGUgbGFzdCBhc3Npc3RhbnQgbWVzc2FnZSBhbmQgZ2xvYmFsIGlzTG9hZGluZyBpcyB0cnVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3dMb2FkaW5nRm9yVGhpc01lc3NhZ2UgPSBtLnJvbGUgPT09ICdhc3Npc3RhbnQnICYmIGlzTG9hZGluZyAmJiAoY2hhdEhpc3RvcnkubGVuZ3RoIC0xID09PSBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZm9ybXMvY3VzdG9tIGNvbXBvbmVudHMsIHRoZXkgYXJlIG5vdyBwYXJ0IG9mIHRoZSBtZXNzYWdlIG9iamVjdCBpdHNlbGYgaWYgY3VzdG9tQ29tcG9uZW50VHlwZSBpcyBzZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGBmb3JtRGF0YWAgcHJvcCBpbiBNZXNzYWdlLnRzeCB3aWxsIGJlIHVzZWQgZm9yIHRoaXMuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17bS5pZCB8fCBgbXNnLSR7aX1gfT4gey8qIEVuc3VyZSBrZXkgaXMgYWx3YXlzIHVuaXF1ZSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXttLmlkIHx8IGBtc2ctaXRlbS0ke2l9YH0gLy8gVW5pcXVlIGtleSBmb3IgdGhlIE1lc3NhZ2UgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17bX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e3Nob3dMb2FkaW5nRm9yVGhpc01lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZvcm1EYXRhIHByb3AgaW4gTWVzc2FnZS50c3ggd2lsbCBub3cgZGlyZWN0bHkgdXNlIG0uY3VzdG9tQ29tcG9uZW50UHJvcHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBtLmN1c3RvbUNvbXBvbmVudFR5cGUgaW5kaWNhdGVzIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gcGFzcyBjb21wbGV4IFJlYWN0LmNyZWF0ZUVsZW1lbnQgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXNzYWdlLnRzeCB3aWxsIGhhbmRsZSB0aGUgcmVuZGVyaW5nIGJhc2VkIG9uIG0uY3VzdG9tQ29tcG9uZW50VHlwZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YT17dW5kZWZpbmVkfSAvLyBUaGlzIHNwZWNpZmljIHByb3AgbWlnaHQgYmUgZGVwcmVjYXRlZCBpZiBNZXNzYWdlIGRpcmVjdGx5IHVzZXMgbS5jdXN0b21Db21wb25lbnRUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEVtYWlsPXttLnJvbGUgPT09ICdhc3Npc3RhbnQnID8gaHRtbEVtYWlsIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDwvU2Nyb2xsQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDxDaGF0SW5wdXQgXG4gICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlPXtvblNlbmRNZXNzYWdlfSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIEF0b20sIGlzTmV3U2Vzc2lvbiBhbmQgY2FsbE5ld1Nlc3Npb24gbWlnaHQgbm90IGJlIGRpcmVjdGx5IGFwcGxpY2FibGUgaW4gdGhlIHNhbWUgd2F5XG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSdsbCBrZWVwIHRoZW0gZm9yIG5vdyB0byBhdm9pZCBicmVha2luZyBDaGF0SW5wdXQncyBleHBlY3RlZCBwcm9wcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uc2lkZXIgaG93IFwibmV3IHNlc3Npb25cIiBzaG91bGQgYmVoYXZlIHdpdGggQXRvbSBsYXRlci5cbiAgICAgICAgICAgICAgICAgICAgaXNOZXdTZXNzaW9uPXtmYWxzZX0gLy8gT3IgbWFuYWdlIHRoaXMgYmFzZWQgb24gQXRvbSdzIGNvbmNlcHQgb2Ygc2Vzc2lvbnMgaWYgYW55XG4gICAgICAgICAgICAgICAgICAgIGNhbGxOZXdTZXNzaW9uPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5ldyBzZXNzaW9uIGNsaWNrZWQsIGJlaGF2aW9yIGZvciBBdG9tIFRCRFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvdGVudGlhbGx5IGNsZWFyIGNoYXRIaXN0b3J5IGZvciBBdG9tIG9yIHNlbmQgYSBzcGVjaWZpYyBuZXcgc2Vzc2lvbiBzaWduYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBub3csIGxldCdzIGp1c3QgbG9nIGl0LiBBIHNpbXBsZSBjbGVhcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldENoYXRIaXN0b3J5KFt7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5PycsIGlkOjAsIGRhdGU6IGRheWpzKCkuZm9ybWF0KCkgfV0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsvKiBUaGUgTW9kYWwgZm9yIHRpbWV6b25lIHNlbGVjdGlvbiBpcyBwYXJ0IG9mIHRoZSBvbGQgc3lzdGVtLCBoaWRpbmcgaXQgZm9yIEF0b20gZm9yIG5vdyBieSBub3QgcmVuZGVyaW5nIGlmIGlzRm9ybSBpcyBmYWxzZSAqL31cbiAgICAgICAgICAgIHtpc0Zvcm0gJiYgKFxuICAgICAgICAgICAgPEJveD5cbiAgICAgICAgICAgICAgICA8TW9kYWwgYW5pbWF0aW9uVHlwZT1cInNsaWRlXCJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17aXNTZWxlY3R9IG9uUmVxdWVzdENsb3NlPXtjbG9zZUlzU2VsZWN0fT5cbiAgICAgICAgICAgICAgICAgICAgPEJveCBzdHlsZT17c3R5bGVzLmNlbnRlcmVkVmlld30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm94IHN0eWxlPXtzdHlsZXMubW9kYWxWaWV3fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybT4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJkZWZhdWx0LXNlYXJjaFwiIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIHNyLW9ubHkgZGFyazp0ZXh0LXdoaXRlXCI+U2VhcmNoPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC15LTAgbGVmdC0wIGZsZXggaXRlbXMtY2VudGVyIHBsLTMgcG9pbnRlci1ldmVudHMtbm9uZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgYXJpYS1oaWRkZW49XCJ0cnVlXCIgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9XCIyXCIgZD1cIk0yMSAyMWwtNi02bTItNWE3IDcgMCAxMS0xNCAwIDcgNyAwIDAxMTQgMHpcIj48L3BhdGg+PC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17c2VhcmNofSBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZVNlYXJjaChlPy50YXJnZXQ/LnZhbHVlKX0gdHlwZT1cInNlYXJjaFwiIGlkPVwiZGVmYXVsdC1zZWFyY2hcIiBjbGFzc05hbWU9XCJibG9jayB3LWZ1bGwgcC00IHBsLTEwIHRleHQtc20gdGV4dC1ncmF5LTkwMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgYmctZ3JheS01MCBmb2N1czpyaW5nLXB1cnBsZS01MDAgZm9jdXM6Ym9yZGVyLXB1cnBsZS01MDAgZGFyazpiZy1ncmF5LTcwMCBkYXJrOmJvcmRlci1ncmF5LTYwMCBkYXJrOnBsYWNlaG9sZGVyLWdyYXktNDAwIGRhcms6dGV4dC13aGl0ZSBkYXJrOmZvY3VzOnJpbmctcHVycGxlLTUwMCBkYXJrOmZvY3VzOmJvcmRlci1wdXJwbGUtNTAwXCIgcGxhY2Vob2xkZXI9XCJUeXBlIFRpbWV6b25lXCIgcmVxdWlyZWQgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWx0ZXJlZFRpbWV6b25lcz8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGbGF0TGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhPXtmaWx0ZXJlZFRpbWV6b25lc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5RXh0cmFjdG9yPXtpdGVtID0+IGl0ZW0ua2V5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJJdGVtPXtSZW5kZXJJdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RmxhdExpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT17Zm9ybWF0dGVkVGltZXpvbmVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlFeHRyYWN0b3I9e2l0ZW0gPT4gaXRlbS5rZXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckl0ZW09e1JlbmRlckl0ZW19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCb3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17Y2xvc2VJc1NlbGVjdH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbG9zZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlclZpZXdDaGF0XG5cblxuIl19