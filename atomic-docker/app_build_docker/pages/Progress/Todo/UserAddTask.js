"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerSideProps = getServerSideProps;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const TextField_1 = __importDefault(require("@components/TextField"));
const uuid_1 = require("uuid");
const constants_1 = require("@lib/Progress/Todo/constants");
const Box_1 = __importDefault(require("@components/common/Box"));
const Text_1 = __importDefault(require("@components/common/Text"));
const Button_1 = __importDefault(require("@components/Button"));
const UserTaskHelper2_1 = require("@lib/Progress/Todo/UserTaskHelper2");
const react_2 = require("@chakra-ui/react");
const date_utils_1 = require("@lib/date-utils");
const lodash_1 = __importDefault(require("lodash"));
const user_context_1 = require("@lib/user-context");
const router_1 = require("next/router");
const react_3 = require("@chakra-ui/react");
const constants_2 = require("../../../lib/Progress/Todo/constants");
const UserTaskHelper3_1 = require("@lib/Progress/Todo/UserTaskHelper3");
const supertokens_node_1 = __importDefault(require("supertokens-node"));
const backendConfig_1 = require("@config/backendConfig");
const session_1 = __importDefault(require("supertokens-node/recipe/session"));
async function getServerSideProps({ req, res }) {
    // Notice how the server uses `API` from `withSSRContext`, instead of the top-level `API`.
    // const SSR = withSSRContext({ req })
    // this runs on the backend, so we must call init on supertokens-node SDK
    supertokens_node_1.default.init((0, backendConfig_1.backendConfig)());
    let session;
    try {
        session = await session_1.default.getSession(req, res, {
            overrideGlobalClaimValidators: async function () {
                return [];
            },
        });
    }
    catch (err) {
        if (err.type === session_1.default.Error.TRY_REFRESH_TOKEN) {
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        else if (err.type === session_1.default.Error.UNAUTHORISED) {
            // this will force the frontend to try and refresh which will fail
            // clearing all cookies and redirecting the user to the login screen.
            return { props: { fromSupertokens: 'needs-refresh' } };
        }
        throw err;
    }
    if (!session?.getUserId()) {
        return {
            redirect: {
                destination: '/User/Login/UserLogin',
                permanent: false,
            },
        };
    }
    return {
        props: {
            sub: session.getUserId(),
        }
    };
}
const styles = {
    task: {
        fontSize: '21px',
        lineHeight: '28px',
        color: '#221D23',
        width: '100%',
    },
    taskOverlay: {
        fontSize: '21px',
        lineHeight: '28px',
        color: '#221D23',
        padding: 10,
        width: 280,
    },
    taskOverlay2: {
        fontSize: '21px',
        lineHeight: '28px',
        color: '#221D23',
        width: '100%',
    },
    container: {
        flex: 1,
    },
};
const deadlineOptions = [
    {
        label: 'Soft Deadline',
        value: 'soft',
    },
    {
        label: 'Hard Deadline',
        value: 'hard',
    }
];
function UserAddTask(props) {
    const [newDailyTaskText, setNewDailyTaskText] = (0, react_1.useState)('');
    const [newDailyPriority, setNewDailyPriority] = (0, react_1.useState)(1);
    const [newDailyDeadline, setNewDailyDeadline] = (0, react_1.useState)(new Date());
    const [newDailyDeadlineType, setNewDailyDeadlineType] = (0, react_1.useState)('soft');
    const [newDailyDuration, setNewDailyDuration] = (0, react_1.useState)(30);
    const [newWeeklyTaskText, setNewWeeklyTaskText] = (0, react_1.useState)('');
    const [newWeeklyPriority, setNewWeeklyPriority] = (0, react_1.useState)(1);
    const [newWeeklyDeadline, setNewWeeklyDeadline] = (0, react_1.useState)(new Date());
    const [newWeeklyDeadlineType, setNewWeeklyDeadlineType] = (0, react_1.useState)('soft');
    const [newWeeklyDuration, setNewWeeklyDuration] = (0, react_1.useState)(30);
    const router = (0, router_1.useRouter)();
    const { client, sub } = (0, user_context_1.useAppContext)();
    console.log(sub, ' prerender sub inside useraddtask');
    const taskType = router?.query?.taskType;
    const toast = (0, react_2.useToast)();
    const onChangeDailyPriority = (value = '1') => {
        const intValue = parseInt(value.replace(/[^0-9.]/g, ''), 10);
        if (intValue < 1) {
            setNewDailyPriority(1);
            return;
        }
        if (isNaN(intValue)) {
            setNewDailyPriority(1);
            return;
        }
        setNewDailyPriority(parseInt(value.replace(/[^0-9.]/g, ''), 10) || 1);
    };
    const updateTaskInDb = async (toUpdateTask) => {
        try {
            if (!toUpdateTask) {
                console.log('no toUpdateTask provided inside updateTaskinDb');
                return;
            }
            await (0, UserTaskHelper3_1.updateTaskByIdInDb)(client, toUpdateTask);
        }
        catch (e) {
            console.log(e, ' updateDailyTaskToStoreById');
        }
    };
    const createDailyTaskToStore = async (text, important, softDeadline, hardDeadline, status, eventId, duration, priority) => {
        try {
            console.log(text, ' this is text inside createDailyTaskToStore');
            const newTask = {
                id: (0, uuid_1.v4)(),
                userId: sub,
                eventId,
                type: constants_1.DailyTask,
                notes: text,
                important,
                status,
                priority: priority || 1,
                softDeadline,
                hardDeadline,
                duration,
                updatedAt: (0, date_utils_1.dayjs)().format(),
                createdDate: (0, date_utils_1.dayjs)().format()
            };
            await (0, UserTaskHelper3_1.insertTaskInDb)(client, newTask);
            return newTask;
        }
        catch (e) {
            console.log(e, ' unable to create to store todo');
        }
    };
    const createDailyTaskNote = async () => {
        try {
            const notes = newDailyTaskText;
            if (!notes) {
                toast({
                    status: 'info',
                    title: 'Empty',
                    description: 'Your task is empty',
                    duration: 9000,
                    isClosable: true,
                });
                return;
            }
            const task = await createDailyTaskToStore(notes, false, newDailyDeadlineType === 'soft' ? (0, date_utils_1.dayjs)(newDailyDeadline).format() : undefined, newDailyDeadlineType === 'hard' ? (0, date_utils_1.dayjs)(newDailyDeadline).format() : undefined, constants_2.TaskStatus.TODO, undefined, newDailyDuration, newDailyPriority);
            console.log(task, ' this is task inside createDailyTaskNote');
            console.log(newDailyDeadlineType, ' newDailyDeadlineType ');
            const event = await (0, UserTaskHelper2_1.createDailyDeadline)(client, sub, task?.id, notes, newDailyPriority, (0, date_utils_1.dayjs)(newDailyDeadline).format(), newDailyDeadlineType, newDailyDuration, toast);
            console.log(event, ' this is event inside createDailyTaskNote');
            if (event) {
                await (0, UserTaskHelper2_1.submitEventForQueue)(event, client, sub, true, toast);
                task.eventId = event?.id;
                await updateTaskInDb(task);
            }
            setNewDailyTaskText('');
            setNewDailyPriority(1);
            setNewDailyDeadline(new Date());
            setNewDailyDeadlineType('soft');
            setNewDailyDuration(1);
            router.push({ pathname: '/Progress/Todo/UserTask', query: { isUpdate: (0, uuid_1.v4)(), taskType: constants_1.DailyTask } });
        }
        catch (e) {
            console.log(e, ' create daily task note');
        }
    };
    const onChangeWeeklyPriority = (value = '1') => {
        const intValue = parseInt(value.replace(/[^0-9.]/g, ''), 10);
        if (intValue < 1) {
            setNewWeeklyPriority(1);
            return;
        }
        if (isNaN(intValue)) {
            setNewWeeklyPriority(1);
            return;
        }
        setNewWeeklyPriority(parseInt(value.replace(/[^0-9.]/g, ''), 10) || 1);
    };
    const createWeeklyTaskToStore = async (text, important, softDeadline, hardDeadline, status, eventId, duration, priority) => {
        try {
            console.log(text, ' this is text inside createDailyTaskToStore');
            const newTask = {
                id: (0, uuid_1.v4)(),
                userId: sub,
                eventId,
                type: constants_1.WeeklyTask,
                notes: text,
                important,
                status,
                priority: priority || 1,
                softDeadline,
                hardDeadline,
                duration,
                updatedAt: (0, date_utils_1.dayjs)().format(),
                createdDate: (0, date_utils_1.dayjs)().format()
            };
            await (0, UserTaskHelper3_1.insertTaskInDb)(client, newTask);
            return newTask;
        }
        catch (e) {
            console.log(e, ' unable to create to store todo');
        }
    };
    const createWeeklyTaskNote = async () => {
        try {
            const notes = newWeeklyTaskText;
            console.log(notes, ' notes inside createWeeklyTaskNote');
            if (!notes) {
                toast({
                    status: 'info',
                    title: 'Empty',
                    description: 'Your task is empty',
                    duration: 9000,
                    isClosable: true,
                });
                return;
            }
            const task = await createWeeklyTaskToStore(notes, false, newWeeklyDeadlineType === 'soft' ? (0, date_utils_1.dayjs)(newWeeklyDeadline).format() : '', newWeeklyDeadlineType === 'hard' ? (0, date_utils_1.dayjs)(newWeeklyDeadline).format() : '', constants_2.TaskStatus.TODO, undefined, newWeeklyDuration, newWeeklyPriority);
            console.log(task, ' task inside createWeeklyTaskNote');
            const event = await (0, UserTaskHelper2_1.createWeeklyDeadline)(client, sub, task?.id, notes, newWeeklyPriority, (0, date_utils_1.dayjs)(newWeeklyDeadline).format(), newWeeklyDeadlineType, newWeeklyDuration, toast);
            console.log(event, ' event inside createWeeklyTaskNote');
            await (0, UserTaskHelper2_1.submitEventForQueue)(event, client, sub, undefined, toast);
            task.eventId = event?.id;
            await updateTaskInDb(task);
            setNewWeeklyTaskText('');
            setNewWeeklyPriority(1);
            setNewWeeklyDeadline(new Date());
            setNewWeeklyDeadlineType('soft');
            setNewWeeklyDuration(1);
            router.push({ pathname: '/Progress/Todo/UserTask', query: { isUpdate: (0, uuid_1.v4)(), taskType: constants_1.WeeklyTask } });
        }
        catch (e) {
            console.log(e, ' unable to create weekly task note');
        }
    };
    if (taskType === 'Daily') {
        return ((0, jsx_runtime_1.jsx)(Box_1.default, { justifyContent: "space-around", alignItems: "center", children: (0, jsx_runtime_1.jsxs)(Box_1.default, { children: [(0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Notes", placeholder: "This is an example task", multiline: true, numberOfLines: 3, value: newDailyTaskText, onChange: (e) => setNewDailyTaskText(e?.target?.value) }) }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "body", children: "Deadline" }), (0, jsx_runtime_1.jsx)(react_3.Input, { placeholder: "Select Date and Time", size: "md", type: "datetime-local", onChange: (e) => {
                                    setNewDailyDeadline((0, date_utils_1.dayjs)(e?.target?.value, "YYYY-MM-DDTHH:mm").toDate());
                                }, value: (0, date_utils_1.dayjs)(newDailyDeadline).format("YYYY-MM-DDTHH:mm") })] }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", children: (0, jsx_runtime_1.jsxs)("select", { value: newDailyDeadlineType, onChange: (e) => setNewDailyDeadlineType(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, defaultValue: "Pick a deadline", children: "Pick a deadline" }), lodash_1.default.map(deadlineOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Duration (minutes)", type: "number", onChange: (e) => setNewDailyDuration(parseInt(e?.target?.value.replace(/[^0-9.]/g, ''), 10)), value: `${newDailyDuration}`, placeholder: "1", style: { ...(styles?.taskOverlay2), } }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Priority ( > 0)", type: "number", onChange: (e) => onChangeDailyPriority(e?.target?.value), value: `${newDailyPriority}`, placeholder: "1", style: { ...(styles?.taskOverlay2), } }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Button_1.default, { onClick: createDailyTaskNote, children: "Add" }) })] }) }));
    }
    else if (taskType === 'Weekly') {
        return ((0, jsx_runtime_1.jsxs)(Box_1.default, { justifyContent: "space-around", alignItems: "center", children: [(0, jsx_runtime_1.jsxs)(Box_1.default, { children: [(0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Box_1.default, { children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Notes", placeholder: "This is an example task", multiline: true, numberOfLines: 4, style: styles?.taskOverlay, value: newWeeklyTaskText, onChange: (e) => setNewWeeklyTaskText(e?.target?.value) }) }) }), (0, jsx_runtime_1.jsxs)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: [(0, jsx_runtime_1.jsx)(Text_1.default, { variant: "body", children: "Deadline" }), (0, jsx_runtime_1.jsx)(react_3.Input, { placeholder: "Select Date and Time", size: "md", type: "datetime-local", onChange: (e) => {
                                        setNewWeeklyDeadline((0, date_utils_1.dayjs)(e?.target?.value, "YYYY-MM-DDTHH:mm").toDate());
                                    }, value: (0, date_utils_1.dayjs)(newWeeklyDeadline).format("YYYY-MM-DDTHH:mm") })] }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", children: (0, jsx_runtime_1.jsxs)("select", { value: newWeeklyDeadlineType, onChange: (e) => setNewWeeklyDeadlineType(e?.target?.value), className: "select select-primary w-full max-w-xs", children: [(0, jsx_runtime_1.jsx)("option", { disabled: true, defaultValue: "Pick a deadline", children: "Pick a deadline" }), lodash_1.default.map(deadlineOptions, option => ((0, jsx_runtime_1.jsx)("option", { value: option.value, children: option.label }, option.value)))] }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Duration (minutes)", type: "number", onChange: (e) => setNewWeeklyDuration(parseInt(e?.target?.value.replace(/[^0-9.]/g, ''), 10)), value: `${newWeeklyDuration}`, placeholder: "1", style: { ...(styles?.taskOverlay2), } }) }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "flex-start", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(TextField_1.default, { label: "Priority ( > 0)", type: "number", onChange: (e) => onChangeWeeklyPriority(e?.target?.value), value: `${newWeeklyPriority}`, placeholder: "1", style: { ...(styles?.taskOverlay2), } }) })] }), (0, jsx_runtime_1.jsx)(Box_1.default, { mt: { phone: 'm', tablet: 'l' }, justifyContent: "space-around", alignItems: "center", style: { width: '100%' }, children: (0, jsx_runtime_1.jsx)(Button_1.default, { onClick: createWeeklyTaskNote, children: "Add" }) })] }));
    }
}
exports.default = UserAddTask;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlckFkZFRhc2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJVc2VyQWRkVGFzay50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUE2QkEsZ0RBcUNDOztBQWxFRCxpQ0FFZTtBQUNmLHNFQUE2QztBQUM3QywrQkFBaUM7QUFDakMsNERBQW9FO0FBQ3BFLGlFQUF3QztBQUN4QyxtRUFBMEM7QUFDMUMsZ0VBQXVDO0FBRXZDLHdFQUkyQztBQUMzQyw0Q0FBMkM7QUFDM0MsZ0RBQXVDO0FBQ3ZDLG9EQUFzQjtBQUN0QixvREFBaUQ7QUFDakQsd0NBQXVDO0FBQ3ZDLDRDQUF3QztBQUN4QyxvRUFBaUU7QUFFakUsd0VBQXVGO0FBRXZGLHdFQUE4QztBQUM5Qyx5REFBcUQ7QUFDckQsOEVBQXFEO0FBRTlDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQWlEO0lBQ2hHLDBGQUEwRjtJQUMxRixzQ0FBc0M7SUFDdEMseUVBQXlFO0lBQ3pFLDBCQUFlLENBQUMsSUFBSSxDQUFDLElBQUEsNkJBQWEsR0FBRSxDQUFDLENBQUE7SUFDckMsSUFBSSxPQUFPLENBQUE7SUFDWCxJQUFJLENBQUM7UUFDRCxPQUFPLEdBQUcsTUFBTSxpQkFBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLDZCQUE2QixFQUFFLEtBQUs7Z0JBQ2hDLE9BQU8sRUFBRSxDQUFBO1lBQ2IsQ0FBQztTQUNKLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFBQyxPQUFPLEdBQVEsRUFBRSxDQUFDO1FBQ2hCLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQy9DLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLEVBQUUsQ0FBQTtRQUMxRCxDQUFDO2FBQU0sSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGlCQUFPLENBQUMs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QUFLLENBQUMsRUFDeEYsS0FBSyxFQUFFLEdBQUcsaUJBQWlCLEVBQUUsRUFDN0IsV0FBVyxFQUFDLEdBQUcsRUFDZixLQUFLLEVBQUUsRUFBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxHQUFFLEdBQ2pDLEdBQ0EsSUFDRixFQUNOLHVCQUFDLGFBQUcsSUFBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRyxjQUFjLEVBQUMsY0FBYyxFQUFDLFVBQVUsRUFBQyxRQUFRLEVBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUMvRyx1QkFBQyxnQkFBTSxJQUFDLE9BQU8sRUFBRSxvQkFBb0Isb0JBRTVCLEdBQ0wsSUFDRixDQUVYLENBQUE7SUFFSCxDQUFDO0FBTUwsQ0FBQztBQUVELGtCQUFlLFdBQVcsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge1xuICB1c2VTdGF0ZSxcbiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdAY29tcG9uZW50cy9UZXh0RmllbGQnXG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCdcbmltcG9ydCB7IERhaWx5VGFzaywgV2Vla2x5VGFzayB9IGZyb20gJ0BsaWIvUHJvZ3Jlc3MvVG9kby9jb25zdGFudHMnXG5pbXBvcnQgQm94IGZyb20gJ0Bjb21wb25lbnRzL2NvbW1vbi9Cb3gnXG5pbXBvcnQgVGV4dCBmcm9tICdAY29tcG9uZW50cy9jb21tb24vVGV4dCdcbmltcG9ydCBCdXR0b24gZnJvbSAnQGNvbXBvbmVudHMvQnV0dG9uJ1xuXG5pbXBvcnQge1xuICBjcmVhdGVEYWlseURlYWRsaW5lLFxuICBzdWJtaXRFdmVudEZvclF1ZXVlLFxuICBjcmVhdGVXZWVrbHlEZWFkbGluZSxcbn0gZnJvbSAnQGxpYi9Qcm9ncmVzcy9Ub2RvL1VzZXJUYXNrSGVscGVyMidcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQGNoYWtyYS11aS9yZWFjdCdcbmltcG9ydCB7IGRheWpzIH0gZnJvbSAnQGxpYi9kYXRlLXV0aWxzJ1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IHsgdXNlQXBwQ29udGV4dCB9IGZyb20gJ0BsaWIvdXNlci1jb250ZXh0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0BjaGFrcmEtdWkvcmVhY3QnXG5pbXBvcnQgeyBUYXNrU3RhdHVzIH0gZnJvbSAnLi4vLi4vLi4vbGliL1Byb2dyZXNzL1RvZG8vY29uc3RhbnRzJ1xuaW1wb3J0IHsgVGFza1R5cGUgfSBmcm9tICdAbGliL2RhdGFUeXBlcy9UYXNrVHlwZSdcbmltcG9ydCB7IGluc2VydFRhc2tJbkRiLCB1cGRhdGVUYXNrQnlJZEluRGIgfSBmcm9tICdAbGliL1Byb2dyZXNzL1RvZG8vVXNlclRhc2tIZWxwZXIzJ1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHN1cGVydG9rZW5zTm9kZSBmcm9tICdzdXBlcnRva2Vucy1ub2RlJ1xuaW1wb3J0IHsgYmFja2VuZENvbmZpZyB9IGZyb20gJ0Bjb25maWcvYmFja2VuZENvbmZpZydcbmltcG9ydCBTZXNzaW9uIGZyb20gJ3N1cGVydG9rZW5zLW5vZGUvcmVjaXBlL3Nlc3Npb24nXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcyB9OiB7IHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlIH0pIHtcbiAgICAvLyBOb3RpY2UgaG93IHRoZSBzZXJ2ZXIgdXNlcyBgQVBJYCBmcm9tIGB3aXRoU1NSQ29udGV4dGAsIGluc3RlYWQgb2YgdGhlIHRvcC1sZXZlbCBgQVBJYC5cbiAgICAvLyBjb25zdCBTU1IgPSB3aXRoU1NSQ29udGV4dCh7IHJlcSB9KVxuICAgIC8vIHRoaXMgcnVucyBvbiB0aGUgYmFja2VuZCwgc28gd2UgbXVzdCBjYWxsIGluaXQgb24gc3VwZXJ0b2tlbnMtbm9kZSBTREtcbiAgICBzdXBlcnRva2Vuc05vZGUuaW5pdChiYWNrZW5kQ29uZmlnKCkpXG4gICAgbGV0IHNlc3Npb25cbiAgICB0cnkge1xuICAgICAgICBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbi5nZXRTZXNzaW9uKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICBvdmVycmlkZUdsb2JhbENsYWltVmFsaWRhdG9yczogYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICBpZiAoZXJyLnR5cGUgPT09IFNlc3Npb24uRXJyb3IuVFJZX1JFRlJFU0hfVE9LRU4pIHtcbiAgICAgICAgICAgIHJldHVybiB7IHByb3BzOiB7IGZyb21TdXBlcnRva2VuczogJ25lZWRzLXJlZnJlc2gnIH0gfVxuICAgICAgICB9IGVsc2UgaWYgKGVyci50eXBlID09PSBTZXNzaW9uLkVycm9yLlVOQVVUSE9SSVNFRCkge1xuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGZvcmNlIHRoZSBmcm9udGVuZCB0byB0cnkgYW5kIHJlZnJlc2ggd2hpY2ggd2lsbCBmYWlsXG4gICAgICAgICAgICAvLyBjbGVhcmluZyBhbGwgY29va2llcyBhbmQgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIGxvZ2luIHNjcmVlbi5cbiAgICAgICAgICAgIHJldHVybiB7IHByb3BzOiB7IGZyb21TdXBlcnRva2VuczogJ25lZWRzLXJlZnJlc2gnIH0gfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IGVyclxuICAgIH1cblxuICAgIGlmICghc2Vzc2lvbj8uZ2V0VXNlcklkKCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246ICcvVXNlci9Mb2dpbi9Vc2VyTG9naW4nLFxuICAgICAgICAgICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgc3ViOiBzZXNzaW9uLmdldFVzZXJJZCgpLFxuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCB0eXBlIFRhc2tOYW1lVHlwZSA9ICdEYWlseSd8J1dlZWtseSd8J01hc3Rlcid8J0dyb2NlcnknXG5cblxuY29uc3Qgc3R5bGVzID0ge1xuICB0YXNrOiB7XG4gICAgZm9udFNpemU6ICcyMXB4JyxcbiAgICBsaW5lSGVpZ2h0OiAnMjhweCcsXG4gICAgY29sb3I6ICcjMjIxRDIzJyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICB9IGFzIFJlYWN0LkNTU1Byb3BlcnRpZXMsXG4gIHRhc2tPdmVybGF5OiB7XG4gICAgZm9udFNpemU6ICcyMXB4JyxcbiAgICBsaW5lSGVpZ2h0OiAnMjhweCcsXG4gICAgY29sb3I6ICcjMjIxRDIzJyxcbiAgICBwYWRkaW5nOiAxMCxcbiAgICB3aWR0aDogMjgwLFxuICB9IGFzIFJlYWN0LkNTU1Byb3BlcnRpZXMsXG4gIHRhc2tPdmVybGF5Mjoge1xuICAgIGZvbnRTaXplOiAnMjFweCcsXG4gICAgbGluZUhlaWdodDogJzI4cHgnLFxuICAgIGNvbG9yOiAnIzIyMUQyMycsXG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgfSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzLFxuICAgY29udGFpbmVyOiB7XG4gICAgICBmbGV4OiAxLFxuICAgIH0gYXMgUmVhY3QuQ1NTUHJvcGVydGllcyxcbn1cblxuZXhwb3J0IHR5cGUgRGVhZGxpbmVUeXBlID0gJ3NvZnQnIHwgJ2hhcmQnXG5cbmNvbnN0IGRlYWRsaW5lT3B0aW9ucyA9IFtcbiAge1xuICAgIGxhYmVsOiAnU29mdCBEZWFkbGluZScsXG4gICAgdmFsdWU6ICdzb2Z0JyxcbiAgfSxcbiAge1xuICAgIGxhYmVsOiAnSGFyZCBEZWFkbGluZScsXG4gICAgdmFsdWU6ICdoYXJkJyxcbiAgfVxuXVxuXG5cbnR5cGUgUHJvcHMgPSB7XG4gIHN1Yjogc3RyaW5nLFxufVxuZnVuY3Rpb24gVXNlckFkZFRhc2socHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgW25ld0RhaWx5VGFza1RleHQsIHNldE5ld0RhaWx5VGFza1RleHRdID0gdXNlU3RhdGU8c3RyaW5nPignJylcbiAgICBjb25zdCBbbmV3RGFpbHlQcmlvcml0eSwgc2V0TmV3RGFpbHlQcmlvcml0eV0gPSB1c2VTdGF0ZTxudW1iZXI+KDEpXG4gICAgY29uc3QgW25ld0RhaWx5RGVhZGxpbmUsIHNldE5ld0RhaWx5RGVhZGxpbmVdID0gdXNlU3RhdGU8RGF0ZT4obmV3IERhdGUoKSlcbiAgICBjb25zdCBbbmV3RGFpbHlEZWFkbGluZVR5cGUsIHNldE5ld0RhaWx5RGVhZGxpbmVUeXBlXSA9IHVzZVN0YXRlPERlYWRsaW5lVHlwZT4oJ3NvZnQnKVxuICAgIGNvbnN0IFtuZXdEYWlseUR1cmF0aW9uLCBzZXROZXdEYWlseUR1cmF0aW9uXSA9IHVzZVN0YXRlPG51bWJlcj4oMzApXG5cbiAgICBjb25zdCBbbmV3V2Vla2x5VGFza1RleHQsIHNldE5ld1dlZWtseVRhc2tUZXh0XSA9IHVzZVN0YXRlPHN0cmluZz4oJycpXG4gICAgY29uc3QgW25ld1dlZWtseVByaW9yaXR5LCBzZXROZXdXZWVrbHlQcmlvcml0eV0gPSB1c2VTdGF0ZTxudW1iZXI+KDEpXG4gICAgY29uc3QgW25ld1dlZWtseURlYWRsaW5lLCBzZXROZXdXZWVrbHlEZWFkbGluZV0gPSB1c2VTdGF0ZTxEYXRlPihuZXcgRGF0ZSgpKVxuICAgIGNvbnN0IFtuZXdXZWVrbHlEZWFkbGluZVR5cGUsIHNldE5ld1dlZWtseURlYWRsaW5lVHlwZV0gPSB1c2VTdGF0ZTxEZWFkbGluZVR5cGU+KCdzb2Z0JylcbiAgICBjb25zdCBbbmV3V2Vla2x5RHVyYXRpb24sIHNldE5ld1dlZWtseUR1cmF0aW9uXSA9IHVzZVN0YXRlPG51bWJlcj4oMzApXG4gICAgXG5cbiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKVxuICAgIGNvbnN0IHsgY2xpZW50LCBzdWIgfSA9IHVzZUFwcENvbnRleHQoKVxuICBcbiAgICBjb25zb2xlLmxvZyhzdWIsICcgcHJlcmVuZGVyIHN1YiBpbnNpZGUgdXNlcmFkZHRhc2snKVxuXG4gICAgY29uc3QgdGFza1R5cGUgPSByb3V0ZXI/LnF1ZXJ5Py50YXNrVHlwZSBhcyBzdHJpbmdcbiAgICBjb25zdCB0b2FzdCA9IHVzZVRvYXN0KClcblxuICAgIGNvbnN0IG9uQ2hhbmdlRGFpbHlQcmlvcml0eSA9ICh2YWx1ZTogc3RyaW5nID0gJzEnKSA9PiB7XG4gICAgICAgIGNvbnN0IGludFZhbHVlID0gcGFyc2VJbnQodmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCAnJyksIDEwKVxuICAgICAgICBpZiAoaW50VmFsdWUgPCAxKSB7XG4gICAgICAgIHNldE5ld0RhaWx5UHJpb3JpdHkoMSlcbiAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOYU4oaW50VmFsdWUpKSB7XG4gICAgICAgIHNldE5ld0RhaWx5UHJpb3JpdHkoMSlcbiAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBzZXROZXdEYWlseVByaW9yaXR5KHBhcnNlSW50KHZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpLCAxMCkgfHwgMSlcbiAgICB9XG4gIFxuICAgIGNvbnN0IHVwZGF0ZVRhc2tJbkRiID0gYXN5bmMgKFxuICAgICAgdG9VcGRhdGVUYXNrOiBUYXNrVHlwZSxcbiAgICApID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghdG9VcGRhdGVUYXNrKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ25vIHRvVXBkYXRlVGFzayBwcm92aWRlZCBpbnNpZGUgdXBkYXRlVGFza2luRGInKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdXBkYXRlVGFza0J5SWRJbkRiKGNsaWVudCwgdG9VcGRhdGVUYXNrKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlLCAnIHVwZGF0ZURhaWx5VGFza1RvU3RvcmVCeUlkJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVEYWlseVRhc2tUb1N0b3JlID0gYXN5bmMgKFxuICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgaW1wb3J0YW50PzogYm9vbGVhbixcbiAgICAgIHNvZnREZWFkbGluZT86IHN0cmluZyxcbiAgICAgIGhhcmREZWFkbGluZT86IHN0cmluZyxcbiAgICAgIHN0YXR1cz86IFRhc2tTdGF0dXMsXG4gICAgICBldmVudElkPzogc3RyaW5nLFxuICAgICAgZHVyYXRpb24/OiBudW1iZXIsXG4gICAgICBwcmlvcml0eT86IG51bWJlcixcbiAgICApID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0LCAnIHRoaXMgaXMgdGV4dCBpbnNpZGUgY3JlYXRlRGFpbHlUYXNrVG9TdG9yZScpXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbmV3VGFzazogVGFza1R5cGUgPSB7XG4gICAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgICAgdXNlcklkOiBzdWIsXG4gICAgICAgICAgICBldmVudElkLFxuICAgICAgICAgICAgdHlwZTogRGFpbHlUYXNrLFxuICAgICAgICAgICAgbm90ZXM6IHRleHQsXG4gICAgICAgICAgICBpbXBvcnRhbnQsXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICBwcmlvcml0eTogcHJpb3JpdHkgfHwgMSxcbiAgICAgICAgICAgIHNvZnREZWFkbGluZSxcbiAgICAgICAgICAgIGhhcmREZWFkbGluZSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLmZvcm1hdCgpLFxuICAgICAgICAgICAgY3JlYXRlZERhdGU6IGRheWpzKCkuZm9ybWF0KClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCBpbnNlcnRUYXNrSW5EYihjbGllbnQsIG5ld1Rhc2spXG5cbiAgICAgICAgICByZXR1cm4gbmV3VGFza1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gY3JlYXRlIHRvIHN0b3JlIHRvZG8nKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlRGFpbHlUYXNrTm90ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5vdGVzID0gbmV3RGFpbHlUYXNrVGV4dFxuICAgICAgICBpZiAoIW5vdGVzKSB7XG4gICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgIHN0YXR1czogJ2luZm8nLFxuICAgICAgICAgICAgICB0aXRsZTogJ0VtcHR5JyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdZb3VyIHRhc2sgaXMgZW1wdHknLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBjcmVhdGVEYWlseVRhc2tUb1N0b3JlKG5vdGVzLCBmYWxzZSwgbmV3RGFpbHlEZWFkbGluZVR5cGUgPT09ICdzb2Z0JyA/IGRheWpzKG5ld0RhaWx5RGVhZGxpbmUpLmZvcm1hdCgpIDogdW5kZWZpbmVkLCBuZXdEYWlseURlYWRsaW5lVHlwZSA9PT0gJ2hhcmQnID8gZGF5anMobmV3RGFpbHlEZWFkbGluZSkuZm9ybWF0KCkgOiB1bmRlZmluZWQsIFRhc2tTdGF0dXMuVE9ETyxcbiAgICAgICAgICB1bmRlZmluZWQsIG5ld0RhaWx5RHVyYXRpb24sIG5ld0RhaWx5UHJpb3JpdHkpXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyh0YXNrLCAnIHRoaXMgaXMgdGFzayBpbnNpZGUgY3JlYXRlRGFpbHlUYXNrTm90ZScpXG4gICAgICAgIGNvbnNvbGUubG9nKG5ld0RhaWx5RGVhZGxpbmVUeXBlLCAnIG5ld0RhaWx5RGVhZGxpbmVUeXBlICcpXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgY3JlYXRlRGFpbHlEZWFkbGluZShcbiAgICAgICAgICAgIGNsaWVudCwgXG4gICAgICAgICAgICBzdWIsIFxuICAgICAgICAgICAgdGFzaz8uaWQsIFxuICAgICAgICAgICAgbm90ZXMsIFxuICAgICAgICAgICAgbmV3RGFpbHlQcmlvcml0eSxcbiAgICAgICAgICAgIGRheWpzKG5ld0RhaWx5RGVhZGxpbmUpLmZvcm1hdCgpLFxuICAgICAgICAgICAgbmV3RGFpbHlEZWFkbGluZVR5cGUsXG4gICAgICAgICAgICBuZXdEYWlseUR1cmF0aW9uLFxuICAgICAgICAgICAgdG9hc3QsXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCAnIHRoaXMgaXMgZXZlbnQgaW5zaWRlIGNyZWF0ZURhaWx5VGFza05vdGUnKVxuICAgICAgICBpZiAoZXZlbnQpIHtcblxuICAgICAgICAgIGF3YWl0IHN1Ym1pdEV2ZW50Rm9yUXVldWUoZXZlbnQsIGNsaWVudCwgc3ViLCB0cnVlLCB0b2FzdClcbiAgICAgICAgICB0YXNrLmV2ZW50SWQgPSBldmVudD8uaWRcbiAgICAgICAgICBhd2FpdCB1cGRhdGVUYXNrSW5EYihcbiAgICAgICAgICAgIHRhc2ssXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgc2V0TmV3RGFpbHlUYXNrVGV4dCgnJylcbiAgICAgICAgc2V0TmV3RGFpbHlQcmlvcml0eSgxKVxuICAgICAgICBzZXROZXdEYWlseURlYWRsaW5lKG5ldyBEYXRlKCkpXG4gICAgICAgIHNldE5ld0RhaWx5RGVhZGxpbmVUeXBlKCdzb2Z0JylcbiAgICAgICAgc2V0TmV3RGFpbHlEdXJhdGlvbigxKVxuICAgICAgICBcbiAgICAgICAgcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9Qcm9ncmVzcy9Ub2RvL1VzZXJUYXNrJywgcXVlcnk6IHsgaXNVcGRhdGU6IHV1aWQoKSwgdGFza1R5cGU6IERhaWx5VGFzayB9fSlcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSwgJyBjcmVhdGUgZGFpbHkgdGFzayBub3RlJylcbiAgICAgIH1cbiAgICB9XG4gIFxuXG4gICAgY29uc3Qgb25DaGFuZ2VXZWVrbHlQcmlvcml0eSA9ICh2YWx1ZTogc3RyaW5nID0gJzEnKSA9PiB7XG4gICAgICBjb25zdCBpbnRWYWx1ZSA9IHBhcnNlSW50KHZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpLCAxMClcbiAgICAgIGlmIChpbnRWYWx1ZSA8IDEpIHtcbiAgICAgICAgc2V0TmV3V2Vla2x5UHJpb3JpdHkoMSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChpc05hTihpbnRWYWx1ZSkpIHtcbiAgICAgICAgc2V0TmV3V2Vla2x5UHJpb3JpdHkoMSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHNldE5ld1dlZWtseVByaW9yaXR5KHBhcnNlSW50KHZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpLCAxMCkgfHwgMSlcbiAgICB9XG4gIFxuICAgIGNvbnN0IGNyZWF0ZVdlZWtseVRhc2tUb1N0b3JlID0gYXN5bmMgKFxuICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgaW1wb3J0YW50PzogYm9vbGVhbixcbiAgICAgIHNvZnREZWFkbGluZT86IHN0cmluZyxcbiAgICAgIGhhcmREZWFkbGluZT86IHN0cmluZyxcbiAgICAgIHN0YXR1cz86IFRhc2tTdGF0dXMsXG4gICAgICBldmVudElkPzogc3RyaW5nLFxuICAgICAgZHVyYXRpb24/OiBudW1iZXIsXG4gICAgICBwcmlvcml0eT86IG51bWJlcixcbiAgICApID0+IHtcbiAgICAgIHRyeSB7XG5cbiAgICAgICAgY29uc29sZS5sb2codGV4dCwgJyB0aGlzIGlzIHRleHQgaW5zaWRlIGNyZWF0ZURhaWx5VGFza1RvU3RvcmUnKVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IG5ld1Rhc2s6IFRhc2tUeXBlID0ge1xuICAgICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICAgIHVzZXJJZDogc3ViLFxuICAgICAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgICAgIHR5cGU6IFdlZWtseVRhc2ssXG4gICAgICAgICAgICBub3RlczogdGV4dCxcbiAgICAgICAgICAgIGltcG9ydGFudCxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSB8fCAxLFxuICAgICAgICAgICAgc29mdERlYWRsaW5lLFxuICAgICAgICAgICAgaGFyZERlYWRsaW5lLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgICAgICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS5mb3JtYXQoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGF3YWl0IGluc2VydFRhc2tJbkRiKGNsaWVudCwgbmV3VGFzaylcblxuICAgICAgICAgIHJldHVybiBuZXdUYXNrXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gY3JlYXRlIHRvIHN0b3JlIHRvZG8nKVxuICAgICAgfVxuICAgIH1cbiAgXG4gICAgY29uc3QgY3JlYXRlV2Vla2x5VGFza05vdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBub3RlcyA9IG5ld1dlZWtseVRhc2tUZXh0XG4gICAgICAgIGNvbnNvbGUubG9nKG5vdGVzLCAnIG5vdGVzIGluc2lkZSBjcmVhdGVXZWVrbHlUYXNrTm90ZScpXG4gICAgICAgIGlmICghbm90ZXMpIHtcbiAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICBzdGF0dXM6ICdpbmZvJyxcbiAgICAgICAgICAgIHRpdGxlOiAnRW1wdHknLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdZb3VyIHRhc2sgaXMgZW1wdHknLFxuICAgICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0YXNrID0gYXdhaXQgY3JlYXRlV2Vla2x5VGFza1RvU3RvcmUobm90ZXMsIGZhbHNlLCBuZXdXZWVrbHlEZWFkbGluZVR5cGUgPT09ICdzb2Z0JyA/IGRheWpzKG5ld1dlZWtseURlYWRsaW5lKS5mb3JtYXQoKSA6ICcnLCBuZXdXZWVrbHlEZWFkbGluZVR5cGUgPT09ICdoYXJkJyA/IGRheWpzKG5ld1dlZWtseURlYWRsaW5lKS5mb3JtYXQoKSA6ICcnLCBUYXNrU3RhdHVzLlRPRE8sXG4gICAgICAgICAgdW5kZWZpbmVkLCBuZXdXZWVrbHlEdXJhdGlvbiwgbmV3V2Vla2x5UHJpb3JpdHkpXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyh0YXNrLCAnIHRhc2sgaW5zaWRlIGNyZWF0ZVdlZWtseVRhc2tOb3RlJylcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgY3JlYXRlV2Vla2x5RGVhZGxpbmUoXG4gICAgICAgICAgY2xpZW50LCBcbiAgICAgICAgICBzdWIsIFxuICAgICAgICAgIHRhc2s/LmlkLCBcbiAgICAgICAgICBub3RlcywgXG4gICAgICAgICAgbmV3V2Vla2x5UHJpb3JpdHksXG4gICAgICAgICAgZGF5anMobmV3V2Vla2x5RGVhZGxpbmUpLmZvcm1hdCgpLFxuICAgICAgICAgIG5ld1dlZWtseURlYWRsaW5lVHlwZSxcbiAgICAgICAgICBuZXdXZWVrbHlEdXJhdGlvbixcbiAgICAgICAgICB0b2FzdCxcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coZXZlbnQsICcgZXZlbnQgaW5zaWRlIGNyZWF0ZVdlZWtseVRhc2tOb3RlJylcblxuICAgICAgICBhd2FpdCBzdWJtaXRFdmVudEZvclF1ZXVlKGV2ZW50LCBjbGllbnQsIHN1YiwgdW5kZWZpbmVkLCB0b2FzdClcbiAgICAgICAgXG4gICAgICAgIHRhc2suZXZlbnRJZCA9IGV2ZW50Py5pZFxuXG4gICAgICAgIGF3YWl0IHVwZGF0ZVRhc2tJbkRiKFxuICAgICAgICAgIHRhc2ssXG4gICAgICAgIClcbiAgICAgICAgXG5cbiAgICAgICAgc2V0TmV3V2Vla2x5VGFza1RleHQoJycpXG4gICAgICAgIHNldE5ld1dlZWtseVByaW9yaXR5KDEpXG4gICAgICAgIHNldE5ld1dlZWtseURlYWRsaW5lKG5ldyBEYXRlKCkpXG4gICAgICAgIHNldE5ld1dlZWtseURlYWRsaW5lVHlwZSgnc29mdCcpXG4gICAgICAgIHNldE5ld1dlZWtseUR1cmF0aW9uKDEpXG5cbiAgICAgICAgcm91dGVyLnB1c2goeyBwYXRobmFtZTogJy9Qcm9ncmVzcy9Ub2RvL1VzZXJUYXNrJywgcXVlcnk6IHsgaXNVcGRhdGU6IHV1aWQoKSwgdGFza1R5cGU6IFdlZWtseVRhc2sgfX0pXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSB3ZWVrbHkgdGFzayBub3RlJylcbiAgICAgIH1cbiAgICB9XG4gICBcblxuICAgIGlmICh0YXNrVHlwZSA9PT0gJ0RhaWx5Jykge1xuICAgICAgIFxuICAgICAgcmV0dXJuIChcblxuXG4gICAgICAgIDxCb3gganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1hcm91bmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgPEJveD5cbiAgICAgICAgICAgIDxCb3ggbXQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAnbCcgfX0gIGp1c3RpZnlDb250ZW50PVwic3BhY2UtYXJvdW5kXCIgYWxpZ25JdGVtcz1cImZsZXgtc3RhcnRcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICAgIDxCb3ggPlxuICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTm90ZXNcIlxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVGhpcyBpcyBhbiBleGFtcGxlIHRhc2tcIlxuICAgICAgICAgICAgICAgICAgICAgIG11bHRpbGluZVxuICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mTGluZXM9ezN9XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld0RhaWx5VGFza1RleHR9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlOiB7IHRhcmdldDogeyB2YWx1ZTogc3RyaW5nIH0gfSkgPT4gc2V0TmV3RGFpbHlUYXNrVGV4dChlPy50YXJnZXQ/LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggbXQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAnbCcgfX0gIGp1c3RpZnlDb250ZW50PVwic3BhY2UtYXJvdW5kXCIgYWxpZ25JdGVtcz1cImZsZXgtc3RhcnRcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYm9keVwiPkRlYWRsaW5lPC9UZXh0PlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBEYXRlIGFuZCBUaW1lXCJcbiAgICAgICAgICAgICAgICBzaXplPVwibWRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRldGltZS1sb2NhbFwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXROZXdEYWlseURlYWRsaW5lKGRheWpzKGU/LnRhcmdldD8udmFsdWUsIFwiWVlZWS1NTS1ERFRISDptbVwiKS50b0RhdGUoKSkgXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17ZGF5anMobmV3RGFpbHlEZWFkbGluZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFRISDptbVwiKX1cblxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBtdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdsJyB9fSAganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1hcm91bmRcIiBhbGlnbkl0ZW1zPVwiZmxleC1zdGFydFwiPlxuICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtuZXdEYWlseURlYWRsaW5lVHlwZX0gb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdEYWlseURlYWRsaW5lVHlwZShlPy50YXJnZXQ/LnZhbHVlIGFzIERlYWRsaW5lVHlwZSl9IGNsYXNzTmFtZT1cInNlbGVjdCBzZWxlY3QtcHJpbWFyeSB3LWZ1bGwgbWF4LXcteHNcIj5cbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgZGVmYXVsdFZhbHVlPVwiUGljayBhIGRlYWRsaW5lXCI+UGljayBhIGRlYWRsaW5lPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICB7Xy5tYXAoZGVhZGxpbmVPcHRpb25zLCBvcHRpb24gPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgPntvcHRpb24ubGFiZWx9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8Qm94IG10PXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19ICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWFyb3VuZFwiIGFsaWduSXRlbXM9XCJmbGV4LXN0YXJ0XCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICBsYWJlbD1cIkR1cmF0aW9uIChtaW51dGVzKVwiXG4gICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZTogeyB0YXJnZXQ6IHsgdmFsdWU6IHN0cmluZyB9IH0pID0+IHNldE5ld0RhaWx5RHVyYXRpb24ocGFyc2VJbnQoZT8udGFyZ2V0Py52YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSwgMTApKX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtgJHtuZXdEYWlseUR1cmF0aW9ufWB9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjFcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3suLi4oc3R5bGVzPy50YXNrT3ZlcmxheTIpLH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveCBtdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdsJyB9fSAganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1hcm91bmRcIiBhbGlnbkl0ZW1zPVwiZmxleC1zdGFydFwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICAgICAgbGFiZWw9XCJQcmlvcml0eSAoID4gMClcIlxuICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiBvbkNoYW5nZURhaWx5UHJpb3JpdHkoZT8udGFyZ2V0Py52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17YCR7bmV3RGFpbHlQcmlvcml0eX1gfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIxXCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Li4uKHN0eWxlcz8udGFza092ZXJsYXkyKSx9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3ggbXQ9e3sgcGhvbmU6ICdtJywgdGFibGV0OiAnbCcgfX0ganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1hcm91bmRcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtjcmVhdGVEYWlseVRhc2tOb3RlfT5cbiAgICAgICAgICAgICAgICAgIEFkZFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICA8L0JveD5cbiAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICApXG4gICAgfSBlbHNlIGlmICh0YXNrVHlwZSA9PT0gJ1dlZWtseScpIHtcbiAgICAgIFxuICAgICAgcmV0dXJuIChcblxuICAgICAgICAgICAgPEJveCBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWFyb3VuZFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgPEJveD5cbiAgICAgICAgICAgICAgICA8Qm94IG10PXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19IGp1c3RpZnlDb250ZW50PVwic3BhY2UtYXJvdW5kXCIgYWxpZ25JdGVtcz1cImZsZXgtc3RhcnRcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuXG4gICAgICAgICAgICAgICAgICAgIDxCb3ggPlxuICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5vdGVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVGhpcyBpcyBhbiBleGFtcGxlIHRhc2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlsaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1iZXJPZkxpbmVzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0eWxlcz8udGFza092ZXJsYXl9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bmV3V2Vla2x5VGFza1RleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiBzZXROZXdXZWVrbHlUYXNrVGV4dChlPy50YXJnZXQ/LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgPEJveCBtdD17eyBwaG9uZTogJ20nLCB0YWJsZXQ6ICdsJyB9fSAganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1hcm91bmRcIiBhbGlnbkl0ZW1zPVwiZmxleC1zdGFydFwiIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0+XG4gICAgICAgICAgICAgICAgICA8VGV4dCB2YXJpYW50PVwiYm9keVwiPkRlYWRsaW5lPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VsZWN0IERhdGUgYW5kIFRpbWVcIlxuICAgICAgICAgICAgICAgICAgICBzaXplPVwibWRcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXROZXdXZWVrbHlEZWFkbGluZShkYXlqcyhlPy50YXJnZXQ/LnZhbHVlLCBcIllZWVktTU0tRERUSEg6bW1cIikudG9EYXRlKCkpICAgXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtkYXlqcyhuZXdXZWVrbHlEZWFkbGluZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFRISDptbVwiKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8Qm94IG10PXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19ICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWFyb3VuZFwiIGFsaWduSXRlbXM9XCJmbGV4LXN0YXJ0XCI+XG4gICAgICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtuZXdXZWVrbHlEZWFkbGluZVR5cGV9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmV3V2Vla2x5RGVhZGxpbmVUeXBlKGU/LnRhcmdldD8udmFsdWUgYXMgRGVhZGxpbmVUeXBlKX0gY2xhc3NOYW1lPVwic2VsZWN0IHNlbGVjdC1wcmltYXJ5IHctZnVsbCBtYXgtdy14c1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgZGVmYXVsdFZhbHVlPVwiUGljayBhIGRlYWRsaW5lXCI+UGljayBhIGRlYWRsaW5lPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAge18ubWFwKGRlYWRsaW5lT3B0aW9ucywgb3B0aW9uID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17b3B0aW9uLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+e29wdGlvbi5sYWJlbH08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8Qm94IG10PXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19ICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWFyb3VuZFwiIGFsaWduSXRlbXM9XCJmbGV4LXN0YXJ0XCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJEdXJhdGlvbiAobWludXRlcylcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlOiB7IHRhcmdldDogeyB2YWx1ZTogc3RyaW5nIH0gfSkgPT4gc2V0TmV3V2Vla2x5RHVyYXRpb24ocGFyc2VJbnQoZT8udGFyZ2V0Py52YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSwgMTApKX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Ake25ld1dlZWtseUR1cmF0aW9ufWB9XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Li4uKHN0eWxlcz8udGFza092ZXJsYXkyKSx9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgICAgICA8Qm94IG10PXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19ICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWFyb3VuZFwiIGFsaWduSXRlbXM9XCJmbGV4LXN0YXJ0XCIgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlByaW9yaXR5ICggPiAwKVwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IHsgdGFyZ2V0OiB7IHZhbHVlOiBzdHJpbmcgfSB9KSA9PiBvbkNoYW5nZVdlZWtseVByaW9yaXR5KGU/LnRhcmdldD8udmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YCR7bmV3V2Vla2x5UHJpb3JpdHl9YH1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIxXCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3suLi4oc3R5bGVzPy50YXNrT3ZlcmxheTIpLH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgICA8Qm94IG10PXt7IHBob25lOiAnbScsIHRhYmxldDogJ2wnIH19ICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWFyb3VuZFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19PlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17Y3JlYXRlV2Vla2x5VGFza05vdGV9PlxuICAgICAgICAgICAgICAgICAgICBBZGRcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgIFxuICAgICAgKVxuXG4gICAgfVxuICBcbiAgICBcbiAgICBcbiAgIFxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJBZGRUYXNrXG5cblxuXG4gICAgXG5cblxuICBcblxuXG5cblxuXG5cblxuXG5cbiJdfQ==