"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const supportContext_1 = require("../../contexts/support/supportContext");
const FeaturePageGuard_1 = __importDefault(require("../../lib/components/FeaturePageGuard"));
/**
 * A single article component for displaying search results.
 * It provides a clean, card-like interface for each article.
 */
const ArticleCard = ({ article }) => {
    return ((0, jsx_runtime_1.jsxs)("div", { style: {
            border: "1px solid #ddd",
            borderRadius: "8px",
            padding: "16px",
            marginBottom: "16px",
            backgroundColor: "#f9f9f9",
        }, children: [(0, jsx_runtime_1.jsx)("h3", { style: { marginTop: 0 }, children: article.title }), (0, jsx_runtime_1.jsx)("p", { children: article.content }), (0, jsx_runtime_1.jsxs)("div", { style: { fontSize: "0.9em", color: "#555" }, children: [(0, jsx_runtime_1.jsx)("span", { style: { fontWeight: "bold" }, children: "Category:" }), " ", article.category, " ", "| ", (0, jsx_runtime_1.jsx)("span", { style: { fontWeight: "bold" }, children: "Last Updated:" }), " ", article.lastUpdated] })] }));
};
/**
 * The main content component for the Internal Support Agent page.
 * It provides a search interface for the knowledge base and displays results.
 */
const SupportPageContent = () => {
    const { articles, loading, error, searchArticles } = (0, supportContext_1.useSupport)();
    const [query, setQuery] = (0, react_1.useState)("");
    // On component mount, perform an initial empty search
    // to populate the page with all available articles.
    (0, react_1.useEffect)(() => {
        searchArticles("");
    }, [searchArticles]);
    // Handles the form submission for searching articles.
    const handleSearch = (e) => {
        e.preventDefault();
        searchArticles(query);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { style: { padding: "20px", fontFamily: "Arial, sans-serif" }, children: [(0, jsx_runtime_1.jsx)("h1", { children: "Internal Support Agent" }), (0, jsx_runtime_1.jsx)("p", { children: "Search the knowledge base for articles, guides, and solutions to common questions." }), (0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSearch, style: { margin: "20px 0", display: "flex", gap: "10px" }, children: [(0, jsx_runtime_1.jsx)("input", { type: "text", value: query, onChange: (e) => setQuery(e.target.value), placeholder: "e.g., 'how to reset password'", style: {
                            width: "300px",
                            padding: "10px",
                            fontSize: "1em",
                            border: "1px solid #ccc",
                            borderRadius: "4px",
                        }, disabled: loading }), (0, jsx_runtime_1.jsx)("button", { type: "submit", disabled: loading, style: {
                            padding: "10px 15px",
                            cursor: "pointer",
                            border: "none",
                            backgroundColor: "purple",
                            color: "white",
                            borderRadius: "4px",
                        }, children: loading ? "Searching..." : "Search" })] }), error && ((0, jsx_runtime_1.jsxs)("div", { style: { color: "red", marginBottom: "20px" }, children: ["Error: ", error.message] })), (0, jsx_runtime_1.jsx)("div", { children: loading ? ((0, jsx_runtime_1.jsx)("p", { children: "Loading articles..." })) : articles.length > 0 ? (articles.map((article) => ((0, jsx_runtime_1.jsx)(ArticleCard, { article: article }, article.id)))) : ((0, jsx_runtime_1.jsx)("p", { children: "No articles found. Try a different search term or an empty search to see all articles." })) })] }));
};
/**
 * The main Support page component.
 * It wraps the page content with the SupportProvider to ensure
 * the context is available to all child components.
 */
const SupportPage = () => ((0, jsx_runtime_1.jsx)(FeaturePageGuard_1.default, { role: "support", roleName: "Support Agent Skill", children: (0, jsx_runtime_1.jsx)(supportContext_1.SupportProvider, { children: (0, jsx_runtime_1.jsx)(SupportPageContent, {}) }) }));
exports.default = SupportPage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsaUNBQW1EO0FBQ25ELDBFQUkrQztBQUMvQyw2RkFBcUU7QUFFckU7OztHQUdHO0FBQ0gsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFBd0IsRUFBRSxFQUFFO0lBQ3hELE9BQU8sQ0FDTCxpQ0FDRSxLQUFLLEVBQUU7WUFDTCxNQUFNLEVBQUUsZ0JBQWdCO1lBQ3hCLFlBQVksRUFBRSxLQUFLO1lBQ25CLE9BQU8sRUFBRSxNQUFNO1lBQ2YsWUFBWSxFQUFFLE1BQU07WUFDcEIsZUFBZSxFQUFFLFNBQVM7U0FDM0IsYUFFRCwrQkFBSSxLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLFlBQUcsT0FBTyxDQUFDLEtBQUssR0FBTSxFQUNqRCx3Q0FBSSxPQUFPLENBQUMsT0FBTyxHQUFLLEVBQ3hCLGlDQUFLLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxhQUM5QyxpQ0FBTSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLDBCQUFrQixPQUFFLE9BQU8sQ0FBQyxRQUFRLEVBQUUsR0FBRyxRQUMxRSxpQ0FBTSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLDhCQUFzQixFQUFDLEdBQUcsRUFDOUQsT0FBTyxDQUFDLFdBQVcsSUFDaEIsSUFDRixDQUNQLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRjs7O0dBR0c7QUFDSCxNQUFNLGtCQUFrQixHQUFHLEdBQUcsRUFBRTtJQUM5QixNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLEdBQUcsSUFBQSwyQkFBVSxHQUFFLENBQUM7SUFDbEUsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFFdkMsc0RBQXNEO0lBQ3RELG9EQUFvRDtJQUNwRCxJQUFBLGlCQUFTLEVBQUMsR0FBRyxFQUFFO1FBQ2IsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JCLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFFckIsc0RBQXNEO0lBQ3RELE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBa0IsRUFBRSxFQUFFO1FBQzFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUNuQixjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDeEIsQ0FBQyxDQUFDO0lBRUYsT0FBTyxDQUNMLGlDQUFLLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLG1CQUFtQixFQUFFLGFBQzlELG9FQUErQixFQUMvQiwrSEFHSSxFQUVKLGtDQUNFLFFBQVEsRUFBRSxZQUFZLEVBQ3RCLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLGFBRXpELGtDQUNFLElBQUksRUFBQyxNQUFNLEVBQ1gsS0FBSyxFQUFFLEtBQUssRUFDWixRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUN6QyxXQUFXLEVBQUMsK0JBQStCLEVBQzNDLEtBQUssRUFBRTs0QkFDTCxLQUFLLEVBQUUsT0FBTzs0QkFDZCxPQUFPLEVBQUUsTUFBTTs0QkFDZixRQUFRLEVBQUUsS0FBSzs0QkFDZixNQUFNLEVBQUUsZ0JBQWdCOzRCQUN4QixZQUFZLEVBQUUsS0FBSzt5QkFDcEIsRUFDRCxRQUFRLEVBQUUsT0FBTyxHQUNqQixFQUNGLG1DQUNFLElBQUksRUFBQyxRQUFRLEVBQ2IsUUFBUSxFQUFFLE9BQU8sRUFDakIsS0FBSyxFQUFFOzRCQUNMLE9BQU8sRUFBRSxXQUFXOzRCQUNwQixNQUFNLEVBQUUsU0FBUzs0QkFDakIsTUFBTSxFQUFFLE1BQU07NEJBQ2QsZUFBZSxFQUFFLFFBQVE7NEJBQ3pCLEtBQUssRUFBRSxPQUFPOzRCQUNkLFlBQVksRUFBRSxLQUFLO3lCQUNwQixZQUVBLE9BQU8sQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQzdCLElBQ0osRUFFTixLQUFLLElBQUksQ0FDUixpQ0FBSyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsd0JBQ3hDLEtBQUssQ0FBQyxPQUFPLElBQ2pCLENBQ1AsRUFFRCwwQ0FDRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQ1QsZ0VBQTBCLENBQzNCLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUN4QixRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUN4Qix1QkFBQyxXQUFXLElBQWtCLE9BQU8sRUFBRSxPQUFPLElBQTVCLE9BQU8sQ0FBQyxFQUFFLENBQXNCLENBQ25ELENBQUMsQ0FDSCxDQUFDLENBQUMsQ0FBQyxDQUNGLG1JQUdJLENBQ0wsR0FDRyxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGOzs7O0dBSUc7QUFDSCxNQUFNLFdBQVcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUN4Qix1QkFBQywwQkFBZ0IsSUFBQyxJQUFJLEVBQUMsU0FBUyxFQUFDLFFBQVEsRUFBQyxxQkFBcUIsWUFDN0QsdUJBQUMsZ0NBQWUsY0FDZCx1QkFBQyxrQkFBa0IsS0FBRyxHQUNOLEdBQ0QsQ0FDcEIsQ0FBQztBQUVGLGtCQUFlLFdBQVcsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge1xuICB1c2VTdXBwb3J0LFxuICBTdXBwb3J0UHJvdmlkZXIsXG4gIEFydGljbGUsXG59IGZyb20gXCIuLi8uLi9jb250ZXh0cy9zdXBwb3J0L3N1cHBvcnRDb250ZXh0XCI7XG5pbXBvcnQgRmVhdHVyZVBhZ2VHdWFyZCBmcm9tIFwiLi4vLi4vbGliL2NvbXBvbmVudHMvRmVhdHVyZVBhZ2VHdWFyZFwiO1xuXG4vKipcbiAqIEEgc2luZ2xlIGFydGljbGUgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHNlYXJjaCByZXN1bHRzLlxuICogSXQgcHJvdmlkZXMgYSBjbGVhbiwgY2FyZC1saWtlIGludGVyZmFjZSBmb3IgZWFjaCBhcnRpY2xlLlxuICovXG5jb25zdCBBcnRpY2xlQ2FyZCA9ICh7IGFydGljbGUgfTogeyBhcnRpY2xlOiBBcnRpY2xlIH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBzdHlsZT17e1xuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNkZGRcIixcbiAgICAgICAgYm9yZGVyUmFkaXVzOiBcIjhweFwiLFxuICAgICAgICBwYWRkaW5nOiBcIjE2cHhcIixcbiAgICAgICAgbWFyZ2luQm90dG9tOiBcIjE2cHhcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmOWY5ZjlcIixcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGgzIHN0eWxlPXt7IG1hcmdpblRvcDogMCB9fT57YXJ0aWNsZS50aXRsZX08L2gzPlxuICAgICAgPHA+e2FydGljbGUuY29udGVudH08L3A+XG4gICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiBcIjAuOWVtXCIsIGNvbG9yOiBcIiM1NTVcIiB9fT5cbiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFdlaWdodDogXCJib2xkXCIgfX0+Q2F0ZWdvcnk6PC9zcGFuPiB7YXJ0aWNsZS5jYXRlZ29yeX17XCIgXCJ9XG4gICAgICAgIHwgPHNwYW4gc3R5bGU9e3sgZm9udFdlaWdodDogXCJib2xkXCIgfX0+TGFzdCBVcGRhdGVkOjwvc3Bhbj57XCIgXCJ9XG4gICAgICAgIHthcnRpY2xlLmxhc3RVcGRhdGVkfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vKipcbiAqIFRoZSBtYWluIGNvbnRlbnQgY29tcG9uZW50IGZvciB0aGUgSW50ZXJuYWwgU3VwcG9ydCBBZ2VudCBwYWdlLlxuICogSXQgcHJvdmlkZXMgYSBzZWFyY2ggaW50ZXJmYWNlIGZvciB0aGUga25vd2xlZGdlIGJhc2UgYW5kIGRpc3BsYXlzIHJlc3VsdHMuXG4gKi9cbmNvbnN0IFN1cHBvcnRQYWdlQ29udGVudCA9ICgpID0+IHtcbiAgY29uc3QgeyBhcnRpY2xlcywgbG9hZGluZywgZXJyb3IsIHNlYXJjaEFydGljbGVzIH0gPSB1c2VTdXBwb3J0KCk7XG4gIGNvbnN0IFtxdWVyeSwgc2V0UXVlcnldID0gdXNlU3RhdGUoXCJcIik7XG5cbiAgLy8gT24gY29tcG9uZW50IG1vdW50LCBwZXJmb3JtIGFuIGluaXRpYWwgZW1wdHkgc2VhcmNoXG4gIC8vIHRvIHBvcHVsYXRlIHRoZSBwYWdlIHdpdGggYWxsIGF2YWlsYWJsZSBhcnRpY2xlcy5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZWFyY2hBcnRpY2xlcyhcIlwiKTtcbiAgfSwgW3NlYXJjaEFydGljbGVzXSk7XG5cbiAgLy8gSGFuZGxlcyB0aGUgZm9ybSBzdWJtaXNzaW9uIGZvciBzZWFyY2hpbmcgYXJ0aWNsZXMuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2VhcmNoQXJ0aWNsZXMocXVlcnkpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiBcIjIwcHhcIiwgZm9udEZhbWlseTogXCJBcmlhbCwgc2Fucy1zZXJpZlwiIH19PlxuICAgICAgPGgxPkludGVybmFsIFN1cHBvcnQgQWdlbnQ8L2gxPlxuICAgICAgPHA+XG4gICAgICAgIFNlYXJjaCB0aGUga25vd2xlZGdlIGJhc2UgZm9yIGFydGljbGVzLCBndWlkZXMsIGFuZCBzb2x1dGlvbnMgdG8gY29tbW9uXG4gICAgICAgIHF1ZXN0aW9ucy5cbiAgICAgIDwvcD5cblxuICAgICAgPGZvcm1cbiAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVNlYXJjaH1cbiAgICAgICAgc3R5bGU9e3sgbWFyZ2luOiBcIjIwcHggMFwiLCBkaXNwbGF5OiBcImZsZXhcIiwgZ2FwOiBcIjEwcHhcIiB9fVxuICAgICAgPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFsdWU9e3F1ZXJ5fVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UXVlcnkoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZS5nLiwgJ2hvdyB0byByZXNldCBwYXNzd29yZCdcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICB3aWR0aDogXCIzMDBweFwiLFxuICAgICAgICAgICAgcGFkZGluZzogXCIxMHB4XCIsXG4gICAgICAgICAgICBmb250U2l6ZTogXCIxZW1cIixcbiAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgI2NjY1wiLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiBcIjRweFwiLFxuICAgICAgICAgIH19XG4gICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XG4gICAgICAgIC8+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgcGFkZGluZzogXCIxMHB4IDE1cHhcIixcbiAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInB1cnBsZVwiLFxuICAgICAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCI0cHhcIixcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAge2xvYWRpbmcgPyBcIlNlYXJjaGluZy4uLlwiIDogXCJTZWFyY2hcIn1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Zvcm0+XG5cbiAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgY29sb3I6IFwicmVkXCIsIG1hcmdpbkJvdHRvbTogXCIyMHB4XCIgfX0+XG4gICAgICAgICAgRXJyb3I6IHtlcnJvci5tZXNzYWdlfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIDxkaXY+XG4gICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgIDxwPkxvYWRpbmcgYXJ0aWNsZXMuLi48L3A+XG4gICAgICAgICkgOiBhcnRpY2xlcy5sZW5ndGggPiAwID8gKFxuICAgICAgICAgIGFydGljbGVzLm1hcCgoYXJ0aWNsZSkgPT4gKFxuICAgICAgICAgICAgPEFydGljbGVDYXJkIGtleT17YXJ0aWNsZS5pZH0gYXJ0aWNsZT17YXJ0aWNsZX0gLz5cbiAgICAgICAgICApKVxuICAgICAgICApIDogKFxuICAgICAgICAgIDxwPlxuICAgICAgICAgICAgTm8gYXJ0aWNsZXMgZm91bmQuIFRyeSBhIGRpZmZlcmVudCBzZWFyY2ggdGVybSBvciBhbiBlbXB0eSBzZWFyY2ggdG9cbiAgICAgICAgICAgIHNlZSBhbGwgYXJ0aWNsZXMuXG4gICAgICAgICAgPC9wPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vKipcbiAqIFRoZSBtYWluIFN1cHBvcnQgcGFnZSBjb21wb25lbnQuXG4gKiBJdCB3cmFwcyB0aGUgcGFnZSBjb250ZW50IHdpdGggdGhlIFN1cHBvcnRQcm92aWRlciB0byBlbnN1cmVcbiAqIHRoZSBjb250ZXh0IGlzIGF2YWlsYWJsZSB0byBhbGwgY2hpbGQgY29tcG9uZW50cy5cbiAqL1xuY29uc3QgU3VwcG9ydFBhZ2UgPSAoKSA9PiAoXG4gIDxGZWF0dXJlUGFnZUd1YXJkIHJvbGU9XCJzdXBwb3J0XCIgcm9sZU5hbWU9XCJTdXBwb3J0IEFnZW50IFNraWxsXCI+XG4gICAgPFN1cHBvcnRQcm92aWRlcj5cbiAgICAgIDxTdXBwb3J0UGFnZUNvbnRlbnQgLz5cbiAgICA8L1N1cHBvcnRQcm92aWRlcj5cbiAgPC9GZWF0dXJlUGFnZUd1YXJkPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgU3VwcG9ydFBhZ2U7XG4iXX0=