"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createWeeklyDeadline = exports.createDailyDeadline = exports.submitEventForQueue = exports.submitCalendarForQueue = exports.createDeadlineEventForTaskList = exports.createDeadlineForTask = exports.editEventForTask = exports.deleteEventInCalendarForTask = exports.deleteEvent = exports.createEventForTask = exports.createEventFromUTCForTask = exports.removeEventForTask = exports.getEventForTask = void 0;
const session_1 = __importDefault(require("supertokens-web-js/recipe/session"));
const date_utils_1 = require("@lib/date-utils");
const lodash_1 = __importDefault(require("lodash"));
const UserCreateCalendarHelper_1 = require("@lib/Calendar/UserCreateCalendarHelper");
const googleCalendarHelper_1 = require("@lib/calendarLib/googleCalendarHelper");
const constants_1 = require("@lib/calendarLib/constants");
const constants_2 = require("@lib/constants");
const axios_1 = __importDefault(require("axios"));
const UserEditCalendarHelper_1 = require("@lib/Calendar/UserEditCalendarHelper");
const calendarDbHelper_1 = require("@lib/calendarLib/calendarDbHelper");
const getEventById_1 = __importDefault(require("@lib/apollo/gql/getEventById"));
const deleteEventById_1 = __importDefault(require("@lib/apollo/gql/deleteEventById"));
const getCalendarById_1 = __importDefault(require("@lib/apollo/gql/getCalendarById"));
const AttendeeHelper_1 = require("@lib/Calendar/Attendee/AttendeeHelper");
const ConferenceHelper_1 = require("@lib/Calendar/Conference/ConferenceHelper");
const ReminderHelper_1 = require("@lib/Calendar/Reminder/ReminderHelper");
const zoomMeetingHelper_1 = require("@lib/zoom/zoomMeetingHelper");
const UserCreateCalendarHelper_2 = require("@lib/Calendar/UserCreateCalendarHelper");
const UserTaskHelper3_1 = require("./UserTaskHelper3");
const constants_3 = require("./constants");
const getEventForTask = async (eventId, client) => {
    try {
        const event = (await client.query({
            query: getEventById_1.default,
            variables: {
                id: eventId,
            },
        })).data?.Event_by_pk;
        return event;
    }
    catch (e) {
        console.log(e, ' unable to get event for task');
    }
};
exports.getEventForTask = getEventForTask;
const removeEventForTask = async (client, task, userId) => {
    try {
        await (0, exports.deleteEventInCalendarForTask)(task?.eventId, client, userId);
        task.startDate = null;
        task.endDate = null;
        task.nextDay = null;
        task.eventId = null;
        task.softDeadline = null;
        task.hardDeadline = null;
        await (0, UserTaskHelper3_1.updateTaskByIdInDb)(client, task);
    }
    catch (e) {
        console.log(e, ' unable to delete event for task');
    }
};
exports.removeEventForTask = removeEventForTask;
const createEventFromUTCForTask = async (startDate, endDate, userId, client, taskId, taskType, recurringEndDate, frequency, interval, title, deadlineAlarms, notes, byWeekDay, hardDeadline, softDeadline, selectedCalendarId) => {
    try {
        return (0, UserCreateCalendarHelper_1.createNewEvent)(date_utils_1.dayjs.utc(startDate).toISOString(), date_utils_1.dayjs.utc(endDate).toISOString(), userId, client, selectedCalendarId, undefined, title, false, recurringEndDate, frequency, interval, deadlineAlarms, notes, undefined, false, false, false, true, false, false, false, false, date_utils_1.dayjs.tz.guess(), taskId, undefined, undefined, undefined, undefined, undefined, false, false, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, title, 'opaque', 'private', undefined, undefined, undefined, undefined, date_utils_1.dayjs.tz.guess(), undefined, undefined, deadlineAlarms?.length > 0, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, taskType === 'Daily', taskType === 'Weekly', false, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, true, undefined, undefined, undefined, undefined, undefined, true, true, hardDeadline, softDeadline, undefined, undefined, undefined, undefined, (0, date_utils_1.dayjs)(endDate).diff((0, date_utils_1.dayjs)(startDate), 'minute'), undefined, true, undefined, undefined, byWeekDay);
    }
    catch (e) {
        console.log(e, ' unable to create event from utc');
    }
};
exports.createEventFromUTCForTask = createEventFromUTCForTask;
const createEventForTask = async (startDate, endDate, userId, client, taskId, taskType, priority, recurringEndDate, frequency, interval, title, deadlineAlarms, notes, byWeekDay, hardDeadline, softDeadline, selectedCalendarId) => {
    try {
        return (0, UserCreateCalendarHelper_1.createNewEvent)(startDate, endDate, userId, client, selectedCalendarId, undefined, title, false, recurringEndDate, frequency, interval, deadlineAlarms, notes, undefined, false, false, false, true, false, false, false, false, date_utils_1.dayjs.tz.guess(), taskId, undefined, undefined, undefined, undefined, undefined, false, false, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, title, 'opaque', 'private', undefined, undefined, undefined, undefined, date_utils_1.dayjs.tz.guess(), undefined, undefined, deadlineAlarms?.length > 0, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, taskType === 'Daily', taskType === 'Weekly', false, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, true, undefined, undefined, undefined, undefined, undefined, true, true, hardDeadline, softDeadline, undefined, undefined, undefined, undefined, (0, date_utils_1.dayjs)(endDate).diff((0, date_utils_1.dayjs)(startDate), 'minute'), undefined, true, undefined, undefined, byWeekDay, priority);
    }
    catch (e) {
        console.log(e, ' unable to create event from utc');
    }
};
exports.createEventForTask = createEventForTask;
const deleteEvent = async (client, userId, eventId) => {
    try {
        console.log(eventId, userId, ' eventId, userId inside deleteEvent');
        await (0, AttendeeHelper_1.deleteAttendeesForEvent)(client, eventId);
        const originalEvent = await (0, calendarDbHelper_1.getEventWithId)(client, eventId);
        console.log(originalEvent, ' originalEvent inside deleteEvent');
        if (originalEvent?.conferenceId) {
            const isZoomAvailable = await (0, zoomMeetingHelper_1.zoomAvailable)(client, userId);
            const conference = await (0, UserCreateCalendarHelper_2.getConferenceInDb)(client, originalEvent?.conferenceId);
            if (isZoomAvailable && conference?.app === 'zoom') {
                await (0, zoomMeetingHelper_1.deleteZoomMeeting)(userId, parseInt(originalEvent?.conferenceId, 10));
            }
            await (0, ConferenceHelper_1.deleteConferencesWithIds)(client, [originalEvent?.conferenceId]);
        }
        await (0, ReminderHelper_1.removeRemindersForEvent)(client, eventId);
        const url = constants_2.methodToSearchIndexAuthUrl;
        const token = await session_1.default.getAccessToken();
        const config = {
            headers: {
                Authorization: `Bearer ${token}`,
                'Content-Type': 'application/json',
                Accept: 'application/json',
            },
        };
        const searchData = {
            search: `${originalEvent?.summary}${originalEvent?.notes ? `: ${originalEvent?.notes}` : ''}`,
            method: 'search',
        };
        const results = await axios_1.default.post(url, searchData, config);
        console.log(results, ' results inside deleteEvent');
        console.log(results?.data, ' results?.data inside deleteEvent');
        console.log(results?.data?.event?.hits?.hits?.[0]?._id, ' results?.data?.event?.hits?.hits?.[0]?._id inside deleteEvent');
        if (results?.data?.event?.hits?.hits?.[0]?._id === eventId) {
            console.log('event exists, delete it');
            const deleteData = {
                eventId: results?.data?.event?.hits?.hits?.[0]?._id,
                method: 'delete',
            };
            const deleteResults = await axios_1.default.post(url, deleteData, config);
            console.log(deleteResults, ' deleteResults in search');
        }
        await (0, exports.deleteEventInCalendarForTask)(eventId, client, userId);
    }
    catch (e) {
        console.log(e, 'error for deleteEvent');
    }
};
exports.deleteEvent = deleteEvent;
const deleteEventInCalendarForTask = async (eventId, client, userId) => {
    try {
        console.log(eventId, userId, ' eventId, userId delEventInAppForTask');
        const eventDoc = (await client.query({
            query: getEventById_1.default,
            variables: {
                id: eventId,
            },
        }))?.data?.Event_by_pk;
        console.log(eventDoc, ' eventDoc inside delEventInAppForTask');
        if (eventDoc?.id) {
            const calendarId = eventDoc?.calendarId;
            const calendarDoc = (await client.query({
                query: getCalendarById_1.default,
                variables: {
                    id: calendarId,
                },
            })).data?.Calendar_by_pk;
            console.log(calendarDoc, ' calendarDoc inside delEventInAppForTask');
            if (calendarDoc?.id) {
                const resource = calendarDoc?.resource;
                console.log(calendarDoc?.resource, ' calendarDoc?.resource inside delEventInAppForTask');
                if (resource === constants_1.googleResourceName) {
                    console.log(userId, calendarId, eventId, ' userId, calendarId, eventId inside delEventinAppForTask');
                    await (0, googleCalendarHelper_1.deleteGoogleEvent)(client, userId, calendarId, eventId.split('#')[0]);
                    await client.mutate({
                        mutation: deleteEventById_1.default,
                        variables: {
                            id: eventId,
                        },
                        update(cache, { data }) {
                            const deletedEvent = data?.delete_Event_by_pk;
                            const normalizedId = cache.identify({
                                id: deletedEvent.id,
                                __typename: deletedEvent.__typename,
                            });
                            cache.evict({ id: normalizedId });
                            cache.gc();
                        },
                    });
                }
            }
        }
    }
    catch (e) {
        console.log(e, ' unable to delete event in app');
    }
};
exports.deleteEventInCalendarForTask = deleteEventInCalendarForTask;
const editEventForTask = async (id, startDate, endDate, userId, client, selectedCalendarId, categoryIds, title, allDay, recurringEndDate, frequency, interval, alarms, notes, location, isFollowUp, isPreEvent, isPostEvent, modifiable, anyoneCanAddSelf, guestsCanInviteOthers, guestsCanSeeOtherGuests, originalAllDay, timezone, taskId, taskType, followUpEventId, preEventId, postEventId, forEventId, zoomMeet, googleMeet, meetingTypeString, zoomPassword, zoomPrivateMeeting, attendees, conferenceId, maxAttendees, sendUpdates, status, summary, transparency, visibility, recurringEventId, iCalUID, htmlLink, colorId, originalTimezone, backgroundColor, foregroundColor, useDefaultAlarms, positiveImpactScore, negativeImpactScore, positiveImpactDayOfWeek, positiveImpactTime, negativeImpactDayOfWeek, negativeImpactTime, preferredDayOfWeek, preferredTime, isExternalMeeting, isExternalMeetingModifiable, isMeetingModifiable, isMeeting, dailyTaskList, weeklyTaskList, isBreak, preferredStartTimeRange, preferredEndTimeRange, copyAvailability, copyTimeBlocking, copyTimePreference, copyReminders, copyPriorityLevel, copyModifiable, copyCategories, copyIsBreak, timeBlocking, userModifiedAvailability, userModifiedTimeBlocking, userModifiedTimePreference, userModifiedReminders, userModifiedPriorityLevel, userModifiedCategories, userModifiedModifiable, userModifiedIsBreak, hardDeadline, softDeadline, copyIsMeeting, copyIsExternalMeeting, userModifiedIsMeeting, userModifiedIsExternalMeeting, duration, copyDuration, userModifiedDuration, method, unlink, byWeekDay, priority) => {
    try {
        console.log(hardDeadline, softDeadline, ' hardDeadline, softDeadline inside editEventForTask');
        console.log(categoryIds, ' categoryIds inside editEventForTask');
        return (0, UserEditCalendarHelper_1.updateEvent)(id, startDate, endDate, userId, client, selectedCalendarId, categoryIds, title, allDay, recurringEndDate, frequency, interval, alarms, notes, location, isFollowUp, isPreEvent, isPostEvent, modifiable, anyoneCanAddSelf, guestsCanInviteOthers, guestsCanSeeOtherGuests, originalAllDay, timezone, taskId, taskType, followUpEventId, preEventId, postEventId, forEventId, zoomMeet, googleMeet, meetingTypeString, zoomPassword, zoomPrivateMeeting, attendees, conferenceId, maxAttendees, sendUpdates, status, summary, transparency, visibility, recurringEventId, iCalUID, htmlLink, colorId, originalTimezone, backgroundColor, foregroundColor, useDefaultAlarms, positiveImpactScore, negativeImpactScore, positiveImpactDayOfWeek, positiveImpactTime, negativeImpactDayOfWeek, negativeImpactTime, preferredDayOfWeek, preferredTime, isExternalMeeting, isExternalMeetingModifiable, isMeetingModifiable, isMeeting, dailyTaskList, weeklyTaskList, isBreak, preferredStartTimeRange, preferredEndTimeRange, copyAvailability, copyTimeBlocking, copyTimePreference, copyReminders, copyPriorityLevel, copyModifiable, copyCategories, copyIsBreak, timeBlocking, userModifiedAvailability, userModifiedTimeBlocking, userModifiedTimePreference, userModifiedReminders, userModifiedPriorityLevel, userModifiedCategories, userModifiedModifiable, userModifiedIsBreak, hardDeadline, softDeadline, copyIsMeeting, copyIsExternalMeeting, userModifiedIsMeeting, userModifiedIsExternalMeeting, duration, copyDuration, userModifiedDuration, method, unlink, byWeekDay, priority);
    }
    catch (e) {
        console.log(e, ' unable to edit event in app');
    }
};
exports.editEventForTask = editEventForTask;
const createDeadlineForTask = async (client, userId, title, duration, taskId, taskType, priority, softDeadline, hardDeadline, reminders, categoryIds, colorId, backgroundColor, notes) => {
    try {
        const calendarDoc = await (0, UserCreateCalendarHelper_1.getCalendarInDb)(client, userId, undefined, true);
        const calendarId = calendarDoc?.id;
        if (calendarId) {
            const eventId = await (0, UserCreateCalendarHelper_1.createNewEvent)((0, date_utils_1.dayjs)().add(1, 'h').format(), (0, date_utils_1.dayjs)().add(1, 'h').add(duration, 'minute').format(), userId, client, calendarId, categoryIds, title, false, undefined, undefined, undefined, reminders, notes || title, undefined, false, false, false, true, false, false, false, false, date_utils_1.dayjs.tz.guess(), taskId, taskType, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, title, 'opaque', 'private', undefined, undefined, undefined, colorId, undefined, backgroundColor, undefined, reminders?.length === 0, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, taskType === 'Daily', taskType === 'Weekly', false, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, true, true, categoryIds?.length > 0, true, true, true, true, hardDeadline, softDeadline, undefined, undefined, undefined, undefined, duration, undefined, true, undefined, undefined, undefined, priority);
            return eventId;
        }
    }
    catch (e) {
        console.log(e, ' unable to create deadline in app');
    }
};
exports.createDeadlineForTask = createDeadlineForTask;
const createDeadlineEventForTaskList = async (client, userId, title, duration, taskId, taskType, priority, softDeadline, hardDeadline) => {
    try {
        let calendarDoc = null;
        calendarDoc = await (0, UserCreateCalendarHelper_1.getCalendarInDb)(client, userId, undefined, true);
        console.log(calendarDoc, ' calendarDoc inside createDeadlineEventForTaskList');
        console.log(calendarDoc?.resource, ' global calendarDoc resource inside createDeadlineEventForTaskList');
        console.log(hardDeadline, softDeadline, ' hardDeadline, softDeadline inside createDeadlineEventForTaskList');
        if (!calendarDoc || calendarDoc?.resource !== constants_1.googleResourceName) {
            calendarDoc = await (0, UserCreateCalendarHelper_1.getCalendarInDb)(client, userId, undefined, undefined, constants_1.googleResourceName);
        }
        console.log(calendarDoc, ' calendarDoc inside createDeadlineEventForTaskList');
        const calendarId = calendarDoc?.id;
        console.log(calendarId, ' calendarId inside createDeadlineEventForTaskList');
        console.log(calendarDoc?.resource, ' resource inside createDeadlineEventForTaskList');
        if (calendarId && calendarDoc?.resource === constants_1.googleResourceName) {
            const colorId = calendarDoc?.colorId;
            const backgroundColor = calendarDoc?.backgroundColor;
            const startDate = (0, date_utils_1.dayjs)().add(1, 'h').format();
            const endDate = (0, date_utils_1.dayjs)().add(1, 'h').add(duration, 'minute').format();
            const dailyTaskList = taskType === 'Daily';
            const weeklyTaskList = taskType === 'Weekly';
            const eventId = await (0, UserCreateCalendarHelper_1.createNewEvent)(startDate, endDate, userId, client, calendarId, undefined, title, false, undefined, undefined, undefined, undefined, title, undefined, false, false, false, true, false, false, false, false, date_utils_1.dayjs.tz.guess(), taskId, taskType, undefined, undefined, undefined, undefined, false, false, undefined, undefined, false, undefined, undefined, undefined, undefined, undefined, title, 'opaque', 'private', undefined, undefined, undefined, undefined, undefined, backgroundColor, undefined, true, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, false, true, true, false, dailyTaskList, weeklyTaskList, false, undefined, undefined, false, false, false, false, false, false, false, false, undefined, false, false, false, false, true, false, true, true, hardDeadline, softDeadline, false, false, true, true, duration, false, true, 'update', false, undefined, priority);
            console.log(eventId, ' eventId inside createDeadlineEventForTaskList');
            return {
                id: `${eventId}#${calendarId}`,
                eventId,
                userId,
                dailyTaskList,
                weeklyTaskList,
                calendarId,
                title,
                duration,
                taskId,
                taskType,
                priority,
                colorId,
                backgroundColor,
                startDate,
                endDate,
                createdDate: (0, date_utils_1.dayjs)().toISOString(),
                updatedAt: (0, date_utils_1.dayjs)().toISOString(),
                deleted: false,
                timezone: date_utils_1.dayjs.tz.guess(),
                isFollowUp: false,
                isPreEvent: false,
                isPostEvent: false,
                modifiable: true,
                anyoneCanAddSelf: false,
                guestsCanInviteOthers: false,
                guestsCanSeeOtherGuests: false,
                originalStartDate: (0, date_utils_1.dayjs)().format(),
                originalAllDay: false,
                summary: title,
                transparency: 'opaque',
                visibility: 'private',
                isBreak: false,
                userModifiedAvailability: false,
                userModifiedPriorityLevel: true,
                userModifiedModifiable: true,
                userModifiedIsBreak: true,
                softDeadline,
                hardDeadline,
                userModifiedDuration: true,
                method: 'update',
                notes: title,
            };
        }
    }
    catch (e) {
        console.log(e, ' unable to create event in app');
    }
};
exports.createDeadlineEventForTaskList = createDeadlineEventForTaskList;
const submitCalendarForQueue = async (client, userId, startDate, endDate, toast) => {
    try {
        const calendar = await (0, UserCreateCalendarHelper_1.getCalendarInDb)(client, userId, undefined, undefined, constants_1.googleResourceName);
        if (!calendar) {
            console.log('no google calendar inside submitCalendarForQueue');
            return;
        }
        const token = await session_1.default.getAccessToken();
        const config = {
            headers: {
                Authorization: `Bearer ${token}`,
                'Content-Type': 'application/json',
                Accept: 'application/json',
            },
        };
        const body = {
            userId,
            startDate,
            endDate: endDate,
            timezone: date_utils_1.dayjs.tz.guess(),
        };
        const url = constants_2.calendarToQueueAuthUrl;
        const results = await axios_1.default.post(url, body, config);
        if (results.data.message) {
            if (toast) {
                toast({
                    status: 'success',
                    title: 'Running Schedule Assist',
                    description: 'Check back in a few minutes',
                    duration: 9000,
                    isClosable: true,
                });
            }
        }
    }
    catch (e) {
        console.log(e, ' unable to create event in app');
    }
};
exports.submitCalendarForQueue = submitCalendarForQueue;
const submitEventForQueue = async (event, client, userId, isDaily, toast) => {
    try {
        const calendar = await (0, UserCreateCalendarHelper_1.getCalendarInDb)(client, userId, undefined, undefined, constants_1.googleResourceName);
        if (!calendar) {
            console.log('no google calendar inside submitEventForQueue');
            return;
        }
        const token = await session_1.default.getAccessToken();
        const url = isDaily === true ? constants_2.eventToQueueShortAuthUrl : constants_2.eventToQueueAuthUrl;
        const config = {
            headers: {
                Authorization: `Bearer ${token}`,
                'Content-Type': 'application/json',
                Accept: 'application/json',
            },
        };
        const filteredEvent = lodash_1.default.omit(event, ['__typename']);
        const results = await axios_1.default.post(url, filteredEvent, config);
        if (results.data.message) {
            if (toast) {
                toast({
                    status: 'success',
                    title: 'Event added to queue',
                    description: 'Event added to queue for schedule assist',
                    duration: 9000,
                    isClosable: true,
                });
            }
        }
    }
    catch (e) {
        console.log(e, 'error for changeLink');
    }
};
exports.submitEventForQueue = submitEventForQueue;
const createDailyDeadline = async (client, userId, taskId, newDailyTaskText, newDailyPriority, newDailyDeadline, newDailyDeadlineType, newDailyDuration, toast) => {
    try {
        const notes = newDailyTaskText;
        if (!notes) {
            if (toast) {
                toast({
                    status: 'error',
                    title: 'Empty',
                    description: 'Your task is empty.',
                    duration: 9000,
                    isClosable: true,
                });
            }
            return;
        }
        console.log(newDailyDeadline, newDailyDeadlineType, ' newDailyDeadline, newDailyDeadlineType inside createDailyDeadline');
        const event = await (0, exports.createDeadlineEventForTaskList)(client, userId, notes, newDailyDuration, taskId, 'Daily', newDailyPriority, newDailyDeadlineType === 'soft' ? newDailyDeadline : null, newDailyDeadlineType === 'hard' ? newDailyDeadline : null);
        console.log(event, 'event inside createDailyDeadline');
        if (event) {
            return event;
        }
        return null;
    }
    catch (e) {
        console.log(e, ' unable to create event in app');
    }
};
exports.createDailyDeadline = createDailyDeadline;
const createWeeklyDeadline = async (client, userId, taskId, newWeeklyTaskText, newWeeklyPriority, newWeeklyDeadline, newWeeklyDeadlineType, newWeeklyDuration, toast) => {
    try {
        const notes = newWeeklyTaskText;
        if (!notes) {
            if (toast) {
                toast({
                    status: 'error',
                    title: 'Empty',
                    description: 'Your task is empty',
                    duration: 9000,
                    isClosable: true,
                });
            }
            return;
        }
        console.log(newWeeklyDeadline, newWeeklyDeadlineType, ' newWeeklyDeadline, newWeeklyDeadlineType inside createWeeklyDeadline');
        const event = await (0, exports.createDeadlineEventForTaskList)(client, userId, notes, newWeeklyDuration, taskId, constants_3.WeeklyTask, newWeeklyPriority, newWeeklyDeadlineType === 'soft' ? newWeeklyDeadline : null, newWeeklyDeadlineType === 'hard' ? newWeeklyDeadlineType : null);
        if (event) {
            return event;
        }
    }
    catch (e) {
        console.log(e, ' unable to create event in app');
    }
};
exports.createWeeklyDeadline = createWeeklyDeadline;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlclRhc2tIZWxwZXIyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVXNlclRhc2tIZWxwZXIyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdGQUF3RDtBQUV4RCxnREFBd0M7QUFDeEMsb0RBQXVCO0FBRXZCLHFGQUtnRDtBQUVoRCxnRkFBMEU7QUFFMUUsMERBQWdFO0FBRWhFLDhDQUt3QjtBQUN4QixrREFBMEI7QUFDMUIsaUZBQW1FO0FBWW5FLHdFQUcyQztBQUkzQyxnRkFBd0Q7QUFDeEQsc0ZBQThEO0FBQzlELHNGQUE4RDtBQUs5RCwwRUFBZ0Y7QUFDaEYsZ0ZBQXFGO0FBQ3JGLDBFQUFnRjtBQUNoRixtRUFBK0U7QUFDL0UscUZBQTJFO0FBQzNFLHVEQUF1RDtBQUN2RCwyQ0FBeUM7QUFNbEMsTUFBTSxlQUFlLEdBQUcsS0FBSyxFQUNsQyxPQUFlLEVBQ2YsTUFBMkMsRUFDM0MsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILE1BQU0sS0FBSyxHQUFHLENBQ1osTUFBTSxNQUFNLENBQUMsS0FBSyxDQUE2QjtZQUM3QyxLQUFLLEVBQUUsc0JBQVk7WUFDbkIsU0FBUyxFQUFFO2dCQUNULEVBQUUsRUFBRSxPQUFPO2FBQ1o7U0FDRixDQUFDLENBQ0gsQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDO1FBQ3BCLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSwrQkFBK0IsQ0FBQyxDQUFDO0lBQ2xELENBQUM7QUFDSCxDQUFDLENBQUM7QUFqQlcsUUFBQSxlQUFlLG1CQWlCMUI7QUFFSyxNQUFNLGtCQUFrQixHQUFHLEtBQUssRUFDckMsTUFBMkMsRUFDM0MsSUFBa0IsRUFDbEIsTUFBYyxFQUNkLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLElBQUEsb0NBQTRCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxN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cUIsRUFDckIsdUVBQXVFLENBQ3hFLENBQUM7UUFDRixNQUFNLEtBQUssR0FBRyxNQUFNLElBQUEsc0NBQThCLEVBQ2hELE1BQU0sRUFDTixNQUFNLEVBQ04sS0FBSyxFQUNMLGlCQUFpQixFQUNqQixNQUFNLEVBQ04sc0JBQVUsRUFDVixpQkFBaUIsRUFDakIscUJBQXFCLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUMzRCxxQkFBcUIsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ2hFLENBQUM7UUFDRixJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ1YsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxnQ0FBZ0MsQ0FBQyxDQUFDO0lBQ25ELENBQUM7QUFDSCxDQUFDLENBQUM7QUFqRFcsUUFBQSxvQkFBb0Isd0JBaUQvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXNzaW9uIGZyb20gJ3N1cGVydG9rZW5zLXdlYi1qcy9yZWNpcGUvc2Vzc2lvbic7XG5cbmltcG9ydCB7IGRheWpzIH0gZnJvbSAnQGxpYi9kYXRlLXV0aWxzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBEYXkgfSBmcm9tICdAbGliL1NjaGVkdWxlL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBhdG9taWNVcHNlcnRFdmVudEluRGIsXG4gIGNyZWF0ZU5ld0V2ZW50LFxuICBnZXRDYWxlbmRhckluRGIsXG4gIG1lZXRpbmdUeXBlU3RyaW5nVHlwZSxcbn0gZnJvbSAnQGxpYi9DYWxlbmRhci9Vc2VyQ3JlYXRlQ2FsZW5kYXJIZWxwZXInO1xuXG5pbXBvcnQgeyBkZWxldGVHb29nbGVFdmVudCB9IGZyb20gJ0BsaWIvY2FsZW5kYXJMaWIvZ29vZ2xlQ2FsZW5kYXJIZWxwZXInO1xuXG5pbXBvcnQgeyBnb29nbGVSZXNvdXJjZU5hbWUgfSBmcm9tICdAbGliL2NhbGVuZGFyTGliL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBFdmVudFR5cGUsIFRpbWUgfSBmcm9tICdAbGliL2RhdGFUeXBlcy9FdmVudFR5cGUnO1xuaW1wb3J0IHtcbiAgZXZlbnRUb1F1ZXVlQXV0aFVybCxcbiAgY2FsZW5kYXJUb1F1ZXVlQXV0aFVybCxcbiAgZXZlbnRUb1F1ZXVlU2hvcnRBdXRoVXJsLFxuICBtZXRob2RUb1NlYXJjaEluZGV4QXV0aFVybCxcbn0gZnJvbSAnQGxpYi9jb25zdGFudHMnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IHVwZGF0ZUV2ZW50IH0gZnJvbSAnQGxpYi9DYWxlbmRhci9Vc2VyRWRpdENhbGVuZGFySGVscGVyJztcblxuaW1wb3J0IHsgTG9jYXRpb25UeXBlLCBCdWZmZXJUaW1lVHlwZSB9IGZyb20gJ0BsaWIvZGF0YVR5cGVzL0V2ZW50VHlwZSc7XG5pbXBvcnQge1xuICBTZW5kVXBkYXRlc1R5cGUsXG4gIFRyYW5zcGFyZW5jeVR5cGUsXG4gIFZpc2liaWxpdHlUeXBlLFxufSBmcm9tICdAbGliL2NhbGVuZGFyTGliL3R5cGVzJztcbmltcG9ydCB7IGVzUmVzcG9uc2VCb2R5LCBQZXJzb24gfSBmcm9tICdAbGliL0NhbGVuZGFyL3R5cGVzJztcbmltcG9ydCB7IERlYWRsaW5lVHlwZSwgVGFza1BsdXNUeXBlIH0gZnJvbSAnQHBhZ2VzL1Byb2dyZXNzL1RvZG8vVXNlclRhc2snO1xuXG5pbXBvcnQgeyBDYWxlbmRhclR5cGUgfSBmcm9tICdAbGliL2RhdGFUeXBlcy9DYWxlbmRhclR5cGUnO1xuaW1wb3J0IHtcbiAgZ2V0RXZlbnRXaXRoSWQsXG4gIHVwc2VydENhbGVuZGFyLFxufSBmcm9tICdAbGliL2NhbGVuZGFyTGliL2NhbGVuZGFyRGJIZWxwZXInO1xuaW1wb3J0IHsgcGFsZXR0ZSB9IGZyb20gJ0BsaWIvdGhlbWUvdGhlbWUnO1xuaW1wb3J0IHsgQXBvbGxvQ2xpZW50LCBOb3JtYWxpemVkQ2FjaGVPYmplY3QgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7XG5cbmltcG9ydCBnZXRFdmVudEJ5SWQgZnJvbSAnQGxpYi9hcG9sbG8vZ3FsL2dldEV2ZW50QnlJZCc7XG5pbXBvcnQgZGVsZXRlRXZlbnRCeUlkIGZyb20gJ0BsaWIvYXBvbGxvL2dxbC9kZWxldGVFdmVudEJ5SWQnO1xuaW1wb3J0IGdldENhbGVuZGFyQnlJZCBmcm9tICdAbGliL2Fwb2xsby9ncWwvZ2V0Q2FsZW5kYXJCeUlkJztcblxuaW1wb3J0IGdldENhbGVuZGFyV2l0aFJlc291cmNlIGZyb20gJ0BsaWIvYXBvbGxvL2dxbC9nZXRDYWxlbmRhcldpdGhSZXNvdXJjZSc7XG5pbXBvcnQgbGlzdEV2ZW50c05vdExvY2FsbHlTeW5jZWQgZnJvbSAnQGxpYi9hcG9sbG8vZ3FsL2xpc3RFdmVudHNOb3RMb2NhbGx5U3luY2VkJztcblxuaW1wb3J0IHsgZGVsZXRlQXR0ZW5kZWVzRm9yRXZlbnQgfSBmcm9tICdAbGliL0NhbGVuZGFyL0F0dGVuZGVlL0F0dGVuZGVlSGVscGVyJztcbmltcG9ydCB7IGRlbGV0ZUNvbmZlcmVuY2VzV2l0aElkcyB9IGZyb20gJ0BsaWIvQ2FsZW5kYXIvQ29uZmVyZW5jZS9Db25mZXJlbmNlSGVscGVyJztcbmltcG9ydCB7IHJlbW92ZVJlbWluZGVyc0ZvckV2ZW50IH0gZnJvbSAnQGxpYi9DYWxlbmRhci9SZW1pbmRlci9SZW1pbmRlckhlbHBlcic7XG5pbXBvcnQgeyBkZWxldGVab29tTWVldGluZywgem9vbUF2YWlsYWJsZSB9IGZyb20gJ0BsaWIvem9vbS96b29tTWVldGluZ0hlbHBlcic7XG5pbXBvcnQgeyBnZXRDb25mZXJlbmNlSW5EYiB9IGZyb20gJ0BsaWIvQ2FsZW5kYXIvVXNlckNyZWF0ZUNhbGVuZGFySGVscGVyJztcbmltcG9ydCB7IHVwZGF0ZVRhc2tCeUlkSW5EYiB9IGZyb20gJy4vVXNlclRhc2tIZWxwZXIzJztcbmltcG9ydCB7IFdlZWtseVRhc2sgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbnR5cGUgUmVjdXJyZW5jZUZyZXF1ZW5jeSA9ICdkYWlseScgfCAnd2Vla2x5JyB8ICdtb250aGx5JyB8ICd5ZWFybHknO1xuXG50eXBlIFRhc2tUeXBlID0gJ0RhaWx5JyB8ICdXZWVrbHknIHwgJ01hc3RlcicgfCAnR3JvY2VyeScgfCBzdHJpbmc7XG5cbmV4cG9ydCBjb25zdCBnZXRFdmVudEZvclRhc2sgPSBhc3luYyAoXG4gIGV2ZW50SWQ6IHN0cmluZyxcbiAgY2xpZW50OiBBcG9sbG9DbGllbnQ8Tm9ybWFsaXplZENhY2hlT2JqZWN0PlxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXZlbnQgPSAoXG4gICAgICBhd2FpdCBjbGllbnQucXVlcnk8eyBFdmVudF9ieV9wazogRXZlbnRUeXBlIH0+KHtcbiAgICAgICAgcXVlcnk6IGdldEV2ZW50QnlJZCxcbiAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgaWQ6IGV2ZW50SWQsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICkuZGF0YT8uRXZlbnRfYnlfcGs7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IGV2ZW50IGZvciB0YXNrJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVFdmVudEZvclRhc2sgPSBhc3luYyAoXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHRhc2s6IFRhc2tQbHVzVHlwZSxcbiAgdXNlcklkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGF3YWl0IGRlbGV0ZUV2ZW50SW5DYWxlbmRhckZvclRhc2sodGFzaz8uZXZlbnRJZCwgY2xpZW50LCB1c2VySWQpO1xuXG4gICAgdGFzay5zdGFydERhdGUgPSBudWxsO1xuICAgIHRhc2suZW5kRGF0ZSA9IG51bGw7XG4gICAgdGFzay5uZXh0RGF5ID0gbnVsbDtcbiAgICB0YXNrLmV2ZW50SWQgPSBudWxsO1xuICAgIHRhc2suc29mdERlYWRsaW5lID0gbnVsbDtcbiAgICB0YXNrLmhhcmREZWFkbGluZSA9IG51bGw7XG5cbiAgICBhd2FpdCB1cGRhdGVUYXNrQnlJZEluRGIoY2xpZW50LCB0YXNrKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGRlbGV0ZSBldmVudCBmb3IgdGFzaycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRXZlbnRGcm9tVVRDRm9yVGFzayA9IGFzeW5jIChcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHRhc2tJZDogc3RyaW5nLFxuICB0YXNrVHlwZTogVGFza1R5cGUsXG4gIHJlY3VycmluZ0VuZERhdGU/OiBzdHJpbmcsXG4gIGZyZXF1ZW5jeT86IFJlY3VycmVuY2VGcmVxdWVuY3ksXG4gIGludGVydmFsPzogbnVtYmVyLFxuICB0aXRsZT86IHN0cmluZyxcbiAgZGVhZGxpbmVBbGFybXM/OiBzdHJpbmdbXSxcbiAgbm90ZXM/OiBzdHJpbmcsXG4gIGJ5V2Vla0RheT86IERheVtdLFxuICBoYXJkRGVhZGxpbmU/OiBzdHJpbmcsXG4gIHNvZnREZWFkbGluZT86IHN0cmluZyxcbiAgc2VsZWN0ZWRDYWxlbmRhcklkPzogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY3JlYXRlTmV3RXZlbnQoXG4gICAgICBkYXlqcy51dGMoc3RhcnREYXRlKS50b0lTT1N0cmluZygpLFxuICAgICAgZGF5anMudXRjKGVuZERhdGUpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1c2VySWQsXG4gICAgICBjbGllbnQsXG4gICAgICBzZWxlY3RlZENhbGVuZGFySWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aXRsZSxcbiAgICAgIGZhbHNlLFxuICAgICAgcmVjdXJyaW5nRW5kRGF0ZSxcbiAgICAgIGZyZXF1ZW5jeSxcbiAgICAgIGludGVydmFsLFxuICAgICAgZGVhZGxpbmVBbGFybXMsXG4gICAgICBub3RlcyxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIHRydWUsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGRheWpzLnR6Lmd1ZXNzKCksXG4gICAgICB0YXNrSWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdGl0bGUsXG4gICAgICAnb3BhcXVlJyxcbiAgICAgICdwcml2YXRlJyxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIGRheWpzLnR6Lmd1ZXNzKCksXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBkZWFkbGluZUFsYXJtcz8ubGVuZ3RoID4gMCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHRhc2tUeXBlID09PSAnRGFpbHknLFxuICAgICAgdGFza1R5cGUgPT09ICdXZWVrbHknLFxuICAgICAgZmFsc2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0cnVlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdHJ1ZSxcbiAgICAgIHRydWUsXG4gICAgICBoYXJkRGVhZGxpbmUsXG4gICAgICBzb2Z0RGVhZGxpbmUsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBkYXlqcyhlbmREYXRlKS5kaWZmKGRheWpzKHN0YXJ0RGF0ZSksICdtaW51dGUnKSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHRydWUsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBieVdlZWtEYXlcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gY3JlYXRlIGV2ZW50IGZyb20gdXRjJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFdmVudEZvclRhc2sgPSBhc3luYyAoXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBjbGllbnQ6IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+LFxuICB0YXNrSWQ6IHN0cmluZyxcbiAgdGFza1R5cGU6IFRhc2tUeXBlLFxuICBwcmlvcml0eTogbnVtYmVyLFxuICByZWN1cnJpbmdFbmREYXRlPzogc3RyaW5nLFxuICBmcmVxdWVuY3k/OiBSZWN1cnJlbmNlRnJlcXVlbmN5LFxuICBpbnRlcnZhbD86IG51bWJlcixcbiAgdGl0bGU/OiBzdHJpbmcsXG4gIGRlYWRsaW5lQWxhcm1zPzogc3RyaW5nW10sXG4gIG5vdGVzPzogc3RyaW5nLFxuICBieVdlZWtEYXk/OiBEYXlbXSxcbiAgaGFyZERlYWRsaW5lPzogc3RyaW5nLFxuICBzb2Z0RGVhZGxpbmU/OiBzdHJpbmcsXG4gIHNlbGVjdGVkQ2FsZW5kYXJJZD86IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNyZWF0ZU5ld0V2ZW50KFxuICAgICAgc3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGNsaWVudCxcbiAgICAgIHNlbGVjdGVkQ2FsZW5kYXJJZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHRpdGxlLFxuICAgICAgZmFsc2UsXG4gICAgICByZWN1cnJpbmdFbmREYXRlLFxuICAgICAgZnJlcXVlbmN5LFxuICAgICAgaW50ZXJ2YWwsXG4gICAgICBkZWFkbGluZUFsYXJtcyxcbiAgICAgIG5vdGVzLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJ1ZSxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgZGF5anMudHouZ3Vlc3MoKSxcbiAgICAgIHRhc2tJZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aXRsZSxcbiAgICAgICdvcGFxdWUnLFxuICAgICAgJ3ByaXZhdGUnLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgZGF5anMudHouZ3Vlc3MoKSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIGRlYWRsaW5lQWxhcm1zPy5sZW5ndGggPiAwLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdGFza1R5cGUgPT09ICdEYWlseScsXG4gICAgICB0YXNrVHlwZSA9PT0gJ1dlZWtseScsXG4gICAgICBmYWxzZSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHRydWUsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0cnVlLFxuICAgICAgdHJ1ZSxcbiAgICAgIGhhcmREZWFkbGluZSxcbiAgICAgIHNvZnREZWFkbGluZSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIGRheWpzKGVuZERhdGUpLmRpZmYoZGF5anMoc3RhcnREYXRlKSwgJ21pbnV0ZScpLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdHJ1ZSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIGJ5V2Vla0RheSxcbiAgICAgIHByaW9yaXR5XG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSBldmVudCBmcm9tIHV0YycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlRXZlbnQgPSBhc3luYyAoXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHVzZXJJZDogc3RyaW5nLFxuICBldmVudElkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50SWQsIHVzZXJJZCwgJyBldmVudElkLCB1c2VySWQgaW5zaWRlIGRlbGV0ZUV2ZW50Jyk7XG4gICAgYXdhaXQgZGVsZXRlQXR0ZW5kZWVzRm9yRXZlbnQoY2xpZW50LCBldmVudElkKTtcbiAgICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gYXdhaXQgZ2V0RXZlbnRXaXRoSWQoY2xpZW50LCBldmVudElkKTtcbiAgICBjb25zb2xlLmxvZyhvcmlnaW5hbEV2ZW50LCAnIG9yaWdpbmFsRXZlbnQgaW5zaWRlIGRlbGV0ZUV2ZW50Jyk7XG4gICAgaWYgKG9yaWdpbmFsRXZlbnQ/LmNvbmZlcmVuY2VJZCkge1xuICAgICAgY29uc3QgaXNab29tQXZhaWxhYmxlID0gYXdhaXQgem9vbUF2YWlsYWJsZShjbGllbnQsIHVzZXJJZCk7XG4gICAgICBjb25zdCBjb25mZXJlbmNlID0gYXdhaXQgZ2V0Q29uZmVyZW5jZUluRGIoXG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgb3JpZ2luYWxFdmVudD8uY29uZmVyZW5jZUlkXG4gICAgICApO1xuXG4gICAgICBpZiAoaXNab29tQXZhaWxhYmxlICYmIGNvbmZlcmVuY2U/LmFwcCA9PT0gJ3pvb20nKSB7XG4gICAgICAgIGF3YWl0IGRlbGV0ZVpvb21NZWV0aW5nKFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBwYXJzZUludChvcmlnaW5hbEV2ZW50Py5jb25mZXJlbmNlSWQsIDEwKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBkZWxldGVDb25mZXJlbmNlc1dpdGhJZHMoY2xpZW50LCBbb3JpZ2luYWxFdmVudD8uY29uZmVyZW5jZUlkXSk7XG4gICAgfVxuXG4gICAgYXdhaXQgcmVtb3ZlUmVtaW5kZXJzRm9yRXZlbnQoY2xpZW50LCBldmVudElkKTtcblxuICAgIGNvbnN0IHVybCA9IG1ldGhvZFRvU2VhcmNoSW5kZXhBdXRoVXJsO1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpO1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3Qgc2VhcmNoRGF0YSA9IHtcbiAgICAgIHNlYXJjaDogYCR7b3JpZ2luYWxFdmVudD8uc3VtbWFyeX0ke29yaWdpbmFsRXZlbnQ/Lm5vdGVzID8gYDogJHtvcmlnaW5hbEV2ZW50Py5ub3Rlc31gIDogJyd9YCxcbiAgICAgIG1ldGhvZDogJ3NlYXJjaCcsXG4gICAgfTtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgYXhpb3MucG9zdDx7XG4gICAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgICBldmVudDogZXNSZXNwb25zZUJvZHk7XG4gICAgfT4odXJsLCBzZWFyY2hEYXRhLCBjb25maWcpO1xuXG4gICAgY29uc29sZS5sb2cocmVzdWx0cywgJyByZXN1bHRzIGluc2lkZSBkZWxldGVFdmVudCcpO1xuICAgIGNvbnNvbGUubG9nKHJlc3VsdHM/LmRhdGEsICcgcmVzdWx0cz8uZGF0YSBpbnNpZGUgZGVsZXRlRXZlbnQnKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIHJlc3VsdHM/LmRhdGE/LmV2ZW50Py5oaXRzPy5oaXRzPy5bMF0/Ll9pZCxcbiAgICAgICcgcmVzdWx0cz8uZGF0YT8uZXZlbnQ/LmhpdHM/LmhpdHM/LlswXT8uX2lkIGluc2lkZSBkZWxldGVFdmVudCdcbiAgICApO1xuXG4gICAgaWYgKHJlc3VsdHM/LmRhdGE/LmV2ZW50Py5oaXRzPy5oaXRzPy5bMF0/Ll9pZCA9PT0gZXZlbnRJZCkge1xuICAgICAgY29uc29sZS5sb2coJ2V2ZW50IGV4aXN0cywgZGVsZXRlIGl0Jyk7XG4gICAgICBjb25zdCBkZWxldGVEYXRhID0ge1xuICAgICAgICBldmVudElkOiByZXN1bHRzPy5kYXRhPy5ldmVudD8uaGl0cz8uaGl0cz8uWzBdPy5faWQsXG4gICAgICAgIG1ldGhvZDogJ2RlbGV0ZScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkZWxldGVSZXN1bHRzID0gYXdhaXQgYXhpb3MucG9zdDx7XG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICAgICAgZXZlbnQ6IG9iamVjdDtcbiAgICAgIH0+KHVybCwgZGVsZXRlRGF0YSwgY29uZmlnKTtcbiAgICAgIGNvbnNvbGUubG9nKGRlbGV0ZVJlc3VsdHMsICcgZGVsZXRlUmVzdWx0cyBpbiBzZWFyY2gnKTtcbiAgICB9XG5cbiAgICBhd2FpdCBkZWxldGVFdmVudEluQ2FsZW5kYXJGb3JUYXNrKGV2ZW50SWQsIGNsaWVudCwgdXNlcklkKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICdlcnJvciBmb3IgZGVsZXRlRXZlbnQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUV2ZW50SW5DYWxlbmRhckZvclRhc2sgPSBhc3luYyAoXG4gIGV2ZW50SWQ6IHN0cmluZyxcbiAgY2xpZW50OiBBcG9sbG9DbGllbnQ8Tm9ybWFsaXplZENhY2hlT2JqZWN0PixcbiAgdXNlcklkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50SWQsIHVzZXJJZCwgJyBldmVudElkLCB1c2VySWQgZGVsRXZlbnRJbkFwcEZvclRhc2snKTtcbiAgICBjb25zdCBldmVudERvYyA9IChcbiAgICAgIGF3YWl0IGNsaWVudC5xdWVyeTx7IEV2ZW50X2J5X3BrOiBFdmVudFR5cGUgfT4oe1xuICAgICAgICBxdWVyeTogZ2V0RXZlbnRCeUlkLFxuICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICBpZDogZXZlbnRJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgKT8uZGF0YT8uRXZlbnRfYnlfcGs7XG4gICAgY29uc29sZS5sb2coZXZlbnREb2MsICcgZXZlbnREb2MgaW5zaWRlIGRlbEV2ZW50SW5BcHBGb3JUYXNrJyk7XG4gICAgaWYgKGV2ZW50RG9jPy5pZCkge1xuICAgICAgY29uc3QgY2FsZW5kYXJJZCA9IGV2ZW50RG9jPy5jYWxlbmRhcklkO1xuICAgICAgY29uc3QgY2FsZW5kYXJEb2MgPSAoXG4gICAgICAgIGF3YWl0IGNsaWVudC5xdWVyeTx7IENhbGVuZGFyX2J5X3BrOiBDYWxlbmRhclR5cGUgfT4oe1xuICAgICAgICAgIHF1ZXJ5OiBnZXRDYWxlbmRhckJ5SWQsXG4gICAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgICBpZDogY2FsZW5kYXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgKS5kYXRhPy5DYWxlbmRhcl9ieV9waztcbiAgICAgIGNvbnNvbGUubG9nKGNhbGVuZGFyRG9jLCAnIGNhbGVuZGFyRG9jIGluc2lkZSBkZWxFdmVudEluQXBwRm9yVGFzaycpO1xuICAgICAgaWYgKGNhbGVuZGFyRG9jPy5pZCkge1xuICAgICAgICBjb25zdCByZXNvdXJjZSA9IGNhbGVuZGFyRG9jPy5yZXNvdXJjZTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgY2FsZW5kYXJEb2M/LnJlc291cmNlLFxuICAgICAgICAgICcgY2FsZW5kYXJEb2M/LnJlc291cmNlIGluc2lkZSBkZWxFdmVudEluQXBwRm9yVGFzaydcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJlc291cmNlID09PSBnb29nbGVSZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIGNhbGVuZGFySWQsXG4gICAgICAgICAgICBldmVudElkLFxuICAgICAgICAgICAgJyB1c2VySWQsIGNhbGVuZGFySWQsIGV2ZW50SWQgaW5zaWRlIGRlbEV2ZW50aW5BcHBGb3JUYXNrJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgYXdhaXQgZGVsZXRlR29vZ2xlRXZlbnQoXG4gICAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBjYWxlbmRhcklkLFxuICAgICAgICAgICAgZXZlbnRJZC5zcGxpdCgnIycpWzBdXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhd2FpdCBjbGllbnQubXV0YXRlPHsgZGVsZXRlX0V2ZW50X2J5X3BrOiBFdmVudFR5cGUgfT4oe1xuICAgICAgICAgICAgbXV0YXRpb246IGRlbGV0ZUV2ZW50QnlJZCxcbiAgICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgICBpZDogZXZlbnRJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGUoY2FjaGUsIHsgZGF0YSB9KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZWRFdmVudCA9IGRhdGE/LmRlbGV0ZV9FdmVudF9ieV9waztcbiAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkID0gY2FjaGUuaWRlbnRpZnkoe1xuICAgICAgICAgICAgICAgIGlkOiBkZWxldGVkRXZlbnQuaWQsXG4gICAgICAgICAgICAgICAgX190eXBlbmFtZTogZGVsZXRlZEV2ZW50Ll9fdHlwZW5hbWUsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjYWNoZS5ldmljdCh7IGlkOiBub3JtYWxpemVkSWQgfSk7XG4gICAgICAgICAgICAgIGNhY2hlLmdjKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZGVsZXRlIGV2ZW50IGluIGFwcCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZWRpdEV2ZW50Rm9yVGFzayA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHNlbGVjdGVkQ2FsZW5kYXJJZDogc3RyaW5nLFxuICBjYXRlZ29yeUlkcz86IHN0cmluZ1tdLFxuICB0aXRsZT86IHN0cmluZyxcbiAgYWxsRGF5PzogYm9vbGVhbixcbiAgcmVjdXJyaW5nRW5kRGF0ZT86IHN0cmluZyxcbiAgZnJlcXVlbmN5PzogUmVjdXJyZW5jZUZyZXF1ZW5jeSxcbiAgaW50ZXJ2YWw/OiBudW1iZXIsXG4gIGFsYXJtcz86IHN0cmluZ1tdIHwgbnVtYmVyW10sXG4gIG5vdGVzPzogc3RyaW5nLFxuICBsb2NhdGlvbj86IExvY2F0aW9uVHlwZSxcbiAgaXNGb2xsb3dVcD86IGJvb2xlYW4sXG4gIGlzUHJlRXZlbnQ/OiBib29sZWFuLFxuICBpc1Bvc3RFdmVudD86IGJvb2xlYW4sXG4gIG1vZGlmaWFibGU/OiBib29sZWFuLFxuICBhbnlvbmVDYW5BZGRTZWxmPzogYm9vbGVhbixcbiAgZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzPzogYm9vbGVhbixcbiAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHM/OiBib29sZWFuLFxuICBvcmlnaW5hbEFsbERheT86IGJvb2xlYW4sXG4gIHRpbWV6b25lPzogc3RyaW5nLFxuICB0YXNrSWQ/OiBzdHJpbmcsXG4gIHRhc2tUeXBlPzogc3RyaW5nLFxuICBmb2xsb3dVcEV2ZW50SWQ/OiBzdHJpbmcsXG4gIHByZUV2ZW50SWQ/OiBzdHJpbmcsXG4gIHBvc3RFdmVudElkPzogc3RyaW5nLFxuICBmb3JFdmVudElkPzogc3RyaW5nLFxuICB6b29tTWVldD86IGJvb2xlYW4sXG4gIGdvb2dsZU1lZXQ/OiBib29sZWFuLFxuICBtZWV0aW5nVHlwZVN0cmluZz86IG1lZXRpbmdUeXBlU3RyaW5nVHlwZSxcbiAgem9vbVBhc3N3b3JkPzogc3RyaW5nLFxuICB6b29tUHJpdmF0ZU1lZXRpbmc/OiBib29sZWFuLFxuICBhdHRlbmRlZXM/OiBQZXJzb25bXSxcbiAgY29uZmVyZW5jZUlkPzogc3RyaW5nLFxuICBtYXhBdHRlbmRlZXM/OiBudW1iZXIsXG4gIHNlbmRVcGRhdGVzPzogU2VuZFVwZGF0ZXNUeXBlLFxuICBzdGF0dXM/OiBzdHJpbmcsXG4gIHN1bW1hcnk/OiBzdHJpbmcsXG4gIHRyYW5zcGFyZW5jeT86IFRyYW5zcGFyZW5jeVR5cGUsXG4gIHZpc2liaWxpdHk/OiBWaXNpYmlsaXR5VHlwZSxcbiAgcmVjdXJyaW5nRXZlbnRJZD86IHN0cmluZyxcbiAgaUNhbFVJRD86IHN0cmluZyxcbiAgaHRtbExpbms/OiBzdHJpbmcsXG4gIGNvbG9ySWQ/OiBzdHJpbmcsXG4gIG9yaWdpbmFsVGltZXpvbmU/OiBzdHJpbmcsXG4gIGJhY2tncm91bmRDb2xvcj86IHN0cmluZyxcbiAgZm9yZWdyb3VuZENvbG9yPzogc3RyaW5nLFxuICB1c2VEZWZhdWx0QWxhcm1zPzogYm9vbGVhbixcbiAgcG9zaXRpdmVJbXBhY3RTY29yZT86IG51bWJlcixcbiAgbmVnYXRpdmVJbXBhY3RTY29yZT86IG51bWJlcixcbiAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWs/OiBudW1iZXIsXG4gIHBvc2l0aXZlSW1wYWN0VGltZT86IFRpbWUsXG4gIG5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrPzogbnVtYmVyLFxuICBuZWdhdGl2ZUltcGFjdFRpbWU/OiBUaW1lLFxuICBwcmVmZXJyZWREYXlPZldlZWs/OiBudW1iZXIsXG4gIHByZWZlcnJlZFRpbWU/OiBUaW1lLFxuICBpc0V4dGVybmFsTWVldGluZz86IGJvb2xlYW4sXG4gIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZT86IGJvb2xlYW4sXG4gIGlzTWVldGluZ01vZGlmaWFibGU/OiBib29sZWFuLFxuICBpc01lZXRpbmc/OiBib29sZWFuLFxuICBkYWlseVRhc2tMaXN0PzogYm9vbGVhbixcbiAgd2Vla2x5VGFza0xpc3Q/OiBib29sZWFuLFxuICBpc0JyZWFrPzogYm9vbGVhbixcbiAgcHJlZmVycmVkU3RhcnRUaW1lUmFuZ2U/OiBUaW1lLFxuICBwcmVmZXJyZWRFbmRUaW1lUmFuZ2U/OiBUaW1lLFxuICBjb3B5QXZhaWxhYmlsaXR5PzogYm9vbGVhbixcbiAgY29weVRpbWVCbG9ja2luZz86IGJvb2xlYW4sXG4gIGNvcHlUaW1lUHJlZmVyZW5jZT86IGJvb2xlYW4sXG4gIGNvcHlSZW1pbmRlcnM/OiBib29sZWFuLFxuICBjb3B5UHJpb3JpdHlMZXZlbD86IGJvb2xlYW4sXG4gIGNvcHlNb2RpZmlhYmxlPzogYm9vbGVhbixcbiAgY29weUNhdGVnb3JpZXM/OiBib29sZWFuLFxuICBjb3B5SXNCcmVhaz86IGJvb2xlYW4sXG4gIHRpbWVCbG9ja2luZz86IEJ1ZmZlclRpbWVUeXBlLFxuICB1c2VyTW9kaWZpZWRBdmFpbGFiaWxpdHk/OiBib29sZWFuLFxuICB1c2VyTW9kaWZpZWRUaW1lQmxvY2tpbmc/OiBib29sZWFuLFxuICB1c2VyTW9kaWZpZWRUaW1lUHJlZmVyZW5jZT86IGJvb2xlYW4sXG4gIHVzZXJNb2RpZmllZFJlbWluZGVycz86IGJvb2xlYW4sXG4gIHVzZXJNb2RpZmllZFByaW9yaXR5TGV2ZWw/OiBib29sZWFuLFxuICB1c2VyTW9kaWZpZWRDYXRlZ29yaWVzPzogYm9vbGVhbixcbiAgdXNlck1vZGlmaWVkTW9kaWZpYWJsZT86IGJvb2xlYW4sXG4gIHVzZXJNb2RpZmllZElzQnJlYWs/OiBib29sZWFuLFxuICBoYXJkRGVhZGxpbmU/OiBzdHJpbmcsXG4gIHNvZnREZWFkbGluZT86IHN0cmluZyxcbiAgY29weUlzTWVldGluZz86IGJvb2xlYW4sXG4gIGNvcHlJc0V4dGVybmFsTWVldGluZz86IGJvb2xlYW4sXG4gIHVzZXJNb2RpZmllZElzTWVldGluZz86IGJvb2xlYW4sXG4gIHVzZXJNb2RpZmllZElzRXh0ZXJuYWxNZWV0aW5nPzogYm9vbGVhbixcbiAgZHVyYXRpb24/OiBudW1iZXIsXG4gIGNvcHlEdXJhdGlvbj86IGJvb2xlYW4sXG4gIHVzZXJNb2RpZmllZER1cmF0aW9uPzogYm9vbGVhbixcbiAgbWV0aG9kPzogJ2NyZWF0ZScgfCAndXBkYXRlJyxcbiAgdW5saW5rPzogYm9vbGVhbixcbiAgYnlXZWVrRGF5PzogRGF5W10sXG4gIHByaW9yaXR5PzogbnVtYmVyXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGhhcmREZWFkbGluZSxcbiAgICAgIHNvZnREZWFkbGluZSxcbiAgICAgICcgaGFyZERlYWRsaW5lLCBzb2Z0RGVhZGxpbmUgaW5zaWRlIGVkaXRFdmVudEZvclRhc2snXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhjYXRlZ29yeUlkcywgJyBjYXRlZ29yeUlkcyBpbnNpZGUgZWRpdEV2ZW50Rm9yVGFzaycpO1xuICAgIHJldHVybiB1cGRhdGVFdmVudChcbiAgICAgIGlkLFxuICAgICAgc3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGNsaWVudCxcbiAgICAgIHNlbGVjdGVkQ2FsZW5kYXJJZCxcbiAgICAgIGNhdGVnb3J5SWRzLFxuICAgICAgdGl0bGUsXG4gICAgICBhbGxEYXksXG4gICAgICByZWN1cnJpbmdFbmREYXRlLFxuICAgICAgZnJlcXVlbmN5LFxuICAgICAgaW50ZXJ2YWwsXG4gICAgICBhbGFybXMsXG4gICAgICBub3RlcyxcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgaXNGb2xsb3dVcCxcbiAgICAgIGlzUHJlRXZlbnQsXG4gICAgICBpc1Bvc3RFdmVudCxcbiAgICAgIG1vZGlmaWFibGUsXG4gICAgICBhbnlvbmVDYW5BZGRTZWxmLFxuICAgICAgZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzLFxuICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMsXG4gICAgICBvcmlnaW5hbEFsbERheSxcbiAgICAgIHRpbWV6b25lLFxuICAgICAgdGFza0lkLFxuICAgICAgdGFza1R5cGUsXG4gICAgICBmb2xsb3dVcEV2ZW50SWQsXG4gICAgICBwcmVFdmVudElkLFxuICAgICAgcG9zdEV2ZW50SWQsXG4gICAgICBmb3JFdmVudElkLFxuICAgICAgem9vbU1lZXQsXG4gICAgICBnb29nbGVNZWV0LFxuICAgICAgbWVldGluZ1R5cGVTdHJpbmcsXG4gICAgICB6b29tUGFzc3dvcmQsXG4gICAgICB6b29tUHJpdmF0ZU1lZXRpbmcsXG4gICAgICBhdHRlbmRlZXMsXG4gICAgICBjb25mZXJlbmNlSWQsXG4gICAgICBtYXhBdHRlbmRlZXMsXG4gICAgICBzZW5kVXBkYXRlcyxcbiAgICAgIHN0YXR1cyxcbiAgICAgIHN1bW1hcnksXG4gICAgICB0cmFuc3BhcmVuY3ksXG4gICAgICB2aXNpYmlsaXR5LFxuICAgICAgcmVjdXJyaW5nRXZlbnRJZCxcbiAgICAgIGlDYWxVSUQsXG4gICAgICBodG1sTGluayxcbiAgICAgIGNvbG9ySWQsXG4gICAgICBvcmlnaW5hbFRpbWV6b25lLFxuICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgZm9yZWdyb3VuZENvbG9yLFxuICAgICAgdXNlRGVmYXVsdEFsYXJtcyxcbiAgICAgIHBvc2l0aXZlSW1wYWN0U2NvcmUsXG4gICAgICBuZWdhdGl2ZUltcGFjdFNjb3JlLFxuICAgICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgICBwb3NpdGl2ZUltcGFjdFRpbWUsXG4gICAgICBuZWdhdGl2ZUltcGFjdERheU9mV2VlayxcbiAgICAgIG5lZ2F0aXZlSW1wYWN0VGltZSxcbiAgICAgIHByZWZlcnJlZERheU9mV2VlayxcbiAgICAgIHByZWZlcnJlZFRpbWUsXG4gICAgICBpc0V4dGVybmFsTWVldGluZyxcbiAgICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICAgIGlzTWVldGluZ01vZGlmaWFibGUsXG4gICAgICBpc01lZXRpbmcsXG4gICAgICBkYWlseVRhc2tMaXN0LFxuICAgICAgd2Vla2x5VGFza0xpc3QsXG4gICAgICBpc0JyZWFrLFxuICAgICAgcHJlZmVycmVkU3RhcnRUaW1lUmFuZ2UsXG4gICAgICBwcmVmZXJyZWRFbmRUaW1lUmFuZ2UsXG4gICAgICBjb3B5QXZhaWxhYmlsaXR5LFxuICAgICAgY29weVRpbWVCbG9ja2luZyxcbiAgICAgIGNvcHlUaW1lUHJlZmVyZW5jZSxcbiAgICAgIGNvcHlSZW1pbmRlcnMsXG4gICAgICBjb3B5UHJpb3JpdHlMZXZlbCxcbiAgICAgIGNvcHlNb2RpZmlhYmxlLFxuICAgICAgY29weUNhdGVnb3JpZXMsXG4gICAgICBjb3B5SXNCcmVhayxcbiAgICAgIHRpbWVCbG9ja2luZyxcbiAgICAgIHVzZXJNb2RpZmllZEF2YWlsYWJpbGl0eSxcbiAgICAgIHVzZXJNb2RpZmllZFRpbWVCbG9ja2luZyxcbiAgICAgIHVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlLFxuICAgICAgdXNlck1vZGlmaWVkUmVtaW5kZXJzLFxuICAgICAgdXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbCxcbiAgICAgIHVzZXJNb2RpZmllZENhdGVnb3JpZXMsXG4gICAgICB1c2VyTW9kaWZpZWRNb2RpZmlhYmxlLFxuICAgICAgdXNlck1vZGlmaWVkSXNCcmVhayxcbiAgICAgIGhhcmREZWFkbGluZSxcbiAgICAgIHNvZnREZWFkbGluZSxcbiAgICAgIGNvcHlJc01lZXRpbmcsXG4gICAgICBjb3B5SXNFeHRlcm5hbE1lZXRpbmcsXG4gICAgICB1c2VyTW9kaWZpZWRJc01lZXRpbmcsXG4gICAgICB1c2VyTW9kaWZpZWRJc0V4dGVybmFsTWVldGluZyxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgY29weUR1cmF0aW9uLFxuICAgICAgdXNlck1vZGlmaWVkRHVyYXRpb24sXG4gICAgICBtZXRob2QsXG4gICAgICB1bmxpbmssXG4gICAgICBieVdlZWtEYXksXG4gICAgICBwcmlvcml0eVxuICAgICk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBlZGl0IGV2ZW50IGluIGFwcCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRGVhZGxpbmVGb3JUYXNrID0gYXN5bmMgKFxuICBjbGllbnQ6IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+LFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdGl0bGU6IHN0cmluZyxcbiAgZHVyYXRpb246IG51bWJlcixcbiAgdGFza0lkOiBzdHJpbmcsXG4gIHRhc2tUeXBlOiBUYXNrVHlwZSxcbiAgcHJpb3JpdHk6IG51bWJlcixcbiAgc29mdERlYWRsaW5lPzogc3RyaW5nLFxuICBoYXJkRGVhZGxpbmU/OiBzdHJpbmcsXG4gIHJlbWluZGVycz86IG51bWJlcltdLFxuICBjYXRlZ29yeUlkcz86IHN0cmluZ1tdLFxuICBjb2xvcklkPzogc3RyaW5nLFxuICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmcsXG4gIG5vdGVzPzogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjYWxlbmRhckRvYyA9IGF3YWl0IGdldENhbGVuZGFySW5EYihjbGllbnQsIHVzZXJJZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICBjb25zdCBjYWxlbmRhcklkID0gY2FsZW5kYXJEb2M/LmlkO1xuICAgIGlmIChjYWxlbmRhcklkKSB7XG4gICAgICBjb25zdCBldmVudElkID0gYXdhaXQgY3JlYXRlTmV3RXZlbnQoXG4gICAgICAgIGRheWpzKCkuYWRkKDEsICdoJykuZm9ybWF0KCksXG4gICAgICAgIGRheWpzKCkuYWRkKDEsICdoJykuYWRkKGR1cmF0aW9uLCAnbWludXRlJykuZm9ybWF0KCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgY2xpZW50LFxuICAgICAgICBjYWxlbmRhcklkLFxuICAgICAgICBjYXRlZ29yeUlkcyxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICByZW1pbmRlcnMsXG4gICAgICAgIG5vdGVzIHx8IHRpdGxlLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBkYXlqcy50ei5ndWVzcygpLFxuICAgICAgICB0YXNrSWQsXG4gICAgICAgIHRhc2tUeXBlLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgICdvcGFxdWUnLFxuICAgICAgICAncHJpdmF0ZScsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGNvbG9ySWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHJlbWluZGVycz8ubGVuZ3RoID09PSAwLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB0YXNrVHlwZSA9PT0gJ0RhaWx5JyxcbiAgICAgICAgdGFza1R5cGUgPT09ICdXZWVrbHknLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgY2F0ZWdvcnlJZHM/Lmxlbmd0aCA+IDAsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGhhcmREZWFkbGluZSxcbiAgICAgICAgc29mdERlYWRsaW5lLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHByaW9yaXR5XG4gICAgICApO1xuICAgICAgcmV0dXJuIGV2ZW50SWQ7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gY3JlYXRlIGRlYWRsaW5lIGluIGFwcCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRGVhZGxpbmVFdmVudEZvclRhc2tMaXN0ID0gYXN5bmMgKFxuICBjbGllbnQ6IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+LFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdGl0bGU6IHN0cmluZyxcbiAgZHVyYXRpb246IG51bWJlcixcbiAgdGFza0lkOiBzdHJpbmcsXG4gIHRhc2tUeXBlOiBUYXNrVHlwZSxcbiAgcHJpb3JpdHk6IG51bWJlcixcbiAgc29mdERlYWRsaW5lPzogc3RyaW5nLFxuICBoYXJkRGVhZGxpbmU/OiBzdHJpbmdcbik6IFByb21pc2U8RXZlbnRUeXBlPiA9PiB7XG4gIHRyeSB7XG4gICAgbGV0IGNhbGVuZGFyRG9jOiBDYWxlbmRhclR5cGUgPSBudWxsO1xuICAgIGNhbGVuZGFyRG9jID0gYXdhaXQgZ2V0Q2FsZW5kYXJJbkRiKGNsaWVudCwgdXNlcklkLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgY29uc29sZS5sb2coXG4gICAgICBjYWxlbmRhckRvYyxcbiAgICAgICcgY2FsZW5kYXJEb2MgaW5zaWRlIGNyZWF0ZURlYWRsaW5lRXZlbnRGb3JUYXNrTGlzdCdcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgY2FsZW5kYXJEb2M/LnJlc291cmNlLFxuICAgICAgJyBnbG9iYWwgY2FsZW5kYXJEb2MgcmVzb3VyY2UgaW5zaWRlIGNyZWF0ZURlYWRsaW5lRXZlbnRGb3JUYXNrTGlzdCdcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgaGFyZERlYWRsaW5lLFxuICAgICAgc29mdERlYWRsaW5lLFxuICAgICAgJyBoYXJkRGVhZGxpbmUsIHNvZnREZWFkbGluZSBpbnNpZGUgY3JlYXRlRGVhZGxpbmVFdmVudEZvclRhc2tMaXN0J1xuICAgICk7XG4gICAgaWYgKCFjYWxlbmRhckRvYyB8fCBjYWxlbmRhckRvYz8ucmVzb3VyY2UgIT09IGdvb2dsZVJlc291cmNlTmFtZSkge1xuICAgICAgY2FsZW5kYXJEb2MgPSBhd2FpdCBnZXRDYWxlbmRhckluRGIoXG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgZ29vZ2xlUmVzb3VyY2VOYW1lXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgY2FsZW5kYXJEb2MsXG4gICAgICAnIGNhbGVuZGFyRG9jIGluc2lkZSBjcmVhdGVEZWFkbGluZUV2ZW50Rm9yVGFza0xpc3QnXG4gICAgKTtcblxuICAgIGNvbnN0IGNhbGVuZGFySWQgPSBjYWxlbmRhckRvYz8uaWQ7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGNhbGVuZGFySWQsXG4gICAgICAnIGNhbGVuZGFySWQgaW5zaWRlIGNyZWF0ZURlYWRsaW5lRXZlbnRGb3JUYXNrTGlzdCdcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgY2FsZW5kYXJEb2M/LnJlc291cmNlLFxuICAgICAgJyByZXNvdXJjZSBpbnNpZGUgY3JlYXRlRGVhZGxpbmVFdmVudEZvclRhc2tMaXN0J1xuICAgICk7XG4gICAgaWYgKGNhbGVuZGFySWQgJiYgY2FsZW5kYXJEb2M/LnJlc291cmNlID09PSBnb29nbGVSZXNvdXJjZU5hbWUpIHtcbiAgICAgIGNvbnN0IGNvbG9ySWQgPSBjYWxlbmRhckRvYz8uY29sb3JJZDtcbiAgICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IGNhbGVuZGFyRG9jPy5iYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGRheWpzKCkuYWRkKDEsICdoJykuZm9ybWF0KCk7XG4gICAgICBjb25zdCBlbmREYXRlID0gZGF5anMoKS5hZGQoMSwgJ2gnKS5hZGQoZHVyYXRpb24sICdtaW51dGUnKS5mb3JtYXQoKTtcbiAgICAgIGNvbnN0IGRhaWx5VGFza0xpc3QgPSB0YXNrVHlwZSA9PT0gJ0RhaWx5JztcbiAgICAgIGNvbnN0IHdlZWtseVRhc2tMaXN0ID0gdGFza1R5cGUgPT09ICdXZWVrbHknO1xuICAgICAgY29uc3QgZXZlbnRJZCA9IGF3YWl0IGNyZWF0ZU5ld0V2ZW50KFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIGVuZERhdGUsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgY2xpZW50LFxuICAgICAgICBjYWxlbmRhcklkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRpdGxlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZGF5anMudHouZ3Vlc3MoKSxcbiAgICAgICAgdGFza0lkLFxuICAgICAgICB0YXNrVHlwZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRpdGxlLFxuICAgICAgICAnb3BhcXVlJyxcbiAgICAgICAgJ3ByaXZhdGUnLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGRhaWx5VGFza0xpc3QsXG4gICAgICAgIHdlZWtseVRhc2tMaXN0LFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGhhcmREZWFkbGluZSxcbiAgICAgICAgc29mdERlYWRsaW5lLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgJ3VwZGF0ZScsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHByaW9yaXR5XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coZXZlbnRJZCwgJyBldmVudElkIGluc2lkZSBjcmVhdGVEZWFkbGluZUV2ZW50Rm9yVGFza0xpc3QnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBgJHtldmVudElkfSMke2NhbGVuZGFySWR9YCxcbiAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBkYWlseVRhc2tMaXN0LFxuICAgICAgICB3ZWVrbHlUYXNrTGlzdCxcbiAgICAgICAgY2FsZW5kYXJJZCxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICB0YXNrSWQsXG4gICAgICAgIHRhc2tUeXBlLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgY29sb3JJZCxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIGVuZERhdGUsXG4gICAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVwZGF0ZWRBdDogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgICAgdGltZXpvbmU6IGRheWpzLnR6Lmd1ZXNzKCksXG4gICAgICAgIGlzRm9sbG93VXA6IGZhbHNlLFxuICAgICAgICBpc1ByZUV2ZW50OiBmYWxzZSxcbiAgICAgICAgaXNQb3N0RXZlbnQ6IGZhbHNlLFxuICAgICAgICBtb2RpZmlhYmxlOiB0cnVlLFxuICAgICAgICBhbnlvbmVDYW5BZGRTZWxmOiBmYWxzZSxcbiAgICAgICAgZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzOiBmYWxzZSxcbiAgICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHM6IGZhbHNlLFxuICAgICAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgb3JpZ2luYWxBbGxEYXk6IGZhbHNlLFxuICAgICAgICBzdW1tYXJ5OiB0aXRsZSxcbiAgICAgICAgdHJhbnNwYXJlbmN5OiAnb3BhcXVlJyxcbiAgICAgICAgdmlzaWJpbGl0eTogJ3ByaXZhdGUnLFxuICAgICAgICBpc0JyZWFrOiBmYWxzZSxcbiAgICAgICAgdXNlck1vZGlmaWVkQXZhaWxhYmlsaXR5OiBmYWxzZSxcbiAgICAgICAgdXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbDogdHJ1ZSxcbiAgICAgICAgdXNlck1vZGlmaWVkTW9kaWZpYWJsZTogdHJ1ZSxcbiAgICAgICAgdXNlck1vZGlmaWVkSXNCcmVhazogdHJ1ZSxcbiAgICAgICAgc29mdERlYWRsaW5lLFxuICAgICAgICBoYXJkRGVhZGxpbmUsXG4gICAgICAgIHVzZXJNb2RpZmllZER1cmF0aW9uOiB0cnVlLFxuICAgICAgICBtZXRob2Q6ICd1cGRhdGUnLFxuICAgICAgICBub3RlczogdGl0bGUsXG4gICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSBldmVudCBpbiBhcHAnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHN1Ym1pdENhbGVuZGFyRm9yUXVldWUgPSBhc3luYyAoXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHVzZXJJZDogc3RyaW5nLFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nLFxuICB0b2FzdD86IGFueVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2FsZW5kYXIgPSBhd2FpdCBnZXRDYWxlbmRhckluRGIoXG4gICAgICBjbGllbnQsXG4gICAgICB1c2VySWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBnb29nbGVSZXNvdXJjZU5hbWVcbiAgICApO1xuICAgIGlmICghY2FsZW5kYXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdubyBnb29nbGUgY2FsZW5kYXIgaW5zaWRlIHN1Ym1pdENhbGVuZGFyRm9yUXVldWUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IFNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKTtcbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgdXNlcklkLFxuICAgICAgc3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZTogZW5kRGF0ZSxcbiAgICAgIHRpbWV6b25lOiBkYXlqcy50ei5ndWVzcygpLFxuICAgIH07XG5cbiAgICBjb25zdCB1cmwgPSBjYWxlbmRhclRvUXVldWVBdXRoVXJsO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBheGlvcy5wb3N0KHVybCwgYm9keSwgY29uZmlnKTtcbiAgICBpZiAocmVzdWx0cy5kYXRhLm1lc3NhZ2UpIHtcbiAgICAgIGlmICh0b2FzdCkge1xuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgICAgdGl0bGU6ICdSdW5uaW5nIFNjaGVkdWxlIEFzc2lzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDaGVjayBiYWNrIGluIGEgZmV3IG1pbnV0ZXMnLFxuICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSBldmVudCBpbiBhcHAnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHN1Ym1pdEV2ZW50Rm9yUXVldWUgPSBhc3luYyAoXG4gIGV2ZW50OiBFdmVudFR5cGUsXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHVzZXJJZDogc3RyaW5nLFxuICBpc0RhaWx5PzogYm9vbGVhbixcbiAgdG9hc3Q/OiBhbnlcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNhbGVuZGFyID0gYXdhaXQgZ2V0Q2FsZW5kYXJJbkRiKFxuICAgICAgY2xpZW50LFxuICAgICAgdXNlcklkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgZ29vZ2xlUmVzb3VyY2VOYW1lXG4gICAgKTtcbiAgICBpZiAoIWNhbGVuZGFyKSB7XG4gICAgICBjb25zb2xlLmxvZygnbm8gZ29vZ2xlIGNhbGVuZGFyIGluc2lkZSBzdWJtaXRFdmVudEZvclF1ZXVlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCk7XG4gICAgY29uc3QgdXJsID1cbiAgICAgIGlzRGFpbHkgPT09IHRydWUgPyBldmVudFRvUXVldWVTaG9ydEF1dGhVcmwgOiBldmVudFRvUXVldWVBdXRoVXJsO1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICB9O1xuICAgIGNvbnN0IGZpbHRlcmVkRXZlbnQgPSBfLm9taXQoZXZlbnQsIFsnX190eXBlbmFtZSddKTtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgYXhpb3MucG9zdCh1cmwsIGZpbHRlcmVkRXZlbnQsIGNvbmZpZyk7XG4gICAgaWYgKHJlc3VsdHMuZGF0YS5tZXNzYWdlKSB7XG4gICAgICBpZiAodG9hc3QpIHtcbiAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIHRpdGxlOiAnRXZlbnQgYWRkZWQgdG8gcXVldWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRXZlbnQgYWRkZWQgdG8gcXVldWUgZm9yIHNjaGVkdWxlIGFzc2lzdCcsXG4gICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJ2Vycm9yIGZvciBjaGFuZ2VMaW5rJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVEYWlseURlYWRsaW5lID0gYXN5bmMgKFxuICBjbGllbnQ6IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+LFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdGFza0lkOiBzdHJpbmcsXG4gIG5ld0RhaWx5VGFza1RleHQ6IHN0cmluZyxcbiAgbmV3RGFpbHlQcmlvcml0eTogbnVtYmVyLFxuICBuZXdEYWlseURlYWRsaW5lOiBzdHJpbmcsXG4gIG5ld0RhaWx5RGVhZGxpbmVUeXBlOiBEZWFkbGluZVR5cGUsXG4gIG5ld0RhaWx5RHVyYXRpb246IG51bWJlcixcbiAgdG9hc3Q/OiBhbnlcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5vdGVzID0gbmV3RGFpbHlUYXNrVGV4dDtcblxuICAgIGlmICghbm90ZXMpIHtcbiAgICAgIGlmICh0b2FzdCkge1xuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgIHRpdGxlOiAnRW1wdHknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnWW91ciB0YXNrIGlzIGVtcHR5LicsXG4gICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIG5ld0RhaWx5RGVhZGxpbmUsXG4gICAgICBuZXdEYWlseURlYWRsaW5lVHlwZSxcbiAgICAgICcgbmV3RGFpbHlEZWFkbGluZSwgbmV3RGFpbHlEZWFkbGluZVR5cGUgaW5zaWRlIGNyZWF0ZURhaWx5RGVhZGxpbmUnXG4gICAgKTtcbiAgICBjb25zdCBldmVudCA9IGF3YWl0IGNyZWF0ZURlYWRsaW5lRXZlbnRGb3JUYXNrTGlzdChcbiAgICAgIGNsaWVudCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIG5vdGVzLFxuICAgICAgbmV3RGFpbHlEdXJhdGlvbixcbiAgICAgIHRhc2tJZCxcbiAgICAgICdEYWlseScsXG4gICAgICBuZXdEYWlseVByaW9yaXR5LFxuICAgICAgbmV3RGFpbHlEZWFkbGluZVR5cGUgPT09ICdzb2Z0JyA/IG5ld0RhaWx5RGVhZGxpbmUgOiBudWxsLFxuICAgICAgbmV3RGFpbHlEZWFkbGluZVR5cGUgPT09ICdoYXJkJyA/IG5ld0RhaWx5RGVhZGxpbmUgOiBudWxsXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhldmVudCwgJ2V2ZW50IGluc2lkZSBjcmVhdGVEYWlseURlYWRsaW5lJyk7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gY3JlYXRlIGV2ZW50IGluIGFwcCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlV2Vla2x5RGVhZGxpbmUgPSBhc3luYyAoXG4gIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4sXG4gIHVzZXJJZDogc3RyaW5nLFxuICB0YXNrSWQ6IHN0cmluZyxcbiAgbmV3V2Vla2x5VGFza1RleHQ6IHN0cmluZyxcbiAgbmV3V2Vla2x5UHJpb3JpdHk6IG51bWJlcixcbiAgbmV3V2Vla2x5RGVhZGxpbmU6IHN0cmluZyxcbiAgbmV3V2Vla2x5RGVhZGxpbmVUeXBlOiBEZWFkbGluZVR5cGUsXG4gIG5ld1dlZWtseUR1cmF0aW9uOiBudW1iZXIsXG4gIHRvYXN0PzogYW55XG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3RlcyA9IG5ld1dlZWtseVRhc2tUZXh0O1xuXG4gICAgaWYgKCFub3Rlcykge1xuICAgICAgaWYgKHRvYXN0KSB7XG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgdGl0bGU6ICdFbXB0eScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdZb3VyIHRhc2sgaXMgZW1wdHknLFxuICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgbmV3V2Vla2x5RGVhZGxpbmUsXG4gICAgICBuZXdXZWVrbHlEZWFkbGluZVR5cGUsXG4gICAgICAnIG5ld1dlZWtseURlYWRsaW5lLCBuZXdXZWVrbHlEZWFkbGluZVR5cGUgaW5zaWRlIGNyZWF0ZVdlZWtseURlYWRsaW5lJ1xuICAgICk7XG4gICAgY29uc3QgZXZlbnQgPSBhd2FpdCBjcmVhdGVEZWFkbGluZUV2ZW50Rm9yVGFza0xpc3QoXG4gICAgICBjbGllbnQsXG4gICAgICB1c2VySWQsXG4gICAgICBub3RlcyxcbiAgICAgIG5ld1dlZWtseUR1cmF0aW9uLFxuICAgICAgdGFza0lkLFxuICAgICAgV2Vla2x5VGFzayxcbiAgICAgIG5ld1dlZWtseVByaW9yaXR5LFxuICAgICAgbmV3V2Vla2x5RGVhZGxpbmVUeXBlID09PSAnc29mdCcgPyBuZXdXZWVrbHlEZWFkbGluZSA6IG51bGwsXG4gICAgICBuZXdXZWVrbHlEZWFkbGluZVR5cGUgPT09ICdoYXJkJyA/IG5ld1dlZWtseURlYWRsaW5lVHlwZSA6IG51bGxcbiAgICApO1xuICAgIGlmIChldmVudCkge1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSBldmVudCBpbiBhcHAnKTtcbiAgfVxufTtcbiJdfQ==