"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeItemFromAlarms = exports.addItemToAlarms = exports.removeItemFromCategories = exports.addItemToCategories = exports.updateEntryInManualEntries = exports.addOneToManualEntries = exports.addSelectedContactsToAttendees = exports.updateContactSelection = exports.removeContactFromAttendee = exports.removeEntryFromManualEntries = exports.addEntryToManualEntries = exports.addContactToAttendees = exports.addAttendeeToAttendees = exports.removeAttendeeFromAttendees = void 0;
const lodash_1 = __importDefault(require("lodash"));
const uuid_1 = require("uuid");
const removeAttendeeFromAttendees = (a, setA, index, setParentA) => {
    const newA = a.slice(0, index).concat(a.slice(index + 1));
    setA(newA);
    setParentA(newA);
};
exports.removeAttendeeFromAttendees = removeAttendeeFromAttendees;
const addAttendeeToAttendees = (a, p, setA, setParentA) => {
    const newA = a.concat([p]);
    setA(newA);
    setParentA(newA);
};
exports.addAttendeeToAttendees = addAttendeeToAttendees;
const addContactToAttendees = (c, attendees, setA, setParentA) => {
    const formattedC = {
        id: c?.id,
        name: c?.name,
        emails: c?.emails.map((e) => ({
            primary: e?.primary,
            value: e?.value,
            type: e?.type,
            displayName: e?.displayName,
        })),
        phoneNumbers: c?.phoneNumbers,
        imAddresses: c?.imAddresses,
    };
    const newAttendees = attendees.concat([formattedC]);
    setA(newAttendees);
    setParentA(newAttendees);
};
exports.addContactToAttendees = addContactToAttendees;
const addEntryToManualEntries = (a, p, setA, setParentA) => {
    const newA = a.concat([p]);
    setA(newA);
    setParentA(newA);
};
exports.addEntryToManualEntries = addEntryToManualEntries;
const removeEntryFromManualEntries = (manualEntries, setManualEntries, attendees, setAttendees, setParentA, index, parentIndex) => {
    const newEntries = manualEntries
        .slice(0, index)
        .concat(manualEntries.slice(index + 1));
    setManualEntries(newEntries);
    const newAttendees = attendees
        .slice(0, parentIndex)
        .concat(attendees.slice(parentIndex + 1));
    setAttendees(newAttendees);
    setParentA(newAttendees);
};
exports.removeEntryFromManualEntries = removeEntryFromManualEntries;
const removeContactFromAttendee = (c, attendees, setAttendees, setParentA) => {
    const foundIndex = attendees.findIndex((a) => a?.id === c?.id);
    if (foundIndex > -1) {
        const newAttendees = attendees
            .slice(0, foundIndex)
            .concat(attendees.slice(foundIndex + 1));
        setAttendees(newAttendees);
        setParentA(newAttendees);
    }
};
exports.removeContactFromAttendee = removeContactFromAttendee;
const updateContactSelection = (value, selectedCo, a, setA, index) => {
    const newA = lodash_1.default.cloneDeep(a
        .slice(0, index)
        .concat([{ ...selectedCo, selected: value }])
        .concat(a.slice(index + 1)));
    setA(newA);
};
exports.updateContactSelection = updateContactSelection;
const addSelectedContactsToAttendees = (cc, setCC, at, setAt, setParentA) => {
    const selectedContacts = cc.filter((c) => c?.selected === true);
    const unselectedContacts = cc.filter((c) => c?.selected === false);
    const removedUnselectedAt = lodash_1.default.differenceBy(at, unselectedContacts, (a) => a?.id);
    const formattedContacts = selectedContacts.map((c) => ({
        id: c?.id,
        name: c?.name,
        emails: c?.emails.map((e) => ({
            primary: e?.primary,
            value: e?.value,
            type: e?.type,
            displayName: e?.displayName,
        })),
        phoneNumbers: c?.phoneNumbers,
        imAddresses: c?.imAddresses,
    }));
    const newAt = removedUnselectedAt.concat(formattedContacts);
    setAt(newAt);
    setParentA(newAt);
    setCC(cc.map((e) => ({ ...e, selected: false })));
};
exports.addSelectedContactsToAttendees = addSelectedContactsToAttendees;
const addOneToManualEntries = (me, setMe, attendees, setAttendees, setParentA) => {
    const newValue = {
        id: (0, uuid_1.v4)(),
        emails: [{ primary: false, value: '', type: '', displayName: '' }],
        additionalGuests: 0,
    };
    const newMe = lodash_1.default.uniqWith(me.concat([newValue]), lodash_1.default.isEqual);
    setMe(newMe);
    const newAttendees = lodash_1.default.uniqWith(attendees.concat([newValue]), lodash_1.default.isEqual);
    setAttendees(newAttendees);
    setParentA(newAttendees);
};
exports.addOneToManualEntries = addOneToManualEntries;
const updateEntryInManualEntries = (me, setMe, index, attendees, setAttendees, setParentA, parentIndex, emails, displayName, additionalGuests) => {
    const oldDoc = me[index];
    const newDoc = {
        id: oldDoc?.id,
        name: displayName ||
            oldDoc?.name ||
            emails?.[0]?.displayName ||
            oldDoc?.emails?.[0]?.displayName,
        emails: emails || oldDoc?.emails,
        additionalGuests: additionalGuests || oldDoc?.additionalGuests,
    };
    const newMe = me
        .slice(0, index)
        .concat([newDoc])
        .concat(me.slice(index + 1));
    setMe(newMe);
    const newAttendees = attendees
        .slice(0, parentIndex)
        .concat([newDoc])
        .concat(attendees.slice(parentIndex + 1));
    setAttendees(newAttendees);
    setParentA(newAttendees);
};
exports.updateEntryInManualEntries = updateEntryInManualEntries;
const addItemToCategories = (setTag, item = null, setItem, categories = [], setCategories, setParentCategories) => {
    const newCategories = lodash_1.default.uniqWith(categories.concat([item]), lodash_1.default.isEqual).filter((e) => e !== null);
    setCategories(newCategories);
    setParentCategories(newCategories);
    setTag(undefined);
    setItem(null);
};
exports.addItemToCategories = addItemToCategories;
const removeItemFromCategories = (categories, setCategories, setParentCategories, index) => {
    const newCategories = categories
        .slice(0, index)
        .concat(categories.slice(index + 1));
    setCategories(newCategories);
    setParentCategories(newCategories);
};
exports.removeItemFromCategories = removeItemFromCategories;
const addItemToAlarms = (item, alarms, setAlarms, setParentAlarms, setAlarm) => {
    const newAlarms = lodash_1.default.uniqWith(alarms.concat([item]), lodash_1.default.isEqual);
    setAlarms(newAlarms);
    setParentAlarms(newAlarms);
    setAlarm(0);
};
exports.addItemToAlarms = addItemToAlarms;
const removeItemFromAlarms = (index, alarms, setAlarms, setParentAlarms) => {
    const newAlarms = alarms.slice(0, index).concat(alarms.slice(index + 1));
    setAlarms(newAlarms);
    setParentAlarms(newAlarms);
};
exports.removeItemFromAlarms = removeItemFromAlarms;
/** end */
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2l6YXJkSGVscGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2l6YXJkSGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBLG9EQUF1QjtBQUN2QiwrQkFBa0M7QUFJM0IsTUFBTSwyQkFBMkIsR0FBRyxDQUN6QyxDQUFXLEVBQ1gsSUFBd0MsRUFDeEMsS0FBYSxFQUNiLFVBQThDLEVBQzlDLEVBQUU7SUFDRixNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxRCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDWCxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBVFcsUUFBQSwyQkFBMkIsK0JBU3RDO0FBRUssTUFBTSxzQkFBc0IsR0FBRyxDQUNwQyxDQUFXLEVBQ1gsQ0FBUyxFQUNULElBQXdDLEVBQ3hDLFVBQThDLEVBQzlDLEVBQUU7SUFDRixNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDWCxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBVFcsUUFBQSxzQkFBc0IsMEJBU2pDO0FBRUssTUFBTSxxQkFBcUIsR0FBRyxDQUNuQyxDQUFzQixFQUN0QixTQUFtQixFQUNuQixJQUF3QyxFQUN4QyxVQUE4QyxFQUM5QyxFQUFFO0lBQ0YsTUFBTSxVQUFVLEdBQVc7UUFDekIsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ1QsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJO1FBQ2IsTUFBTSxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FB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LGFBQWEsQ0FBQyxDQUFDO0lBQzdCLG1CQUFtQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3JDLENBQUMsQ0FBQztBQVhXLFFBQUEsd0JBQXdCLDRCQVduQztBQUVLLE1BQU0sZUFBZSxHQUFHLENBQzdCLElBQVksRUFDWixNQUFnQixFQUNoQixTQUE2QyxFQUM3QyxlQUFtRCxFQUNuRCxRQUEwQyxFQUMxQyxFQUFFO0lBQ0YsTUFBTSxTQUFTLEdBQUcsZ0JBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsZ0JBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvRCxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckIsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzNCLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNkLENBQUMsQ0FBQztBQVhXLFFBQUEsZUFBZSxtQkFXMUI7QUFFSyxNQUFNLG9CQUFvQixHQUFHLENBQ2xDLEtBQWEsRUFDYixNQUFnQixFQUNoQixTQUE2QyxFQUM3QyxlQUFtRCxFQUNuRCxFQUFFO0lBQ0YsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFekUsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3JCLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM3QixDQUFDLENBQUM7QUFWVyxRQUFBLG9CQUFvQix3QkFVL0I7QUFFRixVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlzcGF0Y2gsIFNldFN0YXRlQWN0aW9uIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUGVyc29uLCBwaG9uZU51bWJlciwgaW1BZGRyZXNzLCBlbWFpbCB9IGZyb20gJ0BsaWIvQ2FsZW5kYXIvdHlwZXMnO1xuaW1wb3J0IHsgU2VsZWN0ZWRDb250YWN0VHlwZSB9IGZyb20gJ0BwYWdlcy9DYWxlbmRhci9DcmVhdGVFdmVudFdpemFyZC9DcmVhdGVFdmVudEF0dGVuZGVlcyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQ2F0ZWdvcnlUeXBlIH0gZnJvbSAnQGxpYi9kYXRhVHlwZXMvQ2F0ZWdvcnlUeXBlJztcbmltcG9ydCB7IE9wdGlvblR5cGUgfSBmcm9tICcuLi8uLi8uLi9wYWdlcy9DYWxlbmRhci9DcmVhdGVFdmVudFdpemFyZC9DcmVhdGVFdmVudEFkZENhdGVnb3JpZXMnO1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlQXR0ZW5kZWVGcm9tQXR0ZW5kZWVzID0gKFxuICBhOiBQZXJzb25bXSxcbiAgc2V0QTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PixcbiAgaW5kZXg6IG51bWJlcixcbiAgc2V0UGFyZW50QTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PlxuKSA9PiB7XG4gIGNvbnN0IG5ld0EgPSBhLnNsaWNlKDAsIGluZGV4KS5jb25jYXQoYS5zbGljZShpbmRleCArIDEpKTtcbiAgc2V0QShuZXdBKTtcbiAgc2V0UGFyZW50QShuZXdBKTtcbn07XG5cbmV4cG9ydCBjb25zdCBhZGRBdHRlbmRlZVRvQXR0ZW5kZWVzID0gKFxuICBhOiBQZXJzb25bXSxcbiAgcDogUGVyc29uLFxuICBzZXRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+LFxuICBzZXRQYXJlbnRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+XG4pID0+IHtcbiAgY29uc3QgbmV3QSA9IGEuY29uY2F0KFtwXSk7XG4gIHNldEEobmV3QSk7XG4gIHNldFBhcmVudEEobmV3QSk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkQ29udGFjdFRvQXR0ZW5kZWVzID0gKFxuICBjOiBTZWxlY3RlZENvbnRhY3RUeXBlLFxuICBhdHRlbmRlZXM6IFBlcnNvbltdLFxuICBzZXRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+LFxuICBzZXRQYXJlbnRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+XG4pID0+IHtcbiAgY29uc3QgZm9ybWF0dGVkQzogUGVyc29uID0ge1xuICAgIGlkOiBjPy5pZCxcbiAgICBuYW1lOiBjPy5uYW1lLFxuICAgIGVtYWlsczogYz8uZW1haWxzLm1hcCgoZSkgPT4gKHtcbiAgICAgIHByaW1hcnk6IGU/LnByaW1hcnksXG4gICAgICB2YWx1ZTogZT8udmFsdWUsXG4gICAgICB0eXBlOiBlPy50eXBlLFxuICAgICAgZGlzcGxheU5hbWU6IGU/LmRpc3BsYXlOYW1lLFxuICAgIH0pKSxcbiAgICBwaG9uZU51bWJlcnM6IGM/LnBob25lTnVtYmVycyBhcyBwaG9uZU51bWJlcltdLFxuICAgIGltQWRkcmVzc2VzOiBjPy5pbUFkZHJlc3NlcyBhcyBpbUFkZHJlc3NbXSxcbiAgfTtcblxuICBjb25zdCBuZXdBdHRlbmRlZXMgPSBhdHRlbmRlZXMuY29uY2F0KFtmb3JtYXR0ZWRDXSk7XG4gIHNldEEobmV3QXR0ZW5kZWVzKTtcbiAgc2V0UGFyZW50QShuZXdBdHRlbmRlZXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZEVudHJ5VG9NYW51YWxFbnRyaWVzID0gKFxuICBhOiBQZXJzb25bXSxcbiAgcDogUGVyc29uLFxuICBzZXRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+LFxuICBzZXRQYXJlbnRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+XG4pID0+IHtcbiAgY29uc3QgbmV3QSA9IGEuY29uY2F0KFtwXSk7XG4gIHNldEEobmV3QSk7XG4gIHNldFBhcmVudEEobmV3QSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlRW50cnlGcm9tTWFudWFsRW50cmllcyA9IChcbiAgbWFudWFsRW50cmllczogUGVyc29uW10sXG4gIHNldE1hbnVhbEVudHJpZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFBlcnNvbltdPj4sXG4gIGF0dGVuZGVlczogUGVyc29uW10sXG4gIHNldEF0dGVuZGVlczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PixcbiAgc2V0UGFyZW50QTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PixcbiAgaW5kZXg6IG51bWJlcixcbiAgcGFyZW50SW5kZXg6IG51bWJlclxuKSA9PiB7XG4gIGNvbnN0IG5ld0VudHJpZXMgPSBtYW51YWxFbnRyaWVzXG4gICAgLnNsaWNlKDAsIGluZGV4KVxuICAgIC5jb25jYXQobWFudWFsRW50cmllcy5zbGljZShpbmRleCArIDEpKTtcbiAgc2V0TWFudWFsRW50cmllcyhuZXdFbnRyaWVzKTtcbiAgY29uc3QgbmV3QXR0ZW5kZWVzID0gYXR0ZW5kZWVzXG4gICAgLnNsaWNlKDAsIHBhcmVudEluZGV4KVxuICAgIC5jb25jYXQoYXR0ZW5kZWVzLnNsaWNlKHBhcmVudEluZGV4ICsgMSkpO1xuICBzZXRBdHRlbmRlZXMobmV3QXR0ZW5kZWVzKTtcbiAgc2V0UGFyZW50QShuZXdBdHRlbmRlZXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZUNvbnRhY3RGcm9tQXR0ZW5kZWUgPSAoXG4gIGM6IFNlbGVjdGVkQ29udGFjdFR5cGUsXG4gIGF0dGVuZGVlczogUGVyc29uW10sXG4gIHNldEF0dGVuZGVlczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PixcbiAgc2V0UGFyZW50QTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PlxuKSA9PiB7XG4gIGNvbnN0IGZvdW5kSW5kZXggPSBhdHRlbmRlZXMuZmluZEluZGV4KChhKSA9PiBhPy5pZCA9PT0gYz8uaWQpO1xuXG4gIGlmIChmb3VuZEluZGV4ID4gLTEpIHtcbiAgICBjb25zdCBuZXdBdHRlbmRlZXMgPSBhdHRlbmRlZXNcbiAgICAgIC5zbGljZSgwLCBmb3VuZEluZGV4KVxuICAgICAgLmNvbmNhdChhdHRlbmRlZXMuc2xpY2UoZm91bmRJbmRleCArIDEpKTtcblxuICAgIHNldEF0dGVuZGVlcyhuZXdBdHRlbmRlZXMpO1xuICAgIHNldFBhcmVudEEobmV3QXR0ZW5kZWVzKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUNvbnRhY3RTZWxlY3Rpb24gPSAoXG4gIHZhbHVlOiBib29sZWFuLFxuICBzZWxlY3RlZENvOiBTZWxlY3RlZENvbnRhY3RUeXBlLFxuICBhOiBTZWxlY3RlZENvbnRhY3RUeXBlW10sXG4gIHNldEE6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFNlbGVjdGVkQ29udGFjdFR5cGVbXT4+LFxuICBpbmRleDogbnVtYmVyXG4pID0+IHtcbiAgY29uc3QgbmV3QSA9IF8uY2xvbmVEZWVwKFxuICAgIGFcbiAgICAgIC5zbGljZSgwLCBpbmRleClcbiAgICAgIC5jb25jYXQoW3sgLi4uc2VsZWN0ZWRDbywgc2VsZWN0ZWQ6IHZhbHVlIH1dKVxuICAgICAgLmNvbmNhdChhLnNsaWNlKGluZGV4ICsgMSkpXG4gICk7XG4gIHNldEEobmV3QSk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkU2VsZWN0ZWRDb250YWN0c1RvQXR0ZW5kZWVzID0gKFxuICBjYzogU2VsZWN0ZWRDb250YWN0VHlwZVtdLFxuICBzZXRDQzogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248U2VsZWN0ZWRDb250YWN0VHlwZVtdPj4sXG4gIGF0OiBQZXJzb25bXSxcbiAgc2V0QXQ6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFBlcnNvbltdPj4sXG4gIHNldFBhcmVudEE6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFBlcnNvbltdPj5cbikgPT4ge1xuICBjb25zdCBzZWxlY3RlZENvbnRhY3RzID0gY2MuZmlsdGVyKChjKSA9PiBjPy5zZWxlY3RlZCA9PT0gdHJ1ZSk7XG4gIGNvbnN0IHVuc2VsZWN0ZWRDb250YWN0cyA9IGNjLmZpbHRlcigoYykgPT4gYz8uc2VsZWN0ZWQgPT09IGZhbHNlKTtcblxuICBjb25zdCByZW1vdmVkVW5zZWxlY3RlZEF0ID0gXy5kaWZmZXJlbmNlQnkoXG4gICAgYXQsXG4gICAgdW5zZWxlY3RlZENvbnRhY3RzLFxuICAgIChhKSA9PiBhPy5pZFxuICApO1xuXG4gIGNvbnN0IGZvcm1hdHRlZENvbnRhY3RzOiBQZXJzb25bXSA9IHNlbGVjdGVkQ29udGFjdHMubWFwKChjKSA9PiAoe1xuICAgIGlkOiBjPy5pZCxcbiAgICBuYW1lOiBjPy5uYW1lLFxuICAgIGVtYWlsczogYz8uZW1haWxzLm1hcCgoZSkgPT4gKHtcbiAgICAgIHByaW1hcnk6IGU/LnByaW1hcnksXG4gICAgICB2YWx1ZTogZT8udmFsdWUsXG4gICAgICB0eXBlOiBlPy50eXBlLFxuICAgICAgZGlzcGxheU5hbWU6IGU/LmRpc3BsYXlOYW1lLFxuICAgIH0pKSxcbiAgICBwaG9uZU51bWJlcnM6IGM/LnBob25lTnVtYmVycyBhcyBwaG9uZU51bWJlcltdLFxuICAgIGltQWRkcmVzc2VzOiBjPy5pbUFkZHJlc3NlcyBhcyBpbUFkZHJlc3NbXSxcbiAgfSkpO1xuXG4gIGNvbnN0IG5ld0F0ID0gcmVtb3ZlZFVuc2VsZWN0ZWRBdC5jb25jYXQoZm9ybWF0dGVkQ29udGFjdHMpO1xuICBzZXRBdChuZXdBdCk7XG4gIHNldFBhcmVudEEobmV3QXQpO1xuICBzZXRDQyhjYy5tYXAoKGUpID0+ICh7IC4uLmUsIHNlbGVjdGVkOiBmYWxzZSB9KSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZE9uZVRvTWFudWFsRW50cmllcyA9IChcbiAgbWU6IFBlcnNvbltdLFxuICBzZXRNZTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248UGVyc29uW10+PixcbiAgYXR0ZW5kZWVzOiBQZXJzb25bXSxcbiAgc2V0QXR0ZW5kZWVzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+LFxuICBzZXRQYXJlbnRBOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+XG4pID0+IHtcbiAgY29uc3QgbmV3VmFsdWU6IFBlcnNvbiA9IHtcbiAgICBpZDogdXVpZCgpLFxuICAgIGVtYWlsczogW3sgcHJpbWFyeTogZmFsc2UsIHZhbHVlOiAnJywgdHlwZTogJycsIGRpc3BsYXlOYW1lOiAnJyB9XSxcbiAgICBhZGRpdGlvbmFsR3Vlc3RzOiAwLFxuICB9O1xuXG4gIGNvbnN0IG5ld01lID0gXy51bmlxV2l0aChtZS5jb25jYXQoW25ld1ZhbHVlXSksIF8uaXNFcXVhbCk7XG4gIHNldE1lKG5ld01lKTtcbiAgY29uc3QgbmV3QXR0ZW5kZWVzID0gXy51bmlxV2l0aChhdHRlbmRlZXMuY29uY2F0KFtuZXdWYWx1ZV0pLCBfLmlzRXF1YWwpO1xuICBzZXRBdHRlbmRlZXMobmV3QXR0ZW5kZWVzKTtcbiAgc2V0UGFyZW50QShuZXdBdHRlbmRlZXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUVudHJ5SW5NYW51YWxFbnRyaWVzID0gKFxuICBtZTogUGVyc29uW10sXG4gIHNldE1lOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxQZXJzb25bXT4+LFxuICBpbmRleDogbnVtYmVyLFxuICBhdHRlbmRlZXM6IFBlcnNvbltdLFxuICBzZXRBdHRlbmRlZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFBlcnNvbltdPj4sXG4gIHNldFBhcmVudEE6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFBlcnNvbltdPj4sXG4gIHBhcmVudEluZGV4OiBudW1iZXIsXG4gIGVtYWlscz86IGVtYWlsW10sXG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nLFxuICBhZGRpdGlvbmFsR3Vlc3RzPzogbnVtYmVyXG4pID0+IHtcbiAgY29uc3Qgb2xkRG9jID0gbWVbaW5kZXhdO1xuICBjb25zdCBuZXdEb2M6IFBlcnNvbiA9IHtcbiAgICBpZDogb2xkRG9jPy5pZCxcbiAgICBuYW1lOlxuICAgICAgZGlzcGxheU5hbWUgfHxcbiAgICAgIG9sZERvYz8ubmFtZSB8fFxuICAgICAgZW1haWxzPy5bMF0/LmRpc3BsYXlOYW1lIHx8XG4gICAgICBvbGREb2M/LmVtYWlscz8uWzBdPy5kaXNwbGF5TmFtZSxcbiAgICBlbWFpbHM6IGVtYWlscyB8fCBvbGREb2M/LmVtYWlscyxcbiAgICBhZGRpdGlvbmFsR3Vlc3RzOiBhZGRpdGlvbmFsR3Vlc3RzIHx8IG9sZERvYz8uYWRkaXRpb25hbEd1ZXN0cyxcbiAgfTtcblxuICBjb25zdCBuZXdNZSA9IG1lXG4gICAgLnNsaWNlKDAsIGluZGV4KVxuICAgIC5jb25jYXQoW25ld0RvY10pXG4gICAgLmNvbmNhdChtZS5zbGljZShpbmRleCArIDEpKTtcbiAgc2V0TWUobmV3TWUpO1xuICBjb25zdCBuZXdBdHRlbmRlZXMgPSBhdHRlbmRlZXNcbiAgICAuc2xpY2UoMCwgcGFyZW50SW5kZXgpXG4gICAgLmNvbmNhdChbbmV3RG9jXSlcbiAgICAuY29uY2F0KGF0dGVuZGVlcy5zbGljZShwYXJlbnRJbmRleCArIDEpKTtcbiAgc2V0QXR0ZW5kZWVzKG5ld0F0dGVuZGVlcyk7XG4gIHNldFBhcmVudEEobmV3QXR0ZW5kZWVzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBhZGRJdGVtVG9DYXRlZ29yaWVzID0gKFxuICBzZXRUYWc6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPE9wdGlvblR5cGU+PixcbiAgaXRlbTogQ2F0ZWdvcnlUeXBlID0gbnVsbCxcbiAgc2V0SXRlbTogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248Q2F0ZWdvcnlUeXBlPj4sXG4gIGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdID0gW10sXG4gIHNldENhdGVnb3JpZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPENhdGVnb3J5VHlwZVtdPj4sXG4gIHNldFBhcmVudENhdGVnb3JpZXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPENhdGVnb3J5VHlwZVtdPj5cbikgPT4ge1xuICBjb25zdCBuZXdDYXRlZ29yaWVzID0gXy51bmlxV2l0aChjYXRlZ29yaWVzLmNvbmNhdChbaXRlbV0pLCBfLmlzRXF1YWwpLmZpbHRlcihcbiAgICAoZSkgPT4gZSAhPT0gbnVsbFxuICApO1xuICBzZXRDYXRlZ29yaWVzKG5ld0NhdGVnb3JpZXMpO1xuICBzZXRQYXJlbnRDYXRlZ29yaWVzKG5ld0NhdGVnb3JpZXMpO1xuICBzZXRUYWcodW5kZWZpbmVkKTtcbiAgc2V0SXRlbShudWxsKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVJdGVtRnJvbUNhdGVnb3JpZXMgPSAoXG4gIGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdLFxuICBzZXRDYXRlZ29yaWVzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxDYXRlZ29yeVR5cGVbXT4+LFxuICBzZXRQYXJlbnRDYXRlZ29yaWVzOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxDYXRlZ29yeVR5cGVbXT4+LFxuICBpbmRleDogbnVtYmVyXG4pID0+IHtcbiAgY29uc3QgbmV3Q2F0ZWdvcmllcyA9IGNhdGVnb3JpZXNcbiAgICAuc2xpY2UoMCwgaW5kZXgpXG4gICAgLmNvbmNhdChjYXRlZ29yaWVzLnNsaWNlKGluZGV4ICsgMSkpO1xuICBzZXRDYXRlZ29yaWVzKG5ld0NhdGVnb3JpZXMpO1xuICBzZXRQYXJlbnRDYXRlZ29yaWVzKG5ld0NhdGVnb3JpZXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZEl0ZW1Ub0FsYXJtcyA9IChcbiAgaXRlbTogbnVtYmVyLFxuICBhbGFybXM6IG51bWJlcltdLFxuICBzZXRBbGFybXM6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPG51bWJlcltdPj4sXG4gIHNldFBhcmVudEFsYXJtczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248bnVtYmVyW10+PixcbiAgc2V0QWxhcm06IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPG51bWJlcj4+XG4pID0+IHtcbiAgY29uc3QgbmV3QWxhcm1zID0gXy51bmlxV2l0aChhbGFybXMuY29uY2F0KFtpdGVtXSksIF8uaXNFcXVhbCk7XG4gIHNldEFsYXJtcyhuZXdBbGFybXMpO1xuICBzZXRQYXJlbnRBbGFybXMobmV3QWxhcm1zKTtcbiAgc2V0QWxhcm0oMCk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlSXRlbUZyb21BbGFybXMgPSAoXG4gIGluZGV4OiBudW1iZXIsXG4gIGFsYXJtczogbnVtYmVyW10sXG4gIHNldEFsYXJtczogRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248bnVtYmVyW10+PixcbiAgc2V0UGFyZW50QWxhcm1zOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxudW1iZXJbXT4+XG4pID0+IHtcbiAgY29uc3QgbmV3QWxhcm1zID0gYWxhcm1zLnNsaWNlKDAsIGluZGV4KS5jb25jYXQoYWxhcm1zLnNsaWNlKGluZGV4ICsgMSkpO1xuXG4gIHNldEFsYXJtcyhuZXdBbGFybXMpO1xuICBzZXRQYXJlbnRBbGFybXMobmV3QWxhcm1zKTtcbn07XG5cbi8qKiBlbmQgKi9cbiJdfQ==