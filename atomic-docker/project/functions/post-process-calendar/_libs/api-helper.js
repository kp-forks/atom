import { dayOfWeekIntToString, eventVectorName, externalMeetingLabel, googleCalendarResource, googleClientIdAndroid, googleClientIdAtomicWeb, googleClientIdIos, googleClientIdWeb, googleClientSecretAtomicWeb, googleClientSecretWeb, googleTokenUrl, hasuraAdminSecret, hasuraGraphUrl, meetingLabel, minThresholdScore, onOptaPlanCalendarAdminCallBackUrl, optaPlannerPassword, optaPlannerUrl, optaPlannerUsername, optaplannerDuration, searchIndex, vectorDimensions, zoomBaseTokenUrl, zoomBaseUrl, zoomClientId, zoomClientSecret, zoomIVForPass, zoomPassKey, zoomResourceName, zoomSaltForPass, } from '@post_process_calendar/_libs/constants';
import got from 'got';
import { v4 as uuid } from 'uuid';
import dayjs from 'dayjs';
import duration from 'dayjs/plugin/duration';
import isBetween from 'dayjs/plugin/isBetween';
import timezone from 'dayjs/plugin/timezone';
import utc from 'dayjs/plugin/utc';
import _ from 'lodash';
import { PutObjectCommand, S3Client } from '@aws-sdk/client-s3';
import { Client } from '@opensearch-project/opensearch';
import { getISODay, setISODay } from 'date-fns';
import { Configuration, OpenAIApi } from 'openai';
import { google } from 'googleapis';
import axios from 'axios';
import { URLSearchParams } from 'node:url';
import crypto from 'crypto';
import { bucketName } from '@/gpt/_libs/constants';
dayjs.extend(duration);
dayjs.extend(isBetween);
dayjs.extend(timezone);
dayjs.extend(utc);
const s3Client = new S3Client({
    credentials: {
        accessKeyId: process.env.S3_ACCESS_KEY,
        secretAccessKey: process.env.S3_SECRET_KEY,
    },
    endpoint: process.env.S3_ENDPOINT,
    forcePathStyle: true,
});
const configuration = new Configuration({
    apiKey,
});
openai = new OpenAIApi(configuration);
defaultOpenAIAPIKey = apiKey;
export async function streamToString(stream) {
    return await new Promise((resolve, reject) => {
        const chunks = [];
        stream.on('data', (chunk) => chunks.push(chunk));
        stream.on('error', reject);
        stream.on('end', () => resolve(Buffer.concat(chunks).toString('utf-8')));
    });
}
export const getSearchClient = async () => {
    try {
        return new Client({
            node: process.env.OPENSEARCH_ENDPOINT,
            auth: {
                username: process.env.OPENSEARCH_USERNAME,
                password: process.env.OPENSEARCH_PASSWORD,
            },
        });
    }
    catch (e) {
        console.log(e, ' unable to get search client');
    }
};
export const searchData3 = async (userId, searchVector) => {
    try {
        const client = await getSearchClient();
        const response = await client.search({
            index: searchIndex,
            body: {
                size: vectorDimensions,
                query: {
                    script_score: {
                        query: {
                            bool: {
                                filter: {
                                    term: {
                                        userId,
                                    },
                                },
                            },
                        },
                        script: {
                            lang: 'knn',
                            source: 'knn_score',
                            params: {
                                field: eventVectorName,
                                query_value: searchVector,
                                space_type: 'cosinesimil',
                            },
                        },
                    },
                },
                min_score: 1.2,
            },
        });
        console.log(response, ' search data in search engine');
        return response.body;
    }
    catch (e) {
        console.log(e, ' unable to search data');
    }
};
export const convertEventToVectorSpace2 = async (event) => {
    try {
        if (!event) {
            throw new Error('no event provided to convertEventToVectorSpace2');
        }
        const { summary, notes } = event;
        const text = `${summary}${notes ? `: ${notes}` : ''}`;
        if (!text || text.trim() === ':') {
            // Handle cases where summary and notes might be empty or just ":"
            console.log('Empty or invalid text for embedding, returning null or empty array.');
            return []; // Or handle as per existing error patterns if any
        }
        const embeddingRequest = {
            model: 'text-embedding-ada-002',
            input: text,
        };
        const res = await openai.embeddings.create(embeddingRequest);
        const vector = res?.data?.[0]?.embedding;
        console.log(vector
            ? `Vector generated with length: ${vector.length}`
            : 'No vector generated', ' vector inside convertEventToVectorSpace2');
        return vector;
    }
    catch (e) {
        console.error(e, ' unable to convertEventToVectorSpace using OpenAI');
        // Consider re-throwing or returning a specific error/value based on how callers handle it
        throw e;
    }
};
export const listMeetingAssistPreferredTimeRangesGivenMeetingId = async (meetingId) => {
    try {
        const operationName = 'ListMeetingAssistPrefereredTimeRangesByMeetingId';
        const query = `
            query ListMeetingAssistPrefereredTimeRangesByMeetingId($meetingId: uuid!) {
                Meeting_Assist_Preferred_Time_Range(where: {meetingId: {_eq: $meetingId}}) {
                    attendeeId
                    createdDate
                    dayOfWeek
                    endTime
                    hostId
                    id
                    meetingId
                    startTime
                    updatedAt
                }
             }

        `;
        const variables = {
            meetingId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res from listMeetingAssistAttendees ');
        return res?.data?.Meeting_Assist_Preferred_Time_Range;
    }
    catch (e) {
        console.log(e, ' uanble to list meeting assist preferred time ranges');
    }
};
export const listMeetingAssistAttendeesGivenMeetingId = async (meetingId) => {
    try {
        const operationName = 'ListMeetingAssistAttendeesByMeetingId';
        const query = `
            query ListMeetingAssistAttendeesByMeetingId($meetingId: uuid!) {
                Meeting_Assist_Attendee(where: {meetingId: {_eq: $meetingId}}) {
                    contactId
                    createdDate
                    emails
                    externalAttendee
                    hostId
                    id
                    imAddresses
                    meetingId
                    name
                    phoneNumbers
                    primaryEmail
                    timezone
                    updatedAt
                    userId
                }
            }
        `;
        const variables = {
            meetingId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res from listMeetingAssistAttendees ');
        return res?.data?.Meeting_Assist_Attendee;
    }
    catch (e) {
        console.log(e, ' unable to list meeting assist attendees');
    }
};
export const getMeetingAssistAttendee = async (id) => {
    try {
        const operationName = 'GetMeetingAssistAttendeeById';
        const query = `
            query GetMeetingAssistAttendeeById($id: String!) {
                Meeting_Assist_Attendee_by_pk(id: $id) {
                    contactId
                    createdDate
                    emails
                    hostId
                    id
                    imAddresses
                    meetingId
                    name
                    phoneNumbers
                    primaryEmail
                    timezone
                    updatedAt
                    userId
                    externalAttendee
                }
            }
        `;
        const variables = {
            id,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res from getMeetingAssistAttendee');
        return res?.data?.Meeting_Assist_Attendee_by_pk;
    }
    catch (e) {
        console.log(e, ' unable to get meeting assist attendee');
    }
};
export const getMeetingAssist = async (id) => {
    try {
        const operationName = 'GetMeetingAssistById';
        const query = `
            query GetMeetingAssistById($id: uuid!) {
                Meeting_Assist_by_pk(id: $id) {
                    anyoneCanAddSelf
                    attendeeCanModify
                    attendeeCount
                    attendeeRespondedCount
                    backgroundColor
                    bufferTime
                    calendarId
                    cancelIfAnyRefuse
                    cancelled
                    colorId
                    conferenceApp
                    createdDate
                    duration
                    enableAttendeePreferences
                    enableConference
                    enableHostPreferences
                    endDate
                    eventId
                    expireDate
                    guestsCanInviteOthers
                    guestsCanSeeOtherGuests
                    foregroundColor
                    id
                    location
                    minThresholdCount
                    notes
                    priority
                    reminders
                    sendUpdates
                    startDate
                    summary
                    timezone
                    transparency
                    updatedAt
                    useDefaultAlarms
                    userId
                    visibility
                    windowEndDate
                    windowStartDate
                    allowAttendeeUpdatePreferences
                    guaranteeAvailability
                }
            }
        `;
        const variables = {
            id,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res from getMeetingAssist');
        return res?.data?.Meeting_Assist_by_pk;
    }
    catch (e) {
        console.log(e, ' unable to get meeting assist from id');
    }
};
export const listMeetingAssistEventsForAttendeeGivenDates = async (attendeeId, hostStartDate, hostEndDate, userTimezone, hostTimezone) => {
    try {
        const operationName = 'ListMeetingAssistEventsForAttendeeGivenDates';
        const query = `
            query ListMeetingAssistEventsForAttendeeGivenDates($attendeeId: String!, $startDate: timestamp!, $endDate: timestamp!) {
                Meeting_Assist_Event(where: {attendeeId: {_eq: $attendeeId}, endDate: {_gte: $startDate}, startDate: {_lte: $endDate}}) {
                    allDay
                    attachments
                    attendeeId
                    attendeesOmitted
                    backgroundColor
                    calendarId
                    colorId
                    createdDate
                    creator
                    endDate
                    endTimeUnspecified
                    eventId
                    eventType
                    extendedProperties
                    externalUser
                    foregroundColor
                    guestsCanModify
                    hangoutLink
                    htmlLink
                    iCalUID
                    id
                    links
                    location
                    locked
                    meetingId
                    notes
                    organizer
                    privateCopy
                    recurrence
                    recurrenceRule
                    recurringEventId
                    source
                    startDate
                    summary
                    timezone
                    transparency
                    updatedAt
                    useDefaultAlarms
                    visibility
                }
            }
        `;
        const startDateInHostTimezone = dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true);
        const endDateInHostTimezone = dayjs(hostEndDate.slice(0, 19)).tz(hostTimezone, true);
        const startDateInUserTimezone = dayjs(startDateInHostTimezone)
            .tz(userTimezone)
            .format()
            .slice(0, 19);
        const endDateInUserTimezone = dayjs(endDateInHostTimezone)
            .tz(userTimezone)
            .format()
            .slice(0, 19);
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    attendeeId,
                    startDate: startDateInUserTimezone,
                    endDate: endDateInUserTimezone,
                },
            },
        })
            .json();
        console.log(res, ' res from listMeetingAssistEventsForAttendeeGivenDates');
        return res?.data?.Meeting_Assist_Event;
    }
    catch (e) {
        console.log(e, ' unable to list meeting assist events for attendee given dates');
    }
};
export const listEventsForDate = async (userId, startDate, endDate, timezone) => {
    try {
        const operationName = 'listEventsForDate';
        const query = `
        query listEventsForDate($userId: uuid!, $startDate: timestamp!, $endDate: timestamp!) {
          Event(where: {userId: {_eq: $userId}, endDate: {_gte: $startDate, _lt: $endDate}, deleted: {_eq: false}}) {
            allDay
            anyoneCanAddSelf
            attachments
            attendeesOmitted
            backgroundColor
            calendarId
            colorId
            conferenceId
            copyAvailability
            copyCategories
            copyDuration
            copyIsBreak
            copyIsExternalMeeting
            copyIsMeeting
            copyModifiable
            copyPriorityLevel
            copyReminders
            copyTimeBlocking
            copyTimePreference
            createdDate
            creator
            dailyTaskList
            deleted
            duration
            endDate
            endTimeUnspecified
            eventId
            eventType
            extendedProperties
            followUpEventId
            forEventId
            foregroundColor
            guestsCanInviteOthers
            guestsCanModify
            guestsCanSeeOtherGuests
            hangoutLink
            hardDeadline
            htmlLink
            iCalUID
            id
            isBreak
            isExternalMeeting
            isExternalMeetingModifiable
            isFollowUp
            isMeeting
            isMeetingModifiable
            isPostEvent
            isPreEvent
            links
            location
            locked
            maxAttendees
            meetingId
            method
            modifiable
            negativeImpactDayOfWeek
            negativeImpactScore
            negativeImpactTime
            notes
            organizer
            originalAllDay
            originalStartDate
            originalTimezone
            positiveImpactDayOfWeek
            positiveImpactScore
            positiveImpactTime
            postEventId
            preEventId
            preferredDayOfWeek
            preferredEndTimeRange
            preferredStartTimeRange
            preferredTime
            priority
            privateCopy
            recurrence
            recurrenceRule
            recurringEventId
            sendUpdates
            softDeadline
            source
            startDate
            status
            summary
            taskId
            taskType
            timeBlocking
            timezone
            title
            transparency
            unlink
            updatedAt
            useDefaultAlarms
            userId
            userModifiedAvailability
            userModifiedCategories
            userModifiedDuration
            userModifiedIsBreak
            userModifiedIsExternalMeeting
            userModifiedIsMeeting
            userModifiedModifiable
            userModifiedPriorityLevel
            userModifiedReminders
            userModifiedTimeBlocking
            userModifiedTimePreference
            visibility
            weeklyTaskList
            byWeekDay
            localSynced
            userModifiedColor
            copyColor
            copyExternalMeetingModifiable
            userModifiedExternalMeetingModifiable
            userModifiedMeetingModifiable
          }
        }
            `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    userId,
                    startDate: dayjs(startDate.slice(0, 19))
                        .tz(timezone, true)
                        .format(),
                    endDate: dayjs(endDate).tz(timezone, true).format(),
                },
            },
        })
            .json();
        console.log(res, ' res from listEventsforUser');
        return res?.data?.Event;
    }
    catch (e) {
        console.log(e, ' unable to list events for date');
    }
};
export const processMeetingAssistForOptaplanner = async () => {
    try {
    }
    catch (e) {
        console.log(e, ' unable to process meeting assist for optaplanner');
    }
};
export const generateNewMeetingEventForAttendee = (attendee, meetingAssist, windowStartDate, hostTimezone, preferredStartTimeRange) => {
    let startDate = dayjs(windowStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .format();
    if (preferredStartTimeRange?.dayOfWeek > 0) {
        startDate = dayjs(startDate)
            .tz(hostTimezone)
            .isoWeek(preferredStartTimeRange?.dayOfWeek)
            .format();
    }
    if (preferredStartTimeRange?.startTime) {
        const startTime = preferredStartTimeRange?.startTime;
        const hour = parseInt(startTime.slice(0, 2), 10);
        const minute = parseInt(startTime.slice(3), 10);
        startDate = dayjs(startDate)
            .tz(hostTimezone)
            .hour(hour)
            .minute(minute)
            .format();
    }
    const eventId = uuid();
    const newEvent = {
        id: `${eventId}#${meetingAssist.calendarId}`,
        method: 'create',
        title: meetingAssist.summary,
        startDate,
        endDate: dayjs(startDate)
            .tz(hostTimezone)
            .add(meetingAssist.duration, 'm')
            .format(),
        allDay: false,
        notes: meetingAssist.notes,
        timezone: hostTimezone,
        createdDate: dayjs().format(),
        deleted: false,
        priority: meetingAssist.priority,
        isFollowUp: false,
        isPreEvent: false,
        isPostEvent: false,
        modifiable: true,
        sendUpdates: meetingAssist?.sendUpdates,
        status: 'confirmed',
        summary: meetingAssist.summary,
        transparency: meetingAssist?.transparency,
        visibility: meetingAssist?.visibility,
        updatedAt: dayjs().format(),
        calendarId: meetingAssist.calendarId,
        useDefaultAlarms: meetingAssist.useDefaultAlarms,
        timeBlocking: meetingAssist.bufferTime,
        userModifiedTimeBlocking: meetingAssist?.bufferTime ? true : false,
        userModifiedTimePreference: preferredStartTimeRange?.id ? true : false,
        userModifiedReminders: meetingAssist?.reminders?.[0] > -1 ? true : false,
        userModifiedPriorityLevel: true,
        userModifiedModifiable: true,
        duration: meetingAssist?.duration,
        userModifiedDuration: true,
        userId: attendee?.userId,
        anyoneCanAddSelf: false,
        guestsCanInviteOthers: meetingAssist?.guestsCanInviteOthers,
        guestsCanSeeOtherGuests: meetingAssist?.guestsCanSeeOtherGuests,
        originalStartDate: undefined,
        originalAllDay: false,
        meetingId: meetingAssist.id,
        eventId,
    };
    return newEvent;
};
export const generateNewMeetingEventForHost = (hostAttendee, meetingAssist, windowStartDate, hostTimezone, preferredStartTimeRange) => {
    let startDate = dayjs(windowStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .format();
    if (preferredStartTimeRange?.dayOfWeek > 0) {
        startDate = dayjs(startDate)
            .tz(hostTimezone)
            .isoWeek(preferredStartTimeRange?.dayOfWeek)
            .format();
    }
    if (preferredStartTimeRange?.startTime) {
        const startTime = preferredStartTimeRange?.startTime;
        const hour = parseInt(startTime.slice(0, 2), 10);
        const minute = parseInt(startTime.slice(3), 10);
        startDate = dayjs(startDate)
            .tz(hostTimezone)
            .hour(hour)
            .minute(minute)
            .format();
    }
    const eventId = uuid();
    const newEvent = {
        id: `${eventId}#${meetingAssist?.calendarId}`,
        method: 'create',
        title: meetingAssist.summary,
        startDate,
        endDate: dayjs(startDate)
            .tz(hostTimezone)
            .add(meetingAssist.duration, 'm')
            .format(),
        allDay: false,
        notes: meetingAssist.notes,
        timezone: hostTimezone,
        createdDate: dayjs().format(),
        deleted: false,
        priority: meetingAssist.priority,
        isFollowUp: false,
        isPreEvent: false,
        isPostEvent: false,
        modifiable: true,
        sendUpdates: meetingAssist?.sendUpdates,
        status: 'confirmed',
        summary: meetingAssist.summary,
        transparency: meetingAssist?.transparency,
        visibility: meetingAssist?.visibility,
        updatedAt: dayjs().format(),
        calendarId: meetingAssist.calendarId,
        useDefaultAlarms: meetingAssist.useDefaultAlarms,
        timeBlocking: meetingAssist.bufferTime,
        userModifiedTimeBlocking: meetingAssist?.bufferTime ? true : false,
        userModifiedTimePreference: preferredStartTimeRange?.id ? true : false,
        userModifiedReminders: meetingAssist?.reminders?.[0] > -1 ? true : false,
        userModifiedPriorityLevel: true,
        userModifiedModifiable: true,
        duration: meetingAssist?.duration,
        userModifiedDuration: true,
        userId: hostAttendee?.userId,
        anyoneCanAddSelf: false,
        guestsCanInviteOthers: meetingAssist?.guestsCanInviteOthers,
        guestsCanSeeOtherGuests: meetingAssist?.guestsCanSeeOtherGuests,
        originalStartDate: undefined,
        originalAllDay: false,
        meetingId: meetingAssist.id,
        eventId,
    };
    return newEvent;
};
export const listPreferredTimeRangesForEvent = async (eventId) => {
    try {
        if (!eventId) {
            console.log(eventId, ' no eventId inside listPreferredTimeRangesForEvent');
        }
        const operationName = 'ListPreferredTimeRangesGivenEventId';
        const query = `
      query ListPreferredTimeRangesGivenEventId($eventId: String!) {
        PreferredTimeRange(where: {eventId: {_eq: $eventId}}) {
          createdDate
          dayOfWeek
          endTime
          eventId
          id
          startTime
          updatedAt
          userId
        }
      }
    `;
        const variables = {
            eventId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res inside  listPreferredTimeRangesForEvent');
        res?.data?.PreferredTimeRange?.map((pt) => console.log(pt, ' preferredTimeRange - res?.data?.PreferredTimeRange inside  listPreferredTimeRangesForEvent '));
        return res?.data?.PreferredTimeRange;
    }
    catch (e) {
        console.log(e, ' unable to list preferred time ranges for event');
    }
};
export const createRemindersFromMinutesAndEvent = (eventId, minutes, timezone, useDefault, userId) => {
    return {
        eventId,
        reminders: minutes.map((m) => ({
            id: uuid(),
            userId,
            eventId,
            timezone,
            minutes: m,
            useDefault,
            updatedAt: dayjs().format(),
            createdDate: dayjs().format(),
            deleted: true,
        })),
    };
};
export const createBufferTimeForNewMeetingEvent = (event, bufferTime) => {
    let valuesToReturn = {};
    valuesToReturn.newEvent = event;
    const eventId = uuid();
    const eventId1 = uuid();
    const preEventId = event?.preEventId || `${eventId}#${event?.calendarId}`;
    const postEventId = event?.postEventId || `${eventId1}#${event?.calendarId}`;
    if (bufferTime.beforeEvent > 0) {
        const beforeEventOrEmpty = {
            id: preEventId,
            isPreEvent: true,
            forEventId: event.id,
            notes: 'Buffer time',
            summary: 'Buffer time',
            startDate: dayjs(event.startDate.slice(0, 19))
                .tz(event.timezone, true)
                .subtract(bufferTime.beforeEvent, 'm')
                .format(),
            endDate: dayjs(event.startDate.slice(0, 19))
                .tz(event.timezone, true)
                .format(),
            method: 'create',
            userId: event.userId,
            createdDate: dayjs().format(),
            deleted: false,
            priority: 1,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            updatedAt: dayjs().toISOString(),
            calendarId: event?.calendarId,
            timezone: event?.timezone,
            isFollowUp: false,
            isPostEvent: false,
            eventId: preEventId.split('#')[0],
        };
        valuesToReturn.beforeEvent = beforeEventOrEmpty;
        valuesToReturn.newEvent = {
            ...valuesToReturn.newEvent,
            preEventId,
            timeBlocking: {
                ...valuesToReturn?.newEvent?.timeBlocking,
                beforeEvent: bufferTime.beforeEvent,
            },
        };
    }
    if (bufferTime.afterEvent > 0) {
        const afterEventOrEmpty = {
            id: postEventId,
            isPreEvent: false,
            forEventId: event.id,
            isPostEvent: true,
            notes: 'Buffer time',
            summary: 'Buffer time',
            startDate: dayjs(event.endDate.slice(0, 19))
                .tz(event.timezone, true)
                .format(),
            endDate: dayjs(event.endDate.slice(0, 19))
                .tz(event.timezone, true)
                .add(bufferTime.afterEvent, 'm')
                .format(),
            method: 'create',
            userId: event?.userId,
            createdDate: dayjs().toISOString(),
            deleted: false,
            priority: 1,
            isFollowUp: false,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            updatedAt: dayjs().toISOString(),
            calendarId: event?.calendarId,
            timezone: event?.timezone,
            eventId: postEventId.split('#')[0],
        };
        valuesToReturn.afterEvent = afterEventOrEmpty;
        valuesToReturn.newEvent = {
            ...valuesToReturn.newEvent,
            postEventId,
            timeBlocking: {
                ...valuesToReturn?.newEvent?.timeBlocking,
                afterEvent: bufferTime.afterEvent,
            },
        };
    }
    return valuesToReturn;
};
export const getUserPreferences = async (userId) => {
    try {
        if (!userId) {
            console.log('userId is null');
            return null;
        }
        const operationName = 'getUserPreferences';
        const query = `
    query getUserPreferences($userId: uuid!) {
      User_Preference(where: {userId: {_eq: $userId}}) {
        startTimes
        endTimes
        backToBackMeetings
        copyAvailability
        copyCategories
        copyIsBreak
        copyModifiable
        copyPriorityLevel
        copyReminders
        copyTimeBlocking
        copyTimePreference
        createdDate
        deleted
        followUp
        id
        isPublicCalendar
        maxNumberOfMeetings
        maxWorkLoadPercent
        publicCalendarCategories
        reminders
        updatedAt
        userId
        minNumberOfBreaks
        breakColor
        breakLength
        copyColor
        copyIsExternalMeeting
        copyIsMeeting
        onBoarded
      }
    }
  `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    userId,
                },
            },
        })
            .json();
        return res?.data?.User_Preference?.[0];
    }
    catch (e) {
        console.log(e, ' getUserPreferences');
    }
};
export const getGlobalCalendar = async (userId) => {
    try {
        const operationName = 'getGlobalCalendar';
        const query = `
        query getGlobalCalendar($userId: uuid!) {
          Calendar(where: {globalPrimary: {_eq: true}, userId: {_eq: $userId}}) {
            colorId
            backgroundColor
            accessLevel
            account
            createdDate
            defaultReminders
            foregroundColor
            globalPrimary
            id
            modifiable
            primary
            resource
            title
            updatedAt
            userId
          }
        }
    `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    userId,
                },
            },
        })
            .json();
        return res.data.Calendar?.[0];
    }
    catch (e) {
        console.log(e, ' unable to get global calendar');
    }
};
export const adjustStartDatesForBreakEventsForDay = (allEvents, breakEvents, userPreference, timezone) => {
    if (!allEvents?.[0]?.id) {
        console.log('no allEvents inside adjustStartDatesForBreakEvents');
        return;
    }
    const startTimes = userPreference.startTimes;
    const endTimes = userPreference.endTimes;
    const dayOfWeekInt = getISODay(dayjs(allEvents?.[0]?.startDate.slice(0, 19)).tz(timezone, true).toDate());
    const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
    const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
    const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const newBreakEvents = [];
    const startOfWorkingDay = dayjs(allEvents[0]?.startDate.slice(0, 19))
        .tz(timezone, true)
        .hour(startHour)
        .minute(startMinute);
    const endOfWorkingDay = dayjs(allEvents[0]?.endDate.slice(0, 19))
        .tz(timezone, true)
        .hour(endHour)
        .minute(endMinute);
    const filteredEvents = allEvents.filter((e) => !e.isBreak);
    if (breakEvents?.length > 0) {
        for (const breakEvent of breakEvents) {
            let foundSpace = false;
            let index = 0;
            while (!foundSpace && index < filteredEvents.length) {
                const possibleEndDate = dayjs(filteredEvents[index].startDate.slice(0, 19)).tz(timezone, true);
                const possibleStartDate = dayjs(possibleEndDate.format().slice(0, 19))
                    .tz(timezone, true)
                    .subtract(userPreference.breakLength, 'minute');
                let isBetweenStart = true;
                let isBetweenEnd = true;
                let betweenIndex = 0;
                let betweenWorkingDayStart = true;
                let betweenWorkingDayEnd = true;
                let isBetweenBreakStart = true;
                let isBetweenBreakEnd = true;
                while ((isBetweenStart ||
                    isBetweenEnd ||
                    !betweenWorkingDayStart ||
                    !betweenWorkingDayEnd ||
                    isBetweenBreakStart ||
                    isBetweenBreakEnd) &&
                    betweenIndex < filteredEvents.length) {
                    isBetweenStart = possibleStartDate.isBetween(dayjs(filteredEvents[betweenIndex].startDate.slice(0, 19)).tz(timezone, true), dayjs(filteredEvents[betweenIndex].endDate.slice(0, 19)).tz(timezone, true), 'minute', '[)');
                    isBetweenEnd = possibleEndDate.isBetween(dayjs(filteredEvents[betweenIndex].startDate.slice(0, 19)).tz(timezone, true), dayjs(filteredEvents[betweenIndex].endDate.slice(0, 19)).tz(timezone, true), 'minute', '(]');
                    betweenWorkingDayStart = possibleStartDate.isBetween(startOfWorkingDay, endOfWorkingDay, 'minute', '[)');
                    betweenWorkingDayEnd = possibleEndDate.isBetween(startOfWorkingDay, endOfWorkingDay, 'minute', '(]');
                    for (const breakEvent of breakEvents) {
                        isBetweenBreakStart = possibleStartDate.isBetween(dayjs(breakEvent.startDate.slice(0, 19)).tz(timezone, true), dayjs(breakEvent.endDate.slice(0, 19)).tz(timezone, true), 'minute', '[)');
                        isBetweenBreakEnd = possibleEndDate.isBetween(dayjs(breakEvent.startDate.slice(0, 19)).tz(timezone, true), dayjs(breakEvent.endDate.slice(0, 19)).tz(timezone, true), 'minute', '(]');
                    }
                    betweenIndex++;
                }
                foundSpace =
                    !isBetweenStart &&
                        !isBetweenEnd &&
                        betweenWorkingDayStart &&
                        betweenWorkingDayEnd &&
                        !isBetweenBreakStart &&
                        !isBetweenBreakEnd;
                if (foundSpace) {
                    const newBreakEvent = {
                        ...breakEvent,
                        startDate: possibleStartDate.toISOString(),
                        endDate: possibleEndDate.toISOString(),
                    };
                    newBreakEvents.push(newBreakEvent);
                }
                index++;
            }
        }
    }
    return newBreakEvents;
};
export const convertToTotalWorkingHoursForInternalAttendee = (userPreference, hostStartDate, hostTimezone) => {
    const startTimes = userPreference.startTimes;
    const endTimes = userPreference.endTimes;
    const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
    const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
    const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
    const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const startDuration = dayjs.duration({
        hours: startHour,
        minutes: startMinute,
    });
    const endDuration = dayjs.duration({ hours: endHour, minutes: endMinute });
    const totalDuration = endDuration.subtract(startDuration);
    return totalDuration.asHours();
};
export const convertToTotalWorkingHoursForExternalAttendee = (attendeeEvents, hostStartDate, hostTimezone, userTimezone) => {
    const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
    const sameDayEvents = attendeeEvents.filter((e) => getISODay(dayjs(e.startDate.slice(0, 19))
        .tz(e.timezone || userTimezone, true)
        .tz(hostTimezone)
        .toDate()) === dayOfWeekIntByHost);
    const minStartDate = _.minBy(sameDayEvents, (e) => dayjs(e.startDate.slice(0, 19))
        .tz(e.timezone || userTimezone, true)
        .tz(hostTimezone)
        .unix());
    const maxEndDate = _.maxBy(sameDayEvents, (e) => dayjs(e.endDate.slice(0, 19))
        .tz(e.timezone || userTimezone, true)
        .tz(hostTimezone)
        .unix());
    let workEndHourByHost = dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .hour();
    const workEndMinuteByHost = dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(0), dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(15), 'minute', '[)')
        ? 15
        : dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), 'minute', '[)')
            ? 30
            : dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(45), 'minute', '[)')
                ? 45
                : 0;
    if (workEndMinuteByHost === 0) {
        if (workEndHourByHost < 23) {
            workEndHourByHost += 1;
        }
    }
    const workStartHourByHost = dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .hour();
    const workStartMinuteByHost = dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(0), dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(15), 'minute', '[)')
        ? 0
        : dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), 'minute', '[)')
            ? 15
            : dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(45), 'minute', '[)')
                ? 30
                : 45;
    console.log(workStartHourByHost, workStartMinuteByHost, workEndHourByHost, ' workStartHourByHost, workStartMinuteByHost, workEndHourByHost for total working hours');
    const startDuration = dayjs.duration({
        hours: workStartHourByHost,
        minutes: workStartMinuteByHost,
    });
    const endDuration = dayjs.duration({
        hours: workEndHourByHost,
        minutes: workEndMinuteByHost,
    });
    const totalDuration = endDuration.subtract(startDuration);
    return totalDuration.asHours();
};
export const generateBreaks = (userPreferences, numberOfBreaksToGenerate, eventMirror, globalCalendarId) => {
    const breaks = [];
    if (!userPreferences?.breakLength) {
        console.log('no user preferences breakLength provided inside generateBreaks');
        return breaks;
    }
    if (!numberOfBreaksToGenerate) {
        console.log('no number of breaks to generate provided inside generateBreaks');
        return breaks;
    }
    if (!eventMirror) {
        console.log('no event mirror provided inside generateBreaks');
        return breaks;
    }
    console.log(numberOfBreaksToGenerate, ' numberOfBreaksToGenerate inside generateBreaks');
    const breakLength = userPreferences.breakLength <= 15 ? 15 : userPreferences.breakLength;
    for (let i = 0; i < numberOfBreaksToGenerate; i++) {
        const eventId = uuid();
        const breakEvent = {
            id: `${eventId}#${globalCalendarId || eventMirror.calendarId}`,
            userId: userPreferences.userId,
            title: 'Break',
            startDate: dayjs(eventMirror.startDate.slice(0, 19))
                .tz(eventMirror.timezone, true)
                .format(),
            endDate: dayjs(eventMirror.startDate.slice(0, 19))
                .tz(eventMirror.timezone, true)
                .add(breakLength, 'minute')
                .format(),
            allDay: false,
            notes: 'Break',
            timezone: eventMirror.timezone,
            createdDate: dayjs().toISOString(),
            updatedAt: dayjs().toISOString(),
            deleted: false,
            priority: 1,
            isFollowUp: false,
            isPreEvent: false,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            calendarId: globalCalendarId || eventMirror.calendarId,
            backgroundColor: userPreferences.breakColor || '#F7EBF7',
            isBreak: true,
            duration: breakLength,
            userModifiedDuration: true,
            userModifiedColor: true,
            isPostEvent: false,
            method: 'create',
            eventId,
        };
        breaks.push(breakEvent);
    }
    return breaks;
};
export const shouldGenerateBreakEventsForDay = (workingHours, userPreferences, allEvents) => {
    if (!userPreferences?.breakLength) {
        console.log('no user preferences breakLength provided inside shouldGenerateBreakEvents');
        return false;
    }
    if (!(allEvents?.length > 0)) {
        console.log('no allEvents present inside shouldGenerateBreakEventsForDay');
        return false;
    }
    const breakEvents = allEvents.filter((event) => event.isBreak);
    const numberOfBreaksPerDay = userPreferences.minNumberOfBreaks;
    const breakLength = userPreferences.breakLength <= 15 ? 15 : userPreferences.breakLength;
    const breakHoursAvailable = (breakLength / 60) * numberOfBreaksPerDay;
    let breakHoursUsed = 0;
    for (const breakEvent of breakEvents) {
        const duration = dayjs
            .duration(dayjs(dayjs(breakEvent.endDate.slice(0, 19)).format('YYYY-MM-DDTHH:mm:ss')).diff(dayjs(breakEvent.startDate.slice(0, 19)).format('YYYY-MM-DDTHH:mm:ss')))
            .asHours();
        breakHoursUsed += duration;
    }
    if (breakHoursUsed >= breakHoursAvailable) {
        console.log('breakHoursUsed >= breakHoursAvailable');
        return false;
    }
    if (!(allEvents?.length > 0)) {
        console.log('there are no events for this date inside shouldGenerateBreakEvents');
        return false;
    }
    let hoursUsed = 0;
    for (const event of allEvents) {
        const duration = dayjs
            .duration(dayjs(dayjs(event.endDate.slice(0, 19)).format('YYYY-MM-DDTHH:mm:ss')).diff(dayjs(event.startDate.slice(0, 19)).format('YYYY-MM-DDTHH:mm:ss')))
            .asHours();
        hoursUsed += duration;
    }
    if (hoursUsed >= workingHours) {
        console.log('hoursUsed >= workingHours');
        return false;
    }
    return true;
};
export const generateBreakEventsForDay = async (userPreferences, userId, hostStartDate, hostTimezone, globalCalendarId, isFirstDay) => {
    try {
        if (!userPreferences?.breakLength) {
            console.log('no user preferences breakLength provided inside shouldGenerateBreakEvents');
            return null;
        }
        if (!userId) {
            console.log('no userId provided inside shouldGenerateBreakEvents');
            return null;
        }
        if (!hostStartDate) {
            console.log('no startDate provided inside shouldGenerateBreakEvents');
            return null;
        }
        if (!hostTimezone) {
            console.log('no timezone provided inside shouldGenerateBreakEvents');
            return null;
        }
        if (isFirstDay) {
            const endTimes = userPreferences.endTimes;
            const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
            let startHourByHost = dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour();
            let startMinuteByHost = dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute();
            const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
            const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
            const startTimes = userPreferences.startTimes;
            const workStartHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
            const workStartMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
            if (dayjs(hostStartDate.slice(0, 19)).isAfter(dayjs(hostStartDate.slice(0, 19)).hour(endHour).minute(endMinute))) {
                return null;
            }
            if (dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isBefore(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(workStartHour)
                .minute(workStartMinute))) {
                startHourByHost = workStartHour;
                startMinuteByHost = workStartMinute;
            }
            const workingHours = convertToTotalWorkingHoursForInternalAttendee(userPreferences, hostStartDate, hostTimezone);
            const allEvents = await listEventsForDate(userId, dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(startHourByHost)
                .minute(startMinuteByHost)
                .format(), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(endHour)
                .minute(endMinute)
                .format(), hostTimezone);
            if (!(allEvents?.length > 0)) {
                console.log('no allEvents present inside shouldGenerateBreakEventsForDay');
                return null;
            }
            const shouldGenerateBreaks = shouldGenerateBreakEventsForDay(workingHours, userPreferences, allEvents);
            if (!shouldGenerateBreaks) {
                console.log('should not generate breaks');
                return null;
            }
            let hoursUsed = 0;
            if (allEvents?.length > 0) {
                for (const allEvent of allEvents) {
                    const duration = dayjs
                        .duration(dayjs(allEvent.endDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .diff(dayjs(allEvent.startDate.slice(0, 19)).tz(hostTimezone, true)))
                        .asHours();
                    hoursUsed += duration;
                }
            }
            let hoursAvailable = workingHours - hoursUsed;
            hoursAvailable -= workingHours * userPreferences.maxWorkLoadPercent;
            if (hoursAvailable <= 0) {
                console.log(hoursAvailable, ' no hours available');
                return null;
            }
            const oldBreakEvents = allEvents
                .filter((event) => event.isBreak)
                .filter((e) => dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isSame(dayjs(e.startDate.slice(0, 19)).tz(hostTimezone, true), 'day'));
            const breakEvents = oldBreakEvents;
            const numberOfBreaksPerDay = userPreferences.minNumberOfBreaks;
            console.log(numberOfBreaksPerDay, ' numberOfBreaksPerDay');
            const breakHoursToGenerate = (userPreferences.breakLength / 60) * numberOfBreaksPerDay;
            let breakHoursUsed = 0;
            if (breakEvents?.length > 0) {
                for (const breakEvent of breakEvents) {
                    const duration = dayjs
                        .duration(dayjs(breakEvent.endDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .diff(dayjs(breakEvent.startDate.slice(0, 19)).tz(hostTimezone, true)))
                        .asHours();
                    breakHoursUsed += duration;
                }
            }
            const actualBreakHoursToGenerate = breakHoursToGenerate - breakHoursUsed;
            if (actualBreakHoursToGenerate > hoursAvailable) {
                console.log(' no hours available to generate break');
                return null;
            }
            console.log(breakHoursUsed, ' breakHoursUsed');
            console.log(breakHoursToGenerate, ' breakHoursAvailable');
            const breakLengthAsHours = userPreferences.breakLength / 60;
            console.log(breakLengthAsHours, ' breakLengthAsHours');
            const numberOfBreaksToGenerate = Math.floor(actualBreakHoursToGenerate / breakLengthAsHours);
            console.log(numberOfBreaksToGenerate, ' numberOfBreaksToGenerate');
            if (numberOfBreaksToGenerate < 1) {
                console.log('should not generate breaks');
                return null;
            }
            const eventMirror = allEvents.find((event) => !event.isBreak);
            const newEvents = generateBreaks(userPreferences, numberOfBreaksToGenerate, eventMirror, globalCalendarId);
            return newEvents;
        }
        const endTimes = userPreferences.endTimes;
        const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
        const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
        const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const startTimes = userPreferences.startTimes;
        const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
        const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const workingHours = convertToTotalWorkingHoursForInternalAttendee(userPreferences, hostStartDate, hostTimezone);
        const allEvents = await listEventsForDate(userId, dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(startHour)
            .minute(startMinute)
            .format(), dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(endHour)
            .minute(endMinute)
            .format(), hostTimezone);
        if (!(allEvents?.length > 0)) {
            console.log('no allEvents present inside shouldGenerateBreakEventsForDay');
            return null;
        }
        const shouldGenerateBreaks = shouldGenerateBreakEventsForDay(workingHours, userPreferences, allEvents);
        if (!shouldGenerateBreaks) {
            console.log('should not generate breaks');
            return null;
        }
        let hoursUsed = 0;
        if (allEvents?.length > 0) {
            for (const allEvent of allEvents) {
                const duration = dayjs
                    .duration(dayjs(allEvent.endDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .diff(dayjs(allEvent.startDate.slice(0, 19)).tz(hostTimezone, true)))
                    .asHours();
                hoursUsed += duration;
            }
        }
        let hoursAvailable = workingHours - hoursUsed;
        hoursAvailable -= workingHours * userPreferences.maxWorkLoadPercent;
        if (hoursAvailable <= 0) {
            console.log(hoursAvailable, ' no hours available');
            return null;
        }
        const oldBreakEvents = allEvents
            .filter((event) => event.isBreak)
            .filter((e) => dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isSame(dayjs(e.startDate.slice(0, 19)).tz(hostTimezone, true), 'day'));
        const breakEvents = oldBreakEvents;
        const numberOfBreaksPerDay = userPreferences.minNumberOfBreaks;
        console.log(numberOfBreaksPerDay, ' numberOfBreaksPerDay');
        const breakHoursToGenerate = (userPreferences.breakLength / 60) * numberOfBreaksPerDay;
        let breakHoursUsed = 0;
        if (breakEvents?.length > 0) {
            for (const breakEvent of breakEvents) {
                const duration = dayjs
                    .duration(dayjs(breakEvent.endDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .diff(dayjs(breakEvent.startDate.slice(0, 19)).tz(hostTimezone, true)))
                    .asHours();
                breakHoursUsed += duration;
            }
        }
        const actualBreakHoursToGenerate = breakHoursToGenerate - breakHoursUsed;
        if (actualBreakHoursToGenerate > hoursAvailable) {
            console.log(' no hours available to generate break');
            return null;
        }
        console.log(breakHoursUsed, ' breakHoursUsed');
        console.log(breakHoursToGenerate, ' breakHoursAvailable');
        const breakLengthAsHours = userPreferences.breakLength / 60;
        console.log(breakLengthAsHours, ' breakLengthAsHours');
        const numberOfBreaksToGenerate = Math.floor(actualBreakHoursToGenerate / breakLengthAsHours);
        console.log(numberOfBreaksToGenerate, ' numberOfBreaksToGenerate');
        if (numberOfBreaksToGenerate < 1) {
            console.log('should not generate breaks');
            return null;
        }
        const eventMirror = allEvents.find((event) => !event.isBreak);
        const newEvents = generateBreaks(userPreferences, numberOfBreaksToGenerate, eventMirror, globalCalendarId);
        return newEvents;
    }
    catch (e) {
        console.log(e, ' unable to generate breaks for day');
    }
};
export const generateBreakEventsForDate = async (userPreferences, userId, hostStartDate, hostEndDate, hostTimezone, globalCalendarId) => {
    try {
        const totalBreakEvents = [];
        const totalDays = dayjs(hostEndDate.slice(0, 19))
            .tz(hostTimezone, true)
            .diff(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true), 'day');
        console.log(totalDays, ' totalDays inside generateBreakEventsForDate');
        for (let i = 0; i < totalDays; i++) {
            const dayDate = dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .add(i, 'day')
                .format();
            const newBreakEvents = await generateBreakEventsForDay(userPreferences, userId, dayDate, hostTimezone, globalCalendarId, i === 0);
            if (i === 0) {
                const endTimes = userPreferences.endTimes;
                const dayOfWeekInt = getISODay(dayjs(dayDate.slice(0, 19)).tz(hostTimezone, true).toDate());
                let startHour = dayjs(dayDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour();
                let startMinute = dayjs(dayDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .minute();
                const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
                const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
                const startTimes = userPreferences.startTimes;
                const workStartHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
                const workStartMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
                if (dayjs(dayDate.slice(0, 19)).isAfter(dayjs(dayDate.slice(0, 19)).hour(endHour).minute(endMinute))) {
                    continue;
                }
                if (dayjs(dayDate.slice(0, 19)).isBefore(dayjs(dayDate.slice(0, 19))
                    .hour(workStartHour)
                    .minute(workStartMinute))) {
                    startHour = workStartHour;
                    startMinute = workStartMinute;
                }
                const allEvents = await listEventsForDate(userId, dayjs(dayDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHour)
                    .minute(startMinute)
                    .format(), dayjs(dayDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(endHour)
                    .minute(endMinute)
                    .format(), hostTimezone);
                const newBreakEventsAdjusted = await adjustStartDatesForBreakEventsForDay(allEvents, newBreakEvents, userPreferences, hostTimezone);
                if (newBreakEventsAdjusted?.length > 0) {
                    newBreakEventsAdjusted.forEach((b) => console.log(b, ' newBreakEventsAdjusted'));
                    totalBreakEvents.push(...newBreakEventsAdjusted);
                }
                continue;
            }
            const endTimes = userPreferences.endTimes;
            const dayOfWeekInt = getISODay(dayjs(dayDate.slice(0, 19)).tz(hostTimezone, true).toDate());
            const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
            const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
            const startTimes = userPreferences.startTimes;
            const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
            const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
            const allEvents = await listEventsForDate(userId, dayjs(dayDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(startHour)
                .minute(startMinute)
                .format(), dayjs(dayDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(endHour)
                .minute(endMinute)
                .format(), hostTimezone);
            const newBreakEventsAdjusted = await adjustStartDatesForBreakEventsForDay(allEvents, newBreakEvents, userPreferences, hostTimezone);
            if (newBreakEventsAdjusted?.length > 0) {
                newBreakEventsAdjusted.forEach((b) => console.log(b, ' newBreakEventsAdjusted'));
                totalBreakEvents.push(...newBreakEventsAdjusted);
            }
        }
        return totalBreakEvents;
    }
    catch (e) {
        console.log(e, ' unable to generateBreakEventsForDate');
    }
};
export const generateWorkTimesForInternalAttendee = (hostId, userId, userPreference, hostTimezone, userTimezone) => {
    const daysInWeek = 7;
    const startTimes = userPreference.startTimes;
    const endTimes = userPreference.endTimes;
    const workTimes = [];
    for (let i = 0; i < daysInWeek; i++) {
        const dayOfWeekInt = i + 1;
        const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
        const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
        const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
        workTimes.push({
            dayOfWeek: dayOfWeekIntToString[dayOfWeekInt],
            startTime: dayjs(setISODay(dayjs()
                .hour(startHour)
                .minute(startMinute)
                .tz(userTimezone, true)
                .toDate(), i + 1))
                .tz(hostTimezone)
                .format('HH:mm'),
            endTime: dayjs(setISODay(dayjs()
                .hour(endHour)
                .minute(endMinute)
                .tz(userTimezone, true)
                .toDate(), i + 1))
                .tz(hostTimezone)
                .format('HH:mm'),
            hostId,
            userId,
        });
    }
    return workTimes;
};
const formatToMonthDay = (month, day) => {
    const monthFormat = (month < 9 ? `0${month + 1}` : `${month + 1}`);
    const dayFormat = (day < 10 ? `0${day}` : `${day}`);
    return `--${monthFormat}-${dayFormat}`;
};
export const generateTimeSlotsForInternalAttendee = (hostStartDate, hostId, userPreference, hostTimezone, userTimezone, isFirstDay) => {
    if (isFirstDay) {
        const endTimes = userPreference.endTimes;
        const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .toDate());
        const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
        const dayOfMonth = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .date();
        const startHour = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .hour();
        const startMinute = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .isBetween(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .minute(0), dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .minute(15), 'minute', '[)')
            ? 0
            : dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .tz(userTimezone)
                .isBetween(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .tz(userTimezone)
                .minute(15), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .tz(userTimezone)
                .minute(30), 'minute', '[)')
                ? 15
                : dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .tz(userTimezone)
                    .isBetween(dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .tz(userTimezone)
                    .minute(30), dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .tz(userTimezone)
                    .minute(45), 'minute', '[)')
                    ? 30
                    : 45;
        const monthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .month();
        const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .date();
        const startHourByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour();
        const startMinuteByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBetween(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(0), dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(15), 'minute', '[)')
            ? 0
            : dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isBetween(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(15), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(30), 'minute', '[)')
                ? 15
                : dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .isBetween(dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .minute(30), dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .minute(45), 'minute', '[)')
                    ? 30
                    : 45;
        const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
        const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const endHourByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .hour(endHour)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .hour();
        const endMinuteByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .minute(endMinute)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .minute();
        const startTimes = userPreference.startTimes;
        const workStartHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
        const workStartMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const workStartHourByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .hour(workStartHour)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .hour();
        const workStartMinuteByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .minute(endMinute)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .minute();
        if (dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isAfter(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(endHourByHost)
            .minute(endMinuteByHost))) {
            return [];
        }
        if (dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBefore(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(workStartHourByHost)
            .minute(workStartMinuteByHost))) {
            const startDuration = dayjs.duration({
                hours: workStartHour,
                minutes: workStartMinute,
            });
            const endDuration = dayjs.duration({
                hours: endHour,
                minutes: endMinute,
            });
            const totalDuration = endDuration.subtract(startDuration);
            const totalMinutes = totalDuration.asMinutes();
            const timeSlots = [];
            console.log(hostStartDate, endTimes, dayOfWeekIntByHost, dayOfMonth, startHour, startMinute, endHour, endMinute, timezone, `startDate, endTimes, dayOfWeekIntByHost, dayOfMonth, startHour, startMinute, endHour, endMinute totalMinutes, timezone, inside firstDay inside generateTimeslots`);
            for (let i = 0; i < totalMinutes; i += 15) {
                timeSlots.push({
                    dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
                    startTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourByHost)
                        .minute(startMinuteByHost)
                        .add(i, 'minute')
                        .format('HH:mm'),
                    endTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourByHost)
                        .minute(startMinuteByHost)
                        .add(i + 15, 'minute')
                        .format('HH:mm'),
                    hostId,
                    monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
                });
            }
            console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day where startDate is before work start time');
            return timeSlots;
        }
        const startDuration = dayjs.duration({
            hours: startHour,
            minutes: startMinute,
        });
        const endDuration = dayjs.duration({ hours: endHour, minutes: endMinute });
        const totalDuration = endDuration.subtract(startDuration);
        const totalMinutes = totalDuration.asMinutes();
        const timeSlots = [];
        console.log(hostStartDate, endTimes, dayOfWeekInt, dayOfMonthByHost, startHourByHost, startMinuteByHost, endHourByHost, endMinuteByHost, hostTimezone, `startDate, endTimes, dayOfWeekInt, dayOfMonth, startHour, startMinute, endHour, endMinute totalMinutes, timezone, inside firstDay inside generateTimeslots`);
        for (let i = 0; i < totalMinutes; i += 15) {
            timeSlots.push({
                dayOfWeek: dayOfWeekIntToString[dayOfWeekInt],
                startTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourByHost)
                    .minute(startMinuteByHost)
                    .add(i, 'minute')
                    .format('HH:mm'),
                endTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourByHost)
                    .minute(startMinuteByHost)
                    .add(i + 15, 'minute')
                    .format('HH:mm'),
                hostId,
                monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
            });
        }
        console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day');
        return timeSlots;
    }
    const startTimes = userPreference.startTimes;
    const endTimes = userPreference.endTimes;
    const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .toDate());
    const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
    const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
    const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const monthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .month();
    const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .date();
    const startHourByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .hour(startHour)
        .tz(hostTimezone)
        .hour();
    const startMinuteByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .minute(startMinute)
        .tz(hostTimezone)
        .minute();
    const endHourByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .hour(endHour)
        .tz(hostTimezone)
        .hour();
    console.log(monthByHost, dayOfMonthByHost, startHourByHost, startMinuteByHost, endHourByHost, ' monthByHost, dayOfMonthByHost, startHourByHost, startMinuteByHost, endHourByHost');
    const startDuration = dayjs.duration({
        hours: startHour,
        minutes: startMinute,
    });
    const endDuration = dayjs.duration({ hours: endHour, minutes: endMinute });
    const totalDuration = endDuration.subtract(startDuration);
    const totalMinutes = totalDuration.asMinutes();
    const timeSlots = [];
    for (let i = 0; i < totalMinutes; i += 15) {
        timeSlots.push({
            dayOfWeek: dayOfWeekIntToString[dayOfWeekInt],
            startTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(startHourByHost)
                .minute(startMinuteByHost)
                .add(i, 'minute')
                .format('HH:mm'),
            endTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(startHourByHost)
                .minute(startMinuteByHost)
                .add(i + 15, 'minute')
                .format('HH:mm'),
            hostId,
            monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
        });
    }
    console.log(timeSlots, ' timeSlots inside generateTimeSlots');
    return timeSlots;
};
export const generateTimeSlotsLiteForInternalAttendee = (hostStartDate, hostId, userPreference, hostTimezone, userTimezone, isFirstDay) => {
    if (isFirstDay) {
        const endTimes = userPreference.endTimes;
        const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
        const startHourOfHostDateByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour();
        const startMinuteOfHostDateByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBetween(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(0), dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(30), 'minute', '[)')
            ? 0
            : dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isBetween(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(30), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(59), 'minute', '[)')
                ? 30
                : 0;
        const monthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .month();
        const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .date();
        const startHourByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour();
        const startMinuteByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBetween(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(0), dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(30), 'minute', '[)')
            ? 0
            : dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isBetween(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(30), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(59), 'minute', '[)')
                ? 30
                : 0;
        const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
        const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const endHourByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .hour(endHour)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .hour();
        const endMinuteByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .minute(endMinute)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .minute();
        const startTimes = userPreference.startTimes;
        const workStartHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
        const workStartMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
        const workStartHourByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .hour(workStartHour)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .hour();
        const workStartMinuteByHost = dayjs(setISODay(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .tz(userTimezone)
            .minute(endMinute)
            .toDate(), dayOfWeekInt))
            .tz(hostTimezone)
            .minute();
        if (dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isAfter(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(endHourByHost)
            .minute(endMinuteByHost))) {
            return [];
        }
        if (dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBefore(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(workStartHourByHost)
            .minute(workStartMinuteByHost))) {
            const startDuration = dayjs.duration({
                hours: workStartHour,
                minutes: workStartMinute,
            });
            const endDuration = dayjs.duration({
                hours: endHour,
                minutes: endMinute,
            });
            const totalDuration = endDuration.subtract(startDuration);
            const totalMinutes = totalDuration.asMinutes();
            const timeSlots = [];
            for (let i = 0; i < totalMinutes; i += 30) {
                timeSlots.push({
                    dayOfWeek: dayOfWeekIntToString[dayOfWeekInt],
                    startTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourByHost)
                        .minute(startMinuteByHost)
                        .add(i, 'minute')
                        .format('HH:mm'),
                    endTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourByHost)
                        .minute(startMinuteByHost)
                        .add(i + 30, 'minute')
                        .format('HH:mm'),
                    hostId,
                    monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
                });
            }
            console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day before start time');
            return timeSlots;
        }
        const startDuration = dayjs.duration({
            hours: startHourOfHostDateByHost,
            minutes: startMinuteOfHostDateByHost,
        });
        const endDuration = dayjs.duration({ hours: endHour, minutes: endMinute });
        const totalDuration = endDuration.subtract(startDuration);
        const totalMinutes = totalDuration.asMinutes();
        const timeSlots = [];
        for (let i = 0; i < totalMinutes; i += 30) {
            timeSlots.push({
                dayOfWeek: dayOfWeekIntToString[dayOfWeekInt],
                startTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourByHost)
                    .minute(startMinuteByHost)
                    .add(i, 'minute')
                    .format('HH:mm'),
                endTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourByHost)
                    .minute(startMinuteByHost)
                    .add(i + 30, 'minute')
                    .format('HH:mm'),
                hostId,
                monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
            });
        }
        console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day');
        return timeSlots;
    }
    const startTimes = userPreference.startTimes;
    const endTimes = userPreference.endTimes;
    const dayOfWeekInt = getISODay(dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .toDate());
    const startHour = startTimes.find((i) => i.day === dayOfWeekInt).hour;
    const startMinute = startTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const endHour = endTimes.find((i) => i.day === dayOfWeekInt).hour;
    const endMinute = endTimes.find((i) => i.day === dayOfWeekInt).minutes;
    const monthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .month();
    const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .date();
    const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
    const startHourByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .hour(startHour)
        .tz(hostTimezone)
        .hour();
    const startMinuteByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .tz(userTimezone)
        .minute(startMinute)
        .tz(hostTimezone)
        .minute();
    const startDuration = dayjs.duration({
        hours: startHour,
        minutes: startMinute,
    });
    const endDuration = dayjs.duration({ hours: endHour, minutes: endMinute });
    const totalDuration = endDuration.subtract(startDuration);
    const totalMinutes = totalDuration.asMinutes();
    const timeSlots = [];
    for (let i = 0; i < totalMinutes; i += 30) {
        timeSlots.push({
            dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
            startTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(startHourByHost)
                .minute(startMinuteByHost)
                .add(i, 'minute')
                .format('HH:mm'),
            endTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(startHourByHost)
                .minute(startMinuteByHost)
                .add(i + 30, 'minute')
                .format('HH:mm'),
            hostId,
            monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
        });
    }
    console.log(timeSlots, ' timeSlots inside generateTimeSlots');
    return timeSlots;
};
export const validateEventDates = (event, userPreferences) => {
    if (!event?.timezone) {
        return false;
    }
    const diff = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'm');
    const diffDay = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'd');
    const diffHours = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'h');
    const isoWeekDay = getISODay(dayjs(event?.startDate.slice(0, 19)).tz(event?.timezone, true).toDate());
    const endHour = userPreferences.endTimes.find((e) => e?.day === isoWeekDay)?.hour;
    const endMinutes = userPreferences.endTimes.find((e) => e?.day === isoWeekDay)?.minutes;
    const startHour = userPreferences.startTimes.find((e) => e?.day === isoWeekDay)?.hour;
    const startMinutes = userPreferences.startTimes.find((e) => e?.day === isoWeekDay)?.minutes;
    if (dayjs(event.startDate.slice(0, 19))
        .tz(event.timezone, true)
        .isAfter(dayjs(event?.startDate.slice(0, 19))
        .tz(event.timezone, true)
        .hour(endHour)
        .minute(endMinutes))) {
        return false;
    }
    if (dayjs(event.startDate.slice(0, 19))
        .tz(event.timezone, true)
        .isBefore(dayjs(event?.startDate.slice(0, 19))
        .tz(event.timezone, true)
        .hour(startHour)
        .minute(startMinutes))) {
        return false;
    }
    if (diff === 0) {
        console.log(event.id, event.startDate, event.endDate, ' the start date and end date are the same');
        return false;
    }
    if (diff < 0) {
        console.log(event.id, event.startDate, event.endDate, ' the start date is after end date');
        return false;
    }
    if (diffDay >= 1) {
        console.log(event.id, event.startDate, event.endDate, ' the start date and end date are more than 1 day apart');
        return false;
    }
    if (diffHours > 23) {
        console.log(event.id, event.startDate, event.endDate, ' the start date and end date are more than 23 hours apart');
        return false;
    }
    return true;
};
export const validateEventDatesForExternalAttendee = (event) => {
    if (!event?.timezone) {
        return false;
    }
    const diff = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'm');
    const diffDay = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'd');
    const diffHours = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'h');
    if (diff === 0) {
        console.log(event.id, event.startDate, event.endDate, ' the start date and end date are the same');
        return false;
    }
    if (diff < 0) {
        console.log(event.id, event.startDate, event.endDate, ' the start date is after end date');
        return false;
    }
    if (diffDay >= 1) {
        console.log(event.id, event.startDate, event.endDate, ' the start date and end date are more than 1 day apart');
        return false;
    }
    if (diffHours > 23) {
        console.log(event.id, event.startDate, event.endDate, ' the start date and end date are more than 23 hours apart');
        return false;
    }
    return true;
};
export const generateEventParts = (event, hostId) => {
    console.log(event.id, event.startDate.slice(0, 19), event.endDate.slice(0, 19), ' event.id, event.startDate.slice(0, 19), event.endDate.slice(0, 19) inside generateEventParts');
    const minutes = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'm');
    console.log(event.id, minutes, 'event.id,  minutes inside generateEventParts');
    const parts = Math.floor(minutes / 15);
    const remainder = minutes % 15;
    const eventParts = [];
    for (let i = 0; i < parts; i++) {
        eventParts.push({
            ...event,
            groupId: event.id,
            eventId: event.id,
            startDate: event.startDate.slice(0, 19),
            endDate: event.endDate.slice(0, 19),
            part: i + 1,
            lastPart: remainder > 0 ? parts + 1 : parts,
            hostId,
        });
    }
    if (remainder > 0) {
        eventParts.push({
            ...event,
            groupId: event.id,
            eventId: event.id,
            startDate: event.startDate.slice(0, 19),
            endDate: event.endDate.slice(0, 19),
            part: parts + 1,
            lastPart: parts + 1,
            hostId,
        });
    }
    console.log(event.id, eventParts?.[0]?.startDate, eventParts?.[0]?.endDate, eventParts?.[0]?.part, eventParts?.[0]?.lastPart, 'event.id,  eventParts?.[0]?.startDate, eventParts?.[0]?.endDate, eventParts?.[0]?.part, eventParts?.[0]?.lastPart,');
    return eventParts;
};
export const generateEventPartsLite = (event, hostId) => {
    const minutes = dayjs(event.endDate.slice(0, 19))
        .tz(event.timezone, true)
        .diff(dayjs(event.startDate.slice(0, 19)).tz(event.timezone, true), 'm');
    const parts = Math.floor(minutes / 30);
    const remainder = minutes % 30;
    const eventParts = [];
    for (let i = 0; i < parts; i++) {
        eventParts.push({
            ...event,
            groupId: event.id,
            eventId: event.id,
            startDate: event.startDate.slice(0, 19),
            endDate: event.endDate.slice(0, 19),
            part: i + 1,
            lastPart: remainder > 0 ? parts + 1 : parts,
            hostId,
        });
    }
    if (remainder > 0) {
        eventParts.push({
            ...event,
            groupId: event.id,
            eventId: event.id,
            startDate: event.startDate.slice(0, 19),
            endDate: event.endDate.slice(0, 19),
            part: parts + 1,
            lastPart: parts + 1,
            hostId,
        });
    }
    return eventParts;
};
export const modifyEventPartsForSingularPreBufferTime = (eventParts, forEventId) => {
    const preBufferBeforeEventParts = [];
    const preBufferActualEventParts = [];
    const preBufferGroupId = uuid();
    for (let i = 0; i < eventParts.length; i++) {
        if (eventParts[i].forEventId === forEventId && eventParts[i].isPreEvent) {
            console.log(eventParts[i].forEventId, forEventId, ' eventParts[i].forEventId === forEventId  inside modifyEventPartsForSingularPreBufferTime');
            preBufferBeforeEventParts.push({
                ...eventParts[i],
                groupId: preBufferGroupId,
            });
        }
    }
    for (let i = 0; i < eventParts.length; i++) {
        if (eventParts[i].id === forEventId) {
            console.log(eventParts[i].id, forEventId, 'eventParts[i].id === forEventId inside modifyEventPartsForSingularPreBufferTime');
            preBufferActualEventParts.push({
                ...eventParts[i],
                groupId: preBufferGroupId,
            });
        }
    }
    const preBufferBeforeEventPartsSorted = preBufferBeforeEventParts.sort((a, b) => a.part - b.part);
    const preBufferActualEventPartsSorted = preBufferActualEventParts.sort((a, b) => a.part - b.part);
    const preBufferEventPartsTotal = preBufferBeforeEventPartsSorted.concat(preBufferActualEventPartsSorted);
    for (let i = 0; i < preBufferEventPartsTotal.length; i++) {
        preBufferEventPartsTotal[i].part = i + 1;
        preBufferEventPartsTotal[i].lastPart = preBufferEventPartsTotal.length;
    }
    preBufferEventPartsTotal.forEach((e) => console.log(e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, `e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, inside modifyEventPartsForSingularPreBufferTime`));
    return preBufferEventPartsTotal;
};
export const modifyEventPartsForMultiplePreBufferTime = (eventParts) => {
    const uniquePreBufferPartForEventIds = [];
    const preBufferEventPartsTotal = [];
    for (let i = 0; i < eventParts.length; i++) {
        if (eventParts[i].forEventId && eventParts[i].isPreEvent) {
            const foundPart = uniquePreBufferPartForEventIds.find((e) => e === eventParts[i].forEventId);
            if (foundPart) {
                continue;
            }
            else {
                uniquePreBufferPartForEventIds.push(eventParts[i].forEventId);
            }
        }
    }
    for (let i = 0; i < uniquePreBufferPartForEventIds.length; i++) {
        const returnedEventPartTotal = modifyEventPartsForSingularPreBufferTime(eventParts, uniquePreBufferPartForEventIds[i]);
        preBufferEventPartsTotal.push(...returnedEventPartTotal);
    }
    const eventPartsFiltered = _.differenceBy(eventParts, preBufferEventPartsTotal, 'id');
    const concatenatedValues = eventPartsFiltered.concat(preBufferEventPartsTotal);
    concatenatedValues.forEach((e) => console.log(e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, e?.forEventId, `e.id, e.eventId, e.actualId, e.part, e.lastPart, e.startDate, e.endDate, e?.forEventId,  inside modifyEventPartsForMultiplePreBufferTime`));
    return concatenatedValues;
};
export const modifyEventPartsForMultiplePostBufferTime = (eventParts) => {
    const uniquePostBufferPartForEventIds = [];
    const postBufferEventPartsTotal = [];
    for (let i = 0; i < eventParts.length; i++) {
        if (eventParts[i].forEventId && eventParts[i].isPostEvent) {
            const foundPart = uniquePostBufferPartForEventIds.find((e) => e === eventParts[i].forEventId);
            if (foundPart) {
                continue;
            }
            else {
                uniquePostBufferPartForEventIds.push(eventParts[i].forEventId);
            }
        }
    }
    for (let i = 0; i < uniquePostBufferPartForEventIds.length; i++) {
        const returnedEventPartTotal = modifyEventPartsForSingularPostBufferTime(eventParts, uniquePostBufferPartForEventIds[i]);
        postBufferEventPartsTotal.push(...returnedEventPartTotal);
    }
    const eventPartsFiltered = _.differenceBy(eventParts, postBufferEventPartsTotal, 'id');
    const concatenatedValues = eventPartsFiltered.concat(postBufferEventPartsTotal);
    concatenatedValues.forEach((e) => console.log(e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, e?.forEventId, `e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, e?.forEventId,  inside modifyEventPartsForMultiplePostBufferTime`));
    return concatenatedValues;
};
export const modifyEventPartsForSingularPostBufferTime = (eventParts, forEventId) => {
    const postBufferAfterEventParts = [];
    const postBufferActualEventParts = [];
    const postBufferGroupId = uuid();
    for (let i = 0; i < eventParts.length; i++) {
        if (eventParts[i].id == forEventId) {
            postBufferActualEventParts.push({
                ...eventParts[i],
                groupId: postBufferGroupId,
            });
        }
    }
    for (let i = 0; i < eventParts.length; i++) {
        if (eventParts[i].forEventId === forEventId && eventParts[i].isPostEvent) {
            postBufferAfterEventParts.push({
                ...eventParts[i],
                groupId: postBufferGroupId,
            });
        }
    }
    const postBufferActualEventPartsSorted = postBufferActualEventParts.sort((a, b) => a.part - b.part);
    const postBufferAfterEventPartsSorted = postBufferAfterEventParts.sort((a, b) => a.part - b.part);
    const postBufferEventPartsTotal = postBufferActualEventPartsSorted.concat(postBufferAfterEventPartsSorted);
    const preEventId = postBufferEventPartsTotal?.[0]?.preEventId;
    const actualEventPreviousLastPart = postBufferEventPartsTotal?.[0]?.lastPart;
    for (let i = 0; i < postBufferEventPartsTotal.length; i++) {
        if (preEventId) {
            postBufferEventPartsTotal[i].lastPart =
                actualEventPreviousLastPart + postBufferAfterEventPartsSorted.length;
        }
        else {
            postBufferEventPartsTotal[i].part = i + 1;
            postBufferEventPartsTotal[i].lastPart = postBufferEventPartsTotal.length;
        }
    }
    for (let i = 0; i < postBufferAfterEventPartsSorted.length; i++) {
        if (postBufferEventPartsTotal?.[postBufferActualEventPartsSorted?.length + i]) {
            postBufferEventPartsTotal[postBufferActualEventPartsSorted?.length + i].part = actualEventPreviousLastPart + i + 1;
        }
    }
    const preEventParts = eventParts.filter((e) => e.eventId === preEventId);
    const preBufferEventParts = preEventParts?.map((e) => ({
        ...e,
        groupId: postBufferGroupId,
        lastPart: actualEventPreviousLastPart + postBufferAfterEventPartsSorted.length,
    }));
    const concatenatedValues = preBufferEventParts.concat(postBufferEventPartsTotal);
    concatenatedValues.forEach((e) => console.log(e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, e?.forEventId, `e.id, e.groupId, e.eventId, e.part, e.lastPart, e.startDate, e.endDate, e?.forEventId,  inside modifyEventPartsForSinglularPostBufferTime`));
    return concatenatedValues;
};
export const formatEventTypeToPlannerEvent = (event, userPreference, workTimes, hostTimezone) => {
    const { allDay, part, forEventId, groupId, eventId, isBreak, isExternalMeeting, isExternalMeetingModifiable, isMeeting, isMeetingModifiable, isPostEvent, isPreEvent, modifiable, negativeImpactDayOfWeek, negativeImpactScore, negativeImpactTime, positiveImpactDayOfWeek, positiveImpactScore, positiveImpactTime, preferredDayOfWeek, preferredEndTimeRange, preferredStartTimeRange, preferredTime, priority, startDate, endDate, taskId, userId, weeklyTaskList, dailyTaskList, hardDeadline, softDeadline, recurringEventId, lastPart, preferredTimeRanges, hostId, meetingId, } = event;
    if (allDay) {
        return null;
    }
    const totalWorkingHours = convertToTotalWorkingHoursForInternalAttendee(userPreference, dayjs(event.startDate.slice(0, 19))
        .tz(event.timezone, true)
        .tz(hostTimezone)
        .format(), hostTimezone);
    const user = {
        id: event.userId,
        maxWorkLoadPercent: userPreference.maxWorkLoadPercent,
        backToBackMeetings: userPreference.backToBackMeetings,
        maxNumberOfMeetings: userPreference.maxNumberOfMeetings,
        minNumberOfBreaks: userPreference.minNumberOfBreaks,
        workTimes,
        hostId,
    };
    const eventPlannerRequestBody = {
        groupId,
        eventId,
        part,
        lastPart,
        startDate,
        endDate,
        taskId,
        hardDeadline,
        softDeadline,
        userId,
        user,
        priority,
        isPreEvent,
        isPostEvent,
        forEventId,
        positiveImpactScore,
        negativeImpactScore,
        positiveImpactDayOfWeek: dayOfWeekIntToString[positiveImpactDayOfWeek] ?? null,
        positiveImpactTime,
        negativeImpactDayOfWeek: dayOfWeekIntToString[negativeImpactDayOfWeek] ?? null,
        negativeImpactTime,
        modifiable,
        preferredDayOfWeek: dayOfWeekIntToString[preferredDayOfWeek] ?? null,
        preferredTime,
        isMeeting,
        isExternalMeeting,
        isExternalMeetingModifiable,
        isMeetingModifiable,
        dailyTaskList,
        weeklyTaskList,
        gap: isBreak,
        preferredStartTimeRange,
        preferredEndTimeRange,
        totalWorkingHours,
        recurringEventId,
        hostId,
        meetingId,
        event: {
            id: eventId,
            userId,
            hostId,
            preferredTimeRanges: preferredTimeRanges?.map((e) => ({
                dayOfWeek: dayOfWeekIntToString?.[e?.dayOfWeek] ?? null,
                startTime: e?.startTime,
                endTime: e?.endTime,
                eventId,
                userId,
                hostId,
            })) ?? null,
        },
    };
    return eventPlannerRequestBody;
};
export const formatEventTypeToPlannerEventForExternalAttendee = (event, workTimes, attendeeEvents, hostTimezone) => {
    const { allDay, part, forEventId, groupId, eventId, isBreak, isExternalMeeting, isExternalMeetingModifiable, isMeeting, isMeetingModifiable, isPostEvent, isPreEvent, modifiable, negativeImpactDayOfWeek, negativeImpactScore, negativeImpactTime, positiveImpactDayOfWeek, positiveImpactScore, positiveImpactTime, preferredDayOfWeek, preferredEndTimeRange, preferredStartTimeRange, preferredTime, priority, startDate, endDate, taskId, userId, weeklyTaskList, dailyTaskList, hardDeadline, softDeadline, recurringEventId, lastPart, preferredTimeRanges, hostId, meetingId, } = event;
    if (allDay) {
        return null;
    }
    const totalWorkingHours = convertToTotalWorkingHoursForExternalAttendee(attendeeEvents, dayjs(event.startDate.slice(0, 19))
        .tz(event.timezone, true)
        .tz(hostTimezone)
        .format(), hostTimezone, event?.timezone);
    const user = {
        id: event.userId,
        maxWorkLoadPercent: 100,
        backToBackMeetings: false,
        maxNumberOfMeetings: 99,
        minNumberOfBreaks: 0,
        workTimes,
        hostId,
    };
    const eventPlannerRequestBody = {
        groupId,
        eventId,
        part,
        lastPart,
        startDate,
        endDate,
        taskId,
        hardDeadline,
        softDeadline,
        userId,
        user,
        priority,
        isPreEvent,
        isPostEvent,
        forEventId,
        positiveImpactScore,
        negativeImpactScore,
        positiveImpactDayOfWeek: dayOfWeekIntToString[positiveImpactDayOfWeek] ?? null,
        positiveImpactTime,
        negativeImpactDayOfWeek: dayOfWeekIntToString[negativeImpactDayOfWeek] ?? null,
        negativeImpactTime,
        modifiable,
        preferredDayOfWeek: dayOfWeekIntToString[preferredDayOfWeek] ?? null,
        preferredTime,
        isMeeting,
        isExternalMeeting,
        isExternalMeetingModifiable,
        isMeetingModifiable,
        dailyTaskList,
        weeklyTaskList,
        gap: isBreak,
        preferredStartTimeRange,
        preferredEndTimeRange,
        totalWorkingHours,
        recurringEventId,
        hostId,
        meetingId,
        event: {
            id: eventId,
            userId,
            hostId,
            preferredTimeRanges: preferredTimeRanges?.map((e) => ({
                dayOfWeek: dayOfWeekIntToString?.[e?.dayOfWeek] ?? null,
                startTime: e?.startTime,
                endTime: e?.endTime,
                eventId,
                userId,
                hostId,
            })) ?? null,
        },
    };
    return eventPlannerRequestBody;
};
export const convertMeetingPlusTypeToEventPlusType = (event) => {
    const newEvent = {
        ...event,
        preferredTimeRanges: event?.preferredTimeRanges?.map((pt) => ({
            id: pt.id,
            eventId: event.id,
            dayOfWeek: pt?.dayOfWeek,
            startTime: pt?.startTime,
            endTime: pt?.endTime,
            updatedAt: pt?.updatedAt,
            createdDate: pt?.createdDate,
            userId: event?.userId,
        })) || null,
    };
    return newEvent;
};
export const setPreferredTimeForUnModifiableEvent = (event, timezone) => {
    if (!event?.modifiable) {
        if (!event?.preferredDayOfWeek && !event?.preferredTime) {
            const newEvent = {
                ...event,
                preferredDayOfWeek: dayOfWeekIntToString[getISODay(dayjs(event.startDate.slice(0, 19)).tz(timezone, true).toDate())],
                preferredTime: dayjs(event.startDate.slice(0, 19))
                    .tz(timezone, true)
                    .format('HH:mm'),
            };
            return newEvent;
        }
        return event;
    }
    return event;
};
export const listEventsWithIds = async (ids) => {
    try {
        const operationName = 'listEventsWithIds';
        const query = `
    query listEventsWithIds($ids: [String!]!) {
      Event(where: {id: {_in: $ids}}) {
        allDay
        anyoneCanAddSelf
        attachments
        attendeesOmitted
        backgroundColor
        calendarId
        colorId
        conferenceId
        copyAvailability
        copyCategories
        copyDuration
        copyIsBreak
        copyIsExternalMeeting
        copyIsMeeting
        copyModifiable
        copyPriorityLevel
        copyReminders
        copyTimeBlocking
        copyTimePreference
        createdDate
        creator
        dailyTaskList
        deleted
        duration
        endDate
        endTimeUnspecified
        eventId
        eventType
        extendedProperties
        followUpEventId
        forEventId
        foregroundColor
        guestsCanInviteOthers
        guestsCanModify
        guestsCanSeeOtherGuests
        hangoutLink
        hardDeadline
        htmlLink
        iCalUID
        id
        isBreak
        isExternalMeeting
        isExternalMeetingModifiable
        isFollowUp
        isMeeting
        isMeetingModifiable
        isPostEvent
        isPreEvent
        links
        location
        locked
        maxAttendees
        meetingId
        method
        modifiable
        negativeImpactDayOfWeek
        negativeImpactScore
        negativeImpactTime
        notes
        organizer
        originalAllDay
        originalStartDate
        originalTimezone
        positiveImpactDayOfWeek
        positiveImpactScore
        positiveImpactTime
        postEventId
        preEventId
        preferredDayOfWeek
        preferredEndTimeRange
        preferredStartTimeRange
        preferredTime
        priority
        privateCopy
        recurrence
        recurrenceRule
        recurringEventId
        sendUpdates
        softDeadline
        source
        startDate
        status
        summary
        taskId
        taskType
        timeBlocking
        timezone
        title
        transparency
        unlink
        updatedAt
        useDefaultAlarms
        userId
        userModifiedAvailability
        userModifiedCategories
        userModifiedDuration
        userModifiedIsBreak
        userModifiedIsExternalMeeting
        userModifiedIsMeeting
        userModifiedModifiable
        userModifiedPriorityLevel
        userModifiedReminders
        userModifiedTimeBlocking
        userModifiedTimePreference
        visibility
        weeklyTaskList
        byWeekDay
        localSynced
        userModifiedColor
        copyColor
      }
    }
    `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    ids,
                },
            },
        })
            .json();
        return res?.data?.Event;
    }
    catch (e) {
        console.log(e, ' unable to list ids with ids');
    }
};
export const tagEventsForDailyOrWeeklyTask = async (events) => {
    try {
        const filteredEvents = events.filter((e) => e.recurringEventId);
        if (filteredEvents?.length > 0) {
            const originalEvents = await listEventsWithIds(_.uniq(filteredEvents.map((e) => e?.recurringEventId)));
            if (originalEvents?.length > 0) {
                const taggedFilteredEvents = filteredEvents.map((e) => tagEventForDailyOrWeeklyTask(e, originalEvents.find((oe) => oe.id === e.recurringEventId)));
                const newEvents = events.map((e) => {
                    if (e?.recurringEventId) {
                        const taggedFilteredEvent = taggedFilteredEvents.find((te) => te?.eventId === e?.eventId);
                        if (taggedFilteredEvent?.eventId) {
                            return taggedFilteredEvent;
                        }
                        else {
                            return e;
                        }
                    }
                    return e;
                });
                return newEvents;
            }
            console.log('tagEventsForDailyorWeeklyTask: originalEvents is empty');
            return events;
        }
        return events;
    }
    catch (e) {
        console.log(e, ' unable to to tag events for daily or weekly task');
    }
};
export const tagEventForDailyOrWeeklyTask = (eventToSubmit, event) => {
    if (!event?.id) {
        console.log('no original event inside tagEventForDailysOrWeeklyTask');
        return null;
    }
    if (!eventToSubmit?.eventId) {
        console.log('no eventToSubmit inside tagEventForDailyOrWeeklyTask');
        return null;
    }
    if (eventToSubmit?.recurringEventId) {
        if (event?.weeklyTaskList) {
            return {
                ...eventToSubmit,
                weeklyTaskList: event.weeklyTaskList,
            };
        }
        if (event?.dailyTaskList) {
            return {
                ...eventToSubmit,
                dailyTaskList: event.dailyTaskList,
            };
        }
        return eventToSubmit;
    }
    return eventToSubmit;
};
export const generateUserPlannerRequestBody = (userPreference, userId, workTimes, hostId) => {
    const { maxWorkLoadPercent, backToBackMeetings, maxNumberOfMeetings, minNumberOfBreaks, } = userPreference;
    const user = {
        id: userId,
        maxWorkLoadPercent,
        backToBackMeetings,
        maxNumberOfMeetings,
        minNumberOfBreaks,
        workTimes,
        hostId,
    };
    return user;
};
export const generateUserPlannerRequestBodyForExternalAttendee = (userId, workTimes, hostId) => {
    const user = {
        id: userId,
        maxWorkLoadPercent: 100,
        backToBackMeetings: false,
        maxNumberOfMeetings: 99,
        minNumberOfBreaks: 0,
        workTimes,
        hostId,
    };
    return user;
};
export const processEventsForOptaPlannerForMainHost = async (mainHostId, allHostEvents, windowStartDate, windowEndDate, hostTimezone, oldHostEvents, newHostReminders, newHostBufferTimes) => {
    try {
        const newBufferTimeArray = [];
        newHostBufferTimes?.forEach((newHostBufferTime) => {
            if (newHostBufferTime?.beforeEvent?.id) {
                console.log(newHostBufferTime?.beforeEvent, ' newTimeBlocking?.beforeEvent');
                newBufferTimeArray.push(newHostBufferTime.beforeEvent);
            }
            if (newHostBufferTime?.afterEvent?.id) {
                console.log(newHostBufferTime?.afterEvent, ' newTimeBlocking?.afterEvent');
                newBufferTimeArray.push(newHostBufferTime.afterEvent);
            }
        });
        const modifiedAllHostEvents = _.cloneDeep(allHostEvents);
        modifiedAllHostEvents.push(...newBufferTimeArray);
        const userPreferences = await getUserPreferences(mainHostId);
        const globalPrimaryCalendar = await getGlobalCalendar(mainHostId);
        const diffDays = dayjs(windowEndDate.slice(0, 19)).diff(dayjs(windowStartDate.slice(0, 19)), 'day');
        const modifiedAllEventsWithBreaks = [];
        const startDatesForEachDay = [];
        for (let i = 0; i <= diffDays; i++) {
            startDatesForEachDay.push(dayjs(windowStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .add(i, 'day')
                .format());
        }
        let parentBreaks = [];
        const breaks = await generateBreakEventsForDate(userPreferences, mainHostId, windowStartDate, windowEndDate, hostTimezone, globalPrimaryCalendar?.id);
        breaks.forEach((b) => console.log(b, ' generatedBreaks'));
        if (breaks?.length > 0) {
            const allEventsWithDuplicateFreeBreaks = _.differenceBy(modifiedAllHostEvents, breaks, 'id');
            modifiedAllEventsWithBreaks.push(...allEventsWithDuplicateFreeBreaks);
            modifiedAllEventsWithBreaks.push(...breaks);
            parentBreaks.push(...breaks);
        }
        else {
            modifiedAllEventsWithBreaks.push(...modifiedAllHostEvents);
        }
        const workTimes = generateWorkTimesForInternalAttendee(mainHostId, mainHostId, userPreferences, hostTimezone, hostTimezone);
        const timeslots = [];
        for (let i = 0; i < startDatesForEachDay.length; i++) {
            if (i === 0) {
                const timeslotsForDay = await generateTimeSlotsLiteForInternalAttendee(startDatesForEachDay?.[i], mainHostId, userPreferences, hostTimezone, hostTimezone, true);
                timeslots.push(...timeslotsForDay);
                continue;
            }
            const timeslotsForDay = await generateTimeSlotsLiteForInternalAttendee(startDatesForEachDay?.[i], mainHostId, userPreferences, hostTimezone, hostTimezone, false);
            timeslots.push(...timeslotsForDay);
        }
        console.log(timeslots, ' timeslots');
        const filteredAllEvents = _.uniqBy(modifiedAllEventsWithBreaks.filter((e) => validateEventDates(e, userPreferences)), 'id');
        let eventParts = [];
        const eventPartMinisAccumulated = [];
        for (const event of filteredAllEvents) {
            const eventPartMinis = generateEventPartsLite(event, mainHostId);
            eventPartMinisAccumulated.push(...eventPartMinis);
        }
        const modifiedEventPartMinisPreBuffer = modifyEventPartsForMultiplePreBufferTime(eventPartMinisAccumulated);
        const modifiedEventPartMinisPreAndPostBuffer = modifyEventPartsForMultiplePostBufferTime(modifiedEventPartMinisPreBuffer);
        const formattedEventParts = modifiedEventPartMinisPreAndPostBuffer.map((e) => formatEventTypeToPlannerEvent(e, userPreferences, workTimes, hostTimezone));
        if (formattedEventParts.length > 0) {
            eventParts.push(...formattedEventParts);
        }
        if (eventParts.length > 0) {
            eventParts.forEach((e) => console.log(e, ' eventParts after formatting'));
            const newEventPartsWithPreferredTimeSet = eventParts.map((e) => setPreferredTimeForUnModifiableEvent(e, allHostEvents.find((f) => f.id === e.eventId)?.timezone));
            newEventPartsWithPreferredTimeSet.forEach((e) => console.log(e, ' newEventPartsWithPreferredTimeSet'));
            const newEventParts = await tagEventsForDailyOrWeeklyTask(newEventPartsWithPreferredTimeSet);
            newEventParts.forEach((e) => console.log(e, ' newEventParts after tagEventsForDailyOrWeeklyTask'));
            const userPlannerRequestBody = generateUserPlannerRequestBody(userPreferences, userPreferences.userId, workTimes, mainHostId);
            console.log(userPlannerRequestBody, ' userPlannerRequestBody');
            const modifiedNewEventParts = newEventParts.map((eventPart) => {
                const oldEvent = filteredAllEvents.find((event) => event.id === eventPart.eventId);
                return {
                    groupId: eventPart?.groupId,
                    eventId: eventPart?.eventId,
                    part: eventPart?.part,
                    lastPart: eventPart?.lastPart,
                    meetingId: eventPart?.meetingId,
                    hostId: mainHostId,
                    startDate: dayjs(eventPart?.startDate.slice(0, 19))
                        .tz(oldEvent.timezone, true)
                        .format(),
                    endDate: dayjs(eventPart?.endDate.slice(0, 19))
                        .tz(oldEvent.timezone, true)
                        .format(),
                    userId: eventPart?.userId,
                    user: eventPart?.user,
                    priority: eventPart?.priority,
                    isPreEvent: eventPart?.isPreEvent,
                    isPostEvent: eventPart?.isPostEvent,
                    positiveImpactScore: eventPart?.positiveImpactScore,
                    negativeImpactScore: eventPart?.negativeImpactScore,
                    modifiable: eventPart?.modifiable,
                    isMeeting: eventPart?.isMeeting,
                    isExternalMeeting: eventPart?.isExternalMeeting,
                    isExternalMeetingModifiable: eventPart?.isExternalMeetingModifiable,
                    isMeetingModifiable: eventPart?.isMeetingModifiable,
                    dailyTaskList: eventPart?.dailyTaskList,
                    weeklyTaskList: eventPart?.weeklyTaskList,
                    gap: eventPart?.gap,
                    totalWorkingHours: eventPart?.totalWorkingHours,
                    hardDeadline: eventPart?.hardDeadline,
                    softDeadline: eventPart?.softDeadline,
                    forEventId: eventPart?.forEventId,
                    positiveImpactDayOfWeek: eventPart?.positiveImpactDayOfWeek,
                    positiveImpactTime: eventPart?.positiveImpactTime,
                    negativeImpactDayOfWeek: eventPart?.negativeImpactDayOfWeek,
                    negativeImpactTime: eventPart?.negativeImpactTime,
                    preferredDayOfWeek: eventPart?.preferredDayOfWeek,
                    preferredTime: eventPart?.preferredTime,
                    preferredStartTimeRange: eventPart?.preferredStartTimeRange,
                    preferredEndTimeRange: eventPart?.preferredEndTimeRange,
                    event: eventPart?.event,
                };
            });
            return modifiedNewEventParts?.length > 0
                ? {
                    userId: mainHostId,
                    hostId: mainHostId,
                    eventParts: modifiedNewEventParts,
                    allEvents: filteredAllEvents,
                    breaks: parentBreaks,
                    oldEvents: oldHostEvents,
                    timeslots,
                    userPlannerRequestBody,
                    newHostReminders,
                    newHostBufferTimes,
                }
                : null;
        }
    }
    catch (e) {
        console.log(e, ' unable to process events for optaplanner for host attendee');
    }
};
export const processEventsForOptaPlannerForInternalAttendees = async (mainHostId, allEvents, windowStartDate, windowEndDate, hostTimezone, internalAttendees, oldEvents, oldMeetingEvents, newHostReminders, newHostBufferTimes) => {
    try {
        const newBufferTimeArray = [];
        newHostBufferTimes?.forEach((newHostBufferTime) => {
            if (newHostBufferTime?.beforeEvent?.id) {
                console.log(newHostBufferTime?.beforeEvent, ' newTimeBlocking?.beforeEvent');
                newBufferTimeArray.push(newHostBufferTime.beforeEvent);
            }
            if (newHostBufferTime?.afterEvent?.id) {
                console.log(newHostBufferTime?.afterEvent, ' newTimeBlocking?.afterEvent');
                newBufferTimeArray.push(newHostBufferTime.afterEvent);
            }
        });
        const filteredOldMeetingEvents = oldMeetingEvents
            ?.map((m) => {
            const foundIndex = allEvents?.findIndex((a) => a?.id === m?.id);
            if (foundIndex > -1) {
                return null;
            }
            return m;
        })
            ?.filter((e) => e !== null);
        const modifiedAllEvents = _.cloneDeep(allEvents);
        if (filteredOldMeetingEvents?.[0]?.id) {
            modifiedAllEvents.push(...filteredOldMeetingEvents?.map((a) => convertMeetingPlusTypeToEventPlusType(a)));
        }
        modifiedAllEvents.push(...newBufferTimeArray);
        const unfilteredUserPreferences = [];
        for (const internalAttendee of internalAttendees) {
            const userPreference = await getUserPreferences(internalAttendee?.userId);
            unfilteredUserPreferences.push(userPreference);
        }
        const userPreferences = _.uniqWith(unfilteredUserPreferences, _.isEqual);
        const unfilteredGlobalPrimaryCalendars = [];
        for (const internalAttendee of internalAttendees) {
            const globalPrimaryCalendar = await getGlobalCalendar(internalAttendee?.userId);
            unfilteredGlobalPrimaryCalendars.push(globalPrimaryCalendar);
        }
        const globalPrimaryCalendars = _.uniqWith(unfilteredGlobalPrimaryCalendars, _.isEqual);
        const modifiedAllEventsWithBreaks = [];
        let parentBreaks = [];
        for (const userPreference of userPreferences) {
            const globalPrimaryCalendar = globalPrimaryCalendars.find((g) => g?.userId === userPreference?.userId);
            if (!globalPrimaryCalendar) {
                throw new Error('no global primary calendar found');
            }
            const userId = userPreference?.userId;
            const breaks = await generateBreakEventsForDate(userPreference, userId, windowStartDate, windowEndDate, hostTimezone, globalPrimaryCalendar?.id);
            breaks.forEach((b) => console.log(b, ' generatedBreaks'));
            if (breaks?.length > 0) {
                const allEventsWithDuplicateFreeBreaks = _.differenceBy(modifiedAllEvents, breaks, 'id');
                modifiedAllEventsWithBreaks.push(...allEventsWithDuplicateFreeBreaks);
                modifiedAllEventsWithBreaks.push(...breaks);
                parentBreaks.push(...breaks);
            }
            else {
                modifiedAllEventsWithBreaks.push(...modifiedAllEvents);
            }
        }
        const diffDays = dayjs(windowEndDate.slice(0, 19)).diff(dayjs(windowStartDate.slice(0, 19)), 'day');
        const startDatesForEachDay = [];
        for (let i = 0; i <= diffDays; i++) {
            startDatesForEachDay.push(dayjs(windowStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .add(i, 'day')
                .format());
        }
        const unfilteredWorkTimes = [];
        for (const internalAttendee of internalAttendees) {
            const userPreference = userPreferences.find((u) => u.userId === internalAttendee.userId);
            const attendeeTimezone = internalAttendee?.timezone;
            const workTimesForAttendee = generateWorkTimesForInternalAttendee(mainHostId, internalAttendee.userId, userPreference, hostTimezone, attendeeTimezone);
            unfilteredWorkTimes.push(...workTimesForAttendee);
        }
        const workTimes = _.uniqWith(unfilteredWorkTimes, _.isEqual);
        const unfilteredTimeslots = [];
        const timeslots = [];
        for (let i = 0; i < startDatesForEachDay.length; i++) {
            if (i === 0) {
                for (const internalAttendee of internalAttendees) {
                    const userPreference = userPreferences.find((u) => u.userId === internalAttendee.userId);
                    const timeslotsForDay = await generateTimeSlotsLiteForInternalAttendee(startDatesForEachDay?.[i], mainHostId, userPreference, hostTimezone, internalAttendee?.timezone, true);
                    unfilteredTimeslots.push(...timeslotsForDay);
                }
                continue;
            }
            for (const internalAttendee of internalAttendees) {
                const userPreference = userPreferences.find((u) => u.userId === internalAttendee.userId);
                const timeslotsForDay = await generateTimeSlotsLiteForInternalAttendee(startDatesForEachDay?.[i], mainHostId, userPreference, hostTimezone, internalAttendee?.timezone, false);
                unfilteredTimeslots.push(...timeslotsForDay);
            }
        }
        timeslots.push(..._.uniqWith(unfilteredTimeslots, _.isEqual));
        console.log(timeslots, 'isMachinePro timeslots');
        const unfilteredAllEvents = [];
        for (const internalAttendee of internalAttendees) {
            const userPreference = userPreferences.find((u) => u.userId === internalAttendee.userId);
            const modifiedAllEventsWithBreaksWithUser = modifiedAllEventsWithBreaks.filter((e) => e.userId === internalAttendee.userId);
            const events = modifiedAllEventsWithBreaksWithUser.filter((e) => validateEventDates(e, userPreference));
            unfilteredAllEvents.push(...events);
        }
        const filteredAllEvents = _.uniqBy(unfilteredAllEvents, 'id');
        let eventParts = [];
        const eventPartMinisAccumulated = [];
        for (const event of filteredAllEvents) {
            const eventPartMinis = generateEventPartsLite(event, mainHostId);
            eventPartMinisAccumulated.push(...eventPartMinis);
        }
        const modifiedEventPartMinisPreBuffer = modifyEventPartsForMultiplePreBufferTime(eventPartMinisAccumulated);
        const modifiedEventPartMinisPreAndPostBuffer = modifyEventPartsForMultiplePostBufferTime(modifiedEventPartMinisPreBuffer);
        const formattedEventParts = [];
        for (const userPreference of userPreferences) {
            const formattedEventPartsForUser = modifiedEventPartMinisPreAndPostBuffer
                .filter((e) => e?.userId === userPreference?.userId)
                .map((e) => formatEventTypeToPlannerEvent(e, userPreference, workTimes, hostTimezone));
            formattedEventParts.push(...formattedEventPartsForUser);
        }
        if (formattedEventParts.length > 0) {
            eventParts.push(..._.uniqWith(formattedEventParts, _.isEqual));
        }
        if (eventParts.length > 0) {
            eventParts.forEach((e) => console.log(e, ' eventParts after formatting'));
            const newEventPartsWithPreferredTimeSet = eventParts.map((e) => setPreferredTimeForUnModifiableEvent(e, allEvents.find((f) => f.id === e.eventId)?.timezone));
            newEventPartsWithPreferredTimeSet.forEach((e) => console.log(e, ' newEventPartsWithPreferredTimeSet'));
            const newEventParts = await tagEventsForDailyOrWeeklyTask(newEventPartsWithPreferredTimeSet);
            newEventParts.forEach((e) => console.log(e, ' newEventParts after tagEventsForDailyOrWeeklyTask'));
            const unfilteredUserList = [];
            for (const userPreference of userPreferences) {
                const userPlannerRequestBody = generateUserPlannerRequestBody(userPreference, userPreference?.userId, workTimes, mainHostId);
                console.log(userPlannerRequestBody, ' userPlannerRequestBody');
                unfilteredUserList.push(userPlannerRequestBody);
            }
            const userList = _.uniqWith(unfilteredUserList, _.isEqual);
            const modifiedNewEventParts = newEventParts.map((eventPart) => {
                const oldEvent = filteredAllEvents.find((event) => event.id === eventPart.eventId);
                return {
                    groupId: eventPart?.groupId,
                    eventId: eventPart?.eventId,
                    part: eventPart?.part,
                    lastPart: eventPart?.lastPart,
                    meetingId: eventPart?.meetingId,
                    hostId: mainHostId,
                    startDate: dayjs(eventPart?.startDate.slice(0, 19))
                        .tz(oldEvent.timezone, true)
                        .tz(hostTimezone)
                        .format(),
                    endDate: dayjs(eventPart?.endDate.slice(0, 19))
                        .tz(oldEvent.timezone, true)
                        .tz(hostTimezone)
                        .format(),
                    userId: eventPart?.userId,
                    user: eventPart?.user,
                    priority: eventPart?.priority,
                    isPreEvent: eventPart?.isPreEvent,
                    isPostEvent: eventPart?.isPostEvent,
                    positiveImpactScore: eventPart?.positiveImpactScore,
                    negativeImpactScore: eventPart?.negativeImpactScore,
                    modifiable: eventPart?.modifiable,
                    isMeeting: eventPart?.isMeeting,
                    isExternalMeeting: eventPart?.isExternalMeeting,
                    isExternalMeetingModifiable: eventPart?.isExternalMeetingModifiable,
                    isMeetingModifiable: eventPart?.isMeetingModifiable,
                    dailyTaskList: eventPart?.dailyTaskList,
                    weeklyTaskList: eventPart?.weeklyTaskList,
                    gap: eventPart?.gap,
                    totalWorkingHours: eventPart?.totalWorkingHours,
                    hardDeadline: eventPart?.hardDeadline,
                    softDeadline: eventPart?.softDeadline,
                    forEventId: eventPart?.forEventId,
                    positiveImpactDayOfWeek: eventPart?.positiveImpactDayOfWeek,
                    positiveImpactTime: eventPart?.positiveImpactTime,
                    negativeImpactDayOfWeek: eventPart?.negativeImpactDayOfWeek,
                    negativeImpactTime: eventPart?.negativeImpactTime,
                    preferredDayOfWeek: eventPart?.preferredDayOfWeek,
                    preferredTime: eventPart?.preferredTime,
                    preferredStartTimeRange: eventPart?.preferredStartTimeRange,
                    preferredEndTimeRange: eventPart?.preferredEndTimeRange,
                    event: eventPart?.event,
                };
            });
            return modifiedNewEventParts?.length > 0
                ? {
                    userIds: internalAttendees.map((a) => a.userId),
                    hostId: mainHostId,
                    eventParts: modifiedNewEventParts,
                    allEvents: filteredAllEvents,
                    oldEvents,
                    timeslots,
                    userList,
                    newHostReminders,
                    newHostBufferTimes,
                }
                : null;
        }
    }
    catch (e) {
        console.log(e, ' unable to process events for optaplanner for each attendee');
    }
};
export const convertMeetingAssistEventTypeToEventPlusType = (event, userId) => {
    return {
        id: event?.id,
        userId: userId,
        title: event?.summary,
        startDate: event?.startDate,
        endDate: event?.endDate,
        allDay: event?.allDay,
        recurrenceRule: event?.recurrenceRule,
        location: event?.location,
        notes: event?.notes,
        attachments: event?.attachments,
        links: event?.links,
        timezone: event?.timezone,
        createdDate: event?.createdDate,
        deleted: false,
        priority: 1,
        isFollowUp: false,
        isPreEvent: false,
        isPostEvent: false,
        modifiable: false,
        anyoneCanAddSelf: true,
        guestsCanInviteOthers: true,
        guestsCanSeeOtherGuests: true,
        originalStartDate: undefined,
        originalAllDay: undefined,
        summary: event?.summary,
        transparency: event?.transparency,
        visibility: event?.visibility,
        recurringEventId: event?.recurringEventId,
        updatedAt: event?.updatedAt,
        iCalUID: event?.iCalUID,
        htmlLink: event?.htmlLink,
        colorId: event?.colorId,
        creator: event?.creator,
        organizer: event?.organizer,
        endTimeUnspecified: event?.endTimeUnspecified,
        recurrence: event?.recurrence,
        originalTimezone: event?.timezone,
        extendedProperties: event?.extendedProperties,
        hangoutLink: event?.hangoutLink,
        guestsCanModify: event?.guestsCanModify,
        locked: event?.locked,
        source: event?.source,
        eventType: event?.eventType,
        privateCopy: event?.privateCopy,
        calendarId: event?.calendarId,
        backgroundColor: event?.backgroundColor,
        foregroundColor: event?.foregroundColor,
        useDefaultAlarms: event?.useDefaultAlarms,
        meetingId: event?.meetingId,
        eventId: event?.eventId,
    };
};
export const generateWorkTimesForExternalAttendee = (hostId, userId, attendeeEvents, hostTimezone, userTimezone) => {
    const daysInWeek = 7;
    const workTimes = [];
    for (let i = 0; i < daysInWeek; i++) {
        const dayOfWeekInt = i + 1;
        const sameDayEvents = attendeeEvents.filter((e) => getISODay(dayjs(e.startDate.slice(0, 19))
            .tz(e.timezone || userTimezone, true)
            .tz(hostTimezone)
            .toDate()) ===
            i + 1);
        const minStartDate = _.minBy(sameDayEvents, (e) => dayjs(e.startDate.slice(0, 19))
            .tz(e.timezone || userTimezone, true)
            .tz(hostTimezone)
            .unix());
        const maxEndDate = _.maxBy(sameDayEvents, (e) => dayjs(e.endDate.slice(0, 19))
            .tz(e.timezone || userTimezone, true)
            .tz(hostTimezone)
            .unix());
        const startHour = dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .hour();
        const startMinute = dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(0), dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), 'minute', '[)')
            ? 0
            : dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(15), dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), 'minute', '[)')
                ? 15
                : dayjs(minStartDate.startDate.slice(0, 19))
                    .tz(minStartDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                    .tz(minStartDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(30), dayjs(minStartDate.startDate.slice(0, 19))
                    .tz(minStartDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(45), 'minute', '[)')
                    ? 30
                    : 45;
        let endHour = dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .hour();
        const endMinute = dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(0), dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), 'minute', '[)')
            ? 15
            : dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(15), dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), 'minute', '[)')
                ? 30
                : dayjs(maxEndDate.endDate.slice(0, 19))
                    .tz(maxEndDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                    .tz(maxEndDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(30), dayjs(maxEndDate.endDate.slice(0, 19))
                    .tz(maxEndDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(45), 'minute', '[)')
                    ? 45
                    : 0;
        if (endMinute === 0) {
            if (endHour < 23) {
                endHour += 1;
            }
        }
        workTimes.push({
            dayOfWeek: dayOfWeekIntToString[dayOfWeekInt],
            startTime: dayjs(setISODay(dayjs()
                .hour(startHour)
                .minute(startMinute)
                .tz(hostTimezone, true)
                .toDate(), i + 1))
                .tz(hostTimezone)
                .format('HH:mm'),
            endTime: dayjs(setISODay(dayjs()
                .hour(endHour)
                .minute(endMinute)
                .tz(hostTimezone, true)
                .toDate(), i + 1))
                .tz(hostTimezone)
                .format('HH:mm'),
            hostId,
            userId,
        });
    }
    return workTimes;
};
export const generateTimeSlotsForExternalAttendee = (hostStartDate, hostId, attendeeEvents, hostTimezone, userTimezone, isFirstDay) => {
    if (isFirstDay) {
        const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
        const monthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .month();
        const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .date();
        const startHourOfHostDateByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour();
        const startMinuteOfHostDateByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBetween(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(0), dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(15), 'minute', '[)')
            ? 0
            : dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isBetween(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(15), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(30), 'minute', '[)')
                ? 15
                : dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .isBetween(dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .minute(30), dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .minute(45), 'minute', '[)')
                    ? 30
                    : 45;
        const sameDayEvents = attendeeEvents.filter((e) => getISODay(dayjs(e.startDate.slice(0, 19))
            .tz(userTimezone, true)
            .tz(hostTimezone)
            .toDate()) === dayOfWeekIntByHost);
        const maxEndDate = _.maxBy(sameDayEvents, (e) => dayjs(e.endDate.slice(0, 19))
            .tz(userTimezone, true)
            .tz(hostTimezone)
            .unix());
        let workEndHourByHost = dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .hour();
        const workEndMinuteByHost = dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(0), dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), 'minute', '[)')
            ? 15
            : dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(15), dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), 'minute', '[)')
                ? 30
                : dayjs(maxEndDate.endDate.slice(0, 19))
                    .tz(maxEndDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                    .tz(maxEndDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(30), dayjs(maxEndDate.endDate.slice(0, 19))
                    .tz(maxEndDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(45), 'minute', '[)')
                    ? 45
                    : 0;
        if (workEndMinuteByHost === 0) {
            if (workEndHourByHost < 23) {
                workEndHourByHost += 1;
            }
        }
        const minStartDate = _.minBy(sameDayEvents, (e) => dayjs(e.startDate.slice(0, 19))
            .tz(userTimezone, true)
            .tz(hostTimezone)
            .unix());
        const workStartHourByHost = dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .hour();
        const workStartMinuteByHost = dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(0), dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), 'minute', '[)')
            ? 0
            : dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(15), dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), 'minute', '[)')
                ? 15
                : dayjs(minStartDate.startDate.slice(0, 19))
                    .tz(minStartDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                    .tz(minStartDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(30), dayjs(minStartDate.startDate.slice(0, 19))
                    .tz(minStartDate.timezone || userTimezone, true)
                    .tz(hostTimezone)
                    .minute(45), 'minute', '[)')
                    ? 30
                    : 45;
        if (dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBefore(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(workStartHourByHost)
            .minute(workStartMinuteByHost))) {
            const startDuration = dayjs.duration({
                hours: workStartHourByHost,
                minutes: workStartMinuteByHost,
            });
            const endDuration = dayjs.duration({
                hours: workEndHourByHost,
                minutes: workEndMinuteByHost,
            });
            const totalDuration = endDuration.subtract(startDuration);
            const totalMinutes = totalDuration.asMinutes();
            const timeSlots = [];
            console.log(hostStartDate, dayOfWeekIntByHost, dayOfMonthByHost, startHourOfHostDateByHost, startMinuteOfHostDateByHost, workEndHourByHost, workEndMinuteByHost, timezone, `startDate,  dayOfWeekIntByHost, dayOfMonthByHost, startHourByHost, startMinuteByHost, endHourByHost, endMinuteByHost totalMinutes, timezone, inside firstDay inside generateTimeslots`);
            for (let i = 0; i < totalMinutes; i += 15) {
                timeSlots.push({
                    dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
                    startTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourOfHostDateByHost)
                        .minute(startMinuteOfHostDateByHost)
                        .add(i, 'minute')
                        .format('HH:mm'),
                    endTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourOfHostDateByHost)
                        .minute(startMinuteOfHostDateByHost)
                        .add(i + 15, 'minute')
                        .format('HH:mm'),
                    hostId,
                    monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
                });
            }
            console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day where startDate is before work start time');
            return timeSlots;
        }
        const startDuration = dayjs.duration({
            hours: startHourOfHostDateByHost,
            minutes: startMinuteOfHostDateByHost,
        });
        const endDuration = dayjs.duration({
            hours: workEndHourByHost,
            minutes: workEndMinuteByHost,
        });
        const totalDuration = endDuration.subtract(startDuration);
        const totalMinutes = totalDuration.asMinutes();
        const timeSlots = [];
        console.log(hostStartDate, dayOfWeekIntByHost, dayOfMonthByHost, startHourOfHostDateByHost, startMinuteOfHostDateByHost, workEndHourByHost, workEndMinuteByHost, hostTimezone, `startDate,  dayOfWeekIntByHost, dayOfMonth, startHour, startMinute, endHour, endMinute totalMinutes, timezone, inside firstDay inside generateTimeslots`);
        for (let i = 0; i < totalMinutes; i += 15) {
            timeSlots.push({
                dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
                startTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourOfHostDateByHost)
                    .minute(startMinuteOfHostDateByHost)
                    .add(i, 'minute')
                    .format('HH:mm'),
                endTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourOfHostDateByHost)
                    .minute(startMinuteOfHostDateByHost)
                    .add(i + 15, 'minute')
                    .format('HH:mm'),
                hostId,
                monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
            });
        }
        console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day');
        return timeSlots;
    }
    const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
    const monthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .month();
    const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .date();
    const sameDayEvents = attendeeEvents.filter((e) => getISODay(dayjs(e.startDate.slice(0, 19))
        .tz(e.timezone || userTimezone, true)
        .tz(hostTimezone)
        .toDate()) === dayOfWeekIntByHost);
    const minStartDate = _.minBy(sameDayEvents, (e) => dayjs(e.startDate.slice(0, 19))
        .tz(e.timezone || userTimezone, true)
        .tz(hostTimezone)
        .unix());
    const maxEndDate = _.maxBy(sameDayEvents, (e) => dayjs(e.endDate.slice(0, 19))
        .tz(e.timezone || userTimezone, true)
        .tz(hostTimezone)
        .unix());
    let workEndHourByHost = dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .hour();
    const workEndMinuteByHost = dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(0), dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(15), 'minute', '[)')
        ? 15
        : dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), 'minute', '[)')
            ? 30
            : dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(45), 'minute', '[)')
                ? 45
                : 0;
    if (workEndMinuteByHost === 0) {
        if (workEndHourByHost < 23) {
            workEndHourByHost += 1;
        }
    }
    const workStartHourByHost = dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .hour();
    const workStartMinuteByHost = dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(0), dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(15), 'minute', '[)')
        ? 0
        : dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(15), dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), 'minute', '[)')
            ? 15
            : dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(45), 'minute', '[)')
                ? 30
                : 45;
    console.log(monthByHost, dayOfMonthByHost, workStartHourByHost, workStartMinuteByHost, workEndHourByHost, ' monthByHost, dayOfMonthByHost, workStartHourByHost, workStartMinuteByHost, workEndHourByHost');
    const startDuration = dayjs.duration({
        hours: workStartHourByHost,
        minutes: workStartMinuteByHost,
    });
    const endDuration = dayjs.duration({
        hours: workEndHourByHost,
        minutes: workEndMinuteByHost,
    });
    const totalDuration = endDuration.subtract(startDuration);
    const totalMinutes = totalDuration.asMinutes();
    const timeSlots = [];
    for (let i = 0; i < totalMinutes; i += 15) {
        timeSlots.push({
            dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
            startTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(workStartHourByHost)
                .minute(workStartMinuteByHost)
                .add(i, 'minute')
                .format('HH:mm'),
            endTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(workStartHourByHost)
                .minute(workStartMinuteByHost)
                .add(i + 15, 'minute')
                .format('HH:mm'),
            hostId,
            monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
        });
    }
    console.log(timeSlots, ' timeSlots inside generateTimeSlots');
    return timeSlots;
};
export const generateTimeSlotsLiteForExternalAttendee = (hostStartDate, hostId, attendeeEvents, hostTimezone, userTimezone, isFirstDay) => {
    if (isFirstDay) {
        const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
        const monthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .month();
        const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .date();
        const startHourOfHostDateByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour();
        const startMinuteOfHostDateByHost = dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBetween(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(0), dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).minute(30), 'minute', '[)')
            ? 0
            : dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .isBetween(dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(30), dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .minute(59), 'minute', '[)')
                ? 30
                : 0;
        const sameDayEvents = attendeeEvents.filter((e) => getISODay(dayjs(e.startDate.slice(0, 19))
            .tz(e?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .toDate()) === dayOfWeekIntByHost);
        const maxEndDate = _.maxBy(sameDayEvents, (e) => dayjs(e.endDate.slice(0, 19))
            .tz(e?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .unix());
        let workEndHourByHost = dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .hour();
        const workEndMinuteByHost = dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(0), dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), 'minute', '[)')
            ? 30
            : dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), dayjs(maxEndDate.endDate.slice(0, 19))
                .tz(maxEndDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(59), 'minute', '[)')
                ? 0
                : 30;
        if (workEndMinuteByHost === 0) {
            if (workEndHourByHost < 23) {
                workEndHourByHost += 1;
            }
        }
        const minStartDate = _.minBy(sameDayEvents, (e) => dayjs(e.startDate.slice(0, 19))
            .tz(e?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .unix());
        const workStartHourByHost = dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .hour();
        const workStartMinuteByHost = dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(0), dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), 'minute', '[)')
            ? 0
            : dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(30), dayjs(minStartDate.startDate.slice(0, 19))
                .tz(minStartDate?.timezone || userTimezone, true)
                .tz(hostTimezone)
                .minute(59), 'minute', '[)')
                ? 30
                : 0;
        if (dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .isBefore(dayjs(hostStartDate.slice(0, 19))
            .tz(hostTimezone, true)
            .hour(workStartHourByHost)
            .minute(workStartMinuteByHost))) {
            const startDuration = dayjs.duration({
                hours: workStartHourByHost,
                minutes: workStartMinuteByHost,
            });
            const endDuration = dayjs.duration({
                hours: workEndHourByHost,
                minutes: workEndMinuteByHost,
            });
            const totalDuration = endDuration.subtract(startDuration);
            const totalMinutes = totalDuration.asMinutes();
            const timeSlots = [];
            console.log(hostStartDate, dayOfWeekIntByHost, dayOfMonthByHost, startHourOfHostDateByHost, startMinuteOfHostDateByHost, workEndHourByHost, workEndMinuteByHost, timezone, `startDate,  dayOfWeekIntByHost, dayOfMonthByHost, startHourByHost, startMinuteByHost, endHourByHost, endMinuteByHost totalMinutes, timezone, inside firstDay inside generateTimeslots`);
            for (let i = 0; i < totalMinutes; i += 30) {
                timeSlots.push({
                    dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
                    startTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourOfHostDateByHost)
                        .minute(startMinuteOfHostDateByHost)
                        .add(i, 'minute')
                        .format('HH:mm'),
                    endTime: dayjs(hostStartDate.slice(0, 19))
                        .tz(hostTimezone, true)
                        .hour(startHourOfHostDateByHost)
                        .minute(startMinuteOfHostDateByHost)
                        .add(i + 30, 'minute')
                        .format('HH:mm'),
                    hostId,
                    monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
                });
            }
            console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day where startDate is before work start time');
            return timeSlots;
        }
        const startDuration = dayjs.duration({
            hours: startHourOfHostDateByHost,
            minutes: startMinuteOfHostDateByHost,
        });
        const endDuration = dayjs.duration({
            hours: workEndHourByHost,
            minutes: workEndMinuteByHost,
        });
        const totalDuration = endDuration.subtract(startDuration);
        const totalMinutes = totalDuration.asMinutes();
        const timeSlots = [];
        console.log(hostStartDate, dayOfWeekIntByHost, dayOfMonthByHost, startHourOfHostDateByHost, startMinuteOfHostDateByHost, workEndHourByHost, workEndMinuteByHost, hostTimezone, `startDate,  dayOfWeekIntByHost, dayOfMonth, startHour, startMinute, endHour, endMinute totalMinutes, timezone, inside firstDay inside generateTimeslots`);
        for (let i = 0; i < totalMinutes; i += 30) {
            timeSlots.push({
                dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
                startTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourOfHostDateByHost)
                    .minute(startMinuteOfHostDateByHost)
                    .add(i, 'minute')
                    .format('HH:mm'),
                endTime: dayjs(hostStartDate.slice(0, 19))
                    .tz(hostTimezone, true)
                    .hour(startHourOfHostDateByHost)
                    .minute(startMinuteOfHostDateByHost)
                    .add(i + 30, 'minute')
                    .format('HH:mm'),
                hostId,
                monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
            });
        }
        console.log(timeSlots, ' timeSlots inside generateTimeSlots for first day');
        return timeSlots;
    }
    const dayOfWeekIntByHost = getISODay(dayjs(hostStartDate.slice(0, 19)).tz(hostTimezone, true).toDate());
    const monthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .month();
    const dayOfMonthByHost = dayjs(hostStartDate.slice(0, 19))
        .tz(hostTimezone, true)
        .date();
    const sameDayEvents = attendeeEvents.filter((e) => getISODay(dayjs(e.startDate.slice(0, 19))
        .tz(userTimezone, true)
        .tz(hostTimezone)
        .toDate()) === dayOfWeekIntByHost);
    const minStartDate = _.minBy(sameDayEvents, (e) => dayjs(e.startDate.slice(0, 19))
        .tz(userTimezone, true)
        .tz(hostTimezone)
        .unix());
    const maxEndDate = _.maxBy(sameDayEvents, (e) => dayjs(e.endDate.slice(0, 19)).tz(userTimezone, true).tz(hostTimezone).unix());
    let workEndHourByHost = dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .hour();
    const workEndMinuteByHost = dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(0), dayjs(maxEndDate.endDate.slice(0, 19))
        .tz(maxEndDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(30), 'minute', '[)')
        ? 30
        : dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), dayjs(maxEndDate.endDate.slice(0, 19))
            .tz(maxEndDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(59), 'minute', '[)')
            ? 0
            : 30;
    if (workEndMinuteByHost === 0) {
        if (workEndHourByHost < 23) {
            workEndHourByHost += 1;
        }
    }
    const workStartHourByHost = dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .hour();
    const workStartMinuteByHost = dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(0), dayjs(minStartDate.startDate.slice(0, 19))
        .tz(minStartDate?.timezone || userTimezone, true)
        .tz(hostTimezone)
        .minute(30), 'minute', '[)')
        ? 0
        : dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .isBetween(dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(30), dayjs(minStartDate.startDate.slice(0, 19))
            .tz(minStartDate?.timezone || userTimezone, true)
            .tz(hostTimezone)
            .minute(59), 'minute', '[)')
            ? 30
            : 0;
    console.log(monthByHost, dayOfMonthByHost, workStartHourByHost, workStartMinuteByHost, workEndHourByHost, ' monthByHost, dayOfMonthByHost, workStartHourByHost, workStartMinuteByHost, workEndHourByHost');
    const startDuration = dayjs.duration({
        hours: workStartHourByHost,
        minutes: workStartMinuteByHost,
    });
    const endDuration = dayjs.duration({
        hours: workEndHourByHost,
        minutes: workEndMinuteByHost,
    });
    const totalDuration = endDuration.subtract(startDuration);
    const totalMinutes = totalDuration.asMinutes();
    const timeSlots = [];
    for (let i = 0; i < totalMinutes; i += 30) {
        timeSlots.push({
            dayOfWeek: dayOfWeekIntToString[dayOfWeekIntByHost],
            startTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(workStartHourByHost)
                .minute(workStartMinuteByHost)
                .add(i, 'minute')
                .format('HH:mm'),
            endTime: dayjs(hostStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .hour(workStartHourByHost)
                .minute(workStartMinuteByHost)
                .add(i + 30, 'minute')
                .format('HH:mm'),
            hostId,
            monthDay: formatToMonthDay(monthByHost, dayOfMonthByHost),
        });
    }
    console.log(timeSlots, ' timeSlots inside generateTimeSlots');
    return timeSlots;
};
export const processEventsForOptaPlannerForExternalAttendees = async (userIds, mainHostId, allExternalEvents, windowStartDate, windowEndDate, hostTimezone, externalAttendees, oldExternalMeetingEvents) => {
    try {
        const modifiedAllExternalEvents = allExternalEvents.map((e) => convertMeetingAssistEventTypeToEventPlusType(e, externalAttendees.find((a) => a.id === e.attendeeId)?.userId));
        const oldConvertedMeetingEvents = oldExternalMeetingEvents
            .map((a) => convertMeetingPlusTypeToEventPlusType(a))
            ?.filter((e) => !!e);
        if (oldConvertedMeetingEvents?.length > 0) {
            modifiedAllExternalEvents.push(...oldConvertedMeetingEvents);
        }
        const diffDays = dayjs(windowEndDate.slice(0, 19)).diff(dayjs(windowStartDate.slice(0, 19)), 'day');
        const startDatesForEachDay = [];
        for (let i = 0; i <= diffDays; i++) {
            startDatesForEachDay.push(dayjs(windowStartDate.slice(0, 19))
                .tz(hostTimezone, true)
                .add(i, 'day')
                .format());
        }
        const unfilteredWorkTimes = [];
        for (const externalAttendee of externalAttendees) {
            const workTimesForAttendee = generateWorkTimesForExternalAttendee(mainHostId, externalAttendee?.userId, modifiedAllExternalEvents, hostTimezone, externalAttendee?.timezone);
            unfilteredWorkTimes.push(...workTimesForAttendee);
        }
        const workTimes = _.uniqWith(unfilteredWorkTimes, _.isEqual);
        const unfilteredTimeslots = [];
        const timeslots = [];
        for (let i = 0; i < startDatesForEachDay.length; i++) {
            if (i === 0) {
                for (const externalAttendee of externalAttendees) {
                    const timeslotsForDay = await generateTimeSlotsLiteForExternalAttendee(startDatesForEachDay?.[i], mainHostId, modifiedAllExternalEvents, hostTimezone, externalAttendee?.timezone, true);
                    unfilteredTimeslots.push(...timeslotsForDay);
                }
                continue;
            }
            for (const externalAttendee of externalAttendees) {
                const timeslotsForDay = await generateTimeSlotsLiteForExternalAttendee(startDatesForEachDay?.[i], mainHostId, modifiedAllExternalEvents, hostTimezone, externalAttendee?.timezone, false);
                unfilteredTimeslots.push(...timeslotsForDay);
            }
        }
        timeslots.push(..._.uniqWith(unfilteredTimeslots, _.isEqual));
        console.log(timeslots, ' timeslots');
        const filteredAllEvents = _.uniqBy(modifiedAllExternalEvents.filter((e) => validateEventDatesForExternalAttendee(e)), 'id');
        let eventParts = [];
        const eventPartMinisAccumulated = [];
        for (const event of filteredAllEvents) {
            const eventPartMinis = generateEventPartsLite(event, mainHostId);
            eventPartMinisAccumulated.push(...eventPartMinis);
        }
        const modifiedEventPartMinisPreBuffer = modifyEventPartsForMultiplePreBufferTime(eventPartMinisAccumulated);
        const modifiedEventPartMinisPreAndPostBuffer = modifyEventPartsForMultiplePostBufferTime(modifiedEventPartMinisPreBuffer);
        const formattedEventParts = modifiedEventPartMinisPreAndPostBuffer.map((e) => formatEventTypeToPlannerEventForExternalAttendee(e, workTimes, filteredAllEvents, hostTimezone));
        if (formattedEventParts.length > 0) {
            eventParts.push(...formattedEventParts);
        }
        if (eventParts.length > 0) {
            eventParts.forEach((e) => console.log(e, ' eventParts after formatting'));
            const newEventPartsWithPreferredTimeSet = eventParts.map((e) => setPreferredTimeForUnModifiableEvent(e, allExternalEvents.find((f) => f.id === e.eventId)?.timezone));
            newEventPartsWithPreferredTimeSet.forEach((e) => console.log(e, ' newEventPartsWithPreferredTimeSet'));
            const newEventParts = await tagEventsForDailyOrWeeklyTask(newEventPartsWithPreferredTimeSet);
            newEventParts.forEach((e) => console.log(e, ' newEventParts after tagEventsForDailyOrWeeklyTask'));
            const userList = [];
            for (const externalAttendee of externalAttendees) {
                const userPlannerRequestBody = generateUserPlannerRequestBodyForExternalAttendee(externalAttendee?.userId, workTimes, mainHostId);
                console.log(userPlannerRequestBody, ' userPlannerRequestBody');
                userList.push(userPlannerRequestBody);
            }
            const modifiedNewEventParts = newEventParts.map((eventPart) => {
                const oldEvent = filteredAllEvents?.find((event) => event.id === eventPart.eventId);
                return {
                    groupId: eventPart?.groupId,
                    eventId: eventPart?.eventId,
                    part: eventPart?.part,
                    lastPart: eventPart?.lastPart,
                    meetingId: eventPart?.meetingId,
                    hostId: mainHostId,
                    startDate: dayjs(eventPart?.startDate.slice(0, 19))
                        .tz(oldEvent.timezone, true)
                        .tz(hostTimezone)
                        .format(),
                    endDate: dayjs(eventPart?.endDate.slice(0, 19))
                        .tz(oldEvent.timezone, true)
                        .tz(hostTimezone)
                        .format(),
                    userId: eventPart?.userId,
                    user: eventPart?.user,
                    priority: eventPart?.priority,
                    isPreEvent: eventPart?.isPreEvent,
                    isPostEvent: eventPart?.isPostEvent,
                    positiveImpactScore: eventPart?.positiveImpactScore,
                    negativeImpactScore: eventPart?.negativeImpactScore,
                    modifiable: eventPart?.modifiable,
                    isMeeting: eventPart?.isMeeting,
                    isExternalMeeting: eventPart?.isExternalMeeting,
                    isExternalMeetingModifiable: eventPart?.isExternalMeetingModifiable,
                    isMeetingModifiable: eventPart?.isMeetingModifiable,
                    dailyTaskList: eventPart?.dailyTaskList,
                    weeklyTaskList: eventPart?.weeklyTaskList,
                    gap: eventPart?.gap,
                    totalWorkingHours: eventPart?.totalWorkingHours,
                    hardDeadline: eventPart?.hardDeadline,
                    softDeadline: eventPart?.softDeadline,
                    forEventId: eventPart?.forEventId,
                    positiveImpactDayOfWeek: eventPart?.positiveImpactDayOfWeek,
                    positiveImpactTime: eventPart?.positiveImpactTime,
                    negativeImpactDayOfWeek: eventPart?.negativeImpactDayOfWeek,
                    negativeImpactTime: eventPart?.negativeImpactTime,
                    preferredDayOfWeek: eventPart?.preferredDayOfWeek,
                    preferredTime: eventPart?.preferredTime,
                    preferredStartTimeRange: eventPart?.preferredStartTimeRange,
                    preferredEndTimeRange: eventPart?.preferredEndTimeRange,
                    event: eventPart?.event,
                };
            });
            return modifiedNewEventParts?.length > 0
                ? {
                    userIds,
                    hostId: mainHostId,
                    eventParts: modifiedNewEventParts,
                    allEvents: filteredAllEvents,
                    oldAttendeeEvents: allExternalEvents,
                    timeslots,
                    userList,
                }
                : null;
        }
    }
    catch (e) {
        console.log(e, ' unable to process events for optaplanner for external attendee');
    }
};
export const optaPlanWeekly = async (timeslots, userList, eventParts, singletonId, hostId, fileKey, delay, callBackUrl) => {
    try {
        const requestBody = {
            singletonId,
            hostId,
            timeslots,
            userList,
            eventParts,
            fileKey,
            delay,
            callBackUrl,
        };
        await got
            .post(`${optaPlannerUrl}/timeTable/admin/solve-day`, {
            headers: {
                'Content-Type': 'application/json',
                Authorization: `Basic ${Buffer.from(`${optaPlannerUsername}:${optaPlannerPassword}`).toString('base64')}`,
            },
            json: requestBody,
        })
            .json();
        console.log(' optaPlanWeekly called');
    }
    catch (e) {
        console.log(e, ' optaPlanWeekly');
    }
};
export const updateFreemiumById = async (id, usage) => {
    try {
        const operationName = 'UpdateFreemiumById';
        const query = `
            mutation UpdateFreemiumById($id: uuid!, $usage: Int!) {
                update_Freemium_by_pk(pk_columns: {id: $id}, _set: {usage: $usage}) {
                    createdAt
                    id
                    period
                    updatedAt
                    usage
                    userId
                }
            }
        `;
        const variables = {
            id,
            usage,
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response, response?.data?.update_Freemium_by_pk, ' response after updating update_Freemium_by_pk');
        return response?.data?.update_Freemium_by_pk;
    }
    catch (e) {
        console.log(e, ' unable to update freemium');
    }
};
export const getFreemiumByUserId = async (userId) => {
    try {
        const operationName = 'GetFreemiumByUserId';
        const query = `
            query GetFreemiumByUserId($userId: uuid!) {
                Freemium(where: {userId: {_eq: $userId}}) {
                    createdAt
                    id
                    period
                    updatedAt
                    usage
                    userId
                }
            }
        `;
        const variables = {
            userId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res from getFreemiumByUserId ');
        return res?.data?.Freemium?.[0];
    }
    catch (e) {
        console.log(' unable to get freemium by user id');
    }
};
export const processEventsForOptaPlanner = async (mainHostId, internalAttendees, meetingEventPlus, allEvents, windowStartDate, windowEndDate, hostTimezone, oldEvents, externalAttendees, meetingAssistEvents, newHostReminders, newHostBufferTimes) => {
    try {
        const allHostEvents = allEvents.filter((e) => e.userId === mainHostId);
        const oldHostEvents = oldEvents.filter((e) => e?.userId === mainHostId);
        const hostIsInternalAttendee = internalAttendees.some((ia) => ia?.userId === mainHostId);
        let returnValuesFromInternalAttendees = {};
        let returnValuesFromHost = {};
        if (hostIsInternalAttendee) {
            returnValuesFromInternalAttendees =
                await processEventsForOptaPlannerForInternalAttendees(mainHostId, allEvents, windowStartDate, windowEndDate, hostTimezone, internalAttendees, oldEvents, meetingEventPlus, newHostReminders, newHostBufferTimes);
        }
        else {
            returnValuesFromHost = await processEventsForOptaPlannerForMainHost(mainHostId, allHostEvents, windowStartDate, windowEndDate, hostTimezone, oldHostEvents, newHostReminders, newHostBufferTimes);
        }
        const externalMeetingEventPlus = meetingEventPlus
            .map((e) => {
            const foundIndex = externalAttendees?.findIndex((a) => a?.userId === e?.userId);
            if (foundIndex > -1) {
                return e;
            }
            return null;
        })
            ?.filter((e) => e !== null);
        const returnValuesFromExternalAttendees = externalAttendees?.length > 0
            ? await processEventsForOptaPlannerForExternalAttendees(externalAttendees?.map((a) => a.userId), mainHostId, meetingAssistEvents, windowStartDate, windowEndDate, hostTimezone, externalAttendees, externalMeetingEventPlus)
            : null;
        const eventParts = [];
        const allEventsForPlanner = [];
        const breaks = [];
        const oldEventsForPlanner = [];
        const oldAttendeeEvents = [];
        const unfilteredTimeslots = [];
        const unfilteredUserList = [];
        if (!(returnValuesFromHost
            ?.eventParts?.length > 0)) {
            throw new Error('no event parts produced something went wrong in optaplanner');
        }
        if (returnValuesFromHost
            ?.eventParts?.length > 0) {
            eventParts.push(...returnValuesFromHost
                ?.eventParts);
        }
        if (allHostEvents?.length > 0) {
            allEventsForPlanner.push(...allHostEvents);
        }
        if (returnValuesFromHost?.breaks
            ?.length > 0) {
            breaks.push(...returnValuesFromHost
                ?.breaks);
        }
        if (returnValuesFromHost
            ?.oldEvents?.length > 0) {
            oldEventsForPlanner.push(...returnValuesFromHost
                ?.oldEvents);
        }
        if (returnValuesFromHost
            ?.timeslots?.length > 0) {
            unfilteredTimeslots.push(...returnValuesFromHost
                ?.timeslots);
        }
        if (returnValuesFromHost
            ?.userPlannerRequestBody?.id) {
            unfilteredUserList.push(returnValuesFromHost
                ?.userPlannerRequestBody);
        }
        if (returnValuesFromInternalAttendees?.userList?.[0]?.id) {
            unfilteredUserList.push(...returnValuesFromInternalAttendees?.userList);
        }
        if (returnValuesFromInternalAttendees?.eventParts?.length > 0) {
            eventParts.push(...returnValuesFromInternalAttendees?.eventParts);
        }
        if (returnValuesFromInternalAttendees?.allEvents?.length > 0) {
            allEventsForPlanner.push(...returnValuesFromInternalAttendees?.allEvents);
        }
        if (returnValuesFromInternalAttendees?.oldEvents?.length > 0) {
            oldEventsForPlanner.push(...returnValuesFromInternalAttendees?.oldEvents);
        }
        if (returnValuesFromInternalAttendees?.timeslots?.length > 0) {
            unfilteredTimeslots.push(...returnValuesFromInternalAttendees?.timeslots);
        }
        if (returnValuesFromExternalAttendees?.eventParts?.length > 0) {
            eventParts.push(...returnValuesFromExternalAttendees?.eventParts);
        }
        if (returnValuesFromExternalAttendees?.allEvents?.length > 0) {
            allEventsForPlanner.push(...returnValuesFromExternalAttendees?.allEvents);
        }
        if (returnValuesFromExternalAttendees?.oldAttendeeEvents?.length > 0) {
            oldAttendeeEvents.push(...returnValuesFromExternalAttendees?.oldAttendeeEvents);
        }
        if (returnValuesFromExternalAttendees?.timeslots?.length > 0) {
            unfilteredTimeslots.push(...returnValuesFromExternalAttendees?.timeslots);
        }
        if (returnValuesFromExternalAttendees?.userList?.length > 0) {
            unfilteredUserList.push(...returnValuesFromExternalAttendees?.userList);
        }
        const duplicateFreeEventParts = _.uniqWith(eventParts, _.isEqual);
        const duplicateFreeAllEvents = _.uniqWith(allEventsForPlanner, _.isEqual);
        const duplicateFreeBreaks = _.uniqWith(breaks, _.isEqual);
        const duplicateFreeOldEvents = _.uniqWith(oldEvents, _.isEqual);
        const duplicateFreeOldAttendeeEvents = _.uniqWith(oldAttendeeEvents, _.isEqual);
        const duplicateFreeTimeslots = _.uniqWith(unfilteredTimeslots, _.isEqual);
        const singletonId = uuid();
        if (!duplicateFreeEventParts || duplicateFreeEventParts?.length === 0) {
            throw new Error('Event Parts length is 0 or do not exist');
        }
        const params = {
            Body: JSON.stringify({
                singletonId,
                hostId: mainHostId,
                eventParts: duplicateFreeEventParts,
                allEvents: duplicateFreeAllEvents,
                breaks: duplicateFreeBreaks,
                oldEvents: duplicateFreeOldEvents,
                oldAttendeeEvents: duplicateFreeOldAttendeeEvents,
                newHostReminders,
                newHostBufferTimes,
            }),
            Bucket: bucketName,
            Key: `${mainHostId}/${singletonId}.json`,
            ContentType: 'application/json',
        };
        const s3Command = new PutObjectCommand(params);
        const s3Response = await s3Client.send(s3Command);
        console.log(s3Response, ' s3Response');
        await optaPlanWeekly(duplicateFreeTimeslots, unfilteredUserList, duplicateFreeEventParts, singletonId, mainHostId, `${mainHostId}/${singletonId}.json`, optaplannerDuration, onOptaPlanCalendarAdminCallBackUrl);
        console.log('optaplanner request sent');
    }
    catch (e) {
        console.log(e, ' unable to process events for optaplanner');
    }
};
export const getUserCategories = async (userId) => {
    try {
        const operationName = 'getUserCategories';
        const query = `
      query getUserCategories($userId: uuid!) {
        Category(where: {userId: {_eq: $userId}}) {
          name
          userId
          copyAvailability
          copyTimeBlocking
          copyTimePreference
          copyReminders
          copyPriorityLevel
          copyModifiable
          defaultAvailability
          defaultTimeBlocking
          defaultTimePreference
          defaultReminders
          defaultPriorityLevel
          defaultModifiable
          copyIsBreak
          color
          deleted
          id
          updatedAt
        }
      }
    `;
        const variables = {
            userId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            json: {
                operationName,
                query,
                variables,
            },
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
        })
            .json();
        return res?.data?.Category;
    }
    catch (e) {
        console.log(e, ' unable to get user categories');
    }
};
export const findBestMatchCategory2 = async (event, possibleLabels) => {
    try {
        if (!event) {
            throw new Error('no event passed inside findBestMatchCategory2');
        }
        if (!possibleLabels) {
            throw new Error('no possible labels passed inside findBestMatchCategory2');
        }
        const { summary, notes } = event;
        const sentence = `${summary}${notes ? `: ${notes}` : ''}`;
        const labelNames = possibleLabels.map((a) => a?.name);
        const systemPrompt = 'You are an expert event categorizer. Given an event description and a list of possible categories, return a JSON array string containing only the names of the categories that directly apply to the event. Do not provide any explanation, only the JSON array string.';
        const userPrompt = `Event: "${sentence}"
Categories: ${JSON.stringify(labelNames)}`;
        try {
            const completion = await openai.chat.completions.create({
                model: 'gpt-3.5-turbo', // Using string directly as openAIChatGPTModel is not available here
                messages: [
                    { role: 'system', content: systemPrompt },
                    { role: 'user', content: userPrompt },
                ],
                temperature: 0.2,
            });
            const llmResponseString = completion.choices[0]?.message?.content;
            let matchedLabels = [];
            if (llmResponseString) {
                try {
                    matchedLabels = JSON.parse(llmResponseString);
                    if (!Array.isArray(matchedLabels) ||
                        !matchedLabels.every((item) => typeof item === 'string')) {
                        console.error('LLM response is not a valid JSON array of strings:', llmResponseString);
                        matchedLabels = []; // Fallback to empty if not a string array
                    }
                }
                catch (parseError) {
                    console.error('Error parsing LLM response:', parseError, llmResponseString);
                    // Fallback: attempt to extract labels if it's a simple list not in JSON array format
                    if (typeof llmResponseString === 'string') {
                        matchedLabels = labelNames.filter((label) => llmResponseString.includes(label));
                    }
                    else {
                        matchedLabels = [];
                    }
                }
            }
            else {
                console.error('LLM response content is null or undefined.');
                matchedLabels = [];
            }
            const scores = labelNames.map((label) => matchedLabels.includes(label) ? 0.9 : 0.1);
            const result = {
                labels: labelNames,
                scores,
                sentence,
            };
            console.log(result, event?.id, ' result, event?.id inside findBestMatchCategory2 with OpenAI');
            return result;
        }
        catch (apiError) {
            console.error('Error calling OpenAI API or processing its response:', apiError);
            // Fallback to low scores for all categories in case of API error
            const scores = labelNames.map(() => 0.1);
            const errorResult = {
                labels: labelNames,
                scores,
                sentence,
            };
            return errorResult;
        }
    }
    catch (e) {
        // This outer catch block handles errors from the initial validation steps
        console.log(e, ' initial error in findBestMatchCategory2');
        // Optionally rethrow or return a specific error response
        throw e; // Re-throwing the original error if it's from pre-API call logic
    }
};
export const processBestMatchCategories = (body, newPossibleLabels) => {
    const { scores } = body;
    let bestMatchCategory = '';
    let bestMatchScore = 0;
    for (let i = 0; i < newPossibleLabels.length; i++) {
        const label = newPossibleLabels[i];
        const score = scores[i];
        if (score > minThresholdScore) {
            if (score > bestMatchScore) {
                bestMatchCategory = label;
                bestMatchScore = score;
            }
        }
    }
    return bestMatchCategory;
};
const addToBestMatchCategories = (newEvent, newPossibleLabels, scores, categories) => {
    const bestMatchCategories = [];
    const meetingIndex = newPossibleLabels.indexOf(meetingLabel);
    const externalMeetingIndex = newPossibleLabels.indexOf(externalMeetingLabel);
    if (meetingIndex > -1 && scores[meetingIndex] > minThresholdScore) {
        bestMatchCategories.push(categories?.find((category) => category.name === meetingLabel));
    }
    if (externalMeetingIndex > -1 &&
        scores[externalMeetingIndex] > minThresholdScore) {
        bestMatchCategories.push(categories?.find((category) => category.name === externalMeetingLabel));
    }
    if (newEvent.isMeeting && meetingIndex > -1) {
        bestMatchCategories.push(categories?.find((category) => category.name === meetingLabel));
    }
    if (newEvent.isExternalMeeting && externalMeetingIndex > -1) {
        bestMatchCategories.push(categories?.find((category) => category.name === externalMeetingLabel));
    }
    return bestMatchCategories;
};
export const processEventForMeetingTypeCategories = (newEvent, bestMatchCategory, newPossibleLabels, scores, categories) => {
    const bestMatchCategories = addToBestMatchCategories(newEvent, newPossibleLabels, scores, categories);
    if (bestMatchCategories?.length > 0) {
        return bestMatchCategories.concat([bestMatchCategory]);
    }
    return [bestMatchCategory];
};
export const getUniqueLabels = (labels) => {
    const uniqueLabels = _.uniqBy(labels, 'id');
    return uniqueLabels;
};
export const copyOverCategoryDefaults = (event, category) => {
    return {
        ...event,
        transparency: !event?.userModifiedAvailability
            ? category?.defaultAvailability
                ? 'transparent'
                : 'opaque'
            : event.transparency,
        priority: (!event?.userModifiedPriorityLevel
            ? category?.defaultPriorityLevel
            : event?.priority) || 1,
        modifiable: !event?.userModifiedModifiable
            ? category?.defaultModifiable
            : event.modifiable,
        isBreak: !event?.userModifiedIsBreak
            ? category?.defaultIsBreak
            : event.isBreak,
        isMeeting: !event?.userModifiedIsMeeting
            ? category?.defaultIsMeeting
            : category?.name === meetingLabel
                ? true
                : event.isMeeting,
        isExternalMeeting: !event?.userModifiedIsExternalMeeting
            ? category?.defaultIsExternalMeeting
            : category?.name === externalMeetingLabel
                ? true
                : event.isExternalMeeting,
        isMeetingModifiable: !event?.userModifiedModifiable
            ? category?.defaultMeetingModifiable
            : event.isMeetingModifiable,
        isExternalMeetingModifiable: !event?.userModifiedModifiable
            ? category?.defaultExternalMeetingModifiable
            : event.isExternalMeetingModifiable,
        backgroundColor: !event?.userModifiedColor
            ? category?.color
            : event.backgroundColor,
        preferredTimeRanges: !event?.userModifiedTimePreference &&
            category?.defaultTimePreference?.length > 0
            ? category?.defaultTimePreference?.map((tp) => ({
                ...tp,
                id: uuid(),
                eventId: event?.id,
                createdDate: dayjs().toISOString(),
                updatedAt: dayjs().toISOString(),
                userId: event?.userId,
            }))
            : event.preferredTimeRanges,
    };
};
export const createRemindersAndTimeBlockingForBestMatchCategory = async (id, userId, newEvent, bestMatchCategory, newReminders1, newTimeBlocking1, previousEvent) => {
    try {
        if (!bestMatchCategory?.id) {
            throw new Error('bestMatchCategory is required');
        }
        if (!newEvent?.id) {
            throw new Error('newEvent is required');
        }
        if (!id) {
            throw new Error('id is required');
        }
        if (!userId) {
            throw new Error('userId is required');
        }
        let newTimeBlocking = newTimeBlocking1 || {};
        let newReminders = newReminders1 || [];
        const oldReminders = await listRemindersForEvent(id, userId);
        const reminders = createRemindersUsingCategoryDefaultsForEvent(newEvent, bestMatchCategory, oldReminders, previousEvent);
        console.log(reminders, ' reminders');
        if (reminders?.length > 0 &&
            bestMatchCategory?.copyReminders &&
            !newEvent?.userModifiedReminders) {
            newReminders.push(...reminders);
        }
        if (!newEvent?.userModifiedTimeBlocking &&
            bestMatchCategory?.copyTimeBlocking) {
            const timeBlocking = createPreAndPostEventsForCategoryDefaults(bestMatchCategory, newEvent, previousEvent);
            console.log(timeBlocking, ' timeBlocking');
            if (timeBlocking?.beforeEvent) {
                newTimeBlocking.beforeEvent =
                    timeBlocking.beforeEvent;
            }
            if (timeBlocking?.afterEvent) {
                newTimeBlocking.afterEvent =
                    timeBlocking.afterEvent;
            }
            if (timeBlocking?.newEvent?.preEventId ||
                timeBlocking?.newEvent?.postEventId) {
                newEvent = timeBlocking.newEvent;
            }
        }
        return { newEvent, newReminders, newTimeBlocking };
    }
    catch (e) {
        console.log(e, ' unable to create reminders and time blocking for best match category');
    }
};
export const createCategoryEvents = async (categoryEvents) => {
    try {
        for (const categoryEvent of categoryEvents) {
            const variables = {
                categoryId: categoryEvent?.categoryId,
                eventId: categoryEvent?.eventId,
            };
            const operationName = 'ConnectionByCategoryIdAndEventId';
            const query = `
        query ConnectionByCategoryIdAndEventId($categoryId: uuid!, $eventId: String!) {
          Category_Event(where: {categoryId: {_eq: $categoryId}, eventId: {_eq: $eventId}}) {
            createdDate
            categoryId
            deleted
            eventId
            id
            updatedAt
            userId
          }
        }

      `;
            const res = await got
                .post(hasuraGraphUrl, {
                headers: {
                    'X-Hasura-Admin-Secret': hasuraAdminSecret,
                    'X-Hasura-Role': 'admin',
                },
                json: {
                    operationName,
                    query,
                    variables,
                },
            })
                .json();
            if (!res?.data?.Category_Event?.[0]) {
                const variables2 = {
                    id: categoryEvent.id,
                    categoryId: categoryEvent?.categoryId,
                    eventId: categoryEvent?.eventId,
                    createdDate: categoryEvent?.createdDate,
                    updatedAt: categoryEvent?.updatedAt,
                    userId: categoryEvent?.userId,
                };
                const operationName2 = 'InsertCategory_Event';
                const query2 = `
          mutation InsertCategory_Event($id: uuid!, $categoryId: uuid!, $createdDate: timestamptz, $eventId: String!, $updatedAt: timestamptz, $userId: uuid!) {
            insert_Category_Event_one(object: {categoryId: $categoryId, createdDate: $createdDate, deleted: false, eventId: $eventId, id: $id, updatedAt: $updatedAt, userId: $userId}) {
              categoryId
              createdDate
              deleted
              eventId
              id
              updatedAt
              userId
            }
          }
        `;
                const res2 = await got
                    .post(hasuraGraphUrl, {
                    headers: {
                        'X-Hasura-Admin-Secret': hasuraAdminSecret,
                        'X-Hasura-Role': 'admin',
                    },
                    json: {
                        operationName: operationName2,
                        query: query2,
                        variables: variables2,
                    },
                })
                    .json();
                console.log(res2, ' response after inserting category event');
            }
        }
    }
    catch (e) {
        console.log(e, ' unable to upsert category events');
    }
};
const copyOverCategoryDefaultsForMeetingType = (event, categories) => {
    const meetingCategory = categories?.find((category) => category.name === meetingLabel);
    const externalCategory = categories?.find((category) => category.name === externalMeetingLabel);
    let newEventMeeting = null;
    let newEventExternal = null;
    if (meetingCategory?.id) {
        newEventMeeting = copyOverCategoryDefaults(event, meetingCategory);
    }
    if (externalCategory?.id) {
        newEventExternal = copyOverCategoryDefaults(event, externalCategory);
    }
    return { newEventMeeting, newEventExternal };
};
export const listRemindersForEvent = async (eventId, userId) => {
    try {
        if (!eventId) {
            console.log(eventId, ' no eventId present inside listRemindersForEvent');
            return;
        }
        if (!userId) {
            console.log(userId, ' no userId present inside listRemindersForEvent');
            return;
        }
        console.log(' listRemindersForEvent called');
        const operationName = 'listRemindersForEvent';
        const query = `
    query listRemindersForEvent($userId: uuid!, $eventId: String!) {
      Reminder(where: {userId: {_eq: $userId}, eventId: {_eq: $eventId}, deleted: {_neq: true}}) {
        eventId
        id
        minutes
        reminderDate
        timezone
        updatedAt
        useDefault
        userId
        deleted
        createdDate
      }
    }
  `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    userId,
                    eventId,
                },
            },
        })
            .json();
        console.log(res, ' res from listRemindersForEvent');
        return res?.data?.Reminder;
    }
    catch (e) {
        console.log(e, ' listRemindersForEvent');
    }
};
export const createRemindersUsingCategoryDefaultsForEvent = (event, bestMatchCategory, oldReminders, previousEvent) => {
    if (event.userModifiedReminders) {
        return null;
    }
    if (previousEvent?.copyReminders) {
        return null;
    }
    if (previousEvent?.id && bestMatchCategory?.copyReminders) {
        return null;
    }
    const reminders = bestMatchCategory?.defaultReminders;
    if (!(reminders?.length > 0)) {
        return oldReminders;
    }
    const newReminders = [];
    reminders.forEach((reminder) => {
        newReminders.push({
            id: uuid(),
            minutes: reminder,
            eventId: event.id,
            userId: event.userId,
            updatedAt: dayjs().toISOString(),
            createdDate: dayjs().toISOString(),
            deleted: false,
        });
    });
    return newReminders;
};
export const createPreAndPostEventsForCategoryDefaults = (bestMatchCategory, event, previousEvent) => {
    if (previousEvent?.copyTimeBlocking) {
        return null;
    }
    if (previousEvent?.id && bestMatchCategory?.copyTimeBlocking) {
        return null;
    }
    if (event?.userModifiedTimeBlocking) {
        return null;
    }
    const eventId = uuid();
    const eventId1 = uuid();
    const preEventId = event?.preEventId || `${eventId}#${event?.calendarId}`;
    const postEventId = event?.postEventId || `${eventId1}#${event?.calendarId}`;
    let valuesToReturn = {};
    valuesToReturn.newEvent = event;
    if (bestMatchCategory?.defaultTimeBlocking?.afterEvent) {
        const formattedZoneAfterEventEndDate = dayjs(event.endDate.slice(0, 19))
            .tz(event?.timezone, true)
            .add(bestMatchCategory.defaultTimeBlocking.afterEvent, 'm')
            .format();
        const formattedZoneAfterEventStartDate = dayjs(event.endDate.slice(0, 19))
            .tz(event?.timezone, true)
            .format();
        const afterEvent = {
            id: postEventId,
            isPreEvent: false,
            forEventId: event.id,
            isPostEvent: true,
            notes: 'Buffer time',
            summary: 'Buffer time',
            startDate: formattedZoneAfterEventStartDate,
            endDate: formattedZoneAfterEventEndDate,
            method: event?.postEventId ? 'update' : 'create',
            userId: event?.userId,
            createdDate: dayjs().toISOString(),
            deleted: false,
            priority: 1,
            isFollowUp: false,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            updatedAt: dayjs().toISOString(),
            calendarId: event?.calendarId,
            timezone: event?.timezone,
            eventId: postEventId.split('#')[0],
        };
        valuesToReturn.afterEvent = afterEvent;
        valuesToReturn.newEvent = {
            ...valuesToReturn.newEvent,
            postEventId,
            timeBlocking: {
                ...valuesToReturn?.newEvent?.timeBlocking,
                afterEvent: bestMatchCategory.defaultTimeBlocking.afterEvent,
            },
        };
    }
    if (bestMatchCategory?.defaultTimeBlocking?.beforeEvent) {
        const formattedZoneBeforeEventStartDate = dayjs(event.startDate.slice(0, 19))
            .tz(event.timezone, true)
            .subtract(bestMatchCategory.defaultTimeBlocking.beforeEvent, 'm')
            .format();
        const formattedZoneBeforeEventEndDate = dayjs(event.startDate.slice(0, 19))
            .tz(event.timezone, true)
            .format();
        const beforeEvent = {
            id: preEventId,
            isPreEvent: true,
            isPostEvent: false,
            forEventId: event.id,
            notes: 'Buffer time',
            summary: 'Buffer time',
            startDate: formattedZoneBeforeEventStartDate,
            endDate: formattedZoneBeforeEventEndDate,
            method: event?.preEventId ? 'update' : 'create',
            userId: event?.userId,
            createdDate: dayjs().toISOString(),
            deleted: false,
            priority: 1,
            isFollowUp: false,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            updatedAt: dayjs().toISOString(),
            calendarId: event?.calendarId,
            timezone: event?.timezone,
            eventId: preEventId.split('#')[0],
        };
        valuesToReturn.beforeEvent = beforeEvent;
        valuesToReturn.newEvent = {
            ...valuesToReturn.newEvent,
            preEventId,
            timeBlocking: {
                ...valuesToReturn?.newEvent?.timeBlocking,
                beforeEvent: bestMatchCategory.defaultTimeBlocking.beforeEvent,
            },
        };
    }
    return valuesToReturn;
};
export const updateValuesForMeetingTypeCategories = async (event, newEvent1, bestMatchCategories, userId, newReminders1, newTimeBlocking1, previousEvent) => {
    try {
        if (!(bestMatchCategories?.length > 0)) {
            throw new Error('bestMatchCategories cannot be empty inside updateValuesForMeetingTypeCategories ');
        }
        let newEvent = newEvent1;
        let newReminders = newReminders1 || [];
        let newBufferTime = newTimeBlocking1 || {};
        const newCategoryConstantEvents = copyOverCategoryDefaultsForMeetingType(event, bestMatchCategories);
        console.log(newCategoryConstantEvents, ' newCategoryConstantEvents');
        if (newCategoryConstantEvents?.newEventMeeting?.id) {
            newEvent = { ...newEvent, ...newCategoryConstantEvents.newEventMeeting };
            const meetingCategory = bestMatchCategories?.find((category) => category.name === meetingLabel);
            const oldReminders = await listRemindersForEvent(newCategoryConstantEvents.newEventMeeting.id, userId);
            const reminders = createRemindersUsingCategoryDefaultsForEvent(newEvent, meetingCategory, oldReminders, previousEvent);
            console.log(reminders, ' reminders');
            if (reminders?.length > 0) {
                newReminders.push(...reminders);
                newReminders = _.uniqBy(newReminders, 'minutes');
            }
            const bufferTime = createPreAndPostEventsForCategoryDefaults(meetingCategory, newEvent, previousEvent);
            console.log(bufferTime, ' timeBlocking');
            if (bufferTime?.beforeEvent) {
                newBufferTime.beforeEvent = bufferTime.beforeEvent;
            }
            if (bufferTime?.afterEvent) {
                newBufferTime.afterEvent = bufferTime.afterEvent;
            }
            if (bufferTime?.newEvent?.preEventId ||
                bufferTime?.newEvent?.postEventId) {
                newEvent = bufferTime.newEvent;
            }
        }
        if (newCategoryConstantEvents?.newEventExternal?.id) {
            newEvent = { ...newEvent, ...newCategoryConstantEvents.newEventExternal };
            const externalCategory = bestMatchCategories?.find((category) => category.name === externalMeetingLabel);
            const oldReminders = await listRemindersForEvent(newCategoryConstantEvents.newEventExternal.id, userId);
            const reminders = createRemindersUsingCategoryDefaultsForEvent(newEvent, externalCategory, oldReminders, previousEvent);
            console.log(reminders, ' reminders');
            if (reminders?.length > 0) {
                newReminders.push(...reminders);
                newReminders = _.uniqBy(newReminders, 'minutes');
            }
            const timeBlocking = createPreAndPostEventsForCategoryDefaults(externalCategory, newEvent, previousEvent);
            console.log(timeBlocking, ' timeBlocking');
            if (timeBlocking?.beforeEvent) {
                newBufferTime.beforeEvent = timeBlocking.beforeEvent;
            }
            if (timeBlocking?.afterEvent) {
                newBufferTime.afterEvent = timeBlocking.afterEvent;
            }
            if (timeBlocking?.newEvent?.preEventId ||
                timeBlocking?.newEvent?.postEventId) {
                newEvent = timeBlocking.newEvent;
            }
        }
        return { newEvent, newReminders, newTimeBlocking: newBufferTime };
    }
    catch (e) {
        console.log(e, ' unable to update values for default categories');
    }
};
export const processUserEventForCategoryDefaults = async (event, vector) => {
    try {
        const { id, userId } = event;
        console.log(id, ' id inside processUserEventForCategoryDefaults');
        const categories = await getUserCategories(userId);
        if (!categories?.[0]?.id) {
            throw new Error('categories is not available processUserEventForCategoryDefaults');
        }
        console.log(categories, id, ' categories, id processUserEventForCategoryDefaults');
        const body = await findBestMatchCategory2(event, categories);
        console.log(body, id, ' body, id processUserEventForCategoryDefaults');
        const { labels, scores } = body;
        const bestMatchLabel = processBestMatchCategories(body, labels);
        console.log(bestMatchLabel, id, ' bestMatchLabel, id processUserEventForCategoryDefaults');
        if (bestMatchLabel) {
            const bestMatchCategory = categories?.find((category) => category.name === bestMatchLabel);
            let bestMatchPlusMeetingCategories = await processEventForMeetingTypeCategories(event, bestMatchCategory, labels, scores, categories);
            if (bestMatchPlusMeetingCategories?.length > 0) {
                bestMatchPlusMeetingCategories = getUniqueLabels(bestMatchPlusMeetingCategories);
                console.log(bestMatchPlusMeetingCategories, id, ' bestMatchAndMeetingCategories, id processUserEventForCategoryDefaults');
            }
            const newCategoryDefaultEvent = copyOverCategoryDefaults(event, bestMatchCategory);
            console.log(newCategoryDefaultEvent, id, ' newCategoryDefaultEvent, id processUserEventForCategoryDefaults');
            let newEvent = newCategoryDefaultEvent ?? event;
            console.log(newEvent, ' newEvent processUserEventForCategoryDefaults');
            let newReminders = [];
            let newTimeBlocking = {};
            const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingForBestMatchCategory(id, userId, newEvent, bestMatchCategory, newReminders, newTimeBlocking);
            newEvent = newEvent1;
            newReminders = newReminders1;
            newTimeBlocking = newTimeBlocking1;
            if (bestMatchPlusMeetingCategories?.length > 0) {
                const categoryEvents = bestMatchPlusMeetingCategories.map((c) => {
                    const categoryEvent = {
                        categoryId: c.id,
                        eventId: id,
                        userId,
                        id: uuid(),
                        createdDate: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                    };
                    return categoryEvent;
                });
                console.log(categoryEvents, id, ' categoryEvents, id processUserEventForCategoryDefaults');
                await createCategoryEvents(categoryEvents);
                const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await updateValuesForMeetingTypeCategories(event, newEvent, bestMatchPlusMeetingCategories, userId, newReminders, newTimeBlocking);
                newEvent = newEvent1;
                newReminders = newReminders1;
                newTimeBlocking = newTimeBlocking1;
            }
            newEvent.vector = vector;
            console.log(newEvent, ' newEvent processUserEventForCategoryDefaults');
            console.log(newReminders, ' newReminders processUserEventForCategoryDefaults');
            console.log(newTimeBlocking, ' newTimeBlocking processUserEventForCategoryDefaults');
            return {
                newEvent,
                newReminders,
                newTimeBlocking,
            };
        }
        event.vector = vector;
        return {
            newEvent: event,
        };
    }
    catch (e) {
        console.log(e, ' e');
    }
};
export const listCategoriesForEvent = async (eventId) => {
    try {
        console.log(eventId, ' eventId inside listCategoriesForEvent');
        const operationName = 'listCategoriesForEvent';
        const query = `
      query listCategoriesForEvent($eventId: String!) {
        Category_Event(where: {eventId: {_eq: $eventId}}) {
          Category {
            color
            copyAvailability
            copyIsBreak
            copyIsExternalMeeting
            copyIsMeeting
            copyModifiable
            copyPriorityLevel
            copyReminders
            copyTimeBlocking
            copyTimePreference
            createdDate
            defaultAvailability
            defaultExternalMeetingModifiable
            defaultIsBreak
            defaultIsExternalMeeting
            defaultIsMeeting
            defaultMeetingModifiable
            defaultModifiable
            defaultPriorityLevel
            defaultReminders
            defaultTimeBlocking
            defaultTimePreference
            deleted
            id
            name
            updatedAt
            userId
          }
          categoryId
          createdDate
          deleted
          eventId
          id
          updatedAt
          userId
        }
      }
    `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    eventId,
                },
            },
        })
            .json();
        console.log(res, ' listCategoriesForEvent');
        const categories = res?.data?.Category_Event?.map((category) => category?.Category)?.filter((category) => category?.id !== null);
        console.log(categories, ' categories from listCategoriesForEvent after filter');
        return categories;
    }
    catch (e) {
        console.log(e, ' unable to listCategoriesForEvent');
    }
};
export const processBestMatchCategoriesNoThreshold = (body, newPossibleLabels) => {
    const { scores } = body;
    let bestMatchCategory = '';
    let bestMatchScore = 0;
    for (let i = 0; i < newPossibleLabels.length; i++) {
        const label = newPossibleLabels[i];
        const score = scores[i];
        if (score > bestMatchScore) {
            bestMatchCategory = label;
            bestMatchScore = score;
        }
    }
    return bestMatchCategory;
};
export const processUserEventForCategoryDefaultsWithUserModifiedCategories = async (event, vector) => {
    try {
        const { id, userId } = event;
        console.log(id, userId, ' id, userId inside processUserEventForCategoryDefaultsWithUserModifiedCategories');
        const categories = await listCategoriesForEvent(event?.id);
        console.log(categories, ' categories');
        const body = await findBestMatchCategory2(event, categories);
        console.log(body, ' body');
        const { labels, scores } = body;
        const bestMatchLabel = processBestMatchCategoriesNoThreshold(body, labels);
        console.log(bestMatchLabel, ' bestMatchLabel');
        let bestMatchCategory = null;
        let newEvent = event;
        console.log(newEvent, ' newEvent');
        let newReminders = [];
        let newTimeBlocking = {};
        if (bestMatchLabel) {
            bestMatchCategory = categories.find((category) => category.name === bestMatchLabel);
            labels.push(meetingLabel, externalMeetingLabel);
            scores.push(0, 0);
            let bestMatchPlusMeetingCategories = processEventForMeetingTypeCategories(event, bestMatchCategory, labels, scores, categories);
            if (bestMatchPlusMeetingCategories?.length > 0) {
                bestMatchPlusMeetingCategories = getUniqueLabels(bestMatchPlusMeetingCategories);
                console.log(bestMatchPlusMeetingCategories, ' bestMatchAndMeetingCategories');
                const categoryEvents = bestMatchPlusMeetingCategories.map((c) => {
                    const categoryEvent = {
                        categoryId: c.id,
                        eventId: id,
                        userId,
                        id: uuid(),
                        createdDate: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                    };
                    return categoryEvent;
                });
                console.log(categoryEvents, ' categoryEvents');
                await createCategoryEvents(categoryEvents);
                const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await updateValuesForMeetingTypeCategories(event, newEvent, bestMatchPlusMeetingCategories, userId, newReminders, newTimeBlocking);
                newEvent = newEvent1;
                newReminders = newReminders1;
                newTimeBlocking = newTimeBlocking1;
            }
        }
        let newCategoryDefaultEvent = null;
        if (bestMatchCategory) {
            newCategoryDefaultEvent = copyOverCategoryDefaults(event, bestMatchCategory);
        }
        console.log(newCategoryDefaultEvent, ' newCategoryDefaultEvent');
        newEvent = newCategoryDefaultEvent ?? newEvent ?? event;
        console.log(newEvent, ' newEvent');
        const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingForBestMatchCategory(id, userId, newEvent, bestMatchCategory, newReminders, newTimeBlocking);
        newEvent = newEvent1;
        newReminders = newReminders1;
        newTimeBlocking = newTimeBlocking1;
        if (categories?.length > 1) {
            const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await updateValuesForMeetingTypeCategories(event, newEvent, categories, userId, newReminders, newTimeBlocking);
            newEvent = newEvent1;
            newReminders = newReminders1;
            newTimeBlocking = newTimeBlocking1;
        }
        newEvent.vector = vector;
        console.log(newEvent, ' newEvent');
        console.log(newReminders, ' newReminders');
        console.log(newTimeBlocking, ' newTimeBlocking');
        return {
            newEvent,
            newReminders,
            newTimeBlocking,
        };
    }
    catch (e) {
        console.log(e, ' e');
    }
};
export const getEventFromPrimaryKey = async (eventId) => {
    try {
        const operationName = 'getEventFromPrimaryKey';
        const query = `
        query getEventFromPrimaryKey($eventId: String!) {
            Event_by_pk(id: $eventId) {
              allDay
              anyoneCanAddSelf
              attachments
              attendeesOmitted
              backgroundColor
              calendarId
              colorId
              conferenceId
              copyAvailability
              copyCategories
              copyDuration
              copyIsBreak
              copyIsExternalMeeting
              copyIsMeeting
              copyModifiable
              copyPriorityLevel
              copyReminders
              copyTimeBlocking
              copyTimePreference
              createdDate
              creator
              dailyTaskList
              deleted
              duration
              endDate
              endTimeUnspecified
              eventId
              eventType
              extendedProperties
              followUpEventId
              forEventId
              foregroundColor
              guestsCanInviteOthers
              guestsCanModify
              guestsCanSeeOtherGuests
              hangoutLink
              hardDeadline
              htmlLink
              iCalUID
              id
              isBreak
              isExternalMeeting
              isExternalMeetingModifiable
              isFollowUp
              isMeeting
              isMeetingModifiable
              isPostEvent
              isPreEvent
              links
              location
              locked
              maxAttendees
              method
              modifiable
              negativeImpactDayOfWeek
              negativeImpactScore
              negativeImpactTime
              notes
              organizer
              originalAllDay
              originalStartDate
              originalTimezone
              positiveImpactDayOfWeek
              positiveImpactScore
              positiveImpactTime
              postEventId
              preEventId
              preferredDayOfWeek
              preferredEndTimeRange
              preferredStartTimeRange
              preferredTime
              priority
              privateCopy
              recurrence
              recurrenceRule
              recurringEventId
              sendUpdates
              softDeadline
              source
              startDate
              status
              summary
              taskId
              taskType
              timeBlocking
              timezone
              title
              transparency
              unlink
              updatedAt
              useDefaultAlarms
              userId
              userModifiedAvailability
              userModifiedCategories
              userModifiedDuration
              userModifiedIsBreak
              userModifiedIsExternalMeeting
              userModifiedIsMeeting
              userModifiedModifiable
              userModifiedPriorityLevel
              userModifiedReminders
              userModifiedTimeBlocking
              userModifiedTimePreference
              visibility
              weeklyTaskList
              byWeekDay
              localSynced
              userModifiedColor
              copyColor
              meetingId
              copyExternalMeetingModifiable
              copyMeetingModifiable
              userModifiedExternalMeetingModifiable
              userModifiedMeetingModifiable
            }
          }
  `;
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables: {
                    eventId,
                },
            },
        })
            .json();
        console.log(res, ' res from getEventFromPrimaryKey');
        return res?.data?.Event_by_pk;
    }
    catch (e) {
        console.log(e, ' getEventFromPrimaryKey');
    }
};
export const deleteDocInSearch3 = async (id) => {
    try {
        const client = await getSearchClient();
        const response = await client.delete({
            id,
            index: searchIndex,
        });
        console.log('Deleting document in search:');
        console.log(response.body);
    }
    catch (e) {
        console.log(e, ' unable to delete doc');
    }
};
export const copyOverPreviousEventDefaults = (event, previousEvent, category, userPreferences) => {
    const previousDuration = dayjs
        .duration(dayjs(previousEvent.endDate.slice(0, 19))
        .tz(previousEvent?.timezone, true)
        .diff(dayjs(previousEvent.startDate.slice(0, 19)).tz(previousEvent?.timezone, true)))
        .asMinutes();
    return {
        ...event,
        transparency: !event?.userModifiedAvailability
            ? previousEvent?.copyAvailability
                ? previousEvent.transparency
                : category?.copyAvailability
                    ? previousEvent?.transparency
                    : category?.defaultAvailability
                        ? 'transparent'
                        : userPreferences?.copyAvailability
                            ? previousEvent?.transparency
                            : event?.transparency
            : event.transparency,
        preferredTime: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference && previousEvent?.preferredTime
                ? previousEvent.preferredTime
                : category?.copyTimePreference && previousEvent?.preferredTime
                    ? previousEvent?.preferredTime
                    : userPreferences?.copyTimePreference && previousEvent?.preferredTime
                        ? previousEvent?.preferredTime
                        : event?.preferredTime
            : event.preferredTime,
        preferredDayOfWeek: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference && previousEvent?.preferredDayOfWeek
                ? previousEvent.preferredDayOfWeek
                : category?.copyTimePreference && previousEvent?.preferredDayOfWeek
                    ? previousEvent?.preferredDayOfWeek
                    : userPreferences?.copyTimePreference &&
                        previousEvent?.preferredDayOfWeek
                        ? previousEvent?.preferredDayOfWeek
                        : event?.preferredDayOfWeek
            : event.preferredDayOfWeek,
        preferredStartTimeRange: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference &&
                previousEvent?.preferredStartTimeRange
                ? previousEvent.preferredStartTimeRange
                : category?.copyTimePreference && previousEvent?.preferredStartTimeRange
                    ? previousEvent?.preferredStartTimeRange
                    : userPreferences?.copyTimePreference &&
                        previousEvent?.preferredStartTimeRange
                        ? previousEvent?.preferredStartTimeRange
                        : event?.preferredStartTimeRange
            : event.preferredStartTimeRange,
        preferredEndTimeRange: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference &&
                previousEvent?.preferredEndTimeRange
                ? previousEvent.preferredEndTimeRange
                : category?.copyTimePreference && previousEvent?.preferredEndTimeRange
                    ? previousEvent?.preferredEndTimeRange
                    : userPreferences?.copyTimePreference &&
                        previousEvent?.preferredEndTimeRange
                        ? previousEvent?.preferredEndTimeRange
                        : event?.preferredEndTimeRange
            : event.preferredEndTimeRange,
        priority: (!event?.userModifiedPriorityLevel
            ? previousEvent?.copyPriorityLevel
                ? previousEvent.priority
                : category?.copyPriorityLevel
                    ? previousEvent?.priority
                    : category?.defaultPriorityLevel
                        ? category?.defaultPriorityLevel
                        : userPreferences?.copyPriorityLevel
                            ? previousEvent?.priority
                            : event?.priority
            : event?.priority) || 1,
        isBreak: !event?.userModifiedIsBreak
            ? previousEvent?.copyIsBreak
                ? previousEvent.isBreak
                : category?.copyIsBreak
                    ? previousEvent?.isBreak
                    : category?.defaultIsBreak
                        ? category?.defaultIsBreak
                        : userPreferences?.copyIsBreak
                            ? previousEvent?.isBreak
                            : event?.isBreak
            : event.isBreak,
        isMeeting: !event?.userModifiedIsMeeting
            ? previousEvent?.copyIsMeeting
                ? previousEvent.isMeeting
                : category?.copyIsMeeting
                    ? previousEvent?.isMeeting
                    : category?.defaultIsMeeting
                        ? category?.defaultIsMeeting
                        : userPreferences?.copyIsMeeting
                            ? previousEvent?.isMeeting
                            : category?.name === meetingLabel
                                ? true
                                : event?.isMeeting
            : event.isMeeting,
        isExternalMeeting: !event?.userModifiedIsExternalMeeting
            ? previousEvent?.copyIsExternalMeeting
                ? previousEvent.isExternalMeeting
                : category?.copyIsExternalMeeting
                    ? previousEvent?.isExternalMeeting
                    : category?.defaultIsExternalMeeting
                        ? category?.defaultIsExternalMeeting
                        : userPreferences?.copyIsExternalMeeting
                            ? previousEvent?.isExternalMeeting
                            : category?.name === externalMeetingLabel
                                ? true
                                : event?.isExternalMeeting
            : event.isExternalMeeting,
        modifiable: !event?.userModifiedModifiable
            ? previousEvent?.copyModifiable
                ? previousEvent.modifiable
                : category?.copyModifiable
                    ? previousEvent?.modifiable
                    : category?.defaultModifiable
                        ? category?.defaultModifiable
                        : userPreferences?.copyModifiable
                            ? previousEvent?.modifiable
                            : event?.modifiable
            : event.modifiable,
        isMeetingModifiable: !event?.userModifiedModifiable
            ? previousEvent?.copyIsMeeting
                ? previousEvent.isMeeting
                : category?.copyIsMeeting
                    ? previousEvent?.isMeeting
                    : category?.defaultIsMeeting
                        ? category?.defaultIsMeeting
                        : userPreferences?.copyIsMeeting
                            ? previousEvent?.isMeeting
                            : event?.isMeeting
            : event.isMeetingModifiable,
        isExternalMeetingModifiable: !event?.userModifiedModifiable
            ? previousEvent?.copyIsExternalMeeting
                ? previousEvent.isExternalMeeting
                : category?.copyIsExternalMeeting
                    ? previousEvent?.isExternalMeeting
                    : category?.defaultIsExternalMeeting
                        ? category?.defaultIsExternalMeeting
                        : userPreferences?.copyIsExternalMeeting
                            ? previousEvent?.isExternalMeeting
                            : event?.isExternalMeeting
            : event.isExternalMeetingModifiable,
        duration: !event?.userModifiedDuration
            ? previousEvent?.copyDuration
                ? previousEvent.duration || previousDuration
                : event?.duration
            : event.duration,
        endDate: !event?.userModifiedDuration
            ? previousEvent?.copyDuration
                ? dayjs(event.startDate.slice(0, 19))
                    .tz(event.timezone, true)
                    .add(previousEvent.duration || previousDuration, 'minutes')
                    .format()
                : event?.endDate
            : event.endDate,
        preferredTimeRanges: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference &&
                previousEvent.preferredTimeRanges?.length > 0
                ? previousEvent.preferredTimeRanges
                : category?.copyTimePreference &&
                    previousEvent.preferredTimeRanges?.length > 0
                    ? previousEvent?.preferredTimeRanges
                    : userPreferences?.copyTimePreference &&
                        previousEvent.preferredTimeRanges?.length > 0
                        ? previousEvent?.preferredTimeRanges
                        : category?.defaultTimePreference?.length > 0
                            ? category?.defaultTimePreference?.map((tp) => ({
                                ...tp,
                                eventId: event?.id,
                                id: uuid(),
                                createdDate: dayjs().toISOString(),
                                updatedAt: dayjs().toISOString(),
                                userId: event?.userId,
                            }))
                            : event?.preferredTimeRanges
            : event.preferredTimeRanges,
        copyAvailability: !previousEvent?.unlink
            ? previousEvent.copyAvailability
            : false,
        copyTimePreference: !previousEvent?.unlink
            ? previousEvent.copyTimePreference
            : false,
        copyPriorityLevel: !previousEvent?.unlink
            ? previousEvent.copyPriorityLevel
            : false,
        copyIsBreak: !previousEvent?.unlink ? previousEvent.copyIsBreak : false,
        copyModifiable: !previousEvent?.unlink
            ? previousEvent.copyModifiable
            : false,
        copyIsMeeting: !previousEvent?.unlink ? previousEvent.copyIsMeeting : false,
        copyIsExternalMeeting: !previousEvent?.unlink
            ? previousEvent.copyIsExternalMeeting
            : false,
        copyDuration: !previousEvent?.unlink ? previousEvent.copyDuration : false,
        copyCategories: !previousEvent?.unlink
            ? previousEvent.copyCategories
            : false,
        copyReminders: !previousEvent?.unlink ? previousEvent.copyReminders : false,
        copyTimeBlocking: !previousEvent?.unlink
            ? previousEvent.copyTimeBlocking
            : false,
        copyColor: !previousEvent?.unlink ? previousEvent.copyColor : false,
        unlink: !previousEvent?.unlink ? false : true,
        positiveImpactDayOfWeek: !previousEvent?.unlink
            ? previousEvent.positiveImpactDayOfWeek
            : null,
        positiveImpactScore: !previousEvent?.unlink
            ? previousEvent.positiveImpactScore
            : null,
        negativeImpactDayOfWeek: !previousEvent?.unlink
            ? previousEvent.negativeImpactDayOfWeek
            : null,
        negativeImpactScore: !previousEvent?.unlink
            ? previousEvent.negativeImpactScore
            : null,
        positiveImpactTime: !previousEvent?.unlink
            ? previousEvent.positiveImpactTime
            : null,
        negativeImpactTime: !previousEvent?.unlink
            ? previousEvent.negativeImpactTime
            : null,
        backgroundColor: !event?.userModifiedColor
            ? previousEvent?.copyColor
                ? previousEvent.backgroundColor
                : category?.color
                    ? category?.color
                    : userPreferences?.copyColor
                        ? previousEvent?.backgroundColor
                        : event?.backgroundColor
            : event.backgroundColor,
        colorId: previousEvent?.copyColor && previousEvent?.colorId
            ? previousEvent.colorId
            : userPreferences?.copyColor && previousEvent?.colorId
                ? previousEvent?.colorId
                : event?.colorId,
    };
};
export const createPreAndPostEventsFromPreviousEvent = (event, previousEvent) => {
    if (!previousEvent?.copyTimeBlocking) {
        console.log('no copy time blocking');
        return null;
    }
    if (event.userModifiedTimeBlocking) {
        console.log('user modified time blocking');
        return null;
    }
    const eventId = uuid();
    const eventId1 = uuid();
    const preEventId = event?.preEventId || `${eventId}#${event?.calendarId}`;
    const postEventId = event?.postEventId || `${eventId1}#${event?.calendarId}`;
    let valuesToReturn = {};
    valuesToReturn.newEvent = event;
    if (previousEvent?.timeBlocking?.afterEvent) {
        const formattedZoneAfterEventEndDate = dayjs(event.endDate.slice(0, 19))
            .tz(event.timezone, true)
            .add(previousEvent?.timeBlocking?.afterEvent, 'm')
            .format();
        const formattedZoneAfterEventStartDate = dayjs(event.endDate.slice(0, 19))
            .tz(event.timezone, true)
            .format();
        const afterEvent = {
            id: postEventId,
            isPreEvent: false,
            forEventId: event.id,
            isPostEvent: true,
            notes: 'Buffer time',
            summary: 'Buffer time',
            startDate: formattedZoneAfterEventStartDate,
            endDate: formattedZoneAfterEventEndDate,
            method: event?.postEventId ? 'update' : 'create',
            userId: event?.userId,
            createdDate: dayjs().toISOString(),
            deleted: false,
            priority: 1,
            isFollowUp: false,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            updatedAt: dayjs().toISOString(),
            calendarId: event?.calendarId,
            timezone: event?.timezone,
            eventId: postEventId.split('#')[0],
        };
        valuesToReturn.afterEvent = afterEvent;
        valuesToReturn.newEvent = {
            ...valuesToReturn.newEvent,
            postEventId,
            timeBlocking: {
                ...valuesToReturn?.newEvent?.timeBlocking,
                afterEvent: previousEvent?.timeBlocking?.afterEvent,
            },
        };
    }
    if (previousEvent?.timeBlocking?.beforeEvent) {
        const formattedZoneBeforeEventStartDate = dayjs(event.startDate.slice(0, 19))
            .tz(event.timezone, true)
            .subtract(previousEvent?.timeBlocking?.beforeEvent, 'm')
            .format();
        const formattedZoneBeforeEventEndDate = dayjs(event.startDate.slice(0, 19))
            .tz(event.timezone, true)
            .format();
        const beforeEvent = {
            id: preEventId,
            isPreEvent: true,
            isPostEvent: false,
            forEventId: event.id,
            notes: 'Buffer time',
            summary: 'Buffer time',
            startDate: formattedZoneBeforeEventStartDate,
            endDate: formattedZoneBeforeEventEndDate,
            method: event?.preEventId ? 'update' : 'create',
            userId: event?.userId,
            createdDate: dayjs().toISOString(),
            deleted: false,
            priority: 1,
            isFollowUp: false,
            modifiable: true,
            anyoneCanAddSelf: false,
            guestsCanInviteOthers: false,
            guestsCanSeeOtherGuests: false,
            originalStartDate: undefined,
            originalAllDay: false,
            updatedAt: dayjs().toISOString(),
            calendarId: event?.calendarId,
            timezone: event?.timezone,
            eventId: preEventId.split('#')[0],
        };
        valuesToReturn.beforeEvent = beforeEvent;
        valuesToReturn.newEvent = {
            ...valuesToReturn.newEvent,
            preEventId,
            timeBlocking: {
                ...valuesToReturn?.newEvent?.timeBlocking,
                beforeEvent: previousEvent?.timeBlocking?.beforeEvent,
            },
        };
    }
    return valuesToReturn;
};
export const createRemindersFromPreviousEventForEvent = async (event, previousEvent, userId) => {
    if (event.userModifiedReminders) {
        console.log('no event inside createRemindersFromPreviousEventForEvent');
        return null;
    }
    if (!previousEvent?.id) {
        console.log('no previousEvent inside createRemindersFromPreviousEventForEvent');
        return null;
    }
    if (!previousEvent?.copyReminders) {
        console.log('no previousEvent inside createRemindersFromPreviousEventForEvent');
        return null;
    }
    const reminders = await listRemindersForEvent(previousEvent.id, userId);
    return reminders?.map((reminder) => ({
        ...reminder,
        eventId: event.id,
        id: uuid(),
        updatedAt: dayjs().toISOString(),
        createdDate: dayjs().toISOString(),
        deleted: false,
    }));
};
const copyOverMeetingAndExternalMeetingDefaultsWithPreviousEventFound = (event, previousEvent, category, userPreferences) => {
    return {
        ...event,
        transparency: !event?.userModifiedAvailability
            ? previousEvent?.copyAvailability
                ? previousEvent.transparency
                : category.copyAvailability
                    ? previousEvent?.transparency
                    : category.defaultAvailability
                        ? 'transparent'
                        : userPreferences?.copyAvailability
                            ? previousEvent?.transparency
                            : event?.transparency
            : event.transparency,
        preferredTime: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference
                ? previousEvent.preferredTime
                : category.copyTimePreference
                    ? previousEvent?.preferredTime
                    : userPreferences?.copyTimePreference
                        ? previousEvent?.preferredTime
                        : event?.preferredTime
            : event.preferredTime,
        preferredDayOfWeek: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference
                ? previousEvent.preferredDayOfWeek
                : userPreferences?.copyTimePreference
                    ? previousEvent?.preferredDayOfWeek
                    : event?.preferredDayOfWeek
            : event.preferredDayOfWeek,
        preferredStartTimeRange: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference
                ? previousEvent.preferredStartTimeRange
                : category.copyTimePreference
                    ? previousEvent?.preferredStartTimeRange
                    : userPreferences?.copyTimePreference
                        ? previousEvent?.preferredStartTimeRange
                        : event?.preferredStartTimeRange
            : event.preferredStartTimeRange,
        preferredEndTimeRange: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference
                ? previousEvent.preferredEndTimeRange
                : category.copyTimePreference
                    ? previousEvent?.preferredEndTimeRange
                    : userPreferences?.copyTimePreference
                        ? previousEvent?.preferredEndTimeRange
                        : event?.preferredEndTimeRange
            : event.preferredEndTimeRange,
        priority: (!event?.userModifiedPriorityLevel
            ? previousEvent?.copyPriorityLevel
                ? previousEvent.priority
                : category.copyPriorityLevel
                    ? previousEvent?.priority
                    : category.defaultPriorityLevel
                        ? category?.defaultPriorityLevel
                        : userPreferences?.copyPriorityLevel
                            ? previousEvent?.priority
                            : event?.priority
            : event?.priority) || 1,
        isBreak: !event?.userModifiedIsBreak
            ? previousEvent?.copyIsBreak
                ? previousEvent.isBreak
                : category.copyIsBreak
                    ? previousEvent?.isBreak
                    : category.defaultIsBreak
                        ? category?.defaultIsBreak
                        : userPreferences?.copyIsBreak
                            ? previousEvent?.isBreak
                            : event?.isBreak
            : event.isBreak,
        isMeeting: !event?.userModifiedIsMeeting
            ? previousEvent?.copyIsMeeting
                ? previousEvent.isMeeting
                : category.copyIsMeeting
                    ? previousEvent?.isMeeting
                    : category.defaultIsMeeting
                        ? category?.defaultIsMeeting
                        : userPreferences?.copyIsMeeting
                            ? previousEvent?.isMeeting
                            : category.name === meetingLabel
                                ? true
                                : event?.isMeeting
            : event.isMeeting,
        isExternalMeeting: !event?.userModifiedIsExternalMeeting
            ? previousEvent?.copyIsExternalMeeting
                ? previousEvent.isExternalMeeting
                : category.copyIsExternalMeeting
                    ? previousEvent?.isExternalMeeting
                    : category.defaultIsExternalMeeting
                        ? category?.defaultIsExternalMeeting
                        : userPreferences?.copyIsExternalMeeting
                            ? previousEvent?.isExternalMeeting
                            : category.name === externalMeetingLabel
                                ? true
                                : event?.isExternalMeeting
            : event.isExternalMeeting,
        isMeetingModifiable: !event?.userModifiedModifiable
            ? category.defaultMeetingModifiable
                ? category?.defaultMeetingModifiable
                : event?.isMeetingModifiable
            : event.isMeetingModifiable,
        isExternalMeetingModifiable: !event?.userModifiedModifiable
            ? category.defaultExternalMeetingModifiable
                ? category?.defaultExternalMeetingModifiable
                : event?.isExternalMeetingModifiable
            : event.isExternalMeetingModifiable,
        backgroundColor: !event?.userModifiedColor
            ? previousEvent?.copyColor
                ? previousEvent.backgroundColor
                : category.color
                    ? category?.color
                    : userPreferences?.copyColor
                        ? previousEvent?.backgroundColor
                        : event?.backgroundColor
            : event.backgroundColor,
        colorId: previousEvent?.copyColor && previousEvent?.colorId
            ? previousEvent.colorId
            : userPreferences?.copyColor && previousEvent?.colorId
                ? previousEvent?.colorId
                : event?.colorId,
        preferredTimeRanges: !event?.userModifiedTimePreference
            ? previousEvent?.copyTimePreference &&
                previousEvent?.preferredTimeRanges?.length > 0
                ? previousEvent.preferredTimeRanges
                : category.copyTimePreference &&
                    previousEvent?.preferredTimeRanges?.length > 0
                    ? previousEvent?.preferredTimeRanges
                    : userPreferences?.copyTimePreference &&
                        previousEvent?.preferredTimeRanges?.length > 0
                        ? previousEvent?.preferredTimeRanges
                        : category.defaultTimePreference?.map((tp) => ({
                            ...tp,
                            eventId: event?.id,
                            id: uuid(),
                            createdDate: dayjs().toISOString(),
                            updatedAt: dayjs().toISOString(),
                            userId: event?.userId,
                        }))
                            ? category?.defaultTimePreference?.map((tp) => ({
                                ...tp,
                                eventId: event?.id,
                                id: uuid(),
                                createdDate: dayjs().toISOString(),
                                updatedAt: dayjs().toISOString(),
                                userId: event?.userId,
                            }))
                            : event?.preferredTimeRanges
            : event.preferredTimeRanges,
    };
};
export const copyOverCategoryMeetingAndExternalMeetingDefaultsWithFoundPreviousEvent = (event, categories, userPreferences, previousEvent) => {
    if (!(categories?.length > 0)) {
        console.log('no categories inside copyOverCategoryDefaultsForConstantsWithFoundPreviousEvent');
        return;
    }
    if (!userPreferences?.id) {
        console.log('no userPreferences inside copyOverCategoryDefaultsForConstantsWithFoundPreviousEvent');
        return;
    }
    if (!previousEvent?.id) {
        console.log('no previousEvent inside copyOverCategoryDefaultsForConstantsWithFoundPreviousEvent');
        return;
    }
    if (!event?.id) {
        console.log('no event inside copyOverCategoryDefaultsForConstantsWithFoundPreviousEvent');
        return;
    }
    const meetingCategory = categories.find((category) => category.name === meetingLabel);
    const externalCategory = categories.find((category) => category.name === externalMeetingLabel);
    let newEventMeeting = {};
    let newEventExternal = {};
    if (meetingCategory?.id) {
        newEventMeeting =
            copyOverMeetingAndExternalMeetingDefaultsWithPreviousEventFound(event, previousEvent, meetingCategory, userPreferences);
    }
    if (externalCategory?.id) {
        newEventExternal =
            copyOverMeetingAndExternalMeetingDefaultsWithPreviousEventFound(event, previousEvent, meetingCategory, userPreferences);
    }
    return { newEventMeeting, newEventExternal };
};
export const createRemindersAndTimeBlockingFromPreviousEventGivenUserPreferences = async (userId, newEvent, newReminders1, newTimeBlocking1, previousEvent, userPreferences) => {
    try {
        let newReminders = newReminders1 || [];
        let newTimeBlocking = newTimeBlocking1 || {};
        if (!newEvent?.userModifiedReminders && userPreferences?.copyReminders) {
            const reminders = await createRemindersFromPreviousEventForEvent(newEvent, previousEvent, userId);
            console.log(reminders, ' reminders');
            if (reminders?.length > 0 && !newEvent?.userModifiedReminders) {
                newReminders.push(...reminders);
            }
        }
        if (!newEvent?.userModifiedTimeBlocking &&
            userPreferences?.copyTimeBlocking) {
            const timeBlocking = createPreAndPostEventsFromPreviousEvent(newEvent, previousEvent);
            console.log(timeBlocking, ' timeBlocking');
            if (timeBlocking?.beforeEvent) {
                newTimeBlocking.beforeEvent =
                    timeBlocking.beforeEvent;
            }
            if (timeBlocking?.afterEvent) {
                newTimeBlocking.afterEvent =
                    timeBlocking.afterEvent;
            }
            if (timeBlocking?.newEvent?.preEventId ||
                timeBlocking?.newEvent?.postEventId) {
                newEvent = timeBlocking.newEvent;
            }
        }
        return { newEvent, newReminders, newTimeBlocking };
    }
    catch (e) {
        console.log(e, ' unable to create reminders and time blocking from previous event given user preferences');
    }
};
export const updateValuesForEventWithPreviousEventPlusMeetingAndExternalMeeting = async (event, newEvent1, bestMatchCategories, newReminders1, newTimeBlocking1, userId, userPreferences, previousEvent) => {
    try {
        let newEvent = newEvent1;
        let newReminders = newReminders1 || [];
        let newTimeBlocking = newTimeBlocking1 || {};
        const { newEventMeeting, newEventExternal } = copyOverCategoryMeetingAndExternalMeetingDefaultsWithFoundPreviousEvent(event, bestMatchCategories, userPreferences, previousEvent);
        if (newEventMeeting?.id) {
            newEvent = { ...newEvent, ...newEventMeeting };
            const meetingCategory = bestMatchCategories.find((category) => category.name === meetingLabel);
            const oldReminders = await listRemindersForEvent(newEventMeeting?.id, userId);
            const reminders = createRemindersUsingCategoryDefaultsForEvent(newEvent, meetingCategory, oldReminders, previousEvent);
            console.log(reminders, ' reminders');
            if (reminders?.length > 0 && !newEvent?.userModifiedReminders) {
                newReminders.push(...reminders);
                newReminders = _.uniqBy(newReminders, 'minutes');
            }
            if (!newEvent?.userModifiedTimeBlocking) {
                const timeBlocking = createPreAndPostEventsForCategoryDefaults(meetingCategory, newEvent, previousEvent);
                console.log(timeBlocking, ' timeBlocking');
                if (timeBlocking?.beforeEvent) {
                    newTimeBlocking.beforeEvent = timeBlocking.beforeEvent;
                }
                if (timeBlocking?.afterEvent) {
                    newTimeBlocking.afterEvent = timeBlocking.afterEvent;
                }
                if (timeBlocking?.newEvent?.preEventId ||
                    timeBlocking?.newEvent?.postEventId) {
                    newEvent = timeBlocking.newEvent;
                }
            }
        }
        if (newEventExternal?.id) {
            newEvent = { ...newEvent, ...newEventExternal };
            const externalCategory = bestMatchCategories.find((category) => category.name === externalMeetingLabel);
            const oldReminders = await listRemindersForEvent(newEventExternal.id, userId);
            const reminders = createRemindersUsingCategoryDefaultsForEvent(newEvent, externalCategory, oldReminders, previousEvent);
            console.log(reminders, ' reminders');
            if (reminders?.length > 0 && !newEvent?.userModifiedReminders) {
                newReminders.push(...reminders);
                newReminders = _.uniqBy(newReminders, 'minutes');
            }
            if (!newEvent?.userModifiedTimeBlocking) {
                const timeBlocking = createPreAndPostEventsForCategoryDefaults(externalCategory, newEvent);
                console.log(timeBlocking, ' timeBlocking');
                if (timeBlocking?.beforeEvent) {
                    newTimeBlocking.beforeEvent = timeBlocking.beforeEvent;
                }
                if (timeBlocking?.afterEvent) {
                    newTimeBlocking.afterEvent = timeBlocking.afterEvent;
                }
                if (timeBlocking?.newEvent?.preEventId ||
                    timeBlocking?.newEvent?.postEventId) {
                    newEvent = timeBlocking.newEvent;
                }
            }
        }
        return { newEvent, newReminders, newTimeBlocking };
    }
    catch (e) {
        console.log(e, ' unable to update values for default categories');
    }
};
export const createRemindersAndTimeBlockingFromPreviousEvent = async (userId, newEvent, newReminders1, newTimeBlocking1, previousEvent) => {
    try {
        let newReminders = newReminders1 || [];
        let newTimeBlocking = newTimeBlocking1 || {};
        const reminders = await createRemindersFromPreviousEventForEvent(newEvent, previousEvent, userId);
        console.log(reminders, ' reminders');
        if (reminders?.length > 0 &&
            !newEvent?.userModifiedReminders &&
            previousEvent?.copyReminders) {
            newReminders.push(...reminders);
        }
        if (!newEvent?.userModifiedTimeBlocking &&
            previousEvent?.copyTimeBlocking) {
            const timeBlocking = createPreAndPostEventsFromPreviousEvent(newEvent, previousEvent);
            console.log(timeBlocking, ' timeBlocking');
            if (timeBlocking?.beforeEvent) {
                newTimeBlocking.beforeEvent = timeBlocking.beforeEvent;
            }
            if (timeBlocking?.afterEvent) {
                newTimeBlocking.afterEvent = timeBlocking.afterEvent;
            }
            if (timeBlocking?.newEvent?.preEventId ||
                timeBlocking?.newEvent?.postEventId) {
                newEvent = timeBlocking.newEvent;
            }
        }
        return { newEvent, newReminders, newTimeBlocking };
    }
    catch (e) {
        console.log(e, ' unable to create reminders and time blocking from previous event');
    }
};
export const processEventWithFoundPreviousEventAndCopyCategories = async (id, previousEvent, oldEvent, userPreferences, bestMatchCategory1, userId, bestMatchCategories1, newModifiedEvent1, newReminders1 = [], newTimeBlocking1 = {}, previousCategories = [], previousMeetingCategoriesWithMeetingLabel = [], previousMeetingCategoriesWithExternalMeetingLabel = []) => {
    try {
        if (!id) {
            console.log(' no id inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!previousEvent) {
            console.log(' no previousEvent inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!oldEvent) {
            console.log(' no event inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!userPreferences) {
            console.log(' no userPreferences inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!bestMatchCategory1) {
            console.log('no bestMatchCategories inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!userId) {
            console.log(' no userId inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!bestMatchCategories1) {
            console.log(' no bestMatchCategories inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!newModifiedEvent1) {
            console.log(' no newModifiedEvent1 inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        let bestMatchCategories = bestMatchCategories1 || [];
        let bestMatchCategory = bestMatchCategory1 || {};
        let newModifiedEvent = newModifiedEvent1 || {};
        let newReminders = newReminders1 || [];
        let newTimeBlocking = newTimeBlocking1 || {};
        if (!previousEvent?.unlink && !oldEvent?.userModifiedCategories) {
            if ((previousEvent?.copyCategories || userPreferences?.copyCategories) &&
                previousCategories?.length > 0) {
                const categoryEvents = previousCategories.map((c) => {
                    const categoryEvent = {
                        categoryId: c.id,
                        eventId: id,
                        userId,
                        id: uuid(),
                        createdDate: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                    };
                    return categoryEvent;
                });
                console.log(categoryEvents, ' categoryEvents');
                await createCategoryEvents(categoryEvents);
            }
            if (previousCategories?.[0]?.id) {
                const body = await findBestMatchCategory2(oldEvent, previousCategories);
                console.log(body, ' body');
                const { labels } = body;
                const bestMatchLabel = processBestMatchCategoriesNoThreshold(body, labels);
                console.log(bestMatchLabel, ' bestMatchLabel');
                bestMatchCategory = previousCategories.find((category) => category.name === bestMatchLabel);
                if (bestMatchCategory?.id) {
                    newModifiedEvent = copyOverPreviousEventDefaults(oldEvent, previousEvent, bestMatchCategory, userPreferences);
                }
            }
            else {
                newModifiedEvent = copyOverPreviousEventDefaults(oldEvent, previousEvent, undefined, userPreferences);
            }
            if ((userPreferences?.copyReminders || userPreferences?.copyTimeBlocking) &&
                newModifiedEvent?.id) {
                const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingFromPreviousEventGivenUserPreferences(userId, newModifiedEvent, newReminders, newTimeBlocking, previousEvent, userPreferences);
                if (newEvent1?.id) {
                    newModifiedEvent = newEvent1;
                }
                if (newReminders1?.length > 0) {
                    newReminders = newReminders1;
                }
                if (newTimeBlocking1?.afterEvent || newTimeBlocking1?.beforeEvent) {
                    newTimeBlocking = newTimeBlocking1;
                }
            }
            if ((bestMatchCategory?.defaultReminders ||
                bestMatchCategory?.defaultTimeBlocking) &&
                newModifiedEvent?.id) {
                const { newEvent: newEvent3, newReminders: newReminders3, newTimeBlocking: newTimeBlocking3, } = await updateValuesForEventWithPreviousEventPlusMeetingAndExternalMeeting(oldEvent, newModifiedEvent, bestMatchCategories, newReminders, newTimeBlocking, userId, userPreferences, previousEvent);
                if (newEvent3) {
                    newModifiedEvent = newEvent3;
                }
                if (newReminders3) {
                    newReminders = newReminders3;
                }
                if (newTimeBlocking3) {
                    newTimeBlocking = newTimeBlocking3;
                }
            }
            if ((bestMatchCategory?.copyReminders ||
                bestMatchCategory?.copyTimeBlocking) &&
                newModifiedEvent?.id) {
                const { newEvent: newEvent2, newReminders: newReminders2, newTimeBlocking: newTimeBlocking2, } = await createRemindersAndTimeBlockingForBestMatchCategory(id, userId, newModifiedEvent, bestMatchCategory, newReminders, newTimeBlocking);
                if (newEvent2?.id) {
                    newModifiedEvent = newEvent2;
                }
                if (newReminders2?.[0]?.id) {
                    newReminders = newReminders2;
                }
                if (newTimeBlocking2?.beforeEvent?.id ||
                    newTimeBlocking2?.afterEvent?.id) {
                    newTimeBlocking = newTimeBlocking2;
                }
            }
            if ((previousMeetingCategoriesWithMeetingLabel?.[0]?.copyReminders ||
                previousMeetingCategoriesWithMeetingLabel?.[0]?.copyTimeBlocking) &&
                newModifiedEvent?.id) {
                const { newEvent: newEvent2, newReminders: newReminders2, newTimeBlocking: newTimeBlocking2, } = await createRemindersAndTimeBlockingForBestMatchCategory(id, userId, newModifiedEvent, previousMeetingCategoriesWithMeetingLabel?.[0], newReminders, newTimeBlocking);
                if (newEvent2?.id) {
                    newModifiedEvent = newEvent2;
                }
                if (newReminders2?.[0]?.id) {
                    newReminders = newReminders2;
                }
                if (newTimeBlocking2?.afterEvent?.id ||
                    newTimeBlocking2?.beforeEvent?.id) {
                    newTimeBlocking = newTimeBlocking2;
                }
            }
            if ((previousMeetingCategoriesWithExternalMeetingLabel?.[0]
                ?.copyReminders ||
                previousMeetingCategoriesWithExternalMeetingLabel?.[0]
                    ?.copyTimeBlocking) &&
                newModifiedEvent?.id) {
                const { newEvent: newEvent2, newReminders: newReminders2, newTimeBlocking: newTimeBlocking2, } = await createRemindersAndTimeBlockingForBestMatchCategory(id, userId, newModifiedEvent, previousMeetingCategoriesWithExternalMeetingLabel?.[0], newReminders, newTimeBlocking);
                if (newEvent2) {
                    newModifiedEvent = newEvent2;
                }
                if (newReminders2) {
                    newReminders = newReminders2;
                }
                if (newTimeBlocking2) {
                    newTimeBlocking = newTimeBlocking2;
                }
            }
            if ((previousEvent?.copyReminders || previousEvent?.copyTimeBlocking) &&
                newModifiedEvent?.id) {
                const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingFromPreviousEvent(userId, newModifiedEvent, newReminders, newTimeBlocking);
                if (newEvent1?.id) {
                    newModifiedEvent = newEvent1;
                }
                if (newReminders1?.[0]?.id) {
                    newReminders = newReminders1;
                }
                if (newTimeBlocking1?.afterEvent?.id ||
                    newTimeBlocking1?.beforeEvent?.id) {
                    newTimeBlocking = newTimeBlocking1;
                }
            }
            bestMatchCategories = getUniqueLabels(bestMatchCategories);
            console.log(bestMatchCategories, ' bestMatchCategories from previousCategories');
        }
        console.log(newModifiedEvent, ' newModifiedEvent');
        console.log(newReminders, ' newReminders');
        console.log(newTimeBlocking, ' newTimeBlocking');
        return {
            newModifiedEvent,
            newReminders,
            newTimeBlocking,
        };
    }
    catch (e) {
        console.log(e, ' processEventWithFoundPreviousEventAndCopyCategories');
    }
};
export const processEventWithFoundPreviousEventWithoutCategories = async (previousEvent, event, userPreferences, userId, newReminders = [], newTimeBlocking = {}) => {
    try {
        console.log('processEventWithFoundPreviousEventWithoutCategories');
        if (!previousEvent) {
            console.log(' no previousEvent inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!userPreferences) {
            console.log(' no userPreferences inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!userId) {
            console.log(' no userId inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        if (!event) {
            console.log(' no newModifiedEvent inside processEventWithFoundPreviousEventAndCopyCategories');
            return null;
        }
        let newModifiedEvent = event;
        if (!previousEvent?.unlink) {
            newModifiedEvent = copyOverPreviousEventDefaults(event, previousEvent, undefined, userPreferences);
            console.log(newModifiedEvent, ' newModifiedEvent inside processEventWithFoundPreviousEventWithoutCategories after copyOverPreviousEventDefaults');
            if ((userPreferences?.copyReminders || userPreferences?.copyTimeBlocking) &&
                event?.id) {
                const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingFromPreviousEventGivenUserPreferences(userId, newModifiedEvent, newReminders, newTimeBlocking, previousEvent, userPreferences);
                if (newEvent1?.id) {
                    newModifiedEvent = newEvent1;
                }
                if (newReminders1?.length > 0) {
                    newReminders = newReminders1;
                }
                if (newTimeBlocking1?.afterEvent || newTimeBlocking1?.beforeEvent) {
                    newTimeBlocking = newTimeBlocking1;
                }
            }
            if ((previousEvent?.copyReminders || previousEvent?.copyTimeBlocking) &&
                event?.id) {
                const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingFromPreviousEvent(userId, newModifiedEvent, newReminders, newTimeBlocking);
                if (newEvent1?.id) {
                    newModifiedEvent = newEvent1;
                }
                if (newReminders1?.[0]?.id) {
                    newReminders = newReminders1;
                }
                if (newTimeBlocking1?.afterEvent?.id ||
                    newTimeBlocking1?.beforeEvent?.id) {
                    newTimeBlocking = newTimeBlocking1;
                }
            }
        }
        console.log(newModifiedEvent, ' newModifiedEvent');
        console.log(newReminders, ' newReminders');
        console.log(newTimeBlocking, ' newTimeBlocking');
        return {
            newModifiedEvent,
            newReminders,
            newTimeBlocking,
        };
    }
    catch (e) {
        console.log(e, ' processEventWithFoundPreviousEventWithoutCategories');
    }
};
export const processUserEventWithFoundPreviousEvent = async (event, previousEventId) => {
    try {
        const { id, userId } = event;
        console.log(id, userId, previousEventId, ' id, userId, previousEventId, inside processUserEventWithFoundPreviousEvent');
        if (!id || !userId) {
            throw new Error('id or userId is missing');
        }
        const previousEvent = await getEventFromPrimaryKey(previousEventId);
        const preferredTimeRanges = await listPreferredTimeRangesForEvent(previousEventId);
        previousEvent.preferredTimeRanges = preferredTimeRanges;
        console.log(previousEvent, ' previousEvent inside processUserEventWithFoundPreviousEvent');
        const categories = await getUserCategories(userId);
        console.log(id, categories, ' id, categories');
        const body = await findBestMatchCategory2(event, categories);
        console.log(id, body, ' id, body');
        const { labels, scores } = body;
        const bestMatchLabel = processBestMatchCategories(body, labels);
        console.log(id, bestMatchLabel, ' id, bestMatchLabel');
        let bestMatchCategory = {};
        if (bestMatchLabel) {
            bestMatchCategory = categories.find((category) => category.name === bestMatchLabel);
        }
        let bestMatchCategoriesPlusMeetingType = [];
        if (bestMatchCategory?.id) {
            bestMatchCategoriesPlusMeetingType =
                await processEventForMeetingTypeCategories(event, bestMatchCategory, labels, scores, categories);
            console.log(id, bestMatchCategoriesPlusMeetingType, ' id, bestMatchCategoriesPlusMeetingType');
        }
        const userPreferences = await getUserPreferences(userId);
        console.log(id, userPreferences, ' id, userPreferences');
        if (!userPreferences) {
            throw new Error('userPreferences is missing');
        }
        let newModifiedEvent = event;
        let newReminders = [];
        let newTimeBlocking = {};
        console.log(id, previousEvent, ' id, previousEvent before if clause inside processUserEventWithFoundPreviousEvent');
        if ((previousEvent?.copyCategories || userPreferences?.copyCategories) &&
            !previousEvent?.unlink &&
            !event?.userModifiedCategories) {
            const previousCategories = await listCategoriesForEvent(previousEvent.id);
            console.log(id, previousCategories, ' id, previousCategories');
            if (userPreferences?.id && newModifiedEvent?.id) {
                const previousMeetingCategoriesWithMeetingLabel = previousCategories.filter((category) => category.name === meetingLabel);
                const previousMeetingCategoriesWithExternalMeetingLabel = previousCategories.filter((category) => category.name === externalMeetingLabel);
                const { newModifiedEvent: newModifiedEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await processEventWithFoundPreviousEventAndCopyCategories(id, previousEvent, event, userPreferences, bestMatchCategory, userId, bestMatchCategoriesPlusMeetingType, newModifiedEvent, newReminders, newTimeBlocking, previousCategories, previousMeetingCategoriesWithMeetingLabel, previousMeetingCategoriesWithExternalMeetingLabel);
                console.log(newModifiedEvent, newModifiedEvent1, ' newModifiedEvent, newModifiedEvent1 inside processUserEventWithFoundPreviousEvent after processEventWithFoundPreviousEventAndCopyCategories');
                console.log(newTimeBlocking, newTimeBlocking1, ' newTimeBlocking, newTimeBlocking1, inside processUserEventWithFoundPreviousEvent after processEventWithFoundPreviousEventAndCopyCategories');
                newModifiedEvent = newModifiedEvent1;
                newReminders = newReminders1;
                newTimeBlocking = newTimeBlocking1;
            }
            else {
                const { newModifiedEvent: newModifiedEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await processEventWithFoundPreviousEventWithoutCategories(previousEvent, newModifiedEvent, userPreferences, userId, newReminders, newTimeBlocking);
                console.log(newModifiedEvent, newModifiedEvent1, ' newModifiedEvent, newModifiedEvent1 inside processUserEventWithFoundPreviousEvent after else  processEventWithFoundPreviousEventAndCopyCategories');
                console.log(newTimeBlocking, newTimeBlocking1, ' newTimeBlocking, newTimeBlocking1, inside processUserEventWithFoundPreviousEvent after else processEventWithFoundPreviousEventAndCopyCategories');
                newModifiedEvent = newModifiedEvent1;
                newReminders = newReminders1;
                newTimeBlocking = newTimeBlocking1;
            }
        }
        if (userPreferences?.id &&
            !previousEvent?.copyCategories &&
            !userPreferences?.copyCategories &&
            !event?.userModifiedCategories &&
            event?.id &&
            previousEvent?.id) {
            if (bestMatchCategory?.id &&
                bestMatchCategoriesPlusMeetingType?.length > 0) {
                newModifiedEvent = copyOverPreviousEventDefaults(event, previousEvent, bestMatchCategory, userPreferences);
                console.log(newModifiedEvent, ' newModifiedEvent from BestMatchCategory');
                if (newModifiedEvent?.id) {
                    const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await createRemindersAndTimeBlockingForBestMatchCategory(id, userId, newModifiedEvent, bestMatchCategory, newReminders, newTimeBlocking);
                    console.log(newModifiedEvent, newEvent1, ' newModifiedEvent, newEvent1 inside processUserEventWithFoundPreviousEvent after createRemindersAndTimeBlockingForBestMatchCategory');
                    console.log(newTimeBlocking, newTimeBlocking1, ' newTimeBlocking, newTimeBlocking1, inside processUserEventWithFoundPreviousEvent after createRemindersAndTimeBlockingForBestMatchCategory');
                    newModifiedEvent = newEvent1;
                    newReminders = newReminders1;
                    newTimeBlocking = newTimeBlocking1;
                    console.log(newModifiedEvent, ' newModifiedEvent inside BestMatchCategory');
                    console.log(newReminders, ' newReminders inside ');
                    console.log(newTimeBlocking, ' newTimeBlocking inside ');
                    const { newEvent: newEvent2, newReminders: newReminders2, newTimeBlocking: newTimeBlocking2, } = await updateValuesForEventWithPreviousEventPlusMeetingAndExternalMeeting(event, newModifiedEvent, bestMatchCategoriesPlusMeetingType, newReminders, newTimeBlocking, userId, userPreferences, previousEvent);
                    console.log(newModifiedEvent, newEvent2, ' newModifiedEvent, newEvent2 inside processUserEventWithFoundPreviousEvent after updateValuesForEventWithPreviousEventPlusMeetingAndExternalMeeting');
                    console.log(newTimeBlocking, newTimeBlocking2, ' newTimeBlocking, newTimeBlocking2, inside processUserEventWithFoundPreviousEvent after updateValuesForEventWithPreviousEventPlusMeetingAndExternalMeeting');
                    newModifiedEvent = newEvent2;
                    newReminders = newReminders2;
                    newTimeBlocking = newTimeBlocking2;
                    console.log(newModifiedEvent, ' newModifiedEvent inside BestMatchCategory after updateValuesForEventWithPreviousEventWithMeetingAndExternalMeeting');
                    console.log(newReminders, ' newReminders inside BestMatchCategory after updateValuesForEventWithPreviousEventWithMeetingAndExternalMeeting');
                    console.log(newTimeBlocking, ' newTimeBlocking inside BestMatchCategory after updateValuesForEventWithPreviousEventWithMeetingAndExternalMeeting');
                }
            }
            else {
                const { newModifiedEvent: newModifiedEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await processEventWithFoundPreviousEventWithoutCategories(previousEvent, newModifiedEvent, userPreferences, userId, newReminders, newTimeBlocking);
                console.log(newModifiedEvent, newModifiedEvent1, ' newModifiedEvent, newModifiedEvent1 inside processUserEventWithFoundPreviousEvent after processEventWithFoundPreviousEventWithoutCategories');
                console.log(newTimeBlocking, newTimeBlocking1, ' newTimeBlocking, newTimeBlocking1, inside processUserEventWithFoundPreviousEvent after processEventWithFoundPreviousEventWithoutCategories');
                newModifiedEvent = newModifiedEvent1;
                newReminders = newReminders1;
                newTimeBlocking = newTimeBlocking1;
            }
        }
        const newEvent = newModifiedEvent ?? event;
        console.log(newEvent, event, ' newEvent, event last before returned inside processUserEventWithFoundPreviousEvent');
        return {
            newEvent,
            newReminders,
            newTimeBlocking,
        };
    }
    catch (e) {
        console.log(e, ' processEventWithFoundPreviousEvent');
    }
};
export const processUserEventWithFoundPreviousEventWithUserModifiedCategories = async (event, previousEventId) => {
    try {
        if (!event?.id) {
            throw new Error('event is missing');
        }
        if (!previousEventId) {
            throw new Error('previousEventId is missing');
        }
        const categories = await listCategoriesForEvent(event?.id);
        if (!categories?.[0]?.id) {
            throw new Error('categories is missing');
        }
        console.log(event?.id, 'id inside  processUserEventWithFoundPreviousEventWithUserModifiedCategories');
        const previousEvent = await getEventFromPrimaryKey(previousEventId);
        const preferredTimeRanges = await listPreferredTimeRangesForEvent(previousEventId);
        previousEvent.preferredTimeRanges = preferredTimeRanges;
        if (!previousEvent?.id) {
            throw new Error('previousEvent is missing');
        }
        console.log(categories, ' categories');
        const body = await findBestMatchCategory2(event, categories);
        console.log(body, ' body');
        if (body?.labels?.[0]) {
            const { labels } = body;
            const bestMatchLabel = processBestMatchCategoriesNoThreshold(body, labels);
            console.log(bestMatchLabel, ' bestMatchLabel');
            if (bestMatchLabel) {
                let bestMatchCategory = categories.find((category) => category.name === bestMatchLabel);
                if (!bestMatchCategory) {
                    throw new Error('bestMatchCategory is missing');
                }
                const userPreferences = await getUserPreferences(event?.userId);
                console.log(userPreferences, ' userPreferences');
                if (!userPreferences) {
                    throw new Error('userPreferences is missing');
                }
                let newModifiedEvent = copyOverPreviousEventDefaults(event, previousEvent, bestMatchCategory, userPreferences);
                console.log(newModifiedEvent, ' newModifiedEvent from BestMatchCategory');
                let newReminders = [];
                let newTimeBlocking = {};
                if (categories?.length > 0 && newModifiedEvent?.id) {
                    const { newEvent: newEvent1, newReminders: newReminders1, newTimeBlocking: newTimeBlocking1, } = await updateValuesForEventWithPreviousEventPlusMeetingAndExternalMeeting(event, newModifiedEvent, categories, newReminders, newTimeBlocking, event?.userId, userPreferences, previousEvent);
                    newModifiedEvent = newEvent1;
                    newReminders = newReminders1 || [];
                    newTimeBlocking = newTimeBlocking1 || {};
                    console.log(newModifiedEvent, ' newModifiedEvent inside else statement of copyCategories');
                    console.log(newReminders, ' newReminders inside else statement of copyCategories');
                    console.log(newTimeBlocking, ' newTimeBlocking inside else statement of copyCategories');
                }
                const newEvent = newModifiedEvent ?? event;
                console.log(newEvent, ' newEvent');
                return {
                    newEvent,
                    newReminders,
                    newTimeBlocking,
                };
            }
        }
    }
    catch (e) {
        console.log(e, ' processEventWithFoundPreviousEventWithUserModifiedCategories');
    }
};
export const deleteOptaPlan = async (userId) => {
    try {
        console.log(' deleteOptaPlanner called');
        await got
            .delete(`${optaPlannerUrl}/timeTable/admin/delete/${userId}`, {
            headers: {
                'Content-Type': 'application/json',
                Authorization: `Basic ${Buffer.from(`${optaPlannerUsername}:${optaPlannerPassword}`).toString('base64')}`,
            },
        })
            .json();
        console.log(' successfully deleted OptaPlanner');
    }
    catch (e) {
        console.log(e, ' deleteOptaPlanner');
    }
};
export const validateEventsFromOptaplanner = (unsortedEvents) => {
    const sortedEvents = unsortedEvents.sort((a, b) => {
        if (a.part < b.part) {
            return -1;
        }
        if (a.part > b.part) {
            return 1;
        }
        return 0;
    });
    const firstPartStartTime = sortedEvents?.[0]?.timeslot?.startTime;
    const firstPartEndTime = sortedEvents?.[0]?.timeslot?.endTime;
    const lastPartEndTime = sortedEvents?.[sortedEvents?.length - 1]?.timeslot?.endTime;
    const startHour = parseInt(firstPartStartTime.split(':')[0], 10);
    const startMinute = parseInt(firstPartStartTime.split(':')[1], 10);
    const endHour = parseInt(lastPartEndTime.split(':')[0], 10);
    const endMinute = parseInt(lastPartEndTime.split(':')[1], 10);
    const firstPartEndHour = parseInt(firstPartEndTime.split(':')[0], 10);
    const firstPartEndMinute = parseInt(firstPartEndTime.split(':')[1], 10);
    const durationMinutes = dayjs
        .duration(dayjs()
        .hour(startHour)
        .minute(startMinute)
        .diff(dayjs().hour(firstPartEndHour).minute(firstPartEndMinute)))
        .asMinutes();
    const plannerDurationMinutes = dayjs
        .duration(dayjs()
        .hour(startHour)
        .minute(startMinute)
        .diff(dayjs().hour(endHour).minute(endMinute)))
        .asMinutes();
    const expectedDurationMinutes = sortedEvents?.[0]?.lastPart * durationMinutes;
    const diffMinutes = Math.abs(plannerDurationMinutes - expectedDurationMinutes);
    if (Math.round(diffMinutes) > 0) {
        console.log(plannerDurationMinutes, ' plannerDurationMinutes');
        console.log(expectedDurationMinutes, ' expectedDurationMinutes');
        console.log(diffMinutes, ' diffMinutes');
        console.log(sortedEvents?.[0]?.eventId, startHour, startMinute, endHour, endMinute, sortedEvents?.[0]?.startDate, sortedEvents?.[0]?.endDate, firstPartStartTime, lastPartEndTime, sortedEvents?.[0]?.timeslot, sortedEvents?.[sortedEvents?.length - 1]?.timeslot, ` sortedEvents?.[0]?.eventId, startHour, startMinute, endHour, endMinute, sortedEvents?.[0]?.startDate, sortedEvents?.[0]?.endDate, firstPartStartTime, lastPartEndTime, sortedEvents?.[0]?.timeslot, sortedEvents?.[sortedEvents?.length - 1]?.timeslot`);
        for (const sortedEvent of sortedEvents) {
            console.log(sortedEvent?.eventId, sortedEvent.part, sortedEvent?.timeslot, sortedEvent.lastPart, ' sortedEvent?.eventId, sortedEvent.part, sortedEvent?.timeslot, sortedEvent.lastPart');
        }
        throw new Error('plannerDurationMinutes are not equal to expectedDurationMinutes inside validateEventFromOptaplanner and more than 30 minutes apart');
    }
};
export const getMonthDayFromSlot = (monthDay) => {
    const monthString = monthDay.slice(2, 4);
    const dayString = monthDay.slice(5, 7);
    const month = (parseInt(monthString, 10) - 1);
    const day = parseInt(dayString, 10);
    return { month, day };
};
export const formatPlannerEventsToEventAndAdjustTime = (events, oldEvent, hostTimezone) => {
    if (!events?.[0]?.id) {
        console.log(' no events present inside formatPlannerEventsToEvent');
        return null;
    }
    if (!oldEvent?.id) {
        console.log(' no oldEvent inside formatPlannerEventsToEvent');
        return null;
    }
    if (!oldEvent?.calendarId) {
        throw new Error('no calendarId inside oldEvent');
    }
    if (!dayjs(events?.[0]?.startDate).isValid()) {
        console.log(events?.[0], ' events?.[0]');
        throw new Error('startDate is not valid before formatting');
    }
    if (!dayjs(events?.[0]?.endDate).isValid()) {
        console.log(events?.[0], ' events?.[0]');
        throw new Error('startDate is not valid before formatting');
    }
    const sortedEvents = events.sort((a, b) => {
        if (a.part < b.part) {
            return -1;
        }
        if (a.part > b.part) {
            return 1;
        }
        return 0;
    });
    const firstPart = sortedEvents[0];
    const lastPart = sortedEvents[sortedEvents.length - 1];
    const monthDay = firstPart?.timeslot?.monthDay;
    const { month, day } = getMonthDayFromSlot(monthDay);
    const startHour = firstPart?.timeslot?.startTime
        ? parseInt(firstPart.timeslot.startTime.split(':')[0], 10)
        : dayjs(oldEvent.startDate.slice(0, 19)).tz(oldEvent.timezone, true).hour();
    const startMinute = firstPart?.timeslot?.startTime
        ? parseInt(firstPart.timeslot.startTime.split(':')[1], 10)
        : dayjs(oldEvent.startDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .minute();
    const startDate = firstPart?.timeslot?.monthDay
        ? dayjs(oldEvent.startDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .tz(hostTimezone)
            .month(month)
            .date(day)
            .hour(startHour)
            .minute(startMinute)
            .tz(oldEvent.timezone)
            .format()
        : dayjs(oldEvent.startDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .hour(startHour)
            .minute(startMinute)
            .format();
    const endHour = lastPart?.timeslot?.endTime
        ? parseInt(lastPart.timeslot.endTime.split(':')[0], 10)
        : dayjs(oldEvent.endDate.slice(0, 19)).tz(oldEvent.timezone, true).hour();
    const endMinute = lastPart?.timeslot?.endTime
        ? parseInt(lastPart.timeslot.endTime.split(':')[1], 10)
        : dayjs(oldEvent.endDate.slice(0, 19)).tz(oldEvent.timezone, true).minute();
    const endDate = lastPart?.timeslot?.monthDay
        ? dayjs(oldEvent.endDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .tz(hostTimezone)
            .month(month)
            .date(day)
            .hour(endHour)
            .minute(endMinute)
            .tz(oldEvent.timezone)
            .format()
        : dayjs(oldEvent.endDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .minute(endMinute)
            .hour(endHour)
            .format();
    console.log(oldEvent.id, startDate, firstPart?.timeslot?.dayOfWeek, firstPart?.timeslot?.monthDay, firstPart?.timeslot?.startTime, startHour, startMinute, dayjs(oldEvent.startDate.slice(0, 19))
        .tz(oldEvent.timezone, true)
        .month(month)
        .date(day)
        .hour(startHour)
        .minute(startMinute)
        .format(), ` oldEvent.id, startDate, firstPart?.timeslot?.dayOfWeek, firstPart?.timeslot?.monthDay, firstPart?.timeslot?.startTime, startHour, startMinute, dayjs(oldEvent.startDate.slice(0, 19)).tz(oldEvent.timezone, true).month(month)
  .date(day)
  .hour(startHour).minute(startMinute).format(),`);
    console.log(oldEvent.id, endDate, lastPart?.timeslot?.dayOfWeek, lastPart?.timeslot?.monthDay, lastPart?.timeslot?.endTime, endHour, endMinute, dayjs(oldEvent.endDate.slice(0, 19))
        .tz(oldEvent.timezone, true)
        .month(month)
        .date(day)
        .hour(endHour)
        .minute(endMinute)
        .format(), ` oldEvent.id, endDate, lastPart?.timeslot?.dayOfWeek, lastPart?.timeslot?.monthDay, lastPart?.timeslot?.endTime, endHour, endMinute, dayjs(oldEvent.endDate.slice(0, 19)).tz(oldEvent.timezone, true)
    .month(month)
    .date(day)
    .hour(endHour).minute(endMinute).format()`);
    const newEvent = {
        ...oldEvent,
        startDate,
        endDate,
    };
    console.log(newEvent, ' newEvent inside formatPlannerEventsToEvent');
    if (!dayjs(startDate).isValid()) {
        throw new Error('startDate is not valid after formatting');
    }
    if (!dayjs(endDate).isValid()) {
        throw new Error('startDate is not valid after formatting');
    }
    return newEvent;
};
export const putDataInSearch = async (id, vector, userId) => {
    try {
        const client = await getSearchClient();
        const response = await client.index({
            id,
            index: searchIndex,
            body: { [eventVectorName]: vector, userId },
            refresh: true,
        });
        console.log('Adding document:');
        console.log(response.body);
    }
    catch (e) {
        console.log(e, ' unable to put data into search');
    }
};
export const compareEventsToFilterUnequalEvents = (newEvent, oldEvent) => {
    if (!oldEvent?.id) {
        console.log(oldEvent?.id, ' oldEvent?.id inside compareEventsToFilterUnequalEvents likely new');
        return true;
    }
    if (!newEvent?.id) {
        console.log(newEvent?.id, 'no  newEvent?.id inside compareEventsToFilterUnequalEvents- bug ');
        throw new Error(`${newEvent} --- ${newEvent?.id}, no  newEvent?.id inside compareEventsToFilterUnequalEvents- bug`);
    }
    const oldEventModified = {
        ...oldEvent,
        startDate: dayjs(oldEvent.startDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .format(),
        endDate: dayjs(oldEvent.endDate.slice(0, 19))
            .tz(oldEvent.timezone, true)
            .format(),
    };
    const newEventModified = {
        ...newEvent,
        startDate: dayjs(newEvent.startDate.slice(0, 19))
            .tz(newEvent.timezone, true)
            .format(),
        endDate: dayjs(newEvent.endDate.slice(0, 19))
            .tz(newEvent.timezone, true)
            .format(),
    };
    console.log(!_.isEqual(newEventModified, oldEventModified), ' !_.isEqual(newEventModified, oldEventModified)');
    return !_.isEqual(newEventModified, oldEventModified);
};
export const getCalendarWithId = async (calendarId) => {
    try {
        const operationName = 'getCalendar';
        const query = `
    query getCalendar($id: String!) {
      Calendar_by_pk(id: $id) {
        resource
        updatedAt
        userId
        account
        colorId
        id
        modifiable
        title
        backgroundColor
        account
        accessLevel
        createdDate
        defaultReminders
        primary
        globalPrimary
        foregroundColor
        pageToken
        syncToken
      }
    }
  `;
        const variables = {
            id: calendarId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' res from getCalendarForEvent');
        return res?.data?.Calendar_by_pk;
    }
    catch (e) {
        console.log(e, ' getCalendarForEvent');
    }
};
export const getCalendarIntegration = async (userId, resource) => {
    try {
        const operationName = 'getCalendarIntegration';
        const query = `
      query getCalendarIntegration($userId: uuid!, $resource: String!) {
        Calendar_Integration(where: {userId: {_eq: $userId}, resource: {_eq: $resource}}) {
          token
          expiresAt
          id
          refreshToken
          resource
          name
          clientType
        }
      }
    `;
        const variables = {
            userId,
            resource,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            json: {
                operationName,
                query,
                variables,
            },
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
        })
            .json();
        console.log(res, ' res inside getCalendarIntegration');
        if (res?.data?.Calendar_Integration?.length > 0) {
            return res?.data?.Calendar_Integration?.[0];
        }
    }
    catch (e) {
        console.log(e, ' unable to get calendar integration');
    }
};
export const formatRemindersForGoogle = (reminders) => {
    const googleOverrides = reminders.map((reminder) => {
        return {
            method: 'email',
            minutes: reminder.minutes,
        };
    });
    const googleReminders = {
        overrides: googleOverrides,
        useDefault: false,
    };
    return googleReminders;
};
export const refreshZoomToken = async (refreshToken) => {
    try {
        const username = zoomClientId;
        const password = zoomClientSecret;
        return axios({
            data: new URLSearchParams({
                refresh_token: refreshToken,
                grant_type: 'refresh_token',
            }).toString(),
            baseURL: zoomBaseTokenUrl,
            url: '/oauth/token',
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            auth: {
                username,
                password,
            },
        }).then(({ data }) => Promise.resolve(data));
    }
    catch (e) {
        console.log(e, ' unable to refresh zoom token');
    }
};
export const refreshGoogleToken = async (refreshToken, clientType) => {
    try {
        console.log('refreshGoogleToken called', refreshToken);
        console.log('clientType', clientType);
        console.log('googleClientIdIos', googleClientIdIos);
        switch (clientType) {
            case 'ios':
                return got
                    .post(googleTokenUrl, {
                    form: {
                        grant_type: 'refresh_token',
                        refresh_token: refreshToken,
                        client_id: googleClientIdIos,
                    },
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                })
                    .json();
            case 'android':
                return got
                    .post(googleTokenUrl, {
                    form: {
                        grant_type: 'refresh_token',
                        refresh_token: refreshToken,
                        client_id: googleClientIdAndroid,
                    },
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                })
                    .json();
            case 'web':
                return got
                    .post(googleTokenUrl, {
                    form: {
                        grant_type: 'refresh_token',
                        refresh_token: refreshToken,
                        client_id: googleClientIdWeb,
                        client_secret: googleClientSecretWeb,
                    },
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                })
                    .json();
            case 'atomic-web':
                return got
                    .post(googleTokenUrl, {
                    form: {
                        grant_type: 'refresh_token',
                        refresh_token: refreshToken,
                        client_id: googleClientIdAtomicWeb,
                        client_secret: googleClientSecretAtomicWeb,
                    },
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                })
                    .json();
        }
    }
    catch (e) {
        console.log(e, ' unable to refresh google token');
    }
};
export const updateCalendarIntegration = async (id, token, expiresIn, enabled) => {
    try {
        const operationName = 'updateCalendarIntegration';
        const query = `
      mutation updateCalendarIntegration($id: uuid!,${token !== undefined ? ' $token: String,' : ''}${expiresIn !== undefined ? ' $expiresAt: timestamptz,' : ''}${enabled !== undefined ? ' $enabled: Boolean,' : ''}) {
        update_Calendar_Integration_by_pk(pk_columns: {id: $id}, _set: {${token !== undefined ? 'token: $token,' : ''}${expiresIn !== undefined ? ' expiresAt: $expiresAt,' : ''}${enabled !== undefined ? ' enabled: $enabled,' : ''}}) {
          id
          name
          refreshToken
          token
          clientType
          userId
          updatedAt
        }
      }
    `;
        const variables = {
            id,
            token,
            expiresAt: dayjs().add(expiresIn, 'seconds').toISOString(),
            enabled,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            json: {
                operationName,
                query,
                variables,
            },
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'Content-Type': 'application/json',
                'X-Hasura-Role': 'admin',
            },
        })
            .json();
        console.log(res, ' res inside updateCalendarIntegration');
    }
    catch (e) {
        console.log(e, ' unable to update calendar integration');
    }
};
export const decryptZoomTokens = (encryptedToken, encryptedRefreshToken) => {
    const ivBuffer = Buffer.from(zoomIVForPass, 'base64');
    const saltBuffer = Buffer.from(zoomSaltForPass, 'base64');
    const key = crypto.pbkdf2Sync(zoomPassKey, saltBuffer, 10000, 32, 'sha256');
    const decipherToken = crypto.createDecipheriv('aes-256-cbc', key, ivBuffer);
    let decryptedToken = decipherToken.update(encryptedToken, 'base64', 'utf8');
    decryptedToken += decipherToken.final('utf8');
    if (encryptedRefreshToken) {
        const decipherRefreshToken = crypto.createDecipheriv('aes-256-cbc', key, ivBuffer);
        let decryptedRefreshToken = decipherRefreshToken.update(encryptedRefreshToken, 'base64', 'utf8');
        decryptedRefreshToken += decipherRefreshToken.final('utf8');
        return {
            token: decryptedToken,
            refreshToken: decryptedRefreshToken,
        };
    }
    return {
        token: decryptedToken,
    };
};
export const encryptZoomTokens = (token, refreshToken) => {
    const ivBuffer = Buffer.from(zoomIVForPass, 'base64');
    const saltBuffer = Buffer.from(zoomSaltForPass, 'base64');
    const key = crypto.pbkdf2Sync(zoomPassKey, saltBuffer, 10000, 32, 'sha256');
    const cipherToken = crypto.createCipheriv('aes-256-cbc', key, ivBuffer);
    let encryptedToken = cipherToken.update(token, 'utf8', 'base64');
    encryptedToken += cipherToken.final('base64');
    let encryptedRefreshToken = '';
    if (refreshToken) {
        const cipherRefreshToken = crypto.createCipheriv('aes-256-cbc', key, ivBuffer);
        encryptedRefreshToken = cipherRefreshToken.update(refreshToken, 'utf8', 'base64');
        encryptedRefreshToken += cipherRefreshToken.final('base64');
    }
    if (encryptedRefreshToken) {
        return {
            encryptedToken,
            encryptedRefreshToken,
        };
    }
    else {
        return { encryptedToken };
    }
};
export const getZoomIntegration = async (userId) => {
    try {
        const { id, token, expiresAt, refreshToken } = await getCalendarIntegration(userId, zoomResourceName);
        const decryptedTokens = decryptZoomTokens(token, refreshToken);
        return {
            id,
            expiresAt,
            ...decryptedTokens,
        };
    }
    catch (e) {
        console.log(e, ' unable to get zoom integration');
    }
};
export const updateZoomIntegration = async (id, accessToken, expiresIn) => {
    try {
        const { encryptedToken } = encryptZoomTokens(accessToken);
        await updateCalendarIntegration(id, encryptedToken, expiresIn);
    }
    catch (e) {
        console.log(e, ' unable to update zoom integration');
    }
};
export const getZoomAPIToken = async (userId) => {
    let integrationId = '';
    try {
        console.log('getZoomAPIToken called');
        const { id, token, expiresAt, refreshToken } = await getZoomIntegration(userId);
        if (!refreshToken) {
            console.log('zoom not active, no refresh token');
            return;
        }
        integrationId = id;
        console.log(id, token, expiresAt, refreshToken, ' id, token, expiresAt, refreshToken');
        if (dayjs().isAfter(dayjs(expiresAt)) || !token) {
            const res = await refreshZoomToken(refreshToken);
            console.log(res, ' res from refreshZoomToken');
            await updateZoomIntegration(id, res.access_token, res.expires_in);
            return res.access_token;
        }
        return token;
    }
    catch (e) {
        console.log(e, ' unable to get zoom api token');
        await updateCalendarIntegration(integrationId, null, null, false);
    }
};
export const getGoogleAPIToken = async (userId, resource, clientType) => {
    let integrationId = '';
    try {
        const { id, token, expiresAt, refreshToken } = await getCalendarIntegration(userId, resource);
        integrationId = id;
        console.log(id, token, expiresAt, refreshToken, ' id, token, expiresAt, refreshToken');
        if (dayjs().isAfter(dayjs(expiresAt)) || !token) {
            const res = await refreshGoogleToken(refreshToken, clientType);
            console.log(res, ' res from refreshGoogleToken');
            await updateCalendarIntegration(id, res.access_token, res.expires_in);
            return res.access_token;
        }
        return token;
    }
    catch (e) {
        console.log(e, ' unable to get api token');
        await updateCalendarIntegration(integrationId, null, null, false);
    }
};
export const patchGoogleEvent = async (userId, calendarId, eventId, clientType, endDateTime, startDateTime, conferenceDataVersion, maxAttendees, sendUpdates, anyoneCanAddSelf, attendees, conferenceData, summary, description, timezone, startDate, endDate, extendedProperties, guestsCanInviteOthers, guestsCanModify, guestsCanSeeOtherGuests, originalStartDateTime, originalStartDate, recurrence, reminders, source, status, transparency, visibility, iCalUID, attendeesOmitted, hangoutLink, privateCopy, locked, attachments, eventType, location, colorId) => {
    try {
        const token = await getGoogleAPIToken(userId, googleCalendarResource, clientType);
        const googleCalendar = google.calendar({
            version: 'v3',
            headers: {
                Authorization: `Bearer ${token}`,
            },
        });
        let variables = {
            calendarId,
            conferenceDataVersion,
            eventId,
            maxAttendees,
            sendUpdates,
            requestBody: {},
        };
        let requestBody = {};
        if (endDate && timezone && !endDateTime) {
            const end = {
                date: dayjs(endDateTime.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            requestBody.end = end;
        }
        if (endDateTime && timezone && !endDate) {
            console.log(eventId, endDateTime, timezone, ' eventId, endDateTime, timezone prior');
            const end = {
                dateTime: endDateTime,
                timeZone: timezone,
            };
            requestBody.end = end;
            console.log(eventId, end.dateTime, end.timeZone, ' eventId, endDateTime, timezone after');
        }
        if (startDate && timezone && !startDateTime) {
            const start = {
                date: dayjs(startDateTime.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            requestBody.start = start;
        }
        if (startDateTime && timezone && !startDate) {
            console.log(eventId, startDateTime, timezone, ' eventId, startDateTime, timezone prior');
            const start = {
                dateTime: startDateTime,
                timeZone: timezone,
            };
            requestBody.start = start;
            console.log(eventId, start.dateTime, start.timeZone, ' eventId, startDateTime, timezone after');
        }
        if (originalStartDate && timezone && !originalStartDateTime) {
            const originalStartTime = {
                date: dayjs(originalStartDate.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            requestBody.originalStartTime = originalStartTime;
        }
        if (originalStartDateTime && timezone && !originalStartDate) {
            const originalStartTime = {
                dateTime: originalStartDateTime,
                timeZone: timezone,
            };
            requestBody.originalStartTime = originalStartTime;
        }
        if (anyoneCanAddSelf) {
            requestBody.anyoneCanAddSelf = anyoneCanAddSelf;
        }
        if (attendees?.[0]?.email) {
            requestBody.attendees = attendees;
        }
        if (conferenceData?.createRequest) {
            requestBody.conferenceData = {
                createRequest: {
                    conferenceSolutionKey: {
                        type: conferenceData.type,
                    },
                    requestId: conferenceData?.requestId || uuid(),
                },
            };
        }
        else if (conferenceData?.entryPoints?.[0]) {
            requestBody.conferenceData = {
                conferenceSolution: {
                    iconUri: conferenceData?.iconUri,
                    key: {
                        type: conferenceData?.type,
                    },
                    name: conferenceData?.name,
                },
                entryPoints: conferenceData?.entryPoints,
            };
        }
        if (description?.length > 0) {
            requestBody.description = description;
        }
        if (extendedProperties?.private || extendedProperties?.shared) {
            requestBody.extendedProperties = extendedProperties;
        }
        if (guestsCanInviteOthers) {
            requestBody.guestsCanInviteOthers = guestsCanInviteOthers;
        }
        if (guestsCanModify) {
            requestBody.guestsCanModify = guestsCanModify;
        }
        if (guestsCanSeeOtherGuests) {
            requestBody.guestsCanSeeOtherGuests = guestsCanSeeOtherGuests;
        }
        if (locked) {
            requestBody.locked = locked;
        }
        if (privateCopy) {
            requestBody.privateCopy = privateCopy;
        }
        if (recurrence?.[0]) {
            requestBody.recurrence = recurrence;
        }
        if (reminders) {
            requestBody.reminders = reminders;
        }
        if (source?.title || source?.url) {
            requestBody.source = source;
        }
        if (attachments?.[0]?.fileId) {
            requestBody.attachments = attachments;
        }
        if (eventType?.length > 0) {
            requestBody.eventType = eventType;
        }
        if (status) {
            requestBody.status = status;
        }
        if (transparency) {
            requestBody.transparency = transparency;
        }
        if (visibility) {
            requestBody.visibility = visibility;
        }
        if (iCalUID?.length > 0) {
            requestBody.iCalUID = iCalUID;
        }
        if (attendeesOmitted) {
            requestBody.attendeesOmitted = attendeesOmitted;
        }
        if (hangoutLink?.length > 0) {
            requestBody.hangoutLink = hangoutLink;
        }
        if (summary?.length > 0) {
            requestBody.summary = summary;
        }
        if (location?.length > 0) {
            requestBody.location = location;
        }
        if (colorId) {
            requestBody.colorId = colorId;
        }
        variables.requestBody = requestBody;
        console.log(eventId, requestBody, ' eventId, requestBody inside googlePatchEvent');
        const res = await googleCalendar.events.patch(variables);
        console.log(eventId, res.data, ' eventId, results from googlePatchEvent');
    }
    catch (e) {
        console.log(e, ' unable to patch google event');
    }
};
export const createGoogleEventWithId = async (userId, calendarId, clientType, eventId, endDateTime, startDateTime, conferenceDataVersion, maxAttendees, sendUpdates, anyoneCanAddSelf, attendees, conferenceData, summary, description, timezone, startDate, endDate, extendedProperties, guestsCanInviteOthers, guestsCanModify, guestsCanSeeOtherGuests, originalStartDateTime, originalStartDate, recurrence, reminders, source, status, transparency, visibility, iCalUID, attendeesOmitted, hangoutLink, privateCopy, locked, attachments, eventType, location, colorId) => {
    try {
        const token = await getGoogleAPIToken(userId, googleCalendarResource, clientType);
        const googleCalendar = google.calendar({
            version: 'v3',
            headers: {
                Authorization: `Bearer ${token}`,
            },
        });
        let data = {};
        if (endDateTime && timezone && !endDate) {
            const end = {
                dateTime: endDateTime,
                timeZone: timezone,
            };
            data.end = end;
        }
        if (endDate && timezone && !endDateTime) {
            const end = {
                date: dayjs(endDate.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            data.end = end;
        }
        if (startDate && timezone && !startDateTime) {
            const start = {
                date: dayjs(startDate.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            data.start = start;
        }
        if (startDateTime && timezone && !startDate) {
            const start = {
                dateTime: startDateTime,
                timeZone: timezone,
            };
            data.start = start;
        }
        if (originalStartDate && timezone && !originalStartDateTime) {
            const originalStartTime = {
                date: originalStartDate,
                timeZone: timezone,
            };
            data.originalStartTime = originalStartTime;
        }
        if (originalStartDateTime && timezone && !originalStartDate) {
            const originalStartTime = {
                dateTime: dayjs(originalStartDateTime).tz(timezone, true).format(),
                timeZone: timezone,
            };
            data.originalStartTime = originalStartTime;
        }
        if (anyoneCanAddSelf) {
            data = { ...data, anyoneCanAddSelf };
        }
        if (attendees?.[0]?.email) {
            data = { ...data, attendees };
        }
        if (conferenceData?.createRequest) {
            data = {
                ...data,
                conferenceData: {
                    createRequest: {
                        conferenceSolutionKey: {
                            type: conferenceData.type,
                        },
                        requestId: conferenceData?.requestId || uuid(),
                    },
                },
            };
        }
        else if (conferenceData?.entryPoints?.[0]) {
            data = {
                ...data,
                conferenceData: {
                    conferenceSolution: {
                        iconUri: conferenceData?.iconUri,
                        key: {
                            type: conferenceData?.type,
                        },
                        name: conferenceData?.name,
                    },
                    entryPoints: conferenceData?.entryPoints,
                },
            };
        }
        if (description?.length > 0) {
            data = { ...data, description };
        }
        if (extendedProperties?.private || extendedProperties?.shared) {
            data = { ...data, extendedProperties };
        }
        if (guestsCanInviteOthers) {
            data = { ...data, guestsCanInviteOthers };
        }
        if (guestsCanModify) {
            data = { ...data, guestsCanModify };
        }
        if (guestsCanSeeOtherGuests) {
            data = { ...data, guestsCanSeeOtherGuests };
        }
        if (locked) {
            data = { ...data, locked };
        }
        if (privateCopy) {
            data = { ...data, privateCopy };
        }
        if (recurrence?.[0]) {
            data = { ...data, recurrence };
        }
        if (reminders) {
            data = { ...data, reminders };
        }
        if (source?.title || source?.url) {
            data = { ...data, source };
        }
        if (attachments?.[0]?.fileId) {
            data = { ...data, attachments };
        }
        if (eventType?.length > 0) {
            data = { ...data, eventType };
        }
        if (status) {
            data = { ...data, status };
        }
        if (transparency) {
            data = { ...data, transparency };
        }
        if (visibility) {
            data = { ...data, visibility };
        }
        if (iCalUID?.length > 0) {
            data = { ...data, iCalUID };
        }
        if (attendeesOmitted) {
            data = { ...data, attendeesOmitted };
        }
        if (hangoutLink?.length > 0) {
            data = { ...data, hangoutLink };
        }
        if (summary?.length > 0) {
            data = { ...data, summary };
        }
        if (location?.length > 0) {
            data = { ...data, location };
        }
        if (colorId) {
            data.colorId = colorId;
        }
        data.id = eventId;
        const res = await googleCalendar.events.insert({
            calendarId,
            conferenceDataVersion,
            maxAttendees,
            sendUpdates,
            requestBody: data,
        });
        console.log(res.data);
        console.log(res?.data, ' res?.data from googleCreateEventWithId');
    }
    catch (e) {
        console.log(e, ' unable to create google event with id');
    }
};
export const createGoogleEvent = async (userId, calendarId, clientType, generatedId, endDateTime, startDateTime, conferenceDataVersion, maxAttendees, sendUpdates, anyoneCanAddSelf, attendees, conferenceData, summary, description, timezone, startDate, endDate, extendedProperties, guestsCanInviteOthers, guestsCanModify, guestsCanSeeOtherGuests, originalStartDateTime, originalStartDate, recurrence, reminders, source, status, transparency, visibility, iCalUID, attendeesOmitted, hangoutLink, privateCopy, locked, attachments, eventType, location, colorId) => {
    try {
        console.log(generatedId, conferenceDataVersion, conferenceData, ' generatedId, conferenceDataVersion, conferenceData inside createGoogleEvent');
        const token = await getGoogleAPIToken(userId, googleCalendarResource, clientType);
        const googleCalendar = google.calendar({
            version: 'v3',
            headers: {
                Authorization: `Bearer ${token}`,
            },
        });
        let data = {};
        if (endDateTime && timezone && !endDate) {
            const end = {
                dateTime: endDateTime,
                timeZone: timezone,
            };
            data.end = end;
        }
        if (endDate && timezone && !endDateTime) {
            const end = {
                date: dayjs(endDate.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            data.end = end;
        }
        if (startDate && timezone && !startDateTime) {
            const start = {
                date: dayjs(startDate.slice(0, 19))
                    .tz(timezone, true)
                    .format('YYYY-MM-DD'),
                timeZone: timezone,
            };
            data.start = start;
        }
        if (startDateTime && timezone && !startDate) {
            const start = {
                dateTime: startDateTime,
                timeZone: timezone,
            };
            data.start = start;
        }
        if (originalStartDate && timezone && !originalStartDateTime) {
            const originalStartTime = {
                date: originalStartDate,
                timeZone: timezone,
            };
            data.originalStartTime = originalStartTime;
        }
        if (originalStartDateTime && timezone && !originalStartDate) {
            const originalStartTime = {
                dateTime: dayjs(originalStartDateTime).tz(timezone, true).format(),
                timeZone: timezone,
            };
            data.originalStartTime = originalStartTime;
        }
        if (anyoneCanAddSelf) {
            data = { ...data, anyoneCanAddSelf };
        }
        if (attendees?.[0]?.email) {
            data = { ...data, attendees };
        }
        if (conferenceData?.createRequest) {
            data = {
                ...data,
                conferenceData: {
                    createRequest: {
                        conferenceSolutionKey: {
                            type: conferenceData.type,
                        },
                        requestId: conferenceData?.requestId || uuid(),
                    },
                },
            };
        }
        else if (conferenceData?.entryPoints?.[0]) {
            data = {
                ...data,
                conferenceData: {
                    conferenceSolution: {
                        iconUri: conferenceData?.iconUri,
                        key: {
                            type: conferenceData?.type,
                        },
                        name: conferenceData?.name,
                    },
                    entryPoints: conferenceData?.entryPoints,
                },
            };
        }
        if (description?.length > 0) {
            data = { ...data, description };
        }
        if (extendedProperties?.private || extendedProperties?.shared) {
            data = { ...data, extendedProperties };
        }
        if (guestsCanInviteOthers) {
            data = { ...data, guestsCanInviteOthers };
        }
        if (guestsCanModify) {
            data = { ...data, guestsCanModify };
        }
        if (guestsCanSeeOtherGuests) {
            data = { ...data, guestsCanSeeOtherGuests };
        }
        if (locked) {
            data = { ...data, locked };
        }
        if (privateCopy) {
            data = { ...data, privateCopy };
        }
        if (recurrence?.[0]) {
            data = { ...data, recurrence };
        }
        if (reminders?.overrides?.length > 0 || reminders?.useDefault) {
            data = { ...data, reminders };
        }
        if (source?.title || source?.url) {
            data = { ...data, source };
        }
        if (attachments?.[0]?.fileId) {
            data = { ...data, attachments };
        }
        if (eventType?.length > 0) {
            data = { ...data, eventType };
        }
        if (status) {
            data = { ...data, status };
        }
        if (transparency) {
            data = { ...data, transparency };
        }
        if (visibility) {
            data = { ...data, visibility };
        }
        if (iCalUID?.length > 0) {
            data = { ...data, iCalUID };
        }
        if (attendeesOmitted) {
            data = { ...data, attendeesOmitted };
        }
        if (hangoutLink?.length > 0) {
            data = { ...data, hangoutLink };
        }
        if (summary?.length > 0) {
            data = { ...data, summary };
        }
        if (location?.length > 0) {
            data = { ...data, location };
        }
        if (colorId) {
            data.colorId = colorId;
        }
        const res = await googleCalendar.events.insert({
            calendarId,
            conferenceDataVersion,
            maxAttendees,
            sendUpdates,
            requestBody: data,
        });
        console.log(res.data);
        console.log(res?.data, ' res?.data from googleCreateEvent');
        return {
            id: `${res?.data?.id}#${calendarId}`,
            googleEventId: res?.data?.id,
            generatedId,
            calendarId,
            generatedEventId: generatedId.split('#')[0],
        };
    }
    catch (e) {
        console.log(e, ' createGoogleEvent');
    }
};
export const postPlannerModifyEventInCalendar = async (newEvent, userId, method, resource, isTimeBlocking, clientType, newReminders, attendees, conference) => {
    try {
        console.log(newEvent, ' newEvent inside postPlannerModifyEventInCalendar');
        if (method === 'update') {
            if (resource === googleCalendarResource) {
                const googleReminders = newReminders?.length > 0
                    ? formatRemindersForGoogle(newReminders)
                    : undefined;
                await patchGoogleEvent(userId, newEvent.calendarId, newEvent.eventId, clientType, newEvent.endDate, newEvent.startDate, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, newEvent.timezone, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, googleReminders, undefined, undefined, newEvent.transparency, newEvent?.visibility, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, newEvent?.colorId);
                return newEvent.id;
            }
        }
        else if (method === 'create') {
            console.log(newEvent, ' newEvent inside create inside postPlannerModifyEventInCalendar');
            if (resource === googleCalendarResource) {
                const googleReminders = newReminders?.length > 0
                    ? formatRemindersForGoogle(newReminders)
                    : undefined;
                const idResponseBody = await createGoogleEvent(userId, newEvent.calendarId, clientType, newEvent?.id, newEvent?.endDate, newEvent?.startDate, conference?.id ? 1 : 0, undefined, undefined, undefined, attendees?.map((a) => ({
                    email: a?.primaryEmail?.trim(),
                    id: a?.id,
                    displayName: a?.name,
                })), conference?.id
                    ? {
                        type: conference?.app === 'zoom' ? 'addOn' : 'hangoutsMeet',
                        name: conference?.name,
                        conferenceId: conference?.id,
                        entryPoints: conference?.entryPoints,
                        createRequest: conference?.app === 'google'
                            ? {
                                requestId: conference?.requestId,
                                conferenceSolutionKey: {
                                    type: 'hangoutsMeet',
                                },
                            }
                            : undefined,
                    }
                    : undefined, newEvent.summary || newEvent?.title, newEvent.notes, newEvent.timezone, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, newEvent?.recurrence, googleReminders, undefined, undefined, newEvent.transparency, undefined, undefined, undefined, undefined, undefined, undefined, undefined, isTimeBlocking ? 'focusTime' : 'default', undefined, newEvent?.colorId);
                console.log(idResponseBody, newEvent?.endDate, newEvent?.startDate, ' idResponseBody, newEvent?.endDate,  newEvent?.startDate');
                return idResponseBody;
            }
        }
        else if (method === 'createWithId') {
            console.log(newEvent, ' newEvent inside createWithId inside postPlannerModifyEventInCalendar');
            if (resource === googleCalendarResource) {
                const googleReminders = newReminders?.length > 0
                    ? formatRemindersForGoogle(newReminders)
                    : undefined;
                await createGoogleEventWithId(userId, newEvent.calendarId, clientType, newEvent?.eventId, newEvent?.endDate, newEvent?.startDate, conference?.id ? 1 : 0, undefined, undefined, undefined, attendees?.map((a) => ({
                    email: a?.primaryEmail,
                    id: a?.id,
                    displayName: a?.name,
                })), conference?.id
                    ? {
                        type: conference?.app === 'zoom' ? 'addOn' : 'hangoutsMeet',
                        name: conference?.name,
                        conferenceId: conference?.id,
                        entryPoints: conference?.entryPoints,
                    }
                    : undefined, newEvent.summary || newEvent?.title, newEvent.notes, newEvent.timezone, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, newEvent?.recurrence, googleReminders, undefined, undefined, newEvent.transparency, undefined, undefined, undefined, undefined, undefined, undefined, undefined, isTimeBlocking ? 'focusTime' : 'default', undefined, newEvent?.colorId);
            }
        }
    }
    catch (e) {
        console.log(e, ' unable to update event');
        console.log(newEvent?.id, newEvent?.endDate, newEvent?.startDate, ' error - newEvent?.id, newEvent?.endDate,  newEvent?.startDate');
    }
};
export const upsertEventsPostPlanner = async (events) => {
    try {
        const operationName = 'InsertEvent';
        const query = `
            mutation InsertEvent($events: [Event_insert_input!]!) {
                insert_Event(
                    objects: $events,
                    on_conflict: {
                        constraint: Event_pkey,
                        update_columns: [
                            userId,
                            title,
                            startDate,
                            endDate,
                            allDay,
                            recurrenceRule,
                            location,
                            notes,
                            attachments,
                            links,
                            timezone,
                            createdDate,
                            deleted,
                            taskId,
                            taskType,
                            priority,
                            followUpEventId,
                            isFollowUp,
                            isPreEvent,
                            isPostEvent,
                            preEventId,
                            postEventId,
                            modifiable,
                            forEventId,
                            conferenceId,
                            maxAttendees,
                            sendUpdates,
                            anyoneCanAddSelf,
                            guestsCanInviteOthers,
                            guestsCanSeeOtherGuests,
                            originalStartDate,
                            originalAllDay,
                            status,
                            summary,
                            transparency,
                            visibility,
                            recurringEventId,
                            updatedAt,
                            iCalUID,
                            htmlLink,
                            colorId,
                            creator,
                            organizer,
                            endTimeUnspecified,
                            recurrence,
                            originalTimezone,
                            attendeesOmitted,
                            extendedProperties,
                            hangoutLink,
                            guestsCanModify,
                            locked,
                            source,
                            eventType,
                            privateCopy,
                            calendarId,
                            backgroundColor,
                            foregroundColor,
                            useDefaultAlarms,
                            positiveImpactScore,
                            negativeImpactScore,
                            positiveImpactDayOfWeek,
                            positiveImpactTime,
                            negativeImpactDayOfWeek,
                            negativeImpactTime,
                            preferredDayOfWeek,
                            preferredTime,
                            isExternalMeeting,
                            isExternalMeetingModifiable,
                            isMeetingModifiable,
                            isMeeting,
                            dailyTaskList,
                            weeklyTaskList,
                            isBreak,
                            preferredStartTimeRange,
                            preferredEndTimeRange,
                            copyAvailability,
                            copyTimeBlocking,
                            copyTimePreference,
                            copyReminders,
                            copyPriorityLevel,
                            copyModifiable,
                            copyCategories,
                            copyIsBreak,
                            timeBlocking,
                            userModifiedAvailability,
                            userModifiedTimeBlocking,
                            userModifiedTimePreference,
                            userModifiedReminders,
                            userModifiedPriorityLevel,
                            userModifiedCategories,
                            userModifiedModifiable,
                            userModifiedIsBreak,
                            hardDeadline,
                            softDeadline,
                            copyIsMeeting,
                            copyIsExternalMeeting,
                            userModifiedIsMeeting,
                            userModifiedIsExternalMeeting,
                            duration,
                            copyDuration,
                            userModifiedDuration,
                            unlink,
                            copyColor,
                            userModifiedColor,
                            byWeekDay,
                            localSynced,
                            meetingId,
                            eventId,
                        ]
                    }){
                    returning {
                        id
                    }
                    affected_rows
                }
            }
        `;
        _.uniqBy(events, 'id').forEach((e) => console.log(e?.id, e, 'id, e inside upsertEventsPostPlanner '));
        const variables = {
            events: _.uniqBy(events, 'id'),
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response, response?.data?.insert_Event?.affected_rows, ' response after upserting events');
        response?.data?.insert_Event?.returning?.forEach((e) => console.log(e, ' returning  response after upserting events'));
        return response;
    }
    catch (e) {
        console.log(e, ' unable to update event');
    }
};
export const insertAttendeesforEvent = async (attendees) => {
    try {
        if (!(attendees?.filter((a) => !!a?.eventId)?.length > 0)) {
            return;
        }
        const operationName = 'InsertAttendeesForEvent';
        const query = `
            mutation InsertAttendeesForEvent($attendees: [Attendee_insert_input!]!) {
                insert_Attendee(objects: $attendees) {
                    affected_rows
                    returning {
                        additionalGuests
                        comment
                        contactId
                        createdDate
                        deleted
                        emails
                        eventId
                        id
                        imAddresses
                        name
                        optional
                        phoneNumbers
                        resource
                        responseStatus
                        updatedAt
                        userId
                    }
                }
            }
        `;
        const variables = {
            attendees,
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response?.data?.insert_Attendee?.returning, ' this is response in insertAttendees');
        response?.data?.insert_Attendee?.returning.forEach((r) => console.log(r, ' response in insertAttendees'));
    }
    catch (e) {
        console.log(e, ' unable to insert Attendees for new event');
    }
};
export const deleteAttendeesWithIds = async (eventIds, userId) => {
    try {
        if (!(eventIds?.filter((e) => !!e)?.length > 0)) {
            return;
        }
        eventIds.forEach((e) => console.log(e, ' eventIds inside deleteRemindersWithIds'));
        const operationName = 'DeleteAttendeesWithEventIds';
        const query = `
            mutation DeleteAttendeesWithEventIds($userId: uuid!, $eventIds: [String!]!) {
                delete_Attendee(where: {userId: {_eq: $userId}, eventId: {_in: $eventIds}}) {
                    affected_rows
                    returning {
                        additionalGuests
                        comment
                        contactId
                        createdDate
                        deleted
                        emails
                        eventId
                        id
                        imAddresses
                        name
                        optional
                        phoneNumbers
                        resource
                        responseStatus
                        updatedAt
                        userId
                    }
                }
            }

    `;
        const variables = {
            userId,
            eventIds,
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response, ' this is response in deleteAttendeesWithIds');
    }
    catch (e) {
        console.log(e, ' deleteAttendeesWithIds');
    }
};
export const deleteRemindersWithIds = async (eventIds, userId) => {
    try {
        if (!(eventIds?.filter((e) => !!e)?.length > 0)) {
            return;
        }
        eventIds.forEach((e) => console.log(e, ' eventIds inside deleteRemindersWithIds'));
        const operationName = 'deleteRemindersWithIds';
        const query = `
      mutation deleteRemindersWithIds($userId: uuid!, $eventIds: [String!]!) {
        delete_Reminder(where: {userId: {_eq: $userId}, eventId: {_in: $eventIds}}) {
          affected_rows
        }
      }
    `;
        const variables = {
            userId,
            eventIds,
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response, ' this is response in deleteRemindersWithIds');
    }
    catch (e) {
        console.log(e, ' deleteRemindersWithIds');
    }
};
export const insertReminders = async (reminders) => {
    try {
        if (!(reminders?.filter((e) => !!e?.eventId)?.length > 0)) {
            return;
        }
        reminders.forEach((r) => console.log(r, ' reminder inside insertReminders'));
        const operationName = 'InsertReminder';
        const query = `
            mutation InsertReminder($reminders: [Reminder_insert_input!]!) {
                insert_Reminder(objects: $reminders) {
                    affected_rows
                    returning {
                        id
                        createdDate
                        deleted
                        eventId
                        method
                        minutes
                        reminderDate
                        timezone
                        updatedAt
                        useDefault
                        userId
                    }
                }
            }
        `;
        const variables = {
            reminders,
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response?.data?.insert_Reminder?.returning, ' this is response in insertReminders');
        response?.data?.insert_Reminder?.returning.forEach((r) => console.log(r, ' response in insertReminder'));
    }
    catch (e) {
        console.log(e, ' unable to insertReminders');
    }
};
export const deletePreferredTimeRangesForEvents = async (eventIds) => {
    try {
        const operationName = 'DeletePreferredTimeRangesGivenEvents';
        const query = `mutation DeletePreferredTimeRangesGivenEvents($eventIds: [String!]!) {
                delete_PreferredTimeRange(where: {eventId: {_in: $eventIds}}) {
                    affected_rows
                }
            }
        `;
        const variables = {
            eventIds,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res?.data?.delete_PreferredTimeRange?.affected_rows, ' this is response affected_rows in deletePreferredTimeRangesForEvent');
    }
    catch (e) {
        console.log(e, ' unable to delete preferred time ranges');
    }
};
export const deletePreferredTimeRangesForEvent = async (eventId) => {
    try {
        if (!eventId) {
            console.log(eventId, ' no eventId inside deletePreferredTimeRangesForEvent');
            return;
        }
        const operationName = 'DeletePreferredTimeRangesGivenEvent';
        const query = `
      mutation DeletePreferredTimeRangesGivenEvent($eventId: String!) {
        delete_PreferredTimeRange(where: {eventId: {_eq: $eventId}}) {
          affected_rows
        }
      }
    `;
        const variables = {
            eventId,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res?.data?.delete_PreferredTimeRange?.affected_rows, ' this is response affected_rows in deletePreferredTimeRangesForEvent');
    }
    catch (e) {
        console.log(e, ' unable to deletePreferredTimeRangesForEvent');
    }
};
export const insertPreferredTimeRanges = async (preferredTimeRanges) => {
    try {
        console.log(preferredTimeRanges, ' preferredTimeRanges inside insertPreferredTimeRanges');
        if (!(preferredTimeRanges?.length > 0)) {
            console.log('no preferredTimeRanges inside insertPreferredTimeRanges');
            return;
        }
        const operationName = 'InsertPreferredTimeRanges';
        const query = `
      mutation InsertPreferredTimeRanges($preferredTimeRanges: [PreferredTimeRange_insert_input!]!) {
        insert_PreferredTimeRange(objects: $preferredTimeRanges) {
          affected_rows
          returning {
            createdDate
            dayOfWeek
            endTime
            eventId
            id
            startTime
            updatedAt
            userId
          }
        }
      }
    `;
        const variables = {
            preferredTimeRanges,
        };
        const response = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(response, ' response inside insert_PreferredTimeRanges');
        console.log(response?.data, ' response?.data inside insert_PreferredTimeRanges');
        console.log(response?.data?.insert_PreferredTimeRange?.affected_rows, ' affected_rows inside insertPreferredTimeRanges');
        response?.data?.insert_PreferredTimeRange?.returning?.map((pt) => console.log(pt, ' returning inside insertPreferredTimeRanges'));
    }
    catch (e) {
        console.log(e, ' unable to insert preferred time ranges');
    }
};
export const updateAllCalendarEventsPostPlanner = async (plannerEvents, eventsToValidate, allEvents, oldEvents, hostTimezone, hostBufferTimes, newHostReminders, breaks, oldAttendeeExternalEvents, isReplan, originalGoogleEventIdToUpdate, originalCalendarIdToUpdate) => {
    try {
        eventsToValidate.forEach((e) => validateEventsFromOptaplanner(e));
        const eventsToUpdate = plannerEvents.map((e) => formatPlannerEventsToEventAndAdjustTime(e, allEvents?.find((event) => event.id === e[0].eventId), hostTimezone));
        eventsToUpdate.forEach((e) => console.log(e, ' eventsToUpdate inside updateAllCalendarEventsPostPlanner'));
        const filteredAllEvents = allEvents
            .map((e) => {
            const foundIndex = oldAttendeeExternalEvents?.findIndex((a) => a?.id === e?.id);
            if (foundIndex > -1) {
                return null;
            }
            return e;
        })
            ?.filter((e) => e !== null);
        const eventsWithMeetingIds = filteredAllEvents?.filter((e) => !!e?.meetingId) || [];
        const meetingIdsOfInternalAttendees = _.uniqBy(filteredAllEvents, 'meetingId')
            ?.filter((e) => !!e?.meetingId)
            ?.map((e) => e.meetingId);
        console.log(eventsWithMeetingIds, ' eventsWithMeetingIds');
        console.log(meetingIdsOfInternalAttendees, ' meetingIdsOfInternalAttendees');
        const eventsToBeCreatedWithNewId = [];
        if (meetingIdsOfInternalAttendees &&
            meetingIdsOfInternalAttendees?.length > 0) {
            const meetingAssists = (await listMeetingAssistsGivenMeetingIds(meetingIdsOfInternalAttendees)) || [];
            for (const meetingAssist of meetingAssists) {
                const attendees = await listMeetingAssistAttendeesGivenMeetingId(meetingAssist?.id);
                const externalAttendees = attendees?.filter((a) => !!a?.externalAttendee);
                const eventForMeetingIdHostOnly = eventsWithMeetingIds
                    ?.filter((e) => e?.meetingId === meetingAssist?.id)
                    ?.filter((e) => e?.userId === meetingAssist?.userId)
                    ?.filter((e) => e?.method === 'create')
                    ?.filter((e) => {
                    const externalIndex = externalAttendees?.findIndex((a) => a?.userId === e?.userId);
                    if (externalIndex > -1) {
                        return false;
                    }
                    return true;
                })?.[0];
                const eventsForMeetingIdSinHost = eventsWithMeetingIds
                    ?.filter((e) => e?.meetingId === meetingAssist?.id)
                    ?.filter((e) => e?.userId !== meetingAssist?.userId)
                    ?.filter((e) => e?.method === 'create')
                    ?.filter((e) => {
                    const externalIndex = externalAttendees?.findIndex((a) => a?.userId === e?.userId);
                    if (externalIndex > -1) {
                        return false;
                    }
                    return true;
                });
                console.log(eventsForMeetingIdSinHost, ' eventsForMeetingIdSinHost inside for loop meetingIdsOfInternalAttendees');
                for (const eventForMeetingIdSinHost of eventsForMeetingIdSinHost) {
                    eventForMeetingIdSinHost.startDate = dayjs(eventForMeetingIdHostOnly.startDate.slice(0, 19))
                        .tz(eventForMeetingIdHostOnly.timezone, true)
                        .tz(eventForMeetingIdSinHost.timezone)
                        .format();
                    eventForMeetingIdSinHost.endDate = dayjs(eventForMeetingIdHostOnly.endDate.slice(0, 19))
                        .tz(eventForMeetingIdHostOnly.timezone, true)
                        .tz(eventForMeetingIdSinHost.timezone)
                        .format();
                    eventsToBeCreatedWithNewId.push({
                        meetingId: meetingAssist?.id,
                        event: eventForMeetingIdSinHost,
                    });
                }
                const eventsForMeetingIdSinHostAnyMethod = eventsWithMeetingIds
                    ?.filter((e) => e?.meetingId === meetingAssist?.id)
                    ?.filter((e) => e?.userId !== meetingAssist?.userId)
                    ?.filter((e) => {
                    const externalIndex = externalAttendees?.findIndex((a) => a?.userId === e?.userId);
                    if (externalIndex > -1) {
                        return false;
                    }
                    return true;
                });
                const eventForMeetingIdHostOnlyAnyMethod = eventsWithMeetingIds
                    ?.filter((e) => e?.meetingId === meetingAssist?.id)
                    ?.filter((e) => e?.userId === meetingAssist?.userId)
                    ?.filter((e) => {
                    const externalIndex = externalAttendees?.findIndex((a) => a?.userId === e?.userId);
                    if (externalIndex > -1) {
                        return false;
                    }
                    return true;
                })?.[0];
                if (eventForMeetingIdHostOnlyAnyMethod?.id) {
                    eventsForMeetingIdSinHostAnyMethod?.forEach((e) => {
                        e.startDate = dayjs(eventForMeetingIdHostOnlyAnyMethod.startDate.slice(0, 19))
                            .tz(eventForMeetingIdHostOnlyAnyMethod.timezone, true)
                            .tz(e.timezone)
                            .format();
                        e.endDate = dayjs(eventForMeetingIdHostOnlyAnyMethod.endDate.slice(0, 19))
                            .tz(eventForMeetingIdHostOnlyAnyMethod.timezone, true)
                            .tz(e.timezone)
                            .format();
                    });
                }
            }
        }
        const filteredEventsToUpdate = eventsToUpdate
            .filter((e1) => {
            const foundOldEvent = oldEvents?.find((e2) => e2?.id === e1?.id);
            console.log(foundOldEvent, ' foundOldEvent inside filter');
            if (foundOldEvent) {
                return compareEventsToFilterUnequalEvents(e1, foundOldEvent);
            }
            return true;
        })
            ?.filter((e) => {
            const eventExists = oldAttendeeExternalEvents?.find((a) => a?.id === e?.id);
            console.log(eventExists, ' eventExists');
            return !eventExists;
        })
            ?.filter((e) => {
            const createEventSinHostIndex = eventsToBeCreatedWithNewId?.findIndex((c) => c?.event?.id === e?.id);
            if (createEventSinHostIndex > -1) {
                return false;
            }
            return true;
        })
            ?.filter((e) => !!e);
        filteredEventsToUpdate.forEach((e1) => console.log(e1, oldEvents?.find((e2) => e2?.id === e1?.id), '  filteredEventsToUpdate'));
        let createPromises = [];
        let updatePromises = [];
        const eventsToUpsert = [];
        const deleteReminders = [];
        const insertReminderObjects = [];
        const insertPreferredTimeRangeObjects = [];
        const deletePreferredTimeRangeObjects = [];
        const insertAttendeeObjects = [];
        const eventToFilterForUpdateConferences = [];
        const eventsToRemove = [];
        hostBufferTimes?.forEach((b) => console.log(b.beforeEvent, b.afterEvent, ' bufferTimes before eventToUpdate loop inside updateAllCalendarEventsPostPlanner'));
        for (const eventToUpdate of filteredEventsToUpdate) {
            console.log(eventToUpdate, ' eventToUpdate inside updateAllCalendarEventsPostPlanner');
            const { resource } = await getCalendarWithId(eventToUpdate.calendarId);
            const calendarIntegration = await getCalendarIntegration(eventToUpdate.userId, resource);
            const clientType = calendarIntegration?.clientType;
            // --- REPLAN LOGIC ---
            if (isReplan &&
                originalGoogleEventIdToUpdate &&
                originalCalendarIdToUpdate &&
                eventToUpdate.eventId === originalGoogleEventIdToUpdate && // eventId is Google's ID
                eventToUpdate.calendarId === originalCalendarIdToUpdate) {
                console.log(`Replanning: Updating event ${originalGoogleEventIdToUpdate} in calendar ${originalCalendarIdToUpdate}`);
                // Ensure attendees are in GoogleAttendeeType format if needed by patchGoogleEvent
                const googleAttendees = eventToUpdate.attendees?.map((att) => ({
                    email: att.primaryEmail || att.emails?.[0]?.value,
                    displayName: att.name,
                    // We might need to map responseStatus, optional, etc. if available and needed
                })) || [];
                // Call postPlannerModifyEventInCalendar with 'update'
                // IMPORTANT: newEvent.eventId for patchGoogleEvent should be the originalGoogleEventIdToUpdate
                // The eventToUpdate contains the new start/end times and other modified properties.
                updatePromises.push(postPlannerModifyEventInCalendar({ ...eventToUpdate, eventId: originalGoogleEventIdToUpdate }, // Pass original Google ID for update
                eventToUpdate.userId, 'update', resource, false, // Assuming the main replanned event is not inherently a "time blocking" break
                clientType, remindersObjectForEvent?.reminders, googleAttendees, // Pass the full final list of attendees
                undefined // Conference data - handle if it can change during replan
                ));
                eventToUpdate.method = null; // Mark as processed for upsert logic
                eventsToUpsert.push(eventToUpdate); // Still upsert to Hasura to reflect changes
                // Handle reminders and preferred time ranges for the updated event
                if (remindersObjectForEvent?.reminders?.length > 0) {
                    const oldReminders = await listRemindersForEvent(originalGoogleEventIdToUpdate, eventToUpdate.userId); // Use original ID
                    if (oldReminders?.length > 0) {
                        deleteReminders.push(...oldReminders.map((r) => ({
                            ...r,
                            eventId: originalGoogleEventIdToUpdate,
                        })));
                    }
                    insertReminderObjects.push(...remindersObjectForEvent.reminders.map((r) => ({
                        ...r,
                        eventId: originalGoogleEventIdToUpdate,
                    })));
                }
                const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(originalGoogleEventIdToUpdate); // Use original ID
                if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                    if (oldPreferredTimeRanges?.length > 0) {
                        deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges.map((ptr) => ({
                            ...ptr,
                            eventId: originalGoogleEventIdToUpdate,
                        })));
                    }
                    if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                        insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges.map((ptr) => ({
                            ...ptr,
                            eventId: originalGoogleEventIdToUpdate,
                        })));
                    }
                }
                continue; // Skip the create logic below for this event
            }
            // --- END REPLAN LOGIC ---
            const beforeEventIndex = hostBufferTimes?.findIndex((bufferTimes) => bufferTimes?.beforeEvent?.id === eventToUpdate.id);
            console.log(beforeEventIndex, resource, ' beforeEventIndex, resource ');
            const afterEventIndex = hostBufferTimes?.findIndex((bufferTimes) => bufferTimes?.afterEvent?.id === eventToUpdate.id);
            console.log(afterEventIndex, resource, ' afterEventIndex, resource ');
            const remindersObjectForEvent = newHostReminders?.find((reminder) => reminder.eventId === eventToUpdate.id);
            const breakIndex = breaks?.findIndex((breakEvent) => breakEvent.id === eventToUpdate.id);
            if (beforeEventIndex > -1) {
                console.log(beforeEventIndex, resource, ' beforeEventIndex, resource');
                if (resource === googleCalendarResource) {
                    console.log(eventToUpdate.id, beforeEventIndex, ' updatedEvent.id, beforeEventIndex, ');
                    if (hostBufferTimes?.[beforeEventIndex]?.beforeEvent?.method ===
                        'create') {
                        console.log(eventToUpdate.id, beforeEventIndex, ' updatedEvent.id, beforeEventIndex, inside if (timeBlocking?.[beforeEventIndex]?.beforeEvent?.method === create)');
                        createPromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate.userId, 'create', resource, true, // isTimeBlocking for buffer events
                        clientType, remindersObjectForEvent?.reminders, // Pass reminders if any
                        undefined, // Attendees for buffer events? Usually none.
                        undefined // Conference for buffer events? Usually none.
                        ));
                        eventToUpdate.method = null;
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            insertReminderObjects.push(...remindersObjectForEvent.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                    }
                    else if (hostBufferTimes?.[beforeEventIndex]?.beforeEvent?.method ===
                        'update') {
                        const oldEventToUpdate = filteredAllEvents?.find((e) => e?.id === eventToUpdate?.id);
                        if (!eventToUpdate?.modifiable && oldEventToUpdate?.id) {
                            eventToUpdate.startDate = oldEventToUpdate.startDate;
                            eventToUpdate.endDate = oldEventToUpdate.endDate;
                            eventToUpdate.timezone = oldEventToUpdate.timezone;
                        }
                        updatePromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate?.userId, 'update', resource, true, // isTimeBlocking for buffer events
                        clientType, remindersObjectForEvent?.reminders, // Pass reminders if any
                        undefined, // Attendees
                        undefined // Conference
                        ));
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            const oldReminders = await listRemindersForEvent(eventToUpdate?.id, eventToUpdate?.userId);
                            if (oldReminders?.length > 0) {
                                deleteReminders.push(...oldReminders);
                            }
                            insertReminderObjects.push(...remindersObjectForEvent.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                    }
                }
                eventsToUpsert.push(eventToUpdate);
            }
            else if (afterEventIndex > -1) {
                console.log(afterEventIndex, resource, ' afterEventIndex, resource');
                if (resource === googleCalendarResource) {
                    if (hostBufferTimes?.[afterEventIndex]?.afterEvent?.method === 'create') {
                        createPromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate.userId, 'create', resource, true, // isTimeBlocking for buffer events
                        clientType, undefined, // Reminders for buffer events?
                        undefined, // Attendees
                        undefined // Conference
                        ));
                        eventToUpdate.method = null;
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            insertReminderObjects.push(...remindersObjectForEvent.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                    }
                    else if (hostBufferTimes?.[afterEventIndex]?.afterEvent?.method === 'update') {
                        const oldEventToUpdate = filteredAllEvents?.find((e) => e?.id === eventToUpdate?.id);
                        if (!eventToUpdate?.modifiable && oldEventToUpdate?.id) {
                            eventToUpdate.startDate = oldEventToUpdate.startDate;
                            eventToUpdate.endDate = oldEventToUpdate.endDate;
                            eventToUpdate.timezone = oldEventToUpdate.timezone;
                        }
                        updatePromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate?.userId, 'update', resource, true, // isTimeBlocking for buffer events
                        clientType, undefined, // Reminders
                        undefined, // Attendees
                        undefined // Conference
                        ));
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            const oldReminders = await listRemindersForEvent(eventToUpdate?.id, eventToUpdate?.userId);
                            if (oldReminders?.length > 0) {
                                deleteReminders.push(...oldReminders);
                            }
                            insertReminderObjects.push(...remindersObjectForEvent.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                    }
                }
                eventsToUpsert.push(eventToUpdate);
            }
            else if (breakIndex > -1) {
                console.log(breakIndex, breaks?.[breakIndex]?.method, resource, ' breakIndex, breaks?.[breakIndex]?.method, resource');
                if (resource === googleCalendarResource) {
                    if (breaks?.[breakIndex]?.method === 'create') {
                        createPromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate.userId, 'create', resource, false, // Not a break event itself
                        clientType, remindersObjectForEvent?.reminders, // Pass reminders if any
                        undefined, // Attendees
                        undefined // Conference
                        ));
                        eventToUpdate.method = null;
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            insertReminderObjects.push(...remindersObjectForEvent.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                        breaks[breakIndex].method = null;
                    }
                    else if (breaks?.[breakIndex]?.method === 'update') {
                        const oldEventToUpdate = filteredAllEvents?.find((e) => e?.id === eventToUpdate?.id);
                        if (!eventToUpdate?.modifiable && oldEventToUpdate?.id) {
                            eventToUpdate.startDate = oldEventToUpdate.startDate;
                            eventToUpdate.endDate = oldEventToUpdate.endDate;
                            eventToUpdate.timezone = oldEventToUpdate.timezone;
                        }
                        updatePromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate.userId, 'update', resource, false, // Not a break event
                        clientType, remindersObjectForEvent?.reminders, // Pass reminders if any
                        undefined, // Attendees
                        undefined // Conference
                        ));
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            const oldReminders = await listRemindersForEvent(eventToUpdate?.id, eventToUpdate?.userId);
                            if (oldReminders?.length > 0) {
                                deleteReminders.push(...oldReminders);
                            }
                            insertReminderObjects.push(...remindersObjectForEvent.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                        breaks[breakIndex].method = null;
                    }
                }
                eventsToUpsert.push(eventToUpdate);
            }
            else {
                if (resource === googleCalendarResource) {
                    console.log(eventToUpdate, ' updatedEvent inside else inside const updatedEvent of updatedEvents inside updateAllCalendarEventsPostPlanner');
                    if (eventToUpdate?.method === 'create') {
                        if (eventToUpdate?.meetingId) {
                            const meetingAssist = await getMeetingAssist(eventToUpdate?.meetingId);
                            if (meetingAssist?.userId !== eventToUpdate?.userId) {
                                eventsToRemove.push(eventToUpdate);
                                console.log(meetingAssist?.userId, ' meetingAssist?.userId');
                                console.log(eventToUpdate?.userId, ' eventToUpdate?.userId');
                                console.log(eventToUpdate?.id, 'event with meetingAssist not host continue');
                                continue;
                            }
                            else if (meetingAssist?.userId === eventToUpdate?.userId) {
                                console.log('get attendees called inside method create updateAllCalendarEventsPostPlanner');
                                const attendees = await listMeetingAssistAttendeesGivenMeetingId(eventToUpdate?.meetingId);
                                console.log(attendees, ' attendees inside method create updateAllCalendarEventsPostPlanner');
                                let conference = {};
                                if (meetingAssist?.enableConference) {
                                    console.log(meetingAssist?.enableConference, ' meetingAssist?.enableConference');
                                    const zoomToken = await getZoomAPIToken(meetingAssist?.userId);
                                    conference = zoomToken
                                        ? {}
                                        : {
                                            id: uuid(),
                                            userId: meetingAssist?.userId,
                                            calendarId: eventToUpdate?.calendarId,
                                            app: 'google',
                                            name: eventToUpdate?.summary,
                                            notes: eventToUpdate?.notes,
                                            updatedAt: dayjs().format(),
                                            createdDate: dayjs().format(),
                                            deleted: false,
                                            isHost: true,
                                        };
                                    console.log(conference, ' conference before if (zoomToken)');
                                    if (zoomToken) {
                                        console.log(zoomToken, ' zoomToken inside if (zoomToken)');
                                        const hostAttendee = attendees?.find((a) => a?.userId === meetingAssist?.userId);
                                        console.log(hostAttendee, ' hostAttendee inside if (zoomToken)');
                                        const zoomObject = await createZoomMeeting(zoomToken, eventToUpdate?.startDate, meetingAssist?.timezone, eventToUpdate?.summary, meetingAssist?.duration, hostAttendee?.name, hostAttendee?.primaryEmail, attendees?.map((a) => a?.primaryEmail));
                                        console.log(zoomObject, ' zoomObject after createZoomMeeting');
                                        if (zoomObject) {
                                            conference = {
                                                id: `${zoomObject?.id}`,
                                                userId: eventToUpdate?.userId,
                                                calendarId: eventToUpdate?.calendarId,
                                                app: 'zoom',
                                                name: zoomObject?.agenda,
                                                notes: zoomObject?.agenda,
                                                joinUrl: zoomObject?.join_url,
                                                startUrl: zoomObject?.start_url,
                                                isHost: true,
                                                updatedAt: dayjs().format(),
                                                createdDate: dayjs().format(),
                                                deleted: false,
                                                entryPoints: [
                                                    {
                                                        entryPointType: 'video',
                                                        label: zoomObject?.join_url,
                                                        password: zoomObject?.password,
                                                        uri: zoomObject?.join_url,
                                                    },
                                                ],
                                            };
                                            eventToFilterForUpdateConferences.push(eventToUpdate);
                                        }
                                    }
                                }
                                console.log(conference, ' conference before createPromises postPlannerModifyEventInCalendar');
                                if (meetingAssist?.lockAfter) {
                                    eventToUpdate.modifiable = false;
                                }
                                createPromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate.userId, 'create', resource, false, clientType, undefined, attendees, conference?.id
                                    ? conference
                                    : undefined));
                                if (conference?.id) {
                                    await insertConference(conference);
                                    eventToUpdate.conferenceId = conference?.id;
                                }
                                if (remindersObjectForEvent?.reminders?.length > 0) {
                                    insertReminderObjects.push(...remindersObjectForEvent?.reminders);
                                }
                                if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                    insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                                }
                                const attendeesToBeInsert = attendees?.map((a) => ({
                                    id: a?.id,
                                    userId: a?.userId,
                                    contactId: a?.contactId,
                                    emails: a?.emails,
                                    phoneNumbers: a?.phoneNumbers,
                                    imAddresses: a?.imAddresses,
                                    eventId: eventToUpdate?.id,
                                    updatedAt: dayjs().format(),
                                    createdDate: dayjs().format(),
                                    deleted: false,
                                }));
                                insertAttendeeObjects.push(...attendeesToBeInsert);
                                const externalAttendees = attendees?.filter((a) => !!a?.externalAttendee);
                                if (conference?.id) {
                                    eventsToBeCreatedWithNewId
                                        ?.filter((c) => !!c)
                                        ?.forEach((c) => {
                                        const externalIndex = externalAttendees?.findIndex((e) => e?.userId === c?.event?.userId);
                                        if (c?.meetingId === meetingAssist?.id &&
                                            externalIndex === -1) {
                                            c.conference = conference;
                                        }
                                    });
                                }
                                eventsToBeCreatedWithNewId
                                    ?.filter((c) => !!c)
                                    ?.forEach((c) => {
                                    const externalIndex = externalAttendees?.findIndex((e) => e?.userId === c?.event?.userId);
                                    if (c?.meetingId === meetingAssist?.id &&
                                        externalIndex === -1) {
                                        c.attendees = attendees;
                                        c.event.method = null;
                                        c.resource = resource;
                                        c.clientType = clientType;
                                    }
                                });
                            }
                        }
                        eventToUpdate.method = null;
                    }
                    else {
                        const oldEventToUpdate = filteredAllEvents?.find((e) => e?.id === eventToUpdate?.id);
                        if (!eventToUpdate?.modifiable && oldEventToUpdate?.id) {
                            eventToUpdate.startDate = oldEventToUpdate.startDate;
                            eventToUpdate.endDate = oldEventToUpdate.endDate;
                            eventToUpdate.timezone = oldEventToUpdate.timezone;
                        }
                        updatePromises.push(postPlannerModifyEventInCalendar(eventToUpdate, eventToUpdate.userId, 'update', resource, false, clientType, remindersObjectForEvent?.reminders));
                        eventToUpdate.method = null;
                        if (remindersObjectForEvent?.reminders?.length > 0) {
                            const oldReminders = await listRemindersForEvent(eventToUpdate?.id, eventToUpdate?.userId);
                            if (oldReminders?.length > 0) {
                                deleteReminders.push(...oldReminders);
                            }
                            insertReminderObjects.push(...remindersObjectForEvent?.reminders);
                        }
                        const oldPreferredTimeRanges = await listPreferredTimeRangesForEvent(eventToUpdate.id);
                        if (!_.isEqual(oldPreferredTimeRanges, eventToUpdate.preferredTimeRanges)) {
                            if (oldPreferredTimeRanges?.length > 0) {
                                deletePreferredTimeRangeObjects.push(...oldPreferredTimeRanges);
                            }
                            if (eventToUpdate?.preferredTimeRanges?.length > 0) {
                                insertPreferredTimeRangeObjects.push(...eventToUpdate.preferredTimeRanges);
                            }
                        }
                    }
                }
                eventsToUpsert.push(eventToUpdate);
            }
        }
        const idResponseBodies = await Promise.all(createPromises);
        const cloneEventsToUpsert = _.cloneDeep(eventsToUpsert);
        const eventsToEdit = [];
        const idModifiedEventsToUpsert = eventsToUpsert.map((e1) => {
            const idResponseBody = idResponseBodies?.find((r) => r.generatedId === e1.id);
            if (idResponseBody?.id) {
                const generatedIdEditIndex = eventsToEdit?.findIndex((e) => e?.id === e1?.id);
                const newIdEditIndex = eventsToEdit?.findIndex((e) => e?.id === idResponseBody?.id);
                console.log(generatedIdEditIndex, newIdEditIndex, ' generatedIdEditIndex, newIdEditIndex');
                if (generatedIdEditIndex > -1 || newIdEditIndex > -1) {
                    if (generatedIdEditIndex > -1) {
                        const genIdEditedEvent = eventsToEdit[generatedIdEditIndex];
                        console.log(genIdEditedEvent, idResponseBody, ' genIdEditedEvent, idResponseBody inside generatedIdEditIndex > -1');
                        genIdEditedEvent.id = idResponseBody?.id;
                        genIdEditedEvent.eventId = idResponseBody?.googleEventId;
                        if (genIdEditedEvent?.preEventId) {
                            console.log(genIdEditedEvent?.preEventId, ' genIdEditedEvent?.preEventId');
                            const clonePreEvent = cloneEventsToUpsert.find((e2) => e2.id === genIdEditedEvent.preEventId);
                            if (clonePreEvent?.id) {
                                console.log(clonePreEvent?.id, ' clonePreEvent?.id inside genIdEditedEvent?.preEventId inside generatedIdEditIndex > -1');
                                clonePreEvent.forEventId = idResponseBody.id;
                                const genIdOfPreEventIndex = eventsToEdit?.findIndex((e) => e?.id === genIdEditedEvent.preEventId);
                                const newIdOfPreEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === genIdEditedEvent.preEventId);
                                if (newIdOfPreEventResponseBody?.id) {
                                    clonePreEvent.id = newIdOfPreEventResponseBody?.id;
                                    clonePreEvent.eventId =
                                        newIdOfPreEventResponseBody?.googleEventId;
                                    const newIdOfPreEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfPreEventResponseBody?.id);
                                    if (genIdOfPreEventIndex > -1) {
                                        console.log(genIdOfPreEventIndex, ' inside genIdOfPreEventIndex > -1 ');
                                        eventsToEdit[genIdOfPreEventIndex].forEventId =
                                            idResponseBody.id;
                                        eventsToEdit[genIdOfPreEventIndex].id =
                                            newIdOfPreEventResponseBody?.id;
                                        eventsToEdit[genIdOfPreEventIndex].eventId =
                                            newIdOfPreEventResponseBody?.googleEventId;
                                    }
                                    else if (newIdOfPreEventIndex > -1) {
                                        console.log(newIdOfPreEventIndex, ' newIdOfPreEventIndex > -1');
                                        eventsToEdit[newIdOfPreEventIndex].forEventId =
                                            idResponseBody.id;
                                    }
                                    else {
                                        eventsToEdit.push(clonePreEvent);
                                    }
                                }
                            }
                        }
                        if (genIdEditedEvent?.postEventId) {
                            console.log(genIdEditedEvent?.postEventId, ' genIdEditedEvent?.postEventId');
                            const clonePostEvent = cloneEventsToUpsert.find((e2) => e2.id === genIdEditedEvent.postEventId);
                            if (clonePostEvent?.id) {
                                console.log(clonePostEvent?.id, ' clonePostEvent?.id');
                                clonePostEvent.forEventId = idResponseBody.id;
                                const genIdOfPostEventIndex = eventsToEdit?.findIndex((e) => e?.id === genIdEditedEvent.postEventId);
                                const newIdOfPostEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === genIdEditedEvent.postEventId);
                                if (newIdOfPostEventResponseBody?.id) {
                                    clonePostEvent.id = newIdOfPostEventResponseBody?.id;
                                    clonePostEvent.eventId =
                                        newIdOfPostEventResponseBody?.googleEventId;
                                    const newIdOfPostEventIndex = eventsToEdit?.findIndex((e) => e?.id ===
                                        `${newIdOfPostEventResponseBody}#${clonePostEvent.calendarId}`);
                                    if (genIdOfPostEventIndex > -1) {
                                        console.log(genIdOfPostEventIndex, ' genIdOfPostEventIndex > -1');
                                        eventsToEdit[genIdOfPostEventIndex].forEventId =
                                            idResponseBody.id;
                                        eventsToEdit[genIdOfPostEventIndex].id =
                                            newIdOfPostEventResponseBody?.id;
                                        eventsToEdit[genIdOfPostEventIndex].eventId =
                                            newIdOfPostEventResponseBody?.googleEventId;
                                    }
                                    else if (newIdOfPostEventIndex > -1) {
                                        console.log(newIdOfPostEventIndex, ' newIdOfPostEventIndex > -1');
                                        eventsToEdit[newIdOfPostEventIndex].forEventId =
                                            idResponseBody.id;
                                    }
                                    else {
                                        eventsToEdit.push(clonePostEvent);
                                    }
                                }
                            }
                        }
                        if (genIdEditedEvent?.forEventId) {
                            if (genIdEditedEvent?.isPreEvent) {
                                console.log(genIdEditedEvent?.isPreEvent, ' genIdEditedEvent?.isPreEvent inside genIdEditedEvent?.forEventId');
                                const forEvent = cloneEventsToUpsert.find((e2) => e2.id === genIdEditedEvent.forEventId);
                                if (forEvent?.id) {
                                    console.log(forEvent?.id, ' forEvent?.id inside genIdEditedEvent?.forEventId');
                                    forEvent.preEventId = idResponseBody.id;
                                    const genIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === forEvent?.id);
                                    const newIdOfForEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === forEvent?.id);
                                    if (newIdOfForEventResponseBody?.id) {
                                        forEvent.id = newIdOfForEventResponseBody?.id;
                                        forEvent.eventId =
                                            newIdOfForEventResponseBody?.googleEventId;
                                        const newIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfForEventResponseBody?.id);
                                        if (genIdOfForEventIndex > -1) {
                                            console.log(genIdOfForEventIndex, ' genIdOfForEventIndex > -1');
                                            eventsToEdit[genIdOfForEventIndex].preEventId =
                                                idResponseBody.id;
                                            eventsToEdit[genIdOfForEventIndex].id =
                                                newIdOfForEventResponseBody?.id;
                                            eventsToEdit[genIdOfForEventIndex].eventId =
                                                newIdOfForEventResponseBody?.googleEventId;
                                        }
                                        else if (newIdOfForEventIndex > -1) {
                                            console.log(newIdOfForEventIndex, ' newIdOfEventIndex > -1');
                                            eventsToEdit[newIdOfForEventIndex].preEventId =
                                                idResponseBody.id;
                                        }
                                        else {
                                            eventsToEdit.push(forEvent);
                                        }
                                    }
                                }
                            }
                            else if (genIdEditedEvent?.isPostEvent) {
                                console.log(genIdEditedEvent?.isPostEvent, ' genIdEditedEvent?.isPostEvent');
                                const forEvent = cloneEventsToUpsert.find((e2) => e2.id === genIdEditedEvent.forEventId);
                                if (forEvent?.id) {
                                    console.log(forEvent?.id, ' forEvent?.id');
                                    forEvent.postEventId = idResponseBody.id;
                                    const genIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === forEvent?.id);
                                    const newIdOfForEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === forEvent?.id);
                                    if (newIdOfForEventResponseBody?.id) {
                                        const newIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfForEventResponseBody?.id);
                                        if (genIdOfForEventIndex > -1) {
                                            console.log(genIdOfForEventIndex, ' genIdOfForEventIndex > -1 inside genIdEditedEvent?.isPostEvent');
                                            eventsToEdit[genIdOfForEventIndex].postEventId =
                                                idResponseBody.id;
                                            eventsToEdit[genIdOfForEventIndex].id =
                                                newIdOfForEventResponseBody?.id;
                                            eventsToEdit[genIdOfForEventIndex].eventId =
                                                newIdOfForEventResponseBody?.googleEventId;
                                        }
                                        else if (newIdOfForEventIndex > -1) {
                                            console.log(newIdOfForEventIndex > -1, ' newIdOfForEventIndex > -1 inside genIdEditedEvent?.isPostEvent');
                                            eventsToEdit[newIdOfForEventIndex].postEventId =
                                                idResponseBody.id;
                                        }
                                        else {
                                            eventsToEdit.push(forEvent);
                                        }
                                    }
                                }
                            }
                        }
                        for (const pt of insertPreferredTimeRangeObjects) {
                            if (pt?.eventId === e1.id) {
                                pt.eventId = idResponseBody?.id;
                            }
                        }
                        for (const r of insertReminderObjects) {
                            if (r?.eventId === e1.id) {
                                r.eventId = idResponseBody?.id;
                            }
                        }
                        for (const a of insertAttendeeObjects) {
                            if (a?.eventId === e1.id) {
                                a.eventId = idResponseBody?.id;
                            }
                        }
                        if (e1?.meetingId) {
                            eventsToBeCreatedWithNewId
                                ?.filter((c) => c?.meetingId === e1?.meetingId)
                                ?.filter((c) => !!c?.event?.id)
                                ?.forEach((c) => {
                                console.log(c.event, idResponseBody, genIdEditedEvent, ' c.event, createdEvent, editedEvent inside editedEvent inside generatedEventsToEditIndex');
                                c.event.id = `${idResponseBody?.googleEventId}#${c.event.calendarId}`;
                                c.event.eventId = idResponseBody?.googleEventId;
                            });
                        }
                    }
                    else if (newIdEditIndex > -1) {
                        const newIdWithEditedEvent = eventsToEdit[newIdEditIndex];
                        console.log(newIdWithEditedEvent, ' newIdWithEditedEvent');
                        if (newIdWithEditedEvent?.preEventId) {
                            console.log(newIdWithEditedEvent?.preEventId, ' newIdWithEditedEvent?.preEventId');
                            const clonePreEvent = cloneEventsToUpsert.find((e2) => e2.id === newIdWithEditedEvent.preEventId);
                            const genIdOrNewIdWithPreEventEditedEvent = eventsToEdit?.find((e3) => e3.id === newIdWithEditedEvent?.preEventId);
                            if (genIdOrNewIdWithPreEventEditedEvent?.id) {
                                console.log(genIdOrNewIdWithPreEventEditedEvent, ' genIdOrNewIdWithPreEventEditedEvent inside newIdWithEditedEvent?.preEventId inside newIdWithEditedEvent');
                                genIdOrNewIdWithPreEventEditedEvent.forEventId =
                                    idResponseBody.id;
                                const preEventWithNewIdResponseBody = idResponseBodies?.find((i) => i.generatedId === genIdOrNewIdWithPreEventEditedEvent?.id);
                                if (preEventWithNewIdResponseBody?.id) {
                                    genIdOrNewIdWithPreEventEditedEvent.id =
                                        preEventWithNewIdResponseBody?.id;
                                    genIdOrNewIdWithPreEventEditedEvent.eventId =
                                        preEventWithNewIdResponseBody.googleEventId;
                                }
                            }
                            if (clonePreEvent?.id) {
                                console.log(clonePreEvent?.id, ' clonePreEvent?.id inside newIdWithEditedEvent?.preEventId');
                                clonePreEvent.forEventId = idResponseBody.id;
                                const genIdWithPreEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdWithEditedEvent.preEventId);
                                const newIdWithPreEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === newIdWithEditedEvent.preEventId);
                                if (newIdWithPreEventResponseBody?.id) {
                                    clonePreEvent.id = newIdWithPreEventResponseBody?.id;
                                    clonePreEvent.eventId =
                                        newIdWithPreEventResponseBody?.googleEventId;
                                    const newIdWithPreEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdWithPreEventResponseBody?.id);
                                    if (genIdWithPreEventIndex > -1) {
                                        console.log(genIdWithPreEventIndex, ' genIdWithPreEventIndex > -1 inside clonePreEvent?.id inside newIdWithEditedEvent?.preEventId');
                                        eventsToEdit[genIdWithPreEventIndex].forEventId =
                                            idResponseBody.id;
                                        eventsToEdit[genIdWithPreEventIndex].id =
                                            newIdWithPreEventResponseBody?.id;
                                        eventsToEdit[genIdWithPreEventIndex].eventId =
                                            newIdWithPreEventResponseBody?.googleEventId;
                                    }
                                    else if (newIdWithPreEventIndex > -1) {
                                        console.log(newIdWithPreEventIndex, ' newIdWithPreEventIndex > -1 inside clonePreEvent?.id inside newIdWithEditedEvent?.preEventId');
                                        eventsToEdit[newIdWithPreEventIndex].forEventId =
                                            idResponseBody.id;
                                    }
                                    else {
                                        eventsToEdit.push(clonePreEvent);
                                    }
                                }
                            }
                        }
                        if (newIdWithEditedEvent?.postEventId) {
                            const clonePostEvent = cloneEventsToUpsert?.find((e2) => e2.id === newIdWithEditedEvent.postEventId);
                            const genIdOrNewIdWithPostEventEditedEvent = eventsToEdit?.find((e3) => e3.id === newIdWithEditedEvent?.postEventId);
                            if (genIdOrNewIdWithPostEventEditedEvent?.id) {
                                console.log(genIdOrNewIdWithPostEventEditedEvent, ' genIdOrNewIdWithPostEventEditedEvent inside newIdWithEditedEvent?.postEventId inside newIdWithEditedEvent');
                                genIdOrNewIdWithPostEventEditedEvent.forEventId =
                                    idResponseBody.id;
                                const postEventWithNewIdResponseBody = idResponseBodies?.find((i) => i.generatedId === genIdOrNewIdWithPostEventEditedEvent?.id);
                                if (postEventWithNewIdResponseBody?.id) {
                                    genIdOrNewIdWithPostEventEditedEvent.id =
                                        postEventWithNewIdResponseBody?.id;
                                    genIdOrNewIdWithPostEventEditedEvent.eventId =
                                        postEventWithNewIdResponseBody.googleEventId;
                                }
                            }
                            if (clonePostEvent?.id) {
                                clonePostEvent.forEventId = newIdWithEditedEvent.id;
                                const genIdWithPostEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdWithEditedEvent.postEventId);
                                const newIdWithPostEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === newIdWithEditedEvent.postEventId);
                                if (newIdWithPostEventResponseBody?.id) {
                                    clonePostEvent.id = newIdWithPostEventResponseBody?.id;
                                    clonePostEvent.eventId =
                                        newIdWithPostEventResponseBody?.googleEventId;
                                    const eventsToEditPostEventWithCreateIdIndex = eventsToEdit?.findIndex((e) => e?.id ===
                                        `${newIdWithPostEventResponseBody}#${clonePostEvent.calendarId}`);
                                    if (genIdWithPostEventIndex > -1) {
                                        eventsToEdit[genIdWithPostEventIndex].forEventId =
                                            newIdWithEditedEvent.id;
                                        eventsToEdit[genIdWithPostEventIndex].id =
                                            newIdWithPostEventResponseBody?.id;
                                        eventsToEdit[genIdWithPostEventIndex].eventId =
                                            newIdWithPostEventResponseBody?.googleEventId;
                                    }
                                    else if (eventsToEditPostEventWithCreateIdIndex > -1) {
                                        eventsToEdit[eventsToEditPostEventWithCreateIdIndex].forEventId = newIdWithEditedEvent.id;
                                    }
                                    else {
                                        eventsToEdit.push(clonePostEvent);
                                    }
                                }
                            }
                        }
                        if (newIdWithEditedEvent?.forEventId) {
                            console.log(newIdWithEditedEvent?.forEventId, ' newIdWithEditedEvent?.forEventId');
                            if (newIdWithEditedEvent?.isPreEvent) {
                                console.log(newIdWithEditedEvent?.isPreEvent, ' newIdWithEditedEvent?.isPreEvent inside newIdWithEditedEvent?.forEventId');
                                const forEvent = cloneEventsToUpsert.find((e2) => e2.id === newIdWithEditedEvent.forEventId);
                                if (forEvent?.id) {
                                    console.log(forEvent?.id, ' forEvent?.id');
                                    forEvent.preEventId = newIdWithEditedEvent.id;
                                    const genIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === forEvent?.id);
                                    const newIdOfForEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === forEvent?.id);
                                    if (newIdOfForEventResponseBody?.id) {
                                        forEvent.id = newIdOfForEventResponseBody?.id;
                                        forEvent.eventId =
                                            newIdOfForEventResponseBody?.googleEventId;
                                        const newIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfForEventResponseBody?.id);
                                        if (genIdOfForEventIndex > -1) {
                                            console.log(genIdOfForEventIndex, ' genIdOfForEventIndex > -1');
                                            eventsToEdit[genIdOfForEventIndex].preEventId =
                                                idResponseBody.id;
                                            eventsToEdit[genIdOfForEventIndex].id =
                                                newIdOfForEventResponseBody?.id;
                                            eventsToEdit[genIdOfForEventIndex].eventId =
                                                newIdOfForEventResponseBody?.googleEventId;
                                        }
                                        else if (newIdOfForEventIndex > -1) {
                                            console.log(newIdOfForEventIndex, ' newIdOfForEventIndex > -1');
                                            eventsToEdit[newIdOfForEventIndex].preEventId =
                                                idResponseBody.id;
                                        }
                                        else {
                                            eventsToEdit.push(forEvent);
                                        }
                                    }
                                }
                            }
                            else if (newIdWithEditedEvent?.isPostEvent) {
                                const forEvent = cloneEventsToUpsert?.find((e2) => e2.id === newIdWithEditedEvent.forEventId);
                                if (forEvent?.id) {
                                    console.log(forEvent?.id, ' forEvent?.id inside newIdWithEditedEvent?.isPostEvent');
                                    forEvent.postEventId = idResponseBody.id;
                                    const genIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === forEvent?.id);
                                    const newIdOfForEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === forEvent?.id);
                                    if (newIdOfForEventResponseBody?.id) {
                                        const newIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfForEventResponseBody?.id);
                                        if (genIdOfForEventIndex > -1) {
                                            console.log(genIdOfForEventIndex, ' genIdOfForEventIndex > -1 inside forEvent?.id inside newIdWithEditedEvent?.isPostEvent');
                                            eventsToEdit[genIdOfForEventIndex].postEventId =
                                                idResponseBody.id;
                                            eventsToEdit[genIdOfForEventIndex].id =
                                                newIdOfForEventResponseBody?.id;
                                            eventsToEdit[genIdOfForEventIndex].eventId =
                                                newIdOfForEventResponseBody?.googleEventId;
                                        }
                                        else if (newIdOfForEventIndex > -1) {
                                            eventsToEdit[newIdOfForEventIndex].postEventId =
                                                idResponseBody.id;
                                        }
                                        else {
                                            eventsToEdit.push(forEvent);
                                        }
                                    }
                                }
                            }
                        }
                        insertPreferredTimeRangeObjects?.forEach((pt) => {
                            if (pt?.eventId === e1.id) {
                                pt.eventId = idResponseBody?.id;
                            }
                        });
                        insertReminderObjects?.forEach((r) => {
                            if (r?.eventId === e1.id) {
                                r.eventId = idResponseBody?.id;
                            }
                        });
                        if (e1?.meetingId) {
                            eventsToBeCreatedWithNewId
                                ?.filter((c) => c?.meetingId === e1?.meetingId)
                                ?.filter((c) => !!c?.event?.id)
                                ?.forEach((c) => {
                                console.log(c.event, idResponseBody, newIdWithEditedEvent, ' c.event, createdEvent, createdAndEditedEvent, inside forEach inside createdEventToEditIndex');
                                c.event.id = `${idResponseBody.googleEventId}#${c?.event?.calendarId}`;
                                c.event.eventId = idResponseBody?.googleEventId;
                            });
                        }
                    }
                }
                else {
                    const cloneEvent = cloneEventsToUpsert?.find((e2) => e2?.id === e1?.id);
                    if (cloneEvent?.id) {
                        cloneEvent.id = idResponseBody?.id;
                        cloneEvent.eventId = idResponseBody?.googleEventId;
                        if (cloneEvent?.preEventId) {
                            console.log(cloneEvent?.preEventId, ' cloneEvent?.preEventId inside else');
                            const clonePreEvent = cloneEventsToUpsert.find((e2) => e2.id === cloneEvent.preEventId);
                            if (clonePreEvent?.id) {
                                console.log(clonePreEvent?.id, ' clonePreEvent?.id inside cloneEvent?.preEventId inside else');
                                clonePreEvent.forEventId = idResponseBody.id;
                                const genIdOfPreEventIndex = eventsToEdit?.findIndex((e) => e?.id === cloneEvent.preEventId);
                                const newIdOfPreEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === cloneEvent.preEventId);
                                if (newIdOfPreEventResponseBody?.id) {
                                    clonePreEvent.id = newIdOfPreEventResponseBody?.id;
                                    clonePreEvent.eventId =
                                        newIdOfPreEventResponseBody?.googleEventId;
                                    const newIdOfPreEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfPreEventResponseBody?.id);
                                    if (genIdOfPreEventIndex > -1) {
                                        console.log(genIdOfPreEventIndex, ' inside genIdOfPreEventIndex > -1 clonePreEvent?.id inside cloneEvent?.preEventId inside else');
                                        eventsToEdit[genIdOfPreEventIndex].forEventId =
                                            idResponseBody.id;
                                        eventsToEdit[genIdOfPreEventIndex].id =
                                            newIdOfPreEventResponseBody?.id;
                                        eventsToEdit[genIdOfPreEventIndex].eventId =
                                            newIdOfPreEventResponseBody?.googleEventId;
                                    }
                                    else if (newIdOfPreEventIndex > -1) {
                                        console.log(newIdOfPreEventIndex, ' newIdOfPreEventIndex > -1 inside genIdOfPreEventIndex > -1 clonePreEvent?.id inside cloneEvent?.preEventId inside else');
                                        eventsToEdit[newIdOfPreEventIndex].forEventId =
                                            idResponseBody.id;
                                    }
                                    else {
                                        eventsToEdit.push(clonePreEvent);
                                    }
                                }
                            }
                        }
                        if (cloneEvent?.postEventId) {
                            console.log(cloneEvent?.postEventId, ' cloneEvent?.postEventId');
                            const clonePostEvent = cloneEventsToUpsert?.find((e2) => e2.id === cloneEvent.postEventId);
                            if (clonePostEvent?.id) {
                                console.log(clonePostEvent?.id, ' clonePostEvent?.id');
                                clonePostEvent.forEventId = idResponseBody.id;
                                const genIdOfPostEventIndex = eventsToEdit?.findIndex((e) => e?.id === cloneEvent.postEventId);
                                const newIdOfPostEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === cloneEvent.postEventId);
                                if (newIdOfPostEventResponseBody?.id) {
                                    clonePostEvent.id = newIdOfPostEventResponseBody?.id;
                                    clonePostEvent.eventId =
                                        newIdOfPostEventResponseBody?.googleEventId;
                                    const newIdOfPostEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfPostEventResponseBody?.id);
                                    if (genIdOfPostEventIndex > -1) {
                                        console.log(genIdOfPostEventIndex, ' genIdOfPostEventIndex > -1');
                                        eventsToEdit[genIdOfPostEventIndex].forEventId =
                                            idResponseBody.id;
                                        eventsToEdit[genIdOfPostEventIndex].id =
                                            newIdOfPostEventResponseBody?.id;
                                        eventsToEdit[genIdOfPostEventIndex].eventId =
                                            newIdOfPostEventResponseBody?.googleEventId;
                                    }
                                    else if (newIdOfPostEventIndex > -1) {
                                        console.log(newIdOfPostEventIndex, ' newIdOfPostEventIndex > -1');
                                        eventsToEdit[newIdOfPostEventIndex].forEventId =
                                            idResponseBody.id;
                                    }
                                    else {
                                        eventsToEdit.push(clonePostEvent);
                                    }
                                }
                            }
                        }
                        eventsToEdit.push(cloneEvent);
                        if (e1?.forEventId) {
                            if (e1?.isPreEvent) {
                                console.log(e1?.isPreEvent, ' e1?.isPreEvent inside e1?.forEventId');
                                const forEvent = cloneEventsToUpsert?.find((e2) => e2.id === e1.forEventId);
                                if (forEvent?.id) {
                                    console.log(forEvent?.id, ' forEvent?.id inside genIdEditedEvent?.forEventId');
                                    forEvent.preEventId = idResponseBody.id;
                                    const genIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === forEvent?.id);
                                    const newIdOfForEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === forEvent?.id);
                                    if (newIdOfForEventResponseBody?.id) {
                                        forEvent.id = newIdOfForEventResponseBody?.id;
                                        forEvent.eventId =
                                            newIdOfForEventResponseBody?.googleEventId;
                                        const newIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfForEventResponseBody?.id);
                                        if (genIdOfForEventIndex > -1) {
                                            console.log(genIdOfForEventIndex, ' genIdOfForEventIndex > -1');
                                            eventsToEdit[genIdOfForEventIndex].preEventId =
                                                idResponseBody.id;
                                            eventsToEdit[genIdOfForEventIndex].id =
                                                newIdOfForEventResponseBody?.id;
                                            eventsToEdit[genIdOfForEventIndex].eventId =
                                                newIdOfForEventResponseBody?.googleEventId;
                                        }
                                        else if (newIdOfForEventIndex > -1) {
                                            console.log(newIdOfForEventIndex, ' newIdOfForEventIndex > -1');
                                            eventsToEdit[newIdOfForEventIndex].preEventId =
                                                idResponseBody.id;
                                        }
                                        else {
                                            eventsToEdit.push(forEvent);
                                        }
                                    }
                                }
                            }
                            else if (e1?.isPostEvent) {
                                console.log(e1?.isPostEvent, ' e1?.isPostEvent');
                                const forEvent = cloneEventsToUpsert?.find((e2) => e2.id === e1.forEventId);
                                if (forEvent?.id) {
                                    console.log(forEvent?.id, ' forEvent?.id inside e1?.isPostEvent');
                                    forEvent.postEventId = idResponseBody.id;
                                    const genIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === forEvent?.id);
                                    const newIdOfForEventResponseBody = idResponseBodies?.find((c) => c?.generatedId === forEvent?.id);
                                    if (newIdOfForEventResponseBody?.id) {
                                        const newIdOfForEventIndex = eventsToEdit?.findIndex((e) => e?.id === newIdOfForEventResponseBody?.id);
                                        if (genIdOfForEventIndex > -1) {
                                            console.log(genIdOfForEventIndex, ' genIdOfForEventIndex > -1 inside e1?.isPostEvent inside e1?.isPostEvent');
                                            eventsToEdit[genIdOfForEventIndex].postEventId =
                                                idResponseBody.id;
                                            eventsToEdit[genIdOfForEventIndex].id =
                                                newIdOfForEventResponseBody?.id;
                                            eventsToEdit[genIdOfForEventIndex].eventId =
                                                newIdOfForEventResponseBody?.googleEventId;
                                        }
                                        else if (newIdOfForEventIndex > -1) {
                                            console.log(newIdOfForEventIndex > -1, ' newIdOfForEventIndex > -1 inside e1?.isPostEvent inside inside e1?.isPostEvent');
                                            eventsToEdit[newIdOfForEventIndex].postEventId =
                                                idResponseBody.id;
                                        }
                                        else {
                                            eventsToEdit.push(forEvent);
                                        }
                                    }
                                }
                            }
                        }
                        insertPreferredTimeRangeObjects?.forEach((pt) => {
                            if (pt?.eventId === e1.id) {
                                pt.eventId = idResponseBody?.id;
                            }
                        });
                        insertReminderObjects?.forEach((r) => {
                            if (r?.eventId === e1.id) {
                                r.eventId = idResponseBody?.id;
                            }
                        });
                        if (e1?.meetingId) {
                            eventsToBeCreatedWithNewId
                                ?.filter((c) => c?.meetingId === e1?.meetingId)
                                ?.filter((c) => !!c?.event?.id)
                                ?.forEach((c) => {
                                console.log(c.event, cloneEvent, ' c.event, cloneEvent inside else ');
                                c.event.id = `${idResponseBody.googleEventId}#${c?.event?.calendarId}`;
                                c.event.eventId = idResponseBody?.googleEventId;
                            });
                        }
                    }
                }
                eventsToRemove.push(e1);
                return e1;
            }
            return e1;
        });
        const eventsWithMeetingAssistSinHost = eventsToBeCreatedWithNewId?.map((c) => c?.event) || [];
        eventsToEdit?.forEach((e) => console.log(e, ' eventsToEdit'));
        const eventsMinusEventsToRemove = _.differenceBy(idModifiedEventsToUpsert, eventsToRemove, 'id');
        const finalEventsToUpsert = eventsMinusEventsToRemove
            .concat(eventsWithMeetingAssistSinHost)
            .concat(_.uniqBy(eventsToEdit, 'id'))
            ?.filter((e) => !!e);
        finalEventsToUpsert?.forEach((e) => console.log(e, ' finalEventsToUpsert'));
        updatePromises?.forEach((e) => console.log(e, ' updatePromises before filter'));
        await processEventsForUpdatingConferences(finalEventsToUpsert?.filter((e) => !eventToFilterForUpdateConferences?.find((f) => e?.conferenceId === f?.conferenceId)));
        await Promise.all([
            Promise.all(updatePromises?.filter((e) => !!e)),
            upsertEventsPostPlanner(finalEventsToUpsert.map((e) => _.omit(e, ['vector', 'preferredTimeRanges']))),
        ]);
        for (const insertReminderObject of insertReminderObjects) {
            const idResponseBody = idResponseBodies?.find((i) => i?.generatedId === insertReminderObject?.eventId);
            if (idResponseBody?.id) {
                insertReminderObject.eventId = idResponseBody?.id;
            }
        }
        for (const insertPreferredTimeRangeObject of insertPreferredTimeRangeObjects) {
            const idResponseBody = idResponseBodies?.find((i) => i?.generatedId === insertPreferredTimeRangeObject?.eventId);
            if (idResponseBody?.id) {
                insertPreferredTimeRangeObject.eventId = idResponseBody?.id;
            }
        }
        for (const insertAttendeeObject of insertAttendeeObjects) {
            const idResponseBody = idResponseBodies?.find((i) => i?.generatedId === insertAttendeeObject?.eventId);
            if (idResponseBody?.id) {
                insertAttendeeObject.eventId = idResponseBody?.id;
            }
        }
        deleteReminders.forEach((d) => console.log(d, ' deleteReminders'));
        insertReminderObjects?.forEach((i) => console.log(i, ' insertReminderObjects'));
        const deleteReminderIds = deleteReminders
            .filter((r) => !!r?.eventId)
            ?.map((r) => r?.eventId);
        const insertRemindersFiltered = insertReminderObjects.filter((r) => !!r?.eventId);
        deleteReminderIds.forEach((d) => console.log(d, ' deleteReminderIds'));
        insertRemindersFiltered.forEach((i) => console.log(i, ' insertRemindersFiltered'));
        await deleteRemindersWithIds(_.uniq(deleteReminderIds), filteredEventsToUpdate?.[0]?.userId);
        await insertReminders(insertRemindersFiltered);
        const distinctToDeletePreferredTimeRangeObjects = _.uniqBy(deletePreferredTimeRangeObjects, 'eventId');
        const eventIdsForPts = distinctToDeletePreferredTimeRangeObjects?.map((pt) => pt?.eventId);
        await deletePreferredTimeRangesForEvents(eventIdsForPts);
        await insertPreferredTimeRanges(insertPreferredTimeRangeObjects);
        await insertAttendeesforEvent(insertAttendeeObjects);
        console.log('success!');
    }
    catch (e) {
        console.log(e, ' unable to update ');
    }
};
export const deleteZoomMeeting = async (zoomToken, meetingId) => {
    try {
        await got.delete(`${zoomBaseUrl}/meetings/${meetingId}`, {
            headers: {
                Authorization: `Bearer ${zoomToken}`,
                ContentType: 'application/json',
            },
        });
        console.log(meetingId, 'successfully deleted meeting');
    }
    catch (e) {
        console.log(e, ' unable to delete zoom meeting');
    }
};
export const getZoomMeeting = async (zoomToken, meetingId) => {
    try {
        const res = await got(`${zoomBaseUrl}/meetings/${meetingId}`, {
            headers: {
                Authorization: `Bearer ${zoomToken}`,
                ContentType: 'application/json',
            },
        }).json();
        return res;
    }
    catch (e) {
        console.log(e, ' unable to get zoom meeting');
    }
};
export const updateZoomMeetingStartDate = async (zoomToken, meetingId, startDate, timezone) => {
    try {
        const reqBody = {
            start_time: dayjs(startDate?.slice(0, 19)).utc().format(),
            timezone,
        };
        await got
            .patch(`${zoomBaseUrl}/meetings/${meetingId}`, {
            json: reqBody,
            headers: {
                Authorization: `Bearer ${zoomToken}`,
                ContentType: 'application/json',
            },
        })
            .json();
        console.log(meetingId, 'successfully patched zoom meeting starting date');
    }
    catch (e) {
        console.log(e, ' unable to update zoom meeting');
    }
};
export const createZoomMeeting = async (zoomToken, startDate, timezone, agenda, duration, contactName, contactEmail, meetingInvitees) => {
    try {
        if (dayjs().isAfter(dayjs(startDate))) {
            console.log(' starttime is in the past');
            throw new Error('starttime is in the past');
        }
        console.log(dayjs(startDate?.slice(0, 19))
            .tz(timezone, true)
            .format('YYYY-MM-DDTHH:mm:ss'), timezone, agenda, duration, ` dayjs(startDate?.slice(0, 19)).tz(timezone, true).format('YYYY-MM-DDTHH:mm:ss'),
            timezone,
            agenda,
            duration, createZoomMeeting called`);
        let settings = {};
        if (contactName?.length > 0 && contactEmail?.length > 0) {
            settings = {
                contact_name: contactName,
                contact_email: contactEmail,
            };
        }
        if (meetingInvitees?.length > 0) {
            settings = {
                ...settings,
                meeting_invitees: meetingInvitees?.map((m) => ({ email: m })),
            };
        }
        let reqBody = {};
        if (Object.keys(settings)?.length > 0) {
            reqBody.settings = settings;
        }
        reqBody = {
            ...reqBody,
            start_time: dayjs(startDate?.slice(0, 19))
                .tz(timezone, true)
                .utc()
                .format(),
            agenda,
            duration,
        };
        console.log(reqBody, ' reqBody inside createZoomMeeting');
        const res = await got
            .post(`${zoomBaseUrl}/users/me/meetings`, {
            json: reqBody,
            headers: {
                Authorization: `Bearer ${zoomToken}`,
                ContentType: 'application/json',
            },
        })
            .json();
        console.log(res, ' res inside createZoomMeeting');
        return res;
    }
    catch (e) {
        console.log(e, ' unable to create zoom meeting');
    }
};
export const insertConferences = async (conferences) => {
    try {
        const operationName = 'InsertConferences';
        const query = `
            mutation InsertConferences($conferences: [Conference_insert_input!]!) {
                insert_Conference(objects: $conferences) {
                    affected_rows
                    returning {
                        app
                        calendarId
                        createdDate
                        deleted
                        entryPoints
                        hangoutLink
                        iconUri
                        id
                        isHost
                        joinUrl
                        key
                        name
                        notes
                        parameters
                        requestId
                        startUrl
                        status
                        type
                        updatedAt
                        userId
                        zoomPrivateMeeting
                    }
                }
            }

        `;
        const variables = {
            conferences,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res?.data?.insert_Conference?.returning, ' successfully inserted conferences');
    }
    catch (e) {
        console.log(e, ' unable to insert conferences');
    }
};
export const insertConference = async (conference) => {
    try {
        const operationName = 'InsertConference';
        const query = `
            mutation InsertConference($conference: Conference_insert_input!) {
                insert_Conference_one(object: $conference) {
                    app
                    calendarId
                    createdDate
                    deleted
                    entryPoints
                    hangoutLink
                    iconUri
                    id
                    isHost
                    joinUrl
                    key
                    name
                    notes
                    parameters
                    requestId
                    startUrl
                    status
                    type
                    updatedAt
                    userId
                    zoomPrivateMeeting
                }
            }
        `;
        const variables = {
            conference,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' successfully inserted one conference');
        return res?.data?.insert_Conference_one;
    }
    catch (e) {
        console.log(e, ' unable to insert conference');
    }
};
export const listConferencesWithHosts = async (ids) => {
    try {
        const operationName = 'ListConferencesWithHostId';
        const query = `
            query ListConferencesWithHostId($ids: [String!]!) {
                Conference(where: {id: {_in: $ids}, isHost: {_eq: true}}) {
                    app
                    calendarId
                    createdDate
                    deleted
                    entryPoints
                    hangoutLink
                    iconUri
                    id
                    isHost
                    joinUrl
                    key
                    name
                    notes
                    parameters
                    requestId
                    startUrl
                    status
                    type
                    updatedAt
                    userId
                    zoomPrivateMeeting
                }
            }
        `;
        const variables = {
            ids,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' successfully listed conferences with hosts');
        return res?.data?.Conference;
    }
    catch (e) {
        console.log(e, ' unable to list conferences with hosts');
    }
};
export const processEventsForUpdatingConferences = async (finalEventsToUpsert) => {
    try {
        const eventsWithConferences = finalEventsToUpsert.filter((e) => !!e?.conferenceId);
        const conferenceIds = eventsWithConferences?.map((e) => e?.conferenceId);
        const conferencesWithHosts = await listConferencesWithHosts(conferenceIds);
        const eventsWithHostConferences = eventsWithConferences?.filter((e) => !!conferencesWithHosts?.find((c) => c?.userId === e?.userId));
        if (!eventsWithHostConferences?.[0]?.id) {
            console.log('no event with host conferences present');
            return;
        }
        for (const eventWithHostConference of eventsWithHostConferences) {
            const zoomToken = await getZoomAPIToken(eventWithHostConference?.userId);
            const conferenceToEvent = conferencesWithHosts?.find((c) => c?.id === eventWithHostConference?.conferenceId);
            if (zoomToken &&
                conferenceToEvent?.app === 'zoom' &&
                typeof parseInt(conferenceToEvent?.id, 10) === 'number') {
                await updateZoomMeetingStartDate(zoomToken, parseInt(conferenceToEvent?.id, 10), eventWithHostConference?.startDate, eventWithHostConference?.timezone);
            }
        }
    }
    catch (e) {
        console.log(e, ' unable to processEventsforupdatingconferences');
    }
};
export const processEventsForCreatingConferences = async (finalEventsToUpsert, createResults) => {
    try {
        const createdEventsWithMeetingId = finalEventsToUpsert
            ?.filter((e) => !!createResults?.find((c) => c?.id === e?.id))
            ?.filter((e) => !!e?.meetingId);
        const uniqueMeetingIdCreatedEvents = _.uniqBy(createdEventsWithMeetingId, 'meetingId');
        if (!uniqueMeetingIdCreatedEvents?.[0]) {
            console.log(' no new meeting events created');
            return;
        }
        const meetingAssistObjects = await listMeetingAssistsGivenMeetingIds(uniqueMeetingIdCreatedEvents?.map((e) => e?.meetingId));
        const zoomObjects = [];
        for (const meetingAssist of meetingAssistObjects) {
            const zoomToken = await getZoomAPIToken(meetingAssist?.userId);
            if (zoomToken) {
                const meetingEvent = uniqueMeetingIdCreatedEvents?.find((e) => e?.meetingId === meetingAssist?.id);
                if (!meetingEvent) {
                    console.log(' not meetingEvent found for zoom continue');
                    continue;
                }
                const attendees = await listMeetingAssistAttendeesGivenMeetingId(meetingEvent?.meetingId);
                if (!attendees) {
                    console.log(' no attendees present for zoom continue');
                    continue;
                }
                const hostAttendee = attendees?.find((a) => a?.userId === meetingAssist?.userId);
                const zoomObject = await createZoomMeeting(zoomToken, meetingEvent?.startDate, meetingAssist?.timezone, meetingEvent?.summary, meetingAssist?.duration, hostAttendee?.name, hostAttendee?.primaryEmail, attendees?.map((a) => a?.primaryEmail));
                zoomObjects.push({
                    ...zoomObject,
                    meetingId: meetingAssist?.id,
                    hostId: meetingAssist?.userId,
                });
                console.log(zoomObject, ' zoomObject inside processEventsForCreatingConferences');
            }
        }
        console.log(zoomObjects, ' zoomObjects');
        if (zoomObjects?.[0]?.id) {
            return zoomObjects;
        }
    }
    catch (e) {
        console.log(e, ' unable to create conferences');
    }
};
export const listMeetingAssistsGivenMeetingIds = async (meetingIds) => {
    try {
        const operationName = 'ListMeetingAssists';
        const query = `
            query ListMeetingAssists($meetingIds: [uuid!]!) {
                Meeting_Assist(where: {id: {_in: $meetingIds}}) {
                    allowAttendeeUpdatePreferences
                    anyoneCanAddSelf
                    attendeeCanModify
                    attendeeCount
                    attendeeRespondedCount
                    backgroundColor
                    bufferTime
                    calendarId
                    cancelIfAnyRefuse
                    cancelled
                    colorId
                    conferenceApp
                    createdDate
                    duration
                    enableAttendeePreferences
                    enableConference
                    enableHostPreferences
                    endDate
                    eventId
                    expireDate
                    foregroundColor
                    guaranteeAvailability
                    guestsCanInviteOthers
                    guestsCanSeeOtherGuests
                    id
                    location
                    notes
                    minThresholdCount
                    priority
                    reminders
                    sendUpdates
                    startDate
                    summary
                    timezone
                    transparency
                    updatedAt
                    useDefaultAlarms
                    userId
                    visibility
                    windowEndDate
                    windowStartDate
                }
            }
        `;
        const variables = {
            meetingIds,
        };
        const res = await got
            .post(hasuraGraphUrl, {
            headers: {
                'X-Hasura-Admin-Secret': hasuraAdminSecret,
                'X-Hasura-Role': 'admin',
            },
            json: {
                operationName,
                query,
                variables,
            },
        })
            .json();
        console.log(res, ' successfully listed listMeetingAssistsGivenMeetingIds');
        return res?.data?.Meeting_Assist;
    }
    catch (e) {
        console.log(e, ' unable to list meeting assists');
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLWhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFwaS1oZWxwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUdMLG9CQUFvQixFQUNwQixlQUFlLEVBQ2Ysb0JBQW9CLEVBQ3BCLHNCQUFzQixFQUN0QixxQkFBcUIsRUFDckIsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixpQkFBaUIsRUFDakIsMkJBQTJCLEVBQzNCLHFCQUFxQixFQUNyQixjQUFjLEVBQ2QsaUJBQWlCLEVBQ2pCLGNBQWMsRUFDZCxZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLGtDQUFrQyxFQUVsQyxtQkFBbUIsRUFDbkIsY0FBYyxFQUNkLG1CQUFtQixFQUNuQixtQkFBbUIsRUFDbkIsV0FBVyxFQUVYLGdCQUFnQixFQUNoQixnQkFBZ0IsRUFDaEIsV0FBVyxFQUNYLFlBQVksRUFDWixnQkFBZ0IsRUFDaEIsYUFBYSxFQUNiLFdBQVcsRUFDWCxnQkFBZ0IsRUFDaEIsZUFBZSxHQUNoQixNQUFNLHdDQUF3QyxDQUFDO0FBMERoRCxPQUFPLEdBQUcsTUFBTSxLQUFLLENBQUM7QUFDdEIsT0FBTyxFQUFFLEVBQUUsSUFBSSxJQUFJLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbEMsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQzFCLE9BQU8sUUFBUSxNQUFNLHVCQUF1QixDQUFDO0FBQzdDLE9BQU8sU0FBUyxNQUFNLHdCQUF3QixDQUFDO0FBQy9DLE9BQU8sUUFBUSxNQUFNLHVCQUF1QixDQUFDO0FBQzdDLE9BQU8sR0FBRyxNQUFNLGtCQUFrQixDQUFDO0FBQ25DLE9BQU8sQ0FBQyxNQUFNLFFBQVEsQ0FBQztBQUN2QixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDaEUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBRXhELE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxF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O1NBQ2hCLFNBQVMsQ0FDUixLQUFLLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ3ZDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxJQUFJLFlBQVksRUFBRSxJQUFJLENBQUM7U0FDaEQsRUFBRSxDQUFDLFlBQVksQ0FBQztTQUNoQixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQ1osS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztTQUN2QyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsSUFBSSxZQUFZLEVBQUUsSUFBSSxDQUFDO1NBQ2hELEVBQUUsQ0FBQyxZQUFZLENBQUM7U0FDaEIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUNiLFFBQVEsRUFDUixJQUFJLENBQ0w7UUFDRCxDQUFDLENBQUMsQ0FBQztRQUNILENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ3JDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxJQUFJLFlBQVksRUFBRSxJQUFJLENBQUM7YUFDaEQsRUFBRSxDQUFDLFlBQVksQ0FBQzthQUNoQixTQUFTLENBQ1IsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUN2QyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsSUFBSSxZQUFZLEVBQUUsSUFBSSxDQUFDO2FBQ2hELEVBQUUsQ0FBQyxZQUFZLENBQUM7YUFDaEIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUNiLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDdkMsRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLElBQUksWUFBWSxFQUFFLElBQUksQ0FBQzthQUNoRCxFQUFF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LENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDbkUsRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLElBQUksWUFBWSxFQUFFLElBQUksQ0FBQztTQUNoRCxFQUFFLENBQUMsWUFBWSxDQUFDO1NBQ2hCLElBQUksRUFBRSxDQUFDO0lBQ1YsTUFBTSxxQkFBcUIsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ3JFLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxJQUFJLFlBQVksRUFBRSxJQUFJLENBQUM7U0FDaEQsRUFBRSxDQUFDLFlBQVksQ0FBQztTQUNoQixTQUFTLENBQ1IsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztTQUN2QyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsSUFBSSxZQUFZLEVBQUUsSUFBSSxDQUFDO1NBQ2hELEVBQUUsQ0FBQyxZQUFZLENBQUM7U0FDaEIsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUNaLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDdkMsRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLElBQUksWUFBWSxFQUFFLElBQUksQ0FBQztTQUNoRCxFQUFFLENBQUMsWUFBWSxDQUFDO1NBQ2hCLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFDYixRQUFRLEVBQ1IsSUFBSSxDQUNMO1FBQ0QsQ0FBQyxDQUFDLENBQUM7UUFDSCxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUNyQyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsSUFBSSxZQUFZLEVBQUUsSUFBSSxDQUFDO2FBQ2hELEVBQUUsQ0FBQyxZQUFZLENBQUM7YUFDaEIsU0FBUyxDQUNSLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDdkMsRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLElBQUksWUFBWSxFQUFFLElBQUksQ0FBQzthQUNoRCxFQUFFLENBQUMsWUFBWSxDQUFDO2FBQ2hCLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFDYixLQUFLLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ3ZDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxJQUFJLFlBQVksRUFBRSxJQUFJLENBQUM7YUFDaEQsRUFBRSxDQUFDLFlBQVksQ0FBQzthQUNoQixNQUFNLENBQUMsRUFBRSxDQUFDLEVBQ2IsUUFBUSxFQUNSLElBQUksQ0FDTDtZQUNMLENBQUMsQ0FBQyxFQUFFO1lBQ0osQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVSLE9BQU8sQ0FBQyxHQUFHLENBQ1QsV0FBVyxFQUNYLGdCQUFnQixFQUNoQixtQkFBbUIsRUFDbkIscUJBQXFCLEVBQ3JCLGlCQUFpQixFQUNqQiwrRkFBK0YsQ0FDaEcsQ0FBQztJQUNGLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDbkMsS0FBSyxFQUFFLG1CQUFtQjtRQUMxQixPQUFPLEVBQUUscUJBQXFCO0tBQy9CLENBQUMsQ0FBQztJQUNILE1BQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDakMsS0FBSyxFQUFFLGlCQUFpQjtRQUN4QixPQUFPLEVBQUUsbUJBQW1CO0tBQzdCLENBQUMsQ0FBQztJQUNILE1BQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDMUQsTUFBTSxZQUFZLEdBQUcsYUFBYSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQy9DLE1BQU0sU0FBUyxHQUFtQixFQUFFLENBQUM7SUFDckMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUM7UUFDMUMsU0FBUyxDQUFDLElBQUksQ0FBQztZQUNiLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxrQkFBa0IsQ0FBQztZQUNuRCxTQUFTLEVBQUUsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2lCQUN6QyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQztpQkFDdEIsSUFBSSxDQUFDLG1CQUFtQixDQUFDO2lCQUN6QixNQUFNLENBQUMscUJBQXFCLENBQUM7aUJBQzdCLEdBQUcsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDO2lCQUNoQixNQUFNLENBQUMsT0FBTyxDQUFTO1lBQzFCLE9BQU8sRUFBRSxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQ3ZDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDO2lCQUN0QixJQUFJLENBQUMsbUJBQW1CLENBQUM7aUJBQ3pCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztpQkFDN0IsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDO2lCQUNyQixNQUFNLENBQUMsT0FBTyxDQUFTO1lBQzFCLE1BQU07WUFDTixRQUFRLEVBQUUsZ0JBQWdCLENBQ3hCLFdBQXdCLEVBQ3hCLGdCQUEyQixDQUM1QjtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxxQ0FBcUMsQ0FBQyxDQUFDO0lBQzlELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLCtDQUErQyxHQUFHLEtBQUssRUFDbEUsT0FBaUIsRUFDakIsVUFBa0IsRUFDbEIsaUJBQTJDLEVBQzNDLGVBQXVCLEVBQ3ZCLGFBQXFCLEVBQ3JCLFlBQW9CLEVBQ3BCLGlCQUE4QyxFQUM5Qyx3QkFBaUQsRUFDYSxFQUFFO0lBQ2hFLElBQUksQ0FBQztRQUNILE1BQU0seUJBQXlCLEdBQUcsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDNUQsNENBQTRDLENBQzFDLENBQUMsRUFDRCxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLFVBQVUsQ0FBQyxFQUFFLE1BQU0sQ0FDN0QsQ0FDRixDQUFDO1FBRUYsTUFBTSx5QkFBeUIsR0FBRyx3QkFBd0I7YUFDdkQsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUkseUJBQXlCLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxHQUFHLHlCQUF5QixDQUFDLENBQUM7UUFDL0QsQ0FBQztRQUVELE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDckQsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQ25DLEtBQUssQ0FDTixDQUFDO1FBRUYsTUFBTSxvQkFBb0IsR0FBRyxFQUFFLENBQUM7UUFFaEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ25DLG9CQUFvQixDQUFDLElBQUksQ0FDdkIsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2lCQUNoQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQztpQkFDdEIsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUM7aUJBQ2IsTUFBTSxFQUFFLENBQ1osQ0FBQztRQUNKLENBQUM7UUFFRCxNQUFNLG1CQUFtQixHQUFtQixFQUFFLENBQUM7UUFFL0MsS0FBSyxNQUFNLGdCQUFnQixJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDakQsTUFBTSxvQkFBb0IsR0FBRyxvQ0FBb0MsQ0FDL0QsVUFBVSxFQUNWLGdCQUFnQixFQUFFLE1BQU0sRUFDeEIseUJBQXlCLEVBQ3pCLFlBQVksRUFDWixnQkFBZ0IsRUFBRSxRQUFRLENBQzNCLENBQUM7WUFDRixtQkFBbUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxvQkFBb0IsQ0FBQyxDQUFDO1FBQ3BELENBQUM7UUFFRCxNQUFNLFNBQVMsR0FBbUIsQ0FBQyxDQUFDLFFBQVEsQ0FDMUMsbUJBQW1CLEVBQ25CLENBQUMsQ0FBQyxPQUFPLENBQ1YsQ0FBQztRQUVGLE1BQU0sbUJBQW1CLEdBQW1CLEVBQUUsQ0FBQztRQUMvQyxNQUFNLFNBQVMsR0FBbUIsRUFBRSxDQUFDO1FBRXJDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNyRCxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDWixLQUFLLE1BQU0sZ0JBQWdCLElBQUksaUJBQWlCLEVBQUUsQ0FBQztvQkFDakQsTUFBTSxlQUFlLEdBQ25CLE1BQU0sd0NBQXdDLENBQzVDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3pCLFVBQVUsRUFDVix5QkFBeUIsRUFDekIsWUFBWSxFQUNaLGdCQUFnQixFQUFFLFFBQVEsRUFDMUIsSUFBSSxDQUNMLENBQUM7b0JBQ0osbUJBQW1CLENBQUMsSUFBSSxDQUFDLEdBQUcsZUFBZSxDQUFDLENBQUM7Z0JBQy9DLENBQUM7Z0JBRUQsU0FBUztZQUNYLENBQUM7WUFDRCxLQUFLLE1BQU0sZ0JBQWdCLElBQUksaUJBQWlCLEVBQUUsQ0FBQztnQkFDakQsTUFBTSxlQUFlLEdBQUcsTUFBTSx3Q0FBd0MsQ0FDcEUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDekIsVUFBVSxFQUNWLHlCQUF5QixFQUN6QixZQUFZLEVBQ1osZ0JBQWdCLEVBQUUsUUFBUSxFQUMxQixLQUFLLENBQ04sQ0FBQztnQkFDRixtQkFBbUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxlQUFlLENBQUMsQ0FBQztZQUMvQyxDQUFDO1FBQ0gsQ0FBQztRQUNELFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzlELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBRXJDLE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FDaEMseUJBQXlCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDckMscUNBQXFDLENBQUMsQ0FBQyxDQUFDLENBQ3pDLEVBQ0QsSUFBSSxDQUNMLENBQUM7UUFDRixJQUFJLFVBQVUsR0FBc0MsRUFBRSxDQUFDO1FBRXZELE1BQU0seUJBQXlCLEdBQUcsRUFBRSxDQUFDO1FBQ3JDLEtBQUssTUFBTSxLQUFLLElBQUksaUJBQWlCLEVBQUUsQ0FBQztZQUN0QyxNQUFNLGNBQWMsR0FBRyxzQkFBc0IsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDakUseUJBQXlCLENBQUMsSUFBSSxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUM7UUFDcEQsQ0FBQztRQUVELE1BQU0sK0JBQStCLEdBQ25DLHdDQUF3QyxDQUFDLHlCQUF5QixDQUFDLENBQUM7UUFDdEUsTUFBTSxzQ0FBc0MsR0FDMUMseUNBQXlDLENBQ3ZDLCtCQUErQixDQUNoQyxDQUFDO1FBQ0osTUFBTSxtQkFBbUIsR0FDdkIsc0NBQXNDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDL0MsZ0RBQWdELENBQzlDLENBQUMsRUFDRCxTQUFTLEVBQ1QsaUJBQWlCLEVBQ2pCLFlBQVksQ0FDYixDQUNGLENBQUM7UUFDSixJQUFJLG1CQUFtQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNuQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsbUJBQW1CLENBQUMsQ0FBQztRQUMxQyxDQUFDO1FBRUQsSUFBSSxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzFCLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDhCQUE4QixDQUFDLENBQUMsQ0FBQztZQUMxRSxNQUFNLGlDQUFpQyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM3RCxvQ0FBb0MsQ0FDbEMsQ0FBQyxFQUNELGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsUUFBUSxDQUM1RCxDQUNGLENBQUM7WUFDRixpQ0FBaUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM5QyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQyxDQUNyRCxDQUFDO1lBQ0YsTUFBTSxhQUFhLEdBQUcsTUFBTSw2QkFBNkIsQ0FDdkQsaUNBQWlDLENBQ2xDLENBQUM7WUFDRixhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsb0RBQW9ELENBQUMsQ0FDckUsQ0FBQztZQUNGLE1BQU0sUUFBUSxHQUFpQyxFQUFFLENBQUM7WUFDbEQsS0FBSyxNQUFNLGdCQUFnQixJQUFJLGlCQUFpQixFQUFFLENBQUM7Z0JBQ2pELE1BQU0sc0JBQXNCLEdBQzFCLGlEQUFpRCxDQUMvQyxnQkFBZ0IsRUFBRSxNQUFNLEVBQ3hCLFNBQVMsRUFDVCxVQUFVLENBQ1gsQ0FBQztnQkFDSixPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixFQUFFLHlCQUF5QixDQUFDLENBQUM7Z0JBQy9ELFFBQVEsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztZQUN4QyxDQUFDO1lBRUQsTUFBTSxxQkFBcUIsR0FDekIsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFO2dCQUM5QixNQUFNLFFBQVEsR0FBRyxpQkFBaUIsRUFBRSxJQUFJLENBQ3RDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLFNBQVMsQ0FBQyxPQUFPLENBQzFDLENBQUM7Z0JBQ0YsT0FBTztvQkFDTCxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU87b0JBQzNCLE9BQU8sRUFBRSxTQUFTLEVBQUUsT0FBTztvQkFDM0IsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJO29CQUNyQixRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVE7b0JBQzdCLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUztvQkFDL0IsTUFBTSxFQUFFLFVBQVU7b0JBQ2xCLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3lCQUNoRCxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7eUJBQzNCLEVBQUUsQ0FBQyxZQUFZLENBQUM7eUJBQ2hCLE1BQU0sRUFBRTtvQkFDWCxPQUFPLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzt5QkFDNUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO3lCQUMzQixFQUFFLENBQUMsWUFBWSxDQUFDO3lCQUNoQixNQUFNLEVBQUU7b0JBQ1gsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNO29CQUN6QixJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUk7b0JBQ3JCLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUTtvQkFDN0IsVUFBVSxFQUFFLFNBQVMsRUFBRSxVQUFVO29CQUNqQyxXQUFXLEVBQUUsU0FBUyxFQUFFLFdBQVc7b0JBQ25DLG1CQUFtQixFQUFFLFNBQVMsRUFBRSxtQkFBbUI7b0JBQ25ELG1CQUFtQixFQUFFLFNBQVMsRUFBRSxtQkFBbUI7b0JBQ25ELFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVTtvQkFDakMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO29CQUMvQixpQkFBaUIsRUFBRSxTQUFTLEVBQUUsaUJBQWlCO29CQUMvQywyQkFBMkIsRUFBRSxTQUFTLEVBQUUsMkJBQTJCO29CQUNuRSxtQkFBbUIsRUFBRSxTQUFTLEVBQUUsbUJBQW1CO29CQUNuRCxhQUFhLEVBQUUsU0FBUyxFQUFFLGFBQWE7b0JBQ3ZDLGNBQWMsRUFBRSxTQUFTLEVBQUUsY0FBYztvQkFDekMsR0FBRyxFQUFFLFNBQVMsRUFBRSxHQUFHO29CQUNuQixpQkFBaUIsRUFBRSxTQUFTLEVBQUUsaUJBQWlCO29CQUMvQyxZQUFZLEVBQUUsU0FBUyxFQUFFLFlBQVk7b0JBQ3JDLFlBQVksRUFBRSxTQUFTLEVBQUUsWUFBWTtvQkFDckMsVUFBVSxFQUFFLFNBQVMsRUFBRSxVQUFVO29CQUNqQyx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsdUJBQXVCO29CQUMzRCxrQkFBa0IsRUFBRSxTQUFTLEVBQUUsa0JBQWtCO29CQUNqRCx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsdUJBQXVCO29CQUMzRCxrQkFBa0IsRUFBRSxTQUFTLEVBQUUsa0JBQWtCO29CQUNqRCxrQkFBa0IsRUFBRSxTQUFTLEVBQUUsa0JBQWtCO29CQUNqRCxhQUFhLEVBQUUsU0FBUyxFQUFFLGFBQWE7b0JBQ3ZDLHVCQUF1QixFQUFFLFNBQVMsRUFBRSx1QkFBdUI7b0JBQzNELHFCQUFxQixFQUFFLFNBQVMsRUFBRSxxQkFBcUI7b0JBQ3ZELEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSztpQkFDeEIsQ0FBQztZQUNKLENBQUMsQ0FBQyxDQUFDO1lBRUwsT0FBTyxxQkFBcUIsRUFBRSxNQUFNLEdBQUcsQ0FBQztnQkFDdEMsQ0FBQyxDQUFDO29CQUNFLE9BQU87b0JBQ1AsTUFBTSxFQUFFLFVBQVU7b0JBQ2xCLFVBQVUsRUFBRSxxQkFBcUI7b0JBQ2pDLFNBQVMsRUFBRSxpQkFBaUI7b0JBQzVCLGlCQUFpQixFQUFFLGlCQUFpQjtvQkFDcEMsU0FBUztvQkFDVCxRQUFRO2lCQUNUO2dCQUNILENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDWCxDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUNULENBQUMsRUFDRCxpRUFBaUUsQ0FDbEUsQ0FBQztJQUNKLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsS0FBSyxFQUNqQyxTQUF5QixFQUN6QixRQUFzQyxFQUN0QyxVQUE2QyxFQUM3QyxXQUFtQixFQUNuQixNQUFjLEVBQ2QsT0FBZSxFQUNmLEtBQWEsRUFDYixXQUFtQixFQUNuQixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsTUFBTSxXQUFXLEdBQTJCO1lBQzFDLFdBQVc7WUFDWCxNQUFNO1lBQ04sU0FBUztZQUNULFFBQVE7WUFDUixVQUFVO1lBQ1YsT0FBTztZQUNQLEtBQUs7WUFDTCxXQUFXO1NBQ1osQ0FBQztRQUVGLE1BQU0sR0FBRzthQUNOLElBQUksQ0FBQyxHQUFHLGNBQWMsNEJBQTRCLEVBQUU7WUFDbkQsT0FBTyxFQUFFO2dCQUNQLGNBQWMsRUFBRSxrQkFBa0I7Z0JBQ2xDLGFBQWEsRUFBRSxTQUFTLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxtQkFBbUIsSUFBSSxtQkFBbUIsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO2FBQzFHO1lBQ0QsSUFBSSxFQUFFLFdBQVc7U0FDbEIsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBRVYsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUNwQyxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUcsS0FBSyxFQUFFLEVBQVUsRUFBRSxLQUFhLEVBQUUsRUFBRTtJQUNwRSxJQUFJLENBQUM7UUFDSCxNQUFNLGFBQWEsR0FBRyxvQkFBb0IsQ0FBQztRQUMzQyxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7U0FXVCxDQUFDO1FBRU4sTUFBTSxTQUFTLEdBQUc7WUFDaEIsRUFBRTtZQUNGLEtBQUs7U0FDTixDQUFDO1FBRUYsTUFBTSxRQUFRLEdBQ1osTUFBTSxHQUFHO2FBQ04sSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNwQixPQUFPLEVBQUU7Z0JBQ1AsdUJBQXVCLEVBQUUsaUJBQWlCO2dCQUMxQyxlQUFlLEVBQUUsT0FBTzthQUN6QjtZQUNELElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUzthQUNWO1NBQ0YsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBQ1osT0FBTyxDQUFDLEdBQUcsQ0FDVCxRQUFRLEVBQ1IsUUFBUSxFQUFFLElBQUksRUFBRSxxQkFBcUIsRUFDckMsZ0RBQWdELENBQ2pELENBQUM7UUFFRixPQUFPLFFBQVEsRUFBRSxJQUFJLEVBQUUscUJBQXFCLENBQUM7SUFDL0MsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDO0lBQy9DLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBRyxLQUFLLEVBQUUsTUFBYyxFQUFFLEVBQUU7SUFDMUQsSUFBSSxDQUFDO1FBQ0gsTUFBTSxhQUFhLEdBQUcscUJBQXFCLENBQUM7UUFDNUMsTUFBTSxLQUFLLEdBQUc7Ozs7Ozs7Ozs7O1NBV1QsQ0FBQztRQUVOLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLE1BQU07U0FDUCxDQUFDO1FBRUYsTUFBTSxHQUFHLEdBQTJDLE1BQU0sR0FBRzthQUMxRCxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLE9BQU8sRUFBRTtnQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7Z0JBQzFDLGNBQWMsRUFBRSxrQkFBa0I7Z0JBQ2xDLGVBQWUsRUFBRSxPQUFPO2FBQ3pCO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTO2FBQ1Y7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxnQ0FBZ0MsQ0FBQyxDQUFDO1FBRW5ELE9BQU8sR0FBRyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLENBQUMsQ0FBQztJQUNwRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sMkJBQTJCLEdBQUcsS0FBSyxFQUM5QyxVQUFrQixFQUNsQixpQkFBOEMsRUFDOUMsZ0JBQXdDLEVBQ3hDLFNBQTBCLEVBQzFCLGVBQXVCLEVBQ3ZCLGFBQXFCLEVBQ3JCLFlBQW9CLEVBQ3BCLFNBQXNCLEVBQ3RCLGlCQUErQyxFQUMvQyxtQkFBOEMsRUFDOUMsZ0JBQTBDLEVBQzFDLGtCQUEyQyxFQUMzQyxFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsTUFBTSxhQUFhLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxVQUFVLENBQUMsQ0FBQztRQUV2RSxNQUFNLGFBQWEsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLFVBQVUsQ0FBQyxDQUFDO1FBRXhFLE1BQU0sc0JBQXNCLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUNuRCxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLE1BQU0sS0FBSyxVQUFVLENBQ2xDLENBQUM7UUFFRixJQUFJLGlDQUFpQyxHQUU1QixFQUFFLENBQUM7UUFDWixJQUFJLG9CQUFvQixHQUFpRCxFQUFFLENBQUM7UUFFNUUsSUFBSSxzQkFBc0IsRUFBRSxDQUFDO1lBQzNCLGlDQUFpQztnQkFDL0IsTUFBTSwrQ0FBK0MsQ0FDbkQsVUFBVSxFQUNWLFNBQVMsRUFDVCxlQUFlLEVBQ2YsYUFBYSxFQUNiLFlBQVksRUFDWixpQkFBaUIsRUFDakIsU0FBUyxFQUNULGdCQUFnQixFQUNoQixnQkFBZ0IsRUFDaEIsa0JBQWtCLENBQ25CLENBQUM7UUFDTixDQUFDO2FBQU0sQ0FBQztZQUNOLG9CQUFvQixHQUFHLE1BQU0sc0NBQXNDLENBQ2pFLFVBQVUsRUFDVixhQUFhLEVBQ2IsZUFBZSxFQUNmLGFBQWEsRUFDYixZQUFZLEVBQ1osYUFBYSxFQUNiLGdCQUFnQixFQUNoQixrQkFBa0IsQ0FDbkIsQ0FBQztRQUNKLENBQUM7UUFFRCxNQUFNLHdCQUF3QixHQUFHLGdCQUFnQjthQUM5QyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNULE1BQU0sVUFBVSxHQUFHLGlCQUFpQixFQUFFLFNBQVMsQ0FDN0MsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLEtBQUssQ0FBQyxFQUFFLE1BQU0sQ0FDL0IsQ0FBQztZQUNGLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ3BCLE9BQU8sQ0FBQyxDQUFDO1lBQ1gsQ0FBQztZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQyxDQUFDO1lBQ0YsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztRQUU5QixNQUFNLGlDQUFpQyxHQUNyQyxpQkFBaUIsRUFBRSxNQUFNLEdBQUcsQ0FBQztZQUMzQixDQUFDLENBQUMsTUFBTSwrQ0FBK0MsQ0FDbkQsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQ3ZDLFVBQVUsRUFDVixtQkFBbUIsRUFDbkIsZUFBZSxFQUNmLGFBQWEsRUFDYixZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLHdCQUF3QixDQUN6QjtZQUNILENBQUMsQ0FBQyxJQUFJLENBQUM7UUFFWCxNQUFNLFVBQVUsR0FBc0MsRUFBRSxDQUFDO1FBQ3pELE1BQU0sbUJBQW1CLEdBQW9CLEVBQUUsQ0FBQztRQUNoRCxNQUFNLE1BQU0sR0FBb0IsRUFBRSxDQUFDO1FBQ25DLE1BQU0sbUJBQW1CLEdBQW9CLEVBQUUsQ0FBQztRQUNoRCxNQUFNLGlCQUFpQixHQUE2QixFQUFFLENBQUM7UUFDdkQsTUFBTSxtQkFBbUIsR0FBbUIsRUFBRSxDQUFDO1FBQy9DLE1BQU0sa0JBQWtCLEdBQWlDLEVBQUUsQ0FBQztRQUU1RCxJQUNFLENBQUMsQ0FDRSxvQkFBZ0U7WUFDL0QsRUFBRSxVQUFVLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FDM0IsRUFDRCxDQUFDO1lBQ0QsTUFBTSxJQUFJLEtBQUssQ0FDYiw2REFBNkQsQ0FDOUQsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUNHLG9CQUFnRTtZQUMvRCxFQUFFLFVBQVUsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUMxQixDQUFDO1lBQ0QsVUFBVSxDQUFDLElBQUksQ0FDYixHQUFJLG9CQUFnRTtnQkFDbEUsRUFBRSxVQUFVLENBQ2YsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFJLGFBQWEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDOUIsbUJBQW1CLENBQUMsSUFBSSxDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUVELElBQ0csb0JBQWdFLEVBQUUsTUFBTTtZQUN2RSxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQ2QsQ0FBQztZQUNELE1BQU0sQ0FBQyxJQUFJLENBQ1QsR0FBSSxvQkFBZ0U7Z0JBQ2xFLEVBQUUsTUFBTSxDQUNYLENBQUM7UUFDSixDQUFDO1FBRUQsSUFDRyxvQkFBZ0U7WUFDL0QsRUFBRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFDekIsQ0FBQztZQUNELG1CQUFtQixDQUFDLElBQUksQ0FDdEIsR0FBSSxvQkFBZ0U7Z0JBQ2xFLEVBQUUsU0FBUyxDQUNkLENBQUM7UUFDSixDQUFDO1FBRUQsSUFDRyxvQkFBZ0U7WUFDL0QsRUFBRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFDekIsQ0FBQztZQUNELG1CQUFtQixDQUFDLElBQUksQ0FDdEIsR0FBSSxvQkFBZ0U7Z0JBQ2xFLEVBQUUsU0FBUyxDQUNkLENBQUM7UUFDSixDQUFDO1FBRUQsSUFDRyxvQkFBZ0U7WUFDL0QsRUFBRSxzQkFBc0IsRUFBRSxFQUFFLEVBQzlCLENBQUM7WUFDRCxrQkFBa0IsQ0FBQyxJQUFJLENBQ3BCLG9CQUFnRTtnQkFDL0QsRUFBRSxzQkFBc0IsQ0FDM0IsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUVJLGlDQUNELEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUNwQixDQUFDO1lBQ0Qsa0JBQWtCLENBQUMsSUFBSSxDQUNyQixHQUNFLGlDQUNELEVBQUUsUUFBUSxDQUNaLENBQUM7UUFDSixDQUFDO1FBRUQsSUFFSSxpQ0FDRCxFQUFFLFVBQVUsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUN6QixDQUFDO1lBQ0QsVUFBVSxDQUFDLElBQUksQ0FDYixHQUNFLGlDQUNELEVBQUUsVUFBVSxDQUNkLENBQUM7UUFDSixDQUFDO1FBRUQsSUFFSSxpQ0FDRCxFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUN4QixDQUFDO1lBQ0QsbUJBQW1CLENBQUMsSUFBSSxDQUN0QixHQUNFLGlDQUNELEVBQUUsU0FBUyxDQUNiLENBQUM7UUFDSixDQUFDO1FBRUQsSUFFSSxpQ0FDRCxFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUN4QixDQUFDO1lBQ0QsbUJBQW1CLENBQUMsSUFBSSxDQUN0QixHQUNFLGlDQUNELEVBQUUsU0FBUyxDQUNiLENBQUM7UUFDSixDQUFDO1FBRUQsSUFFSSxpQ0FDRCxFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUN4QixDQUFDO1lBQ0QsbUJBQW1CLENBQUMsSUFBSSxDQUN0QixHQUNFLGlDQUNELEVBQUUsU0FBUyxDQUNiLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxpQ0FBaUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzlELFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxpQ0FBaUMsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNwRSxDQUFDO1FBRUQsSUFBSSxpQ0FBaUMsRUFBRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzdELG1CQUFtQixDQUFDLElBQUksQ0FBQyxHQUFHLGlDQUFpQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzVFLENBQUM7UUFFRCxJQUFJLGlDQUFpQyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNyRSxpQkFBaUIsQ0FBQyxJQUFJLENBQ3BCLEdBQUcsaUNBQWlDLEVBQUUsaUJBQWlCLENBQ3hELENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxpQ0FBaUMsRUFBRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzdELG1CQUFtQixDQUFDLElBQUksQ0FBQyxHQUFHLGlDQUFpQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzVFLENBQUM7UUFFRCxJQUFJLGlDQUFpQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDNUQsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsaUNBQWlDLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDMUUsQ0FBQztRQUVELE1BQU0sdUJBQXVCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xFLE1BQU0sc0JBQXNCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUUsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUQsTUFBTSxzQkFBc0IsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDaEUsTUFBTSw4QkFBOEIsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUMvQyxpQkFBaUIsRUFDakIsQ0FBQyxDQUFDLE9BQU8sQ0FDVixDQUFDO1FBQ0YsTUFBTSxzQkFBc0IsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxRSxNQUFNLFdBQVcsR0FBRyxJQUFJLEVBQUUsQ0FBQztRQUUzQixJQUFJLENBQUMsdUJBQXVCLElBQUksdUJBQXVCLEVBQUUsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3RFLE1BQU0sSUFBSSxLQUFLLENBQUMseUNBQXlDLENBQUMsQ0FBQztRQUM3RCxDQUFDO1FBRUQsTUFBTSxNQUFNLEdBQUc7WUFDYixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDbkIsV0FBVztnQkFDWCxNQUFNLEVBQUUsVUFBVTtnQkFDbEIsVUFBVSxFQUFFLHVCQUF1QjtnQkFDbkMsU0FBUyxFQUFFLHNCQUFzQjtnQkFDakMsTUFBTSxFQUFFLG1CQUFtQjtnQkFDM0IsU0FBUyxFQUFFLHNCQUFzQjtnQkFDakMsaUJBQWlCLEVBQUUsOEJBQThCO2dCQUNqRCxnQkFBZ0I7Z0JBQ2hCLGtCQUFrQjthQUNuQixDQUFDO1lBQ0YsTUFBTSxFQUFFLFVBQVU7WUFDbEIsR0FBRyxFQUFFLEdBQUcsVUFBVSxJQUFJLFdBQVcsT0FBTztZQUN4QyxXQUFXLEVBQUUsa0JBQWtCO1NBQ2hDLENBQUM7UUFFRixNQUFNLFNBQVMsR0FBRyxJQUFJLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRS9DLE1BQU0sVUFBVSxHQUFHLE1BQU0sUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUVsRCxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUV2QyxNQUFNLGNBQWMsQ0FDbEIsc0JBQXNCLEVBQ3RCLGtCQUFrQixFQUNsQix1QkFBdUIsRUFDdkIsV0FBVyxFQUNYLFVBQVUsRUFDVixHQUFHLFVBQVUsSUFBSSxXQUFXLE9BQU8sRUFDbkMsbUJBQW1CLEVBQ25CLGtDQUFrQyxDQUNuQyxDQUFDO1FBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsMkNBQTJDLENBQUMsQ0FBQztJQUM5RCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFO0lBQ2hELElBQUksQ0FBQztRQUNILE1BQU0sYUFBYSxHQUFHLG1CQUFtQixDQUFDO1FBQzFDLE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0F3QmIsQ0FBQztRQUNGLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLE1BQU07U0FDUCxDQUFDO1FBRUYsTUFBTSxHQUFHLEdBQTJDLE1BQU0sR0FBRzthQUMxRCxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUzthQUNWO1lBQ0QsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsY0FBYyxFQUFFLGtCQUFrQjtnQkFDbEMsZUFBZSxFQUFFLE9BQU87YUFDekI7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLEdBQUcsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDO0lBQzdCLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQztJQUNuRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sc0JBQXNCLEdBQUcsS0FBSyxFQUN6QyxLQUFvQixFQUNwQixjQUE4QixFQUNXLEVBQUU7SUFDM0MsSUFBSSxDQUFDO1FBQ0gsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ1gsTUFBTSxJQUFJLEtBQUssQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDO1FBQ25FLENBQUM7UUFFRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDcEIsTUFBTSxJQUFJLEtBQUssQ0FDYix5REFBeUQsQ0FDMUQsQ0FBQztRQUNKLENBQUM7UUFFRCxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxHQUFHLEtBQUssQ0FBQztRQUNqQyxNQUFNLFFBQVEsR0FBRyxHQUFHLE9BQU8sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBRTFELE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUV0RCxNQUFNLFlBQVksR0FDaEIseVFBQXlRLENBQUM7UUFDNVEsTUFBTSxVQUFVLEdBQUcsV0FBVyxRQUFRO2NBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQztRQUV2QyxJQUFJLENBQUM7WUFDSCxNQUFNLFVBQVUsR0FBRyxNQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQztnQkFDdEQsS0FBSyxFQUFFLGVBQWUsRUFBRSxvRUFBb0U7Z0JBQzVGLFFBQVEsRUFBRTtvQkFDUixFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRTtvQkFDekMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUU7aUJBQ3RDO2dCQUNELFdBQVcsRUFBRSxHQUFHO2FBQ2pCLENBQUMsQ0FBQztZQUVILE1BQU0saUJBQWlCLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO1lBQ2xFLElBQUksYUFBYSxHQUFhLEVBQUUsQ0FBQztZQUVqQyxJQUFJLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3RCLElBQUksQ0FBQztvQkFDSCxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO29CQUM5QyxJQUNFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7d0JBQzdCLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsT0FBTyxJQUFJLEtBQUssUUFBUSxDQUFDLEVBQ3hELENBQUM7d0JBQ0QsT0FBTyxDQUFDLEtBQUssQ0FDWCxvREFBb0QsRUFDcEQsaUJBQWlCLENBQ2xCLENBQUM7d0JBQ0YsYUFBYSxHQUFHLEVBQUUsQ0FBQyxDQUFDLDBDQUEwQztvQkFDaEUsQ0FBQztnQkFDSCxDQUFDO2dCQUFDLE9BQU8sVUFBVSxFQUFFLENBQUM7b0JBQ3BCLE9BQU8sQ0FBQyxLQUFLLENBQ1gsNkJBQTZCLEVBQzdCLFVBQVUsRUFDVixpQkFBaUIsQ0FDbEIsQ0FBQztvQkFDRixxRkFBcUY7b0JBQ3JGLElBQUksT0FBTyxpQkFBaUIsS0FBSyxRQUFRLEVBQUUsQ0FBQzt3QkFDMUMsYUFBYSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUMxQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQ2xDLENBQUM7b0JBQ0osQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLGFBQWEsR0FBRyxFQUFFLENBQUM7b0JBQ3JCLENBQUM7Z0JBQ0gsQ0FBQztZQUNILENBQUM7aUJBQU0sQ0FBQztnQkFDTixPQUFPLENBQUMsS0FBSyxDQUFDLDRDQUE0QyxDQUFDLENBQUM7Z0JBQzVELGFBQWEsR0FBRyxFQUFFLENBQUM7WUFDckIsQ0FBQztZQUVELE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUN0QyxhQUFhLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FDMUMsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFtQztnQkFDN0MsTUFBTSxFQUFFLFVBQVU7Z0JBQ2xCLE1BQU07Z0JBQ04sUUFBUTthQUNULENBQUM7WUFDRixPQUFPLENBQUMsR0FBRyxDQUNULE1BQU0sRUFDTixLQUFLLEVBQUUsRUFBRSxFQUNULDhEQUE4RCxDQUMvRCxDQUFDO1lBQ0YsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUFDLE9BQU8sUUFBUSxFQUFFLENBQUM7WUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FDWCxzREFBc0QsRUFDdEQsUUFBUSxDQUNULENBQUM7WUFDRixpRUFBaUU7WUFDakUsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6QyxNQUFNLFdBQVcsR0FBbUM7Z0JBQ2xELE1BQU0sRUFBRSxVQUFVO2dCQUNsQixNQUFNO2dCQUNOLFFBQVE7YUFDVCxDQUFDO1lBQ0YsT0FBTyxXQUFXLENBQUM7UUFDckIsQ0FBQztJQUNILENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsMEVBQTBFO1FBQzFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDBDQUEwQyxDQUFDLENBQUM7UUFDM0QseURBQXlEO1FBQ3pELE1BQU0sQ0FBQyxDQUFDLENBQUMsaUVBQWlFO0lBQzVFLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSwwQkFBMEIsR0FBRyxDQUN4QyxJQUFvQyxFQUNwQyxpQkFBMkIsRUFDM0IsRUFBRTtJQUNGLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDeEIsSUFBSSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7SUFDM0IsSUFBSSxjQUFjLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNsRCxNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsSUFBSSxLQUFLLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBRyxjQUFjLEVBQUUsQ0FBQztnQkFDM0IsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO2dCQUMxQixjQUFjLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELE9BQU8saUJBQWlCLENBQUM7QUFDM0IsQ0FBQyxDQUFDO0FBRUYsTUFBTSx3QkFBd0IsR0FBRyxDQUMvQixRQUF1QixFQUN2QixpQkFBMkIsRUFDM0IsTUFBZ0IsRUFDaEIsVUFBMEIsRUFDTCxFQUFFO0lBQ3ZCLE1BQU0sbUJBQW1CLEdBQUcsRUFBRSxDQUFDO0lBRS9CLE1BQU0sWUFBWSxHQUFHLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM3RCxNQUFNLG9CQUFvQixHQUFHLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBRTdFLElBQUksWUFBWSxHQUFHLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxpQkFBaUIsRUFBRSxDQUFDO1FBQ2xFLG1CQUFtQixDQUFDLElBQUksQ0FDdEIsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxZQUFZLENBQUMsQ0FDL0QsQ0FBQztJQUNKLENBQUM7SUFFRCxJQUNFLG9CQUFvQixHQUFHLENBQUMsQ0FBQztRQUN6QixNQUFNLENBQUMsb0JBQW9CLENBQUMsR0FBRyxpQkFBaUIsRUFDaEQsQ0FBQztRQUNELG1CQUFtQixDQUFDLElBQUksQ0FDdEIsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxvQkFBb0IsQ0FBQyxDQUN2RSxDQUFDO0lBQ0osQ0FBQztJQUVELElBQUksUUFBUSxDQUFDLFNBQVMsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM1QyxtQkFBbUIsQ0FBQyxJQUFJLENBQ3RCLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssWUFBWSxDQUFDLENBQy9ELENBQUM7SUFDSixDQUFDO0lBRUQsSUFBSSxRQUFRLENBQUMsaUJBQWlCLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM1RCxtQkFBbUIsQ0FBQyxJQUFJLENBQ3RCLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CLENBQUMsQ0FDdkUsQ0FBQztJQUNKLENBQUM7SUFFRCxPQUFPLG1CQUFtQixDQUFDO0FBQzdCLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG9DQUFvQyxHQUFHLENBQ2xELFFBQXVCLEVBQ3ZCLGlCQUErQixFQUMvQixpQkFBMkIsRUFDM0IsTUFBZ0IsRUFDaEIsVUFBMEIsRUFDTCxFQUFFO0lBQ3ZCLE1BQU0sbUJBQW1CLEdBQUcsd0JBQXdCLENBQ2xELFFBQVEsRUFDUixpQkFBaUIsRUFDakIsTUFBTSxFQUNOLFVBQVUsQ0FDWCxDQUFDO0lBRUYsSUFBSSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDcEMsT0FBUSxtQkFBc0MsQ0FBQyxNQUFNLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQzdCLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBRyxDQUFDLE1BQXNCLEVBQUUsRUFBRTtJQUN4RCxNQUFNLFlBQVksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1QyxPQUFPLFlBQVksQ0FBQztBQUN0QixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBRyxDQUN0QyxLQUFvQixFQUNwQixRQUFzQixFQUNQLEVBQUU7SUFDakIsT0FBTztRQUNMLEdBQUcsS0FBSztRQUNSLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRSx3QkFBd0I7WUFDNUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxtQkFBbUI7Z0JBQzdCLENBQUMsQ0FBQyxhQUFhO2dCQUNmLENBQUMsQ0FBQyxRQUFRO1lBQ1osQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZO1FBQ3RCLFFBQVEsRUFDTixDQUFDLENBQUMsS0FBSyxFQUFFLHlCQUF5QjtZQUNoQyxDQUFDLENBQUMsUUFBUSxFQUFFLG9CQUFvQjtZQUNoQyxDQUFDLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFDM0IsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLHNCQUFzQjtZQUN4QyxDQUFDLENBQUMsUUFBUSxFQUFFLGlCQUFpQjtZQUM3QixDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVU7UUFDcEIsT0FBTyxFQUFFLENBQUMsS0FBSyxFQUFFLG1CQUFtQjtZQUNsQyxDQUFDLENBQUMsUUFBUSxFQUFFLGNBQWM7WUFDMUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPO1FBQ2pCLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxxQkFBcUI7WUFDdEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxnQkFBZ0I7WUFDNUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLEtBQUssWUFBWTtnQkFDL0IsQ0FBQyxDQUFDLElBQUk7Z0JBQ04sQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTO1FBQ3JCLGlCQUFpQixFQUFFLENBQUMsS0FBSyxFQUFFLDZCQUE2QjtZQUN0RCxDQUFDLENBQUMsUUFBUSxFQUFFLHdCQUF3QjtZQUNwQyxDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksS0FBSyxvQkFBb0I7Z0JBQ3ZDLENBQUMsQ0FBQyxJQUFJO2dCQUNOLENBQUMsQ0FBQyxLQUFLLENBQUMsaUJBQWlCO1FBQzdCLG1CQUFtQixFQUFFLENBQUMsS0FBSyxFQUFFLHNCQUFzQjtZQUNqRCxDQUFDLENBQUMsUUFBUSxFQUFFLHdCQUF3QjtZQUNwQyxDQUFDLENBQUMsS0FBSyxDQUFDLG1CQUFtQjtRQUM3QiwyQkFBMkIsRUFBRSxDQUFDLEtBQUssRUFBRSxzQkFBc0I7WUFDekQsQ0FBQyxDQUFDLFFBQVEsRUFBRSxnQ0FBZ0M7WUFDNUMsQ0FBQyxDQUFDLEtBQUssQ0FBQywyQkFBMkI7UUFDckMsZUFBZSxFQUFFLENBQUMsS0FBSyxFQUFFLGlCQUFpQjtZQUN4QyxDQUFDLENBQUMsUUFBUSxFQUFFLEtBQUs7WUFDakIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxlQUFlO1FBQ3pCLG1CQUFtQixFQUNqQixDQUFDLEtBQUssRUFBRSwwQkFBMEI7WUFDbEMsUUFBUSxFQUFFLHFCQUFxQixFQUFFLE1BQU0sR0FBRyxDQUFDO1lBQ3pDLENBQUMsQ0FBQyxRQUFRLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUM1QyxHQUFHLEVBQUU7Z0JBQ0wsRUFBRSxFQUFFLElBQUksRUFBRTtnQkFDVixPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUU7Z0JBQ2xCLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUU7Z0JBQ2xDLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUU7Z0JBQ2hDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTTthQUN0QixDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsS0FBSyxDQUFDLG1CQUFtQjtLQUNoQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0RBQWtELEdBQUcsS0FBSyxFQUNyRSxFQUFVLEVBQ1YsTUFBYyxFQUNkLFFBQXVCLEVBQ3ZCLGlCQUErQixFQUMvQixhQUE4QixFQUM5QixnQkFBdUMsRUFDdkMsYUFBNkIsRUFDN0IsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILElBQUksQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLEVBQUUsQ0FBQztZQUMzQixNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixDQUFDLENBQUM7UUFDbkQsQ0FBQztRQUNELElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDbEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFFRCxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDUixNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDcEMsQ0FBQztRQUVELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNaLE1BQU0sSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUN4QyxDQUFDO1FBRUQsSUFBSSxlQUFlLEdBQUcsZ0JBQWdCLElBQUksRUFBRSxDQUFDO1FBQzdDLElBQUksWUFBWSxHQUFHLGFBQWEsSUFBSSxFQUFFLENBQUM7UUFDdkMsTUFBTSxZQUFZLEdBQUcsTUFBTSxxQkFBcUIsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDN0QsTUFBTSxTQUFTLEdBQUcsNENBQTRDLENBQzVELFFBQVEsRUFDUixpQkFBaUIsRUFDakIsWUFBWSxFQUNaLGFBQWEsQ0FDZCxDQUFDO1FBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDckMsSUFDRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUM7WUFDckIsaUJBQWlCLEVBQUUsYUFBYTtZQUNoQyxDQUFDLFFBQVEsRUFBRSxxQkFBcUIsRUFDaEMsQ0FBQztZQUNELFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQsSUFDRSxDQUFDLFFBQVEsRUFBRSx3QkFBd0I7WUFDbkMsaUJBQWlCLEVBQUUsZ0JBQWdCLEVBQ25DLENBQUM7WUFDRCxNQUFNLFlBQVksR0FBRyx5Q0FBeUMsQ0FDNUQsaUJBQWlCLEVBQ2pCLFFBQVEsRUFDUixhQUFhLENBQ2QsQ0FBQztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQzNDLElBQUksWUFBWSxFQUFFLFdBQVcsRUFBRSxDQUFDO2dCQUM3QixlQUF3QyxDQUFDLFdBQVc7b0JBQ25ELFlBQVksQ0FBQyxXQUFXLENBQUM7WUFDN0IsQ0FBQztZQUVELElBQUksWUFBWSxFQUFFLFVBQVUsRUFBRSxDQUFDO2dCQUM1QixlQUF3QyxDQUFDLFVBQVU7b0JBQ2xELFlBQVksQ0FBQyxVQUFVLENBQUM7WUFDNUIsQ0FBQztZQUVELElBQ0UsWUFBWSxFQUFFLFFBQVEsRUFBRSxVQUFVO2dCQUNsQyxZQUFZLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFDbkMsQ0FBQztnQkFDRCxRQUFRLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQztZQUNuQyxDQUFDO1FBQ0gsQ0FBQztRQUNELE9BQU8sRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxDQUFDO0lBQ3JELENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FDVCxDQUFDLEVBQ0QsdUVBQXVFLENBQ3hFLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsS0FBSyxFQUN2QyxjQUFtQyxFQUNuQyxFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsS0FBSyxNQUFNLGFBQWEsSUFBSSxjQUFjLEVBQUUsQ0FBQztZQUMzQyxNQUFNLFNBQVMsR0FBRztnQkFDaEIsVUFBVSxFQUFFLGFBQWEsRUFBRSxVQUFVO2dCQUNyQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE9BQU87YUFDaEMsQ0FBQztZQUNGLE1BQU0sYUFBYSxHQUFHLGtDQUFrQyxDQUFDO1lBQ3pELE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7O09BYWIsQ0FBQztZQUVGLE1BQU0sR0FBRyxHQUFzRCxNQUFNLEdBQUc7aUJBQ3JFLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQ3BCLE9BQU8sRUFBRTtvQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7b0JBQzFDLGVBQWUsRUFBRSxPQUFPO2lCQUN6QjtnQkFDRCxJQUFJLEVBQUU7b0JBQ0osYUFBYTtvQkFDYixLQUFLO29CQUNMLFNBQVM7aUJBQ1Y7YUFDRixDQUFDO2lCQUNELElBQUksRUFBRSxDQUFDO1lBRVYsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDcEMsTUFBTSxVQUFVLEdBQUc7b0JBQ2pCLEVBQUUsRUFBRSxhQUFhLENBQUMsRUFBRTtvQkFDcEIsVUFBVSxFQUFFLGFBQWEsRUFBRSxVQUFVO29CQUNyQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE9BQU87b0JBQy9CLFdBQVcsRUFBRSxhQUFhLEVBQUUsV0FBVztvQkFDdkMsU0FBUyxFQUFFLGFBQWEsRUFBRSxTQUFTO29CQUNuQyxNQUFNLEVBQUUsYUFBYSxFQUFFLE1BQU07aUJBQzlCLENBQUM7Z0JBQ0YsTUFBTSxjQUFjLEdBQUcsc0JBQXNCLENBQUM7Z0JBQzlDLE1BQU0sTUFBTSxHQUFHOzs7Ozs7Ozs7Ozs7U0FZZCxDQUFDO2dCQUNGLE1BQU0sSUFBSSxHQUFHLE1BQU0sR0FBRztxQkFDbkIsSUFBSSxDQUFDLGNBQWMsRUFBRTtvQkFDcEIsT0FBTyxFQUFFO3dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjt3QkFDMUMsZUFBZSxFQUFFLE9BQU87cUJBQ3pCO29CQUNELElBQUksRUFBRTt3QkFDSixhQUFhLEVBQUUsY0FBYzt3QkFDN0IsS0FBSyxFQUFFLE1BQU07d0JBQ2IsU0FBUyxFQUFFLFVBQVU7cUJBQ3RCO2lCQUNGLENBQUM7cUJBQ0QsSUFBSSxFQUFFLENBQUM7Z0JBRVYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsMENBQTBDLENBQUMsQ0FBQztZQUNoRSxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsbUNBQW1DLENBQUMsQ0FBQztJQUN0RCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxzQ0FBc0MsR0FBRyxDQUM3QyxLQUFLLEVBQ0wsVUFBMEIsRUFDMUIsRUFBRTtJQUNGLE1BQU0sZUFBZSxHQUFHLFVBQVUsRUFBRSxJQUFJLENBQ3RDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFlBQVksQ0FDN0MsQ0FBQztJQUNGLE1BQU0sZ0JBQWdCLEdBQUcsVUFBVSxFQUFFLElBQUksQ0FDdkMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CLENBQ3JELENBQUM7SUFFRixJQUFJLGVBQWUsR0FBRyxJQUFJLENBQUM7SUFDM0IsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7SUFFNUIsSUFBSSxlQUFlLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDeEIsZUFBZSxHQUFHLHdCQUF3QixDQUFDLEtBQUssRUFBRSxlQUFlLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsSUFBSSxnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUN6QixnQkFBZ0IsR0FBRyx3QkFBd0IsQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO0FBQy9DLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLEtBQUssRUFDeEMsT0FBZSxFQUNmLE1BQWMsRUFDZCxFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsa0RBQWtELENBQUMsQ0FBQztZQUN6RSxPQUFPO1FBQ1QsQ0FBQztRQUVELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLGlEQUFpRCxDQUFDLENBQUM7WUFDdkUsT0FBTztRQUNULENBQUM7UUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLCtCQUErQixDQUFDLENBQUM7UUFDN0MsTUFBTSxhQUFhLEdBQUcsdUJBQXVCLENBQUM7UUFDOUMsTUFBTSxLQUFLLEdBQUc7Ozs7Ozs7Ozs7Ozs7OztHQWVmLENBQUM7UUFDQSxNQUFNLEdBQUcsR0FBMkMsTUFBTSxHQUFHO2FBQzFELElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsY0FBYyxFQUFFLGtCQUFrQjtnQkFDbEMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVMsRUFBRTtvQkFDVCxNQUFNO29CQUNOLE9BQU87aUJBQ1I7YUFDRjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLGlDQUFpQyxDQUFDLENBQUM7UUFDcEQsT0FBTyxHQUFHLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQztJQUM3QixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHdCQUF3QixDQUFDLENBQUM7SUFDM0MsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLDRDQUE0QyxHQUFHLENBQzFELEtBQW9CLEVBQ3BCLGlCQUErQixFQUMvQixZQUE0QixFQUM1QixhQUE0QixFQUNaLEVBQUU7SUFDbEIsSUFBSSxLQUFLLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUNoQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFJLGFBQWEsRUFBRSxhQUFhLEVBQUUsQ0FBQztRQUNqQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFJLGFBQWEsRUFBRSxFQUFFLElBQUksaUJBQWlCLEVBQUUsYUFBYSxFQUFFLENBQUM7UUFDMUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsTUFBTSxTQUFTLEdBQUcsaUJBQWlCLEVBQUUsZ0JBQWdCLENBQUM7SUFDdEQsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzdCLE9BQU8sWUFBWSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7SUFDeEIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO1FBQzdCLFlBQVksQ0FBQyxJQUFJLENBQUM7WUFDaEIsRUFBRSxFQUFFLElBQUksRUFBRTtZQUNWLE9BQU8sRUFBRSxRQUFRO1lBQ2pCLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTtZQUNqQixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU07WUFDcEIsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLFdBQVcsRUFBRTtZQUNoQyxXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO1lBQ2xDLE9BQU8sRUFBRSxLQUFLO1NBQ2YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLFlBQVksQ0FBQztBQUN0QixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx5Q0FBeUMsR0FBRyxDQUN2RCxpQkFBK0IsRUFDL0IsS0FBb0IsRUFDcEIsYUFBNkIsRUFDN0IsRUFBRTtJQUNGLElBQUksYUFBYSxFQUFFLGdCQUFnQixFQUFFLENBQUM7UUFDcEMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsSUFBSSxhQUFhLEVBQUUsRUFBRSxJQUFJLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLENBQUM7UUFDN0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsSUFBSSxLQUFLLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQztRQUNwQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFDRCxNQUFNLE9BQU8sR0FBRyxJQUFJLEVBQUUsQ0FBQztJQUN2QixNQUFNLFFBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQztJQUN4QixNQUFNLFVBQVUsR0FBRyxLQUFLLEVBQUUsVUFBVSxJQUFJLEdBQUcsT0FBTyxJQUFJLEtBQUssRUFBRSxVQUFVLEVBQUUsQ0FBQztJQUMxRSxNQUFNLFdBQVcsR0FBRyxLQUFLLEVBQUUsV0FBVyxJQUFJLEdBQUcsUUFBUSxJQUFJLEtBQUssRUFBRSxVQUFVLEVBQUUsQ0FBQztJQUU3RSxJQUFJLGNBQWMsR0FBUSxFQUFFLENBQUM7SUFDN0IsY0FBYyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7SUFFaEMsSUFBSSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxVQUFVLEVBQUUsQ0FBQztRQUN2RCxNQUFNLDhCQUE4QixHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDckUsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDO2FBQ3pCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDO2FBQzFELE1BQU0sRUFBRSxDQUFDO1FBQ1osTUFBTSxnQ0FBZ0MsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ3ZFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQzthQUN6QixNQUFNLEVBQUUsQ0FBQztRQUVaLE1BQU0sVUFBVSxHQUFrQjtZQUNoQyxFQUFFLEVBQUUsV0FBVztZQUNmLFVBQVUsRUFBRSxLQUFLO1lBQ2pCLFVBQVUsRUFBRSxLQUFLLENBQUMsRUFBRTtZQUNwQixXQUFXLEVBQUUsSUFBSTtZQUNqQixLQUFLLEVBQUUsYUFBYTtZQUNwQixPQUFPLEVBQUUsYUFBYTtZQUN0QixTQUFTLEVBQUUsZ0NBQWdDO1lBQzNDLE9BQU8sRUFBRSw4QkFBOEI7WUFDdkMsTUFBTSxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUTtZQUNoRCxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU07WUFDckIsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLFdBQVcsRUFBRTtZQUNsQyxPQUFPLEVBQUUsS0FBSztZQUNkLFFBQVEsRUFBRSxDQUFDO1lBQ1gsVUFBVSxFQUFFLEtBQUs7WUFDakIsVUFBVSxFQUFFLElBQUk7WUFDaEIsZ0JBQWdCLEVBQUUsS0FBSztZQUN2QixxQkFBcUIsRUFBRSxLQUFLO1lBQzVCLHVCQUF1QixFQUFFLEtBQUs7WUFDOUIsaUJBQWlCLEVBQUUsU0FBUztZQUM1QixjQUFjLEVBQUUsS0FBSztZQUNyQixTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO1lBQ2hDLFVBQVUsRUFBRSxLQUFLLEVBQUUsVUFBVTtZQUM3QixRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVE7WUFDekIsT0FBTyxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ25DLENBQUM7UUFDRixjQUFjLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUN2QyxjQUFjLENBQUMsUUFBUSxHQUFHO1lBQ3hCLEdBQUcsY0FBYyxDQUFDLFFBQVE7WUFDMUIsV0FBVztZQUNYLFlBQVksRUFBRTtnQkFDWixHQUFHLGNBQWMsRUFBRSxRQUFRLEVBQUUsWUFBWTtnQkFDekMsVUFBVSxFQUFFLGlCQUFpQixDQUFDLG1CQUFtQixDQUFDLFVBQVU7YUFDN0Q7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELElBQUksaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsV0FBVyxFQUFFLENBQUM7UUFDeEQsTUFBTSxpQ0FBaUMsR0FBRyxLQUFLLENBQzdDLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FDN0I7YUFDRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7YUFDeEIsUUFBUSxDQUFDLGlCQUFpQixDQUFDLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUM7YUFDaEUsTUFBTSxFQUFFLENBQUM7UUFDWixNQUFNLCtCQUErQixHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDeEUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO2FBQ3hCLE1BQU0sRUFBRSxDQUFDO1FBRVosTUFBTSxXQUFXLEdBQWtCO1lBQ2pDLEVBQUUsRUFBRSxVQUFVO1lBQ2QsVUFBVSxFQUFFLElBQUk7WUFDaEIsV0FBVyxFQUFFLEtBQUs7WUFDbEIsVUFBVSxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBQ3BCLEtBQUssRUFBRSxhQUFhO1lBQ3BCLE9BQU8sRUFBRSxhQUFhO1lBQ3RCLFNBQVMsRUFBRSxpQ0FBaUM7WUFDNUMsT0FBTyxFQUFFLCtCQUErQjtZQUN4QyxNQUFNLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRO1lBQy9DLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTTtZQUNyQixXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO1lBQ2xDLE9BQU8sRUFBRSxLQUFLO1lBQ2QsUUFBUSxFQUFFLENBQUM7WUFDWCxVQUFVLEVBQUUsS0FBSztZQUNqQixVQUFVLEVBQUUsSUFBSTtZQUNoQixnQkFBZ0IsRUFBRSxLQUFLO1lBQ3ZCLHFCQUFxQixFQUFFLEtBQUs7WUFDNUIsdUJBQXVCLEVBQUUsS0FBSztZQUM5QixpQkFBaUIsRUFBRSxTQUFTO1lBQzVCLGNBQWMsRUFBRSxLQUFLO1lBQ3JCLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUU7WUFDaEMsVUFBVSxFQUFFLEtBQUssRUFBRSxVQUFVO1lBQzdCLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUTtZQUN6QixPQUFPLEVBQUUsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbEMsQ0FBQztRQUNGLGNBQWMsQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQ3pDLGNBQWMsQ0FBQyxRQUFRLEdBQUc7WUFDeEIsR0FBRyxjQUFjLENBQUMsUUFBUTtZQUMxQixVQUFVO1lBQ1YsWUFBWSxFQUFFO2dCQUNaLEdBQUcsY0FBYyxFQUFFLFFBQVEsRUFBRSxZQUFZO2dCQUN6QyxXQUFXLEVBQUUsaUJBQWlCLENBQUMsbUJBQW1CLENBQUMsV0FBVzthQUMvRDtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTyxjQUFjLENBQUM7QUFDeEIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sb0NBQW9DLEdBQUcsS0FBSyxFQUN2RCxLQUFLLEVBQ0wsU0FBd0IsRUFDeEIsbUJBQW1DLEVBQ25DLE1BQWMsRUFDZCxhQUE4QixFQUM5QixnQkFHQyxFQUNELGFBQTZCLEVBQzdCLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxJQUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN2QyxNQUFNLElBQUksS0FBSyxDQUNiLGtGQUFrRixDQUNuRixDQUFDO1FBQ0osQ0FBQztRQUNELElBQUksUUFBUSxHQUFHLFNBQVMsQ0FBQztRQUN6QixJQUFJLFlBQVksR0FBRyxhQUFhLElBQUksRUFBRSxDQUFDO1FBQ3ZDLElBQUksYUFBYSxHQUFHLGdCQUFnQixJQUFJLEVBQUUsQ0FBQztRQUMzQyxNQUFNLHlCQUF5QixHQUFHLHNDQUFzQyxDQUN0RSxLQUFLLEVBQ0wsbUJBQW1CLENBQ3BCLENBQUM7UUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLHlCQUF5QixFQUFFLDRCQUE0QixDQUFDLENBQUM7UUFFckUsSUFBSSx5QkFBeUIsRUFBRSxlQUFlLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDbkQsUUFBUSxHQUFHLEVBQUUsR0FBRyxRQUFRLEVBQUUsR0FBRyx5QkFBeUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN6RSxNQUFNLGVBQWUsR0FBRyxtQkFBbUIsRUFBRSxJQUFJLENBQy9DLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFlBQVksQ0FDN0MsQ0FBQztZQUVGLE1BQU0sWUFBWSxHQUFHLE1BQU0scUJBQXFCLENBQzlDLHlCQUF5QixDQUFDLGVBQWUsQ0FBQyxFQUFFLEVBQzVDLE1BQU0sQ0FDUCxDQUFDO1lBQ0YsTUFBTSxTQUFTLEdBQUcsNENBQTRDLENBQzVELFFBQVEsRUFDUixlQUFlLEVBQ2YsWUFBWSxFQUNaLGFBQWEsQ0FDZCxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLENBQUM7WUFDckMsSUFBSSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUMxQixZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7Z0JBQ2hDLFlBQVksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBRUQsTUFBTSxVQUFVLEdBQUcseUNBQXlDLENBQzFELGVBQWUsRUFDZixRQUFRLEVBQ1IsYUFBYSxDQUNkLENBQUM7WUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxlQUFlLENBQUMsQ0FBQztZQUN6QyxJQUFJLFVBQVUsRUFBRSxXQUFXLEVBQUUsQ0FBQztnQkFDNUIsYUFBYSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUMsV0FBVyxDQUFDO1lBQ3JELENBQUM7WUFFRCxJQUFJLFVBQVUsRUFBRSxVQUFVLEVBQUUsQ0FBQztnQkFDM0IsYUFBYSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDO1lBQ25ELENBQUM7WUFFRCxJQUNFLFVBQVUsRUFBRSxRQUFRLEVBQUUsVUFBVTtnQkFDaEMsVUFBVSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQ2pDLENBQUM7Z0JBQ0QsUUFBUSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7WUFDakMsQ0FBQztRQUNILENBQUM7UUFFRCxJQUFJLHlCQUF5QixFQUFFLGdCQUFnQixFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQ3BELFFBQVEsR0FBRyxFQUFFLEdBQUcsUUFBUSxFQUFFLEdBQUcseUJBQXlCLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUMxRSxNQUFNLGdCQUFnQixHQUFHLG1CQUFtQixFQUFFLElBQUksQ0FDaEQsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CLENBQ3JELENBQUM7WUFFRixNQUFNLFlBQVksR0FBRyxNQUFNLHFCQUFxQixDQUM5Qyx5QkFBeUIsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQzdDLE1BQU0sQ0FDUCxDQUFDO1lBQ0YsTUFBTSxTQUFTLEdBQUcsNENBQTRDLENBQzVELFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsWUFBWSxFQUNaLGFBQWEsQ0FDZCxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLENBQUM7WUFDckMsSUFBSSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUMxQixZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7Z0JBQ2hDLFlBQVksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBRUQsTUFBTSxZQUFZLEdBQUcseUNBQXlDLENBQzVELGdCQUFnQixFQUNoQixRQUFRLEVBQ1IsYUFBYSxDQUNkLENBQUM7WUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsQ0FBQztZQUMzQyxJQUFJLFlBQVksRUFBRSxXQUFXLEVBQUUsQ0FBQztnQkFDOUIsYUFBYSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDO1lBQ3ZELENBQUM7WUFFRCxJQUFJLFlBQVksRUFBRSxVQUFVLEVBQUUsQ0FBQztnQkFDN0IsYUFBYSxDQUFDLFVBQVUsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDO1lBQ3JELENBQUM7WUFFRCxJQUNFLFlBQVksRUFBRSxRQUFRLEVBQUUsVUFBVTtnQkFDbEMsWUFBWSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQ25DLENBQUM7Z0JBQ0QsUUFBUSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUM7WUFDbkMsQ0FBQztRQUNILENBQUM7UUFDRCxPQUFPLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLENBQUM7SUFDcEUsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxpREFBaUQsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxtQ0FBbUMsR0FBRyxLQUFLLEVBQ3RELEtBQW9CLEVBQ3BCLE1BQWdCLEVBQ2hCLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQztRQUM3QixPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxnREFBZ0QsQ0FBQyxDQUFDO1FBRWxFLE1BQU0sVUFBVSxHQUFtQixNQUFNLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRW5FLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztZQUN6QixNQUFNLElBQUksS0FBSyxDQUNiLGlFQUFpRSxDQUNsRSxDQUFDO1FBQ0osQ0FBQztRQUVELE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBVSxFQUNWLEVBQUUsRUFDRixxREFBcUQsQ0FDdEQsQ0FBQztRQUNGLE1BQU0sSUFBSSxHQUFHLE1BQU0sc0JBQXNCLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzdELE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO1FBQ3ZFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBRWhDLE1BQU0sY0FBYyxHQUFHLDBCQUEwQixDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNoRSxPQUFPLENBQUMsR0FBRyxDQUNULGNBQWMsRUFDZCxFQUFFLEVBQ0YseURBQXlELENBQzFELENBQUM7UUFFRixJQUFJLGNBQWMsRUFBRSxDQUFDO1lBQ25CLE1BQU0saUJBQWlCLEdBQUcsVUFBVSxFQUFFLElBQUksQ0FDeEMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUMvQyxDQUFDO1lBQ0YsSUFBSSw4QkFBOEIsR0FDaEMsTUFBTSxvQ0FBb0MsQ0FDeEMsS0FBSyxFQUNMLGlCQUFpQixFQUNqQixNQUFNLEVBQ04sTUFBTSxFQUNOLFVBQVUsQ0FDWCxDQUFDO1lBQ0osSUFBSSw4QkFBOEIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQy9DLDhCQUE4QixHQUFHLGVBQWUsQ0FDOUMsOEJBQThCLENBQy9CLENBQUM7Z0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCw4QkFBOEIsRUFDOUIsRUFBRSxFQUNGLHdFQUF3RSxDQUN6RSxDQUFDO1lBQ0osQ0FBQztZQUNELE1BQU0sdUJBQXVCLEdBQUcsd0JBQXdCLENBQ3RELEtBQUssRUFDTCxpQkFBaUIsQ0FDbEIsQ0FBQztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsdUJBQXVCLEVBQ3ZCLEVBQUUsRUFDRixrRUFBa0UsQ0FDbkUsQ0FBQztZQUVGLElBQUksUUFBUSxHQUFrQix1QkFBdUIsSUFBSSxLQUFLLENBQUM7WUFDL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsK0NBQStDLENBQUMsQ0FBQztZQUN2RSxJQUFJLFlBQVksR0FBbUIsRUFBRSxDQUFDO1lBQ3RDLElBQUksZUFBZSxHQUF5QixFQUFFLENBQUM7WUFFL0MsTUFBTSxFQUNKLFFBQVEsRUFBRSxTQUFTLEVBQ25CLFlBQVksRUFBRSxhQUFhLEVBQzNCLGVBQWUsRUFBRSxnQkFBZ0IsR0FDbEMsR0FBRyxNQUFNLGtEQUFrRCxDQUMxRCxFQUFFLEVBQ0YsTUFBTSxFQUNOLFFBQVEsRUFDUixpQkFBaUIsRUFDakIsWUFBWSxFQUNaLGVBQWUsQ0FDaEIsQ0FBQztZQUNGLFFBQVEsR0FBRyxTQUFTLENBQUM7WUFDckIsWUFBWSxHQUFHLGFBQWEsQ0FBQztZQUM3QixlQUFlLEdBQUcsZ0JBQWdCLENBQUM7WUFFbkMsSUFBSSw4QkFBOEIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQy9DLE1BQU0sY0FBYyxHQUNsQiw4QkFBOEIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtvQkFDdkMsTUFBTSxhQUFhLEdBQXNCO3dCQUN2QyxVQUFVLEVBQUUsQ0FBQyxDQUFDLEVBQUU7d0JBQ2hCLE9BQU8sRUFBRSxFQUFFO3dCQUNYLE1BQU07d0JBQ04sRUFBRSxFQUFFLElBQUksRUFBRTt3QkFDVixXQUFXLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7d0JBQ3JDLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtxQkFDZixDQUFDO29CQUN2QixPQUFPLGFBQWEsQ0FBQztnQkFDdkIsQ0FBQyxDQUFDLENBQUM7Z0JBQ0wsT0FBTyxDQUFDLEdBQUcsQ0FDVCxjQUFjLEVBQ2QsRUFBRSxFQUNGLHlEQUF5RCxDQUMxRCxDQUFDO2dCQUNGLE1BQU0sb0JBQW9CLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQzNDLE1BQU0sRUFDSixRQUFRLEVBQUUsU0FBUyxFQUNuQixZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSxvQ0FBb0MsQ0FDNUMsS0FBSyxFQUNMLFFBQVEsRUFDUiw4QkFBOEIsRUFDOUIsTUFBTSxFQUNOLFlBQVksRUFDWixlQUFlLENBQ2hCLENBQUM7Z0JBQ0YsUUFBUSxHQUFHLFNBQVMsQ0FBQztnQkFDckIsWUFBWSxHQUFHLGFBQWEsQ0FBQztnQkFDN0IsZUFBZSxHQUFHLGdCQUFnQixDQUFDO1lBQ3JDLENBQUM7WUFFRCxRQUFRLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUV6QixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO1lBQ3ZFLE9BQU8sQ0FBQyxHQUFHLENBQ1QsWUFBWSxFQUNaLG1EQUFtRCxDQUNwRCxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxlQUFlLEVBQ2Ysc0RBQXNELENBQ3ZELENBQUM7WUFFRixPQUFPO2dCQUNMLFFBQVE7Z0JBQ1IsWUFBWTtnQkFDWixlQUFlO2FBQ2hCLENBQUM7UUFDSixDQUFDO1FBQ0QsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDdEIsT0FBTztZQUNMLFFBQVEsRUFBRSxLQUFLO1NBQ2hCLENBQUM7SUFDSixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxLQUFLLEVBQUUsT0FBZSxFQUFFLEVBQUU7SUFDOUQsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsd0NBQXdDLENBQUMsQ0FBQztRQUMvRCxNQUFNLGFBQWEsR0FBRyx3QkFBd0IsQ0FBQztRQUMvQyxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0F5Q2IsQ0FBQztRQUNGLE1BQU0sR0FBRyxHQUFzRCxNQUFNLEdBQUc7YUFDckUsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNwQixPQUFPLEVBQUU7Z0JBQ1AsdUJBQXVCLEVBQUUsaUJBQWlCO2dCQUMxQyxjQUFjLEVBQUUsa0JBQWtCO2dCQUNsQyxlQUFlLEVBQUUsT0FBTzthQUN6QjtZQUNELElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUyxFQUFFO29CQUNULE9BQU87aUJBQ1I7YUFDRjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLHlCQUF5QixDQUFDLENBQUM7UUFDNUMsTUFBTSxVQUFVLEdBQW1CLEdBQUcsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLEdBQUcsQ0FDL0QsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQ2pDLEVBQUUsTUFBTSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLElBQUksQ0FBQyxDQUFDO1FBQy9DLE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBVSxFQUNWLHNEQUFzRCxDQUN2RCxDQUFDO1FBQ0YsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxtQ0FBbUMsQ0FBQyxDQUFDO0lBQ3RELENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxxQ0FBcUMsR0FBRyxDQUNuRCxJQUFJLEVBQ0osaUJBQWlCLEVBQ2pCLEVBQUU7SUFDRixNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO0lBQ3hCLElBQUksaUJBQWlCLEdBQUcsRUFBRSxDQUFDO0lBQzNCLElBQUksY0FBYyxHQUFHLENBQUMsQ0FBQztJQUN2QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsaUJBQWlCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDbEQsTUFBTSxLQUFLLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXhCLElBQUksS0FBSyxHQUFHLGNBQWMsRUFBRSxDQUFDO1lBQzNCLGlCQUFpQixHQUFHLEtBQUssQ0FBQztZQUMxQixjQUFjLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxpQkFBaUIsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSw2REFBNkQsR0FDeEUsS0FBSyxFQUFFLEtBQW9CLEVBQUUsTUFBZ0IsRUFBRSxFQUFFO0lBQy9DLElBQUksQ0FBQztRQUNILE1BQU0sRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsRUFBRSxFQUNGLE1BQU0sRUFDTixrRkFBa0YsQ0FDbkYsQ0FBQztRQUVGLE1BQU0sVUFBVSxHQUFtQixNQUFNLHNCQUFzQixDQUM3RCxLQUFLLEVBQUUsRUFBRSxDQUNWLENBQUM7UUFFRixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUN2QyxNQUFNLElBQUksR0FBRyxNQUFNLHNCQUFzQixDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMzQixNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUVoQyxNQUFNLGNBQWMsR0FBRyxxQ0FBcUMsQ0FDMUQsSUFBSSxFQUNKLE1BQU0sQ0FDUCxDQUFDO1FBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUMvQyxJQUFJLGlCQUFpQixHQUF3QixJQUFJLENBQUM7UUFDbEQsSUFBSSxRQUFRLEdBQWtCLEtBQUssQ0FBQztRQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNuQyxJQUFJLFlBQVksR0FBbUIsRUFBRSxDQUFDO1FBQ3RDLElBQUksZUFBZSxHQUFrQyxFQUFFLENBQUM7UUFDeEQsSUFBSSxjQUFjLEVBQUUsQ0FBQztZQUNuQixpQkFBaUIsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUNqQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxjQUFjLENBQy9DLENBQUM7WUFDRixNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLElBQUksOEJBQThCLEdBQ2hDLG9DQUFvQyxDQUNsQyxLQUFLLEVBQ0wsaUJBQWlCLEVBQ2pCLE1BQU0sRUFDTixNQUFNLEVBQ04sVUFBVSxDQUNYLENBQUM7WUFDSixJQUFJLDhCQUE4QixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDL0MsOEJBQThCLEdBQUcsZUFBZSxDQUM5Qyw4QkFBOEIsQ0FDL0IsQ0FBQztnQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULDhCQUE4QixFQUM5QixnQ0FBZ0MsQ0FDakMsQ0FBQztnQkFDRixNQUFNLGNBQWMsR0FDbEIsOEJBQThCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3ZDLE1BQU0sYUFBYSxHQUFzQjt3QkFDdkMsVUFBVSxFQUFFLENBQUMsQ0FBQyxFQUFFO3dCQUNoQixPQUFPLEVBQUUsRUFBRTt3QkFDWCxNQUFNO3dCQUNOLEVBQUUsRUFBRSxJQUFJLEVBQUU7d0JBQ1YsV0FBVyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO3dCQUNyQyxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7cUJBQ2YsQ0FBQztvQkFDdkIsT0FBTyxhQUFhLENBQUM7Z0JBQ3ZCLENBQUMsQ0FBQyxDQUFDO2dCQUNMLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLENBQUM7Z0JBQy9DLE1BQU0sb0JBQW9CLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQzNDLE1BQU0sRUFDSixRQUFRLEVBQUUsU0FBUyxFQUNuQixZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSxvQ0FBb0MsQ0FDNUMsS0FBSyxFQUNMLFFBQVEsRUFDUiw4QkFBOEIsRUFDOUIsTUFBTSxFQUNOLFlBQVksRUFDWixlQUFlLENBQ2hCLENBQUM7Z0JBQ0YsUUFBUSxHQUFHLFNBQVMsQ0FBQztnQkFDckIsWUFBWSxHQUFHLGFBQWEsQ0FBQztnQkFDN0IsZUFBZSxHQUFHLGdCQUFnQixDQUFDO1lBQ3JDLENBQUM7UUFDSCxDQUFDO1FBRUQsSUFBSSx1QkFBdUIsR0FBeUIsSUFBSSxDQUFDO1FBQ3pELElBQUksaUJBQWlCLEVBQUUsQ0FBQztZQUN0Qix1QkFBdUIsR0FBRyx3QkFBd0IsQ0FDaEQsS0FBSyxFQUNMLGlCQUFpQixDQUNsQixDQUFDO1FBQ0osQ0FBQztRQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztRQUVqRSxRQUFRLEdBQUcsdUJBQXVCLElBQUksUUFBUSxJQUFJLEtBQUssQ0FBQztRQUN4RCxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNuQyxNQUFNLEVBQ0osUUFBUSxFQUFFLFNBQVMsRUFDbkIsWUFBWSxFQUFFLGFBQWEsRUFDM0IsZUFBZSxFQUFFLGdCQUFnQixHQUNsQyxHQUFHLE1BQU0sa0RBQWtELENBQzFELEVBQUUsRUFDRixNQUFNLEVBQ04sUUFBUSxFQUNSLGlCQUFpQixFQUNqQixZQUFZLEVBQ1osZUFBdUMsQ0FDeEMsQ0FBQztRQUVGLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFDckIsWUFBWSxHQUFHLGFBQWEsQ0FBQztRQUM3QixlQUFlLEdBQUcsZ0JBQXdDLENBQUM7UUFFM0QsSUFBSSxVQUFVLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzNCLE1BQU0sRUFDSixRQUFRLEVBQUUsU0FBUyxFQUNuQixZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSxvQ0FBb0MsQ0FDNUMsS0FBSyxFQUNMLFFBQVEsRUFDUixVQUFVLEVBQ1YsTUFBTSxFQUNOLFlBQVksRUFDWixlQUF1QyxDQUN4QyxDQUFDO1lBQ0YsUUFBUSxHQUFHLFNBQVMsQ0FBQztZQUNyQixZQUFZLEdBQUcsYUFBYSxDQUFDO1lBQzdCLGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQztRQUNyQyxDQUFDO1FBRUQsUUFBUSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFekIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztRQUVqRCxPQUFPO1lBQ0wsUUFBUTtZQUNSLFlBQVk7WUFDWixlQUFlO1NBQ2hCLENBQUM7SUFDSixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFSixNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxLQUFLLEVBQ3pDLE9BQWUsRUFDUyxFQUFFO0lBQzFCLElBQUksQ0FBQztRQUNILE1BQU0sYUFBYSxHQUFHLHdCQUF3QixDQUFDO1FBQy9DLE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVIZixDQUFDO1FBQ0EsTUFBTSxHQUFHLEdBQTZDLE1BQU0sR0FBRzthQUM1RCxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLE9BQU8sRUFBRTtnQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7Z0JBQzFDLGNBQWMsRUFBRSxrQkFBa0I7Z0JBQ2xDLGVBQWUsRUFBRSxPQUFPO2FBQ3pCO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTLEVBQUU7b0JBQ1QsT0FBTztpQkFDUjthQUNGO1NBQ0YsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsa0NBQWtDLENBQUMsQ0FBQztRQUNyRCxPQUFPLEdBQUcsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDO0lBQ2hDLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUseUJBQXlCLENBQUMsQ0FBQztJQUM1QyxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUcsS0FBSyxFQUFFLEVBQVUsRUFBRSxFQUFFO0lBQ3JELElBQUksQ0FBQztRQUNILE1BQU0sTUFBTSxHQUFHLE1BQU0sZUFBZSxFQUFFLENBQUM7UUFDdkMsTUFBTSxRQUFRLEdBQUcsTUFBTSxNQUFNLENBQUMsTUFBTSxDQUFDO1lBQ25DLEVBQUU7WUFDRixLQUFLLEVBQUUsV0FBVztTQUNuQixDQUFDLENBQUM7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLDhCQUE4QixDQUFDLENBQUM7UUFDNUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO0lBQzFDLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSw2QkFBNkIsR0FBRyxDQUMzQyxLQUFvQixFQUNwQixhQUE0QixFQUM1QixRQUF1QixFQUN2QixlQUFvQyxFQUNyQixFQUFFO0lBQ2pCLE1BQU0sZ0JBQWdCLEdBQUcsS0FBSztTQUMzQixRQUFRLENBQ1AsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztTQUN0QyxFQUFFLENBQUMsYUFBYSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUM7U0FDakMsSUFBSSxDQUNILEtBQUssQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQzVDLGFBQWEsRUFBRSxRQUFRLEVBQ3ZCLElBQUksQ0FDTCxDQUNGLENBQ0o7U0FDQSxTQUFTLEVBQUUsQ0FBQztJQUNmLE9BQU87UUFDTCxHQUFHLEtBQUs7UUFDUixZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUUsd0JBQXdCO1lBQzVDLENBQUMsQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCO2dCQUMvQixDQUFDLENBQUMsYUFBYSxDQUFDLFlBQVk7Z0JBQzVCLENBQUMsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCO29CQUMxQixDQUFDLENBQUMsYUFBYSxFQUFFLFlBQVk7b0JBQzdCLENBQUMsQ0FBQyxRQUFRLEVBQUUsbUJBQW1CO3dCQUM3QixDQUFDLENBQUMsYUFBYTt3QkFDZixDQUFDLENBQUMsZUFBZSxFQUFFLGdCQUFnQjs0QkFDakMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxZQUFZOzRCQUM3QixDQUFDLENBQUMsS0FBSyxFQUFFLFlBQVk7WUFDN0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZO1FBQ3RCLGFBQWEsRUFBRSxDQUFDLEtBQUssRUFBRSwwQkFBMEI7WUFDL0MsQ0FBQyxDQUFDLGFBQWEsRUFBRSxrQkFBa0IsSUFBSSxhQUFhLEVBQUUsYUFBYTtnQkFDakUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxhQUFhO2dCQUM3QixDQUFDLENBQUMsUUFBUSxFQUFFLGtCQUFrQixJQUFJLGFBQWEsRUFBRSxhQUFhO29CQUM1RCxDQUFDLENBQUMsYUFBYSxFQUFFLGFBQWE7b0JBQzlCLENBQUMsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLElBQUksYUFBYSxFQUFFLGFBQWE7d0JBQ25FLENBQUMsQ0FBQyxhQUFhLEVBQUUsYUFBYTt3QkFDOUIsQ0FBQyxDQUFDLEtBQUssRUFBRSxhQUFhO1lBQzVCLENBQUMsQ0FBQyxLQUFLLENBQUMsYUFBYTtRQUN2QixrQkFBa0IsRUFBRSxDQUFDLEtBQUssRUFBRSwwQkFBMEI7WUFDcEQsQ0FBQyxDQUFDLGFBQWEsRUFBRSxrQkFBa0IsSUFBSSxhQUFhLEVBQUUsa0JBQWtCO2dCQUN0RSxDQUFDLENBQUMsYUFBYSxDQUFDLGtCQUFrQjtnQkFDbEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxrQkFBa0IsSUFBSSxhQUFhLEVBQUUsa0JBQWtCO29CQUNqRSxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtvQkFDbkMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxrQkFBa0I7d0JBQ2pDLGFBQWEsRUFBRSxrQkFBa0I7d0JBQ25DLENBQUMsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCO3dCQUNuQyxDQUFDLENBQUMsS0FBSyxFQUFFLGtCQUFrQjtZQUNqQyxDQUFDLENBQUMsS0FBSyxDQUFDLGtCQUFrQjtRQUM1Qix1QkFBdUIsRUFBRSxDQUFDLEtBQUssRUFBRSwwQkFBMEI7WUFDekQsQ0FBQyxDQUFDLGFBQWEsRUFBRSxrQkFBa0I7Z0JBQ2pDLGFBQWEsRUFBRSx1QkFBdUI7Z0JBQ3RDLENBQUMsQ0FBQyxhQUFhLENBQUMsdUJBQXVCO2dCQUN2QyxDQUFDLENBQUMsUUFBUSxFQUFFLGtCQUFrQixJQUFJLGFBQWEsRUFBRSx1QkFBdUI7b0JBQ3RFLENBQUMsQ0FBQyxhQUFhLEVBQUUsdUJBQXVCO29CQUN4QyxDQUFDLENBQUMsZUFBZSxFQUFFLGtCQUFrQjt3QkFDakMsYUFBYSxFQUFFLHVCQUF1Qjt3QkFDeEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSx1QkFBdUI7d0JBQ3hDLENBQUMsQ0FBQyxLQUFLLEVBQUUsdUJBQXVCO1lBQ3RDLENBQUMsQ0FBQyxLQUFLLENBQUMsdUJBQXVCO1FBQ2pDLHFCQUFxQixFQUFFLENBQUMsS0FBSyxFQUFFLDBCQUEwQjtZQUN2RCxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtnQkFDakMsYUFBYSxFQUFFLHFCQUFxQjtnQkFDcEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUI7Z0JBQ3JDLENBQUMsQ0FBQyxRQUFRLEVBQUUsa0JBQWtCLElBQUksYUFBYSxFQUFFLHFCQUFxQjtvQkFDcEUsQ0FBQyxDQUFDLGFBQWEsRUFBRSxxQkFBcUI7b0JBQ3RDLENBQUMsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCO3dCQUNqQyxhQUFhLEVBQUUscUJBQXFCO3dCQUN0QyxDQUFDLENBQUMsYUFBYSxFQUFFLHFCQUFxQjt3QkFDdEMsQ0FBQyxDQUFDLEtBQUssRUFBRSxxQkFBcUI7WUFDcEMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxxQkFBcUI7UUFDL0IsUUFBUSxFQUNOLENBQUMsQ0FBQyxLQUFLLEVBQUUseUJBQXlCO1lBQ2hDLENBQUMsQ0FBQyxhQUFhLEVBQUUsaUJBQWlCO2dCQUNoQyxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVE7Z0JBQ3hCLENBQUMsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCO29CQUMzQixDQUFDLENBQUMsYUFBYSxFQUFFLFFBQVE7b0JBQ3pCLENBQUMsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CO3dCQUM5QixDQUFDLENBQUMsUUFBUSxFQUFFLG9CQUFvQjt3QkFDaEMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxpQkFBaUI7NEJBQ2xDLENBQUMsQ0FBQyxhQUFhLEVBQUUsUUFBUTs0QkFDekIsQ0FBQyxDQUFDLEtBQUssRUFBRSxRQUFRO1lBQ3pCLENBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQztRQUMzQixPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsbUJBQW1CO1lBQ2xDLENBQUMsQ0FBQyxhQUFhLEVBQUUsV0FBVztnQkFDMUIsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPO2dCQUN2QixDQUFDLENBQUMsUUFBUSxFQUFFLFdBQVc7b0JBQ3JCLENBQUMsQ0FBQyxhQUFhLEVBQUUsT0FBTztvQkFDeEIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxjQUFjO3dCQUN4QixDQUFDLENBQUMsUUFBUSxFQUFFLGNBQWM7d0JBQzFCLENBQUMsQ0FBQyxlQUFlLEVBQUUsV0FBVzs0QkFDNUIsQ0FBQyxDQUFDLGFBQWEsRUFBRSxPQUFPOzRCQUN4QixDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU87WUFDeEIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPO1FBQ2pCLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxxQkFBcUI7WUFDdEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxhQUFhO2dCQUM1QixDQUFDLENBQUMsYUFBYSxDQUFDLFNBQVM7Z0JBQ3pCLENBQUMsQ0FBQyxRQUFRLEVBQUUsYUFBYTtvQkFDdkIsQ0FBQyxDQUFDLGFBQWEsRUFBRSxTQUFTO29CQUMxQixDQUFDLENBQUMsUUFBUSxFQUFFLGdCQUFnQjt3QkFDMUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxnQkFBZ0I7d0JBQzVCLENBQUMsQ0FBQyxlQUFlLEVBQUUsYUFBYTs0QkFDOUIsQ0FBQyxDQUFDLGFBQWEsRUFBRSxTQUFTOzRCQUMxQixDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksS0FBSyxZQUFZO2dDQUMvQixDQUFDLENBQUMsSUFBSTtnQ0FDTixDQUFDLENBQUMsS0FBSyxFQUFFLFNBQVM7WUFDNUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTO1FBQ25CLGlCQUFpQixFQUFFLENBQUMsS0FBSyxFQUFFLDZCQUE2QjtZQUN0RCxDQUFDLENBQUMsYUFBYSxFQUFFLHFCQUFxQjtnQkFDcEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxpQkFBaUI7Z0JBQ2pDLENBQUMsQ0FBQyxRQUFRLEVBQUUscUJBQXFCO29CQUMvQixDQUFDLENBQUMsYUFBYSxFQUFFLGlCQUFpQjtvQkFDbEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSx3QkFBd0I7d0JBQ2xDLENBQUMsQ0FBQyxRQUFRLEVBQUUsd0JBQXdCO3dCQUNwQyxDQUFDLENBQUMsZUFBZSxFQUFFLHFCQUFxQjs0QkFDdEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxpQkFBaUI7NEJBQ2xDLENBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxLQUFLLG9CQUFvQjtnQ0FDdkMsQ0FBQyxDQUFDLElBQUk7Z0NBQ04sQ0FBQyxDQUFDLEtBQUssRUFBRSxpQkFBaUI7WUFDcEMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxpQkFBaUI7UUFDM0IsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLHNCQUFzQjtZQUN4QyxDQUFDLENBQUMsYUFBYSxFQUFFLGNBQWM7Z0JBQzdCLENBQUMsQ0FBQyxhQUFhLENBQUMsVUFBVTtnQkFDMUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxjQUFjO29CQUN4QixDQUFDLENBQUMsYUFBYSxFQUFFLFVBQVU7b0JBQzNCLENBQUMsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCO3dCQUMzQixDQUFDLENBQUMsUUFBUSxFQUFFLGlCQUFpQjt3QkFDN0IsQ0FBQyxDQUFDLGVBQWUsRUFBRSxjQUFjOzRCQUMvQixDQUFDLENBQUMsYUFBYSxFQUFFLFVBQVU7NEJBQzNCLENBQUMsQ0FBQyxLQUFLLEVBQUUsVUFBVTtZQUMzQixDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVU7UUFDcEIsbUJBQW1CLEVBQUUsQ0FBQyxLQUFLLEVBQUUsc0JBQXNCO1lBQ2pELENBQUMsQ0FBQyxhQUFhLEVBQUUsYUFBYTtnQkFDNUIsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxTQUFTO2dCQUN6QixDQUFDLENBQUMsUUFBUSxFQUFFLGFBQWE7b0JBQ3ZCLENBQUMsQ0FBQyxhQUFhLEVBQUUsU0FBUztvQkFDMUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxnQkFBZ0I7d0JBQzFCLENBQUMsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCO3dCQUM1QixDQUFDLENBQUMsZUFBZSxFQUFFLGFBQWE7NEJBQzlCLENBQUMsQ0FBQyxhQUFhLEVBQUUsU0FBUzs0QkFDMUIsQ0FBQyxDQUFDLEtBQUssRUFBRSxTQUFTO1lBQzFCLENBQUMsQ0FBQyxLQUFLLENBQUMsbUJBQW1CO1FBQzdCLDJCQUEyQixFQUFFLENBQUMsS0FBSyxFQUFFLHNCQUFzQjtZQUN6RCxDQUFDLENBQUMsYUFBYSxFQUFFLHFCQUFxQjtnQkFDcEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxpQkFBaUI7Z0JBQ2pDLENBQUMsQ0FBQyxRQUFRLEVBQUUscUJBQXFCO29CQUMvQixDQUFDLENBQUMsYUFBYSxFQUFFLGlCQUFpQjtvQkFDbEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSx3QkFBd0I7d0JBQ2xDLENBQUMsQ0FBQyxRQUFRLEVBQUUsd0JBQXdCO3dCQUNwQyxDQUFDLENBQUMsZUFBZSxFQUFFLHFCQUFxQjs0QkFDdEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxpQkFBaUI7NEJBQ2xDLENBQUMsQ0FBQyxLQUFLLEVBQUUsaUJBQWlCO1lBQ2xDLENBQUMsQ0FBQyxLQUFLLENBQUMsMkJBQTJCO1FBQ3JDLFFBQVEsRUFBRSxDQUFDLEtBQUssRUFBRSxvQkFBb0I7WUFDcEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxZQUFZO2dCQUMzQixDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVEsSUFBSSxnQkFBZ0I7Z0JBQzVDLENBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUTtZQUNuQixDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVE7UUFDbEIsT0FBTyxFQUFFLENBQUMsS0FBSyxFQUFFLG9CQUFvQjtZQUNuQyxDQUFDLENBQUMsYUFBYSxFQUFFLFlBQVk7Z0JBQzNCLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNoQyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7cUJBQ3hCLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUSxJQUFJLGdCQUFnQixFQUFFLFNBQVMsQ0FBQztxQkFDMUQsTUFBTSxFQUFFO2dCQUNiLENBQUMsQ0FBQyxLQUFLLEVBQUUsT0FBTztZQUNsQixDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU87UUFDakIsbUJBQW1CLEVBQUUsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCO1lBQ3JELENBQUMsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCO2dCQUNqQyxhQUFhLENBQUMsbUJBQW1CLEVBQUUsTUFBTSxHQUFHLENBQUM7Z0JBQzdDLENBQUMsQ0FBQyxhQUFhLENBQUMsbUJBQW1CO2dCQUNuQyxDQUFDLENBQUMsUUFBUSxFQUFFLGtCQUFrQjtvQkFDMUIsYUFBYSxDQUFDLG1CQUFtQixFQUFFLE1BQU0sR0FBRyxDQUFDO29CQUMvQyxDQUFDLENBQUMsYUFBYSxFQUFFLG1CQUFtQjtvQkFDcEMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxrQkFBa0I7d0JBQ2pDLGFBQWEsQ0FBQyxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQzt3QkFDL0MsQ0FBQyxDQUFDLGFBQWEsRUFBRSxtQkFBbUI7d0JBQ3BDLENBQUMsQ0FBQyxRQUFRLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxHQUFHLENBQUM7NEJBQzNDLENBQUMsQ0FBQyxRQUFRLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dDQUM1QyxHQUFHLEVBQUU7Z0NBQ0wsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFO2dDQUNsQixFQUFFLEVBQUUsSUFBSSxFQUFFO2dDQUNWLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUU7Z0NBQ2xDLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUU7Z0NBQ2hDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTTs2QkFDdEIsQ0FBQyxDQUFDOzRCQUNMLENBQUMsQ0FBQyxLQUFLLEVBQUUsbUJBQW1CO1lBQ3BDLENBQUMsQ0FBQyxLQUFLLENBQUMsbUJBQW1CO1FBRTdCLGdCQUFnQixFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU07WUFDdEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0I7WUFDaEMsQ0FBQyxDQUFDLEtBQUs7UUFDVCxrQkFBa0IsRUFBRSxDQUFDLGFBQWEsRUFBRSxNQUFNO1lBQ3hDLENBQUMsQ0FBQyxhQUFhLENBQUMsa0JBQWtCO1lBQ2xDLENBQUMsQ0FBQyxLQUFLO1FBQ1QsaUJBQWlCLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTTtZQUN2QyxDQUFDLENBQUMsYUFBYSxDQUFDLGlCQUFpQjtZQUNqQyxDQUFDLENBQUMsS0FBSztRQUNULFdBQVcsRUFBRSxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUs7UUFDdkUsY0FBYyxFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU07WUFDcEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxjQUFjO1lBQzlCLENBQUMsQ0FBQyxLQUFLO1FBQ1QsYUFBYSxFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSztRQUMzRSxxQkFBcUIsRUFBRSxDQUFDLGFBQWEsRUFBRSxNQUFNO1lBQzNDLENBQUMsQ0FBQyxhQUFhLENBQUMscUJBQXFCO1lBQ3JDLENBQUMsQ0FBQyxLQUFLO1FBQ1QsWUFBWSxFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSztRQUN6RSxjQUFjLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTTtZQUNwQyxDQUFDLENBQUMsYUFBYSxDQUFDLGNBQWM7WUFDOUIsQ0FBQyxDQUFDLEtBQUs7UUFDVCxhQUFhLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFLO1FBQzNFLGdCQUFnQixFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU07WUFDdEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0I7WUFDaEMsQ0FBQyxDQUFDLEtBQUs7UUFDVCxTQUFTLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLO1FBQ25FLE1BQU0sRUFBRSxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUU3Qyx1QkFBdUIsRUFBRSxDQUFDLGFBQWEsRUFBRSxNQUFNO1lBQzdDLENBQUMsQ0FBQyxhQUFhLENBQUMsdUJBQXVCO1lBQ3ZDLENBQUMsQ0FBQyxJQUFJO1FBQ1IsbUJBQW1CLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTTtZQUN6QyxDQUFDLENBQUMsYUFBYSxDQUFDLG1CQUFtQjtZQUNuQyxDQUFDLENBQUMsSUFBSTtRQUNSLHVCQUF1QixFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU07WUFDN0MsQ0FBQyxDQUFDLGFBQWEsQ0FBQyx1QkFBdUI7WUFDdkMsQ0FBQyxDQUFDLElBQUk7UUFDUixtQkFBbUIsRUFBRSxDQUFDLGFBQWEsRUFBRSxNQUFNO1lBQ3pDLENBQUMsQ0FBQyxhQUFhLENBQUMsbUJBQW1CO1lBQ25DLENBQUMsQ0FBQyxJQUFJO1FBQ1Isa0JBQWtCLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTTtZQUN4QyxDQUFDLENBQUMsYUFBYSxDQUFDLGtCQUFrQjtZQUNsQyxDQUFDLENBQUMsSUFBSTtRQUNSLGtCQUFrQixFQUFFLENBQUMsYUFBYSxFQUFFLE1BQU07WUFDeEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0I7WUFDbEMsQ0FBQyxDQUFDLElBQUk7UUFFUixlQUFlLEVBQUUsQ0FBQyxLQUFLLEVBQUUsaUJBQWlCO1lBQ3hDLENBQUMsQ0FBQyxhQUFhLEVBQUUsU0FBUztnQkFDeEIsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxlQUFlO2dCQUMvQixDQUFDLENBQUMsUUFBUSxFQUFFLEtBQUs7b0JBQ2YsQ0FBQyxDQUFDLFFBQVEsRUFBRSxLQUFLO29CQUNqQixDQUFDLENBQUMsZUFBZSxFQUFFLFNBQVM7d0JBQzFCLENBQUMsQ0FBQyxhQUFhLEVBQUUsZUFBZTt3QkFDaEMsQ0FBQyxDQUFDLEtBQUssRUFBRSxlQUFlO1lBQzlCLENBQUMsQ0FBQyxLQUFLLENBQUMsZUFBZTtRQUN6QixPQUFPLEVBQ0wsYUFBYSxFQUFFLFNBQVMsSUFBSSxhQUFhLEVBQUUsT0FBTztZQUNoRCxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU87WUFDdkIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxTQUFTLElBQUksYUFBYSxFQUFFLE9BQU87Z0JBQ3BELENBQUMsQ0FBQyxhQUFhLEVBQUUsT0FBTztnQkFDeEIsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPO0tBQ3ZCLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx1Q0FBdUMsR0FBRyxDQUNyRCxLQUFvQixFQUNwQixhQUE0QixFQUM1QixFQUFFO0lBQ0YsSUFBSSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUNyQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFJLEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1FBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLENBQUMsQ0FBQztRQUMzQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxNQUFNLE9BQU8sR0FBRyxJQUFJLEVBQUUsQ0FBQztJQUN2QixNQUFNLFFBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQztJQUV4QixNQUFNLFVBQVUsR0FBRyxLQUFLLEVBQUUsVUFBVSxJQUFJLEdBQUcsT0FBTyxJQUFJLEtBQUssRUFBRSxVQUFVLEVBQUUsQ0FBQztJQUMxRSxNQUFNLFdBQVcsR0FBRyxLQUFLLEVBQUUsV0FBVyxJQUFJLEdBQUcsUUFBUSxJQUFJLEtBQUssRUFBRSxVQUFVLEVBQUUsQ0FBQztJQUU3RSxJQUFJLGNBQWMsR0FBUSxFQUFFLENBQUM7SUFDN0IsY0FBYyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7SUFFaEMsSUFBSSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxDQUFDO1FBQzVDLE1BQU0sOEJBQThCLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUNyRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7YUFDeEIsR0FBRyxDQUFDLGFBQWEsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLEdBQUcsQ0FBQzthQUNqRCxNQUFNLEVBQUUsQ0FBQztRQUNaLE1BQU0sZ0NBQWdDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUN2RSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7YUFDeEIsTUFBTSxFQUFFLENBQUM7UUFFWixNQUFNLFVBQVUsR0FBa0I7WUFDaEMsRUFBRSxFQUFFLFdBQVc7WUFDZixVQUFVLEVBQUUsS0FBSztZQUNqQixVQUFVLEVBQUUsS0FBSyxDQUFDLEVBQUU7WUFDcEIsV0FBVyxFQUFFLElBQUk7WUFDakIsS0FBSyxFQUFFLGFBQWE7WUFDcEIsT0FBTyxFQUFFLGFBQWE7WUFDdEIsU0FBUyxFQUFFLGdDQUFnQztZQUMzQyxPQUFPLEVBQUUsOEJBQThCO1lBQ3ZDLE1BQU0sRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVE7WUFDaEQsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNO1lBQ3JCLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUU7WUFDbEMsT0FBTyxFQUFFLEtBQUs7WUFDZCxRQUFRLEVBQUUsQ0FBQztZQUNYLFVBQVUsRUFBRSxLQUFLO1lBQ2pCLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLGdCQUFnQixFQUFFLEtBQUs7WUFDdkIscUJBQXFCLEVBQUUsS0FBSztZQUM1Qix1QkFBdUIsRUFBRSxLQUFLO1lBQzlCLGlCQUFpQixFQUFFLFNBQVM7WUFDNUIsY0FBYyxFQUFFLEtBQUs7WUFDckIsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLFdBQVcsRUFBRTtZQUNoQyxVQUFVLEVBQUUsS0FBSyxFQUFFLFVBQVU7WUFDN0IsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRO1lBQ3pCLE9BQU8sRUFBRSxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNuQyxDQUFDO1FBQ0YsY0FBYyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDdkMsY0FBYyxDQUFDLFFBQVEsR0FBRztZQUN4QixHQUFHLGNBQWMsQ0FBQyxRQUFRO1lBQzFCLFdBQVc7WUFDWCxZQUFZLEVBQUU7Z0JBQ1osR0FBRyxjQUFjLEVBQUUsUUFBUSxFQUFFLFlBQVk7Z0JBQ3pDLFVBQVUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVU7YUFDcEQ7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELElBQUksYUFBYSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsQ0FBQztRQUM3QyxNQUFNLGlDQUFpQyxHQUFHLEtBQUssQ0FDN0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUM3QjthQUNFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzthQUN4QixRQUFRLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsR0FBRyxDQUFDO2FBQ3ZELE1BQU0sRUFBRSxDQUFDO1FBQ1osTUFBTSwrQkFBK0IsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ3hFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzthQUN4QixNQUFNLEVBQUUsQ0FBQztRQUVaLE1BQU0sV0FBVyxHQUFrQjtZQUNqQyxFQUFFLEVBQUUsVUFBVTtZQUNkLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLFdBQVcsRUFBRSxLQUFLO1lBQ2xCLFVBQVUsRUFBRSxLQUFLLENBQUMsRUFBRTtZQUNwQixLQUFLLEVBQUUsYUFBYTtZQUNwQixPQUFPLEVBQUUsYUFBYTtZQUN0QixTQUFTLEVBQUUsaUNBQWlDO1lBQzVDLE9BQU8sRUFBRSwrQkFBK0I7WUFDeEMsTUFBTSxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUTtZQUMvQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU07WUFDckIsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLFdBQVcsRUFBRTtZQUNsQyxPQUFPLEVBQUUsS0FBSztZQUNkLFFBQVEsRUFBRSxDQUFDO1lBQ1gsVUFBVSxFQUFFLEtBQUs7WUFDakIsVUFBVSxFQUFFLElBQUk7WUFDaEIsZ0JBQWdCLEVBQUUsS0FBSztZQUN2QixxQkFBcUIsRUFBRSxLQUFLO1lBQzVCLHVCQUF1QixFQUFFLEtBQUs7WUFDOUIsaUJBQWlCLEVBQUUsU0FBUztZQUM1QixjQUFjLEVBQUUsS0FBSztZQUNyQixTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO1lBQ2hDLFVBQVUsRUFBRSxLQUFLLEVBQUUsVUFBVTtZQUM3QixRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVE7WUFDekIsT0FBTyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2xDLENBQUM7UUFDRixjQUFjLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUN6QyxjQUFjLENBQUMsUUFBUSxHQUFHO1lBQ3hCLEdBQUcsY0FBYyxDQUFDLFFBQVE7WUFDMUIsVUFBVTtZQUNWLFlBQVksRUFBRTtnQkFDWixHQUFHLGNBQWMsRUFBRSxRQUFRLEVBQUUsWUFBWTtnQkFDekMsV0FBVyxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsV0FBVzthQUN0RDtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTyxjQUFjLENBQUM7QUFDeEIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sd0NBQXdDLEdBQUcsS0FBSyxFQUMzRCxLQUFvQixFQUNwQixhQUE0QixFQUM1QixNQUFjLEVBQ1csRUFBRTtJQUMzQixJQUFJLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsMERBQTBELENBQUMsQ0FBQztRQUN4RSxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsa0VBQWtFLENBQ25FLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFJLENBQUMsYUFBYSxFQUFFLGFBQWEsRUFBRSxDQUFDO1FBQ2xDLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsa0VBQWtFLENBQ25FLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxNQUFNLFNBQVMsR0FBRyxNQUFNLHFCQUFxQixDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFeEUsT0FBTyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsUUFBUTtRQUNYLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTtRQUNqQixFQUFFLEVBQUUsSUFBSSxFQUFFO1FBQ1YsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLFdBQVcsRUFBRTtRQUNoQyxXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO1FBQ2xDLE9BQU8sRUFBRSxLQUFLO0tBQ2YsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixNQUFNLCtEQUErRCxHQUFHLENBQ3RFLEtBQW9CLEVBQ3BCLGFBQTRCLEVBQzVCLFFBQXNCLEVBQ3RCLGVBQW1DLEVBQ3BCLEVBQUU7SUFDakIsT0FBTztRQUNMLEdBQUcsS0FBSztRQUNSLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRSx3QkFBd0I7WUFDNUMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxnQkFBZ0I7Z0JBQy9CLENBQUMsQ0FBQyxhQUFhLENBQUMsWUFBWTtnQkFDNUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0I7b0JBQ3pCLENBQUMsQ0FBQyxhQUFhLEVBQUUsWUFBWTtvQkFDN0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUI7d0JBQzVCLENBQUMsQ0FBQyxhQUFhO3dCQUNmLENBQUMsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCOzRCQUNqQyxDQUFDLENBQUMsYUFBYSxFQUFFLFlBQVk7NEJBQzdCLENBQUMsQ0FBQyxLQUFLLEVBQUUsWUFBWTtZQUM3QixDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVk7UUFDdEIsYUFBYSxFQUFFLENBQUMsS0FBSyxFQUFFLDBCQUEwQjtZQUMvQyxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtnQkFDakMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxhQUFhO2dCQUM3QixDQUFDLENBQUMsUUFBUSxDQUFDLGtCQUFrQjtvQkFDM0IsQ0FBQyxDQUFDLGFBQWEsRUFBRSxhQUFhO29CQUM5QixDQUFDLENBQUMsZUFBZSxFQUFFLGtCQUFrQjt3QkFDbkMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxhQUFhO3dCQUM5QixDQUFDLENBQUMsS0FBSyxFQUFFLGFBQWE7WUFDNUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxhQUFhO1FBQ3ZCLGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLDBCQUEwQjtZQUNwRCxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtnQkFDakMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0I7Z0JBQ2xDLENBQUMsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCO29CQUNuQyxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtvQkFDbkMsQ0FBQyxDQUFDLEtBQUssRUFBRSxrQkFBa0I7WUFDL0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxrQkFBa0I7UUFDNUIsdUJBQXVCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCO1lBQ3pELENBQUMsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCO2dCQUNqQyxDQUFDLENBQUMsYUFBYSxDQUFDLHVCQUF1QjtnQkFDdkMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0I7b0JBQzNCLENBQUMsQ0FBQyxhQUFhLEVBQUUsdUJBQXVCO29CQUN4QyxDQUFDLENBQUMsZUFBZSxFQUFFLGtCQUFrQjt3QkFDbkMsQ0FBQyxDQUFDLGFBQWEsRUFBRSx1QkFBdUI7d0JBQ3hDLENBQUMsQ0FBQyxLQUFLLEVBQUUsdUJBQXVCO1lBQ3RDLENBQUMsQ0FBQyxLQUFLLENBQUMsdUJBQXVCO1FBQ2pDLHFCQUFxQixFQUFFLENBQUMsS0FBSyxFQUFFLDBCQUEwQjtZQUN2RCxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtnQkFDakMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUI7Z0JBQ3JDLENBQUMsQ0FBQyxRQUFRLENBQUMsa0JBQWtCO29CQUMzQixDQUFDLENBQUMsYUFBYSxFQUFFLHFCQUFxQjtvQkFDdEMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxrQkFBa0I7d0JBQ25DLENBQUMsQ0FBQyxhQUFhLEVBQUUscUJBQXFCO3dCQUN0QyxDQUFDLENBQUMsS0FBSyxFQUFFLHFCQUFxQjtZQUNwQyxDQUFDLENBQUMsS0FBSyxDQUFDLHFCQUFxQjtRQUMvQixRQUFRLEVBQ04sQ0FBQyxDQUFDLEtBQUssRUFBRSx5QkFBeUI7WUFDaEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxpQkFBaUI7Z0JBQ2hDLENBQUMsQ0FBQyxhQUFhLENBQUMsUUFBUTtnQkFDeEIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxpQkFBaUI7b0JBQzFCLENBQUMsQ0FBQyxhQUFhLEVBQUUsUUFBUTtvQkFDekIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxvQkFBb0I7d0JBQzdCLENBQUMsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CO3dCQUNoQyxDQUFDLENBQUMsZUFBZSxFQUFFLGlCQUFpQjs0QkFDbEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxRQUFROzRCQUN6QixDQUFDLENBQUMsS0FBSyxFQUFFLFFBQVE7WUFDekIsQ0FBQyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQzNCLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxtQkFBbUI7WUFDbEMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxXQUFXO2dCQUMxQixDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU87Z0JBQ3ZCLENBQUMsQ0FBQyxRQUFRLENBQUMsV0FBVztvQkFDcEIsQ0FBQyxDQUFDLGFBQWEsRUFBRSxPQUFPO29CQUN4QixDQUFDLENBQUMsUUFBUSxDQUFDLGNBQWM7d0JBQ3ZCLENBQUMsQ0FBQyxRQUFRLEVBQUUsY0FBYzt3QkFDMUIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxXQUFXOzRCQUM1QixDQUFDLENBQUMsYUFBYSxFQUFFLE9BQU87NEJBQ3hCLENBQUMsQ0FBQyxLQUFLLEVBQUUsT0FBTztZQUN4QixDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU87UUFDakIsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLHFCQUFxQjtZQUN0QyxDQUFDLENBQUMsYUFBYSxFQUFFLGFBQWE7Z0JBQzVCLENBQUMsQ0FBQyxhQUFhLENBQUMsU0FBUztnQkFDekIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhO29CQUN0QixDQUFDLENBQUMsYUFBYSxFQUFFLFNBQVM7b0JBQzFCLENBQUMsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCO3dCQUN6QixDQUFDLENBQUMsUUFBUSxFQUFFLGdCQUFnQjt3QkFDNUIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxhQUFhOzRCQUM5QixDQUFDLENBQUMsYUFBYSxFQUFFLFNBQVM7NEJBQzFCLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFlBQVk7Z0NBQzlCLENBQUMsQ0FBQyxJQUFJO2dDQUNOLENBQUMsQ0FBQyxLQUFLLEVBQUUsU0FBUztZQUM1QixDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVM7UUFDbkIsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsNkJBQTZCO1lBQ3RELENBQUMsQ0FBQyxhQUFhLEVBQUUscUJBQXFCO2dCQUNwQyxDQUFDLENBQUMsYUFBYSxDQUFDLGlCQUFpQjtnQkFDakMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUI7b0JBQzlCLENBQUMsQ0FBQyxhQUFhLEVBQUUsaUJBQWlCO29CQUNsQyxDQUFDLENBQUMsUUFBUSxDQUFDLHdCQUF3Qjt3QkFDakMsQ0FBQyxDQUFDLFFBQVEsRUFBRSx3QkFBd0I7d0JBQ3BDLENBQUMsQ0FBQyxlQUFlLEVBQUUscUJBQXFCOzRCQUN0QyxDQUFDLENBQUMsYUFBYSxFQUFFLGlCQUFpQjs0QkFDbEMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CO2dDQUN0QyxDQUFDLENBQUMsSUFBSTtnQ0FDTixDQUFDLENBQUMsS0FBSyxFQUFFLGlCQUFpQjtZQUNwQyxDQUFDLENBQUMsS0FBSyxDQUFDLGlCQUFpQjtRQUMzQixtQkFBbUIsRUFBRSxDQUFDLEtBQUssRUFBRSxzQkFBc0I7WUFDakQsQ0FBQyxDQUFDLFFBQVEsQ0FBQyx3QkFBd0I7Z0JBQ2pDLENBQUMsQ0FBQyxRQUFRLEVBQUUsd0JBQXdCO2dCQUNwQyxDQUFDLENBQUMsS0FBSyxFQUFFLG1CQUFtQjtZQUM5QixDQUFDLENBQUMsS0FBSyxDQUFDLG1CQUFtQjtRQUM3QiwyQkFBMkIsRUFBRSxDQUFDLEtBQUssRUFBRSxzQkFBc0I7WUFDekQsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxnQ0FBZ0M7Z0JBQ3pDLENBQUMsQ0FBQyxRQUFRLEVBQUUsZ0NBQWdDO2dCQUM1QyxDQUFDLENBQUMsS0FBSyxFQUFFLDJCQUEyQjtZQUN0QyxDQUFDLENBQUMsS0FBSyxDQUFDLDJCQUEyQjtRQUNyQyxlQUFlLEVBQUUsQ0FBQyxLQUFLLEVBQUUsaUJBQWlCO1lBQ3hDLENBQUMsQ0FBQyxhQUFhLEVBQUUsU0FBUztnQkFDeEIsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxlQUFlO2dCQUMvQixDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUs7b0JBQ2QsQ0FBQyxDQUFDLFFBQVEsRUFBRSxLQUFLO29CQUNqQixDQUFDLENBQUMsZUFBZSxFQUFFLFNBQVM7d0JBQzFCLENBQUMsQ0FBQyxhQUFhLEVBQUUsZUFBZTt3QkFDaEMsQ0FBQyxDQUFDLEtBQUssRUFBRSxlQUFlO1lBQzlCLENBQUMsQ0FBQyxLQUFLLENBQUMsZUFBZTtRQUN6QixPQUFPLEVBQ0wsYUFBYSxFQUFFLFNBQVMsSUFBSSxhQUFhLEVBQUUsT0FBTztZQUNoRCxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU87WUFDdkIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxTQUFTLElBQUksYUFBYSxFQUFFLE9BQU87Z0JBQ3BELENBQUMsQ0FBQyxhQUFhLEVBQUUsT0FBTztnQkFDeEIsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPO1FBQ3RCLG1CQUFtQixFQUFFLENBQUMsS0FBSyxFQUFFLDBCQUEwQjtZQUNyRCxDQUFDLENBQUMsYUFBYSxFQUFFLGtCQUFrQjtnQkFDakMsYUFBYSxFQUFFLG1CQUFtQixFQUFFLE1BQU0sR0FBRyxDQUFDO2dCQUM5QyxDQUFDLENBQUMsYUFBYSxDQUFDLG1CQUFtQjtnQkFDbkMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0I7b0JBQ3pCLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQztvQkFDaEQsQ0FBQyxDQUFDLGFBQWEsRUFBRSxtQkFBbUI7b0JBQ3BDLENBQUMsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCO3dCQUNqQyxhQUFhLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxHQUFHLENBQUM7d0JBQ2hELENBQUMsQ0FBQyxhQUFhLEVBQUUsbUJBQW1CO3dCQUNwQyxDQUFDLENBQUMsUUFBUSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQzs0QkFDekMsR0FBRyxFQUFFOzRCQUNMLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRTs0QkFDbEIsRUFBRSxFQUFFLElBQUksRUFBRTs0QkFDVixXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFOzRCQUNsQyxTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFOzRCQUNoQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU07eUJBQ3RCLENBQUMsQ0FBQzs0QkFDTCxDQUFDLENBQUMsUUFBUSxFQUFFLHFCQUFxQixFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztnQ0FDNUMsR0FBRyxFQUFFO2dDQUNMLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRTtnQ0FDbEIsRUFBRSxFQUFFLElBQUksRUFBRTtnQ0FDVixXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO2dDQUNsQyxTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFO2dDQUNoQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU07NkJBQ3RCLENBQUMsQ0FBQzs0QkFDTCxDQUFDLENBQUMsS0FBSyxFQUFFLG1CQUFtQjtZQUNwQyxDQUFDLENBQUMsS0FBSyxDQUFDLG1CQUFtQjtLQUM5QixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sdUVBQXVFLEdBQ2xGLENBQ0UsS0FBb0IsRUFDcEIsVUFBMEIsRUFDMUIsZUFBbUMsRUFDbkMsYUFBNEIsRUFDNUIsRUFBRTtJQUNGLElBQUksQ0FBQyxDQUFDLFVBQVUsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM5QixPQUFPLENBQUMsR0FBRyxDQUNULGlGQUFpRixDQUNsRixDQUFDO1FBQ0YsT0FBTztJQUNULENBQUM7SUFFRCxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQ3pCLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsc0ZBQXNGLENBQ3ZGLENBQUM7UUFDRixPQUFPO0lBQ1QsQ0FBQztJQUVELElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDdkIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvRkFBb0YsQ0FDckYsQ0FBQztRQUNGLE9BQU87SUFDVCxDQUFDO0lBQ0QsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxHQUFHLENBQ1QsNEVBQTRFLENBQzdFLENBQUM7UUFDRixPQUFPO0lBQ1QsQ0FBQztJQUVELE1BQU0sZUFBZSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQ3JDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFlBQVksQ0FDN0MsQ0FBQztJQUNGLE1BQU0sZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FDdEMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CLENBQ3JELENBQUM7SUFFRixJQUFJLGVBQWUsR0FBdUIsRUFBRSxDQUFDO0lBQzdDLElBQUksZ0JBQWdCLEdBQXVCLEVBQUUsQ0FBQztJQUU5QyxJQUFJLGVBQWUsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUN4QixlQUFlO1lBQ2IsK0RBQStELENBQzdELEtBQUssRUFDTCxhQUFhLEVBQ2IsZUFBZSxFQUNmLGVBQWUsQ0FDaEIsQ0FBQztJQUNOLENBQUM7SUFFRCxJQUFJLGdCQUFnQixFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQ3pCLGdCQUFnQjtZQUNkLCtEQUErRCxDQUM3RCxLQUFLLEVBQ0wsYUFBYSxFQUNiLGVBQWUsRUFDZixlQUFlLENBQ2hCLENBQUM7SUFDTixDQUFDO0lBRUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO0FBQy9DLENBQUMsQ0FBQztBQUNKLE1BQU0sQ0FBQyxNQUFNLG1FQUFtRSxHQUM5RSxLQUFLLEVBQ0gsTUFBYyxFQUNkLFFBQXVCLEVBQ3ZCLGFBQThCLEVBQzlCLGdCQUF1QyxFQUN2QyxhQUE2QixFQUM3QixlQUFvQyxFQUNwQyxFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsSUFBSSxZQUFZLEdBQUcsYUFBYSxJQUFJLEVBQUUsQ0FBQztRQUN2QyxJQUFJLGVBQWUsR0FBRyxnQkFBZ0IsSUFBSSxFQUFFLENBQUM7UUFDN0MsSUFBSSxDQUFDLFFBQVEsRUFBRSxxQkFBcUIsSUFBSSxlQUFlLEVBQUUsYUFBYSxFQUFFLENBQUM7WUFDdkUsTUFBTSxTQUFTLEdBQUcsTUFBTSx3Q0FBd0MsQ0FDOUQsUUFBUSxFQUNSLGFBQWEsRUFDYixNQUFNLENBQ1AsQ0FBQztZQUVGLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBQ3JDLElBQUksU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUscUJBQXFCLEVBQUUsQ0FBQztnQkFDOUQsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO1lBQ2xDLENBQUM7UUFDSCxDQUFDO1FBRUQsSUFDRSxDQUFDLFFBQVEsRUFBRSx3QkFBd0I7WUFDbkMsZUFBZSxFQUFFLGdCQUFnQixFQUNqQyxDQUFDO1lBQ0QsTUFBTSxZQUFZLEdBQUcsdUNBQXVDLENBQzFELFFBQVEsRUFDUixhQUFhLENBQ2QsQ0FBQztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQzNDLElBQUksWUFBWSxFQUFFLFdBQVcsRUFBRSxDQUFDO2dCQUM3QixlQUF3QyxDQUFDLFdBQVc7b0JBQ25ELFlBQVksQ0FBQyxXQUFXLENBQUM7WUFDN0IsQ0FBQztZQUVELElBQUksWUFBWSxFQUFFLFVBQVUsRUFBRSxDQUFDO2dCQUM1QixlQUF3QyxDQUFDLFVBQVU7b0JBQ2xELFlBQVksQ0FBQyxVQUFVLENBQUM7WUFDNUIsQ0FBQztZQUVELElBQ0UsWUFBWSxFQUFFLFFBQVEsRUFBRSxVQUFVO2dCQUNsQyxZQUFZLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFDbkMsQ0FBQztnQkFDRCxRQUFRLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQztZQUNuQyxDQUFDO1FBQ0gsQ0FBQztRQUNELE9BQU8sRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxDQUFDO0lBQ3JELENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FDVCxDQUFDLEVBQ0QsMEZBQTBGLENBQzNGLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUosTUFBTSxDQUFDLE1BQU0sa0VBQWtFLEdBQzdFLEtBQUssRUFDSCxLQUFvQixFQUNwQixTQUF3QixFQUN4QixtQkFBbUMsRUFDbkMsYUFBNkIsRUFDN0IsZ0JBQXNDLEVBQ3RDLE1BQWMsRUFDZCxlQUFtQyxFQUNuQyxhQUE0QixFQUM1QixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsSUFBSSxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQ3pCLElBQUksWUFBWSxHQUFHLGFBQWEsSUFBSSxFQUFFLENBQUM7UUFDdkMsSUFBSSxlQUFlLEdBQUcsZ0JBQWdCLElBQUksRUFBRSxDQUFDO1FBQzdDLE1BQU0sRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsR0FDekMsdUVBQXVFLENBQ3JFLEtBQUssRUFDTCxtQkFBbUIsRUFDbkIsZUFBZSxFQUNmLGFBQWEsQ0FDZCxDQUFDO1FBRUosSUFBSyxlQUFpQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzNDLFFBQVEsR0FBRyxFQUFFLEdBQUcsUUFBUSxFQUFFLEdBQUcsZUFBZSxFQUFFLENBQUM7WUFDL0MsTUFBTSxlQUFlLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxDQUM5QyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxZQUFZLENBQzdDLENBQUM7WUFFRixNQUFNLFlBQVksR0FBRyxNQUFNLHFCQUFxQixDQUM3QyxlQUFpQyxFQUFFLEVBQUUsRUFDdEMsTUFBTSxDQUNQLENBQUM7WUFDRixNQUFNLFNBQVMsR0FBRyw0Q0FBNEMsQ0FDNUQsUUFBUSxFQUNSLGVBQWUsRUFDZixZQUFZLEVBQ1osYUFBYSxDQUNkLENBQUM7WUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUNyQyxJQUFJLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLHFCQUFxQixFQUFFLENBQUM7Z0JBQzlELFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQztnQkFDaEMsWUFBWSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ25ELENBQUM7WUFFRCxJQUFJLENBQUMsUUFBUSxFQUFFLHdCQUF3QixFQUFFLENBQUM7Z0JBQ3hDLE1BQU0sWUFBWSxHQUFHLHlDQUF5QyxDQUM1RCxlQUFlLEVBQ2YsUUFBUSxFQUNSLGFBQWEsQ0FDZCxDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLFlBQVksRUFBRSxXQUFXLEVBQUUsQ0FBQztvQkFDOUIsZUFBZSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDO2dCQUN6RCxDQUFDO2dCQUVELElBQUksWUFBWSxFQUFFLFVBQVUsRUFBRSxDQUFDO29CQUM3QixlQUFlLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUM7Z0JBQ3ZELENBQUM7Z0JBRUQsSUFDRSxZQUFZLEVBQUUsUUFBUSxFQUFFLFVBQVU7b0JBQ2xDLFlBQVksRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUNuQyxDQUFDO29CQUNELFFBQVEsR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDO2dCQUNuQyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxJQUFLLGdCQUFrQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzVDLFFBQVEsR0FBRyxFQUFFLEdBQUcsUUFBUSxFQUFFLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztZQUNoRCxNQUFNLGdCQUFnQixHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FDL0MsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CLENBQ3JELENBQUM7WUFFRixNQUFNLFlBQVksR0FBRyxNQUFNLHFCQUFxQixDQUM3QyxnQkFBa0MsQ0FBQyxFQUFFLEVBQ3RDLE1BQU0sQ0FDUCxDQUFDO1lBQ0YsTUFBTSxTQUFTLEdBQUcsNENBQTRDLENBQzVELFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsWUFBWSxFQUNaLGFBQWEsQ0FDZCxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLENBQUM7WUFDckMsSUFBSSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxxQkFBcUIsRUFBRSxDQUFDO2dCQUM5RCxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7Z0JBQ2hDLFlBQVksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBRUQsSUFBSSxDQUFDLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxDQUFDO2dCQUN4QyxNQUFNLFlBQVksR0FBRyx5Q0FBeUMsQ0FDNUQsZ0JBQWdCLEVBQ2hCLFFBQVEsQ0FDVCxDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLFlBQVksRUFBRSxXQUFXLEVBQUUsQ0FBQztvQkFDOUIsZUFBZSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDO2dCQUN6RCxDQUFDO2dCQUVELElBQUksWUFBWSxFQUFFLFVBQVUsRUFBRSxDQUFDO29CQUM3QixlQUFlLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUM7Z0JBQ3ZELENBQUM7Z0JBRUQsSUFDRSxZQUFZLEVBQUUsUUFBUSxFQUFFLFVBQVU7b0JBQ2xDLFlBQVksRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUNuQyxDQUFDO29CQUNELFFBQVEsR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDO2dCQUNuQyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxPQUFPLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsQ0FBQztJQUNyRCxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGlEQUFpRCxDQUFDLENBQUM7SUFDcEUsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVKLE1BQU0sQ0FBQyxNQUFNLCtDQUErQyxHQUFHLEtBQUssRUFDbEUsTUFBYyxFQUNkLFFBQXVCLEVBQ3ZCLGFBQTZCLEVBQzdCLGdCQUFzQyxFQUN0QyxhQUE2QixFQUM3QixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsSUFBSSxZQUFZLEdBQUcsYUFBYSxJQUFJLEVBQUUsQ0FBQztRQUN2QyxJQUFJLGVBQWUsR0FBRyxnQkFBZ0IsSUFBSSxFQUFFLENBQUM7UUFDN0MsTUFBTSxTQUFTLEdBQUcsTUFBTSx3Q0FBd0MsQ0FDOUQsUUFBUSxFQUNSLGFBQWEsRUFDYixNQUFNLENBQ1AsQ0FBQztRQUVGLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3JDLElBQ0UsU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDO1lBQ3JCLENBQUMsUUFBUSxFQUFFLHFCQUFxQjtZQUNoQyxhQUFhLEVBQUUsYUFBYSxFQUM1QixDQUFDO1lBQ0QsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO1FBQ2xDLENBQUM7UUFFRCxJQUNFLENBQUMsUUFBUSxFQUFFLHdCQUF3QjtZQUNuQyxhQUFhLEVBQUUsZ0JBQWdCLEVBQy9CLENBQUM7WUFDRCxNQUFNLFlBQVksR0FBRyx1Q0FBdUMsQ0FDMUQsUUFBUSxFQUNSLGFBQWEsQ0FDZCxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLENBQUM7WUFDM0MsSUFBSSxZQUFZLEVBQUUsV0FBVyxFQUFFLENBQUM7Z0JBQzlCLGVBQWUsQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDLFdBQVcsQ0FBQztZQUN6RCxDQUFDO1lBRUQsSUFBSSxZQUFZLEVBQUUsVUFBVSxFQUFFLENBQUM7Z0JBQzdCLGVBQWUsQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDLFVBQVUsQ0FBQztZQUN2RCxDQUFDO1lBRUQsSUFDRSxZQUFZLEVBQUUsUUFBUSxFQUFFLFVBQVU7Z0JBQ2xDLFlBQVksRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUNuQyxDQUFDO2dCQUNELFFBQVEsR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDO1lBQ25DLENBQUM7UUFDSCxDQUFDO1FBQ0QsT0FBTyxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLENBQUM7SUFDckQsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUNULENBQUMsRUFDRCxtRUFBbUUsQ0FDcEUsQ0FBQztJQUNKLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxtREFBbUQsR0FBRyxLQUFLLEVBQ3RFLEVBQVUsRUFDVixhQUE0QixFQUM1QixRQUF1QixFQUN2QixlQUFtQyxFQUNuQyxrQkFBZ0MsRUFDaEMsTUFBYyxFQUNkLG9CQUFvQyxFQUNwQyxpQkFBZ0MsRUFDaEMsZ0JBQWdDLEVBQUUsRUFDbEMsbUJBQXlDLEVBQUUsRUFDM0MscUJBQXFDLEVBQUUsRUFDdkMsNENBQTRELEVBQUUsRUFDOUQsb0RBQW9FLEVBQUUsRUFDdEUsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNSLE9BQU8sQ0FBQyxHQUFHLENBQ1QsbUVBQW1FLENBQ3BFLENBQUM7WUFDRixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDbkIsT0FBTyxDQUFDLEdBQUcsQ0FDVCw4RUFBOEUsQ0FDL0UsQ0FBQztZQUNGLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNkLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsc0VBQXNFLENBQ3ZFLENBQUM7WUFDRixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDckIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxnRkFBZ0YsQ0FDakYsQ0FBQztZQUNGLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsbUZBQW1GLENBQ3BGLENBQUM7WUFDRixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDWixPQUFPLENBQUMsR0FBRyxDQUNULHVFQUF1RSxDQUN4RSxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvRkFBb0YsQ0FDckYsQ0FBQztZQUNGLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsa0ZBQWtGLENBQ25GLENBQUM7WUFDRixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLG1CQUFtQixHQUFtQixvQkFBb0IsSUFBSSxFQUFFLENBQUM7UUFDckUsSUFBSSxpQkFBaUIsR0FBMEIsa0JBQWtCLElBQUksRUFBRSxDQUFDO1FBQ3hFLElBQUksZ0JBQWdCLEdBQTJCLGlCQUFpQixJQUFJLEVBQUUsQ0FBQztRQUN2RSxJQUFJLFlBQVksR0FBbUIsYUFBYSxJQUFJLEVBQUUsQ0FBQztRQUN2RCxJQUFJLGVBQWUsR0FBeUIsZ0JBQWdCLElBQUksRUFBRSxDQUFDO1FBRW5FLElBQUksQ0FBQyxhQUFhLEVBQUUsTUFBTSxJQUFJLENBQUMsUUFBUSxFQUFFLHNCQUFzQixFQUFFLENBQUM7WUFDaEUsSUFDRSxDQUFDLGFBQWEsRUFBRSxjQUFjLElBQUksZUFBZSxFQUFFLGNBQWMsQ0FBQztnQkFDbEUsa0JBQWtCLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFDOUIsQ0FBQztnQkFDRCxNQUFNLGNBQWMsR0FBd0Isa0JBQWtCLENBQUMsR0FBRyxDQUNoRSxDQUFDLENBQUMsRUFBRSxFQUFFO29CQUNKLE1BQU0sYUFBYSxHQUFzQjt3QkFDdkMsVUFBVSxFQUFFLENBQUMsQ0FBQyxFQUFFO3dCQUNoQixPQUFPLEVBQUUsRUFBRTt3QkFDWCxNQUFNO3dCQUNOLEVBQUUsRUFBRSxJQUFJLEVBQUU7d0JBQ1YsV0FBVyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO3dCQUNyQyxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7cUJBQ2YsQ0FBQztvQkFDdkIsT0FBTyxhQUFhLENBQUM7Z0JBQ3ZCLENBQUMsQ0FDRixDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLENBQUM7Z0JBQy9DLE1BQU0sb0JBQW9CLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0MsQ0FBQztZQUVELElBQUksa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQkFDaEMsTUFBTSxJQUFJLEdBQUcsTUFBTSxzQkFBc0IsQ0FBQyxRQUFRLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztnQkFDeEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzNCLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7Z0JBRXhCLE1BQU0sY0FBYyxHQUFHLHFDQUFxQyxDQUMxRCxJQUFJLEVBQ0osTUFBTSxDQUNQLENBQUM7Z0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztnQkFFL0MsaUJBQWlCLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUN6QyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxjQUFjLENBQy9DLENBQUM7Z0JBRUYsSUFBSyxpQkFBa0MsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQkFDNUMsZ0JBQWdCLEdBQUcsNkJBQTZCLENBQzlDLFFBQVEsRUFDUixhQUFhLEVBQ2IsaUJBQWlDLEVBQ2pDLGVBQWUsQ0FDaEIsQ0FBQztnQkFDSixDQUFDO1lBQ0gsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLGdCQUFnQixHQUFHLDZCQUE2QixDQUM5QyxRQUFRLEVBQ1IsYUFBYSxFQUNiLFNBQVMsRUFDVCxlQUFlLENBQ2hCLENBQUM7WUFDSixDQUFDO1lBRUQsSUFDRSxDQUFDLGVBQWUsRUFBRSxhQUFhLElBQUksZUFBZSxFQUFFLGdCQUFnQixDQUFDO2dCQUNwRSxnQkFBa0MsRUFBRSxFQUFFLEVBQ3ZDLENBQUM7Z0JBQ0QsTUFBTSxFQUNKLFFBQVEsRUFBRSxTQUFTLEVBQ25CLFlBQVksRUFBRSxhQUFhLEVBQzNCLGVBQWUsRUFBRSxnQkFBZ0IsR0FDbEMsR0FBRyxNQUFNLG1FQUFtRSxDQUMzRSxNQUFNLEVBQ04sZ0JBQWlDLEVBQ2pDLFlBQVksRUFDWixlQUF1QyxFQUN2QyxhQUFhLEVBQ2IsZUFBZSxDQUNoQixDQUFDO2dCQUVGLElBQUksU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDO29CQUNsQixnQkFBZ0IsR0FBRyxTQUFTLENBQUM7Z0JBQy9CLENBQUM7Z0JBRUQsSUFBSSxhQUFhLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUM5QixZQUFZLEdBQUcsYUFBYSxDQUFDO2dCQUMvQixDQUFDO2dCQUVELElBQUksZ0JBQWdCLEVBQUUsVUFBVSxJQUFJLGdCQUFnQixFQUFFLFdBQVcsRUFBRSxDQUFDO29CQUNsRSxlQUFlLEdBQUcsZ0JBQWdCLENBQUM7Z0JBQ3JDLENBQUM7WUFDSCxDQUFDO1lBRUQsSUFDRSxDQUFFLGlCQUFrQyxFQUFFLGdCQUFnQjtnQkFDbkQsaUJBQWtDLEVBQUUsbUJBQW1CLENBQUM7Z0JBQzFELGdCQUFrQyxFQUFFLEVBQUUsRUFDdkMsQ0FBQztnQkFDRCxNQUFNLEVBQ0osUUFBUSxFQUFFLFNBQVMsRUFDbkIsWUFBWSxFQUFFLGFBQWEsRUFDM0IsZUFBZSxFQUFFLGdCQUFnQixHQUNsQyxHQUFHLE1BQU0sa0VBQWtFLENBQzFFLFFBQVEsRUFDUixnQkFBaUMsRUFDakMsbUJBQW1CLEVBQ25CLFlBQVksRUFDWixlQUFlLEVBQ2YsTUFBTSxFQUNOLGVBQWUsRUFDZixhQUFhLENBQ2QsQ0FBQztnQkFFRixJQUFJLFNBQVMsRUFBRSxDQUFDO29CQUNkLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztnQkFDL0IsQ0FBQztnQkFFRCxJQUFJLGFBQWEsRUFBRSxDQUFDO29CQUNsQixZQUFZLEdBQUcsYUFBYSxDQUFDO2dCQUMvQixDQUFDO2dCQUVELElBQUksZ0JBQWdCLEVBQUUsQ0FBQztvQkFDckIsZUFBZSxHQUFHLGdCQUFnQixDQUFDO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQztZQUVELElBQ0UsQ0FBRSxpQkFBa0MsRUFBRSxhQUFhO2dCQUNoRCxpQkFBa0MsRUFBRSxnQkFBZ0IsQ0FBQztnQkFDdkQsZ0JBQWtDLEVBQUUsRUFBRSxFQUN2QyxDQUFDO2dCQUNELE1BQU0sRUFDSixRQUFRLEVBQUUsU0FBUyxFQUNuQixZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSxrREFBa0QsQ0FDMUQsRUFBRSxFQUNGLE1BQU0sRUFDTixnQkFBaUMsRUFDakMsaUJBQWlDLEVBQ2pDLFlBQVksRUFDWixlQUFlLENBQ2hCLENBQUM7Z0JBQ0YsSUFBSSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7b0JBQ2xCLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztnQkFDL0IsQ0FBQztnQkFFRCxJQUFJLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO29CQUMzQixZQUFZLEdBQUcsYUFBYSxDQUFDO2dCQUMvQixDQUFDO2dCQUVELElBQ0csZ0JBQXlDLEVBQUUsV0FBVyxFQUFFLEVBQUU7b0JBQzFELGdCQUF5QyxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQzFELENBQUM7b0JBQ0QsZUFBZSxHQUFHLGdCQUFnQixDQUFDO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQztZQUVELElBQ0UsQ0FBQyx5Q0FBeUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLGFBQWE7Z0JBQzVELHlDQUF5QyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLENBQUM7Z0JBQ2xFLGdCQUFrQyxFQUFFLEVBQUUsRUFDdkMsQ0FBQztnQkFDRCxNQUFNLEVBQ0osUUFBUSxFQUFFLFNBQVMsRUFDbkIsWUFBWSxFQUFFLGFBQWEsRUFDM0IsZUFBZSxFQUFFLGdCQUFnQixHQUNsQyxHQUFHLE1BQU0sa0RBQWtELENBQzFELEVBQUUsRUFDRixNQUFNLEVBQ04sZ0JBQWlDLEVBQ2pDLHlDQUF5QyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQzlDLFlBQVksRUFDWixlQUFlLENBQ2hCLENBQUM7Z0JBQ0YsSUFBSSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7b0JBQ2xCLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztnQkFDL0IsQ0FBQztnQkFFRCxJQUFJLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO29CQUMzQixZQUFZLEdBQUcsYUFBYSxDQUFDO2dCQUMvQixDQUFDO2dCQUVELElBQ0UsZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLEVBQUU7b0JBQ2hDLGdCQUFnQixFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQ2pDLENBQUM7b0JBQ0QsZUFBZSxHQUFHLGdCQUFnQixDQUFDO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQztZQUVELElBQ0UsQ0FBQyxpREFBaUQsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDckQsRUFBRSxhQUFhO2dCQUNmLGlEQUFpRCxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNwRCxFQUFFLGdCQUFnQixDQUFDO2dCQUN0QixnQkFBa0MsRUFBRSxFQUFFLEVBQ3ZDLENBQUM7Z0JBQ0QsTUFBTSxFQUNKLFFBQVEsRUFBRSxTQUFTLEVBQ25CLFlBQVksRUFBRSxhQUFhLEVBQzNCLGVBQWUsRUFBRSxnQkFBZ0IsR0FDbEMsR0FBRyxNQUFNLGtEQUFrRCxDQUMxRCxFQUFFLEVBQ0YsTUFBTSxFQUNOLGdCQUFpQyxFQUNqQyxpREFBaUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN0RCxZQUFZLEVBQ1osZUFBZSxDQUNoQixDQUFDO2dCQUNGLElBQUksU0FBUyxFQUFFLENBQUM7b0JBQ2QsZ0JBQWdCLEdBQUcsU0FBUyxDQUFDO2dCQUMvQixDQUFDO2dCQUVELElBQUksYUFBYSxFQUFFLENBQUM7b0JBQ2xCLFlBQVksR0FBRyxhQUFhLENBQUM7Z0JBQy9CLENBQUM7Z0JBRUQsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO29CQUNyQixlQUFlLEdBQUcsZ0JBQWdCLENBQUM7Z0JBQ3JDLENBQUM7WUFDSCxDQUFDO1lBRUQsSUFDRSxDQUFDLGFBQWEsRUFBRSxhQUFhLElBQUksYUFBYSxFQUFFLGdCQUFnQixDQUFDO2dCQUNoRSxnQkFBa0MsRUFBRSxFQUFFLEVBQ3ZDLENBQUM7Z0JBQ0QsTUFBTSxFQUNKLFFBQVEsRUFBRSxTQUFTLEVBQ25CLFlBQVksRUFBRSxhQUFhLEVBQzNCLGVBQWUsRUFBRSxnQkFBZ0IsR0FDbEMsR0FBRyxNQUFNLCtDQUErQyxDQUN2RCxNQUFNLEVBQ04sZ0JBQWlDLEVBQ2pDLFlBQVksRUFDWixlQUFlLENBQ2hCLENBQUM7Z0JBRUYsSUFBSSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7b0JBQ2xCLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztnQkFDL0IsQ0FBQztnQkFFRCxJQUFJLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO29CQUMzQixZQUFZLEdBQUcsYUFBYSxDQUFDO2dCQUMvQixDQUFDO2dCQUVELElBQ0csZ0JBQXlDLEVBQUUsVUFBVSxFQUFFLEVBQUU7b0JBQ3pELGdCQUF5QyxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQzNELENBQUM7b0JBQ0QsZUFBZSxHQUFHLGdCQUFnQixDQUFDO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQztZQUVELG1CQUFtQixHQUFHLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQzNELE9BQU8sQ0FBQyxHQUFHLENBQ1QsbUJBQW1CLEVBQ25CLDhDQUE4QyxDQUMvQyxDQUFDO1FBQ0osQ0FBQztRQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztRQUNuRCxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsQ0FBQztRQUMzQyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBRWpELE9BQU87WUFDTCxnQkFBZ0I7WUFDaEIsWUFBWTtZQUNaLGVBQWU7U0FDaEIsQ0FBQztJQUNKLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsc0RBQXNELENBQUMsQ0FBQztJQUN6RSxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sbURBQW1ELEdBQUcsS0FBSyxFQUN0RSxhQUE0QixFQUM1QixLQUFvQixFQUNwQixlQUFtQyxFQUNuQyxNQUFjLEVBQ2QsZUFBK0IsRUFBRSxFQUNqQyxrQkFBd0MsRUFBRSxFQUMxQyxFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxREFBcUQsQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUNuQixPQUFPLENBQUMsR0FBRyxDQUNULDhFQUE4RSxDQUMvRSxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3JCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZ0ZBQWdGLENBQ2pGLENBQUM7WUFDRixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDWixPQUFPLENBQUMsR0FBRyxDQUNULHVFQUF1RSxDQUN4RSxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FDVCxpRkFBaUYsQ0FDbEYsQ0FBQztZQUNGLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELElBQUksZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO1FBRTdCLElBQUksQ0FBQyxhQUFhLEVBQUUsTUFBTSxFQUFFLENBQUM7WUFDM0IsZ0JBQWdCLEdBQUcsNkJBQTZCLENBQzlDLEtBQUssRUFDTCxhQUFhLEVBQ2IsU0FBUyxFQUNULGVBQWUsQ0FDaEIsQ0FBQztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZ0JBQWdCLEVBQ2hCLGtIQUFrSCxDQUNuSCxDQUFDO1lBQ0YsSUFDRSxDQUFDLGVBQWUsRUFBRSxhQUFhLElBQUksZUFBZSxFQUFFLGdCQUFnQixDQUFDO2dCQUNwRSxLQUF1QixFQUFFLEVBQUUsRUFDNUIsQ0FBQztnQkFDRCxNQUFNLEVBQ0osUUFBUSxFQUFFLFNBQVMsRUFDbkIsWUFBWSxFQUFFLGFBQWEsRUFDM0IsZUFBZSxFQUFFLGdCQUFnQixHQUNsQyxHQUFHLE1BQU0sbUVBQW1FLENBQzNFLE1BQU0sRUFDTixnQkFBaUMsRUFDakMsWUFBWSxFQUNaLGVBQXVDLEVBQ3ZDLGFBQWEsRUFDYixlQUFlLENBQ2hCLENBQUM7Z0JBRUYsSUFBSSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7b0JBQ2xCLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztnQkFDL0IsQ0FBQztnQkFFRCxJQUFJLGFBQWEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQzlCLFlBQVksR0FBRyxhQUFhLENBQUM7Z0JBQy9CLENBQUM7Z0JBRUQsSUFBSSxnQkFBZ0IsRUFBRSxVQUFVLElBQUksZ0JBQWdCLEVBQUUsV0FBVyxFQUFFLENBQUM7b0JBQ2xFLGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQztnQkFDckMsQ0FBQztZQUNILENBQUM7WUFFRCxJQUNFLENBQUMsYUFBYSxFQUFFLGFBQWEsSUFBSSxhQUFhLEVBQUUsZ0JBQWdCLENBQUM7Z0JBQ2hFLEtBQXVCLEVBQUUsRUFBRSxFQUM1QixDQUFDO2dCQUNELE1BQU0sRUFDSixRQUFRLEVBQUUsU0FBUyxFQUNuQixZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSwrQ0FBK0MsQ0FDdkQsTUFBTSxFQUNOLGdCQUFpQyxFQUNqQyxZQUFZLEVBQ1osZUFBZSxDQUNoQixDQUFDO2dCQUVGLElBQUksU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDO29CQUNsQixnQkFBZ0IsR0FBRyxTQUFTLENBQUM7Z0JBQy9CLENBQUM7Z0JBRUQsSUFBSSxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQkFDM0IsWUFBWSxHQUFHLGFBQWEsQ0FBQztnQkFDL0IsQ0FBQztnQkFFRCxJQUNHLGdCQUF5QyxFQUFFLFVBQVUsRUFBRSxFQUFFO29CQUN6RCxnQkFBeUMsRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUMzRCxDQUFDO29CQUNELGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQztnQkFDckMsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1FBQ25ELE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBQzNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLENBQUM7UUFFakQsT0FBTztZQUNMLGdCQUFnQjtZQUNoQixZQUFZO1lBQ1osZUFBZTtTQUNoQixDQUFDO0lBQ0osQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxzREFBc0QsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxzQ0FBc0MsR0FBRyxLQUFLLEVBQ3pELEtBQW9CLEVBQ3BCLGVBQXVCLEVBQ3ZCLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQztRQUM3QixPQUFPLENBQUMsR0FBRyxDQUNULEVBQUUsRUFDRixNQUFNLEVBQ04sZUFBZSxFQUNmLDZFQUE2RSxDQUM5RSxDQUFDO1FBQ0YsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ25CLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUM3QyxDQUFDO1FBQ0QsTUFBTSxhQUFhLEdBQUcsTUFBTSxzQkFBc0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNwRSxNQUFNLG1CQUFtQixHQUN2QixNQUFNLCtCQUErQixDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3pELGFBQWEsQ0FBQyxtQkFBbUIsR0FBRyxtQkFBbUIsQ0FBQztRQUN4RCxPQUFPLENBQUMsR0FBRyxDQUNULGFBQWEsRUFDYiw4REFBOEQsQ0FDL0QsQ0FBQztRQUNGLE1BQU0sVUFBVSxHQUFtQixNQUFNLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25FLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO1FBRS9DLE1BQU0sSUFBSSxHQUFtQyxNQUFNLHNCQUFzQixDQUN2RSxLQUFLLEVBQ0wsVUFBVSxDQUNYLENBQUM7UUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDbkMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFFaEMsTUFBTSxjQUFjLEdBQUcsMEJBQTBCLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLGNBQWMsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3ZELElBQUksaUJBQWlCLEdBQTBCLEVBQUUsQ0FBQztRQUNsRCxJQUFJLGNBQWMsRUFBRSxDQUFDO1lBQ25CLGlCQUFpQixHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQ2pDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FDL0MsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFJLGtDQUFrQyxHQUFHLEVBQUUsQ0FBQztRQUM1QyxJQUFLLGlCQUFrQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzVDLGtDQUFrQztnQkFDaEMsTUFBTSxvQ0FBb0MsQ0FDeEMsS0FBSyxFQUNMLGlCQUFpQyxFQUNqQyxNQUFNLEVBQ04sTUFBTSxFQUNOLFVBQVUsQ0FDWCxDQUFDO1lBQ0osT0FBTyxDQUFDLEdBQUcsQ0FDVCxFQUFFLEVBQ0Ysa0NBQWtDLEVBQ2xDLHlDQUF5QyxDQUMxQyxDQUFDO1FBQ0osQ0FBQztRQUVELE1BQU0sZUFBZSxHQUFHLE1BQU0sa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDekQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3JCLE1BQU0sSUFBSSxLQUFLLENBQUMsNEJBQTRCLENBQUMsQ0FBQztRQUNoRCxDQUFDO1FBRUQsSUFBSSxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDN0IsSUFBSSxZQUFZLEdBQW1CLEVBQUUsQ0FBQztRQUN0QyxJQUFJLGVBQWUsR0FBeUIsRUFBRSxDQUFDO1FBRS9DLE9BQU8sQ0FBQyxHQUFHLENBQ1QsRUFBRSxFQUNGLGFBQWEsRUFDYixtRkFBbUYsQ0FDcEYsQ0FBQztRQUVGLElBQ0UsQ0FBQyxhQUFhLEVBQUUsY0FBYyxJQUFJLGVBQWUsRUFBRSxjQUFjLENBQUM7WUFDbEUsQ0FBQyxhQUFhLEVBQUUsTUFBTTtZQUN0QixDQUFDLEtBQUssRUFBRSxzQkFBc0IsRUFDOUIsQ0FBQztZQUNELE1BQU0sa0JBQWtCLEdBQUcsTUFBTSxzQkFBc0IsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDMUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsa0JBQWtCLEVBQUUseUJBQXlCLENBQUMsQ0FBQztZQUUvRCxJQUFJLGVBQWUsRUFBRSxFQUFFLElBQUksZ0JBQWdCLEVBQUUsRUFBRSxFQUFFLENBQUM7Z0JBQ2hELE1BQU0seUNBQXlDLEdBQzdDLGtCQUFrQixDQUFDLE1BQU0sQ0FDdkIsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssWUFBWSxDQUM3QyxDQUFDO2dCQUNKLE1BQU0saURBQWlELEdBQ3JELGtCQUFrQixDQUFDLE1BQU0sQ0FDdkIsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssb0JBQW9CLENBQ3JELENBQUM7Z0JBQ0osTUFBTSxFQUNKLGdCQUFnQixFQUFFLGlCQUFpQixFQUNuQyxZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSxtREFBbUQsQ0FDM0QsRUFBRSxFQUNGLGFBQWEsRUFDYixLQUFLLEVBQ0wsZUFBZSxFQUNmLGlCQUFpQyxFQUNqQyxNQUFNLEVBQ04sa0NBQWtDLEVBQ2xDLGdCQUFnQixFQUNoQixZQUFZLEVBQ1osZUFBZSxFQUNmLGtCQUFrQixFQUNsQix5Q0FBeUMsRUFDekMsaURBQWlELENBQ2xELENBQUM7Z0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxnQkFBZ0IsRUFDaEIsaUJBQWlCLEVBQ2pCLDhJQUE4SSxDQUMvSSxDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZUFBZSxFQUNmLGdCQUFnQixFQUNoQiw2SUFBNkksQ0FDOUksQ0FBQztnQkFDRixnQkFBZ0IsR0FBRyxpQkFBa0MsQ0FBQztnQkFDdEQsWUFBWSxHQUFHLGFBQWEsQ0FBQztnQkFDN0IsZUFBZSxHQUFHLGdCQUF3QyxDQUFDO1lBQzdELENBQUM7aUJBQU0sQ0FBQztnQkFDTixNQUFNLEVBQ0osZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQ25DLFlBQVksRUFBRSxhQUFhLEVBQzNCLGVBQWUsRUFBRSxnQkFBZ0IsR0FDbEMsR0FBRyxNQUFNLG1EQUFtRCxDQUMzRCxhQUFhLEVBQ2IsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixNQUFNLEVBQ04sWUFBWSxFQUNaLGVBQWUsQ0FDaEIsQ0FBQztnQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUNoQixpQkFBaUIsRUFDakIsb0pBQW9KLENBQ3JKLENBQUM7Z0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLGtKQUFrSixDQUNuSixDQUFDO2dCQUNGLGdCQUFnQixHQUFHLGlCQUFrQyxDQUFDO2dCQUN0RCxZQUFZLEdBQUcsYUFBYSxDQUFDO2dCQUM3QixlQUFlLEdBQUcsZ0JBQXdDLENBQUM7WUFDN0QsQ0FBQztRQUNILENBQUM7UUFFRCxJQUNFLGVBQWUsRUFBRSxFQUFFO1lBQ25CLENBQUMsYUFBYSxFQUFFLGNBQWM7WUFDOUIsQ0FBQyxlQUFlLEVBQUUsY0FBYztZQUNoQyxDQUFDLEtBQUssRUFBRSxzQkFBc0I7WUFDOUIsS0FBSyxFQUFFLEVBQUU7WUFDVCxhQUFhLEVBQUUsRUFBRSxFQUNqQixDQUFDO1lBQ0QsSUFDRyxpQkFBa0MsRUFBRSxFQUFFO2dCQUN2QyxrQ0FBa0MsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUM5QyxDQUFDO2dCQUNELGdCQUFnQixHQUFHLDZCQUE2QixDQUM5QyxLQUFLLEVBQ0wsYUFBYSxFQUNiLGlCQUFpQyxFQUNqQyxlQUFlLENBQ2hCLENBQUM7Z0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxnQkFBZ0IsRUFDaEIsMENBQTBDLENBQzNDLENBQUM7Z0JBQ0YsSUFBSSxnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQkFDekIsTUFBTSxFQUNKLFFBQVEsRUFBRSxTQUFTLEVBQ25CLFlBQVksRUFBRSxhQUFhLEVBQzNCLGVBQWUsRUFBRSxnQkFBZ0IsR0FDbEMsR0FBRyxNQUFNLGtEQUFrRCxDQUMxRCxFQUFFLEVBQ0YsTUFBTSxFQUNOLGdCQUFnQixFQUNoQixpQkFBaUMsRUFDakMsWUFBWSxFQUNaLGVBQWUsQ0FDaEIsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUNoQixTQUFTLEVBQ1QscUlBQXFJLENBQ3RJLENBQUM7b0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLDRJQUE0SSxDQUM3SSxDQUFDO29CQUNGLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztvQkFDN0IsWUFBWSxHQUFHLGFBQWEsQ0FBQztvQkFDN0IsZUFBZSxHQUFHLGdCQUFnQixDQUFDO29CQUVuQyxPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUNoQiw0Q0FBNEMsQ0FDN0MsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO29CQUNuRCxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSwwQkFBMEIsQ0FBQyxDQUFDO29CQUV6RCxNQUFNLEVBQ0osUUFBUSxFQUFFLFNBQVMsRUFDbkIsWUFBWSxFQUFFLGFBQWEsRUFDM0IsZUFBZSxFQUFFLGdCQUFnQixHQUNsQyxHQUFHLE1BQU0sa0VBQWtFLENBQzFFLEtBQUssRUFDTCxnQkFBZ0IsRUFDaEIsa0NBQWtDLEVBQ2xDLFlBQVksRUFDWixlQUFlLEVBQ2YsTUFBTSxFQUNOLGVBQWUsRUFDZixhQUFhLENBQ2QsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUNoQixTQUFTLEVBQ1QscUpBQXFKLENBQ3RKLENBQUM7b0JBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLDRKQUE0SixDQUM3SixDQUFDO29CQUNGLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztvQkFDN0IsWUFBWSxHQUFHLGFBQWEsQ0FBQztvQkFDN0IsZUFBZSxHQUFHLGdCQUFnQixDQUFDO29CQUVuQyxPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUNoQixxSEFBcUgsQ0FDdEgsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULFlBQVksRUFDWixpSEFBaUgsQ0FDbEgsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULGVBQWUsRUFDZixvSEFBb0gsQ0FDckgsQ0FBQztnQkFDSixDQUFDO1lBQ0gsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLE1BQU0sRUFDSixnQkFBZ0IsRUFBRSxpQkFBaUIsRUFDbkMsWUFBWSxFQUFFLGFBQWEsRUFDM0IsZUFBZSxFQUFFLGdCQUFnQixHQUNsQyxHQUFHLE1BQU0sbURBQW1ELENBQzNELGFBQWEsRUFDYixnQkFBZ0IsRUFDaEIsZUFBZSxFQUNmLE1BQU0sRUFDTixZQUFZLEVBQ1osZUFBZSxDQUNoQixDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZ0JBQWdCLEVBQ2hCLGlCQUFpQixFQUNqQiw4SUFBOEksQ0FDL0ksQ0FBQztnQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULGVBQWUsRUFDZixnQkFBZ0IsRUFDaEIsNklBQTZJLENBQzlJLENBQUM7Z0JBQ0YsZ0JBQWdCLEdBQUcsaUJBQWtDLENBQUM7Z0JBQ3RELFlBQVksR0FBRyxhQUFhLENBQUM7Z0JBQzdCLGVBQWUsR0FBRyxnQkFBd0MsQ0FBQztZQUM3RCxDQUFDO1FBQ0gsQ0FBQztRQUVELE1BQU0sUUFBUSxHQUFrQixnQkFBZ0IsSUFBSSxLQUFLLENBQUM7UUFDMUQsT0FBTyxDQUFDLEdBQUcsQ0FDVCxRQUFRLEVBQ1IsS0FBSyxFQUNMLHFGQUFxRixDQUN0RixDQUFDO1FBRUYsT0FBTztZQUNMLFFBQVE7WUFDUixZQUFZO1lBQ1osZUFBZTtTQUNoQixDQUFDO0lBQ0osQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxxQ0FBcUMsQ0FBQyxDQUFDO0lBQ3hELENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxnRUFBZ0UsR0FDM0UsS0FBSyxFQUFFLEtBQW9CLEVBQUUsZUFBdUIsRUFBRSxFQUFFO0lBQ3RELElBQUksQ0FBQztRQUNILElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDZixNQUFNLElBQUksS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUNELElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUNyQixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUVELE1BQU0sVUFBVSxHQUFtQixNQUFNLHNCQUFzQixDQUM3RCxLQUFLLEVBQUUsRUFBRSxDQUNWLENBQUM7UUFDRixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFDRCxPQUFPLENBQUMsR0FBRyxDQUNULEtBQUssRUFBRSxFQUFFLEVBQ1QsNkVBQTZFLENBQzlFLENBQUM7UUFDRixNQUFNLGFBQWEsR0FBRyxNQUFNLHNCQUFzQixDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3BFLE1BQU0sbUJBQW1CLEdBQ3ZCLE1BQU0sK0JBQStCLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDekQsYUFBYSxDQUFDLG1CQUFtQixHQUFHLG1CQUFtQixDQUFDO1FBQ3hELElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDdkIsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUN2QyxNQUFNLElBQUksR0FBRyxNQUFNLHNCQUFzQixDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMzQixJQUFJLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3RCLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7WUFFeEIsTUFBTSxjQUFjLEdBQUcscUNBQXFDLENBQzFELElBQUksRUFDSixNQUFNLENBQ1AsQ0FBQztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLENBQUM7WUFDL0MsSUFBSSxjQUFjLEVBQUUsQ0FBQztnQkFDbkIsSUFBSSxpQkFBaUIsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUNyQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxjQUFjLENBQy9DLENBQUM7Z0JBQ0YsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7b0JBQ3ZCLE1BQU0sSUFBSSxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQztnQkFDbEQsQ0FBQztnQkFDRCxNQUFNLGVBQWUsR0FBRyxNQUFNLGtCQUFrQixDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDaEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztnQkFDakQsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO29CQUNyQixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUM7Z0JBQ2hELENBQUM7Z0JBQ0QsSUFBSSxnQkFBZ0IsR0FBRyw2QkFBNkIsQ0FDbEQsS0FBSyxFQUNMLGFBQWEsRUFDYixpQkFBaUIsRUFDakIsZUFBZSxDQUNoQixDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZ0JBQWdCLEVBQ2hCLDBDQUEwQyxDQUMzQyxDQUFDO2dCQUNGLElBQUksWUFBWSxHQUFtQixFQUFFLENBQUM7Z0JBQ3RDLElBQUksZUFBZSxHQUF5QixFQUFFLENBQUM7Z0JBRS9DLElBQUksVUFBVSxFQUFFLE1BQU0sR0FBRyxDQUFDLElBQUksZ0JBQWdCLEVBQUUsRUFBRSxFQUFFLENBQUM7b0JBQ25ELE1BQU0sRUFDSixRQUFRLEVBQUUsU0FBUyxFQUNuQixZQUFZLEVBQUUsYUFBYSxFQUMzQixlQUFlLEVBQUUsZ0JBQWdCLEdBQ2xDLEdBQUcsTUFBTSxrRUFBa0UsQ0FDMUUsS0FBSyxFQUNMLGdCQUFnQixFQUNoQixVQUFVLEVBQ1YsWUFBWSxFQUNaLGVBQWUsRUFDZixLQUFLLEVBQUUsTUFBTSxFQUNiLGVBQWUsRUFDZixhQUFhLENBQ2QsQ0FBQztvQkFDRixnQkFBZ0IsR0FBRyxTQUFTLENBQUM7b0JBQzdCLFlBQVksR0FBRyxhQUFhLElBQUksRUFBRSxDQUFDO29CQUNuQyxlQUFlLEdBQUcsZ0JBQWdCLElBQUksRUFBRSxDQUFDO29CQUV6QyxPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUNoQiwyREFBMkQsQ0FDNUQsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULFlBQVksRUFDWix1REFBdUQsQ0FDeEQsQ0FBQztvQkFDRixPQUFPLENBQUMsR0FBRyxDQUNULGVBQWUsRUFDZiwwREFBMEQsQ0FDM0QsQ0FBQztnQkFDSixDQUFDO2dCQUVELE1BQU0sUUFBUSxHQUFrQixnQkFBZ0IsSUFBSSxLQUFLLENBQUM7Z0JBQzFELE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO2dCQUVuQyxPQUFPO29CQUNMLFFBQVE7b0JBQ1IsWUFBWTtvQkFDWixlQUFlO2lCQUNoQixDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQ1QsQ0FBQyxFQUNELCtEQUErRCxDQUNoRSxDQUFDO0lBQ0osQ0FBQztBQUNILENBQUMsQ0FBQztBQUVKLE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxLQUFLLEVBQUUsTUFBYyxFQUFFLEVBQUU7SUFDckQsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sR0FBRzthQUNOLE1BQU0sQ0FBQyxHQUFHLGNBQWMsMkJBQTJCLE1BQU0sRUFBRSxFQUFFO1lBQzVELE9BQU8sRUFBRTtnQkFDUCxjQUFjLEVBQUUsa0JBQWtCO2dCQUNsQyxhQUFhLEVBQUUsU0FBUyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsbUJBQW1CLElBQUksbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRTthQUMxRztTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDdkMsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLDZCQUE2QixHQUFHLENBQzNDLGNBQThDLEVBQzlDLEVBQUU7SUFDRixNQUFNLFlBQVksR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2hELElBQUksQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDcEIsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNaLENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQyxDQUFDLENBQUM7SUFDSCxNQUFNLGtCQUFrQixHQUFHLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUM7SUFDbEUsTUFBTSxnQkFBZ0IsR0FBRyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDO0lBQzlELE1BQU0sZUFBZSxHQUNuQixZQUFZLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUM7SUFFOUQsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNqRSxNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ25FLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzVELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRTlELE1BQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RSxNQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDeEUsTUFBTSxlQUFlLEdBQUcsS0FBSztTQUMxQixRQUFRLENBQ1AsS0FBSyxFQUFFO1NBQ0osSUFBSSxDQUFDLFNBQVMsQ0FBQztTQUNmLE1BQU0sQ0FBQyxXQUFXLENBQUM7U0FDbkIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQ25FO1NBQ0EsU0FBUyxFQUFFLENBQUM7SUFFZixNQUFNLHNCQUFzQixHQUFHLEtBQUs7U0FDakMsUUFBUSxDQUNQLEtBQUssRUFBRTtTQUNKLElBQUksQ0FBQyxTQUFTLENBQUM7U0FDZixNQUFNLENBQUMsV0FBVyxDQUFDO1NBQ25CLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQ2pEO1NBQ0EsU0FBUyxFQUFFLENBQUM7SUFFZixNQUFNLHVCQUF1QixHQUFHLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsR0FBRyxlQUFlLENBQUM7SUFFOUUsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FDMUIsc0JBQXNCLEdBQUcsdUJBQXVCLENBQ2pELENBQUM7SUFFRixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBQy9ELE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztRQUNqRSxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUN6QyxPQUFPLENBQUMsR0FBRyxDQUNULFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFDMUIsU0FBUyxFQUNULFdBQVcsRUFDWCxPQUFPLEVBQ1AsU0FBUyxFQUNULFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsRUFDNUIsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUMxQixrQkFBa0IsRUFDbEIsZUFBZSxFQUNmLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFDM0IsWUFBWSxFQUFFLENBQUMsWUFBWSxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQ2xELHlQQUF5UCxDQUMxUCxDQUFDO1FBQ0YsS0FBSyxNQUFNLFdBQVcsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUN2QyxPQUFPLENBQUMsR0FBRyxDQUNULFdBQVcsRUFBRSxPQUFPLEVBQ3BCLFdBQVcsQ0FBQyxJQUFJLEVBQ2hCLFdBQVcsRUFBRSxRQUFRLEVBQ3JCLFdBQVcsQ0FBQyxRQUFRLEVBQ3BCLHNGQUFzRixDQUN2RixDQUFDO1FBQ0osQ0FBQztRQUVELE1BQU0sSUFBSSxLQUFLLENBQ2Isb0lBQW9JLENBQ3JJLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQUcsQ0FDakMsUUFBc0IsRUFDYyxFQUFFO0lBQ3RDLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sS0FBSyxHQUFHLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQWMsQ0FBQztJQUMzRCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBWSxDQUFDO0lBQy9DLE9BQU8sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDeEIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sdUNBQXVDLEdBQUcsQ0FDckQsTUFBc0MsRUFDdEMsUUFBdUIsRUFDdkIsWUFBb0IsRUFDTCxFQUFFO0lBQ2pCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUNyQixPQUFPLENBQUMsR0FBRyxDQUFDLHNEQUFzRCxDQUFDLENBQUM7UUFDcEUsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLGdEQUFnRCxDQUFDLENBQUM7UUFDOUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsQ0FBQztRQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVELElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQztRQUM3QyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sSUFBSSxLQUFLLENBQUMsMENBQTBDLENBQUMsQ0FBQztJQUM5RCxDQUFDO0lBRUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDO1FBQzNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDekMsTUFBTSxJQUFJLEtBQUssQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFRCxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3hDLElBQUksQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDcEIsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNaLENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFFdkQsTUFBTSxRQUFRLEdBQUcsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUM7SUFDL0MsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUVyRCxNQUFNLFNBQVMsR0FBRyxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVM7UUFDOUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQzFELENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFFOUUsTUFBTSxXQUFXLEdBQUcsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTO1FBQ2hELENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUMxRCxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUNuQyxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7YUFDM0IsTUFBTSxFQUFFLENBQUM7SUFDaEIsTUFBTSxTQUFTLEdBQUcsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRO1FBQzdDLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ25DLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzthQUMzQixFQUFFLENBQUMsWUFBWSxDQUFDO2FBQ2hCLEtBQUssQ0FBQyxLQUFLLENBQUM7YUFDWixJQUFJLENBQUMsR0FBRyxDQUFDO2FBQ1QsSUFBSSxDQUFDLFNBQVMsQ0FBQzthQUNmLE1BQU0sQ0FBQyxXQUFXLENBQUM7YUFDbkIsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7YUFDckIsTUFBTSxFQUFFO1FBQ2IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDbkMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO2FBQzNCLElBQUksQ0FBQyxTQUFTLENBQUM7YUFDZixNQUFNLENBQUMsV0FBVyxDQUFDO2FBQ25CLE1BQU0sRUFBRSxDQUFDO0lBRWhCLE1BQU0sT0FBTyxHQUFHLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTztRQUN6QyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDdkQsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM1RSxNQUFNLFNBQVMsR0FBRyxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU87UUFDM0MsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3ZELENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDOUUsTUFBTSxPQUFPLEdBQUcsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRO1FBQzFDLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ2pDLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzthQUMzQixFQUFFLENBQUMsWUFBWSxDQUFDO2FBQ2hCLEtBQUssQ0FBQyxLQUFLLENBQUM7YUFDWixJQUFJLENBQUMsR0FBRyxDQUFDO2FBQ1QsSUFBSSxDQUFDLE9BQU8sQ0FBQzthQUNiLE1BQU0sQ0FBQyxTQUFTLENBQUM7YUFDakIsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7YUFDckIsTUFBTSxFQUFFO1FBQ2IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDakMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO2FBQzNCLE1BQU0sQ0FBQyxTQUFTLENBQUM7YUFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQzthQUNiLE1BQU0sRUFBRSxDQUFDO0lBRWhCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxDQUFDLEVBQUUsRUFDWCxTQUFTLEVBQ1QsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQzlCLFNBQVMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUM3QixTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFDOUIsU0FBUyxFQUNULFdBQVcsRUFDWCxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ25DLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztTQUMzQixLQUFLLENBQUMsS0FBSyxDQUFDO1NBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQztTQUNULElBQUksQ0FBQyxTQUFTLENBQUM7U0FDZixNQUFNLENBQUMsV0FBVyxDQUFDO1NBQ25CLE1BQU0sRUFBRSxFQUNYOztpREFFNkMsQ0FDOUMsQ0FBQztJQUVGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxDQUFDLEVBQUUsRUFDWCxPQUFPLEVBQ1AsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQzdCLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUM1QixRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFDM0IsT0FBTyxFQUNQLFNBQVMsRUFDVCxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ2pDLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztTQUMzQixLQUFLLENBQUMsS0FBSyxDQUFDO1NBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQztTQUNULElBQUksQ0FBQyxPQUFPLENBQUM7U0FDYixNQUFNLENBQUMsU0FBUyxDQUFDO1NBQ2pCLE1BQU0sRUFBRSxFQUNYOzs7OENBRzBDLENBQzNDLENBQUM7SUFFRixNQUFNLFFBQVEsR0FBa0I7UUFDOUIsR0FBRyxRQUFRO1FBQ1gsU0FBUztRQUNULE9BQU87S0FDUixDQUFDO0lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsNkNBQTZDLENBQUMsQ0FBQztJQUVyRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7UUFDaEMsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7UUFDOUIsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRCxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsS0FBSyxFQUNsQyxFQUFVLEVBQ1YsTUFBZ0IsRUFDaEIsTUFBYyxFQUNkLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsRUFBRSxDQUFDO1FBQ3ZDLE1BQU0sUUFBUSxHQUFHLE1BQU0sTUFBTSxDQUFDLEtBQUssQ0FBQztZQUNsQyxFQUFFO1lBQ0YsS0FBSyxFQUFFLFdBQVc7WUFDbEIsSUFBSSxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO1lBQzNDLE9BQU8sRUFBRSxJQUFJO1NBQ2QsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsaUNBQWlDLENBQUMsQ0FBQztJQUNwRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0NBQWtDLEdBQUcsQ0FDaEQsUUFBdUIsRUFDdkIsUUFBd0IsRUFDeEIsRUFBRTtJQUNGLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxRQUFRLEVBQUUsRUFBRSxFQUNaLG9FQUFvRSxDQUNyRSxDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUNsQixPQUFPLENBQUMsR0FBRyxDQUNULFFBQVEsRUFBRSxFQUFFLEVBQ1osa0VBQWtFLENBQ25FLENBQUM7UUFDRixNQUFNLElBQUksS0FBSyxDQUNiLEdBQUcsUUFBUSxRQUFRLFFBQVEsRUFBRSxFQUFFLG1FQUFtRSxDQUNuRyxDQUFDO0lBQ0osQ0FBQztJQUVELE1BQU0sZ0JBQWdCLEdBQUc7UUFDdkIsR0FBRyxRQUFRO1FBQ1gsU0FBUyxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDOUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO2FBQzNCLE1BQU0sRUFBRTtRQUNYLE9BQU8sRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQzFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzthQUMzQixNQUFNLEVBQUU7S0FDWixDQUFDO0lBRUYsTUFBTSxnQkFBZ0IsR0FBRztRQUN2QixHQUFHLFFBQVE7UUFDWCxTQUFTLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUM5QyxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7YUFDM0IsTUFBTSxFQUFFO1FBQ1gsT0FBTyxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDMUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO2FBQzNCLE1BQU0sRUFBRTtLQUNaLENBQUM7SUFDRixPQUFPLENBQUMsR0FBRyxDQUNULENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxFQUM5QyxpREFBaUQsQ0FDbEQsQ0FBQztJQUNGLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixFQUFFLGdCQUFnQixDQUFDLENBQUM7QUFDeEQsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsS0FBSyxFQUFFLFVBQWtCLEVBQUUsRUFBRTtJQUM1RCxJQUFJLENBQUM7UUFDSCxNQUFNLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDcEMsTUFBTSxLQUFLLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUJmLENBQUM7UUFDQSxNQUFNLFNBQVMsR0FBRztZQUNoQixFQUFFLEVBQUUsVUFBVTtTQUNmLENBQUM7UUFFRixNQUFNLEdBQUcsR0FBK0MsTUFBTSxHQUFHO2FBQzlELElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsY0FBYyxFQUFFLGtCQUFrQjtnQkFDbEMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVM7YUFDVjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLCtCQUErQixDQUFDLENBQUM7UUFDbEQsT0FBTyxHQUFHLEVBQUUsSUFBSSxFQUFFLGNBQWMsQ0FBQztJQUNuQyxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHNCQUFzQixDQUFDLENBQUM7SUFDekMsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHNCQUFzQixHQUFHLEtBQUssRUFDekMsTUFBYyxFQUNkLFFBQWdCLEVBQ2hCLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLGFBQWEsR0FBRyx3QkFBd0IsQ0FBQztRQUMvQyxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7O0tBWWIsQ0FBQztRQUNGLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLE1BQU07WUFDTixRQUFRO1NBQ1QsQ0FBQztRQUVGLE1BQU0sR0FBRyxHQUNQLE1BQU0sR0FBRzthQUNOLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTO2FBQ1Y7WUFDRCxPQUFPLEVBQUU7Z0JBQ1AsdUJBQXVCLEVBQUUsaUJBQWlCO2dCQUMxQyxjQUFjLEVBQUUsa0JBQWtCO2dCQUNsQyxlQUFlLEVBQUUsT0FBTzthQUN6QjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVaLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLG9DQUFvQyxDQUFDLENBQUM7UUFDdkQsSUFBSSxHQUFHLEVBQUUsSUFBSSxFQUFFLG9CQUFvQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNoRCxPQUFPLEdBQUcsRUFBRSxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxxQ0FBcUMsQ0FBQyxDQUFDO0lBQ3hELENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBRyxDQUN0QyxTQUF5QixFQUNMLEVBQUU7SUFDdEIsTUFBTSxlQUFlLEdBQWtCLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtRQUNoRSxPQUFPO1lBQ0wsTUFBTSxFQUFFLE9BQU87WUFDZixPQUFPLEVBQUUsUUFBUSxDQUFDLE9BQU87U0FDMUIsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxlQUFlLEdBQXVCO1FBQzFDLFNBQVMsRUFBRSxlQUFlO1FBQzFCLFVBQVUsRUFBRSxLQUFLO0tBQ2xCLENBQUM7SUFDRixPQUFPLGVBQWUsQ0FBQztBQUN6QixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxnQkFBZ0IsR0FBRyxLQUFLLEVBQ25DLFlBQW9CLEVBT25CLEVBQUU7SUFDSCxJQUFJLENBQUM7UUFDSCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUM7UUFDOUIsTUFBTSxRQUFRLEdBQUcsZ0JBQWdCLENBQUM7UUFFbEMsT0FBTyxLQUFLLENBQUM7WUFDWCxJQUFJLEVBQUUsSUFBSSxlQUFlLENBQUM7Z0JBQ3hCLGFBQWEsRUFBRSxZQUFZO2dCQUMzQixVQUFVLEVBQUUsZUFBZTthQUM1QixDQUFDLENBQUMsUUFBUSxFQUFFO1lBQ2IsT0FBTyxFQUFFLGdCQUFnQjtZQUN6QixHQUFHLEVBQUUsY0FBYztZQUNuQixNQUFNLEVBQUUsTUFBTTtZQUNkLE9BQU8sRUFBRTtnQkFDUCxjQUFjLEVBQUUsbUNBQW1DO2FBQ3BEO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLFFBQVE7Z0JBQ1IsUUFBUTthQUNUO1NBQ0YsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLCtCQUErQixDQUFDLENBQUM7SUFDbEQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQUFHLEtBQUssRUFDckMsWUFBb0IsRUFDcEIsVUFBb0QsRUFNbkQsRUFBRTtJQUNILElBQUksQ0FBQztRQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDdkQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3BELFFBQVEsVUFBVSxFQUFFLENBQUM7WUFDbkIsS0FBSyxLQUFLO2dCQUNSLE9BQU8sR0FBRztxQkFDUCxJQUFJLENBQUMsY0FBYyxFQUFFO29CQUNwQixJQUFJLEVBQUU7d0JBQ0osVUFBVSxFQUFFLGVBQWU7d0JBQzNCLGFBQWEsRUFBRSxZQUFZO3dCQUMzQixTQUFTLEVBQUUsaUJBQWlCO3FCQUM3QjtvQkFDRCxPQUFPLEVBQUU7d0JBQ1AsY0FBYyxFQUFFLG1DQUFtQztxQkFDcEQ7aUJBQ0YsQ0FBQztxQkFDRCxJQUFJLEVBQUUsQ0FBQztZQUNaLEtBQUssU0FBUztnQkFDWixPQUFPLEdBQUc7cUJBQ1AsSUFBSSxDQUFDLGNBQWMsRUFBRTtvQkFDcEIsSUFBSSxFQUFFO3dCQUNKLFVBQVUsRUFBRSxlQUFlO3dCQUMzQixhQUFhLEVBQUUsWUFBWTt3QkFDM0IsU0FBUyxFQUFFLHFCQUFxQjtxQkFDakM7b0JBQ0QsT0FBTyxFQUFFO3dCQUNQLGNBQWMsRUFBRSxtQ0FBbUM7cUJBQ3BEO2lCQUNGLENBQUM7cUJBQ0QsSUFBSSxFQUFFLENBQUM7WUFDWixLQUFLLEtBQUs7Z0JBQ1IsT0FBTyxHQUFHO3FCQUNQLElBQUksQ0FBQyxjQUFjLEVBQUU7b0JBQ3BCLElBQUksRUFBRTt3QkFDSixVQUFVLEVBQUUsZUFBZTt3QkFDM0IsYUFBYSxFQUFFLFlBQVk7d0JBQzNCLFNBQVMsRUFBRSxpQkFBaUI7d0JBQzVCLGFBQWEsRUFBRSxxQkFBcUI7cUJBQ3JDO29CQUNELE9BQU8sRUFBRTt3QkFDUCxjQUFjLEVBQUUsbUNBQW1DO3FCQUNwRDtpQkFDRixDQUFDO3FCQUNELElBQUksRUFBRSxDQUFDO1lBQ1osS0FBSyxZQUFZO2dCQUNmLE9BQU8sR0FBRztxQkFDUCxJQUFJLENBQUMsY0FBYyxFQUFFO29CQUNwQixJQUFJLEVBQUU7d0JBQ0osVUFBVSxFQUFFLGVBQWU7d0JBQzNCLGFBQWEsRUFBRSxZQUFZO3dCQUMzQixTQUFTLEVBQUUsdUJBQXVCO3dCQUNsQyxhQUFhLEVBQUUsMkJBQTJCO3FCQUMzQztvQkFDRCxPQUFPLEVBQUU7d0JBQ1AsY0FBYyxFQUFFLG1DQUFtQztxQkFDcEQ7aUJBQ0YsQ0FBQztxQkFDRCxJQUFJLEVBQUUsQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGlDQUFpQyxDQUFDLENBQUM7SUFDcEQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHlCQUF5QixHQUFHLEtBQUssRUFDNUMsRUFBVSxFQUNWLEtBQWMsRUFDZCxTQUFrQixFQUNsQixPQUFpQixFQUNqQixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsTUFBTSxhQUFhLEdBQUcsMkJBQTJCLENBQUM7UUFDbEQsTUFBTSxLQUFLLEdBQUc7c0RBQ29DLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsU0FBUyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsRUFBRTswRUFDM0ksS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxTQUFTLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLE9BQU8sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxFQUFFOzs7Ozs7Ozs7O0tBVWhPLENBQUM7UUFDRixNQUFNLFNBQVMsR0FBRztZQUNoQixFQUFFO1lBQ0YsS0FBSztZQUNMLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDLFdBQVcsRUFBRTtZQUMxRCxPQUFPO1NBQ1IsQ0FBQztRQUVGLE1BQU0sR0FBRyxHQUFHLE1BQU0sR0FBRzthQUNsQixJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUzthQUNWO1lBQ0QsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsY0FBYyxFQUFFLGtCQUFrQjtnQkFDbEMsZUFBZSxFQUFFLE9BQU87YUFDekI7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSx1Q0FBdUMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsd0NBQXdDLENBQUMsQ0FBQztJQUMzRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsQ0FDL0IsY0FBc0IsRUFDdEIscUJBQThCLEVBQzlCLEVBQUU7SUFDRixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN0RCxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUUxRCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUMzQixXQUFxQixFQUNyQixVQUFVLEVBQ1YsS0FBSyxFQUNMLEVBQUUsRUFDRixRQUFRLENBQ1QsQ0FBQztJQUVGLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzVFLElBQUksY0FBYyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1RSxjQUFjLElBQUksYUFBYSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUU5QyxJQUFJLHFCQUFxQixFQUFFLENBQUM7UUFDMUIsTUFBTSxvQkFBb0IsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQ2xELGFBQWEsRUFDYixHQUFHLEVBQ0gsUUFBUSxDQUNULENBQUM7UUFDRixJQUFJLHFCQUFxQixHQUFHLG9CQUFvQixDQUFDLE1BQU0sQ0FDckQscUJBQXFCLEVBQ3JCLFFBQVEsRUFDUixNQUFNLENBQ1AsQ0FBQztRQUNGLHFCQUFxQixJQUFJLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU1RCxPQUFPO1lBQ0wsS0FBSyxFQUFFLGNBQWM7WUFDckIsWUFBWSxFQUFFLHFCQUFxQjtTQUNwQyxDQUFDO0lBQ0osQ0FBQztJQUVELE9BQU87UUFDTCxLQUFLLEVBQUUsY0FBYztLQUN0QixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxLQUFhLEVBQUUsWUFBcUIsRUFBRSxFQUFFO0lBQ3hFLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3RELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRTFELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQzNCLFdBQXFCLEVBQ3JCLFVBQVUsRUFDVixLQUFLLEVBQ0wsRUFBRSxFQUNGLFFBQVEsQ0FDVCxDQUFDO0lBQ0YsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3hFLElBQUksY0FBYyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNqRSxjQUFjLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUU5QyxJQUFJLHFCQUFxQixHQUFHLEVBQUUsQ0FBQztJQUUvQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2pCLE1BQU0sa0JBQWtCLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FDOUMsYUFBYSxFQUNiLEdBQUcsRUFDSCxRQUFRLENBQ1QsQ0FBQztRQUNGLHFCQUFxQixHQUFHLGtCQUFrQixDQUFDLE1BQU0sQ0FDL0MsWUFBWSxFQUNaLE1BQU0sRUFDTixRQUFRLENBQ1QsQ0FBQztRQUNGLHFCQUFxQixJQUFJLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM5RCxDQUFDO0lBRUQsSUFBSSxxQkFBcUIsRUFBRSxDQUFDO1FBQzFCLE9BQU87WUFDTCxjQUFjO1lBQ2QscUJBQXFCO1NBQ3RCLENBQUM7SUFDSixDQUFDO1NBQU0sQ0FBQztRQUNOLE9BQU8sRUFBRSxjQUFjLEVBQUUsQ0FBQztJQUM1QixDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUcsS0FBSyxFQUFFLE1BQWMsRUFBRSxFQUFFO0lBQ3pELElBQUksQ0FBQztRQUNILE1BQU0sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsR0FBRyxNQUFNLHNCQUFzQixDQUN6RSxNQUFNLEVBQ04sZ0JBQWdCLENBQ2pCLENBQUM7UUFFRixNQUFNLGVBQWUsR0FBRyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFFL0QsT0FBTztZQUNMLEVBQUU7WUFDRixTQUFTO1lBQ1QsR0FBRyxlQUFlO1NBQ25CLENBQUM7SUFDSixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGlDQUFpQyxDQUFDLENBQUM7SUFDcEQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLEtBQUssRUFDeEMsRUFBVSxFQUNWLFdBQW1CLEVBQ25CLFNBQWlCLEVBQ2pCLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLEVBQUUsY0FBYyxFQUFFLEdBQUcsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDMUQsTUFBTSx5QkFBeUIsQ0FBQyxFQUFFLEVBQUUsY0FBYyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsb0NBQW9DLENBQUMsQ0FBQztJQUN2RCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBQ0YsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFHLEtBQUssRUFBRSxNQUFjLEVBQUUsRUFBRTtJQUN0RCxJQUFJLGFBQWEsR0FBRyxFQUFFLENBQUM7SUFDdkIsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsR0FDMUMsTUFBTSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1lBQ2pELE9BQU87UUFDVCxDQUFDO1FBRUQsYUFBYSxHQUFHLEVBQUUsQ0FBQztRQUNuQixPQUFPLENBQUMsR0FBRyxDQUNULEVBQUUsRUFDRixLQUFLLEVBQ0wsU0FBUyxFQUNULFlBQVksRUFDWixxQ0FBcUMsQ0FDdEMsQ0FBQztRQUNGLElBQUksS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDaEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNqRCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDO1lBQy9DLE1BQU0scUJBQXFCLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2xFLE9BQU8sR0FBRyxDQUFDLFlBQVksQ0FBQztRQUMxQixDQUFDO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLCtCQUErQixDQUFDLENBQUM7UUFDaEQsTUFBTSx5QkFBeUIsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwRSxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBQ0YsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsS0FBSyxFQUNwQyxNQUFjLEVBQ2QsUUFBZ0IsRUFDaEIsVUFBb0QsRUFDcEQsRUFBRTtJQUNGLElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQztJQUN2QixJQUFJLENBQUM7UUFDSCxNQUFNLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEdBQUcsTUFBTSxzQkFBc0IsQ0FDekUsTUFBTSxFQUNOLFFBQVEsQ0FDVCxDQUFDO1FBQ0YsYUFBYSxHQUFHLEVBQUUsQ0FBQztRQUNuQixPQUFPLENBQUMsR0FBRyxDQUNULEVBQUUsRUFDRixLQUFLLEVBQ0wsU0FBUyxFQUNULFlBQVksRUFDWixxQ0FBcUMsQ0FDdEMsQ0FBQztRQUNGLElBQUksS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDaEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsOEJBQThCLENBQUMsQ0FBQztZQUNqRCxNQUFNLHlCQUF5QixDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN0RSxPQUFPLEdBQUcsQ0FBQyxZQUFZLENBQUM7UUFDMUIsQ0FBQztRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSwwQkFBMEIsQ0FBQyxDQUFDO1FBQzNDLE1BQU0seUJBQXlCLENBQUMsYUFBYSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDcEUsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLEtBQUssRUFDbkMsTUFBYyxFQUNkLFVBQWtCLEVBQ2xCLE9BQWUsRUFDZixVQUFvRCxFQUNwRCxXQUFvQixFQUNwQixhQUFzQixFQUN0QixxQkFBNkIsRUFDN0IsWUFBcUIsRUFDckIsV0FBbUMsRUFDbkMsZ0JBQTBCLEVBQzFCLFNBQWdDLEVBQ2hDLGNBQXlDLEVBQ3pDLE9BQWdCLEVBQ2hCLFdBQW9CLEVBQ3BCLFFBQWlCLEVBQ2pCLFNBQWtCLEVBQ2xCLE9BQWdCLEVBQ2hCLGtCQUFpRCxFQUNqRCxxQkFBK0IsRUFDL0IsZUFBeUIsRUFDekIsdUJBQWlDLEVBQ2pDLHFCQUE4QixFQUM5QixpQkFBMEIsRUFDMUIsVUFBcUIsRUFDckIsU0FBOEIsRUFDOUIsTUFBeUIsRUFDekIsTUFBZSxFQUNmLFlBQXFDLEVBQ3JDLFVBQWlDLEVBQ2pDLE9BQWdCLEVBQ2hCLGdCQUEwQixFQUMxQixXQUFvQixFQUNwQixXQUFxQixFQUNyQixNQUFnQixFQUNoQixXQUFvQyxFQUNwQyxTQUE0QixFQUM1QixRQUFpQixFQUNqQixPQUFnQixFQUNoQixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsTUFBTSxLQUFLLEdBQUcsTUFBTSxpQkFBaUIsQ0FDbkMsTUFBTSxFQUNOLHNCQUFzQixFQUN0QixVQUFVLENBQ1gsQ0FBQztRQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7WUFDckMsT0FBTyxFQUFFLElBQUk7WUFDYixPQUFPLEVBQUU7Z0JBQ1AsYUFBYSxFQUFFLFVBQVUsS0FBSyxFQUFFO2FBQ2pDO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsSUFBSSxTQUFTLEdBQVE7WUFDbkIsVUFBVTtZQUNWLHFCQUFxQjtZQUNyQixPQUFPO1lBQ1AsWUFBWTtZQUNaLFdBQVc7WUFDWCxXQUFXLEVBQUUsRUFBRTtTQUNoQixDQUFDO1FBRUYsSUFBSSxXQUFXLEdBQVEsRUFBRSxDQUFDO1FBRTFCLElBQUksT0FBTyxJQUFJLFFBQVEsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3hDLE1BQU0sR0FBRyxHQUFHO2dCQUNWLElBQUksRUFBRSxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7cUJBQ2xDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO3FCQUNsQixNQUFNLENBQUMsWUFBWSxDQUFDO2dCQUN2QixRQUFRLEVBQUUsUUFBUTthQUNuQixDQUFDO1lBQ0YsV0FBVyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDeEIsQ0FBQztRQUVELElBQUksV0FBVyxJQUFJLFFBQVEsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3hDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsT0FBTyxFQUNQLFdBQVcsRUFDWCxRQUFRLEVBQ1IsdUNBQXVDLENBQ3hDLENBQUM7WUFDRixNQUFNLEdBQUcsR0FBRztnQkFDVixRQUFRLEVBQUUsV0FBVztnQkFDckIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLFdBQVcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBRXRCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsT0FBTyxFQUNQLEdBQUcsQ0FBQyxRQUFRLEVBQ1osR0FBRyxDQUFDLFFBQVEsRUFDWix1Q0FBdUMsQ0FDeEMsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFJLFNBQVMsSUFBSSxRQUFRLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRztnQkFDWixJQUFJLEVBQUUsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNwQyxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztxQkFDbEIsTUFBTSxDQUFDLFlBQVksQ0FBQztnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLFdBQVcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQzVCLENBQUM7UUFFRCxJQUFJLGFBQWEsSUFBSSxRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM1QyxPQUFPLENBQUMsR0FBRyxDQUNULE9BQU8sRUFDUCxhQUFhLEVBQ2IsUUFBUSxFQUNSLHlDQUF5QyxDQUMxQyxDQUFDO1lBQ0YsTUFBTSxLQUFLLEdBQUc7Z0JBQ1osUUFBUSxFQUFFLGFBQWE7Z0JBQ3ZCLFFBQVEsRUFBRSxRQUFRO2FBQ25CLENBQUM7WUFDRixXQUFXLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUUxQixPQUFPLENBQUMsR0FBRyxDQUNULE9BQU8sRUFDUCxLQUFLLENBQUMsUUFBUSxFQUNkLEtBQUssQ0FBQyxRQUFRLEVBQ2QseUNBQXlDLENBQzFDLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxpQkFBaUIsSUFBSSxRQUFRLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1lBQzVELE1BQU0saUJBQWlCLEdBQUc7Z0JBQ3hCLElBQUksRUFBRSxLQUFLLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztxQkFDeEMsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7cUJBQ2xCLE1BQU0sQ0FBQyxZQUFZLENBQUM7Z0JBQ3ZCLFFBQVEsRUFBRSxRQUFRO2FBQ25CLENBQUM7WUFDRixXQUFXLENBQUMsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUM7UUFDcEQsQ0FBQztRQUVELElBQUkscUJBQXFCLElBQUksUUFBUSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUM1RCxNQUFNLGlCQUFpQixHQUFHO2dCQUN4QixRQUFRLEVBQUUscUJBQXFCO2dCQUMvQixRQUFRLEVBQUUsUUFBUTthQUNuQixDQUFDO1lBQ0YsV0FBVyxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO1FBQ3BELENBQUM7UUFFRCxJQUFJLGdCQUFnQixFQUFFLENBQUM7WUFDckIsV0FBVyxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDO1FBQ2xELENBQUM7UUFFRCxJQUFJLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDO1lBQzFCLFdBQVcsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQ3BDLENBQUM7UUFFRCxJQUFJLGNBQWMsRUFBRSxhQUFhLEVBQUUsQ0FBQztZQUNsQyxXQUFXLENBQUMsY0FBYyxHQUFHO2dCQUMzQixhQUFhLEVBQUU7b0JBQ2IscUJBQXFCLEVBQUU7d0JBQ3JCLElBQUksRUFBRSxjQUFjLENBQUMsSUFBSTtxQkFDMUI7b0JBQ0QsU0FBUyxFQUFFLGNBQWMsRUFBRSxTQUFTLElBQUksSUFBSSxFQUFFO2lCQUMvQzthQUNGLENBQUM7UUFDSixDQUFDO2FBQU0sSUFBSSxjQUFjLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1QyxXQUFXLENBQUMsY0FBYyxHQUFHO2dCQUMzQixrQkFBa0IsRUFBRTtvQkFDbEIsT0FBTyxFQUFFLGNBQWMsRUFBRSxPQUFPO29CQUNoQyxHQUFHLEVBQUU7d0JBQ0gsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJO3FCQUMzQjtvQkFDRCxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUk7aUJBQzNCO2dCQUNELFdBQVcsRUFBRSxjQUFjLEVBQUUsV0FBVzthQUN6QyxDQUFDO1FBQ0osQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUM1QixXQUFXLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUN4QyxDQUFDO1FBRUQsSUFBSSxrQkFBa0IsRUFBRSxPQUFPLElBQUksa0JBQWtCLEVBQUUsTUFBTSxFQUFFLENBQUM7WUFDOUQsV0FBVyxDQUFDLGtCQUFrQixHQUFHLGtCQUFrQixDQUFDO1FBQ3RELENBQUM7UUFFRCxJQUFJLHFCQUFxQixFQUFFLENBQUM7WUFDMUIsV0FBVyxDQUFDLHFCQUFxQixHQUFHLHFCQUFxQixDQUFDO1FBQzVELENBQUM7UUFFRCxJQUFJLGVBQWUsRUFBRSxDQUFDO1lBQ3BCLFdBQVcsQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO1FBQ2hELENBQUM7UUFFRCxJQUFJLHVCQUF1QixFQUFFLENBQUM7WUFDNUIsV0FBVyxDQUFDLHVCQUF1QixHQUFHLHVCQUF1QixDQUFDO1FBQ2hFLENBQUM7UUFFRCxJQUFJLE1BQU0sRUFBRSxDQUFDO1lBQ1gsV0FBVyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDOUIsQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLENBQUM7WUFDaEIsV0FBVyxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDeEMsQ0FBQztRQUVELElBQUksVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNwQixXQUFXLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUN0QyxDQUFDO1FBRUQsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLFdBQVcsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQ3BDLENBQUM7UUFFRCxJQUFJLE1BQU0sRUFBRSxLQUFLLElBQUksTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBQ2pDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQzlCLENBQUM7UUFFRCxJQUFJLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDO1lBQzdCLFdBQVcsQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQ3hDLENBQUM7UUFFRCxJQUFJLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDMUIsV0FBVyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDcEMsQ0FBQztRQUVELElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxXQUFXLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUM5QixDQUFDO1FBRUQsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUNqQixXQUFXLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUMxQyxDQUFDO1FBRUQsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNmLFdBQVcsQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQ3RDLENBQUM7UUFFRCxJQUFJLE9BQU8sRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDeEIsV0FBVyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDaEMsQ0FBQztRQUVELElBQUksZ0JBQWdCLEVBQUUsQ0FBQztZQUNyQixXQUFXLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7UUFDbEQsQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUM1QixXQUFXLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUN4QyxDQUFDO1FBRUQsSUFBSSxPQUFPLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3hCLFdBQVcsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ2hDLENBQUM7UUFFRCxJQUFJLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDekIsV0FBVyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDbEMsQ0FBQztRQUVELElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixXQUFXLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUNoQyxDQUFDO1FBRUQsU0FBUyxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDcEMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxPQUFPLEVBQ1AsV0FBVyxFQUNYLCtDQUErQyxDQUNoRCxDQUFDO1FBQ0YsTUFBTSxHQUFHLEdBQUcsTUFBTSxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN6RCxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLHlDQUF5QyxDQUFDLENBQUM7SUFDNUUsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSwrQkFBK0IsQ0FBQyxDQUFDO0lBQ2xELENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx1QkFBdUIsR0FBRyxLQUFLLEVBQzFDLE1BQWMsRUFDZCxVQUFrQixFQUNsQixVQUFvRCxFQUNwRCxPQUFlLEVBQ2YsV0FBb0IsRUFDcEIsYUFBc0IsRUFDdEIscUJBQTZCLEVBQzdCLFlBQXFCLEVBQ3JCLFdBQW1DLEVBQ25DLGdCQUEwQixFQUMxQixTQUFnQyxFQUNoQyxjQUF5QyxFQUN6QyxPQUFnQixFQUNoQixXQUFvQixFQUNwQixRQUFpQixFQUNqQixTQUFrQixFQUNsQixPQUFnQixFQUNoQixrQkFBaUQsRUFDakQscUJBQStCLEVBQy9CLGVBQXlCLEVBQ3pCLHVCQUFpQyxFQUNqQyxxQkFBOEIsRUFDOUIsaUJBQTBCLEVBQzFCLFVBQXFCLEVBQ3JCLFNBQThCLEVBQzlCLE1BQXlCLEVBQ3pCLE1BQWUsRUFDZixZQUFxQyxFQUNyQyxVQUFpQyxFQUNqQyxPQUFnQixFQUNoQixnQkFBMEIsRUFDMUIsV0FBb0IsRUFDcEIsV0FBcUIsRUFDckIsTUFBZ0IsRUFDaEIsV0FBb0MsRUFDcEMsU0FBNEIsRUFDNUIsUUFBaUIsRUFDakIsT0FBZ0IsRUFDaEIsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILE1BQU0sS0FBSyxHQUFHLE1BQU0saUJBQWlCLENBQ25DLE1BQU0sRUFDTixzQkFBc0IsRUFDdEIsVUFBVSxDQUNYLENBQUM7UUFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1lBQ3JDLE9BQU8sRUFBRSxJQUFJO1lBQ2IsT0FBTyxFQUFFO2dCQUNQLGFBQWEsRUFBRSxVQUFVLEtBQUssRUFBRTthQUNqQztTQUNGLENBQUMsQ0FBQztRQUVILElBQUksSUFBSSxHQUFRLEVBQUUsQ0FBQztRQUVuQixJQUFJLFdBQVcsSUFBSSxRQUFRLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN4QyxNQUFNLEdBQUcsR0FBRztnQkFDVixRQUFRLEVBQUUsV0FBVztnQkFDckIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLENBQUM7UUFFRCxJQUFJLE9BQU8sSUFBSSxRQUFRLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN4QyxNQUFNLEdBQUcsR0FBRztnQkFDVixJQUFJLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUM5QixFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztxQkFDbEIsTUFBTSxDQUFDLFlBQVksQ0FBQztnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLENBQUM7UUFFRCxJQUFJLFNBQVMsSUFBSSxRQUFRLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRztnQkFDWixJQUFJLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNoQyxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztxQkFDbEIsTUFBTSxDQUFDLFlBQVksQ0FBQztnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLENBQUM7UUFFRCxJQUFJLGFBQWEsSUFBSSxRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRztnQkFDWixRQUFRLEVBQUUsYUFBYTtnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLENBQUM7UUFFRCxJQUFJLGlCQUFpQixJQUFJLFFBQVEsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFDNUQsTUFBTSxpQkFBaUIsR0FBRztnQkFDeEIsSUFBSSxFQUFFLGlCQUFpQjtnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUM3QyxDQUFDO1FBRUQsSUFBSSxxQkFBcUIsSUFBSSxRQUFRLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQzVELE1BQU0saUJBQWlCLEdBQUc7Z0JBQ3hCLFFBQVEsRUFBRSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRTtnQkFDbEUsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUM3QyxDQUFDO1FBRUQsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLGdCQUFnQixFQUFFLENBQUM7UUFDdkMsQ0FBQztRQUVELElBQUksU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUM7WUFDMUIsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUM7UUFDaEMsQ0FBQztRQUVELElBQUksY0FBYyxFQUFFLGFBQWEsRUFBRSxDQUFDO1lBQ2xDLElBQUksR0FBRztnQkFDTCxHQUFHLElBQUk7Z0JBQ1AsY0FBYyxFQUFFO29CQUNkLGFBQWEsRUFBRTt3QkFDYixxQkFBcUIsRUFBRTs0QkFDckIsSUFBSSxFQUFFLGNBQWMsQ0FBQyxJQUFJO3lCQUMxQjt3QkFDRCxTQUFTLEVBQUUsY0FBYyxFQUFFLFNBQVMsSUFBSSxJQUFJLEVBQUU7cUJBQy9DO2lCQUNGO2FBQ0YsQ0FBQztRQUNKLENBQUM7YUFBTSxJQUFJLGNBQWMsRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzVDLElBQUksR0FBRztnQkFDTCxHQUFHLElBQUk7Z0JBQ1AsY0FBYyxFQUFFO29CQUNkLGtCQUFrQixFQUFFO3dCQUNsQixPQUFPLEVBQUUsY0FBYyxFQUFFLE9BQU87d0JBQ2hDLEdBQUcsRUFBRTs0QkFDSCxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUk7eUJBQzNCO3dCQUNELElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSTtxQkFDM0I7b0JBQ0QsV0FBVyxFQUFFLGNBQWMsRUFBRSxXQUFXO2lCQUN6QzthQUNGLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxXQUFXLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzVCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDO1FBQ2xDLENBQUM7UUFFRCxJQUFJLGtCQUFrQixFQUFFLE9BQU8sSUFBSSxrQkFBa0IsRUFBRSxNQUFNLEVBQUUsQ0FBQztZQUM5RCxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxrQkFBa0IsRUFBRSxDQUFDO1FBQ3pDLENBQUM7UUFFRCxJQUFJLHFCQUFxQixFQUFFLENBQUM7WUFDMUIsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUscUJBQXFCLEVBQUUsQ0FBQztRQUM1QyxDQUFDO1FBRUQsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUNwQixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxlQUFlLEVBQUUsQ0FBQztRQUN0QyxDQUFDO1FBRUQsSUFBSSx1QkFBdUIsRUFBRSxDQUFDO1lBQzVCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLHVCQUF1QixFQUFFLENBQUM7UUFDOUMsQ0FBQztRQUVELElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQztRQUM3QixDQUFDO1FBRUQsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUNoQixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQztRQUNsQyxDQUFDO1FBRUQsSUFBSSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3BCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDO1FBQ2pDLENBQUM7UUFFRCxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ2QsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUM7UUFDaEMsQ0FBQztRQUVELElBQUksTUFBTSxFQUFFLEtBQUssSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7WUFDakMsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDN0IsQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUM7WUFDN0IsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUM7UUFDbEMsQ0FBQztRQUVELElBQUksU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUMxQixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxTQUFTLEVBQUUsQ0FBQztRQUNoQyxDQUFDO1FBRUQsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUNYLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRCxJQUFJLFlBQVksRUFBRSxDQUFDO1lBQ2pCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDO1FBQ25DLENBQUM7UUFFRCxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUM7UUFDakMsQ0FBQztRQUVELElBQUksT0FBTyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN4QixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQztRQUM5QixDQUFDO1FBRUQsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLGdCQUFnQixFQUFFLENBQUM7UUFDdkMsQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUM1QixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQztRQUNsQyxDQUFDO1FBRUQsSUFBSSxPQUFPLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3hCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDO1FBQzlCLENBQUM7UUFFRCxJQUFJLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDekIsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUM7UUFDL0IsQ0FBQztRQUVELElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixDQUFDO1FBRUQsSUFBSSxDQUFDLEVBQUUsR0FBRyxPQUFPLENBQUM7UUFFbEIsTUFBTSxHQUFHLEdBQUcsTUFBTSxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUM3QyxVQUFVO1lBQ1YscUJBQXFCO1lBQ3JCLFlBQVk7WUFDWixXQUFXO1lBRVgsV0FBVyxFQUFFLElBQUk7U0FDbEIsQ0FBQyxDQUFDO1FBRUgsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLHlDQUF5QyxDQUFDLENBQUM7SUFDcEUsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSx3Q0FBd0MsQ0FBQyxDQUFDO0lBQzNELENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBRyxLQUFLLEVBQ3BDLE1BQWMsRUFDZCxVQUFrQixFQUNsQixVQUFvRCxFQUNwRCxXQUFvQixFQUNwQixXQUFvQixFQUNwQixhQUFzQixFQUN0QixxQkFBNkIsRUFDN0IsWUFBcUIsRUFDckIsV0FBbUMsRUFDbkMsZ0JBQTBCLEVBQzFCLFNBQWdDLEVBQ2hDLGNBQXlDLEVBQ3pDLE9BQWdCLEVBQ2hCLFdBQW9CLEVBQ3BCLFFBQWlCLEVBQ2pCLFNBQWtCLEVBQ2xCLE9BQWdCLEVBQ2hCLGtCQUFpRCxFQUNqRCxxQkFBK0IsRUFDL0IsZUFBeUIsRUFDekIsdUJBQWlDLEVBQ2pDLHFCQUE4QixFQUM5QixpQkFBMEIsRUFDMUIsVUFBcUIsRUFDckIsU0FBOEIsRUFDOUIsTUFBeUIsRUFDekIsTUFBZSxFQUNmLFlBQXFDLEVBQ3JDLFVBQWlDLEVBQ2pDLE9BQWdCLEVBQ2hCLGdCQUEwQixFQUMxQixXQUFvQixFQUNwQixXQUFxQixFQUNyQixNQUFnQixFQUNoQixXQUFvQyxFQUNwQyxTQUE0QixFQUM1QixRQUFpQixFQUNqQixPQUFnQixFQUNoQixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FDVCxXQUFXLEVBQ1gscUJBQXFCLEVBQ3JCLGNBQWMsRUFDZCw4RUFBOEUsQ0FDL0UsQ0FBQztRQUNGLE1BQU0sS0FBSyxHQUFHLE1BQU0saUJBQWlCLENBQ25DLE1BQU0sRUFDTixzQkFBc0IsRUFDdEIsVUFBVSxDQUNYLENBQUM7UUFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1lBQ3JDLE9BQU8sRUFBRSxJQUFJO1lBQ2IsT0FBTyxFQUFFO2dCQUNQLGFBQWEsRUFBRSxVQUFVLEtBQUssRUFBRTthQUNqQztTQUNGLENBQUMsQ0FBQztRQUVILElBQUksSUFBSSxHQUFRLEVBQUUsQ0FBQztRQUVuQixJQUFJLFdBQVcsSUFBSSxRQUFRLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN4QyxNQUFNLEdBQUcsR0FBRztnQkFDVixRQUFRLEVBQUUsV0FBVztnQkFDckIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLENBQUM7UUFFRCxJQUFJLE9BQU8sSUFBSSxRQUFRLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN4QyxNQUFNLEdBQUcsR0FBRztnQkFDVixJQUFJLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUM5QixFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztxQkFDbEIsTUFBTSxDQUFDLFlBQVksQ0FBQztnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLENBQUM7UUFFRCxJQUFJLFNBQVMsSUFBSSxRQUFRLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRztnQkFDWixJQUFJLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNoQyxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztxQkFDbEIsTUFBTSxDQUFDLFlBQVksQ0FBQztnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLENBQUM7UUFFRCxJQUFJLGFBQWEsSUFBSSxRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRztnQkFDWixRQUFRLEVBQUUsYUFBYTtnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLENBQUM7UUFFRCxJQUFJLGlCQUFpQixJQUFJLFFBQVEsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFDNUQsTUFBTSxpQkFBaUIsR0FBRztnQkFDeEIsSUFBSSxFQUFFLGlCQUFpQjtnQkFDdkIsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUM3QyxDQUFDO1FBRUQsSUFBSSxxQkFBcUIsSUFBSSxRQUFRLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQzVELE1BQU0saUJBQWlCLEdBQUc7Z0JBQ3hCLFFBQVEsRUFBRSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRTtnQkFDbEUsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQztZQUNGLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUM3QyxDQUFDO1FBRUQsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLGdCQUFnQixFQUFFLENBQUM7UUFDdkMsQ0FBQztRQUVELElBQUksU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUM7WUFDMUIsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUM7UUFDaEMsQ0FBQztRQUVELElBQUksY0FBYyxFQUFFLGFBQWEsRUFBRSxDQUFDO1lBQ2xDLElBQUksR0FBRztnQkFDTCxHQUFHLElBQUk7Z0JBQ1AsY0FBYyxFQUFFO29CQUNkLGFBQWEsRUFBRTt3QkFDYixxQkFBcUIsRUFBRTs0QkFDckIsSUFBSSxFQUFFLGNBQWMsQ0FBQyxJQUFJO3lCQUMxQjt3QkFDRCxTQUFTLEVBQUUsY0FBYyxFQUFFLFNBQVMsSUFBSSxJQUFJLEVBQUU7cUJBQy9DO2lCQUNGO2FBQ0YsQ0FBQztRQUNKLENBQUM7YUFBTSxJQUFJLGNBQWMsRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzVDLElBQUksR0FBRztnQkFDTCxHQUFHLElBQUk7Z0JBQ1AsY0FBYyxFQUFFO29CQUNkLGtCQUFrQixFQUFFO3dCQUNsQixPQUFPLEVBQUUsY0FBYyxFQUFFLE9BQU87d0JBQ2hDLEdBQUcsRUFBRTs0QkFDSCxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUk7eUJBQzNCO3dCQUNELElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSTtxQkFDM0I7b0JBQ0QsV0FBVyxFQUFFLGNBQWMsRUFBRSxXQUFXO2lCQUN6QzthQUNGLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxXQUFXLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzVCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDO1FBQ2xDLENBQUM7UUFFRCxJQUFJLGtCQUFrQixFQUFFLE9BQU8sSUFBSSxrQkFBa0IsRUFBRSxNQUFNLEVBQUUsQ0FBQztZQUM5RCxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxrQkFBa0IsRUFBRSxDQUFDO1FBQ3pDLENBQUM7UUFFRCxJQUFJLHFCQUFxQixFQUFFLENBQUM7WUFDMUIsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUscUJBQXFCLEVBQUUsQ0FBQztRQUM1QyxDQUFDO1FBRUQsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUNwQixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxlQUFlLEVBQUUsQ0FBQztRQUN0QyxDQUFDO1FBRUQsSUFBSSx1QkFBdUIsRUFBRSxDQUFDO1lBQzVCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLHVCQUF1QixFQUFFLENBQUM7UUFDOUMsQ0FBQztRQUVELElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQztRQUM3QixDQUFDO1FBRUQsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUNoQixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQztRQUNsQyxDQUFDO1FBRUQsSUFBSSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3BCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDO1FBQ2pDLENBQUM7UUFFRCxJQUFJLFNBQVMsRUFBRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsSUFBSSxTQUFTLEVBQUUsVUFBVSxFQUFFLENBQUM7WUFDOUQsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUM7UUFDaEMsQ0FBQztRQUVELElBQUksTUFBTSxFQUFFLEtBQUssSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7WUFDakMsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDN0IsQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUM7WUFDN0IsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUM7UUFDbEMsQ0FBQztRQUVELElBQUksU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUMxQixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxTQUFTLEVBQUUsQ0FBQztRQUNoQyxDQUFDO1FBRUQsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUNYLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRCxJQUFJLFlBQVksRUFBRSxDQUFDO1lBQ2pCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDO1FBQ25DLENBQUM7UUFFRCxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUM7UUFDakMsQ0FBQztRQUVELElBQUksT0FBTyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN4QixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQztRQUM5QixDQUFDO1FBRUQsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLGdCQUFnQixFQUFFLENBQUM7UUFDdkMsQ0FBQztRQUVELElBQUksV0FBVyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUM1QixJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQztRQUNsQyxDQUFDO1FBRUQsSUFBSSxPQUFPLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3hCLElBQUksR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDO1FBQzlCLENBQUM7UUFFRCxJQUFJLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDekIsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUM7UUFDL0IsQ0FBQztRQUVELElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixDQUFDO1FBRUQsTUFBTSxHQUFHLEdBQUcsTUFBTSxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUM3QyxVQUFVO1lBQ1YscUJBQXFCO1lBQ3JCLFlBQVk7WUFDWixXQUFXO1lBRVgsV0FBVyxFQUFFLElBQUk7U0FDbEIsQ0FBQyxDQUFDO1FBRUgsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLG1DQUFtQyxDQUFDLENBQUM7UUFDNUQsT0FBTztZQUNMLEVBQUUsRUFBRSxHQUFHLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLFVBQVUsRUFBRTtZQUNwQyxhQUFhLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFO1lBQzVCLFdBQVc7WUFDWCxVQUFVO1lBQ1YsZ0JBQWdCLEVBQUUsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDNUMsQ0FBQztJQUNKLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztJQUN2QyxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sZ0NBQWdDLEdBQUcsS0FBSyxFQUNuRCxRQUF1QixFQUN2QixNQUFjLEVBQ2QsTUFBNEMsRUFDNUMsUUFBZ0IsRUFDaEIsY0FBdUIsRUFDdkIsVUFBb0QsRUFDcEQsWUFBNkIsRUFDN0IsU0FBdUMsRUFDdkMsVUFBMkIsRUFDc0IsRUFBRTtJQUNuRCxJQUFJLENBQUM7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxtREFBbUQsQ0FBQyxDQUFDO1FBQzNFLElBQUksTUFBTSxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQ3hCLElBQUksUUFBUSxLQUFLLHNCQUFzQixFQUFFLENBQUM7Z0JBQ3hDLE1BQU0sZUFBZSxHQUNuQixZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUM7b0JBQ3RCLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxZQUFZLENBQUM7b0JBQ3hDLENBQUMsQ0FBQyxTQUFTLENBQUM7Z0JBRWhCLE1BQU0sZ0JBQWdCLENBQ3BCLE1BQU0sRUFDTixRQUFRLENBQUMsVUFBVSxFQUNuQixRQUFRLENBQUMsT0FBTyxFQUNoQixVQUFVLEVBQ1YsUUFBUSxDQUFDLE9BQU8sRUFDaEIsUUFBUSxDQUFDLFNBQVMsRUFDbEIsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxRQUFRLENBQUMsUUFBUSxFQUNqQixTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxlQUFlLEVBQ2YsU0FBUyxFQUNULFNBQVMsRUFDVCxRQUFRLENBQUMsWUFBWSxFQUNyQixRQUFRLEVBQUUsVUFBVSxFQUNwQixTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFFBQVEsRUFBRSxPQUFPLENBQ2xCLENBQUM7Z0JBQ0YsT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ3JCLENBQUM7UUFDSCxDQUFDO2FBQU0sSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDL0IsT0FBTyxDQUFDLEdBQUcsQ0FDVCxRQUFRLEVBQ1IsaUVBQWlFLENBQ2xFLENBQUM7WUFDRixJQUFJLFFBQVEsS0FBSyxzQkFBc0IsRUFBRSxDQUFDO2dCQUN4QyxNQUFNLGVBQWUsR0FDbkIsWUFBWSxFQUFFLE1BQU0sR0FBRyxDQUFDO29CQUN0QixDQUFDLENBQUMsd0JBQXdCLENBQUMsWUFBWSxDQUFDO29CQUN4QyxDQUFDLENBQUMsU0FBUyxDQUFDO2dCQUVoQixNQUFNLGNBQWMsR0FDbEIsTUFBTSxpQkFBaUIsQ0FDckIsTUFBTSxFQUNOLFFBQVEsQ0FBQyxVQUFVLEVBQ25CLFVBQVUsRUFDVixRQUFRLEVBQUUsRUFBRSxFQUNaLFFBQVEsRUFBRSxPQUFPLEVBQ2pCLFFBQVEsRUFBRSxTQUFTLEVBQ25CLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUN0QixTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUNyQixLQUFLLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUU7b0JBQzlCLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDVCxXQUFXLEVBQUUsQ0FBQyxFQUFFLElBQUk7aUJBQ3JCLENBQUMsQ0FBQyxFQUNILFVBQVUsRUFBRSxFQUFFO29CQUNaLENBQUMsQ0FBQzt3QkFDRSxJQUFJLEVBQUUsVUFBVSxFQUFFLEdBQUcsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsY0FBYzt3QkFDM0QsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJO3dCQUN0QixZQUFZLEVBQUUsVUFBVSxFQUFFLEVBQUU7d0JBQzVCLFdBQVcsRUFBRSxVQUFVLEVBQUUsV0FBVzt3QkFDcEMsYUFBYSxFQUNYLFVBQVUsRUFBRSxHQUFHLEtBQUssUUFBUTs0QkFDMUIsQ0FBQyxDQUFDO2dDQUNFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUztnQ0FDaEMscUJBQXFCLEVBQUU7b0NBQ3JCLElBQUksRUFBRSxjQUFjO2lDQUNyQjs2QkFDRjs0QkFDSCxDQUFDLENBQUMsU0FBUztxQkFDaEI7b0JBQ0gsQ0FBQyxDQUFDLFNBQVMsRUFDYixRQUFRLENBQUMsT0FBTyxJQUFJLFFBQVEsRUFBRSxLQUFLLEVBQ25DLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsUUFBUSxDQUFDLFFBQVEsRUFDakIsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxRQUFRLEVBQUUsVUFBVSxFQUNwQixlQUFlLEVBQ2YsU0FBUyxFQUNULFNBQVMsRUFDVCxRQUFRLENBQUMsWUFBWSxFQUNyQixTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsY0FBYyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDeEMsU0FBUyxFQUNULFFBQVEsRUFBRSxPQUFPLENBQ2xCLENBQUM7Z0JBQ0osT0FBTyxDQUFDLEdBQUcsQ0FDVCxjQUFjLEVBQ2QsUUFBUSxFQUFFLE9BQU8sRUFDakIsUUFBUSxFQUFFLFNBQVMsRUFDbkIsMERBQTBELENBQzNELENBQUM7Z0JBQ0YsT0FBTyxjQUFjLENBQUM7WUFDeEIsQ0FBQztRQUNILENBQUM7YUFBTSxJQUFJLE1BQU0sS0FBSyxjQUFjLEVBQUUsQ0FBQztZQUNyQyxPQUFPLENBQUMsR0FBRyxDQUNULFFBQVEsRUFDUix1RUFBdUUsQ0FDeEUsQ0FBQztZQUNGLElBQUksUUFBUSxLQUFLLHNCQUFzQixFQUFFLENBQUM7Z0JBQ3hDLE1BQU0sZUFBZSxHQUNuQixZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUM7b0JBQ3RCLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxZQUFZLENBQUM7b0JBQ3hDLENBQUMsQ0FBQyxTQUFTLENBQUM7Z0JBRWhCLE1BQU0sdUJBQXVCLENBQzNCLE1BQU0sRUFDTixRQUFRLENBQUMsVUFBVSxFQUNuQixVQUFVLEVBQ1YsUUFBUSxFQUFFLE9BQU8sRUFDakIsUUFBUSxFQUFFLE9BQU8sRUFDakIsUUFBUSxFQUFFLFNBQVMsRUFDbkIsVUFBVSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3RCLFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3JCLEtBQUssRUFBRSxDQUFDLEVBQUUsWUFBWTtvQkFDdEIsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUNULFdBQVcsRUFBRSxDQUFDLEVBQUUsSUFBSTtpQkFDckIsQ0FBQyxDQUFDLEVBQ0gsVUFBVSxFQUFFLEVBQUU7b0JBQ1osQ0FBQyxDQUFDO3dCQUNFLElBQUksRUFBRSxVQUFVLEVBQUUsR0FBRyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxjQUFjO3dCQUMzRCxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUk7d0JBQ3RCLFlBQVksRUFBRSxVQUFVLEVBQUUsRUFBRTt3QkFDNUIsV0FBVyxFQUFFLFVBQVUsRUFBRSxXQUFXO3FCQUNyQztvQkFDSCxDQUFDLENBQUMsU0FBUyxFQUNiLFFBQVEsQ0FBQyxPQUFPLElBQUksUUFBUSxFQUFFLEtBQUssRUFDbkMsUUFBUSxDQUFDLEtBQUssRUFDZCxRQUFRLENBQUMsUUFBUSxFQUNqQixTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFFBQVEsRUFBRSxVQUFVLEVBQ3BCLGVBQWUsRUFDZixTQUFTLEVBQ1QsU0FBUyxFQUNULFFBQVEsQ0FBQyxZQUFZLEVBQ3JCLFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxjQUFjLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxTQUFTLEVBQ1QsUUFBUSxFQUFFLE9BQU8sQ0FDbEIsQ0FBQztZQUNKLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxFQUFFLEVBQUUsRUFDWixRQUFRLEVBQUUsT0FBTyxFQUNqQixRQUFRLEVBQUUsU0FBUyxFQUNuQixnRUFBZ0UsQ0FDakUsQ0FBQztJQUNKLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx1QkFBdUIsR0FBRyxLQUFLLEVBQUUsTUFBbUIsRUFBRSxFQUFFO0lBQ25FLElBQUksQ0FBQztRQUNILE1BQU0sYUFBYSxHQUFHLGFBQWEsQ0FBQztRQUNwQyxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1NBMkhULENBQUM7UUFDTixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLHVDQUF1QyxDQUFDLENBQy9ELENBQUM7UUFDRixNQUFNLFNBQVMsR0FBRztZQUNoQixNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDO1NBQy9CLENBQUM7UUFFRixNQUFNLFFBQVEsR0FJVixNQUFNLEdBQUc7YUFDVixJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLE9BQU8sRUFBRTtnQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7Z0JBQzFDLGVBQWUsRUFBRSxPQUFPO2FBQ3pCO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTO2FBQ1Y7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFDVixPQUFPLENBQUMsR0FBRyxDQUNULFFBQVEsRUFDUixRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQzNDLGtDQUFrQyxDQUNuQyxDQUFDO1FBQ0YsUUFBUSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDZDQUE2QyxDQUFDLENBQzlELENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHlCQUF5QixDQUFDLENBQUM7SUFDNUMsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHVCQUF1QixHQUFHLEtBQUssRUFBRSxTQUF5QixFQUFFLEVBQUU7SUFDekUsSUFBSSxDQUFDO1FBQ0gsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUMxRCxPQUFPO1FBQ1QsQ0FBQztRQUVELE1BQU0sYUFBYSxHQUFHLHlCQUF5QixDQUFDO1FBQ2hELE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7U0F3QlQsQ0FBQztRQUNOLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLFNBQVM7U0FDVixDQUFDO1FBRUYsTUFBTSxRQUFRLEdBSVYsTUFBTSxHQUFHO2FBQ1YsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNwQixPQUFPLEVBQUU7Z0JBQ1AsdUJBQXVCLEVBQUUsaUJBQWlCO2dCQUMxQyxlQUFlLEVBQUUsT0FBTzthQUN6QjtZQUNELElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUzthQUNWO1NBQ0YsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBRVYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxRQUFRLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQzFDLHNDQUFzQyxDQUN2QyxDQUFDO1FBQ0YsUUFBUSxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3ZELE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDhCQUE4QixDQUFDLENBQy9DLENBQUM7SUFDSixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDJDQUEyQyxDQUFDLENBQUM7SUFDOUQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHNCQUFzQixHQUFHLEtBQUssRUFDekMsUUFBa0IsRUFDbEIsTUFBYyxFQUNkLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDaEQsT0FBTztRQUNULENBQUM7UUFDRCxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUseUNBQXlDLENBQUMsQ0FDMUQsQ0FBQztRQUNGLE1BQU0sYUFBYSxHQUFHLDZCQUE2QixDQUFDO1FBQ3BELE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBeUJiLENBQUM7UUFFRixNQUFNLFNBQVMsR0FBRztZQUNoQixNQUFNO1lBQ04sUUFBUTtTQUNULENBQUM7UUFFRixNQUFNLFFBQVEsR0FBRyxNQUFNLEdBQUc7YUFDdkIsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNwQixPQUFPLEVBQUU7Z0JBQ1AsdUJBQXVCLEVBQUUsaUJBQWlCO2dCQUMxQyxlQUFlLEVBQUUsT0FBTzthQUN6QjtZQUNELElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUzthQUNWO1NBQ0YsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsNkNBQTZDLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHlCQUF5QixDQUFDLENBQUM7SUFDNUMsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHNCQUFzQixHQUFHLEtBQUssRUFDekMsUUFBa0IsRUFDbEIsTUFBYyxFQUNkLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDaEQsT0FBTztRQUNULENBQUM7UUFDRCxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUseUNBQXlDLENBQUMsQ0FDMUQsQ0FBQztRQUNGLE1BQU0sYUFBYSxHQUFHLHdCQUF3QixDQUFDO1FBQy9DLE1BQU0sS0FBSyxHQUFHOzs7Ozs7S0FNYixDQUFDO1FBRUYsTUFBTSxTQUFTLEdBQUc7WUFDaEIsTUFBTTtZQUNOLFFBQVE7U0FDVCxDQUFDO1FBRUYsTUFBTSxRQUFRLEdBQUcsTUFBTSxHQUFHO2FBQ3ZCLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVM7YUFDVjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLDZDQUE2QyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO0lBQzVDLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsS0FBSyxFQUFFLFNBQWlDLEVBQUUsRUFBRTtJQUN6RSxJQUFJLENBQUM7UUFDSCxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzFELE9BQU87UUFDVCxDQUFDO1FBRUQsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGtDQUFrQyxDQUFDLENBQ25ELENBQUM7UUFFRixNQUFNLGFBQWEsR0FBRyxnQkFBZ0IsQ0FBQztRQUN2QyxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQW1CVCxDQUFDO1FBQ04sTUFBTSxTQUFTLEdBQUc7WUFDaEIsU0FBUztTQUNWLENBQUM7UUFFRixNQUFNLFFBQVEsR0FFVixNQUFNLEdBQUc7YUFDVixJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLE9BQU8sRUFBRTtnQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7Z0JBQzFDLGVBQWUsRUFBRSxPQUFPO2FBQ3pCO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTO2FBQ1Y7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLENBQUMsR0FBRyxDQUNULFFBQVEsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFDMUMsc0NBQXNDLENBQ3ZDLENBQUM7UUFDRixRQUFRLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDdkQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsNkJBQTZCLENBQUMsQ0FDOUMsQ0FBQztJQUNKLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCLENBQUMsQ0FBQztJQUMvQyxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0NBQWtDLEdBQUcsS0FBSyxFQUNyRCxRQUFrQixFQUNsQixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsTUFBTSxhQUFhLEdBQUcsc0NBQXNDLENBQUM7UUFDN0QsTUFBTSxLQUFLLEdBQUc7Ozs7O1NBS1QsQ0FBQztRQUVOLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLFFBQVE7U0FDVCxDQUFDO1FBRUYsTUFBTSxHQUFHLEdBRUwsTUFBTSxHQUFHO2FBQ1YsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNwQixPQUFPLEVBQUU7Z0JBQ1AsdUJBQXVCLEVBQUUsaUJBQWlCO2dCQUMxQyxlQUFlLEVBQUUsT0FBTzthQUN6QjtZQUNELElBQUksRUFBRTtnQkFDSixhQUFhO2dCQUNiLEtBQUs7Z0JBQ0wsU0FBUzthQUNWO1NBQ0YsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBRVYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxHQUFHLEVBQUUsSUFBSSxFQUFFLHlCQUF5QixFQUFFLGFBQWEsRUFDbkQsc0VBQXNFLENBQ3ZFLENBQUM7SUFDSixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHlDQUF5QyxDQUFDLENBQUM7SUFDNUQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUNGLE1BQU0sQ0FBQyxNQUFNLGlDQUFpQyxHQUFHLEtBQUssRUFBRSxPQUFlLEVBQUUsRUFBRTtJQUN6RSxJQUFJLENBQUM7UUFDSCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDYixPQUFPLENBQUMsR0FBRyxDQUNULE9BQU8sRUFDUCxzREFBc0QsQ0FDdkQsQ0FBQztZQUNGLE9BQU87UUFDVCxDQUFDO1FBRUQsTUFBTSxhQUFhLEdBQUcscUNBQXFDLENBQUM7UUFDNUQsTUFBTSxLQUFLLEdBQUc7Ozs7OztLQU1iLENBQUM7UUFFRixNQUFNLFNBQVMsR0FBRztZQUNoQixPQUFPO1NBQ1IsQ0FBQztRQUVGLE1BQU0sR0FBRyxHQUVMLE1BQU0sR0FBRzthQUNWLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVM7YUFDVjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQ1QsR0FBRyxFQUFFLElBQUksRUFBRSx5QkFBeUIsRUFBRSxhQUFhLEVBQ25ELHNFQUFzRSxDQUN2RSxDQUFDO0lBQ0osQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSw4Q0FBOEMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSx5QkFBeUIsR0FBRyxLQUFLLEVBQzVDLG1CQUE2QyxFQUM3QyxFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FDVCxtQkFBbUIsRUFDbkIsdURBQXVELENBQ3hELENBQUM7UUFDRixJQUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN2QyxPQUFPLENBQUMsR0FBRyxDQUFDLHlEQUF5RCxDQUFDLENBQUM7WUFDdkUsT0FBTztRQUNULENBQUM7UUFFRCxNQUFNLGFBQWEsR0FBRywyQkFBMkIsQ0FBQztRQUNsRCxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7Ozs7OztLQWdCYixDQUFDO1FBRUYsTUFBTSxTQUFTLEdBQUc7WUFDaEIsbUJBQW1CO1NBQ3BCLENBQUM7UUFFRixNQUFNLFFBQVEsR0FPVixNQUFNLEdBQUc7YUFDVixJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLE9BQU8sRUFBRTtnQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7Z0JBQzFDLGVBQWUsRUFBRSxPQUFPO2FBQ3pCO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTO2FBQ1Y7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSw2Q0FBNkMsQ0FBQyxDQUFDO1FBQ3JFLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxFQUFFLElBQUksRUFDZCxtREFBbUQsQ0FDcEQsQ0FBQztRQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxFQUFFLElBQUksRUFBRSx5QkFBeUIsRUFBRSxhQUFhLEVBQ3hELGlEQUFpRCxDQUNsRCxDQUFDO1FBQ0YsUUFBUSxFQUFFLElBQUksRUFBRSx5QkFBeUIsRUFBRSxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FDL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsNkNBQTZDLENBQUMsQ0FDL0QsQ0FBQztJQUNKLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUseUNBQXlDLENBQUMsQ0FBQztJQUM1RCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0NBQWtDLEdBQUcsS0FBSyxFQUNyRCxhQUErQyxFQUMvQyxnQkFBa0QsRUFDbEQsU0FBMEIsRUFDMUIsU0FBMEIsRUFDMUIsWUFBb0IsRUFDcEIsZUFBd0MsRUFDeEMsZ0JBQTBDLEVBQzFDLE1BQXdCLEVBQ3hCLHlCQUFvRCxFQUNwRCxRQUFrQixFQUNsQiw2QkFBc0MsRUFDdEMsMEJBQW1DLEVBQ25DLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLDZCQUE2QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsTUFBTSxjQUFjLEdBQW9CLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM5RCx1Q0FBdUMsQ0FDckMsQ0FBQyxFQUNELFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUNyRCxZQUFZLENBQ2IsQ0FDRixDQUFDO1FBQ0YsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsQ0FBQyxFQUNELDJEQUEyRCxDQUM1RCxDQUNGLENBQUM7UUFFRixNQUFNLGlCQUFpQixHQUFHLFNBQVM7YUFDaEMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDVCxNQUFNLFVBQVUsR0FBRyx5QkFBeUIsRUFBRSxTQUFTLENBQ3JELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLENBQ3ZCLENBQUM7WUFDRixJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUNwQixPQUFPLElBQUksQ0FBQztZQUNkLENBQUM7WUFDRCxPQUFPLENBQUMsQ0FBQztRQUNYLENBQUMsQ0FBQztZQUNGLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFFOUIsTUFBTSxvQkFBb0IsR0FDeEIsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN6RCxNQUFNLDZCQUE2QixHQUFHLENBQUMsQ0FBQyxNQUFNLENBQzVDLGlCQUFpQixFQUNqQixXQUFXLENBQ1o7WUFDQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUM7WUFDL0IsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUU1QixPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLHVCQUF1QixDQUFDLENBQUM7UUFFM0QsT0FBTyxDQUFDLEdBQUcsQ0FDVCw2QkFBNkIsRUFDN0IsZ0NBQWdDLENBQ2pDLENBQUM7UUFFRixNQUFNLDBCQUEwQixHQU8xQixFQUFFLENBQUM7UUFFVCxJQUNFLDZCQUE2QjtZQUM3Qiw2QkFBNkIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUN6QyxDQUFDO1lBQ0QsTUFBTSxjQUFjLEdBQ2xCLENBQUMsTUFBTSxpQ0FBaUMsQ0FDdEMsNkJBQTZCLENBQzlCLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDWCxLQUFLLE1BQU0sYUFBYSxJQUFJLGNBQWMsRUFBRSxDQUFDO2dCQUMzQyxNQUFNLFNBQVMsR0FBRyxNQUFNLHdDQUF3QyxDQUM5RCxhQUFhLEVBQUUsRUFBRSxDQUNsQixDQUFDO2dCQUNGLE1BQU0saUJBQWlCLEdBQUcsU0FBUyxFQUFFLE1BQU0sQ0FDekMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLENBQzdCLENBQUM7Z0JBRUYsTUFBTSx5QkFBeUIsR0FBRyxvQkFBb0I7b0JBQ3BELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxLQUFLLGFBQWEsRUFBRSxFQUFFLENBQUM7b0JBQ25ELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLENBQUM7b0JBQ3BELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLFFBQVEsQ0FBQztvQkFDdkMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtvQkFDYixNQUFNLGFBQWEsR0FBRyxpQkFBaUIsRUFBRSxTQUFTLENBQ2hELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLENBQUMsRUFBRSxNQUFNLENBQy9CLENBQUM7b0JBQ0YsSUFBSSxhQUFhLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDdkIsT0FBTyxLQUFLLENBQUM7b0JBQ2YsQ0FBQztvQkFFRCxPQUFPLElBQUksQ0FBQztnQkFDZCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVWLE1BQU0seUJBQXlCLEdBQUcsb0JBQW9CO29CQUNwRCxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLFNBQVMsS0FBSyxhQUFhLEVBQUUsRUFBRSxDQUFDO29CQUNuRCxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxhQUFhLEVBQUUsTUFBTSxDQUFDO29CQUNwRCxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxRQUFRLENBQUM7b0JBQ3ZDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ2IsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLEVBQUUsU0FBUyxDQUNoRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUMvQixDQUFDO29CQUNGLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0JBQ3ZCLE9BQU8sS0FBSyxDQUFDO29CQUNmLENBQUM7b0JBRUQsT0FBTyxJQUFJLENBQUM7Z0JBQ2QsQ0FBQyxDQUFDLENBQUM7Z0JBRUwsT0FBTyxDQUFDLEdBQUcsQ0FDVCx5QkFBeUIsRUFDekIsMEVBQTBFLENBQzNFLENBQUM7Z0JBRUYsS0FBSyxNQUFNLHdCQUF3QixJQUFJLHlCQUF5QixFQUFFLENBQUM7b0JBQ2pFLHdCQUF3QixDQUFDLFNBQVMsR0FBRyxLQUFLLENBQ3hDLHlCQUF5QixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUNqRDt5QkFDRSxFQUFFLENBQUMseUJBQXlCLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzt5QkFDNUMsRUFBRSxDQUFDLHdCQUF3QixDQUFDLFFBQVEsQ0FBQzt5QkFDckMsTUFBTSxFQUFFLENBQUM7b0JBQ1osd0JBQXdCLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FDdEMseUJBQXlCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQy9DO3lCQUNFLEVBQUUsQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO3lCQUM1QyxFQUFFLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDO3lCQUNyQyxNQUFNLEVBQUUsQ0FBQztvQkFFWiwwQkFBMEIsQ0FBQyxJQUFJLENBQUM7d0JBQzlCLFNBQVMsRUFBRSxhQUFhLEVBQUUsRUFBRTt3QkFDNUIsS0FBSyxFQUFFLHdCQUF3QjtxQkFDaEMsQ0FBQyxDQUFDO2dCQUNMLENBQUM7Z0JBRUQsTUFBTSxrQ0FBa0MsR0FBRyxvQkFBb0I7b0JBQzdELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxLQUFLLGFBQWEsRUFBRSxFQUFFLENBQUM7b0JBQ25ELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLENBQUM7b0JBQ3BELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ2IsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLEVBQUUsU0FBUyxDQUNoRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUMvQixDQUFDO29CQUNGLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0JBQ3ZCLE9BQU8sS0FBSyxDQUFDO29CQUNmLENBQUM7b0JBRUQsT0FBTyxJQUFJLENBQUM7Z0JBQ2QsQ0FBQyxDQUFDLENBQUM7Z0JBRUwsTUFBTSxrQ0FBa0MsR0FBRyxvQkFBb0I7b0JBQzdELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxLQUFLLGFBQWEsRUFBRSxFQUFFLENBQUM7b0JBQ25ELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLENBQUM7b0JBQ3BELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ2IsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLEVBQUUsU0FBUyxDQUNoRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUMvQixDQUFDO29CQUNGLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0JBQ3ZCLE9BQU8sS0FBSyxDQUFDO29CQUNmLENBQUM7b0JBRUQsT0FBTyxJQUFJLENBQUM7Z0JBQ2QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFVixJQUFJLGtDQUFrQyxFQUFFLEVBQUUsRUFBRSxDQUFDO29CQUMzQyxrQ0FBa0MsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTt3QkFDaEQsQ0FBQyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQ2pCLGtDQUFrQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUMxRDs2QkFDRSxFQUFFLENBQUMsa0NBQWtDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzs2QkFDckQsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7NkJBQ2QsTUFBTSxFQUFFLENBQUM7d0JBQ1osQ0FBQyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQ2Ysa0NBQWtDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQ3hEOzZCQUNFLEVBQUUsQ0FBQyxrQ0FBa0MsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDOzZCQUNyRCxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQzs2QkFDZCxNQUFNLEVBQUUsQ0FBQztvQkFDZCxDQUFDLENBQUMsQ0FBQztnQkFDTCxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxNQUFNLHNCQUFzQixHQUFHLGNBQWM7YUFDMUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUU7WUFDYixNQUFNLGFBQWEsR0FBRyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNqRSxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSw4QkFBOEIsQ0FBQyxDQUFDO1lBQzNELElBQUksYUFBYSxFQUFFLENBQUM7Z0JBQ2xCLE9BQU8sa0NBQWtDLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQy9ELENBQUM7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUMsQ0FBQztZQUNGLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDYixNQUFNLFdBQVcsR0FBRyx5QkFBeUIsRUFBRSxJQUFJLENBQ2pELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLENBQ3ZCLENBQUM7WUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQztZQUN6QyxPQUFPLENBQUMsV0FBVyxDQUFDO1FBQ3RCLENBQUMsQ0FBQztZQUNGLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDYixNQUFNLHVCQUF1QixHQUFHLDBCQUEwQixFQUFFLFNBQVMsQ0FDbkUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLENBQzlCLENBQUM7WUFFRixJQUFJLHVCQUF1QixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ2pDLE9BQU8sS0FBSyxDQUFDO1lBQ2YsQ0FBQztZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQyxDQUFDO1lBQ0YsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2QixzQkFBc0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUNwQyxPQUFPLENBQUMsR0FBRyxDQUNULEVBQUUsRUFDRixTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDMUMsMEJBQTBCLENBQzNCLENBQ0YsQ0FBQztRQUVGLElBQUksY0FBYyxHQUE2QyxFQUFFLENBQUM7UUFDbEUsSUFBSSxjQUFjLEdBQXNCLEVBQUUsQ0FBQztRQUMzQyxNQUFNLGNBQWMsR0FBb0IsRUFBRSxDQUFDO1FBQzNDLE1BQU0sZUFBZSxHQUEyQixFQUFFLENBQUM7UUFDbkQsTUFBTSxxQkFBcUIsR0FBMkIsRUFBRSxDQUFDO1FBQ3pELE1BQU0sK0JBQStCLEdBQTZCLEVBQUUsQ0FBQztRQUNyRSxNQUFNLCtCQUErQixHQUE2QixFQUFFLENBQUM7UUFDckUsTUFBTSxxQkFBcUIsR0FBbUIsRUFBRSxDQUFDO1FBRWpELE1BQU0saUNBQWlDLEdBQW9CLEVBQUUsQ0FBQztRQUU5RCxNQUFNLGNBQWMsR0FBb0IsRUFBRSxDQUFDO1FBRTNDLGVBQWUsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM3QixPQUFPLENBQUMsR0FBRyxDQUNULENBQUMsQ0FBQyxXQUFXLEVBQ2IsQ0FBQyxDQUFDLFVBQVUsRUFDWixrRkFBa0YsQ0FDbkYsQ0FDRixDQUFDO1FBRUYsS0FBSyxNQUFNLGFBQWEsSUFBSSxzQkFBc0IsRUFBRSxDQUFDO1lBQ25ELE9BQU8sQ0FBQyxHQUFHLENBQ1QsYUFBYSxFQUNiLDBEQUEwRCxDQUMzRCxDQUFDO1lBQ0YsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLE1BQU0saUJBQWlCLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZFLE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxzQkFBc0IsQ0FDdEQsYUFBYSxDQUFDLE1BQU0sRUFDcEIsUUFBUSxDQUNULENBQUM7WUFDRixNQUFNLFVBQVUsR0FBRyxtQkFBbUIsRUFBRSxVQUFVLENBQUM7WUFFbkQsdUJBQXVCO1lBQ3ZCLElBQ0UsUUFBUTtnQkFDUiw2QkFBNkI7Z0JBQzdCLDBCQUEwQjtnQkFDMUIsYUFBYSxDQUFDLE9BQU8sS0FBSyw2QkFBNkIsSUFBSSx5QkFBeUI7Z0JBQ3BGLGFBQWEsQ0FBQyxVQUFVLEtBQUssMEJBQTBCLEVBQ3ZELENBQUM7Z0JBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FDVCw4QkFBOEIsNkJBQTZCLGdCQUFnQiwwQkFBMEIsRUFBRSxDQUN4RyxDQUFDO2dCQUNGLGtGQUFrRjtnQkFDbEYsTUFBTSxlQUFlLEdBQ25CLGFBQWEsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUNyQyxLQUFLLEVBQUUsR0FBRyxDQUFDLFlBQVksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSztvQkFDakQsV0FBVyxFQUFFLEdBQUcsQ0FBQyxJQUFJO29CQUNyQiw4RUFBOEU7aUJBQy9FLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFFWixzREFBc0Q7Z0JBQ3RELCtGQUErRjtnQkFDL0Ysb0ZBQW9GO2dCQUNwRixjQUFjLENBQUMsSUFBSSxDQUNqQixnQ0FBZ0MsQ0FDOUIsRUFBRSxHQUFHLGFBQWEsRUFBRSxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsRUFBRSxxQ0FBcUM7Z0JBQ25HLGFBQWEsQ0FBQyxNQUFNLEVBQ3BCLFFBQVEsRUFDUixRQUFRLEVBQ1IsS0FBSyxFQUFFLDhFQUE4RTtnQkFDckYsVUFBVSxFQUNWLHVCQUF1QixFQUFFLFNBQVMsRUFDbEMsZUFBZSxFQUFFLHdDQUF3QztnQkFDekQsU0FBUyxDQUFDLDBEQUEwRDtpQkFDbEQsQ0FDckIsQ0FBQztnQkFDRixhQUFhLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLHFDQUFxQztnQkFDbEUsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLDRDQUE0QztnQkFFaEYsbUVBQW1FO2dCQUNuRSxJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ25ELE1BQU0sWUFBWSxHQUFHLE1BQU0scUJBQXFCLENBQzlDLDZCQUE2QixFQUM3QixhQUFhLENBQUMsTUFBTSxDQUNyQixDQUFDLENBQUMsa0JBQWtCO29CQUNyQixJQUFJLFlBQVksRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7d0JBQzdCLGVBQWUsQ0FBQyxJQUFJLENBQ2xCLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzs0QkFDMUIsR0FBRyxDQUFDOzRCQUNKLE9BQU8sRUFBRSw2QkFBNkI7eUJBQ3ZDLENBQUMsQ0FBQyxDQUNKLENBQUM7b0JBQ0osQ0FBQztvQkFDRCxxQkFBcUIsQ0FBQyxJQUFJLENBQ3hCLEdBQUcsdUJBQXVCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzt3QkFDL0MsR0FBRyxDQUFDO3dCQUNKLE9BQU8sRUFBRSw2QkFBNkI7cUJBQ3ZDLENBQUMsQ0FBQyxDQUNKLENBQUM7Z0JBQ0osQ0FBQztnQkFDRCxNQUFNLHNCQUFzQixHQUFHLE1BQU0sK0JBQStCLENBQ2xFLDZCQUE2QixDQUM5QixDQUFDLENBQUMsa0JBQWtCO2dCQUNyQixJQUNFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRSxhQUFhLENBQUMsbUJBQW1CLENBQUMsRUFDckUsQ0FBQztvQkFDRCxJQUFJLHNCQUFzQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQzt3QkFDdkMsK0JBQStCLENBQUMsSUFBSSxDQUNsQyxHQUFHLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQzs0QkFDdEMsR0FBRyxHQUFHOzRCQUNOLE9BQU8sRUFBRSw2QkFBNkI7eUJBQ3ZDLENBQUMsQ0FBQyxDQUNKLENBQUM7b0JBQ0osQ0FBQztvQkFDRCxJQUFJLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7d0JBQ25ELCtCQUErQixDQUFDLElBQUksQ0FDbEMsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDOzRCQUNqRCxHQUFHLEdBQUc7NEJBQ04sT0FBTyxFQUFFLDZCQUE2Qjt5QkFDdkMsQ0FBQyxDQUFDLENBQ0osQ0FBQztvQkFDSixDQUFDO2dCQUNILENBQUM7Z0JBQ0QsU0FBUyxDQUFDLDZDQUE2QztZQUN6RCxDQUFDO1lBQ0QsMkJBQTJCO1lBRTNCLE1BQU0sZ0JBQWdCLEdBQUcsZUFBZSxFQUFFLFNBQVMsQ0FDakQsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsRUFBRSxLQUFLLGFBQWEsQ0FBQyxFQUFFLENBQ25FLENBQUM7WUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBRSw4QkFBOEIsQ0FBQyxDQUFDO1lBQ3hFLE1BQU0sZUFBZSxHQUFHLGVBQWUsRUFBRSxTQUFTLENBQ2hELENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLEVBQUUsS0FBSyxhQUFhLENBQUMsRUFBRSxDQUNsRSxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsUUFBUSxFQUFFLDZCQUE2QixDQUFDLENBQUM7WUFDdEUsTUFBTSx1QkFBdUIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3BELENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLGFBQWEsQ0FBQyxFQUFFLENBQ3BELENBQUM7WUFDRixNQUFNLFVBQVUsR0FBRyxNQUFNLEVBQUUsU0FBUyxDQUNsQyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsS0FBSyxhQUFhLENBQUMsRUFBRSxDQUNuRCxDQUFDO1lBRUYsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO2dCQUN2RSxJQUFJLFFBQVEsS0FBSyxzQkFBc0IsRUFBRSxDQUFDO29CQUN4QyxPQUFPLENBQUMsR0FBRyxDQUNULGFBQWEsQ0FBQyxFQUFFLEVBQ2hCLGdCQUFnQixFQUNoQixzQ0FBc0MsQ0FDdkMsQ0FBQztvQkFDRixJQUNFLGVBQWUsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsV0FBVyxFQUFFLE1BQU07d0JBQ3hELFFBQVEsRUFDUixDQUFDO3dCQUNELE9BQU8sQ0FBQyxHQUFHLENBQ1QsYUFBYSxDQUFDLEVBQUUsRUFDaEIsZ0JBQWdCLEVBQ2hCLGtIQUFrSCxDQUNuSCxDQUFDO3dCQUNGLGNBQWMsQ0FBQyxJQUFJLENBQ2pCLGdDQUFnQyxDQUM5QixhQUFhLEVBQ2IsYUFBYSxDQUFDLE1BQU0sRUFDcEIsUUFBUSxFQUNSLFFBQVEsRUFDUixJQUFJLEVBQUUsbUNBQW1DO3dCQUN6QyxVQUFVLEVBQ1YsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLHdCQUF3Qjt3QkFDNUQsU0FBUyxFQUFFLDZDQUE2Qzt3QkFDeEQsU0FBUyxDQUFDLDhDQUE4Qzt5QkFDZixDQUM1QyxDQUFDO3dCQUVGLGFBQWEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO3dCQUU1QixJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7NEJBQ25ELHFCQUFxQixDQUFDLElBQUksQ0FBQyxHQUFHLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUNuRSxDQUFDO3dCQUVELE1BQU0sc0JBQXNCLEdBQzFCLE1BQU0sK0JBQStCLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUMxRCxJQUNFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDUixzQkFBc0IsRUFDdEIsYUFBYSxDQUFDLG1CQUFtQixDQUNsQyxFQUNELENBQUM7NEJBQ0QsSUFBSSxzQkFBc0IsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ3ZDLCtCQUErQixDQUFDLElBQUksQ0FBQyxHQUFHLHNCQUFzQixDQUFDLENBQUM7NEJBQ2xFLENBQUM7NEJBRUQsSUFBSSxhQUFhLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUNuRCwrQkFBK0IsQ0FBQyxJQUFJLENBQ2xDLEdBQUcsYUFBYSxDQUFDLG1CQUFtQixDQUNyQyxDQUFDOzRCQUNKLENBQUM7d0JBQ0gsQ0FBQztvQkFDSCxDQUFDO3lCQUFNLElBQ0wsZUFBZSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxXQUFXLEVBQUUsTUFBTTt3QkFDeEQsUUFBUSxFQUNSLENBQUM7d0JBQ0QsTUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsRUFBRSxJQUFJLENBQzlDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLGFBQWEsRUFBRSxFQUFFLENBQ25DLENBQUM7d0JBRUYsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFVLElBQUksZ0JBQWdCLEVBQUUsRUFBRSxFQUFFLENBQUM7NEJBQ3ZELGFBQWEsQ0FBQyxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxDQUFDOzRCQUNyRCxhQUFhLENBQUMsT0FBTyxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQzs0QkFDakQsYUFBYSxDQUFDLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUM7d0JBQ3JELENBQUM7d0JBRUQsY0FBYyxDQUFDLElBQUksQ0FDakIsZ0NBQWdDLENBQzlCLGFBQWEsRUFDYixhQUFhLEVBQUUsTUFBTSxFQUNyQixRQUFRLEVBQ1IsUUFBUSxFQUNSLElBQUksRUFBRSxtQ0FBbUM7d0JBQ3pDLFVBQVUsRUFDVix1QkFBdUIsRUFBRSxTQUFTLEVBQUUsd0JBQXdCO3dCQUM1RCxTQUFTLEVBQUUsWUFBWTt3QkFDdkIsU0FBUyxDQUFDLGFBQWE7eUJBQ0wsQ0FDckIsQ0FBQzt3QkFFRixJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7NEJBQ25ELE1BQU0sWUFBWSxHQUFHLE1BQU0scUJBQXFCLENBQzlDLGFBQWEsRUFBRSxFQUFFLEVBQ2pCLGFBQWEsRUFBRSxNQUFNLENBQ3RCLENBQUM7NEJBQ0YsSUFBSSxZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUM3QixlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUM7NEJBQ3hDLENBQUM7NEJBQ0QscUJBQXFCLENBQUMsSUFBSSxDQUFDLEdBQUcsdUJBQXVCLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ25FLENBQUM7d0JBRUQsTUFBTSxzQkFBc0IsR0FDMUIsTUFBTSwrQkFBK0IsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQzFELElBQ0UsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUNSLHNCQUFzQixFQUN0QixhQUFhLENBQUMsbUJBQW1CLENBQ2xDLEVBQ0QsQ0FBQzs0QkFDRCxJQUFJLHNCQUFzQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQ0FDdkMsK0JBQStCLENBQUMsSUFBSSxDQUFDLEdBQUcsc0JBQXNCLENBQUMsQ0FBQzs0QkFDbEUsQ0FBQzs0QkFFRCxJQUFJLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ25ELCtCQUErQixDQUFDLElBQUksQ0FDbEMsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQ3JDLENBQUM7NEJBQ0osQ0FBQzt3QkFDSCxDQUFDO29CQUNILENBQUM7Z0JBQ0gsQ0FBQztnQkFFRCxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7aUJBQU0sSUFBSSxlQUFlLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsUUFBUSxFQUFFLDRCQUE0QixDQUFDLENBQUM7Z0JBQ3JFLElBQUksUUFBUSxLQUFLLHNCQUFzQixFQUFFLENBQUM7b0JBQ3hDLElBQ0UsZUFBZSxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sS0FBSyxRQUFRLEVBQ25FLENBQUM7d0JBQ0QsY0FBYyxDQUFDLElBQUksQ0FDakIsZ0NBQWdDLENBQzlCLGFBQWEsRUFDYixhQUFhLENBQUMsTUFBTSxFQUNwQixRQUFRLEVBQ1IsUUFBUSxFQUNSLElBQUksRUFBRSxtQ0FBbUM7d0JBQ3pDLFVBQVUsRUFDVixTQUFTLEVBQUUsK0JBQStCO3dCQUMxQyxTQUFTLEVBQUUsWUFBWTt3QkFDdkIsU0FBUyxDQUFDLGFBQWE7eUJBQ2tCLENBQzVDLENBQUM7d0JBRUYsYUFBYSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7d0JBRTVCLElBQUksdUJBQXVCLEVBQUUsU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQzs0QkFDbkQscUJBQXFCLENBQUMsSUFBSSxDQUFDLEdBQUcsdUJBQXVCLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ25FLENBQUM7d0JBRUQsTUFBTSxzQkFBc0IsR0FDMUIsTUFBTSwrQkFBK0IsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQzFELElBQ0UsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUNSLHNCQUFzQixFQUN0QixhQUFhLENBQUMsbUJBQW1CLENBQ2xDLEVBQ0QsQ0FBQzs0QkFDRCxJQUFJLHNCQUFzQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQ0FDdkMsK0JBQStCLENBQUMsSUFBSSxDQUFDLEdBQUcsc0JBQXNCLENBQUMsQ0FBQzs0QkFDbEUsQ0FBQzs0QkFFRCxJQUFJLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ25ELCtCQUErQixDQUFDLElBQUksQ0FDbEMsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQ3JDLENBQUM7NEJBQ0osQ0FBQzt3QkFDSCxDQUFDO29CQUNILENBQUM7eUJBQU0sSUFDTCxlQUFlLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxLQUFLLFFBQVEsRUFDbkUsQ0FBQzt3QkFDRCxNQUFNLGdCQUFnQixHQUFHLGlCQUFpQixFQUFFLElBQUksQ0FDOUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssYUFBYSxFQUFFLEVBQUUsQ0FDbkMsQ0FBQzt3QkFFRixJQUFJLENBQUMsYUFBYSxFQUFFLFVBQVUsSUFBSSxnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsQ0FBQzs0QkFDdkQsYUFBYSxDQUFDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUM7NEJBQ3JELGFBQWEsQ0FBQyxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsT0FBTyxDQUFDOzRCQUNqRCxhQUFhLENBQUMsUUFBUSxHQUFHLGdCQUFnQixDQUFDLFFBQVEsQ0FBQzt3QkFDckQsQ0FBQzt3QkFFRCxjQUFjLENBQUMsSUFBSSxDQUNqQixnQ0FBZ0MsQ0FDOUIsYUFBYSxFQUNiLGFBQWEsRUFBRSxNQUFNLEVBQ3JCLFFBQVEsRUFDUixRQUFRLEVBQ1IsSUFBSSxFQUFFLG1DQUFtQzt3QkFDekMsVUFBVSxFQUNWLFNBQVMsRUFBRSxZQUFZO3dCQUN2QixTQUFTLEVBQUUsWUFBWTt3QkFDdkIsU0FBUyxDQUFDLGFBQWE7eUJBQ0wsQ0FDckIsQ0FBQzt3QkFFRixJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7NEJBQ25ELE1BQU0sWUFBWSxHQUFHLE1BQU0scUJBQXFCLENBQzlDLGFBQWEsRUFBRSxFQUFFLEVBQ2pCLGFBQWEsRUFBRSxNQUFNLENBQ3RCLENBQUM7NEJBQ0YsSUFBSSxZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUM3QixlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUM7NEJBQ3hDLENBQUM7NEJBQ0QscUJBQXFCLENBQUMsSUFBSSxDQUFDLEdBQUcsdUJBQXVCLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ25FLENBQUM7d0JBRUQsTUFBTSxzQkFBc0IsR0FDMUIsTUFBTSwrQkFBK0IsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQzFELElBQ0UsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUNSLHNCQUFzQixFQUN0QixhQUFhLENBQUMsbUJBQW1CLENBQ2xDLEVBQ0QsQ0FBQzs0QkFDRCxJQUFJLHNCQUFzQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQ0FDdkMsK0JBQStCLENBQUMsSUFBSSxDQUFDLEdBQUcsc0JBQXNCLENBQUMsQ0FBQzs0QkFDbEUsQ0FBQzs0QkFFRCxJQUFJLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ25ELCtCQUErQixDQUFDLElBQUksQ0FDbEMsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQ3JDLENBQUM7NEJBQ0osQ0FBQzt3QkFDSCxDQUFDO29CQUNILENBQUM7Z0JBQ0gsQ0FBQztnQkFFRCxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7aUJBQU0sSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FDVCxVQUFVLEVBQ1YsTUFBTSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsTUFBTSxFQUM1QixRQUFRLEVBQ1IscURBQXFELENBQ3RELENBQUM7Z0JBQ0YsSUFBSSxRQUFRLEtBQUssc0JBQXNCLEVBQUUsQ0FBQztvQkFDeEMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxNQUFNLEtBQUssUUFBUSxFQUFFLENBQUM7d0JBQzlDLGNBQWMsQ0FBQyxJQUFJLENBQ2pCLGdDQUFnQyxDQUM5QixhQUFhLEVBQ2IsYUFBYSxDQUFDLE1BQU0sRUFDcEIsUUFBUSxFQUNSLFFBQVEsRUFDUixLQUFLLEVBQUUsMkJBQTJCO3dCQUNsQyxVQUFVLEVBQ1YsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLHdCQUF3Qjt3QkFDNUQsU0FBUyxFQUFFLFlBQVk7d0JBQ3ZCLFNBQVMsQ0FBQyxhQUFhO3lCQUNrQixDQUM1QyxDQUFDO3dCQUVGLGFBQWEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO3dCQUU1QixJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7NEJBQ25ELHFCQUFxQixDQUFDLElBQUksQ0FBQyxHQUFHLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUNuRSxDQUFDO3dCQUVELE1BQU0sc0JBQXNCLEdBQzFCLE1BQU0sK0JBQStCLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUMxRCxJQUNFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDUixzQkFBc0IsRUFDdEIsYUFBYSxDQUFDLG1CQUFtQixDQUNsQyxFQUNELENBQUM7NEJBQ0QsSUFBSSxzQkFBc0IsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ3ZDLCtCQUErQixDQUFDLElBQUksQ0FBQyxHQUFHLHNCQUFzQixDQUFDLENBQUM7NEJBQ2xFLENBQUM7NEJBRUQsSUFBSSxhQUFhLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUNuRCwrQkFBK0IsQ0FBQyxJQUFJLENBQ2xDLEdBQUcsYUFBYSxDQUFDLG1CQUFtQixDQUNyQyxDQUFDOzRCQUNKLENBQUM7d0JBQ0gsQ0FBQzt3QkFFRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztvQkFDbkMsQ0FBQzt5QkFBTSxJQUFJLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQzt3QkFDckQsTUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsRUFBRSxJQUFJLENBQzlDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLGFBQWEsRUFBRSxFQUFFLENBQ25DLENBQUM7d0JBRUYsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFVLElBQUksZ0JBQWdCLEVBQUUsRUFBRSxFQUFFLENBQUM7NEJBQ3ZELGFBQWEsQ0FBQyxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxDQUFDOzRCQUNyRCxhQUFhLENBQUMsT0FBTyxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQzs0QkFDakQsYUFBYSxDQUFDLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUM7d0JBQ3JELENBQUM7d0JBRUQsY0FBYyxDQUFDLElBQUksQ0FDakIsZ0NBQWdDLENBQzlCLGFBQWEsRUFDYixhQUFhLENBQUMsTUFBTSxFQUNwQixRQUFRLEVBQ1IsUUFBUSxFQUNSLEtBQUssRUFBRSxvQkFBb0I7d0JBQzNCLFVBQVUsRUFDVix1QkFBdUIsRUFBRSxTQUFTLEVBQUUsd0JBQXdCO3dCQUM1RCxTQUFTLEVBQUUsWUFBWTt3QkFDdkIsU0FBUyxDQUFDLGFBQWE7eUJBQ0wsQ0FDckIsQ0FBQzt3QkFFRixJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7NEJBQ25ELE1BQU0sWUFBWSxHQUFHLE1BQU0scUJBQXFCLENBQzlDLGFBQWEsRUFBRSxFQUFFLEVBQ2pCLGFBQWEsRUFBRSxNQUFNLENBQ3RCLENBQUM7NEJBQ0YsSUFBSSxZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUM3QixlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUM7NEJBQ3hDLENBQUM7NEJBRUQscUJBQXFCLENBQUMsSUFBSSxDQUFDLEdBQUcsdUJBQXVCLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ25FLENBQUM7d0JBRUQsTUFBTSxzQkFBc0IsR0FDMUIsTUFBTSwrQkFBK0IsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQzFELElBQ0UsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUNSLHNCQUFzQixFQUN0QixhQUFhLENBQUMsbUJBQW1CLENBQ2xDLEVBQ0QsQ0FBQzs0QkFDRCxJQUFJLHNCQUFzQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQ0FDdkMsK0JBQStCLENBQUMsSUFBSSxDQUFDLEdBQUcsc0JBQXNCLENBQUMsQ0FBQzs0QkFDbEUsQ0FBQzs0QkFFRCxJQUFJLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ25ELCtCQUErQixDQUFDLElBQUksQ0FDbEMsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQ3JDLENBQUM7NEJBQ0osQ0FBQzt3QkFDSCxDQUFDO3dCQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO29CQUNuQyxDQUFDO2dCQUNILENBQUM7Z0JBQ0QsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUNyQyxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sSUFBSSxRQUFRLEtBQUssc0JBQXNCLEVBQUUsQ0FBQztvQkFDeEMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxhQUFhLEVBQ2IsZ0hBQWdILENBQ2pILENBQUM7b0JBQ0YsSUFBSSxhQUFhLEVBQUUsTUFBTSxLQUFLLFFBQVEsRUFBRSxDQUFDO3dCQUN2QyxJQUFJLGFBQWEsRUFBRSxTQUFTLEVBQUUsQ0FBQzs0QkFDN0IsTUFBTSxhQUFhLEdBQUcsTUFBTSxnQkFBZ0IsQ0FDMUMsYUFBYSxFQUFFLFNBQVMsQ0FDekIsQ0FBQzs0QkFFRixJQUFJLGFBQWEsRUFBRSxNQUFNLEtBQUssYUFBYSxFQUFFLE1BQU0sRUFBRSxDQUFDO2dDQUNwRCxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dDQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztnQ0FDN0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsTUFBTSxFQUFFLHdCQUF3QixDQUFDLENBQUM7Z0NBRTdELE9BQU8sQ0FBQyxHQUFHLENBQ1QsYUFBYSxFQUFFLEVBQUUsRUFDakIsNENBQTRDLENBQzdDLENBQUM7Z0NBRUYsU0FBUzs0QkFDWCxDQUFDO2lDQUFNLElBQUksYUFBYSxFQUFFLE1BQU0sS0FBSyxhQUFhLEVBQUUsTUFBTSxFQUFFLENBQUM7Z0NBQzNELE9BQU8sQ0FBQyxHQUFHLENBQ1QsOEVBQThFLENBQy9FLENBQUM7Z0NBQ0YsTUFBTSxTQUFTLEdBQ2IsTUFBTSx3Q0FBd0MsQ0FDNUMsYUFBYSxFQUFFLFNBQVMsQ0FDekIsQ0FBQztnQ0FDSixPQUFPLENBQUMsR0FBRyxDQUNULFNBQVMsRUFDVCxvRUFBb0UsQ0FDckUsQ0FBQztnQ0FDRixJQUFJLFVBQVUsR0FBd0IsRUFBRSxDQUFDO2dDQUV6QyxJQUFJLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO29DQUNwQyxPQUFPLENBQUMsR0FBRyxDQUNULGFBQWEsRUFBRSxnQkFBZ0IsRUFDL0Isa0NBQWtDLENBQ25DLENBQUM7b0NBQ0YsTUFBTSxTQUFTLEdBQUcsTUFBTSxlQUFlLENBQ3JDLGFBQWEsRUFBRSxNQUFNLENBQ3RCLENBQUM7b0NBRUYsVUFBVSxHQUFHLFNBQVM7d0NBQ3BCLENBQUMsQ0FBQyxFQUFFO3dDQUNKLENBQUMsQ0FBQzs0Q0FDRSxFQUFFLEVBQUUsSUFBSSxFQUFFOzRDQUNWLE1BQU0sRUFBRSxhQUFhLEVBQUUsTUFBTTs0Q0FDN0IsVUFBVSxFQUFFLGFBQWEsRUFBRSxVQUFVOzRDQUNyQyxHQUFHLEVBQUUsUUFBUTs0Q0FDYixJQUFJLEVBQUUsYUFBYSxFQUFFLE9BQU87NENBQzVCLEtBQUssRUFBRSxhQUFhLEVBQUUsS0FBSzs0Q0FDM0IsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRTs0Q0FDM0IsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRTs0Q0FDN0IsT0FBTyxFQUFFLEtBQUs7NENBQ2QsTUFBTSxFQUFFLElBQUk7eUNBQ2IsQ0FBQztvQ0FFTixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxtQ0FBbUMsQ0FBQyxDQUFDO29DQUU3RCxJQUFJLFNBQVMsRUFBRSxDQUFDO3dDQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLGtDQUFrQyxDQUFDLENBQUM7d0NBQzNELE1BQU0sWUFBWSxHQUFHLFNBQVMsRUFBRSxJQUFJLENBQ2xDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLENBQzNDLENBQUM7d0NBRUYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxZQUFZLEVBQ1oscUNBQXFDLENBQ3RDLENBQUM7d0NBRUYsTUFBTSxVQUFVLEdBQUcsTUFBTSxpQkFBaUIsQ0FDeEMsU0FBUyxFQUNULGFBQWEsRUFBRSxTQUFTLEVBQ3hCLGFBQWEsRUFBRSxRQUFRLEVBQ3ZCLGFBQWEsRUFBRSxPQUFPLEVBQ3RCLGFBQWEsRUFBRSxRQUFRLEVBQ3ZCLFlBQVksRUFBRSxJQUFJLEVBQ2xCLFlBQVksRUFBRSxZQUFZLEVBQzFCLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FDdkMsQ0FBQzt3Q0FFRixPQUFPLENBQUMsR0FBRyxDQUNULFVBQVUsRUFDVixxQ0FBcUMsQ0FDdEMsQ0FBQzt3Q0FFRixJQUFJLFVBQVUsRUFBRSxDQUFDOzRDQUNmLFVBQVUsR0FBRztnREFDWCxFQUFFLEVBQUUsR0FBRyxVQUFVLEVBQUUsRUFBRSxFQUFFO2dEQUN2QixNQUFNLEVBQUUsYUFBYSxFQUFFLE1BQU07Z0RBQzdCLFVBQVUsRUFBRSxhQUFhLEVBQUUsVUFBVTtnREFDckMsR0FBRyxFQUFFLE1BQU07Z0RBQ1gsSUFBSSxFQUFFLFVBQVUsRUFBRSxNQUFNO2dEQUN4QixLQUFLLEVBQUUsVUFBVSxFQUFFLE1BQU07Z0RBQ3pCLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUTtnREFDN0IsUUFBUSxFQUFFLFVBQVUsRUFBRSxTQUFTO2dEQUMvQixNQUFNLEVBQUUsSUFBSTtnREFDWixTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFO2dEQUMzQixXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFO2dEQUM3QixPQUFPLEVBQUUsS0FBSztnREFDZCxXQUFXLEVBQUU7b0RBQ1g7d0RBQ0UsY0FBYyxFQUFFLE9BQU87d0RBQ3ZCLEtBQUssRUFBRSxVQUFVLEVBQUUsUUFBUTt3REFDM0IsUUFBUSxFQUFFLFVBQVUsRUFBRSxRQUFRO3dEQUM5QixHQUFHLEVBQUUsVUFBVSxFQUFFLFFBQVE7cURBQzFCO2lEQUNGOzZDQUNnQixDQUFDOzRDQUVwQixpQ0FBaUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7d0NBQ3hELENBQUM7b0NBQ0gsQ0FBQztnQ0FDSCxDQUFDO2dDQUVELE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBVSxFQUNWLG9FQUFvRSxDQUNyRSxDQUFDO2dDQUVGLElBQUksYUFBYSxFQUFFLFNBQVMsRUFBRSxDQUFDO29DQUM3QixhQUFhLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztnQ0FDbkMsQ0FBQztnQ0FFRCxjQUFjLENBQUMsSUFBSSxDQUNqQixnQ0FBZ0MsQ0FDOUIsYUFBYSxFQUNiLGFBQWEsQ0FBQyxNQUFNLEVBQ3BCLFFBQVEsRUFDUixRQUFRLEVBQ1IsS0FBSyxFQUNMLFVBQVUsRUFDVixTQUFTLEVBQ1QsU0FBUyxFQUNSLFVBQTZCLEVBQUUsRUFBRTtvQ0FDaEMsQ0FBQyxDQUFFLFVBQTZCO29DQUNoQyxDQUFDLENBQUMsU0FBUyxDQUM0QixDQUM1QyxDQUFDO2dDQUVGLElBQUssVUFBNkIsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQ0FDdkMsTUFBTSxnQkFBZ0IsQ0FBQyxVQUE0QixDQUFDLENBQUM7b0NBQ3JELGFBQWEsQ0FBQyxZQUFZLEdBQ3hCLFVBQ0QsRUFBRSxFQUFFLENBQUM7Z0NBQ1IsQ0FBQztnQ0FFRCxJQUFJLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0NBQ25ELHFCQUFxQixDQUFDLElBQUksQ0FDeEIsR0FBRyx1QkFBdUIsRUFBRSxTQUFTLENBQ3RDLENBQUM7Z0NBQ0osQ0FBQztnQ0FFRCxJQUFJLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0NBQ25ELCtCQUErQixDQUFDLElBQUksQ0FDbEMsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQ3JDLENBQUM7Z0NBQ0osQ0FBQztnQ0FFRCxNQUFNLG1CQUFtQixHQUFtQixTQUFTLEVBQUUsR0FBRyxDQUN4RCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztvQ0FDTixFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0NBQ1QsTUFBTSxFQUFFLENBQUMsRUFBRSxNQUFNO29DQUNqQixTQUFTLEVBQUUsQ0FBQyxFQUFFLFNBQVM7b0NBQ3ZCLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTTtvQ0FDakIsWUFBWSxFQUFFLENBQUMsRUFBRSxZQUFZO29DQUM3QixXQUFXLEVBQUUsQ0FBQyxFQUFFLFdBQVc7b0NBQzNCLE9BQU8sRUFBRSxhQUFhLEVBQUUsRUFBRTtvQ0FDMUIsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRTtvQ0FDM0IsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRTtvQ0FDN0IsT0FBTyxFQUFFLEtBQUs7aUNBQ2YsQ0FBQyxDQUNILENBQUM7Z0NBRUYscUJBQXFCLENBQUMsSUFBSSxDQUFDLEdBQUcsbUJBQW1CLENBQUMsQ0FBQztnQ0FFbkQsTUFBTSxpQkFBaUIsR0FBRyxTQUFTLEVBQUUsTUFBTSxDQUN6QyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FDN0IsQ0FBQztnQ0FDRixJQUFLLFVBQTZCLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ3ZDLDBCQUEwQjt3Q0FDeEIsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7d0NBQ3BCLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7d0NBQ2QsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLEVBQUUsU0FBUyxDQUNoRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FDdEMsQ0FBQzt3Q0FFRixJQUNFLENBQUMsRUFBRSxTQUFTLEtBQUssYUFBYSxFQUFFLEVBQUU7NENBQ2xDLGFBQWEsS0FBSyxDQUFDLENBQUMsRUFDcEIsQ0FBQzs0Q0FDRCxDQUFDLENBQUMsVUFBVSxHQUFHLFVBQTRCLENBQUM7d0NBQzlDLENBQUM7b0NBQ0gsQ0FBQyxDQUFDLENBQUM7Z0NBQ1AsQ0FBQztnQ0FFRCwwQkFBMEI7b0NBQ3hCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29DQUNwQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO29DQUNkLE1BQU0sYUFBYSxHQUFHLGlCQUFpQixFQUFFLFNBQVMsQ0FDaEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQ3RDLENBQUM7b0NBRUYsSUFDRSxDQUFDLEVBQUUsU0FBUyxLQUFLLGFBQWEsRUFBRSxFQUFFO3dDQUNsQyxhQUFhLEtBQUssQ0FBQyxDQUFDLEVBQ3BCLENBQUM7d0NBQ0QsQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7d0NBQ3hCLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQzt3Q0FDdEIsQ0FBQyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7d0NBQ3RCLENBQUMsQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO29DQUM1QixDQUFDO2dDQUNILENBQUMsQ0FBQyxDQUFDOzRCQUNQLENBQUM7d0JBQ0gsQ0FBQzt3QkFFRCxhQUFhLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztvQkFDOUIsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLEVBQUUsSUFBSSxDQUM5QyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxhQUFhLEVBQUUsRUFBRSxDQUNuQyxDQUFDO3dCQUVGLElBQUksQ0FBQyxhQUFhLEVBQUUsVUFBVSxJQUFJLGdCQUFnQixFQUFFLEVBQUUsRUFBRSxDQUFDOzRCQUN2RCxhQUFhLENBQUMsU0FBUyxHQUFHLGdCQUFnQixDQUFDLFNBQVMsQ0FBQzs0QkFDckQsYUFBYSxDQUFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUM7NEJBQ2pELGFBQWEsQ0FBQyxRQUFRLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDO3dCQUNyRCxDQUFDO3dCQUVELGNBQWMsQ0FBQyxJQUFJLENBQ2pCLGdDQUFnQyxDQUM5QixhQUFhLEVBQ2IsYUFBYSxDQUFDLE1BQU0sRUFDcEIsUUFBUSxFQUNSLFFBQVEsRUFDUixLQUFLLEVBQ0wsVUFBVSxFQUNWLHVCQUF1QixFQUFFLFNBQVMsQ0FDaEIsQ0FDckIsQ0FBQzt3QkFFRixhQUFhLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQzt3QkFFNUIsSUFBSSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDOzRCQUNuRCxNQUFNLFlBQVksR0FBRyxNQUFNLHFCQUFxQixDQUM5QyxhQUFhLEVBQUUsRUFBRSxFQUNqQixhQUFhLEVBQUUsTUFBTSxDQUN0QixDQUFDOzRCQUNGLElBQUksWUFBWSxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQ0FDN0IsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFDOzRCQUN4QyxDQUFDOzRCQUNELHFCQUFxQixDQUFDLElBQUksQ0FBQyxHQUFHLHVCQUF1QixFQUFFLFNBQVMsQ0FBQyxDQUFDO3dCQUNwRSxDQUFDO3dCQUVELE1BQU0sc0JBQXNCLEdBQzFCLE1BQU0sK0JBQStCLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUMxRCxJQUNFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDUixzQkFBc0IsRUFDdEIsYUFBYSxDQUFDLG1CQUFtQixDQUNsQyxFQUNELENBQUM7NEJBQ0QsSUFBSSxzQkFBc0IsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0NBQ3ZDLCtCQUErQixDQUFDLElBQUksQ0FBQyxHQUFHLHNCQUFzQixDQUFDLENBQUM7NEJBQ2xFLENBQUM7NEJBRUQsSUFBSSxhQUFhLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUNuRCwrQkFBK0IsQ0FBQyxJQUFJLENBQ2xDLEdBQUcsYUFBYSxDQUFDLG1CQUFtQixDQUNyQyxDQUFDOzRCQUNKLENBQUM7d0JBQ0gsQ0FBQztvQkFDSCxDQUFDO2dCQUNILENBQUM7Z0JBRUQsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUNyQyxDQUFDO1FBQ0gsQ0FBQztRQUVELE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRTNELE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUV4RCxNQUFNLFlBQVksR0FBb0IsRUFBRSxDQUFDO1FBRXpDLE1BQU0sd0JBQXdCLEdBQW9CLGNBQWMsQ0FBQyxHQUFHLENBQ2xFLENBQUMsRUFBRSxFQUFFLEVBQUU7WUFDTCxNQUFNLGNBQWMsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQzNDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQy9CLENBQUM7WUFDRixJQUFJLGNBQWMsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQkFDdkIsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUN4QixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLFlBQVksRUFBRSxTQUFTLENBQzVDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLGNBQWMsRUFBRSxFQUFFLENBQ3BDLENBQUM7Z0JBRUYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsRUFDcEIsY0FBYyxFQUNkLHVDQUF1QyxDQUN4QyxDQUFDO2dCQUVGLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLElBQUksY0FBYyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7b0JBQ3JELElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDOUIsTUFBTSxnQkFBZ0IsR0FBRyxZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQzt3QkFFNUQsT0FBTyxDQUFDLEdBQUcsQ0FDVCxnQkFBZ0IsRUFDaEIsY0FBYyxFQUNkLG9FQUFvRSxDQUNyRSxDQUFDO3dCQUVGLGdCQUFnQixDQUFDLEVBQUUsR0FBRyxjQUFjLEVBQUUsRUFBRSxDQUFDO3dCQUN6QyxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsY0FBYyxFQUFFLGFBQWEsQ0FBQzt3QkFFekQsSUFBSSxnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsQ0FBQzs0QkFDakMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxnQkFBZ0IsRUFBRSxVQUFVLEVBQzVCLCtCQUErQixDQUNoQyxDQUFDOzRCQUVGLE1BQU0sYUFBYSxHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FDNUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssZ0JBQWdCLENBQUMsVUFBVSxDQUM5QyxDQUFDOzRCQUVGLElBQUksYUFBYSxFQUFFLEVBQUUsRUFBRSxDQUFDO2dDQUN0QixPQUFPLENBQUMsR0FBRyxDQUNULGFBQWEsRUFBRSxFQUFFLEVBQ2pCLHlGQUF5RixDQUMxRixDQUFDO2dDQUNGLGFBQWEsQ0FBQyxVQUFVLEdBQUcsY0FBYyxDQUFDLEVBQUUsQ0FBQztnQ0FFN0MsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxnQkFBZ0IsQ0FBQyxVQUFVLENBQzdDLENBQUM7Z0NBQ0YsTUFBTSwyQkFBMkIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3hELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLGdCQUFnQixDQUFDLFVBQVUsQ0FDdEQsQ0FBQztnQ0FFRixJQUFJLDJCQUEyQixFQUFFLEVBQUUsRUFBRSxDQUFDO29DQUNwQyxhQUFhLENBQUMsRUFBRSxHQUFHLDJCQUEyQixFQUFFLEVBQUUsQ0FBQztvQ0FDbkQsYUFBYSxDQUFDLE9BQU87d0NBQ25CLDJCQUEyQixFQUFFLGFBQWEsQ0FBQztvQ0FFN0MsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSywyQkFBMkIsRUFBRSxFQUFFLENBQ2pELENBQUM7b0NBRUYsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO3dDQUM5QixPQUFPLENBQUMsR0FBRyxDQUNULG9CQUFvQixFQUNwQixvQ0FBb0MsQ0FDckMsQ0FBQzt3Q0FDRixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxVQUFVOzRDQUMzQyxjQUFjLENBQUMsRUFBRSxDQUFDO3dDQUNwQixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFOzRDQUNuQywyQkFBMkIsRUFBRSxFQUFFLENBQUM7d0NBQ2xDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU87NENBQ3hDLDJCQUEyQixFQUFFLGFBQWEsQ0FBQztvQ0FDL0MsQ0FBQzt5Q0FBTSxJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0NBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEVBQ3BCLDRCQUE0QixDQUM3QixDQUFDO3dDQUNGLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFVBQVU7NENBQzNDLGNBQWMsQ0FBQyxFQUFFLENBQUM7b0NBQ3RCLENBQUM7eUNBQU0sQ0FBQzt3Q0FDTixZQUFZLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO29DQUNuQyxDQUFDO2dDQUNILENBQUM7NEJBQ0gsQ0FBQzt3QkFDSCxDQUFDO3dCQUVELElBQUksZ0JBQWdCLEVBQUUsV0FBVyxFQUFFLENBQUM7NEJBQ2xDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZ0JBQWdCLEVBQUUsV0FBVyxFQUM3QixnQ0FBZ0MsQ0FDakMsQ0FBQzs0QkFDRixNQUFNLGNBQWMsR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQzdDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLGdCQUFnQixDQUFDLFdBQVcsQ0FDL0MsQ0FBQzs0QkFFRixJQUFJLGNBQWMsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQ0FDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsRUFBRSxFQUFFLHFCQUFxQixDQUFDLENBQUM7Z0NBQ3ZELGNBQWMsQ0FBQyxVQUFVLEdBQUcsY0FBYyxDQUFDLEVBQUUsQ0FBQztnQ0FFOUMsTUFBTSxxQkFBcUIsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNuRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxnQkFBZ0IsQ0FBQyxXQUFXLENBQzlDLENBQUM7Z0NBQ0YsTUFBTSw0QkFBNEIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3pELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLGdCQUFnQixDQUFDLFdBQVcsQ0FDdkQsQ0FBQztnQ0FFRixJQUFJLDRCQUE0QixFQUFFLEVBQUUsRUFBRSxDQUFDO29DQUNyQyxjQUFjLENBQUMsRUFBRSxHQUFHLDRCQUE0QixFQUFFLEVBQUUsQ0FBQztvQ0FDckQsY0FBYyxDQUFDLE9BQU87d0NBQ3BCLDRCQUE0QixFQUFFLGFBQWEsQ0FBQztvQ0FFOUMsTUFBTSxxQkFBcUIsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNuRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ0osQ0FBQyxFQUFFLEVBQUU7d0NBQ0wsR0FBRyw0QkFBNEIsSUFBSSxjQUFjLENBQUMsVUFBVSxFQUFFLENBQ2pFLENBQUM7b0NBRUYsSUFBSSxxQkFBcUIsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO3dDQUMvQixPQUFPLENBQUMsR0FBRyxDQUNULHFCQUFxQixFQUNyQiw2QkFBNkIsQ0FDOUIsQ0FBQzt3Q0FDRixZQUFZLENBQUMscUJBQXFCLENBQUMsQ0FBQyxVQUFVOzRDQUM1QyxjQUFjLENBQUMsRUFBRSxDQUFDO3dDQUNwQixZQUFZLENBQUMscUJBQXFCLENBQUMsQ0FBQyxFQUFFOzRDQUNwQyw0QkFBNEIsRUFBRSxFQUFFLENBQUM7d0NBQ25DLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE9BQU87NENBQ3pDLDRCQUE0QixFQUFFLGFBQWEsQ0FBQztvQ0FDaEQsQ0FBQzt5Q0FBTSxJQUFJLHFCQUFxQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0NBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQ1QscUJBQXFCLEVBQ3JCLDZCQUE2QixDQUM5QixDQUFDO3dDQUNGLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLFVBQVU7NENBQzVDLGNBQWMsQ0FBQyxFQUFFLENBQUM7b0NBQ3RCLENBQUM7eUNBQU0sQ0FBQzt3Q0FDTixZQUFZLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO29DQUNwQyxDQUFDO2dDQUNILENBQUM7NEJBQ0gsQ0FBQzt3QkFDSCxDQUFDO3dCQUVELElBQUksZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLENBQUM7NEJBQ2pDLElBQUksZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLENBQUM7Z0NBQ2pDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsZ0JBQWdCLEVBQUUsVUFBVSxFQUM1QixtRUFBbUUsQ0FDcEUsQ0FBQztnQ0FDRixNQUFNLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQ3ZDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLGdCQUFnQixDQUFDLFVBQVUsQ0FDOUMsQ0FBQztnQ0FFRixJQUFJLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQ0FDakIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxRQUFRLEVBQUUsRUFBRSxFQUNaLG1EQUFtRCxDQUNwRCxDQUFDO29DQUNGLFFBQVEsQ0FBQyxVQUFVLEdBQUcsY0FBYyxDQUFDLEVBQUUsQ0FBQztvQ0FDeEMsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxRQUFRLEVBQUUsRUFBRSxDQUM5QixDQUFDO29DQUNGLE1BQU0sMkJBQTJCLEdBQUcsZ0JBQWdCLEVBQUUsSUFBSSxDQUN4RCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLFdBQVcsS0FBSyxRQUFRLEVBQUUsRUFBRSxDQUN2QyxDQUFDO29DQUVGLElBQUksMkJBQTJCLEVBQUUsRUFBRSxFQUFFLENBQUM7d0NBQ3BDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsMkJBQTJCLEVBQUUsRUFBRSxDQUFDO3dDQUM5QyxRQUFRLENBQUMsT0FBTzs0Q0FDZCwyQkFBMkIsRUFBRSxhQUFhLENBQUM7d0NBRTdDLE1BQU0sb0JBQW9CLEdBQUcsWUFBWSxFQUFFLFNBQVMsQ0FDbEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssMkJBQTJCLEVBQUUsRUFBRSxDQUNqRCxDQUFDO3dDQUVGLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs0Q0FDOUIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsRUFDcEIsNEJBQTRCLENBQzdCLENBQUM7NENBQ0YsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsVUFBVTtnREFDM0MsY0FBYyxDQUFDLEVBQUUsQ0FBQzs0Q0FDcEIsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsRUFBRTtnREFDbkMsMkJBQTJCLEVBQUUsRUFBRSxDQUFDOzRDQUNsQyxZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxPQUFPO2dEQUN4QywyQkFBMkIsRUFBRSxhQUFhLENBQUM7d0NBQy9DLENBQUM7NkNBQU0sSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDOzRDQUNyQyxPQUFPLENBQUMsR0FBRyxDQUNULG9CQUFvQixFQUNwQix5QkFBeUIsQ0FDMUIsQ0FBQzs0Q0FDRixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxVQUFVO2dEQUMzQyxjQUFjLENBQUMsRUFBRSxDQUFDO3dDQUN0QixDQUFDOzZDQUFNLENBQUM7NENBQ04sWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzt3Q0FDOUIsQ0FBQztvQ0FDSCxDQUFDO2dDQUNILENBQUM7NEJBQ0gsQ0FBQztpQ0FBTSxJQUFJLGdCQUFnQixFQUFFLFdBQVcsRUFBRSxDQUFDO2dDQUN6QyxPQUFPLENBQUMsR0FBRyxDQUNULGdCQUFnQixFQUFFLFdBQVcsRUFDN0IsZ0NBQWdDLENBQ2pDLENBQUM7Z0NBQ0YsTUFBTSxRQUFRLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxDQUN2QyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxnQkFBZ0IsQ0FBQyxVQUFVLENBQzlDLENBQUM7Z0NBQ0YsSUFBSSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxlQUFlLENBQUMsQ0FBQztvQ0FDM0MsUUFBUSxDQUFDLFdBQVcsR0FBRyxjQUFjLENBQUMsRUFBRSxDQUFDO29DQUN6QyxNQUFNLG9CQUFvQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ2xELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLFFBQVEsRUFBRSxFQUFFLENBQzlCLENBQUM7b0NBQ0YsTUFBTSwyQkFBMkIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3hELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLFFBQVEsRUFBRSxFQUFFLENBQ3ZDLENBQUM7b0NBRUYsSUFBSSwyQkFBMkIsRUFBRSxFQUFFLEVBQUUsQ0FBQzt3Q0FDcEMsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSywyQkFBMkIsRUFBRSxFQUFFLENBQ2pELENBQUM7d0NBRUYsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDOzRDQUM5QixPQUFPLENBQUMsR0FBRyxDQUNULG9CQUFvQixFQUNwQixpRUFBaUUsQ0FDbEUsQ0FBQzs0Q0FDRixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxXQUFXO2dEQUM1QyxjQUFjLENBQUMsRUFBRSxDQUFDOzRDQUNwQixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFO2dEQUNuQywyQkFBMkIsRUFBRSxFQUFFLENBQUM7NENBQ2xDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU87Z0RBQ3hDLDJCQUEyQixFQUFFLGFBQWEsQ0FBQzt3Q0FDL0MsQ0FBQzs2Q0FBTSxJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7NENBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQ3pCLGlFQUFpRSxDQUNsRSxDQUFDOzRDQUNGLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVc7Z0RBQzVDLGNBQWMsQ0FBQyxFQUFFLENBQUM7d0NBQ3RCLENBQUM7NkNBQU0sQ0FBQzs0Q0FDTixZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dDQUM5QixDQUFDO29DQUNILENBQUM7Z0NBQ0gsQ0FBQzs0QkFDSCxDQUFDO3dCQUNILENBQUM7d0JBRUQsS0FBSyxNQUFNLEVBQUUsSUFBSSwrQkFBK0IsRUFBRSxDQUFDOzRCQUNqRCxJQUFJLEVBQUUsRUFBRSxPQUFPLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dDQUMxQixFQUFFLENBQUMsT0FBTyxHQUFHLGNBQWMsRUFBRSxFQUFFLENBQUM7NEJBQ2xDLENBQUM7d0JBQ0gsQ0FBQzt3QkFFRCxLQUFLLE1BQU0sQ0FBQyxJQUFJLHFCQUFxQixFQUFFLENBQUM7NEJBQ3RDLElBQUksQ0FBQyxFQUFFLE9BQU8sS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0NBQ3pCLENBQUMsQ0FBQyxPQUFPLEdBQUcsY0FBYyxFQUFFLEVBQUUsQ0FBQzs0QkFDakMsQ0FBQzt3QkFDSCxDQUFDO3dCQUVELEtBQUssTUFBTSxDQUFDLElBQUkscUJBQXFCLEVBQUUsQ0FBQzs0QkFDdEMsSUFBSSxDQUFDLEVBQUUsT0FBTyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQ0FDekIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxjQUFjLEVBQUUsRUFBRSxDQUFDOzRCQUNqQyxDQUFDO3dCQUNILENBQUM7d0JBRUQsSUFBSSxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUM7NEJBQ2xCLDBCQUEwQjtnQ0FDeEIsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxTQUFTLEtBQUssRUFBRSxFQUFFLFNBQVMsQ0FBQztnQ0FDL0MsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQztnQ0FDL0IsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQ0FDZCxPQUFPLENBQUMsR0FBRyxDQUNULENBQUMsQ0FBQyxLQUFLLEVBQ1AsY0FBYyxFQUNkLGdCQUFnQixFQUNoQiwwRkFBMEYsQ0FDM0YsQ0FBQztnQ0FDRixDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxHQUFHLGNBQWMsRUFBRSxhQUFhLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztnQ0FDdEUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsY0FBYyxFQUFFLGFBQWEsQ0FBQzs0QkFDbEQsQ0FBQyxDQUFDLENBQUM7d0JBQ1AsQ0FBQztvQkFDSCxDQUFDO3lCQUFNLElBQUksY0FBYyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0JBQy9CLE1BQU0sb0JBQW9CLEdBQUcsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDO3dCQUMxRCxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLHVCQUF1QixDQUFDLENBQUM7d0JBRTNELElBQUksb0JBQW9CLEVBQUUsVUFBVSxFQUFFLENBQUM7NEJBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEVBQUUsVUFBVSxFQUNoQyxtQ0FBbUMsQ0FDcEMsQ0FBQzs0QkFFRixNQUFNLGFBQWEsR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQzVDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLG9CQUFvQixDQUFDLFVBQVUsQ0FDbEQsQ0FBQzs0QkFDRixNQUFNLG1DQUFtQyxHQUFHLFlBQVksRUFBRSxJQUFJLENBQzVELENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLG9CQUFvQixFQUFFLFVBQVUsQ0FDbkQsQ0FBQzs0QkFFRixJQUFJLG1DQUFtQyxFQUFFLEVBQUUsRUFBRSxDQUFDO2dDQUM1QyxPQUFPLENBQUMsR0FBRyxDQUNULG1DQUFtQyxFQUNuQywwR0FBMEcsQ0FDM0csQ0FBQztnQ0FFRixtQ0FBbUMsQ0FBQyxVQUFVO29DQUM1QyxjQUFjLENBQUMsRUFBRSxDQUFDO2dDQUVwQixNQUFNLDZCQUE2QixHQUFHLGdCQUFnQixFQUFFLElBQUksQ0FDMUQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNKLENBQUMsQ0FBQyxXQUFXLEtBQUssbUNBQW1DLEVBQUUsRUFBRSxDQUM1RCxDQUFDO2dDQUVGLElBQUksNkJBQTZCLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ3RDLG1DQUFtQyxDQUFDLEVBQUU7d0NBQ3BDLDZCQUE2QixFQUFFLEVBQUUsQ0FBQztvQ0FDcEMsbUNBQW1DLENBQUMsT0FBTzt3Q0FDekMsNkJBQTZCLENBQUMsYUFBYSxDQUFDO2dDQUNoRCxDQUFDOzRCQUNILENBQUM7NEJBRUQsSUFBSSxhQUFhLEVBQUUsRUFBRSxFQUFFLENBQUM7Z0NBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsYUFBYSxFQUFFLEVBQUUsRUFDakIsNERBQTRELENBQzdELENBQUM7Z0NBQ0YsYUFBYSxDQUFDLFVBQVUsR0FBRyxjQUFjLENBQUMsRUFBRSxDQUFDO2dDQUU3QyxNQUFNLHNCQUFzQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ3BELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLG9CQUFvQixDQUFDLFVBQVUsQ0FDakQsQ0FBQztnQ0FDRixNQUFNLDZCQUE2QixHQUFHLGdCQUFnQixFQUFFLElBQUksQ0FDMUQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLEtBQUssb0JBQW9CLENBQUMsVUFBVSxDQUMxRCxDQUFDO2dDQUVGLElBQUksNkJBQTZCLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ3RDLGFBQWEsQ0FBQyxFQUFFLEdBQUcsNkJBQTZCLEVBQUUsRUFBRSxDQUFDO29DQUNyRCxhQUFhLENBQUMsT0FBTzt3Q0FDbkIsNkJBQTZCLEVBQUUsYUFBYSxDQUFDO29DQUUvQyxNQUFNLHNCQUFzQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ3BELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLDZCQUE2QixFQUFFLEVBQUUsQ0FDbkQsQ0FBQztvQ0FFRixJQUFJLHNCQUFzQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0NBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsc0JBQXNCLEVBQ3RCLCtGQUErRixDQUNoRyxDQUFDO3dDQUNGLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFVBQVU7NENBQzdDLGNBQWMsQ0FBQyxFQUFFLENBQUM7d0NBQ3BCLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEVBQUU7NENBQ3JDLDZCQUE2QixFQUFFLEVBQUUsQ0FBQzt3Q0FDcEMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLENBQUMsT0FBTzs0Q0FDMUMsNkJBQTZCLEVBQUUsYUFBYSxDQUFDO29DQUNqRCxDQUFDO3lDQUFNLElBQUksc0JBQXNCLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3Q0FDdkMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxzQkFBc0IsRUFDdEIsK0ZBQStGLENBQ2hHLENBQUM7d0NBQ0YsWUFBWSxDQUFDLHNCQUFzQixDQUFDLENBQUMsVUFBVTs0Q0FDN0MsY0FBYyxDQUFDLEVBQUUsQ0FBQztvQ0FDdEIsQ0FBQzt5Q0FBTSxDQUFDO3dDQUNOLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7b0NBQ25DLENBQUM7Z0NBQ0gsQ0FBQzs0QkFDSCxDQUFDO3dCQUNILENBQUM7d0JBRUQsSUFBSSxvQkFBb0IsRUFBRSxXQUFXLEVBQUUsQ0FBQzs0QkFDdEMsTUFBTSxjQUFjLEdBQUcsbUJBQW1CLEVBQUUsSUFBSSxDQUM5QyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxvQkFBb0IsQ0FBQyxXQUFXLENBQ25ELENBQUM7NEJBRUYsTUFBTSxvQ0FBb0MsR0FBRyxZQUFZLEVBQUUsSUFBSSxDQUM3RCxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxvQkFBb0IsRUFBRSxXQUFXLENBQ3BELENBQUM7NEJBRUYsSUFBSSxvQ0FBb0MsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQ0FDN0MsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQ0FBb0MsRUFDcEMsNEdBQTRHLENBQzdHLENBQUM7Z0NBRUYsb0NBQW9DLENBQUMsVUFBVTtvQ0FDN0MsY0FBYyxDQUFDLEVBQUUsQ0FBQztnQ0FFcEIsTUFBTSw4QkFBOEIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQzNELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDSixDQUFDLENBQUMsV0FBVyxLQUFLLG9DQUFvQyxFQUFFLEVBQUUsQ0FDN0QsQ0FBQztnQ0FFRixJQUFJLDhCQUE4QixFQUFFLEVBQUUsRUFBRSxDQUFDO29DQUN2QyxvQ0FBb0MsQ0FBQyxFQUFFO3dDQUNyQyw4QkFBOEIsRUFBRSxFQUFFLENBQUM7b0NBQ3JDLG9DQUFvQyxDQUFDLE9BQU87d0NBQzFDLDhCQUE4QixDQUFDLGFBQWEsQ0FBQztnQ0FDakQsQ0FBQzs0QkFDSCxDQUFDOzRCQUVELElBQUksY0FBYyxFQUFFLEVBQUUsRUFBRSxDQUFDO2dDQUN2QixjQUFjLENBQUMsVUFBVSxHQUFHLG9CQUFvQixDQUFDLEVBQUUsQ0FBQztnQ0FFcEQsTUFBTSx1QkFBdUIsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNyRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxvQkFBb0IsQ0FBQyxXQUFXLENBQ2xELENBQUM7Z0NBQ0YsTUFBTSw4QkFBOEIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQzNELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLG9CQUFvQixDQUFDLFdBQVcsQ0FDM0QsQ0FBQztnQ0FFRixJQUFJLDhCQUE4QixFQUFFLEVBQUUsRUFBRSxDQUFDO29DQUN2QyxjQUFjLENBQUMsRUFBRSxHQUFHLDhCQUE4QixFQUFFLEVBQUUsQ0FBQztvQ0FDdkQsY0FBYyxDQUFDLE9BQU87d0NBQ3BCLDhCQUE4QixFQUFFLGFBQWEsQ0FBQztvQ0FFaEQsTUFBTSxzQ0FBc0MsR0FDMUMsWUFBWSxFQUFFLFNBQVMsQ0FDckIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNKLENBQUMsRUFBRSxFQUFFO3dDQUNMLEdBQUcsOEJBQThCLElBQUksY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUNuRSxDQUFDO29DQUVKLElBQUksdUJBQXVCLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3Q0FDakMsWUFBWSxDQUFDLHVCQUF1QixDQUFDLENBQUMsVUFBVTs0Q0FDOUMsb0JBQW9CLENBQUMsRUFBRSxDQUFDO3dDQUMxQixZQUFZLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxFQUFFOzRDQUN0Qyw4QkFBOEIsRUFBRSxFQUFFLENBQUM7d0NBQ3JDLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLE9BQU87NENBQzNDLDhCQUE4QixFQUFFLGFBQWEsQ0FBQztvQ0FDbEQsQ0FBQzt5Q0FBTSxJQUFJLHNDQUFzQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0NBQ3ZELFlBQVksQ0FDVixzQ0FBc0MsQ0FDdkMsQ0FBQyxVQUFVLEdBQUcsb0JBQW9CLENBQUMsRUFBRSxDQUFDO29DQUN6QyxDQUFDO3lDQUFNLENBQUM7d0NBQ04sWUFBWSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztvQ0FDcEMsQ0FBQztnQ0FDSCxDQUFDOzRCQUNILENBQUM7d0JBQ0gsQ0FBQzt3QkFFRCxJQUFJLG9CQUFvQixFQUFFLFVBQVUsRUFBRSxDQUFDOzRCQUNyQyxPQUFPLENBQUMsR0FBRyxDQUNULG9CQUFvQixFQUFFLFVBQVUsRUFDaEMsbUNBQW1DLENBQ3BDLENBQUM7NEJBQ0YsSUFBSSxvQkFBb0IsRUFBRSxVQUFVLEVBQUUsQ0FBQztnQ0FDckMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsRUFBRSxVQUFVLEVBQ2hDLDJFQUEyRSxDQUM1RSxDQUFDO2dDQUNGLE1BQU0sUUFBUSxHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FDdkMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssb0JBQW9CLENBQUMsVUFBVSxDQUNsRCxDQUFDO2dDQUVGLElBQUksUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDO29DQUNqQixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsZUFBZSxDQUFDLENBQUM7b0NBRTNDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsb0JBQW9CLENBQUMsRUFBRSxDQUFDO29DQUM5QyxNQUFNLG9CQUFvQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ2xELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLFFBQVEsRUFBRSxFQUFFLENBQzlCLENBQUM7b0NBQ0YsTUFBTSwyQkFBMkIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3hELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLFFBQVEsRUFBRSxFQUFFLENBQ3ZDLENBQUM7b0NBRUYsSUFBSSwyQkFBMkIsRUFBRSxFQUFFLEVBQUUsQ0FBQzt3Q0FDcEMsUUFBUSxDQUFDLEVBQUUsR0FBRywyQkFBMkIsRUFBRSxFQUFFLENBQUM7d0NBQzlDLFFBQVEsQ0FBQyxPQUFPOzRDQUNkLDJCQUEyQixFQUFFLGFBQWEsQ0FBQzt3Q0FFN0MsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSywyQkFBMkIsRUFBRSxFQUFFLENBQ2pELENBQUM7d0NBQ0YsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDOzRDQUM5QixPQUFPLENBQUMsR0FBRyxDQUNULG9CQUFvQixFQUNwQiw0QkFBNEIsQ0FDN0IsQ0FBQzs0Q0FDRixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxVQUFVO2dEQUMzQyxjQUFjLENBQUMsRUFBRSxDQUFDOzRDQUNwQixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFO2dEQUNuQywyQkFBMkIsRUFBRSxFQUFFLENBQUM7NENBQ2xDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU87Z0RBQ3hDLDJCQUEyQixFQUFFLGFBQWEsQ0FBQzt3Q0FDL0MsQ0FBQzs2Q0FBTSxJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7NENBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEVBQ3BCLDRCQUE0QixDQUM3QixDQUFDOzRDQUNGLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFVBQVU7Z0RBQzNDLGNBQWMsQ0FBQyxFQUFFLENBQUM7d0NBQ3RCLENBQUM7NkNBQU0sQ0FBQzs0Q0FDTixZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dDQUM5QixDQUFDO29DQUNILENBQUM7Z0NBQ0gsQ0FBQzs0QkFDSCxDQUFDO2lDQUFNLElBQUksb0JBQW9CLEVBQUUsV0FBVyxFQUFFLENBQUM7Z0NBQzdDLE1BQU0sUUFBUSxHQUFHLG1CQUFtQixFQUFFLElBQUksQ0FDeEMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssb0JBQW9CLENBQUMsVUFBVSxDQUNsRCxDQUFDO2dDQUNGLElBQUksUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDO29DQUNqQixPQUFPLENBQUMsR0FBRyxDQUNULFFBQVEsRUFBRSxFQUFFLEVBQ1osd0RBQXdELENBQ3pELENBQUM7b0NBQ0YsUUFBUSxDQUFDLFdBQVcsR0FBRyxjQUFjLENBQUMsRUFBRSxDQUFDO29DQUN6QyxNQUFNLG9CQUFvQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ2xELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLFFBQVEsRUFBRSxFQUFFLENBQzlCLENBQUM7b0NBQ0YsTUFBTSwyQkFBMkIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3hELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLFFBQVEsRUFBRSxFQUFFLENBQ3ZDLENBQUM7b0NBRUYsSUFBSSwyQkFBMkIsRUFBRSxFQUFFLEVBQUUsQ0FBQzt3Q0FDcEMsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSywyQkFBMkIsRUFBRSxFQUFFLENBQ2pELENBQUM7d0NBRUYsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDOzRDQUM5QixPQUFPLENBQUMsR0FBRyxDQUNULG9CQUFvQixFQUNwQix5RkFBeUYsQ0FDMUYsQ0FBQzs0Q0FDRixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxXQUFXO2dEQUM1QyxjQUFjLENBQUMsRUFBRSxDQUFDOzRDQUNwQixZQUFZLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFO2dEQUNuQywyQkFBMkIsRUFBRSxFQUFFLENBQUM7NENBQ2xDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU87Z0RBQ3hDLDJCQUEyQixFQUFFLGFBQWEsQ0FBQzt3Q0FDL0MsQ0FBQzs2Q0FBTSxJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7NENBQ3JDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVc7Z0RBQzVDLGNBQWMsQ0FBQyxFQUFFLENBQUM7d0NBQ3RCLENBQUM7NkNBQU0sQ0FBQzs0Q0FDTixZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dDQUM5QixDQUFDO29DQUNILENBQUM7Z0NBQ0gsQ0FBQzs0QkFDSCxDQUFDO3dCQUNILENBQUM7d0JBRUQsK0JBQStCLEVBQUUsT0FBTyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUU7NEJBQzlDLElBQUksRUFBRSxFQUFFLE9BQU8sS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0NBQzFCLEVBQUUsQ0FBQyxPQUFPLEdBQUcsY0FBYyxFQUFFLEVBQUUsQ0FBQzs0QkFDbEMsQ0FBQzt3QkFDSCxDQUFDLENBQUMsQ0FBQzt3QkFFSCxxQkFBcUIsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTs0QkFDbkMsSUFBSSxDQUFDLEVBQUUsT0FBTyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQ0FDekIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxjQUFjLEVBQUUsRUFBRSxDQUFDOzRCQUNqQyxDQUFDO3dCQUNILENBQUMsQ0FBQyxDQUFDO3dCQUVILElBQUksRUFBRSxFQUFFLFNBQVMsRUFBRSxDQUFDOzRCQUNsQiwwQkFBMEI7Z0NBQ3hCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxLQUFLLEVBQUUsRUFBRSxTQUFTLENBQUM7Z0NBQy9DLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUM7Z0NBQy9CLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7Z0NBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FDVCxDQUFDLENBQUMsS0FBSyxFQUNQLGNBQWMsRUFDZCxvQkFBb0IsRUFDcEIsOEZBQThGLENBQy9GLENBQUM7Z0NBQ0YsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsR0FBRyxjQUFjLENBQUMsYUFBYSxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLENBQUM7Z0NBQ3ZFLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLGNBQWMsRUFBRSxhQUFhLENBQUM7NEJBQ2xELENBQUMsQ0FBQyxDQUFDO3dCQUNQLENBQUM7b0JBQ0gsQ0FBQztnQkFDSCxDQUFDO3FCQUFNLENBQUM7b0JBQ04sTUFBTSxVQUFVLEdBQUcsbUJBQW1CLEVBQUUsSUFBSSxDQUMxQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUMxQixDQUFDO29CQUVGLElBQUksVUFBVSxFQUFFLEVBQUUsRUFBRSxDQUFDO3dCQUNuQixVQUFVLENBQUMsRUFBRSxHQUFHLGNBQWMsRUFBRSxFQUFFLENBQUM7d0JBQ25DLFVBQVUsQ0FBQyxPQUFPLEdBQUcsY0FBYyxFQUFFLGFBQWEsQ0FBQzt3QkFFbkQsSUFBSSxVQUFVLEVBQUUsVUFBVSxFQUFFLENBQUM7NEJBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBVSxFQUFFLFVBQVUsRUFDdEIscUNBQXFDLENBQ3RDLENBQUM7NEJBQ0YsTUFBTSxhQUFhLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxDQUM1QyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxVQUFVLENBQUMsVUFBVSxDQUN4QyxDQUFDOzRCQUVGLElBQUksYUFBYSxFQUFFLEVBQUUsRUFBRSxDQUFDO2dDQUN0QixPQUFPLENBQUMsR0FBRyxDQUNULGFBQWEsRUFBRSxFQUFFLEVBQ2pCLDhEQUE4RCxDQUMvRCxDQUFDO2dDQUNGLGFBQWEsQ0FBQyxVQUFVLEdBQUcsY0FBYyxDQUFDLEVBQUUsQ0FBQztnQ0FFN0MsTUFBTSxvQkFBb0IsR0FBRyxZQUFZLEVBQUUsU0FBUyxDQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxVQUFVLENBQUMsVUFBVSxDQUN2QyxDQUFDO2dDQUNGLE1BQU0sMkJBQTJCLEdBQUcsZ0JBQWdCLEVBQUUsSUFBSSxDQUN4RCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLFdBQVcsS0FBSyxVQUFVLENBQUMsVUFBVSxDQUNoRCxDQUFDO2dDQUVGLElBQUksMkJBQTJCLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ3BDLGFBQWEsQ0FBQyxFQUFFLEdBQUcsMkJBQTJCLEVBQUUsRUFBRSxDQUFDO29DQUNuRCxhQUFhLENBQUMsT0FBTzt3Q0FDbkIsMkJBQTJCLEVBQUUsYUFBYSxDQUFDO29DQUU3QyxNQUFNLG9CQUFvQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ2xELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLDJCQUEyQixFQUFFLEVBQUUsQ0FDakQsQ0FBQztvQ0FFRixJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7d0NBQzlCLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEVBQ3BCLCtGQUErRixDQUNoRyxDQUFDO3dDQUNGLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFVBQVU7NENBQzNDLGNBQWMsQ0FBQyxFQUFFLENBQUM7d0NBQ3BCLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQUU7NENBQ25DLDJCQUEyQixFQUFFLEVBQUUsQ0FBQzt3Q0FDbEMsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTzs0Q0FDeEMsMkJBQTJCLEVBQUUsYUFBYSxDQUFDO29DQUMvQyxDQUFDO3lDQUFNLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3Q0FDckMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsRUFDcEIseUhBQXlILENBQzFILENBQUM7d0NBQ0YsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsVUFBVTs0Q0FDM0MsY0FBYyxDQUFDLEVBQUUsQ0FBQztvQ0FDdEIsQ0FBQzt5Q0FBTSxDQUFDO3dDQUNOLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7b0NBQ25DLENBQUM7Z0NBQ0gsQ0FBQzs0QkFDSCxDQUFDO3dCQUNILENBQUM7d0JBRUQsSUFBSSxVQUFVLEVBQUUsV0FBVyxFQUFFLENBQUM7NEJBQzVCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBVSxFQUFFLFdBQVcsRUFDdkIsMEJBQTBCLENBQzNCLENBQUM7NEJBQ0YsTUFBTSxjQUFjLEdBQUcsbUJBQW1CLEVBQUUsSUFBSSxDQUM5QyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxVQUFVLENBQUMsV0FBVyxDQUN6QyxDQUFDOzRCQUVGLElBQUksY0FBYyxFQUFFLEVBQUUsRUFBRSxDQUFDO2dDQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxFQUFFLEVBQUUscUJBQXFCLENBQUMsQ0FBQztnQ0FDdkQsY0FBYyxDQUFDLFVBQVUsR0FBRyxjQUFjLENBQUMsRUFBRSxDQUFDO2dDQUU5QyxNQUFNLHFCQUFxQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ25ELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLFVBQVUsQ0FBQyxXQUFXLENBQ3hDLENBQUM7Z0NBQ0YsTUFBTSw0QkFBNEIsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQ3pELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLFVBQVUsQ0FBQyxXQUFXLENBQ2pELENBQUM7Z0NBRUYsSUFBSSw0QkFBNEIsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQ0FDckMsY0FBYyxDQUFDLEVBQUUsR0FBRyw0QkFBNEIsRUFBRSxFQUFFLENBQUM7b0NBQ3JELGNBQWMsQ0FBQyxPQUFPO3dDQUNwQiw0QkFBNEIsRUFBRSxhQUFhLENBQUM7b0NBRTlDLE1BQU0scUJBQXFCLEdBQUcsWUFBWSxFQUFFLFNBQVMsQ0FDbkQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssNEJBQTRCLEVBQUUsRUFBRSxDQUNsRCxDQUFDO29DQUVGLElBQUkscUJBQXFCLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3Q0FDL0IsT0FBTyxDQUFDLEdBQUcsQ0FDVCxxQkFBcUIsRUFDckIsNkJBQTZCLENBQzlCLENBQUM7d0NBQ0YsWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUMsVUFBVTs0Q0FDNUMsY0FBYyxDQUFDLEVBQUUsQ0FBQzt3Q0FDcEIsWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUMsRUFBRTs0Q0FDcEMsNEJBQTRCLEVBQUUsRUFBRSxDQUFDO3dDQUNuQyxZQUFZLENBQUMscUJBQXFCLENBQUMsQ0FBQyxPQUFPOzRDQUN6Qyw0QkFBNEIsRUFBRSxhQUFhLENBQUM7b0NBQ2hELENBQUM7eUNBQU0sSUFBSSxxQkFBcUIsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO3dDQUN0QyxPQUFPLENBQUMsR0FBRyxDQUNULHFCQUFxQixFQUNyQiw2QkFBNkIsQ0FDOUIsQ0FBQzt3Q0FDRixZQUFZLENBQUMscUJBQXFCLENBQUMsQ0FBQyxVQUFVOzRDQUM1QyxjQUFjLENBQUMsRUFBRSxDQUFDO29DQUN0QixDQUFDO3lDQUFNLENBQUM7d0NBQ04sWUFBWSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztvQ0FDcEMsQ0FBQztnQ0FDSCxDQUFDOzRCQUNILENBQUM7d0JBQ0gsQ0FBQzt3QkFFRCxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO3dCQUU5QixJQUFJLEVBQUUsRUFBRSxVQUFVLEVBQUUsQ0FBQzs0QkFDbkIsSUFBSSxFQUFFLEVBQUUsVUFBVSxFQUFFLENBQUM7Z0NBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQ1QsRUFBRSxFQUFFLFVBQVUsRUFDZCx1Q0FBdUMsQ0FDeEMsQ0FBQztnQ0FDRixNQUFNLFFBQVEsR0FBRyxtQkFBbUIsRUFBRSxJQUFJLENBQ3hDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxVQUFVLENBQ2hDLENBQUM7Z0NBRUYsSUFBSSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxFQUFFLEVBQUUsRUFDWixtREFBbUQsQ0FDcEQsQ0FBQztvQ0FDRixRQUFRLENBQUMsVUFBVSxHQUFHLGNBQWMsQ0FBQyxFQUFFLENBQUM7b0NBQ3hDLE1BQU0sb0JBQW9CLEdBQUcsWUFBWSxFQUFFLFNBQVMsQ0FDbEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssUUFBUSxFQUFFLEVBQUUsQ0FDOUIsQ0FBQztvQ0FDRixNQUFNLDJCQUEyQixHQUFHLGdCQUFnQixFQUFFLElBQUksQ0FDeEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLEtBQUssUUFBUSxFQUFFLEVBQUUsQ0FDdkMsQ0FBQztvQ0FFRixJQUFJLDJCQUEyQixFQUFFLEVBQUUsRUFBRSxDQUFDO3dDQUNwQyxRQUFRLENBQUMsRUFBRSxHQUFHLDJCQUEyQixFQUFFLEVBQUUsQ0FBQzt3Q0FDOUMsUUFBUSxDQUFDLE9BQU87NENBQ2QsMkJBQTJCLEVBQUUsYUFBYSxDQUFDO3dDQUU3QyxNQUFNLG9CQUFvQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ2xELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLDJCQUEyQixFQUFFLEVBQUUsQ0FDakQsQ0FBQzt3Q0FFRixJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7NENBQzlCLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEVBQ3BCLDRCQUE0QixDQUM3QixDQUFDOzRDQUNGLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFVBQVU7Z0RBQzNDLGNBQWMsQ0FBQyxFQUFFLENBQUM7NENBQ3BCLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQUU7Z0RBQ25DLDJCQUEyQixFQUFFLEVBQUUsQ0FBQzs0Q0FDbEMsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTztnREFDeEMsMkJBQTJCLEVBQUUsYUFBYSxDQUFDO3dDQUMvQyxDQUFDOzZDQUFNLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs0Q0FDckMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsRUFDcEIsNEJBQTRCLENBQzdCLENBQUM7NENBQ0YsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsVUFBVTtnREFDM0MsY0FBYyxDQUFDLEVBQUUsQ0FBQzt3Q0FDdEIsQ0FBQzs2Q0FBTSxDQUFDOzRDQUNOLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7d0NBQzlCLENBQUM7b0NBQ0gsQ0FBQztnQ0FDSCxDQUFDOzRCQUNILENBQUM7aUNBQU0sSUFBSSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUM7Z0NBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO2dDQUNqRCxNQUFNLFFBQVEsR0FBRyxtQkFBbUIsRUFBRSxJQUFJLENBQ3hDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxVQUFVLENBQ2hDLENBQUM7Z0NBRUYsSUFBSSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7b0NBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsUUFBUSxFQUFFLEVBQUUsRUFDWixzQ0FBc0MsQ0FDdkMsQ0FBQztvQ0FDRixRQUFRLENBQUMsV0FBVyxHQUFHLGNBQWMsQ0FBQyxFQUFFLENBQUM7b0NBQ3pDLE1BQU0sb0JBQW9CLEdBQUcsWUFBWSxFQUFFLFNBQVMsQ0FDbEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssUUFBUSxFQUFFLEVBQUUsQ0FDOUIsQ0FBQztvQ0FDRixNQUFNLDJCQUEyQixHQUFHLGdCQUFnQixFQUFFLElBQUksQ0FDeEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLEtBQUssUUFBUSxFQUFFLEVBQUUsQ0FDdkMsQ0FBQztvQ0FFRixJQUFJLDJCQUEyQixFQUFFLEVBQUUsRUFBRSxDQUFDO3dDQUNwQyxNQUFNLG9CQUFvQixHQUFHLFlBQVksRUFBRSxTQUFTLENBQ2xELENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLDJCQUEyQixFQUFFLEVBQUUsQ0FDakQsQ0FBQzt3Q0FFRixJQUFJLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7NENBQzlCLE9BQU8sQ0FBQyxHQUFHLENBQ1Qsb0JBQW9CLEVBQ3BCLDBFQUEwRSxDQUMzRSxDQUFDOzRDQUNGLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVc7Z0RBQzVDLGNBQWMsQ0FBQyxFQUFFLENBQUM7NENBQ3BCLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQUU7Z0RBQ25DLDJCQUEyQixFQUFFLEVBQUUsQ0FBQzs0Q0FDbEMsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTztnREFDeEMsMkJBQTJCLEVBQUUsYUFBYSxDQUFDO3dDQUMvQyxDQUFDOzZDQUFNLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs0Q0FDckMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFDekIsaUZBQWlGLENBQ2xGLENBQUM7NENBQ0YsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUMsV0FBVztnREFDNUMsY0FBYyxDQUFDLEVBQUUsQ0FBQzt3Q0FDdEIsQ0FBQzs2Q0FBTSxDQUFDOzRDQUNOLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7d0NBQzlCLENBQUM7b0NBQ0gsQ0FBQztnQ0FDSCxDQUFDOzRCQUNILENBQUM7d0JBQ0gsQ0FBQzt3QkFFRCwrQkFBK0IsRUFBRSxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRTs0QkFDOUMsSUFBSSxFQUFFLEVBQUUsT0FBTyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQ0FDMUIsRUFBRSxDQUFDLE9BQU8sR0FBRyxjQUFjLEVBQUUsRUFBRSxDQUFDOzRCQUNsQyxDQUFDO3dCQUNILENBQUMsQ0FBQyxDQUFDO3dCQUVILHFCQUFxQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFOzRCQUNuQyxJQUFJLENBQUMsRUFBRSxPQUFPLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dDQUN6QixDQUFDLENBQUMsT0FBTyxHQUFHLGNBQWMsRUFBRSxFQUFFLENBQUM7NEJBQ2pDLENBQUM7d0JBQ0gsQ0FBQyxDQUFDLENBQUM7d0JBRUgsSUFBSSxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUM7NEJBQ2xCLDBCQUEwQjtnQ0FDeEIsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxTQUFTLEtBQUssRUFBRSxFQUFFLFNBQVMsQ0FBQztnQ0FDL0MsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQztnQ0FDL0IsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQ0FDZCxPQUFPLENBQUMsR0FBRyxDQUNULENBQUMsQ0FBQyxLQUFLLEVBQ1AsVUFBVSxFQUNWLG1DQUFtQyxDQUNwQyxDQUFDO2dDQUNGLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEdBQUcsY0FBYyxDQUFDLGFBQWEsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxDQUFDO2dDQUN2RSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxjQUFjLEVBQUUsYUFBYSxDQUFDOzRCQUNsRCxDQUFDLENBQUMsQ0FBQzt3QkFDUCxDQUFDO29CQUNILENBQUM7Z0JBQ0gsQ0FBQztnQkFFRCxjQUFjLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN4QixPQUFPLEVBQUUsQ0FBQztZQUNaLENBQUM7WUFFRCxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUMsQ0FDRixDQUFDO1FBRUYsTUFBTSw4QkFBOEIsR0FDbEMsMEJBQTBCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRXpELFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUM7UUFFOUQsTUFBTSx5QkFBeUIsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUM5Qyx3QkFBd0IsRUFDeEIsY0FBYyxFQUNkLElBQUksQ0FDTCxDQUFDO1FBRUYsTUFBTSxtQkFBbUIsR0FBRyx5QkFBeUI7YUFDbEQsTUFBTSxDQUFDLDhCQUE4QixDQUFDO2FBQ3RDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNyQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZCLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO1FBRTVFLGNBQWMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSwrQkFBK0IsQ0FBQyxDQUNoRCxDQUFDO1FBRUYsTUFBTSxtQ0FBbUMsQ0FDdkMsbUJBQW1CLEVBQUUsTUFBTSxDQUN6QixDQUFDLENBQUMsRUFBRSxFQUFFLENBQ0osQ0FBQyxpQ0FBaUMsRUFBRSxJQUFJLENBQ3RDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsWUFBWSxLQUFLLENBQUMsRUFBRSxZQUFZLENBQzNDLENBQ0osQ0FDRixDQUFDO1FBRUYsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDO1lBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9DLHVCQUF1QixDQUNyQixtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM1QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDLENBQzdDLENBQ0Y7U0FDRixDQUFDLENBQUM7UUFFSCxLQUFLLE1BQU0sb0JBQW9CLElBQUkscUJBQXFCLEVBQUUsQ0FBQztZQUN6RCxNQUFNLGNBQWMsR0FBRyxnQkFBZ0IsRUFBRSxJQUFJLENBQzNDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxLQUFLLG9CQUFvQixFQUFFLE9BQU8sQ0FDeEQsQ0FBQztZQUVGLElBQUksY0FBYyxFQUFFLEVBQUUsRUFBRSxDQUFDO2dCQUN2QixvQkFBb0IsQ0FBQyxPQUFPLEdBQUcsY0FBYyxFQUFFLEVBQUUsQ0FBQztZQUNwRCxDQUFDO1FBQ0gsQ0FBQztRQUVELEtBQUssTUFBTSw4QkFBOEIsSUFBSSwrQkFBK0IsRUFBRSxDQUFDO1lBQzdFLE1BQU0sY0FBYyxHQUFHLGdCQUFnQixFQUFFLElBQUksQ0FDM0MsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLEtBQUssOEJBQThCLEVBQUUsT0FBTyxDQUNsRSxDQUFDO1lBRUYsSUFBSSxjQUFjLEVBQUUsRUFBRSxFQUFFLENBQUM7Z0JBQ3ZCLDhCQUE4QixDQUFDLE9BQU8sR0FBRyxjQUFjLEVBQUUsRUFBRSxDQUFDO1lBQzlELENBQUM7UUFDSCxDQUFDO1FBRUQsS0FBSyxNQUFNLG9CQUFvQixJQUFJLHFCQUFxQixFQUFFLENBQUM7WUFDekQsTUFBTSxjQUFjLEdBQUcsZ0JBQWdCLEVBQUUsSUFBSSxDQUMzQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLFdBQVcsS0FBSyxvQkFBb0IsRUFBRSxPQUFPLENBQ3hELENBQUM7WUFFRixJQUFJLGNBQWMsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQkFDdkIsb0JBQW9CLENBQUMsT0FBTyxHQUFHLGNBQWMsRUFBRSxFQUFFLENBQUM7WUFDcEQsQ0FBQztRQUNILENBQUM7UUFFRCxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7UUFDbkUscUJBQXFCLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsd0JBQXdCLENBQUMsQ0FDekMsQ0FBQztRQUNGLE1BQU0saUJBQWlCLEdBQUcsZUFBZTthQUN0QyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDO1lBQzVCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDM0IsTUFBTSx1QkFBdUIsR0FDM0IscUJBQXFCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRXBELGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDBCQUEwQixDQUFDLENBQzNDLENBQUM7UUFDRixNQUFNLHNCQUFzQixDQUMxQixDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEVBQ3pCLHNCQUFzQixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUNwQyxDQUFDO1FBQ0YsTUFBTSxlQUFlLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUMvQyxNQUFNLHlDQUF5QyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQ3hELCtCQUErQixFQUMvQixTQUFTLENBQ1YsQ0FBQztRQUNGLE1BQU0sY0FBYyxHQUFHLHlDQUF5QyxFQUFFLEdBQUcsQ0FDbkUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQ3BCLENBQUM7UUFDRixNQUFNLGtDQUFrQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3pELE1BQU0seUJBQXlCLENBQUMsK0JBQStCLENBQUMsQ0FBQztRQUNqRSxNQUFNLHVCQUF1QixDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFDckQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDdkMsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFHLEtBQUssRUFDcEMsU0FBaUIsRUFDakIsU0FBaUIsRUFDakIsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILE1BQU0sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLFdBQVcsYUFBYSxTQUFTLEVBQUUsRUFBRTtZQUN2RCxPQUFPLEVBQUU7Z0JBQ1AsYUFBYSxFQUFFLFVBQVUsU0FBUyxFQUFFO2dCQUNwQyxXQUFXLEVBQUUsa0JBQWtCO2FBQ2hDO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsOEJBQThCLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGdDQUFnQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxLQUFLLEVBQUUsU0FBaUIsRUFBRSxTQUFpQixFQUFFLEVBQUU7SUFDM0UsSUFBSSxDQUFDO1FBQ0gsTUFBTSxHQUFHLEdBQTBCLE1BQU0sR0FBRyxDQUMxQyxHQUFHLFdBQVcsYUFBYSxTQUFTLEVBQUUsRUFDdEM7WUFDRSxPQUFPLEVBQUU7Z0JBQ1AsYUFBYSxFQUFFLFVBQVUsU0FBUyxFQUFFO2dCQUNwQyxXQUFXLEVBQUUsa0JBQWtCO2FBQ2hDO1NBQ0YsQ0FDRixDQUFDLElBQUksRUFBRSxDQUFDO1FBRVQsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDZCQUE2QixDQUFDLENBQUM7SUFDaEQsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLDBCQUEwQixHQUFHLEtBQUssRUFDN0MsU0FBaUIsRUFDakIsU0FBaUIsRUFDakIsU0FBaUIsRUFDakIsUUFBZ0IsRUFDaEIsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILE1BQU0sT0FBTyxHQUFHO1lBQ2QsVUFBVSxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRTtZQUN6RCxRQUFRO1NBQ1QsQ0FBQztRQUVGLE1BQU0sR0FBRzthQUNOLEtBQUssQ0FBQyxHQUFHLFdBQVcsYUFBYSxTQUFTLEVBQUUsRUFBRTtZQUM3QyxJQUFJLEVBQUUsT0FBTztZQUNiLE9BQU8sRUFBRTtnQkFDUCxhQUFhLEVBQUUsVUFBVSxTQUFTLEVBQUU7Z0JBQ3BDLFdBQVcsRUFBRSxrQkFBa0I7YUFDaEM7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxpREFBaUQsQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQztJQUNuRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsS0FBSyxFQUNwQyxTQUFpQixFQUNqQixTQUFpQixFQUNqQixRQUFnQixFQUNoQixNQUFjLEVBQ2QsUUFBZ0IsRUFDaEIsV0FBb0IsRUFDcEIsWUFBcUIsRUFDckIsZUFBMEIsRUFDMUIsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILElBQUksS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FDVCxLQUFLLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDM0IsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7YUFDbEIsTUFBTSxDQUFDLHFCQUFxQixDQUFDLEVBQ2hDLFFBQVEsRUFDUixNQUFNLEVBQ04sUUFBUSxFQUNSOzs7K0NBR3lDLENBQzFDLENBQUM7UUFFRixJQUFJLFFBQVEsR0FBUSxFQUFFLENBQUM7UUFFdkIsSUFBSSxXQUFXLEVBQUUsTUFBTSxHQUFHLENBQUMsSUFBSSxZQUFZLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3hELFFBQVEsR0FBRztnQkFDVCxZQUFZLEVBQUUsV0FBVztnQkFDekIsYUFBYSxFQUFFLFlBQVk7YUFDNUIsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFJLGVBQWUsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDaEMsUUFBUSxHQUFHO2dCQUNULEdBQUcsUUFBUTtnQkFDWCxnQkFBZ0IsRUFBRSxlQUFlLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDOUQsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFJLE9BQU8sR0FBcUMsRUFBRSxDQUFDO1FBRW5ELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDdEMsT0FBTyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDOUIsQ0FBQztRQUVELE9BQU8sR0FBRztZQUNSLEdBQUcsT0FBTztZQUNWLFVBQVUsRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQ3ZDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO2lCQUNsQixHQUFHLEVBQUU7aUJBQ0wsTUFBTSxFQUFFO1lBQ1gsTUFBTTtZQUNOLFFBQVE7U0FDVCxDQUFDO1FBRUYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsbUNBQW1DLENBQUMsQ0FBQztRQUUxRCxNQUFNLEdBQUcsR0FBMEIsTUFBTSxHQUFHO2FBQ3pDLElBQUksQ0FBQyxHQUFHLFdBQVcsb0JBQW9CLEVBQUU7WUFDeEMsSUFBSSxFQUFFLE9BQU87WUFDYixPQUFPLEVBQUU7Z0JBQ1AsYUFBYSxFQUFFLFVBQVUsU0FBUyxFQUFFO2dCQUNwQyxXQUFXLEVBQUUsa0JBQWtCO2FBQ2hDO1NBQ0YsQ0FBQzthQUNELElBQUksRUFBRSxDQUFDO1FBRVYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsK0JBQStCLENBQUMsQ0FBQztRQUVsRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQztJQUNuRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsS0FBSyxFQUFFLFdBQTZCLEVBQUUsRUFBRTtJQUN2RSxJQUFJLENBQUM7UUFDSCxNQUFNLGFBQWEsR0FBRyxtQkFBbUIsQ0FBQztRQUMxQyxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1NBOEJULENBQUM7UUFFTixNQUFNLFNBQVMsR0FBRztZQUNoQixXQUFXO1NBQ1osQ0FBQztRQUVGLE1BQU0sR0FBRyxHQU9MLE1BQU0sR0FBRzthQUNWLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVM7YUFDVjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQ1QsR0FBRyxFQUFFLElBQUksRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQ3ZDLG9DQUFvQyxDQUNyQyxDQUFDO0lBQ0osQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSwrQkFBK0IsQ0FBQyxDQUFDO0lBQ2xELENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxnQkFBZ0IsR0FBRyxLQUFLLEVBQUUsVUFBMEIsRUFBRSxFQUFFO0lBQ25FLElBQUksQ0FBQztRQUNILE1BQU0sYUFBYSxHQUFHLGtCQUFrQixDQUFDO1FBQ3pDLE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQTBCVCxDQUFDO1FBRU4sTUFBTSxTQUFTLEdBQUc7WUFDaEIsVUFBVTtTQUNYLENBQUM7UUFFRixNQUFNLEdBQUcsR0FBd0QsTUFBTSxHQUFHO2FBQ3ZFLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVM7YUFDVjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLHVDQUF1QyxDQUFDLENBQUM7UUFFMUQsT0FBTyxHQUFHLEVBQUUsSUFBSSxFQUFFLHFCQUFxQixDQUFDO0lBQzFDLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsOEJBQThCLENBQUMsQ0FBQztJQUNqRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sd0JBQXdCLEdBQUcsS0FBSyxFQUFFLEdBQWEsRUFBRSxFQUFFO0lBQzlELElBQUksQ0FBQztRQUNILE1BQU0sYUFBYSxHQUFHLDJCQUEyQixDQUFDO1FBQ2xELE1BQU0sS0FBSyxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQTBCVCxDQUFDO1FBRU4sTUFBTSxTQUFTLEdBQUc7WUFDaEIsR0FBRztTQUNKLENBQUM7UUFFRixNQUFNLEdBQUcsR0FBK0MsTUFBTSxHQUFHO2FBQzlELElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsT0FBTyxFQUFFO2dCQUNQLHVCQUF1QixFQUFFLGlCQUFpQjtnQkFDMUMsZUFBZSxFQUFFLE9BQU87YUFDekI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osYUFBYTtnQkFDYixLQUFLO2dCQUNMLFNBQVM7YUFDVjtTQUNGLENBQUM7YUFDRCxJQUFJLEVBQUUsQ0FBQztRQUVWLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLDZDQUE2QyxDQUFDLENBQUM7UUFFaEUsT0FBTyxHQUFHLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQztJQUMvQixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHdDQUF3QyxDQUFDLENBQUM7SUFDM0QsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG1DQUFtQyxHQUFHLEtBQUssRUFDdEQsbUJBQW9DLEVBQ3BDLEVBQUU7SUFDRixJQUFJLENBQUM7UUFDSCxNQUFNLHFCQUFxQixHQUFHLG1CQUFtQixDQUFDLE1BQU0sQ0FDdEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUN6QixDQUFDO1FBRUYsTUFBTSxhQUFhLEdBQUcscUJBQXFCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDekUsTUFBTSxvQkFBb0IsR0FBRyxNQUFNLHdCQUF3QixDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRTNFLE1BQU0seUJBQXlCLEdBQUcscUJBQXFCLEVBQUUsTUFBTSxDQUM3RCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQ3BFLENBQUM7UUFFRixJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztZQUN4QyxPQUFPLENBQUMsR0FBRyxDQUFDLHdDQUF3QyxDQUFDLENBQUM7WUFDdEQsT0FBTztRQUNULENBQUM7UUFFRCxLQUFLLE1BQU0sdUJBQXVCLElBQUkseUJBQXlCLEVBQUUsQ0FBQztZQUNoRSxNQUFNLFNBQVMsR0FBRyxNQUFNLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUN6RSxNQUFNLGlCQUFpQixHQUFHLG9CQUFvQixFQUFFLElBQUksQ0FDbEQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssdUJBQXVCLEVBQUUsWUFBWSxDQUN2RCxDQUFDO1lBQ0YsSUFDRSxTQUFTO2dCQUNULGlCQUFpQixFQUFFLEdBQUcsS0FBSyxNQUFNO2dCQUNqQyxPQUFPLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssUUFBUSxFQUN2RCxDQUFDO2dCQUNELE1BQU0sMEJBQTBCLENBQzlCLFNBQVMsRUFDVCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUNuQyx1QkFBdUIsRUFBRSxTQUFTLEVBQ2xDLHVCQUF1QixFQUFFLFFBQVEsQ0FDbEMsQ0FBQztZQUNKLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxnREFBZ0QsQ0FBQyxDQUFDO0lBQ25FLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxtQ0FBbUMsR0FBRyxLQUFLLEVBQ3RELG1CQUFvQyxFQUNwQyxhQUdHLEVBQ0gsRUFBRTtJQUNGLElBQUksQ0FBQztRQUNILE1BQU0sMEJBQTBCLEdBQUcsbUJBQW1CO1lBQ3BELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDOUQsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFbEMsTUFBTSw0QkFBNEIsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUMzQywwQkFBMEIsRUFDMUIsV0FBVyxDQUNaLENBQUM7UUFFRixJQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3ZDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztZQUM5QyxPQUFPO1FBQ1QsQ0FBQztRQUNELE1BQU0sb0JBQW9CLEdBQUcsTUFBTSxpQ0FBaUMsQ0FDbEUsNEJBQTRCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQ3ZELENBQUM7UUFFRixNQUFNLFdBQVcsR0FHVixFQUFFLENBQUM7UUFFVixLQUFLLE1BQU0sYUFBYSxJQUFJLG9CQUFvQixFQUFFLENBQUM7WUFDakQsTUFBTSxTQUFTLEdBQUcsTUFBTSxlQUFlLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRS9ELElBQUksU0FBUyxFQUFFLENBQUM7Z0JBQ2QsTUFBTSxZQUFZLEdBQUcsNEJBQTRCLEVBQUUsSUFBSSxDQUNyRCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLFNBQVMsS0FBSyxhQUFhLEVBQUUsRUFBRSxDQUMxQyxDQUFDO2dCQUNGLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztvQkFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO29CQUN6RCxTQUFTO2dCQUNYLENBQUM7Z0JBRUQsTUFBTSxTQUFTLEdBQUcsTUFBTSx3Q0FBd0MsQ0FDOUQsWUFBWSxFQUFFLFNBQVMsQ0FDeEIsQ0FBQztnQkFFRixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7b0JBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO29CQUN2RCxTQUFTO2dCQUNYLENBQUM7Z0JBQ0QsTUFBTSxZQUFZLEdBQUcsU0FBUyxFQUFFLElBQUksQ0FDbEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLEtBQUssYUFBYSxFQUFFLE1BQU0sQ0FDM0MsQ0FBQztnQkFFRixNQUFNLFVBQVUsR0FBRyxNQUFNLGlCQUFpQixDQUN4QyxTQUFTLEVBQ1QsWUFBWSxFQUFFLFNBQVMsRUFDdkIsYUFBYSxFQUFFLFFBQVEsRUFDdkIsWUFBWSxFQUFFLE9BQU8sRUFDckIsYUFBYSxFQUFFLFFBQVEsRUFDdkIsWUFBWSxFQUFFLElBQUksRUFDbEIsWUFBWSxFQUFFLFlBQVksRUFDMUIsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUN2QyxDQUFDO2dCQUVGLFdBQVcsQ0FBQyxJQUFJLENBQUM7b0JBQ2YsR0FBRyxVQUFVO29CQUNiLFNBQVMsRUFBRSxhQUFhLEVBQUUsRUFBRTtvQkFDNUIsTUFBTSxFQUFFLGFBQWEsRUFBRSxNQUFNO2lCQUM5QixDQUFDLENBQUM7Z0JBRUgsT0FBTyxDQUFDLEdBQUcsQ0FDVCxVQUFVLEVBQ1Ysd0RBQXdELENBQ3pELENBQUM7WUFDSixDQUFDO1FBQ0gsQ0FBQztRQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDekIsT0FBTyxXQUFXLENBQUM7UUFDckIsQ0FBQztJQUNILENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsK0JBQStCLENBQUMsQ0FBQztJQUNsRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0saUNBQWlDLEdBQUcsS0FBSyxFQUNwRCxVQUFvQixFQUNwQixFQUFFO0lBQ0YsSUFBSSxDQUFDO1FBQ0gsTUFBTSxhQUFhLEdBQUcsb0JBQW9CLENBQUM7UUFDM0MsTUFBTSxLQUFLLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7U0E4Q1QsQ0FBQztRQUVOLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLFVBQVU7U0FDWCxDQUFDO1FBRUYsTUFBTSxHQUFHLEdBQXNELE1BQU0sR0FBRzthQUNyRSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3BCLE9BQU8sRUFBRTtnQkFDUCx1QkFBdUIsRUFBRSxpQkFBaUI7Z0JBQzFDLGVBQWUsRUFBRSxPQUFPO2FBQ3pCO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLGFBQWE7Z0JBQ2IsS0FBSztnQkFDTCxTQUFTO2FBQ1Y7U0FDRixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7UUFFVixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSx3REFBd0QsQ0FBQyxDQUFDO1FBRTNFLE9BQU8sR0FBRyxFQUFFLElBQUksRUFBRSxjQUFjLENBQUM7SUFDbkMsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxpQ0FBaUMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7QUFDSCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBhdXRoQXBpVG9rZW4sXG4gIGNsYXNzaWZpY2F0aW9uVXJsLFxuICBkYXlPZldlZWtJbnRUb1N0cmluZyxcbiAgZXZlbnRWZWN0b3JOYW1lLFxuICBleHRlcm5hbE1lZXRpbmdMYWJlbCxcbiAgZ29vZ2xlQ2FsZW5kYXJSZXNvdXJjZSxcbiAgZ29vZ2xlQ2xpZW50SWRBbmRyb2lkLFxuICBnb29nbGVDbGllbnRJZEF0b21pY1dlYixcbiAgZ29vZ2xlQ2xpZW50SWRJb3MsXG4gIGdvb2dsZUNsaWVudElkV2ViLFxuICBnb29nbGVDbGllbnRTZWNyZXRBdG9taWNXZWIsXG4gIGdvb2dsZUNsaWVudFNlY3JldFdlYixcbiAgZ29vZ2xlVG9rZW5VcmwsXG4gIGhhc3VyYUFkbWluU2VjcmV0LFxuICBoYXN1cmFHcmFwaFVybCxcbiAgbWVldGluZ0xhYmVsLFxuICBtaW5UaHJlc2hvbGRTY29yZSxcbiAgb25PcHRhUGxhbkNhbGVuZGFyQWRtaW5DYWxsQmFja1VybCxcbiAgb3BlblNlYXJjaEVuZFBvaW50LFxuICBvcHRhUGxhbm5lclBhc3N3b3JkLFxuICBvcHRhUGxhbm5lclVybCxcbiAgb3B0YVBsYW5uZXJVc2VybmFtZSxcbiAgb3B0YXBsYW5uZXJEdXJhdGlvbixcbiAgc2VhcmNoSW5kZXgsXG4gIHRleHQyVmVjdG9yVXJsLFxuICB2ZWN0b3JEaW1lbnNpb25zLFxuICB6b29tQmFzZVRva2VuVXJsLFxuICB6b29tQmFzZVVybCxcbiAgem9vbUNsaWVudElkLFxuICB6b29tQ2xpZW50U2VjcmV0LFxuICB6b29tSVZGb3JQYXNzLFxuICB6b29tUGFzc0tleSxcbiAgem9vbVJlc291cmNlTmFtZSxcbiAgem9vbVNhbHRGb3JQYXNzLFxufSBmcm9tICdAcG9zdF9wcm9jZXNzX2NhbGVuZGFyL19saWJzL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBCdWZmZXJUaW1lTnVtYmVyVHlwZSxcbiAgRXZlbnRQbHVzVHlwZSxcbiAgRXZlbnRUeXBlLFxuICBNZWV0aW5nQXNzaXN0QXR0ZW5kZWVUeXBlLFxuICBNZWV0aW5nQXNzaXN0RXZlbnRUeXBlLFxuICBNZWV0aW5nQXNzaXN0UHJlZmVycmVkVGltZVJhbmdlVHlwZSxcbiAgTWVldGluZ0Fzc2lzdFR5cGUsXG4gIEV2ZW50TWVldGluZ1BsdXNUeXBlLFxuICBQcmVmZXJyZWRUaW1lUmFuZ2VUeXBlLFxuICBSZW1pbmRlcnNGb3JFdmVudFR5cGUsXG4gIFZhbHVlc1RvUmV0dXJuRm9yQnVmZmVyRXZlbnRzVHlwZSxcbiAgVXNlclByZWZlcmVuY2VUeXBlLFxuICBDYWxlbmRhclR5cGUsXG4gIFdvcmtUaW1lVHlwZSxcbiAgVGltZVNsb3RUeXBlLFxuICBNb250aFR5cGUsXG4gIERheVR5cGUsXG4gIE1NLFxuICBERCxcbiAgTW9udGhEYXlUeXBlLFxuICBUaW1lLFxuICBFdmVudFBhcnRQbGFubmVyUmVxdWVzdEJvZHlUeXBlLFxuICBJbml0aWFsRXZlbnRQYXJ0VHlwZSxcbiAgSW5pdGlhbEV2ZW50UGFydFR5cGVQbHVzLFxuICBVc2VyUGxhbm5lclJlcXVlc3RCb2R5VHlwZSxcbiAgUmV0dXJuQm9keUZvckhvc3RGb3JPcHRhcGxhbm5lclByZXBUeXBlLFxuICBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlLFxuICBSZXR1cm5Cb2R5Rm9yRXh0ZXJuYWxBdHRlbmRlZUZvck9wdGFwbGFubmVyUHJlcFR5cGUsXG4gIFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUsXG4gIEZyZWVtaXVtVHlwZSxcbiAgZXNSZXNwb25zZUJvZHksXG4gIENhdGVnb3J5VHlwZSxcbiAgY2xhc3NpZmljYXRpb25SZXNwb25zZUJvZHkgYXMgQ2xhc3NpZmljYXRpb25SZXNwb25zZUJvZHlUeXBlLFxuICBCdWZmZXJUaW1lT2JqZWN0VHlwZSxcbiAgUmVtaW5kZXJUeXBlLFxuICBDYXRlZ29yeUV2ZW50VHlwZSxcbiAgRXZlbnRQbGFubmVyUmVzcG9uc2VCb2R5VHlwZSxcbiAgUmVtaW5kZXJUeXBlQWRqdXN0ZWQsXG4gIENhbGVuZGFySW50ZWdyYXRpb25UeXBlLFxuICBHb29nbGVSZW1pbmRlclR5cGUsXG4gIE92ZXJyaWRlVHlwZXMsXG4gIEdvb2dsZVNlbmRVcGRhdGVzVHlwZSxcbiAgR29vZ2xlQXR0ZW5kZWVUeXBlLFxuICBHb29nbGVDb25mZXJlbmNlRGF0YVR5cGUsXG4gIEdvb2dsZUV4dGVuZGVkUHJvcGVydGllc1R5cGUsXG4gIEdvb2dsZVNvdXJjZVR5cGUsXG4gIEdvb2dsZVRyYW5zcGFyZW5jeVR5cGUsXG4gIEdvb2dsZVZpc2liaWxpdHlUeXBlLFxuICBHb29nbGVBdHRhY2htZW50VHlwZSxcbiAgR29vZ2xlRXZlbnRUeXBlMSxcbiAgWm9vbU1lZXRpbmdPYmplY3RUeXBlLFxuICBDb25mZXJlbmNlVHlwZSxcbiAgQ3JlYXRlR29vZ2xlRXZlbnRSZXNwb25zZVR5cGUsXG4gIENyZWF0ZVpvb21NZWV0aW5nUmVxdWVzdEJvZHlUeXBlLFxuICBBdHRlbmRlZVR5cGUsXG59IGZyb20gJ0Bwb3N0X3Byb2Nlc3NfY2FsZW5kYXIvX2xpYnMvdHlwZXMnO1xuaW1wb3J0IGdvdCBmcm9tICdnb3QnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcbmltcG9ydCBkdXJhdGlvbiBmcm9tICdkYXlqcy9wbHVnaW4vZHVyYXRpb24nO1xuaW1wb3J0IGlzQmV0d2VlbiBmcm9tICdkYXlqcy9wbHVnaW4vaXNCZXR3ZWVuJztcbmltcG9ydCB0aW1lem9uZSBmcm9tICdkYXlqcy9wbHVnaW4vdGltZXpvbmUnO1xuaW1wb3J0IHV0YyBmcm9tICdkYXlqcy9wbHVnaW4vdXRjJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBQdXRPYmplY3RDb21tYW5kLCBTM0NsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XG5pbXBvcnQgeyBDbGllbnQgfSBmcm9tICdAb3BlbnNlYXJjaC1wcm9qZWN0L29wZW5zZWFyY2gnO1xuaW1wb3J0IEFXUyBmcm9tICdhd3Mtc2RrJztcbmltcG9ydCB7IGdldElTT0RheSwgc2V0SVNPRGF5IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiwgT3BlbkFJQXBpIH0gZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCB7IGdvb2dsZSB9IGZyb20gJ2dvb2dsZWFwaXMnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IFVSTFNlYXJjaFBhcmFtcyB9IGZyb20gJ25vZGU6dXJsJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmltcG9ydCB7IGJ1Y2tldE5hbWUgfSBmcm9tICdAL2dwdC9fbGlicy9jb25zdGFudHMnO1xuXG5kYXlqcy5leHRlbmQoZHVyYXRpb24pO1xuZGF5anMuZXh0ZW5kKGlzQmV0d2Vlbik7XG5kYXlqcy5leHRlbmQodGltZXpvbmUpO1xuZGF5anMuZXh0ZW5kKHV0Yyk7XG5cbmNvbnN0IHMzQ2xpZW50ID0gbmV3IFMzQ2xpZW50KHtcbiAgY3JlZGVudGlhbHM6IHtcbiAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuUzNfQUNDRVNTX0tFWSxcbiAgICBzZWNyZXRBY2Nlc3NLZXk6IHByb2Nlc3MuZW52LlMzX1NFQ1JFVF9LRVksXG4gIH0sXG4gIGVuZHBvaW50OiBwcm9jZXNzLmVudi5TM19FTkRQT0lOVCxcbiAgZm9yY2VQYXRoU3R5bGU6IHRydWUsXG59KTtcblxuY29uc3QgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKHtcbiAgYXBpS2V5LFxufSk7XG5vcGVuYWkgPSBuZXcgT3BlbkFJQXBpKGNvbmZpZ3VyYXRpb24pO1xuZGVmYXVsdE9wZW5BSUFQSUtleSA9IGFwaUtleTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0cmVhbVRvU3RyaW5nKHN0cmVhbTogUmVhZGFibGUpOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGNodW5rczogVWludDhBcnJheVtdID0gW107XG4gICAgc3RyZWFtLm9uKCdkYXRhJywgKGNodW5rKSA9PiBjaHVua3MucHVzaChjaHVuaykpO1xuICAgIHN0cmVhbS5vbignZXJyb3InLCByZWplY3QpO1xuICAgIHN0cmVhbS5vbignZW5kJywgKCkgPT4gcmVzb2x2ZShCdWZmZXIuY29uY2F0KGNodW5rcykudG9TdHJpbmcoJ3V0Zi04JykpKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRTZWFyY2hDbGllbnQgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBDbGllbnQoe1xuICAgICAgbm9kZTogcHJvY2Vzcy5lbnYuT1BFTlNFQVJDSF9FTkRQT0lOVCxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcm5hbWU6IHByb2Nlc3MuZW52Lk9QRU5TRUFSQ0hfVVNFUk5BTUUsXG4gICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5PUEVOU0VBUkNIX1BBU1NXT1JELFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGdldCBzZWFyY2ggY2xpZW50Jyk7XG4gIH1cbn07XG5leHBvcnQgY29uc3Qgc2VhcmNoRGF0YTMgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICBzZWFyY2hWZWN0b3I6IG51bWJlcltdXG4pOiBQcm9taXNlPGVzUmVzcG9uc2VCb2R5PiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0U2VhcmNoQ2xpZW50KCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2VhcmNoKHtcbiAgICAgIGluZGV4OiBzZWFyY2hJbmRleCxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgc2l6ZTogdmVjdG9yRGltZW5zaW9ucyxcbiAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICBzY3JpcHRfc2NvcmU6IHtcbiAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgIGJvb2w6IHtcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgIHRlcm06IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjcmlwdDoge1xuICAgICAgICAgICAgICBsYW5nOiAna25uJyxcbiAgICAgICAgICAgICAgc291cmNlOiAna25uX3Njb3JlJyxcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IGV2ZW50VmVjdG9yTmFtZSxcbiAgICAgICAgICAgICAgICBxdWVyeV92YWx1ZTogc2VhcmNoVmVjdG9yLFxuICAgICAgICAgICAgICAgIHNwYWNlX3R5cGU6ICdjb3NpbmVzaW1pbCcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG1pbl9zY29yZTogMS4yLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSwgJyBzZWFyY2ggZGF0YSBpbiBzZWFyY2ggZW5naW5lJyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmJvZHk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBzZWFyY2ggZGF0YScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY29udmVydEV2ZW50VG9WZWN0b3JTcGFjZTIgPSBhc3luYyAoXG4gIGV2ZW50OiBFdmVudFR5cGVcbik6IFByb21pc2U8bnVtYmVyW10+ID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGV2ZW50IHByb3ZpZGVkIHRvIGNvbnZlcnRFdmVudFRvVmVjdG9yU3BhY2UyJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgc3VtbWFyeSwgbm90ZXMgfSA9IGV2ZW50O1xuICAgIGNvbnN0IHRleHQgPSBgJHtzdW1tYXJ5fSR7bm90ZXMgPyBgOiAke25vdGVzfWAgOiAnJ31gO1xuXG4gICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpID09PSAnOicpIHtcbiAgICAgIC8vIEhhbmRsZSBjYXNlcyB3aGVyZSBzdW1tYXJ5IGFuZCBub3RlcyBtaWdodCBiZSBlbXB0eSBvciBqdXN0IFwiOlwiXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJ0VtcHR5IG9yIGludmFsaWQgdGV4dCBmb3IgZW1iZWRkaW5nLCByZXR1cm5pbmcgbnVsbCBvciBlbXB0eSBhcnJheS4nXG4gICAgICApO1xuICAgICAgcmV0dXJuIFtdOyAvLyBPciBoYW5kbGUgYXMgcGVyIGV4aXN0aW5nIGVycm9yIHBhdHRlcm5zIGlmIGFueVxuICAgIH1cblxuICAgIGNvbnN0IGVtYmVkZGluZ1JlcXVlc3Q6IE9wZW5BSS5FbWJlZGRpbmdzLkVtYmVkZGluZ0NyZWF0ZVBhcmFtcyA9IHtcbiAgICAgIG1vZGVsOiAndGV4dC1lbWJlZGRpbmctYWRhLTAwMicsXG4gICAgICBpbnB1dDogdGV4dCxcbiAgICB9O1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IG9wZW5haS5lbWJlZGRpbmdzLmNyZWF0ZShlbWJlZGRpbmdSZXF1ZXN0KTtcbiAgICBjb25zdCB2ZWN0b3IgPSByZXM/LmRhdGE/LlswXT8uZW1iZWRkaW5nO1xuXG4gICAgY29uc29sZS5sb2coXG4gICAgICB2ZWN0b3JcbiAgICAgICAgPyBgVmVjdG9yIGdlbmVyYXRlZCB3aXRoIGxlbmd0aDogJHt2ZWN0b3IubGVuZ3RofWBcbiAgICAgICAgOiAnTm8gdmVjdG9yIGdlbmVyYXRlZCcsXG4gICAgICAnIHZlY3RvciBpbnNpZGUgY29udmVydEV2ZW50VG9WZWN0b3JTcGFjZTInXG4gICAgKTtcbiAgICByZXR1cm4gdmVjdG9yO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlLCAnIHVuYWJsZSB0byBjb252ZXJ0RXZlbnRUb1ZlY3RvclNwYWNlIHVzaW5nIE9wZW5BSScpO1xuICAgIC8vIENvbnNpZGVyIHJlLXRocm93aW5nIG9yIHJldHVybmluZyBhIHNwZWNpZmljIGVycm9yL3ZhbHVlIGJhc2VkIG9uIGhvdyBjYWxsZXJzIGhhbmRsZSBpdFxuICAgIHRocm93IGU7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgbGlzdE1lZXRpbmdBc3Npc3RQcmVmZXJyZWRUaW1lUmFuZ2VzR2l2ZW5NZWV0aW5nSWQgPSBhc3luYyAoXG4gIG1lZXRpbmdJZDogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0xpc3RNZWV0aW5nQXNzaXN0UHJlZmVyZXJlZFRpbWVSYW5nZXNCeU1lZXRpbmdJZCc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBxdWVyeSBMaXN0TWVldGluZ0Fzc2lzdFByZWZlcmVyZWRUaW1lUmFuZ2VzQnlNZWV0aW5nSWQoJG1lZXRpbmdJZDogdXVpZCEpIHtcbiAgICAgICAgICAgICAgICBNZWV0aW5nX0Fzc2lzdF9QcmVmZXJyZWRfVGltZV9SYW5nZSh3aGVyZToge21lZXRpbmdJZDoge19lcTogJG1lZXRpbmdJZH19KSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlSWRcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgZGF5T2ZXZWVrXG4gICAgICAgICAgICAgICAgICAgIGVuZFRpbWVcbiAgICAgICAgICAgICAgICAgICAgaG9zdElkXG4gICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgIG1lZXRpbmdJZFxuICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cblxuICAgICAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgbWVldGluZ0lkLFxuICAgIH07XG5cbiAgICBjb25zdCByZXM6IHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgTWVldGluZ19Bc3Npc3RfUHJlZmVycmVkX1RpbWVfUmFuZ2U6IE1lZXRpbmdBc3Npc3RQcmVmZXJyZWRUaW1lUmFuZ2VUeXBlW107XG4gICAgICB9O1xuICAgIH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cocmVzLCAnIHJlcyBmcm9tIGxpc3RNZWV0aW5nQXNzaXN0QXR0ZW5kZWVzICcpO1xuXG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uTWVldGluZ19Bc3Npc3RfUHJlZmVycmVkX1RpbWVfUmFuZ2U7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVhbmJsZSB0byBsaXN0IG1lZXRpbmcgYXNzaXN0IHByZWZlcnJlZCB0aW1lIHJhbmdlcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgbGlzdE1lZXRpbmdBc3Npc3RBdHRlbmRlZXNHaXZlbk1lZXRpbmdJZCA9IGFzeW5jIChcbiAgbWVldGluZ0lkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnTGlzdE1lZXRpbmdBc3Npc3RBdHRlbmRlZXNCeU1lZXRpbmdJZCc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBxdWVyeSBMaXN0TWVldGluZ0Fzc2lzdEF0dGVuZGVlc0J5TWVldGluZ0lkKCRtZWV0aW5nSWQ6IHV1aWQhKSB7XG4gICAgICAgICAgICAgICAgTWVldGluZ19Bc3Npc3RfQXR0ZW5kZWUod2hlcmU6IHttZWV0aW5nSWQ6IHtfZXE6ICRtZWV0aW5nSWR9fSkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWN0SWRcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgZW1haWxzXG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsQXR0ZW5kZWVcbiAgICAgICAgICAgICAgICAgICAgaG9zdElkXG4gICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgIGltQWRkcmVzc2VzXG4gICAgICAgICAgICAgICAgICAgIG1lZXRpbmdJZFxuICAgICAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyc1xuICAgICAgICAgICAgICAgICAgICBwcmltYXJ5RW1haWxcbiAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIG1lZXRpbmdJZCxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzOiB7XG4gICAgICBkYXRhOiB7IE1lZXRpbmdfQXNzaXN0X0F0dGVuZGVlOiBNZWV0aW5nQXNzaXN0QXR0ZW5kZWVUeXBlW10gfTtcbiAgICB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgZnJvbSBsaXN0TWVldGluZ0Fzc2lzdEF0dGVuZGVlcyAnKTtcblxuICAgIHJldHVybiByZXM/LmRhdGE/Lk1lZXRpbmdfQXNzaXN0X0F0dGVuZGVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gbGlzdCBtZWV0aW5nIGFzc2lzdCBhdHRlbmRlZXMnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldE1lZXRpbmdBc3Npc3RBdHRlbmRlZSA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdHZXRNZWV0aW5nQXNzaXN0QXR0ZW5kZWVCeUlkJztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgICAgIHF1ZXJ5IEdldE1lZXRpbmdBc3Npc3RBdHRlbmRlZUJ5SWQoJGlkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgTWVldGluZ19Bc3Npc3RfQXR0ZW5kZWVfYnlfcGsoaWQ6ICRpZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWN0SWRcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgZW1haWxzXG4gICAgICAgICAgICAgICAgICAgIGhvc3RJZFxuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICBpbUFkZHJlc3Nlc1xuICAgICAgICAgICAgICAgICAgICBtZWV0aW5nSWRcbiAgICAgICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcnNcbiAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUVtYWlsXG4gICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICAgICAgZXh0ZXJuYWxBdHRlbmRlZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIGlkLFxuICAgIH07XG5cbiAgICBjb25zdCByZXM6IHtcbiAgICAgIGRhdGE6IHsgTWVldGluZ19Bc3Npc3RfQXR0ZW5kZWVfYnlfcGs6IE1lZXRpbmdBc3Npc3RBdHRlbmRlZVR5cGUgfTtcbiAgICB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgZnJvbSBnZXRNZWV0aW5nQXNzaXN0QXR0ZW5kZWUnKTtcblxuICAgIHJldHVybiByZXM/LmRhdGE/Lk1lZXRpbmdfQXNzaXN0X0F0dGVuZGVlX2J5X3BrO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IG1lZXRpbmcgYXNzaXN0IGF0dGVuZGVlJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRNZWV0aW5nQXNzaXN0ID0gYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0dldE1lZXRpbmdBc3Npc3RCeUlkJztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgICAgIHF1ZXJ5IEdldE1lZXRpbmdBc3Npc3RCeUlkKCRpZDogdXVpZCEpIHtcbiAgICAgICAgICAgICAgICBNZWV0aW5nX0Fzc2lzdF9ieV9wayhpZDogJGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGFueW9uZUNhbkFkZFNlbGZcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWVDYW5Nb2RpZnlcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWVDb3VudFxuICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZVJlc3BvbmRlZENvdW50XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclxuICAgICAgICAgICAgICAgICAgICBidWZmZXJUaW1lXG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFySWRcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsSWZBbnlSZWZ1c2VcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsbGVkXG4gICAgICAgICAgICAgICAgICAgIGNvbG9ySWRcbiAgICAgICAgICAgICAgICAgICAgY29uZmVyZW5jZUFwcFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBlbmFibGVBdHRlbmRlZVByZWZlcmVuY2VzXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUNvbmZlcmVuY2VcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSG9zdFByZWZlcmVuY2VzXG4gICAgICAgICAgICAgICAgICAgIGVuZERhdGVcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVEYXRlXG4gICAgICAgICAgICAgICAgICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyc1xuICAgICAgICAgICAgICAgICAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0c1xuICAgICAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgbWluVGhyZXNob2xkQ291bnRcbiAgICAgICAgICAgICAgICAgICAgbm90ZXNcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlcbiAgICAgICAgICAgICAgICAgICAgcmVtaW5kZXJzXG4gICAgICAgICAgICAgICAgICAgIHNlbmRVcGRhdGVzXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZVxuICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5XG4gICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgdXNlRGVmYXVsdEFsYXJtc1xuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dFbmREYXRlXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd1N0YXJ0RGF0ZVxuICAgICAgICAgICAgICAgICAgICBhbGxvd0F0dGVuZGVlVXBkYXRlUHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmFudGVlQXZhaWxhYmlsaXR5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgaWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IE1lZXRpbmdfQXNzaXN0X2J5X3BrOiBNZWV0aW5nQXNzaXN0VHlwZSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cocmVzLCAnIHJlcyBmcm9tIGdldE1lZXRpbmdBc3Npc3QnKTtcblxuICAgIHJldHVybiByZXM/LmRhdGE/Lk1lZXRpbmdfQXNzaXN0X2J5X3BrO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IG1lZXRpbmcgYXNzaXN0IGZyb20gaWQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGxpc3RNZWV0aW5nQXNzaXN0RXZlbnRzRm9yQXR0ZW5kZWVHaXZlbkRhdGVzID0gYXN5bmMgKFxuICBhdHRlbmRlZUlkOiBzdHJpbmcsXG4gIGhvc3RTdGFydERhdGU6IHN0cmluZyxcbiAgaG9zdEVuZERhdGU6IHN0cmluZyxcbiAgdXNlclRpbWV6b25lOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0xpc3RNZWV0aW5nQXNzaXN0RXZlbnRzRm9yQXR0ZW5kZWVHaXZlbkRhdGVzJztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgICAgIHF1ZXJ5IExpc3RNZWV0aW5nQXNzaXN0RXZlbnRzRm9yQXR0ZW5kZWVHaXZlbkRhdGVzKCRhdHRlbmRlZUlkOiBTdHJpbmchLCAkc3RhcnREYXRlOiB0aW1lc3RhbXAhLCAkZW5kRGF0ZTogdGltZXN0YW1wISkge1xuICAgICAgICAgICAgICAgIE1lZXRpbmdfQXNzaXN0X0V2ZW50KHdoZXJlOiB7YXR0ZW5kZWVJZDoge19lcTogJGF0dGVuZGVlSWR9LCBlbmREYXRlOiB7X2d0ZTogJHN0YXJ0RGF0ZX0sIHN0YXJ0RGF0ZToge19sdGU6ICRlbmREYXRlfX0pIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsRGF5XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzXG4gICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlSWRcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWVzT21pdHRlZFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJJZFxuICAgICAgICAgICAgICAgICAgICBjb2xvcklkXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0b3JcbiAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZVxuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lVW5zcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgICAgICAgICAgICBldmVudFR5cGVcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsVXNlclxuICAgICAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgZ3Vlc3RzQ2FuTW9kaWZ5XG4gICAgICAgICAgICAgICAgICAgIGhhbmdvdXRMaW5rXG4gICAgICAgICAgICAgICAgICAgIGh0bWxMaW5rXG4gICAgICAgICAgICAgICAgICAgIGlDYWxVSURcbiAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgbGlua3NcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgbG9ja2VkXG4gICAgICAgICAgICAgICAgICAgIG1lZXRpbmdJZFxuICAgICAgICAgICAgICAgICAgICBub3Rlc1xuICAgICAgICAgICAgICAgICAgICBvcmdhbml6ZXJcbiAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZUNvcHlcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJyZW5jZVxuICAgICAgICAgICAgICAgICAgICByZWN1cnJlbmNlUnVsZVxuICAgICAgICAgICAgICAgICAgICByZWN1cnJpbmdFdmVudElkXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVxuICAgICAgICAgICAgICAgICAgICBzdGFydERhdGVcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeVxuICAgICAgICAgICAgICAgICAgICB0aW1lem9uZVxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgICAgICAgICAgICAgIHVzZURlZmF1bHRBbGFybXNcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgIGNvbnN0IHN0YXJ0RGF0ZUluSG9zdFRpbWV6b25lID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KFxuICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgY29uc3QgZW5kRGF0ZUluSG9zdFRpbWV6b25lID0gZGF5anMoaG9zdEVuZERhdGUuc2xpY2UoMCwgMTkpKS50eihcbiAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgIHRydWVcbiAgICApO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZUluVXNlclRpbWV6b25lID0gZGF5anMoc3RhcnREYXRlSW5Ib3N0VGltZXpvbmUpXG4gICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgLmZvcm1hdCgpXG4gICAgICAuc2xpY2UoMCwgMTkpO1xuICAgIGNvbnN0IGVuZERhdGVJblVzZXJUaW1lem9uZSA9IGRheWpzKGVuZERhdGVJbkhvc3RUaW1lem9uZSlcbiAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAuZm9ybWF0KClcbiAgICAgIC5zbGljZSgwLCAxOSk7XG5cbiAgICBjb25zdCByZXM6IHsgZGF0YTogeyBNZWV0aW5nX0Fzc2lzdF9FdmVudDogTWVldGluZ0Fzc2lzdEV2ZW50VHlwZVtdIH0gfSA9XG4gICAgICBhd2FpdCBnb3RcbiAgICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgICAgIGF0dGVuZGVlSWQsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZTogc3RhcnREYXRlSW5Vc2VyVGltZXpvbmUsXG4gICAgICAgICAgICAgIGVuZERhdGU6IGVuZERhdGVJblVzZXJUaW1lem9uZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgZnJvbSBsaXN0TWVldGluZ0Fzc2lzdEV2ZW50c0ZvckF0dGVuZGVlR2l2ZW5EYXRlcycpO1xuICAgIHJldHVybiByZXM/LmRhdGE/Lk1lZXRpbmdfQXNzaXN0X0V2ZW50O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBlLFxuICAgICAgJyB1bmFibGUgdG8gbGlzdCBtZWV0aW5nIGFzc2lzdCBldmVudHMgZm9yIGF0dGVuZGVlIGdpdmVuIGRhdGVzJ1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBsaXN0RXZlbnRzRm9yRGF0ZSA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmcsXG4gIHRpbWV6b25lOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnbGlzdEV2ZW50c0ZvckRhdGUnO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBxdWVyeSBsaXN0RXZlbnRzRm9yRGF0ZSgkdXNlcklkOiB1dWlkISwgJHN0YXJ0RGF0ZTogdGltZXN0YW1wISwgJGVuZERhdGU6IHRpbWVzdGFtcCEpIHtcbiAgICAgICAgICBFdmVudCh3aGVyZToge3VzZXJJZDoge19lcTogJHVzZXJJZH0sIGVuZERhdGU6IHtfZ3RlOiAkc3RhcnREYXRlLCBfbHQ6ICRlbmREYXRlfSwgZGVsZXRlZDoge19lcTogZmFsc2V9fSkge1xuICAgICAgICAgICAgYWxsRGF5XG4gICAgICAgICAgICBhbnlvbmVDYW5BZGRTZWxmXG4gICAgICAgICAgICBhdHRhY2htZW50c1xuICAgICAgICAgICAgYXR0ZW5kZWVzT21pdHRlZFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICBjYWxlbmRhcklkXG4gICAgICAgICAgICBjb2xvcklkXG4gICAgICAgICAgICBjb25mZXJlbmNlSWRcbiAgICAgICAgICAgIGNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgICAgIGNvcHlDYXRlZ29yaWVzXG4gICAgICAgICAgICBjb3B5RHVyYXRpb25cbiAgICAgICAgICAgIGNvcHlJc0JyZWFrXG4gICAgICAgICAgICBjb3B5SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgIGNvcHlJc01lZXRpbmdcbiAgICAgICAgICAgIGNvcHlNb2RpZmlhYmxlXG4gICAgICAgICAgICBjb3B5UHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgY29weVJlbWluZGVyc1xuICAgICAgICAgICAgY29weVRpbWVCbG9ja2luZ1xuICAgICAgICAgICAgY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICAgICAgY3JlYXRvclxuICAgICAgICAgICAgZGFpbHlUYXNrTGlzdFxuICAgICAgICAgICAgZGVsZXRlZFxuICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgICAgIGVuZERhdGVcbiAgICAgICAgICAgIGVuZFRpbWVVbnNwZWNpZmllZFxuICAgICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgICAgZXZlbnRUeXBlXG4gICAgICAgICAgICBleHRlbmRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgIGZvbGxvd1VwRXZlbnRJZFxuICAgICAgICAgICAgZm9yRXZlbnRJZFxuICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yXG4gICAgICAgICAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnNcbiAgICAgICAgICAgIGd1ZXN0c0Nhbk1vZGlmeVxuICAgICAgICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHNcbiAgICAgICAgICAgIGhhbmdvdXRMaW5rXG4gICAgICAgICAgICBoYXJkRGVhZGxpbmVcbiAgICAgICAgICAgIGh0bWxMaW5rXG4gICAgICAgICAgICBpQ2FsVUlEXG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgaXNCcmVha1xuICAgICAgICAgICAgaXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZVxuICAgICAgICAgICAgaXNGb2xsb3dVcFxuICAgICAgICAgICAgaXNNZWV0aW5nXG4gICAgICAgICAgICBpc01lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgICAgICBpc1Bvc3RFdmVudFxuICAgICAgICAgICAgaXNQcmVFdmVudFxuICAgICAgICAgICAgbGlua3NcbiAgICAgICAgICAgIGxvY2F0aW9uXG4gICAgICAgICAgICBsb2NrZWRcbiAgICAgICAgICAgIG1heEF0dGVuZGVlc1xuICAgICAgICAgICAgbWVldGluZ0lkXG4gICAgICAgICAgICBtZXRob2RcbiAgICAgICAgICAgIG1vZGlmaWFibGVcbiAgICAgICAgICAgIG5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrXG4gICAgICAgICAgICBuZWdhdGl2ZUltcGFjdFNjb3JlXG4gICAgICAgICAgICBuZWdhdGl2ZUltcGFjdFRpbWVcbiAgICAgICAgICAgIG5vdGVzXG4gICAgICAgICAgICBvcmdhbml6ZXJcbiAgICAgICAgICAgIG9yaWdpbmFsQWxsRGF5XG4gICAgICAgICAgICBvcmlnaW5hbFN0YXJ0RGF0ZVxuICAgICAgICAgICAgb3JpZ2luYWxUaW1lem9uZVxuICAgICAgICAgICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWtcbiAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0U2NvcmVcbiAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0VGltZVxuICAgICAgICAgICAgcG9zdEV2ZW50SWRcbiAgICAgICAgICAgIHByZUV2ZW50SWRcbiAgICAgICAgICAgIHByZWZlcnJlZERheU9mV2Vla1xuICAgICAgICAgICAgcHJlZmVycmVkRW5kVGltZVJhbmdlXG4gICAgICAgICAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgICAgICAgcHJlZmVycmVkVGltZVxuICAgICAgICAgICAgcHJpb3JpdHlcbiAgICAgICAgICAgIHByaXZhdGVDb3B5XG4gICAgICAgICAgICByZWN1cnJlbmNlXG4gICAgICAgICAgICByZWN1cnJlbmNlUnVsZVxuICAgICAgICAgICAgcmVjdXJyaW5nRXZlbnRJZFxuICAgICAgICAgICAgc2VuZFVwZGF0ZXNcbiAgICAgICAgICAgIHNvZnREZWFkbGluZVxuICAgICAgICAgICAgc291cmNlXG4gICAgICAgICAgICBzdGFydERhdGVcbiAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgc3VtbWFyeVxuICAgICAgICAgICAgdGFza0lkXG4gICAgICAgICAgICB0YXNrVHlwZVxuICAgICAgICAgICAgdGltZUJsb2NraW5nXG4gICAgICAgICAgICB0aW1lem9uZVxuICAgICAgICAgICAgdGl0bGVcbiAgICAgICAgICAgIHRyYW5zcGFyZW5jeVxuICAgICAgICAgICAgdW5saW5rXG4gICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgIHVzZURlZmF1bHRBbGFybXNcbiAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgdXNlck1vZGlmaWVkQXZhaWxhYmlsaXR5XG4gICAgICAgICAgICB1c2VyTW9kaWZpZWRDYXRlZ29yaWVzXG4gICAgICAgICAgICB1c2VyTW9kaWZpZWREdXJhdGlvblxuICAgICAgICAgICAgdXNlck1vZGlmaWVkSXNCcmVha1xuICAgICAgICAgICAgdXNlck1vZGlmaWVkSXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgIHVzZXJNb2RpZmllZElzTWVldGluZ1xuICAgICAgICAgICAgdXNlck1vZGlmaWVkTW9kaWZpYWJsZVxuICAgICAgICAgICAgdXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgdXNlck1vZGlmaWVkUmVtaW5kZXJzXG4gICAgICAgICAgICB1c2VyTW9kaWZpZWRUaW1lQmxvY2tpbmdcbiAgICAgICAgICAgIHVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlXG4gICAgICAgICAgICB2aXNpYmlsaXR5XG4gICAgICAgICAgICB3ZWVrbHlUYXNrTGlzdFxuICAgICAgICAgICAgYnlXZWVrRGF5XG4gICAgICAgICAgICBsb2NhbFN5bmNlZFxuICAgICAgICAgICAgdXNlck1vZGlmaWVkQ29sb3JcbiAgICAgICAgICAgIGNvcHlDb2xvclxuICAgICAgICAgICAgY29weUV4dGVybmFsTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgICAgIHVzZXJNb2RpZmllZEV4dGVybmFsTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgICAgIHVzZXJNb2RpZmllZE1lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IEV2ZW50OiBFdmVudFR5cGVbXSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgc3RhcnREYXRlOiBkYXlqcyhzdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoodGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC5mb3JtYXQoKSxcbiAgICAgICAgICAgIGVuZERhdGU6IGRheWpzKGVuZERhdGUpLnR6KHRpbWV6b25lLCB0cnVlKS5mb3JtYXQoKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMsICcgcmVzIGZyb20gbGlzdEV2ZW50c2ZvclVzZXInKTtcbiAgICByZXR1cm4gcmVzPy5kYXRhPy5FdmVudDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGxpc3QgZXZlbnRzIGZvciBkYXRlJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwcm9jZXNzTWVldGluZ0Fzc2lzdEZvck9wdGFwbGFubmVyID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gcHJvY2VzcyBtZWV0aW5nIGFzc2lzdCBmb3Igb3B0YXBsYW5uZXInKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlTmV3TWVldGluZ0V2ZW50Rm9yQXR0ZW5kZWUgPSAoXG4gIGF0dGVuZGVlOiBNZWV0aW5nQXNzaXN0QXR0ZW5kZWVUeXBlLFxuICBtZWV0aW5nQXNzaXN0OiBNZWV0aW5nQXNzaXN0VHlwZSxcbiAgd2luZG93U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZT86IE1lZXRpbmdBc3Npc3RQcmVmZXJyZWRUaW1lUmFuZ2VUeXBlXG4pOiBFdmVudFR5cGUgPT4ge1xuICBsZXQgc3RhcnREYXRlID0gZGF5anMod2luZG93U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgIC5mb3JtYXQoKTtcbiAgaWYgKHByZWZlcnJlZFN0YXJ0VGltZVJhbmdlPy5kYXlPZldlZWsgPiAwKSB7XG4gICAgc3RhcnREYXRlID0gZGF5anMoc3RhcnREYXRlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5pc29XZWVrKHByZWZlcnJlZFN0YXJ0VGltZVJhbmdlPy5kYXlPZldlZWspXG4gICAgICAuZm9ybWF0KCk7XG4gIH1cblxuICBpZiAocHJlZmVycmVkU3RhcnRUaW1lUmFuZ2U/LnN0YXJ0VGltZSkge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHByZWZlcnJlZFN0YXJ0VGltZVJhbmdlPy5zdGFydFRpbWU7XG4gICAgY29uc3QgaG91ciA9IHBhcnNlSW50KHN0YXJ0VGltZS5zbGljZSgwLCAyKSwgMTApO1xuICAgIGNvbnN0IG1pbnV0ZSA9IHBhcnNlSW50KHN0YXJ0VGltZS5zbGljZSgzKSwgMTApO1xuXG4gICAgc3RhcnREYXRlID0gZGF5anMoc3RhcnREYXRlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5ob3VyKGhvdXIpXG4gICAgICAubWludXRlKG1pbnV0ZSlcbiAgICAgIC5mb3JtYXQoKTtcbiAgfVxuXG4gIGNvbnN0IGV2ZW50SWQgPSB1dWlkKCk7XG5cbiAgY29uc3QgbmV3RXZlbnQ6IEV2ZW50VHlwZSA9IHtcbiAgICBpZDogYCR7ZXZlbnRJZH0jJHttZWV0aW5nQXNzaXN0LmNhbGVuZGFySWR9YCxcbiAgICBtZXRob2Q6ICdjcmVhdGUnLFxuICAgIHRpdGxlOiBtZWV0aW5nQXNzaXN0LnN1bW1hcnksXG4gICAgc3RhcnREYXRlLFxuICAgIGVuZERhdGU6IGRheWpzKHN0YXJ0RGF0ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuYWRkKG1lZXRpbmdBc3Npc3QuZHVyYXRpb24sICdtJylcbiAgICAgIC5mb3JtYXQoKSxcbiAgICBhbGxEYXk6IGZhbHNlLFxuICAgIG5vdGVzOiBtZWV0aW5nQXNzaXN0Lm5vdGVzLFxuICAgIHRpbWV6b25lOiBob3N0VGltZXpvbmUsXG4gICAgY3JlYXRlZERhdGU6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgZGVsZXRlZDogZmFsc2UsXG4gICAgcHJpb3JpdHk6IG1lZXRpbmdBc3Npc3QucHJpb3JpdHksXG4gICAgaXNGb2xsb3dVcDogZmFsc2UsXG4gICAgaXNQcmVFdmVudDogZmFsc2UsXG4gICAgaXNQb3N0RXZlbnQ6IGZhbHNlLFxuICAgIG1vZGlmaWFibGU6IHRydWUsXG4gICAgc2VuZFVwZGF0ZXM6IG1lZXRpbmdBc3Npc3Q/LnNlbmRVcGRhdGVzLFxuICAgIHN0YXR1czogJ2NvbmZpcm1lZCcsXG4gICAgc3VtbWFyeTogbWVldGluZ0Fzc2lzdC5zdW1tYXJ5LFxuICAgIHRyYW5zcGFyZW5jeTogbWVldGluZ0Fzc2lzdD8udHJhbnNwYXJlbmN5LFxuICAgIHZpc2liaWxpdHk6IG1lZXRpbmdBc3Npc3Q/LnZpc2liaWxpdHksXG4gICAgdXBkYXRlZEF0OiBkYXlqcygpLmZvcm1hdCgpLFxuICAgIGNhbGVuZGFySWQ6IG1lZXRpbmdBc3Npc3QuY2FsZW5kYXJJZCxcbiAgICB1c2VEZWZhdWx0QWxhcm1zOiBtZWV0aW5nQXNzaXN0LnVzZURlZmF1bHRBbGFybXMsXG4gICAgdGltZUJsb2NraW5nOiBtZWV0aW5nQXNzaXN0LmJ1ZmZlclRpbWUsXG4gICAgdXNlck1vZGlmaWVkVGltZUJsb2NraW5nOiBtZWV0aW5nQXNzaXN0Py5idWZmZXJUaW1lID8gdHJ1ZSA6IGZhbHNlLFxuICAgIHVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlOiBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZT8uaWQgPyB0cnVlIDogZmFsc2UsXG4gICAgdXNlck1vZGlmaWVkUmVtaW5kZXJzOiBtZWV0aW5nQXNzaXN0Py5yZW1pbmRlcnM/LlswXSA+IC0xID8gdHJ1ZSA6IGZhbHNlLFxuICAgIHVzZXJNb2RpZmllZFByaW9yaXR5TGV2ZWw6IHRydWUsXG4gICAgdXNlck1vZGlmaWVkTW9kaWZpYWJsZTogdHJ1ZSxcbiAgICBkdXJhdGlvbjogbWVldGluZ0Fzc2lzdD8uZHVyYXRpb24sXG4gICAgdXNlck1vZGlmaWVkRHVyYXRpb246IHRydWUsXG4gICAgdXNlcklkOiBhdHRlbmRlZT8udXNlcklkLFxuICAgIGFueW9uZUNhbkFkZFNlbGY6IGZhbHNlLFxuICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogbWVldGluZ0Fzc2lzdD8uZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzLFxuICAgIGd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzOiBtZWV0aW5nQXNzaXN0Py5ndWVzdHNDYW5TZWVPdGhlckd1ZXN0cyxcbiAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLFxuICAgIG9yaWdpbmFsQWxsRGF5OiBmYWxzZSxcbiAgICBtZWV0aW5nSWQ6IG1lZXRpbmdBc3Npc3QuaWQsXG4gICAgZXZlbnRJZCxcbiAgfTtcblxuICByZXR1cm4gbmV3RXZlbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVOZXdNZWV0aW5nRXZlbnRGb3JIb3N0ID0gKFxuICBob3N0QXR0ZW5kZWU6IE1lZXRpbmdBc3Npc3RBdHRlbmRlZVR5cGUsXG4gIG1lZXRpbmdBc3Npc3Q6IE1lZXRpbmdBc3Npc3RUeXBlLFxuICB3aW5kb3dTdGFydERhdGU6IHN0cmluZyxcbiAgaG9zdFRpbWV6b25lOiBzdHJpbmcsXG4gIHByZWZlcnJlZFN0YXJ0VGltZVJhbmdlPzogTWVldGluZ0Fzc2lzdFByZWZlcnJlZFRpbWVSYW5nZVR5cGVcbik6IEV2ZW50VHlwZSA9PiB7XG4gIGxldCBzdGFydERhdGUgPSBkYXlqcyh3aW5kb3dTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLmZvcm1hdCgpO1xuICBpZiAocHJlZmVycmVkU3RhcnRUaW1lUmFuZ2U/LmRheU9mV2VlayA+IDApIHtcbiAgICBzdGFydERhdGUgPSBkYXlqcyhzdGFydERhdGUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmlzb1dlZWsocHJlZmVycmVkU3RhcnRUaW1lUmFuZ2U/LmRheU9mV2VlaylcbiAgICAgIC5mb3JtYXQoKTtcbiAgfVxuXG4gIGlmIChwcmVmZXJyZWRTdGFydFRpbWVSYW5nZT8uc3RhcnRUaW1lKSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcHJlZmVycmVkU3RhcnRUaW1lUmFuZ2U/LnN0YXJ0VGltZTtcbiAgICBjb25zdCBob3VyID0gcGFyc2VJbnQoc3RhcnRUaW1lLnNsaWNlKDAsIDIpLCAxMCk7XG4gICAgY29uc3QgbWludXRlID0gcGFyc2VJbnQoc3RhcnRUaW1lLnNsaWNlKDMpLCAxMCk7XG5cbiAgICBzdGFydERhdGUgPSBkYXlqcyhzdGFydERhdGUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmhvdXIoaG91cilcbiAgICAgIC5taW51dGUobWludXRlKVxuICAgICAgLmZvcm1hdCgpO1xuICB9XG5cbiAgY29uc3QgZXZlbnRJZCA9IHV1aWQoKTtcblxuICBjb25zdCBuZXdFdmVudDogRXZlbnRUeXBlID0ge1xuICAgIGlkOiBgJHtldmVudElkfSMke21lZXRpbmdBc3Npc3Q/LmNhbGVuZGFySWR9YCxcbiAgICBtZXRob2Q6ICdjcmVhdGUnLFxuICAgIHRpdGxlOiBtZWV0aW5nQXNzaXN0LnN1bW1hcnksXG4gICAgc3RhcnREYXRlLFxuICAgIGVuZERhdGU6IGRheWpzKHN0YXJ0RGF0ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuYWRkKG1lZXRpbmdBc3Npc3QuZHVyYXRpb24sICdtJylcbiAgICAgIC5mb3JtYXQoKSxcbiAgICBhbGxEYXk6IGZhbHNlLFxuICAgIG5vdGVzOiBtZWV0aW5nQXNzaXN0Lm5vdGVzLFxuICAgIHRpbWV6b25lOiBob3N0VGltZXpvbmUsXG4gICAgY3JlYXRlZERhdGU6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgZGVsZXRlZDogZmFsc2UsXG4gICAgcHJpb3JpdHk6IG1lZXRpbmdBc3Npc3QucHJpb3JpdHksXG4gICAgaXNGb2xsb3dVcDogZmFsc2UsXG4gICAgaXNQcmVFdmVudDogZmFsc2UsXG4gICAgaXNQb3N0RXZlbnQ6IGZhbHNlLFxuICAgIG1vZGlmaWFibGU6IHRydWUsXG4gICAgc2VuZFVwZGF0ZXM6IG1lZXRpbmdBc3Npc3Q/LnNlbmRVcGRhdGVzLFxuICAgIHN0YXR1czogJ2NvbmZpcm1lZCcsXG4gICAgc3VtbWFyeTogbWVldGluZ0Fzc2lzdC5zdW1tYXJ5LFxuICAgIHRyYW5zcGFyZW5jeTogbWVldGluZ0Fzc2lzdD8udHJhbnNwYXJlbmN5LFxuICAgIHZpc2liaWxpdHk6IG1lZXRpbmdBc3Npc3Q/LnZpc2liaWxpdHksXG4gICAgdXBkYXRlZEF0OiBkYXlqcygpLmZvcm1hdCgpLFxuICAgIGNhbGVuZGFySWQ6IG1lZXRpbmdBc3Npc3QuY2FsZW5kYXJJZCxcbiAgICB1c2VEZWZhdWx0QWxhcm1zOiBtZWV0aW5nQXNzaXN0LnVzZURlZmF1bHRBbGFybXMsXG4gICAgdGltZUJsb2NraW5nOiBtZWV0aW5nQXNzaXN0LmJ1ZmZlclRpbWUsXG4gICAgdXNlck1vZGlmaWVkVGltZUJsb2NraW5nOiBtZWV0aW5nQXNzaXN0Py5idWZmZXJUaW1lID8gdHJ1ZSA6IGZhbHNlLFxuICAgIHVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlOiBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZT8uaWQgPyB0cnVlIDogZmFsc2UsXG4gICAgdXNlck1vZGlmaWVkUmVtaW5kZXJzOiBtZWV0aW5nQXNzaXN0Py5yZW1pbmRlcnM/LlswXSA+IC0xID8gdHJ1ZSA6IGZhbHNlLFxuICAgIHVzZXJNb2RpZmllZFByaW9yaXR5TGV2ZWw6IHRydWUsXG4gICAgdXNlck1vZGlmaWVkTW9kaWZpYWJsZTogdHJ1ZSxcbiAgICBkdXJhdGlvbjogbWVldGluZ0Fzc2lzdD8uZHVyYXRpb24sXG4gICAgdXNlck1vZGlmaWVkRHVyYXRpb246IHRydWUsXG4gICAgdXNlcklkOiBob3N0QXR0ZW5kZWU/LnVzZXJJZCxcbiAgICBhbnlvbmVDYW5BZGRTZWxmOiBmYWxzZSxcbiAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnM6IG1lZXRpbmdBc3Npc3Q/Lmd1ZXN0c0Nhbkludml0ZU90aGVycyxcbiAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0czogbWVldGluZ0Fzc2lzdD8uZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMsXG4gICAgb3JpZ2luYWxTdGFydERhdGU6IHVuZGVmaW5lZCxcbiAgICBvcmlnaW5hbEFsbERheTogZmFsc2UsXG4gICAgbWVldGluZ0lkOiBtZWV0aW5nQXNzaXN0LmlkLFxuICAgIGV2ZW50SWQsXG4gIH07XG5cbiAgcmV0dXJuIG5ld0V2ZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IGxpc3RQcmVmZXJyZWRUaW1lUmFuZ2VzRm9yRXZlbnQgPSBhc3luYyAoZXZlbnRJZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFldmVudElkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgJyBubyBldmVudElkIGluc2lkZSBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50J1xuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdMaXN0UHJlZmVycmVkVGltZVJhbmdlc0dpdmVuRXZlbnRJZCc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBxdWVyeSBMaXN0UHJlZmVycmVkVGltZVJhbmdlc0dpdmVuRXZlbnRJZCgkZXZlbnRJZDogU3RyaW5nISkge1xuICAgICAgICBQcmVmZXJyZWRUaW1lUmFuZ2Uod2hlcmU6IHtldmVudElkOiB7X2VxOiAkZXZlbnRJZH19KSB7XG4gICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICBkYXlPZldlZWtcbiAgICAgICAgICBlbmRUaW1lXG4gICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgIGlkXG4gICAgICAgICAgc3RhcnRUaW1lXG4gICAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgICAgdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIGV2ZW50SWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IFByZWZlcnJlZFRpbWVSYW5nZTogUHJlZmVycmVkVGltZVJhbmdlVHlwZVtdIH0gfSA9XG4gICAgICBhd2FpdCBnb3RcbiAgICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgaW5zaWRlICBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50Jyk7XG4gICAgcmVzPy5kYXRhPy5QcmVmZXJyZWRUaW1lUmFuZ2U/Lm1hcCgocHQpID0+XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgcHQsXG4gICAgICAgICcgcHJlZmVycmVkVGltZVJhbmdlIC0gcmVzPy5kYXRhPy5QcmVmZXJyZWRUaW1lUmFuZ2UgaW5zaWRlICBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50ICdcbiAgICAgIClcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uUHJlZmVycmVkVGltZVJhbmdlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gbGlzdCBwcmVmZXJyZWQgdGltZSByYW5nZXMgZm9yIGV2ZW50Jyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZW1pbmRlcnNGcm9tTWludXRlc0FuZEV2ZW50ID0gKFxuICBldmVudElkOiBzdHJpbmcsXG4gIG1pbnV0ZXM6IG51bWJlcltdLFxuICB0aW1lem9uZTogc3RyaW5nLFxuICB1c2VEZWZhdWx0OiBib29sZWFuLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogUmVtaW5kZXJzRm9yRXZlbnRUeXBlID0+IHtcbiAgcmV0dXJuIHtcbiAgICBldmVudElkLFxuICAgIHJlbWluZGVyczogbWludXRlcy5tYXAoKG0pID0+ICh7XG4gICAgICBpZDogdXVpZCgpLFxuICAgICAgdXNlcklkLFxuICAgICAgZXZlbnRJZCxcbiAgICAgIHRpbWV6b25lLFxuICAgICAgbWludXRlczogbSxcbiAgICAgIHVzZURlZmF1bHQsXG4gICAgICB1cGRhdGVkQXQ6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgIGRlbGV0ZWQ6IHRydWUsXG4gICAgfSkpLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUJ1ZmZlclRpbWVGb3JOZXdNZWV0aW5nRXZlbnQgPSAoXG4gIGV2ZW50OiBFdmVudE1lZXRpbmdQbHVzVHlwZSxcbiAgYnVmZmVyVGltZTogQnVmZmVyVGltZU51bWJlclR5cGVcbikgPT4ge1xuICBsZXQgdmFsdWVzVG9SZXR1cm46IGFueSA9IHt9O1xuICB2YWx1ZXNUb1JldHVybi5uZXdFdmVudCA9IGV2ZW50O1xuICBjb25zdCBldmVudElkID0gdXVpZCgpO1xuICBjb25zdCBldmVudElkMSA9IHV1aWQoKTtcbiAgY29uc3QgcHJlRXZlbnRJZCA9IGV2ZW50Py5wcmVFdmVudElkIHx8IGAke2V2ZW50SWR9IyR7ZXZlbnQ/LmNhbGVuZGFySWR9YDtcbiAgY29uc3QgcG9zdEV2ZW50SWQgPSBldmVudD8ucG9zdEV2ZW50SWQgfHwgYCR7ZXZlbnRJZDF9IyR7ZXZlbnQ/LmNhbGVuZGFySWR9YDtcblxuICBpZiAoYnVmZmVyVGltZS5iZWZvcmVFdmVudCA+IDApIHtcbiAgICBjb25zdCBiZWZvcmVFdmVudE9yRW1wdHk6IEV2ZW50UGx1c1R5cGUgPSB7XG4gICAgICBpZDogcHJlRXZlbnRJZCxcbiAgICAgIGlzUHJlRXZlbnQ6IHRydWUsXG4gICAgICBmb3JFdmVudElkOiBldmVudC5pZCxcbiAgICAgIG5vdGVzOiAnQnVmZmVyIHRpbWUnLFxuICAgICAgc3VtbWFyeTogJ0J1ZmZlciB0aW1lJyxcbiAgICAgIHN0YXJ0RGF0ZTogZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuc3VidHJhY3QoYnVmZmVyVGltZS5iZWZvcmVFdmVudCwgJ20nKVxuICAgICAgICAuZm9ybWF0KCksXG4gICAgICBlbmREYXRlOiBkYXlqcyhldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooZXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5mb3JtYXQoKSxcbiAgICAgIG1ldGhvZDogJ2NyZWF0ZScsXG4gICAgICB1c2VySWQ6IGV2ZW50LnVzZXJJZCxcbiAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLmZvcm1hdCgpLFxuICAgICAgZGVsZXRlZDogZmFsc2UsXG4gICAgICBwcmlvcml0eTogMSxcbiAgICAgIG1vZGlmaWFibGU6IHRydWUsXG4gICAgICBhbnlvbmVDYW5BZGRTZWxmOiBmYWxzZSxcbiAgICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogZmFsc2UsXG4gICAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0czogZmFsc2UsXG4gICAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLFxuICAgICAgb3JpZ2luYWxBbGxEYXk6IGZhbHNlLFxuICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjYWxlbmRhcklkOiBldmVudD8uY2FsZW5kYXJJZCxcbiAgICAgIHRpbWV6b25lOiBldmVudD8udGltZXpvbmUsXG4gICAgICBpc0ZvbGxvd1VwOiBmYWxzZSxcbiAgICAgIGlzUG9zdEV2ZW50OiBmYWxzZSxcbiAgICAgIGV2ZW50SWQ6IHByZUV2ZW50SWQuc3BsaXQoJyMnKVswXSxcbiAgICB9O1xuXG4gICAgdmFsdWVzVG9SZXR1cm4uYmVmb3JlRXZlbnQgPSBiZWZvcmVFdmVudE9yRW1wdHk7XG4gICAgdmFsdWVzVG9SZXR1cm4ubmV3RXZlbnQgPSB7XG4gICAgICAuLi52YWx1ZXNUb1JldHVybi5uZXdFdmVudCxcbiAgICAgIHByZUV2ZW50SWQsXG4gICAgICB0aW1lQmxvY2tpbmc6IHtcbiAgICAgICAgLi4udmFsdWVzVG9SZXR1cm4/Lm5ld0V2ZW50Py50aW1lQmxvY2tpbmcsXG4gICAgICAgIGJlZm9yZUV2ZW50OiBidWZmZXJUaW1lLmJlZm9yZUV2ZW50LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGJ1ZmZlclRpbWUuYWZ0ZXJFdmVudCA+IDApIHtcbiAgICBjb25zdCBhZnRlckV2ZW50T3JFbXB0eTogRXZlbnRQbHVzVHlwZSA9IHtcbiAgICAgIGlkOiBwb3N0RXZlbnRJZCxcbiAgICAgIGlzUHJlRXZlbnQ6IGZhbHNlLFxuICAgICAgZm9yRXZlbnRJZDogZXZlbnQuaWQsXG4gICAgICBpc1Bvc3RFdmVudDogdHJ1ZSxcbiAgICAgIG5vdGVzOiAnQnVmZmVyIHRpbWUnLFxuICAgICAgc3VtbWFyeTogJ0J1ZmZlciB0aW1lJyxcbiAgICAgIHN0YXJ0RGF0ZTogZGF5anMoZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgZW5kRGF0ZTogZGF5anMoZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmFkZChidWZmZXJUaW1lLmFmdGVyRXZlbnQsICdtJylcbiAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgbWV0aG9kOiAnY3JlYXRlJyxcbiAgICAgIHVzZXJJZDogZXZlbnQ/LnVzZXJJZCxcbiAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgIHByaW9yaXR5OiAxLFxuICAgICAgaXNGb2xsb3dVcDogZmFsc2UsXG4gICAgICBtb2RpZmlhYmxlOiB0cnVlLFxuICAgICAgYW55b25lQ2FuQWRkU2VsZjogZmFsc2UsXG4gICAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnM6IGZhbHNlLFxuICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHM6IGZhbHNlLFxuICAgICAgb3JpZ2luYWxTdGFydERhdGU6IHVuZGVmaW5lZCxcbiAgICAgIG9yaWdpbmFsQWxsRGF5OiBmYWxzZSxcbiAgICAgIHVwZGF0ZWRBdDogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgY2FsZW5kYXJJZDogZXZlbnQ/LmNhbGVuZGFySWQsXG4gICAgICB0aW1lem9uZTogZXZlbnQ/LnRpbWV6b25lLFxuICAgICAgZXZlbnRJZDogcG9zdEV2ZW50SWQuc3BsaXQoJyMnKVswXSxcbiAgICB9O1xuXG4gICAgdmFsdWVzVG9SZXR1cm4uYWZ0ZXJFdmVudCA9IGFmdGVyRXZlbnRPckVtcHR5O1xuICAgIHZhbHVlc1RvUmV0dXJuLm5ld0V2ZW50ID0ge1xuICAgICAgLi4udmFsdWVzVG9SZXR1cm4ubmV3RXZlbnQsXG4gICAgICBwb3N0RXZlbnRJZCxcbiAgICAgIHRpbWVCbG9ja2luZzoge1xuICAgICAgICAuLi52YWx1ZXNUb1JldHVybj8ubmV3RXZlbnQ/LnRpbWVCbG9ja2luZyxcbiAgICAgICAgYWZ0ZXJFdmVudDogYnVmZmVyVGltZS5hZnRlckV2ZW50LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlc1RvUmV0dXJuIGFzIFZhbHVlc1RvUmV0dXJuRm9yQnVmZmVyRXZlbnRzVHlwZTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyUHJlZmVyZW5jZXMgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nXG4pOiBQcm9taXNlPFVzZXJQcmVmZXJlbmNlVHlwZT4gPT4ge1xuICB0cnkge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICBjb25zb2xlLmxvZygndXNlcklkIGlzIG51bGwnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ2dldFVzZXJQcmVmZXJlbmNlcyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgcXVlcnkgZ2V0VXNlclByZWZlcmVuY2VzKCR1c2VySWQ6IHV1aWQhKSB7XG4gICAgICBVc2VyX1ByZWZlcmVuY2Uod2hlcmU6IHt1c2VySWQ6IHtfZXE6ICR1c2VySWR9fSkge1xuICAgICAgICBzdGFydFRpbWVzXG4gICAgICAgIGVuZFRpbWVzXG4gICAgICAgIGJhY2tUb0JhY2tNZWV0aW5nc1xuICAgICAgICBjb3B5QXZhaWxhYmlsaXR5XG4gICAgICAgIGNvcHlDYXRlZ29yaWVzXG4gICAgICAgIGNvcHlJc0JyZWFrXG4gICAgICAgIGNvcHlNb2RpZmlhYmxlXG4gICAgICAgIGNvcHlQcmlvcml0eUxldmVsXG4gICAgICAgIGNvcHlSZW1pbmRlcnNcbiAgICAgICAgY29weVRpbWVCbG9ja2luZ1xuICAgICAgICBjb3B5VGltZVByZWZlcmVuY2VcbiAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgZGVsZXRlZFxuICAgICAgICBmb2xsb3dVcFxuICAgICAgICBpZFxuICAgICAgICBpc1B1YmxpY0NhbGVuZGFyXG4gICAgICAgIG1heE51bWJlck9mTWVldGluZ3NcbiAgICAgICAgbWF4V29ya0xvYWRQZXJjZW50XG4gICAgICAgIHB1YmxpY0NhbGVuZGFyQ2F0ZWdvcmllc1xuICAgICAgICByZW1pbmRlcnNcbiAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgIHVzZXJJZFxuICAgICAgICBtaW5OdW1iZXJPZkJyZWFrc1xuICAgICAgICBicmVha0NvbG9yXG4gICAgICAgIGJyZWFrTGVuZ3RoXG4gICAgICAgIGNvcHlDb2xvclxuICAgICAgICBjb3B5SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgY29weUlzTWVldGluZ1xuICAgICAgICBvbkJvYXJkZWRcbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gICAgY29uc3QgcmVzOiB7IGRhdGE6IHsgVXNlcl9QcmVmZXJlbmNlOiBVc2VyUHJlZmVyZW5jZVR5cGVbXSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmpzb24oKTtcbiAgICByZXR1cm4gcmVzPy5kYXRhPy5Vc2VyX1ByZWZlcmVuY2U/LlswXTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgZ2V0VXNlclByZWZlcmVuY2VzJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRHbG9iYWxDYWxlbmRhciA9IGFzeW5jICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnZ2V0R2xvYmFsQ2FsZW5kYXInO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBxdWVyeSBnZXRHbG9iYWxDYWxlbmRhcigkdXNlcklkOiB1dWlkISkge1xuICAgICAgICAgIENhbGVuZGFyKHdoZXJlOiB7Z2xvYmFsUHJpbWFyeToge19lcTogdHJ1ZX0sIHVzZXJJZDoge19lcTogJHVzZXJJZH19KSB7XG4gICAgICAgICAgICBjb2xvcklkXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgIGFjY2Vzc0xldmVsXG4gICAgICAgICAgICBhY2NvdW50XG4gICAgICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICAgICAgZGVmYXVsdFJlbWluZGVyc1xuICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yXG4gICAgICAgICAgICBnbG9iYWxQcmltYXJ5XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbW9kaWZpYWJsZVxuICAgICAgICAgICAgcHJpbWFyeVxuICAgICAgICAgICAgcmVzb3VyY2VcbiAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIGA7XG5cbiAgICBjb25zdCByZXM6IHsgZGF0YTogeyBDYWxlbmRhcjogQ2FsZW5kYXJUeXBlW10gfSB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICByZXR1cm4gcmVzLmRhdGEuQ2FsZW5kYXI/LlswXTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGdldCBnbG9iYWwgY2FsZW5kYXInKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFkanVzdFN0YXJ0RGF0ZXNGb3JCcmVha0V2ZW50c0ZvckRheSA9IChcbiAgYWxsRXZlbnRzOiBFdmVudFBsdXNUeXBlW10sXG4gIGJyZWFrRXZlbnRzOiBFdmVudFBsdXNUeXBlW10sXG4gIHVzZXJQcmVmZXJlbmNlOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIHRpbWV6b25lOiBzdHJpbmdcbik6IEV2ZW50UGx1c1R5cGVbXSA9PiB7XG4gIGlmICghYWxsRXZlbnRzPy5bMF0/LmlkKSB7XG4gICAgY29uc29sZS5sb2coJ25vIGFsbEV2ZW50cyBpbnNpZGUgYWRqdXN0U3RhcnREYXRlc0ZvckJyZWFrRXZlbnRzJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlLnN0YXJ0VGltZXM7XG4gIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2UuZW5kVGltZXM7XG4gIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICBkYXlqcyhhbGxFdmVudHM/LlswXT8uc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHoodGltZXpvbmUsIHRydWUpLnRvRGF0ZSgpXG4gICk7XG4gIGNvbnN0IHN0YXJ0SG91ciA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgY29uc3Qgc3RhcnRNaW51dGUgPSBzdGFydFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLm1pbnV0ZXM7XG4gIGNvbnN0IGVuZEhvdXIgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICBjb25zdCBlbmRNaW51dGUgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuICBjb25zdCBuZXdCcmVha0V2ZW50cyA9IFtdO1xuXG4gIGNvbnN0IHN0YXJ0T2ZXb3JraW5nRGF5ID0gZGF5anMoYWxsRXZlbnRzWzBdPy5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eih0aW1lem9uZSwgdHJ1ZSlcbiAgICAuaG91cihzdGFydEhvdXIpXG4gICAgLm1pbnV0ZShzdGFydE1pbnV0ZSk7XG5cbiAgY29uc3QgZW5kT2ZXb3JraW5nRGF5ID0gZGF5anMoYWxsRXZlbnRzWzBdPy5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHoodGltZXpvbmUsIHRydWUpXG4gICAgLmhvdXIoZW5kSG91cilcbiAgICAubWludXRlKGVuZE1pbnV0ZSk7XG5cbiAgY29uc3QgZmlsdGVyZWRFdmVudHMgPSBhbGxFdmVudHMuZmlsdGVyKChlKSA9PiAhZS5pc0JyZWFrKTtcbiAgaWYgKGJyZWFrRXZlbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChjb25zdCBicmVha0V2ZW50IG9mIGJyZWFrRXZlbnRzKSB7XG4gICAgICBsZXQgZm91bmRTcGFjZSA9IGZhbHNlO1xuICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgIHdoaWxlICghZm91bmRTcGFjZSAmJiBpbmRleCA8IGZpbHRlcmVkRXZlbnRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwb3NzaWJsZUVuZERhdGUgPSBkYXlqcyhcbiAgICAgICAgICBmaWx0ZXJlZEV2ZW50c1tpbmRleF0uc3RhcnREYXRlLnNsaWNlKDAsIDE5KVxuICAgICAgICApLnR6KHRpbWV6b25lLCB0cnVlKTtcblxuICAgICAgICBjb25zdCBwb3NzaWJsZVN0YXJ0RGF0ZSA9IGRheWpzKHBvc3NpYmxlRW5kRGF0ZS5mb3JtYXQoKS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KHRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5zdWJ0cmFjdCh1c2VyUHJlZmVyZW5jZS5icmVha0xlbmd0aCwgJ21pbnV0ZScpO1xuICAgICAgICBsZXQgaXNCZXR3ZWVuU3RhcnQgPSB0cnVlO1xuICAgICAgICBsZXQgaXNCZXR3ZWVuRW5kID0gdHJ1ZTtcbiAgICAgICAgbGV0IGJldHdlZW5JbmRleCA9IDA7XG4gICAgICAgIGxldCBiZXR3ZWVuV29ya2luZ0RheVN0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgbGV0IGJldHdlZW5Xb3JraW5nRGF5RW5kID0gdHJ1ZTtcbiAgICAgICAgbGV0IGlzQmV0d2VlbkJyZWFrU3RhcnQgPSB0cnVlO1xuICAgICAgICBsZXQgaXNCZXR3ZWVuQnJlYWtFbmQgPSB0cnVlO1xuXG4gICAgICAgIHdoaWxlIChcbiAgICAgICAgICAoaXNCZXR3ZWVuU3RhcnQgfHxcbiAgICAgICAgICAgIGlzQmV0d2VlbkVuZCB8fFxuICAgICAgICAgICAgIWJldHdlZW5Xb3JraW5nRGF5U3RhcnQgfHxcbiAgICAgICAgICAgICFiZXR3ZWVuV29ya2luZ0RheUVuZCB8fFxuICAgICAgICAgICAgaXNCZXR3ZWVuQnJlYWtTdGFydCB8fFxuICAgICAgICAgICAgaXNCZXR3ZWVuQnJlYWtFbmQpICYmXG4gICAgICAgICAgYmV0d2VlbkluZGV4IDwgZmlsdGVyZWRFdmVudHMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgIGlzQmV0d2VlblN0YXJ0ID0gcG9zc2libGVTdGFydERhdGUuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgZGF5anMoZmlsdGVyZWRFdmVudHNbYmV0d2VlbkluZGV4XS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihcbiAgICAgICAgICAgICAgdGltZXpvbmUsXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBkYXlqcyhmaWx0ZXJlZEV2ZW50c1tiZXR3ZWVuSW5kZXhdLmVuZERhdGUuc2xpY2UoMCwgMTkpKS50eihcbiAgICAgICAgICAgICAgdGltZXpvbmUsXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICdbKSdcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaXNCZXR3ZWVuRW5kID0gcG9zc2libGVFbmREYXRlLmlzQmV0d2VlbihcbiAgICAgICAgICAgIGRheWpzKGZpbHRlcmVkRXZlbnRzW2JldHdlZW5JbmRleF0uc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooXG4gICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZGF5anMoZmlsdGVyZWRFdmVudHNbYmV0d2VlbkluZGV4XS5lbmREYXRlLnNsaWNlKDAsIDE5KSkudHooXG4gICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAnKF0nXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGJldHdlZW5Xb3JraW5nRGF5U3RhcnQgPSBwb3NzaWJsZVN0YXJ0RGF0ZS5pc0JldHdlZW4oXG4gICAgICAgICAgICBzdGFydE9mV29ya2luZ0RheSxcbiAgICAgICAgICAgIGVuZE9mV29ya2luZ0RheSxcbiAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBiZXR3ZWVuV29ya2luZ0RheUVuZCA9IHBvc3NpYmxlRW5kRGF0ZS5pc0JldHdlZW4oXG4gICAgICAgICAgICBzdGFydE9mV29ya2luZ0RheSxcbiAgICAgICAgICAgIGVuZE9mV29ya2luZ0RheSxcbiAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgJyhdJ1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IGJyZWFrRXZlbnQgb2YgYnJlYWtFdmVudHMpIHtcbiAgICAgICAgICAgIGlzQmV0d2VlbkJyZWFrU3RhcnQgPSBwb3NzaWJsZVN0YXJ0RGF0ZS5pc0JldHdlZW4oXG4gICAgICAgICAgICAgIGRheWpzKGJyZWFrRXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHoodGltZXpvbmUsIHRydWUpLFxuICAgICAgICAgICAgICBkYXlqcyhicmVha0V2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKS50eih0aW1lem9uZSwgdHJ1ZSksXG4gICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAnWyknXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpc0JldHdlZW5CcmVha0VuZCA9IHBvc3NpYmxlRW5kRGF0ZS5pc0JldHdlZW4oXG4gICAgICAgICAgICAgIGRheWpzKGJyZWFrRXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHoodGltZXpvbmUsIHRydWUpLFxuICAgICAgICAgICAgICBkYXlqcyhicmVha0V2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKS50eih0aW1lem9uZSwgdHJ1ZSksXG4gICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAnKF0nXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJldHdlZW5JbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm91bmRTcGFjZSA9XG4gICAgICAgICAgIWlzQmV0d2VlblN0YXJ0ICYmXG4gICAgICAgICAgIWlzQmV0d2VlbkVuZCAmJlxuICAgICAgICAgIGJldHdlZW5Xb3JraW5nRGF5U3RhcnQgJiZcbiAgICAgICAgICBiZXR3ZWVuV29ya2luZ0RheUVuZCAmJlxuICAgICAgICAgICFpc0JldHdlZW5CcmVha1N0YXJ0ICYmXG4gICAgICAgICAgIWlzQmV0d2VlbkJyZWFrRW5kO1xuXG4gICAgICAgIGlmIChmb3VuZFNwYWNlKSB7XG4gICAgICAgICAgY29uc3QgbmV3QnJlYWtFdmVudCA9IHtcbiAgICAgICAgICAgIC4uLmJyZWFrRXZlbnQsXG4gICAgICAgICAgICBzdGFydERhdGU6IHBvc3NpYmxlU3RhcnREYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBlbmREYXRlOiBwb3NzaWJsZUVuZERhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5ld0JyZWFrRXZlbnRzLnB1c2gobmV3QnJlYWtFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCcmVha0V2ZW50cztcbn07XG5leHBvcnQgY29uc3QgY29udmVydFRvVG90YWxXb3JraW5nSG91cnNGb3JJbnRlcm5hbEF0dGVuZGVlID0gKFxuICB1c2VyUHJlZmVyZW5jZTogVXNlclByZWZlcmVuY2VUeXBlLFxuICBob3N0U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nXG4pID0+IHtcbiAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlLnN0YXJ0VGltZXM7XG4gIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2UuZW5kVGltZXM7XG4gIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICApO1xuICBjb25zdCBzdGFydEhvdXIgPSBzdGFydFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLmhvdXI7XG4gIGNvbnN0IHN0YXJ0TWludXRlID0gc3RhcnRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuICBjb25zdCBlbmRIb3VyID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgY29uc3QgZW5kTWludXRlID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkubWludXRlcztcblxuICBjb25zdCBzdGFydER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgIGhvdXJzOiBzdGFydEhvdXIsXG4gICAgbWludXRlczogc3RhcnRNaW51dGUsXG4gIH0pO1xuICBjb25zdCBlbmREdXJhdGlvbiA9IGRheWpzLmR1cmF0aW9uKHsgaG91cnM6IGVuZEhvdXIsIG1pbnV0ZXM6IGVuZE1pbnV0ZSB9KTtcbiAgY29uc3QgdG90YWxEdXJhdGlvbiA9IGVuZER1cmF0aW9uLnN1YnRyYWN0KHN0YXJ0RHVyYXRpb24pO1xuICByZXR1cm4gdG90YWxEdXJhdGlvbi5hc0hvdXJzKCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29udmVydFRvVG90YWxXb3JraW5nSG91cnNGb3JFeHRlcm5hbEF0dGVuZGVlID0gKFxuICBhdHRlbmRlZUV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBob3N0U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICB1c2VyVGltZXpvbmU6IHN0cmluZ1xuKSA9PiB7XG4gIGNvbnN0IGRheU9mV2Vla0ludEJ5SG9zdCA9IGdldElTT0RheShcbiAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICApO1xuICBjb25zdCBzYW1lRGF5RXZlbnRzID0gYXR0ZW5kZWVFdmVudHMuZmlsdGVyKFxuICAgIChlKSA9PlxuICAgICAgZ2V0SVNPRGF5KFxuICAgICAgICBkYXlqcyhlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgLnRvRGF0ZSgpXG4gICAgICApID09PSBkYXlPZldlZWtJbnRCeUhvc3RcbiAgKTtcbiAgY29uc3QgbWluU3RhcnREYXRlID0gXy5taW5CeShzYW1lRGF5RXZlbnRzLCAoZSkgPT5cbiAgICBkYXlqcyhlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLnVuaXgoKVxuICApO1xuICBjb25zdCBtYXhFbmREYXRlID0gXy5tYXhCeShzYW1lRGF5RXZlbnRzLCAoZSkgPT5cbiAgICBkYXlqcyhlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC51bml4KClcbiAgKTtcblxuICBsZXQgd29ya0VuZEhvdXJCeUhvc3QgPSBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAuaG91cigpO1xuICBjb25zdCB3b3JrRW5kTWludXRlQnlIb3N0ID0gZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLmlzQmV0d2VlbihcbiAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5taW51dGUoMCksXG4gICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICdtaW51dGUnLFxuICAgICAgJ1spJ1xuICAgIClcbiAgICA/IDE1XG4gICAgOiBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLm1pbnV0ZSgxNSksXG4gICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgIClcbiAgICAgID8gMzBcbiAgICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoNDUpLFxuICAgICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICAgKVxuICAgICAgICA/IDQ1XG4gICAgICAgIDogMDtcbiAgaWYgKHdvcmtFbmRNaW51dGVCeUhvc3QgPT09IDApIHtcbiAgICBpZiAod29ya0VuZEhvdXJCeUhvc3QgPCAyMykge1xuICAgICAgd29ya0VuZEhvdXJCeUhvc3QgKz0gMTtcbiAgICB9XG4gIH1cblxuICBjb25zdCB3b3JrU3RhcnRIb3VyQnlIb3N0ID0gZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLmhvdXIoKTtcbiAgY29uc3Qgd29ya1N0YXJ0TWludXRlQnlIb3N0ID0gZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLmlzQmV0d2VlbihcbiAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5taW51dGUoMCksXG4gICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICdtaW51dGUnLFxuICAgICAgJ1spJ1xuICAgIClcbiAgICA/IDBcbiAgICA6IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAnWyknXG4gICAgICAgICAgKVxuICAgICAgPyAxNVxuICAgICAgOiBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSg0NSksXG4gICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAnWyknXG4gICAgICAgICAgICApXG4gICAgICAgID8gMzBcbiAgICAgICAgOiA0NTtcblxuICBjb25zb2xlLmxvZyhcbiAgICB3b3JrU3RhcnRIb3VyQnlIb3N0LFxuICAgIHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCxcbiAgICB3b3JrRW5kSG91ckJ5SG9zdCxcbiAgICAnIHdvcmtTdGFydEhvdXJCeUhvc3QsIHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCwgd29ya0VuZEhvdXJCeUhvc3QgZm9yIHRvdGFsIHdvcmtpbmcgaG91cnMnXG4gICk7XG4gIGNvbnN0IHN0YXJ0RHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgaG91cnM6IHdvcmtTdGFydEhvdXJCeUhvc3QsXG4gICAgbWludXRlczogd29ya1N0YXJ0TWludXRlQnlIb3N0LFxuICB9KTtcbiAgY29uc3QgZW5kRHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgaG91cnM6IHdvcmtFbmRIb3VyQnlIb3N0LFxuICAgIG1pbnV0ZXM6IHdvcmtFbmRNaW51dGVCeUhvc3QsXG4gIH0pO1xuICBjb25zdCB0b3RhbER1cmF0aW9uID0gZW5kRHVyYXRpb24uc3VidHJhY3Qoc3RhcnREdXJhdGlvbik7XG4gIHJldHVybiB0b3RhbER1cmF0aW9uLmFzSG91cnMoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUJyZWFrcyA9IChcbiAgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIG51bWJlck9mQnJlYWtzVG9HZW5lcmF0ZTogbnVtYmVyLFxuICBldmVudE1pcnJvcjogRXZlbnRQbHVzVHlwZSxcbiAgZ2xvYmFsQ2FsZW5kYXJJZD86IHN0cmluZ1xuKTogRXZlbnRQbHVzVHlwZVtdID0+IHtcbiAgY29uc3QgYnJlYWtzID0gW107XG4gIGlmICghdXNlclByZWZlcmVuY2VzPy5icmVha0xlbmd0aCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgJ25vIHVzZXIgcHJlZmVyZW5jZXMgYnJlYWtMZW5ndGggcHJvdmlkZWQgaW5zaWRlIGdlbmVyYXRlQnJlYWtzJ1xuICAgICk7XG4gICAgcmV0dXJuIGJyZWFrcztcbiAgfVxuXG4gIGlmICghbnVtYmVyT2ZCcmVha3NUb0dlbmVyYXRlKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICAnbm8gbnVtYmVyIG9mIGJyZWFrcyB0byBnZW5lcmF0ZSBwcm92aWRlZCBpbnNpZGUgZ2VuZXJhdGVCcmVha3MnXG4gICAgKTtcbiAgICByZXR1cm4gYnJlYWtzO1xuICB9XG5cbiAgaWYgKCFldmVudE1pcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCdubyBldmVudCBtaXJyb3IgcHJvdmlkZWQgaW5zaWRlIGdlbmVyYXRlQnJlYWtzJyk7XG4gICAgcmV0dXJuIGJyZWFrcztcbiAgfVxuICBjb25zb2xlLmxvZyhcbiAgICBudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUsXG4gICAgJyBudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUgaW5zaWRlIGdlbmVyYXRlQnJlYWtzJ1xuICApO1xuXG4gIGNvbnN0IGJyZWFrTGVuZ3RoID1cbiAgICB1c2VyUHJlZmVyZW5jZXMuYnJlYWtMZW5ndGggPD0gMTUgPyAxNSA6IHVzZXJQcmVmZXJlbmNlcy5icmVha0xlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQnJlYWtzVG9HZW5lcmF0ZTsgaSsrKSB7XG4gICAgY29uc3QgZXZlbnRJZCA9IHV1aWQoKTtcbiAgICBjb25zdCBicmVha0V2ZW50OiBFdmVudFBsdXNUeXBlID0ge1xuICAgICAgaWQ6IGAke2V2ZW50SWR9IyR7Z2xvYmFsQ2FsZW5kYXJJZCB8fCBldmVudE1pcnJvci5jYWxlbmRhcklkfWAsXG4gICAgICB1c2VySWQ6IHVzZXJQcmVmZXJlbmNlcy51c2VySWQsXG4gICAgICB0aXRsZTogJ0JyZWFrJyxcbiAgICAgIHN0YXJ0RGF0ZTogZGF5anMoZXZlbnRNaXJyb3Iuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGV2ZW50TWlycm9yLnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuZm9ybWF0KCksXG4gICAgICBlbmREYXRlOiBkYXlqcyhldmVudE1pcnJvci5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooZXZlbnRNaXJyb3IudGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5hZGQoYnJlYWtMZW5ndGgsICdtaW51dGUnKVxuICAgICAgICAuZm9ybWF0KCksXG4gICAgICBhbGxEYXk6IGZhbHNlLFxuICAgICAgbm90ZXM6ICdCcmVhaycsXG4gICAgICB0aW1lem9uZTogZXZlbnRNaXJyb3IudGltZXpvbmUsXG4gICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgIHByaW9yaXR5OiAxLFxuICAgICAgaXNGb2xsb3dVcDogZmFsc2UsXG4gICAgICBpc1ByZUV2ZW50OiBmYWxzZSxcbiAgICAgIG1vZGlmaWFibGU6IHRydWUsXG4gICAgICBhbnlvbmVDYW5BZGRTZWxmOiBmYWxzZSxcbiAgICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogZmFsc2UsXG4gICAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0czogZmFsc2UsXG4gICAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLFxuICAgICAgb3JpZ2luYWxBbGxEYXk6IGZhbHNlLFxuICAgICAgY2FsZW5kYXJJZDogZ2xvYmFsQ2FsZW5kYXJJZCB8fCBldmVudE1pcnJvci5jYWxlbmRhcklkLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB1c2VyUHJlZmVyZW5jZXMuYnJlYWtDb2xvciB8fCAnI0Y3RUJGNycsXG4gICAgICBpc0JyZWFrOiB0cnVlLFxuICAgICAgZHVyYXRpb246IGJyZWFrTGVuZ3RoLFxuICAgICAgdXNlck1vZGlmaWVkRHVyYXRpb246IHRydWUsXG4gICAgICB1c2VyTW9kaWZpZWRDb2xvcjogdHJ1ZSxcbiAgICAgIGlzUG9zdEV2ZW50OiBmYWxzZSxcbiAgICAgIG1ldGhvZDogJ2NyZWF0ZScsXG4gICAgICBldmVudElkLFxuICAgIH07XG4gICAgYnJlYWtzLnB1c2goYnJlYWtFdmVudCk7XG4gIH1cblxuICByZXR1cm4gYnJlYWtzO1xufTtcblxuZXhwb3J0IGNvbnN0IHNob3VsZEdlbmVyYXRlQnJlYWtFdmVudHNGb3JEYXkgPSAoXG4gIHdvcmtpbmdIb3VyczogbnVtYmVyLFxuICB1c2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlVHlwZSxcbiAgYWxsRXZlbnRzOiBFdmVudFBsdXNUeXBlW11cbikgPT4ge1xuICBpZiAoIXVzZXJQcmVmZXJlbmNlcz8uYnJlYWtMZW5ndGgpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgICdubyB1c2VyIHByZWZlcmVuY2VzIGJyZWFrTGVuZ3RoIHByb3ZpZGVkIGluc2lkZSBzaG91bGRHZW5lcmF0ZUJyZWFrRXZlbnRzJ1xuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCEoYWxsRXZlbnRzPy5sZW5ndGggPiAwKSkge1xuICAgIGNvbnNvbGUubG9nKCdubyBhbGxFdmVudHMgcHJlc2VudCBpbnNpZGUgc2hvdWxkR2VuZXJhdGVCcmVha0V2ZW50c0ZvckRheScpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGJyZWFrRXZlbnRzID0gYWxsRXZlbnRzLmZpbHRlcigoZXZlbnQpID0+IGV2ZW50LmlzQnJlYWspO1xuICBjb25zdCBudW1iZXJPZkJyZWFrc1BlckRheSA9IHVzZXJQcmVmZXJlbmNlcy5taW5OdW1iZXJPZkJyZWFrcztcblxuICBjb25zdCBicmVha0xlbmd0aCA9XG4gICAgdXNlclByZWZlcmVuY2VzLmJyZWFrTGVuZ3RoIDw9IDE1ID8gMTUgOiB1c2VyUHJlZmVyZW5jZXMuYnJlYWtMZW5ndGg7XG5cbiAgY29uc3QgYnJlYWtIb3Vyc0F2YWlsYWJsZSA9IChicmVha0xlbmd0aCAvIDYwKSAqIG51bWJlck9mQnJlYWtzUGVyRGF5O1xuICBsZXQgYnJlYWtIb3Vyc1VzZWQgPSAwO1xuICBmb3IgKGNvbnN0IGJyZWFrRXZlbnQgb2YgYnJlYWtFdmVudHMpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGRheWpzXG4gICAgICAuZHVyYXRpb24oXG4gICAgICAgIGRheWpzKFxuICAgICAgICAgIGRheWpzKGJyZWFrRXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcycpXG4gICAgICAgICkuZGlmZihcbiAgICAgICAgICBkYXlqcyhicmVha0V2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcycpXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIC5hc0hvdXJzKCk7XG4gICAgYnJlYWtIb3Vyc1VzZWQgKz0gZHVyYXRpb247XG4gIH1cblxuICBpZiAoYnJlYWtIb3Vyc1VzZWQgPj0gYnJlYWtIb3Vyc0F2YWlsYWJsZSkge1xuICAgIGNvbnNvbGUubG9nKCdicmVha0hvdXJzVXNlZCA+PSBicmVha0hvdXJzQXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCEoYWxsRXZlbnRzPy5sZW5ndGggPiAwKSkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgJ3RoZXJlIGFyZSBubyBldmVudHMgZm9yIHRoaXMgZGF0ZSBpbnNpZGUgc2hvdWxkR2VuZXJhdGVCcmVha0V2ZW50cydcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsZXQgaG91cnNVc2VkID0gMDtcbiAgZm9yIChjb25zdCBldmVudCBvZiBhbGxFdmVudHMpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGRheWpzXG4gICAgICAuZHVyYXRpb24oXG4gICAgICAgIGRheWpzKFxuICAgICAgICAgIGRheWpzKGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKS5mb3JtYXQoJ1lZWVktTU0tRERUSEg6bW06c3MnKVxuICAgICAgICApLmRpZmYoXG4gICAgICAgICAgZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzJylcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgLmFzSG91cnMoKTtcbiAgICBob3Vyc1VzZWQgKz0gZHVyYXRpb247XG4gIH1cblxuICBpZiAoaG91cnNVc2VkID49IHdvcmtpbmdIb3Vycykge1xuICAgIGNvbnNvbGUubG9nKCdob3Vyc1VzZWQgPj0gd29ya2luZ0hvdXJzJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVCcmVha0V2ZW50c0ZvckRheSA9IGFzeW5jIChcbiAgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBob3N0U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICBnbG9iYWxDYWxlbmRhcklkPzogc3RyaW5nLFxuICBpc0ZpcnN0RGF5PzogYm9vbGVhblxuKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCF1c2VyUHJlZmVyZW5jZXM/LmJyZWFrTGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJ25vIHVzZXIgcHJlZmVyZW5jZXMgYnJlYWtMZW5ndGggcHJvdmlkZWQgaW5zaWRlIHNob3VsZEdlbmVyYXRlQnJlYWtFdmVudHMnXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdubyB1c2VySWQgcHJvdmlkZWQgaW5zaWRlIHNob3VsZEdlbmVyYXRlQnJlYWtFdmVudHMnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghaG9zdFN0YXJ0RGF0ZSkge1xuICAgICAgY29uc29sZS5sb2coJ25vIHN0YXJ0RGF0ZSBwcm92aWRlZCBpbnNpZGUgc2hvdWxkR2VuZXJhdGVCcmVha0V2ZW50cycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFob3N0VGltZXpvbmUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdubyB0aW1lem9uZSBwcm92aWRlZCBpbnNpZGUgc2hvdWxkR2VuZXJhdGVCcmVha0V2ZW50cycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGlzRmlyc3REYXkpIHtcbiAgICAgIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2VzLmVuZFRpbWVzO1xuICAgICAgY29uc3QgZGF5T2ZXZWVrSW50ID0gZ2V0SVNPRGF5KFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICAgICAgKTtcblxuICAgICAgbGV0IHN0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaG91cigpO1xuICAgICAgbGV0IHN0YXJ0TWludXRlQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5taW51dGUoKTtcbiAgICAgIGNvbnN0IGVuZEhvdXIgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICAgICAgY29uc3QgZW5kTWludXRlID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkubWludXRlcztcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlcy5zdGFydFRpbWVzO1xuICAgICAgY29uc3Qgd29ya1N0YXJ0SG91ciA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgICAgIGNvbnN0IHdvcmtTdGFydE1pbnV0ZSA9IHN0YXJ0VGltZXMuZmluZChcbiAgICAgICAgKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnRcbiAgICAgICkubWludXRlcztcblxuICAgICAgaWYgKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkuaXNBZnRlcihcbiAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkuaG91cihlbmRIb3VyKS5taW51dGUoZW5kTWludXRlKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuaXNCZWZvcmUoXG4gICAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLmhvdXIod29ya1N0YXJ0SG91cilcbiAgICAgICAgICAgICAgLm1pbnV0ZSh3b3JrU3RhcnRNaW51dGUpXG4gICAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHN0YXJ0SG91ckJ5SG9zdCA9IHdvcmtTdGFydEhvdXI7XG4gICAgICAgIHN0YXJ0TWludXRlQnlIb3N0ID0gd29ya1N0YXJ0TWludXRlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3b3JraW5nSG91cnMgPSBjb252ZXJ0VG9Ub3RhbFdvcmtpbmdIb3Vyc0ZvckludGVybmFsQXR0ZW5kZWUoXG4gICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgaG9zdFN0YXJ0RGF0ZSxcbiAgICAgICAgaG9zdFRpbWV6b25lXG4gICAgICApO1xuICAgICAgY29uc3QgYWxsRXZlbnRzID0gYXdhaXQgbGlzdEV2ZW50c0ZvckRhdGUoXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgICAgLm1pbnV0ZShzdGFydE1pbnV0ZUJ5SG9zdClcbiAgICAgICAgICAuZm9ybWF0KCksXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmhvdXIoZW5kSG91cilcbiAgICAgICAgICAubWludXRlKGVuZE1pbnV0ZSlcbiAgICAgICAgICAuZm9ybWF0KCksXG4gICAgICAgIGhvc3RUaW1lem9uZVxuICAgICAgKTtcbiAgICAgIGlmICghKGFsbEV2ZW50cz8ubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJ25vIGFsbEV2ZW50cyBwcmVzZW50IGluc2lkZSBzaG91bGRHZW5lcmF0ZUJyZWFrRXZlbnRzRm9yRGF5J1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNob3VsZEdlbmVyYXRlQnJlYWtzID0gc2hvdWxkR2VuZXJhdGVCcmVha0V2ZW50c0ZvckRheShcbiAgICAgICAgd29ya2luZ0hvdXJzLFxuICAgICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgIGFsbEV2ZW50c1xuICAgICAgKTtcbiAgICAgIGlmICghc2hvdWxkR2VuZXJhdGVCcmVha3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Nob3VsZCBub3QgZ2VuZXJhdGUgYnJlYWtzJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBsZXQgaG91cnNVc2VkID0gMDtcblxuICAgICAgaWYgKGFsbEV2ZW50cz8ubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFsbEV2ZW50IG9mIGFsbEV2ZW50cykge1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZGF5anNcbiAgICAgICAgICAgIC5kdXJhdGlvbihcbiAgICAgICAgICAgICAgZGF5anMoYWxsRXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAuZGlmZihcbiAgICAgICAgICAgICAgICAgIGRheWpzKGFsbEV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYXNIb3VycygpO1xuICAgICAgICAgIGhvdXJzVXNlZCArPSBkdXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgaG91cnNBdmFpbGFibGUgPSB3b3JraW5nSG91cnMgLSBob3Vyc1VzZWQ7XG4gICAgICBob3Vyc0F2YWlsYWJsZSAtPSB3b3JraW5nSG91cnMgKiB1c2VyUHJlZmVyZW5jZXMubWF4V29ya0xvYWRQZXJjZW50O1xuICAgICAgaWYgKGhvdXJzQXZhaWxhYmxlIDw9IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coaG91cnNBdmFpbGFibGUsICcgbm8gaG91cnMgYXZhaWxhYmxlJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvbGRCcmVha0V2ZW50cyA9IGFsbEV2ZW50c1xuICAgICAgICAuZmlsdGVyKChldmVudCkgPT4gZXZlbnQuaXNCcmVhaylcbiAgICAgICAgLmZpbHRlcigoZSkgPT5cbiAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaXNTYW1lKFxuICAgICAgICAgICAgICBkYXlqcyhlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSksXG4gICAgICAgICAgICAgICdkYXknXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgIGNvbnN0IGJyZWFrRXZlbnRzID0gb2xkQnJlYWtFdmVudHM7XG5cbiAgICAgIGNvbnN0IG51bWJlck9mQnJlYWtzUGVyRGF5ID0gdXNlclByZWZlcmVuY2VzLm1pbk51bWJlck9mQnJlYWtzO1xuICAgICAgY29uc29sZS5sb2cobnVtYmVyT2ZCcmVha3NQZXJEYXksICcgbnVtYmVyT2ZCcmVha3NQZXJEYXknKTtcbiAgICAgIGNvbnN0IGJyZWFrSG91cnNUb0dlbmVyYXRlID1cbiAgICAgICAgKHVzZXJQcmVmZXJlbmNlcy5icmVha0xlbmd0aCAvIDYwKSAqIG51bWJlck9mQnJlYWtzUGVyRGF5O1xuICAgICAgbGV0IGJyZWFrSG91cnNVc2VkID0gMDtcblxuICAgICAgaWYgKGJyZWFrRXZlbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgYnJlYWtFdmVudCBvZiBicmVha0V2ZW50cykge1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZGF5anNcbiAgICAgICAgICAgIC5kdXJhdGlvbihcbiAgICAgICAgICAgICAgZGF5anMoYnJlYWtFdmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC5kaWZmKFxuICAgICAgICAgICAgICAgICAgZGF5anMoYnJlYWtFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihcbiAgICAgICAgICAgICAgICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFzSG91cnMoKTtcbiAgICAgICAgICBicmVha0hvdXJzVXNlZCArPSBkdXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBhY3R1YWxCcmVha0hvdXJzVG9HZW5lcmF0ZSA9IGJyZWFrSG91cnNUb0dlbmVyYXRlIC0gYnJlYWtIb3Vyc1VzZWQ7XG5cbiAgICAgIGlmIChhY3R1YWxCcmVha0hvdXJzVG9HZW5lcmF0ZSA+IGhvdXJzQXZhaWxhYmxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCcgbm8gaG91cnMgYXZhaWxhYmxlIHRvIGdlbmVyYXRlIGJyZWFrJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhicmVha0hvdXJzVXNlZCwgJyBicmVha0hvdXJzVXNlZCcpO1xuICAgICAgY29uc29sZS5sb2coYnJlYWtIb3Vyc1RvR2VuZXJhdGUsICcgYnJlYWtIb3Vyc0F2YWlsYWJsZScpO1xuICAgICAgY29uc3QgYnJlYWtMZW5ndGhBc0hvdXJzID0gdXNlclByZWZlcmVuY2VzLmJyZWFrTGVuZ3RoIC8gNjA7XG4gICAgICBjb25zb2xlLmxvZyhicmVha0xlbmd0aEFzSG91cnMsICcgYnJlYWtMZW5ndGhBc0hvdXJzJyk7XG4gICAgICBjb25zdCBudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUgPSBNYXRoLmZsb29yKFxuICAgICAgICBhY3R1YWxCcmVha0hvdXJzVG9HZW5lcmF0ZSAvIGJyZWFrTGVuZ3RoQXNIb3Vyc1xuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKG51bWJlck9mQnJlYWtzVG9HZW5lcmF0ZSwgJyBudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUnKTtcblxuICAgICAgaWYgKG51bWJlck9mQnJlYWtzVG9HZW5lcmF0ZSA8IDEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Nob3VsZCBub3QgZ2VuZXJhdGUgYnJlYWtzJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBldmVudE1pcnJvciA9IGFsbEV2ZW50cy5maW5kKChldmVudCkgPT4gIWV2ZW50LmlzQnJlYWspO1xuXG4gICAgICBjb25zdCBuZXdFdmVudHMgPSBnZW5lcmF0ZUJyZWFrcyhcbiAgICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgICBudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUsXG4gICAgICAgIGV2ZW50TWlycm9yLFxuICAgICAgICBnbG9iYWxDYWxlbmRhcklkXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gbmV3RXZlbnRzO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2VzLmVuZFRpbWVzO1xuICAgIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLnRvRGF0ZSgpXG4gICAgKTtcblxuICAgIGNvbnN0IGVuZEhvdXIgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICAgIGNvbnN0IGVuZE1pbnV0ZSA9IGVuZFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLm1pbnV0ZXM7XG5cbiAgICBjb25zdCBzdGFydFRpbWVzID0gdXNlclByZWZlcmVuY2VzLnN0YXJ0VGltZXM7XG4gICAgY29uc3Qgc3RhcnRIb3VyID0gc3RhcnRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICAgIGNvbnN0IHN0YXJ0TWludXRlID0gc3RhcnRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuXG4gICAgY29uc3Qgd29ya2luZ0hvdXJzID0gY29udmVydFRvVG90YWxXb3JraW5nSG91cnNGb3JJbnRlcm5hbEF0dGVuZGVlKFxuICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgaG9zdFN0YXJ0RGF0ZSxcbiAgICAgIGhvc3RUaW1lem9uZVxuICAgICk7XG4gICAgY29uc3QgYWxsRXZlbnRzID0gYXdhaXQgbGlzdEV2ZW50c0ZvckRhdGUoXG4gICAgICB1c2VySWQsXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmhvdXIoc3RhcnRIb3VyKVxuICAgICAgICAubWludXRlKHN0YXJ0TWludXRlKVxuICAgICAgICAuZm9ybWF0KCksXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmhvdXIoZW5kSG91cilcbiAgICAgICAgLm1pbnV0ZShlbmRNaW51dGUpXG4gICAgICAgIC5mb3JtYXQoKSxcbiAgICAgIGhvc3RUaW1lem9uZVxuICAgICk7XG4gICAgaWYgKCEoYWxsRXZlbnRzPy5sZW5ndGggPiAwKSkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICdubyBhbGxFdmVudHMgcHJlc2VudCBpbnNpZGUgc2hvdWxkR2VuZXJhdGVCcmVha0V2ZW50c0ZvckRheSdcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgc2hvdWxkR2VuZXJhdGVCcmVha3MgPSBzaG91bGRHZW5lcmF0ZUJyZWFrRXZlbnRzRm9yRGF5KFxuICAgICAgd29ya2luZ0hvdXJzLFxuICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgYWxsRXZlbnRzXG4gICAgKTtcbiAgICBpZiAoIXNob3VsZEdlbmVyYXRlQnJlYWtzKSB7XG4gICAgICBjb25zb2xlLmxvZygnc2hvdWxkIG5vdCBnZW5lcmF0ZSBicmVha3MnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBob3Vyc1VzZWQgPSAwO1xuXG4gICAgaWYgKGFsbEV2ZW50cz8ubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBhbGxFdmVudCBvZiBhbGxFdmVudHMpIHtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBkYXlqc1xuICAgICAgICAgIC5kdXJhdGlvbihcbiAgICAgICAgICAgIGRheWpzKGFsbEV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAuZGlmZihcbiAgICAgICAgICAgICAgICBkYXlqcyhhbGxFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICAgLmFzSG91cnMoKTtcbiAgICAgICAgaG91cnNVc2VkICs9IGR1cmF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBob3Vyc0F2YWlsYWJsZSA9IHdvcmtpbmdIb3VycyAtIGhvdXJzVXNlZDtcbiAgICBob3Vyc0F2YWlsYWJsZSAtPSB3b3JraW5nSG91cnMgKiB1c2VyUHJlZmVyZW5jZXMubWF4V29ya0xvYWRQZXJjZW50O1xuXG4gICAgaWYgKGhvdXJzQXZhaWxhYmxlIDw9IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGhvdXJzQXZhaWxhYmxlLCAnIG5vIGhvdXJzIGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkQnJlYWtFdmVudHMgPSBhbGxFdmVudHNcbiAgICAgIC5maWx0ZXIoKGV2ZW50KSA9PiBldmVudC5pc0JyZWFrKVxuICAgICAgLmZpbHRlcigoZSkgPT5cbiAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuaXNTYW1lKGRheWpzKGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKSwgJ2RheScpXG4gICAgICApO1xuXG4gICAgY29uc3QgYnJlYWtFdmVudHMgPSBvbGRCcmVha0V2ZW50cztcblxuICAgIGNvbnN0IG51bWJlck9mQnJlYWtzUGVyRGF5ID0gdXNlclByZWZlcmVuY2VzLm1pbk51bWJlck9mQnJlYWtzO1xuICAgIGNvbnNvbGUubG9nKG51bWJlck9mQnJlYWtzUGVyRGF5LCAnIG51bWJlck9mQnJlYWtzUGVyRGF5Jyk7XG4gICAgY29uc3QgYnJlYWtIb3Vyc1RvR2VuZXJhdGUgPVxuICAgICAgKHVzZXJQcmVmZXJlbmNlcy5icmVha0xlbmd0aCAvIDYwKSAqIG51bWJlck9mQnJlYWtzUGVyRGF5O1xuICAgIGxldCBicmVha0hvdXJzVXNlZCA9IDA7XG5cbiAgICBpZiAoYnJlYWtFdmVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgYnJlYWtFdmVudCBvZiBicmVha0V2ZW50cykge1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGRheWpzXG4gICAgICAgICAgLmR1cmF0aW9uKFxuICAgICAgICAgICAgZGF5anMoYnJlYWtFdmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLmRpZmYoXG4gICAgICAgICAgICAgICAgZGF5anMoYnJlYWtFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICAgLmFzSG91cnMoKTtcbiAgICAgICAgYnJlYWtIb3Vyc1VzZWQgKz0gZHVyYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWN0dWFsQnJlYWtIb3Vyc1RvR2VuZXJhdGUgPSBicmVha0hvdXJzVG9HZW5lcmF0ZSAtIGJyZWFrSG91cnNVc2VkO1xuXG4gICAgaWYgKGFjdHVhbEJyZWFrSG91cnNUb0dlbmVyYXRlID4gaG91cnNBdmFpbGFibGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCcgbm8gaG91cnMgYXZhaWxhYmxlIHRvIGdlbmVyYXRlIGJyZWFrJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhicmVha0hvdXJzVXNlZCwgJyBicmVha0hvdXJzVXNlZCcpO1xuICAgIGNvbnNvbGUubG9nKGJyZWFrSG91cnNUb0dlbmVyYXRlLCAnIGJyZWFrSG91cnNBdmFpbGFibGUnKTtcbiAgICBjb25zdCBicmVha0xlbmd0aEFzSG91cnMgPSB1c2VyUHJlZmVyZW5jZXMuYnJlYWtMZW5ndGggLyA2MDtcbiAgICBjb25zb2xlLmxvZyhicmVha0xlbmd0aEFzSG91cnMsICcgYnJlYWtMZW5ndGhBc0hvdXJzJyk7XG4gICAgY29uc3QgbnVtYmVyT2ZCcmVha3NUb0dlbmVyYXRlID0gTWF0aC5mbG9vcihcbiAgICAgIGFjdHVhbEJyZWFrSG91cnNUb0dlbmVyYXRlIC8gYnJlYWtMZW5ndGhBc0hvdXJzXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUsICcgbnVtYmVyT2ZCcmVha3NUb0dlbmVyYXRlJyk7XG5cbiAgICBpZiAobnVtYmVyT2ZCcmVha3NUb0dlbmVyYXRlIDwgMSkge1xuICAgICAgY29uc29sZS5sb2coJ3Nob3VsZCBub3QgZ2VuZXJhdGUgYnJlYWtzJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudE1pcnJvciA9IGFsbEV2ZW50cy5maW5kKChldmVudCkgPT4gIWV2ZW50LmlzQnJlYWspO1xuXG4gICAgY29uc3QgbmV3RXZlbnRzID0gZ2VuZXJhdGVCcmVha3MoXG4gICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICBudW1iZXJPZkJyZWFrc1RvR2VuZXJhdGUsXG4gICAgICBldmVudE1pcnJvcixcbiAgICAgIGdsb2JhbENhbGVuZGFySWRcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ld0V2ZW50cztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGdlbmVyYXRlIGJyZWFrcyBmb3IgZGF5Jyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUJyZWFrRXZlbnRzRm9yRGF0ZSA9IGFzeW5jIChcbiAgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBob3N0U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RFbmREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICBnbG9iYWxDYWxlbmRhcklkPzogc3RyaW5nXG4pOiBQcm9taXNlPEV2ZW50UGx1c1R5cGVbXSB8IFtdPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG90YWxCcmVha0V2ZW50cyA9IFtdO1xuICAgIGNvbnN0IHRvdGFsRGF5cyA9IGRheWpzKGhvc3RFbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuZGlmZihkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKSwgJ2RheScpO1xuICAgIGNvbnNvbGUubG9nKHRvdGFsRGF5cywgJyB0b3RhbERheXMgaW5zaWRlIGdlbmVyYXRlQnJlYWtFdmVudHNGb3JEYXRlJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbERheXM7IGkrKykge1xuICAgICAgY29uc3QgZGF5RGF0ZSA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuYWRkKGksICdkYXknKVxuICAgICAgICAuZm9ybWF0KCk7XG5cbiAgICAgIGNvbnN0IG5ld0JyZWFrRXZlbnRzID0gYXdhaXQgZ2VuZXJhdGVCcmVha0V2ZW50c0ZvckRheShcbiAgICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGRheURhdGUsXG4gICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgZ2xvYmFsQ2FsZW5kYXJJZCxcbiAgICAgICAgaSA9PT0gMFxuICAgICAgKTtcblxuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgY29uc3QgZW5kVGltZXMgPSB1c2VyUHJlZmVyZW5jZXMuZW5kVGltZXM7XG4gICAgICAgIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICAgICAgICBkYXlqcyhkYXlEYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBzdGFydEhvdXIgPSBkYXlqcyhkYXlEYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKCk7XG4gICAgICAgIGxldCBzdGFydE1pbnV0ZSA9IGRheWpzKGRheURhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLm1pbnV0ZSgpO1xuICAgICAgICBjb25zdCBlbmRIb3VyID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgICAgICAgY29uc3QgZW5kTWludXRlID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkubWludXRlcztcblxuICAgICAgICBjb25zdCBzdGFydFRpbWVzID0gdXNlclByZWZlcmVuY2VzLnN0YXJ0VGltZXM7XG4gICAgICAgIGNvbnN0IHdvcmtTdGFydEhvdXIgPSBzdGFydFRpbWVzLmZpbmQoXG4gICAgICAgICAgKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnRcbiAgICAgICAgKS5ob3VyO1xuICAgICAgICBjb25zdCB3b3JrU3RhcnRNaW51dGUgPSBzdGFydFRpbWVzLmZpbmQoXG4gICAgICAgICAgKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnRcbiAgICAgICAgKS5taW51dGVzO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBkYXlqcyhkYXlEYXRlLnNsaWNlKDAsIDE5KSkuaXNBZnRlcihcbiAgICAgICAgICAgIGRheWpzKGRheURhdGUuc2xpY2UoMCwgMTkpKS5ob3VyKGVuZEhvdXIpLm1pbnV0ZShlbmRNaW51dGUpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBkYXlqcyhkYXlEYXRlLnNsaWNlKDAsIDE5KSkuaXNCZWZvcmUoXG4gICAgICAgICAgICBkYXlqcyhkYXlEYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLmhvdXIod29ya1N0YXJ0SG91cilcbiAgICAgICAgICAgICAgLm1pbnV0ZSh3b3JrU3RhcnRNaW51dGUpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBzdGFydEhvdXIgPSB3b3JrU3RhcnRIb3VyO1xuICAgICAgICAgIHN0YXJ0TWludXRlID0gd29ya1N0YXJ0TWludXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWxsRXZlbnRzID0gYXdhaXQgbGlzdEV2ZW50c0ZvckRhdGUoXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIGRheWpzKGRheURhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5ob3VyKHN0YXJ0SG91cilcbiAgICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGUpXG4gICAgICAgICAgICAuZm9ybWF0KCksXG4gICAgICAgICAgZGF5anMoZGF5RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmhvdXIoZW5kSG91cilcbiAgICAgICAgICAgIC5taW51dGUoZW5kTWludXRlKVxuICAgICAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgICAgIGhvc3RUaW1lem9uZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdCcmVha0V2ZW50c0FkanVzdGVkID1cbiAgICAgICAgICBhd2FpdCBhZGp1c3RTdGFydERhdGVzRm9yQnJlYWtFdmVudHNGb3JEYXkoXG4gICAgICAgICAgICBhbGxFdmVudHMsXG4gICAgICAgICAgICBuZXdCcmVha0V2ZW50cyxcbiAgICAgICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgICAgIGhvc3RUaW1lem9uZVxuICAgICAgICAgICk7XG4gICAgICAgIGlmIChuZXdCcmVha0V2ZW50c0FkanVzdGVkPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbmV3QnJlYWtFdmVudHNBZGp1c3RlZC5mb3JFYWNoKChiKSA9PlxuICAgICAgICAgICAgY29uc29sZS5sb2coYiwgJyBuZXdCcmVha0V2ZW50c0FkanVzdGVkJylcbiAgICAgICAgICApO1xuICAgICAgICAgIHRvdGFsQnJlYWtFdmVudHMucHVzaCguLi5uZXdCcmVha0V2ZW50c0FkanVzdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlcy5lbmRUaW1lcztcbiAgICAgIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICAgICAgZGF5anMoZGF5RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSkudG9EYXRlKClcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVuZEhvdXIgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICAgICAgY29uc3QgZW5kTWludXRlID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkubWludXRlcztcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlcy5zdGFydFRpbWVzO1xuICAgICAgY29uc3Qgc3RhcnRIb3VyID0gc3RhcnRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICAgICAgY29uc3Qgc3RhcnRNaW51dGUgPSBzdGFydFRpbWVzLmZpbmQoXG4gICAgICAgIChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50XG4gICAgICApLm1pbnV0ZXM7XG5cbiAgICAgIGNvbnN0IGFsbEV2ZW50cyA9IGF3YWl0IGxpc3RFdmVudHNGb3JEYXRlKFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGRheWpzKGRheURhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmhvdXIoc3RhcnRIb3VyKVxuICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGUpXG4gICAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgICBkYXlqcyhkYXlEYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKGVuZEhvdXIpXG4gICAgICAgICAgLm1pbnV0ZShlbmRNaW51dGUpXG4gICAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgICBob3N0VGltZXpvbmVcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdCcmVha0V2ZW50c0FkanVzdGVkID0gYXdhaXQgYWRqdXN0U3RhcnREYXRlc0ZvckJyZWFrRXZlbnRzRm9yRGF5KFxuICAgICAgICBhbGxFdmVudHMsXG4gICAgICAgIG5ld0JyZWFrRXZlbnRzLFxuICAgICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgIGhvc3RUaW1lem9uZVxuICAgICAgKTtcbiAgICAgIGlmIChuZXdCcmVha0V2ZW50c0FkanVzdGVkPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG5ld0JyZWFrRXZlbnRzQWRqdXN0ZWQuZm9yRWFjaCgoYikgPT5cbiAgICAgICAgICBjb25zb2xlLmxvZyhiLCAnIG5ld0JyZWFrRXZlbnRzQWRqdXN0ZWQnKVxuICAgICAgICApO1xuICAgICAgICB0b3RhbEJyZWFrRXZlbnRzLnB1c2goLi4ubmV3QnJlYWtFdmVudHNBZGp1c3RlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvdGFsQnJlYWtFdmVudHM7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBnZW5lcmF0ZUJyZWFrRXZlbnRzRm9yRGF0ZScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVXb3JrVGltZXNGb3JJbnRlcm5hbEF0dGVuZGVlID0gKFxuICBob3N0SWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHVzZXJQcmVmZXJlbmNlOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICB1c2VyVGltZXpvbmU6IHN0cmluZ1xuKTogV29ya1RpbWVUeXBlW10gPT4ge1xuICBjb25zdCBkYXlzSW5XZWVrID0gNztcbiAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlLnN0YXJ0VGltZXM7XG4gIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2UuZW5kVGltZXM7XG4gIGNvbnN0IHdvcmtUaW1lczogV29ya1RpbWVUeXBlW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGRheXNJbldlZWs7IGkrKykge1xuICAgIGNvbnN0IGRheU9mV2Vla0ludCA9IGkgKyAxO1xuICAgIGNvbnN0IHN0YXJ0SG91ciA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgICBjb25zdCBzdGFydE1pbnV0ZSA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkubWludXRlcztcbiAgICBjb25zdCBlbmRIb3VyID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgICBjb25zdCBlbmRNaW51dGUgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuXG4gICAgd29ya1RpbWVzLnB1c2goe1xuICAgICAgZGF5T2ZXZWVrOiBkYXlPZldlZWtJbnRUb1N0cmluZ1tkYXlPZldlZWtJbnRdLFxuICAgICAgc3RhcnRUaW1lOiBkYXlqcyhcbiAgICAgICAgc2V0SVNPRGF5KFxuICAgICAgICAgIGRheWpzKClcbiAgICAgICAgICAgIC5ob3VyKHN0YXJ0SG91cilcbiAgICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGUpXG4gICAgICAgICAgICAudHoodXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnRvRGF0ZSgpLFxuICAgICAgICAgIGkgKyAxXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgZW5kVGltZTogZGF5anMoXG4gICAgICAgIHNldElTT0RheShcbiAgICAgICAgICBkYXlqcygpXG4gICAgICAgICAgICAuaG91cihlbmRIb3VyKVxuICAgICAgICAgICAgLm1pbnV0ZShlbmRNaW51dGUpXG4gICAgICAgICAgICAudHoodXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnRvRGF0ZSgpLFxuICAgICAgICAgIGkgKyAxXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgaG9zdElkLFxuICAgICAgdXNlcklkLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHdvcmtUaW1lcztcbn07XG5cbmNvbnN0IGZvcm1hdFRvTW9udGhEYXkgPSAobW9udGg6IE1vbnRoVHlwZSwgZGF5OiBEYXlUeXBlKTogTW9udGhEYXlUeXBlID0+IHtcbiAgY29uc3QgbW9udGhGb3JtYXQgPSAobW9udGggPCA5ID8gYDAke21vbnRoICsgMX1gIDogYCR7bW9udGggKyAxfWApIGFzIE1NO1xuICBjb25zdCBkYXlGb3JtYXQgPSAoZGF5IDwgMTAgPyBgMCR7ZGF5fWAgOiBgJHtkYXl9YCkgYXMgREQ7XG4gIHJldHVybiBgLS0ke21vbnRoRm9ybWF0fS0ke2RheUZvcm1hdH1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlVGltZVNsb3RzRm9ySW50ZXJuYWxBdHRlbmRlZSA9IChcbiAgaG9zdFN0YXJ0RGF0ZTogc3RyaW5nLFxuICBob3N0SWQ6IHN0cmluZyxcbiAgdXNlclByZWZlcmVuY2U6IFVzZXJQcmVmZXJlbmNlVHlwZSxcbiAgaG9zdFRpbWV6b25lOiBzdHJpbmcsXG4gIHVzZXJUaW1lem9uZTogc3RyaW5nLFxuICBpc0ZpcnN0RGF5PzogYm9vbGVhblxuKTogVGltZVNsb3RUeXBlW10gPT4ge1xuICBpZiAoaXNGaXJzdERheSkge1xuICAgIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2UuZW5kVGltZXM7XG4gICAgY29uc3QgZGF5T2ZXZWVrSW50ID0gZ2V0SVNPRGF5KFxuICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgIC50b0RhdGUoKVxuICAgICk7XG4gICAgY29uc3QgZGF5T2ZXZWVrSW50QnlIb3N0ID0gZ2V0SVNPRGF5KFxuICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSkudG9EYXRlKClcbiAgICApO1xuICAgIGNvbnN0IGRheU9mTW9udGggPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgLmRhdGUoKTtcbiAgICBjb25zdCBzdGFydEhvdXIgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBzdGFydE1pbnV0ZSA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgICAgLm1pbnV0ZSgwKSxcbiAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgICAnbWludXRlJyxcbiAgICAgICAgJ1spJ1xuICAgICAgKVxuICAgICAgPyAwXG4gICAgICA6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSgxNSksXG4gICAgICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAxNVxuICAgICAgICA6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgICAgICAgICAgICAgLm1pbnV0ZSg0NSksXG4gICAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgPyAzMFxuICAgICAgICAgIDogNDU7XG5cbiAgICBjb25zdCBtb250aEJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5tb250aCgpO1xuICAgIGNvbnN0IGRheU9mTW9udGhCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuZGF0ZSgpO1xuICAgIGNvbnN0IHN0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5ob3VyKCk7XG4gICAgY29uc3Qgc3RhcnRNaW51dGVCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS5taW51dGUoMCksXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLm1pbnV0ZSgxNSksXG4gICAgICAgICdtaW51dGUnLFxuICAgICAgICAnWyknXG4gICAgICApXG4gICAgICA/IDBcbiAgICAgIDogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAxNVxuICAgICAgICA6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC5taW51dGUoNDUpLFxuICAgICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgID8gMzBcbiAgICAgICAgICA6IDQ1O1xuXG4gICAgY29uc3QgZW5kSG91ciA9IGVuZFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLmhvdXI7XG4gICAgY29uc3QgZW5kTWludXRlID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkubWludXRlcztcbiAgICBjb25zdCBlbmRIb3VyQnlIb3N0ID0gZGF5anMoXG4gICAgICBzZXRJU09EYXkoXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAgICAgICAuaG91cihlbmRIb3VyKVxuICAgICAgICAgIC50b0RhdGUoKSxcbiAgICAgICAgZGF5T2ZXZWVrSW50XG4gICAgICApXG4gICAgKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5ob3VyKCk7XG4gICAgY29uc3QgZW5kTWludXRlQnlIb3N0ID0gZGF5anMoXG4gICAgICBzZXRJU09EYXkoXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKGVuZE1pbnV0ZSlcbiAgICAgICAgICAudG9EYXRlKCksXG4gICAgICAgIGRheU9mV2Vla0ludFxuICAgICAgKVxuICAgIClcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAubWludXRlKCk7XG4gICAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlLnN0YXJ0VGltZXM7XG4gICAgY29uc3Qgd29ya1N0YXJ0SG91ciA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgICBjb25zdCB3b3JrU3RhcnRNaW51dGUgPSBzdGFydFRpbWVzLmZpbmQoXG4gICAgICAoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludFxuICAgICkubWludXRlcztcbiAgICBjb25zdCB3b3JrU3RhcnRIb3VyQnlIb3N0ID0gZGF5anMoXG4gICAgICBzZXRJU09EYXkoXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAgICAgICAuaG91cih3b3JrU3RhcnRIb3VyKVxuICAgICAgICAgIC50b0RhdGUoKSxcbiAgICAgICAgZGF5T2ZXZWVrSW50XG4gICAgICApXG4gICAgKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5ob3VyKCk7XG4gICAgY29uc3Qgd29ya1N0YXJ0TWludXRlQnlIb3N0ID0gZGF5anMoXG4gICAgICBzZXRJU09EYXkoXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKGVuZE1pbnV0ZSlcbiAgICAgICAgICAudG9EYXRlKCksXG4gICAgICAgIGRheU9mV2Vla0ludFxuICAgICAgKVxuICAgIClcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAubWludXRlKCk7XG5cbiAgICBpZiAoXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmlzQWZ0ZXIoXG4gICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmhvdXIoZW5kSG91ckJ5SG9zdClcbiAgICAgICAgICAgIC5taW51dGUoZW5kTWludXRlQnlIb3N0KVxuICAgICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5pc0JlZm9yZShcbiAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cih3b3JrU3RhcnRIb3VyQnlIb3N0KVxuICAgICAgICAgICAgLm1pbnV0ZSh3b3JrU3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIClcbiAgICApIHtcbiAgICAgIGNvbnN0IHN0YXJ0RHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgICAgIGhvdXJzOiB3b3JrU3RhcnRIb3VyLFxuICAgICAgICBtaW51dGVzOiB3b3JrU3RhcnRNaW51dGUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGVuZER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgICBob3VyczogZW5kSG91cixcbiAgICAgICAgbWludXRlczogZW5kTWludXRlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gZW5kRHVyYXRpb24uc3VidHJhY3Qoc3RhcnREdXJhdGlvbik7XG4gICAgICBjb25zdCB0b3RhbE1pbnV0ZXMgPSB0b3RhbER1cmF0aW9uLmFzTWludXRlcygpO1xuICAgICAgY29uc3QgdGltZVNsb3RzOiBUaW1lU2xvdFR5cGVbXSA9IFtdO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGhvc3RTdGFydERhdGUsXG4gICAgICAgIGVuZFRpbWVzLFxuICAgICAgICBkYXlPZldlZWtJbnRCeUhvc3QsXG4gICAgICAgIGRheU9mTW9udGgsXG4gICAgICAgIHN0YXJ0SG91cixcbiAgICAgICAgc3RhcnRNaW51dGUsXG4gICAgICAgIGVuZEhvdXIsXG4gICAgICAgIGVuZE1pbnV0ZSxcbiAgICAgICAgdGltZXpvbmUsXG4gICAgICAgIGBzdGFydERhdGUsIGVuZFRpbWVzLCBkYXlPZldlZWtJbnRCeUhvc3QsIGRheU9mTW9udGgsIHN0YXJ0SG91ciwgc3RhcnRNaW51dGUsIGVuZEhvdXIsIGVuZE1pbnV0ZSB0b3RhbE1pbnV0ZXMsIHRpbWV6b25lLCBpbnNpZGUgZmlyc3REYXkgaW5zaWRlIGdlbmVyYXRlVGltZXNsb3RzYFxuICAgICAgKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxNaW51dGVzOyBpICs9IDE1KSB7XG4gICAgICAgIHRpbWVTbG90cy5wdXNoKHtcbiAgICAgICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludEJ5SG9zdF0sXG4gICAgICAgICAgc3RhcnRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgICAgLmFkZChpLCAnbWludXRlJylcbiAgICAgICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgICAgICBlbmRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgICAgLmFkZChpICsgMTUsICdtaW51dGUnKVxuICAgICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICAgIGhvc3RJZCxcbiAgICAgICAgICBtb250aERheTogZm9ybWF0VG9Nb250aERheShcbiAgICAgICAgICAgIG1vbnRoQnlIb3N0IGFzIE1vbnRoVHlwZSxcbiAgICAgICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgICAgICksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIHRpbWVTbG90cyxcbiAgICAgICAgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzIGZvciBmaXJzdCBkYXkgd2hlcmUgc3RhcnREYXRlIGlzIGJlZm9yZSB3b3JrIHN0YXJ0IHRpbWUnXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRpbWVTbG90cztcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgaG91cnM6IHN0YXJ0SG91cixcbiAgICAgIG1pbnV0ZXM6IHN0YXJ0TWludXRlLFxuICAgIH0pO1xuICAgIGNvbnN0IGVuZER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oeyBob3VyczogZW5kSG91ciwgbWludXRlczogZW5kTWludXRlIH0pO1xuICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBlbmREdXJhdGlvbi5zdWJ0cmFjdChzdGFydER1cmF0aW9uKTtcbiAgICBjb25zdCB0b3RhbE1pbnV0ZXMgPSB0b3RhbER1cmF0aW9uLmFzTWludXRlcygpO1xuICAgIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGhvc3RTdGFydERhdGUsXG4gICAgICBlbmRUaW1lcyxcbiAgICAgIGRheU9mV2Vla0ludCxcbiAgICAgIGRheU9mTW9udGhCeUhvc3QsXG4gICAgICBzdGFydEhvdXJCeUhvc3QsXG4gICAgICBzdGFydE1pbnV0ZUJ5SG9zdCxcbiAgICAgIGVuZEhvdXJCeUhvc3QsXG4gICAgICBlbmRNaW51dGVCeUhvc3QsXG4gICAgICBob3N0VGltZXpvbmUsXG4gICAgICBgc3RhcnREYXRlLCBlbmRUaW1lcywgZGF5T2ZXZWVrSW50LCBkYXlPZk1vbnRoLCBzdGFydEhvdXIsIHN0YXJ0TWludXRlLCBlbmRIb3VyLCBlbmRNaW51dGUgdG90YWxNaW51dGVzLCB0aW1lem9uZSwgaW5zaWRlIGZpcnN0RGF5IGluc2lkZSBnZW5lcmF0ZVRpbWVzbG90c2BcbiAgICApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxNaW51dGVzOyBpICs9IDE1KSB7XG4gICAgICB0aW1lU2xvdHMucHVzaCh7XG4gICAgICAgIGRheU9mV2VlazogZGF5T2ZXZWVrSW50VG9TdHJpbmdbZGF5T2ZXZWVrSW50XSxcbiAgICAgICAgc3RhcnRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ckJ5SG9zdClcbiAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgIC5hZGQoaSwgJ21pbnV0ZScpXG4gICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICBlbmRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ckJ5SG9zdClcbiAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgIC5hZGQoaSArIDE1LCAnbWludXRlJylcbiAgICAgICAgICAuZm9ybWF0KCdISDptbScpIGFzIFRpbWUsXG4gICAgICAgIGhvc3RJZCxcbiAgICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgICAgbW9udGhCeUhvc3QgYXMgTW9udGhUeXBlLFxuICAgICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHRpbWVTbG90cywgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzIGZvciBmaXJzdCBkYXknKTtcbiAgICByZXR1cm4gdGltZVNsb3RzO1xuICB9XG5cbiAgY29uc3Qgc3RhcnRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlLnN0YXJ0VGltZXM7XG4gIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2UuZW5kVGltZXM7XG4gIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgLnRvRGF0ZSgpXG4gICk7XG4gIGNvbnN0IHN0YXJ0SG91ciA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgY29uc3Qgc3RhcnRNaW51dGUgPSBzdGFydFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLm1pbnV0ZXM7XG4gIGNvbnN0IGVuZEhvdXIgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICBjb25zdCBlbmRNaW51dGUgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuXG4gIGNvbnN0IG1vbnRoQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAubW9udGgoKTtcbiAgY29uc3QgZGF5T2ZNb250aEJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLmRhdGUoKTtcblxuICBjb25zdCBzdGFydEhvdXJCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgLmhvdXIoc3RhcnRIb3VyKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLmhvdXIoKTtcbiAgY29uc3Qgc3RhcnRNaW51dGVCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgLm1pbnV0ZShzdGFydE1pbnV0ZSlcbiAgICAudHooaG9zdFRpbWV6b25lKVxuICAgIC5taW51dGUoKTtcbiAgY29uc3QgZW5kSG91ckJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAuaG91cihlbmRIb3VyKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLmhvdXIoKTtcblxuICBjb25zb2xlLmxvZyhcbiAgICBtb250aEJ5SG9zdCxcbiAgICBkYXlPZk1vbnRoQnlIb3N0LFxuICAgIHN0YXJ0SG91ckJ5SG9zdCxcbiAgICBzdGFydE1pbnV0ZUJ5SG9zdCxcbiAgICBlbmRIb3VyQnlIb3N0LFxuICAgICcgbW9udGhCeUhvc3QsIGRheU9mTW9udGhCeUhvc3QsIHN0YXJ0SG91ckJ5SG9zdCwgc3RhcnRNaW51dGVCeUhvc3QsIGVuZEhvdXJCeUhvc3QnXG4gICk7XG4gIGNvbnN0IHN0YXJ0RHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgaG91cnM6IHN0YXJ0SG91cixcbiAgICBtaW51dGVzOiBzdGFydE1pbnV0ZSxcbiAgfSk7XG4gIGNvbnN0IGVuZER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oeyBob3VyczogZW5kSG91ciwgbWludXRlczogZW5kTWludXRlIH0pO1xuICBjb25zdCB0b3RhbER1cmF0aW9uID0gZW5kRHVyYXRpb24uc3VidHJhY3Qoc3RhcnREdXJhdGlvbik7XG4gIGNvbnN0IHRvdGFsTWludXRlcyA9IHRvdGFsRHVyYXRpb24uYXNNaW51dGVzKCk7XG4gIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbE1pbnV0ZXM7IGkgKz0gMTUpIHtcbiAgICB0aW1lU2xvdHMucHVzaCh7XG4gICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludF0sXG4gICAgICBzdGFydFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIC5hZGQoaSwgJ21pbnV0ZScpXG4gICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgIGVuZFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIC5hZGQoaSArIDE1LCAnbWludXRlJylcbiAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgaG9zdElkLFxuICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgIG1vbnRoQnlIb3N0IGFzIE1vbnRoVHlwZSxcbiAgICAgICAgZGF5T2ZNb250aEJ5SG9zdCBhcyBEYXlUeXBlXG4gICAgICApLFxuICAgIH0pO1xuICB9XG4gIGNvbnNvbGUubG9nKHRpbWVTbG90cywgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzJyk7XG4gIHJldHVybiB0aW1lU2xvdHM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUaW1lU2xvdHNMaXRlRm9ySW50ZXJuYWxBdHRlbmRlZSA9IChcbiAgaG9zdFN0YXJ0RGF0ZTogc3RyaW5nLFxuICBob3N0SWQ6IHN0cmluZyxcbiAgdXNlclByZWZlcmVuY2U6IFVzZXJQcmVmZXJlbmNlVHlwZSxcbiAgaG9zdFRpbWV6b25lOiBzdHJpbmcsXG4gIHVzZXJUaW1lem9uZTogc3RyaW5nLFxuICBpc0ZpcnN0RGF5PzogYm9vbGVhblxuKTogVGltZVNsb3RUeXBlW10gPT4ge1xuICBpZiAoaXNGaXJzdERheSkge1xuICAgIGNvbnN0IGVuZFRpbWVzID0gdXNlclByZWZlcmVuY2UuZW5kVGltZXM7XG5cbiAgICBjb25zdCBkYXlPZldlZWtJbnQgPSBnZXRJU09EYXkoXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICAgICk7XG5cbiAgICBjb25zdCBzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS5taW51dGUoMCksXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLm1pbnV0ZSgzMCksXG4gICAgICAgICdtaW51dGUnLFxuICAgICAgICAnWyknXG4gICAgICApXG4gICAgICA/IDBcbiAgICAgIDogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDU5KSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAzMFxuICAgICAgICA6IDA7XG5cbiAgICBjb25zdCBtb250aEJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5tb250aCgpO1xuICAgIGNvbnN0IGRheU9mTW9udGhCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuZGF0ZSgpO1xuICAgIGNvbnN0IHN0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5ob3VyKCk7XG4gICAgY29uc3Qgc3RhcnRNaW51dGVCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS5taW51dGUoMCksXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLm1pbnV0ZSgzMCksXG4gICAgICAgICdtaW51dGUnLFxuICAgICAgICAnWyknXG4gICAgICApXG4gICAgICA/IDBcbiAgICAgIDogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDU5KSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAzMFxuICAgICAgICA6IDA7XG5cbiAgICBjb25zdCBlbmRIb3VyID0gZW5kVGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgICBjb25zdCBlbmRNaW51dGUgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuICAgIGNvbnN0IGVuZEhvdXJCeUhvc3QgPSBkYXlqcyhcbiAgICAgIHNldElTT0RheShcbiAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgICAgIC5ob3VyKGVuZEhvdXIpXG4gICAgICAgICAgLnRvRGF0ZSgpLFxuICAgICAgICBkYXlPZldlZWtJbnRcbiAgICAgIClcbiAgICApXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBlbmRNaW51dGVCeUhvc3QgPSBkYXlqcyhcbiAgICAgIHNldElTT0RheShcbiAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgICAgIC5taW51dGUoZW5kTWludXRlKVxuICAgICAgICAgIC50b0RhdGUoKSxcbiAgICAgICAgZGF5T2ZXZWVrSW50XG4gICAgICApXG4gICAgKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5taW51dGUoKTtcblxuICAgIGNvbnN0IHN0YXJ0VGltZXMgPSB1c2VyUHJlZmVyZW5jZS5zdGFydFRpbWVzO1xuICAgIGNvbnN0IHdvcmtTdGFydEhvdXIgPSBzdGFydFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLmhvdXI7XG4gICAgY29uc3Qgd29ya1N0YXJ0TWludXRlID0gc3RhcnRUaW1lcy5maW5kKFxuICAgICAgKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnRcbiAgICApLm1pbnV0ZXM7XG4gICAgY29uc3Qgd29ya1N0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKFxuICAgICAgc2V0SVNPRGF5KFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgICAgLmhvdXIod29ya1N0YXJ0SG91cilcbiAgICAgICAgICAudG9EYXRlKCksXG4gICAgICAgIGRheU9mV2Vla0ludFxuICAgICAgKVxuICAgIClcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuaG91cigpO1xuICAgIGNvbnN0IHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCA9IGRheWpzKFxuICAgICAgc2V0SVNPRGF5KFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eih1c2VyVGltZXpvbmUpXG4gICAgICAgICAgLm1pbnV0ZShlbmRNaW51dGUpXG4gICAgICAgICAgLnRvRGF0ZSgpLFxuICAgICAgICBkYXlPZldlZWtJbnRcbiAgICAgIClcbiAgICApXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLm1pbnV0ZSgpO1xuXG4gICAgaWYgKFxuICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5pc0FmdGVyKFxuICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5ob3VyKGVuZEhvdXJCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKGVuZE1pbnV0ZUJ5SG9zdClcbiAgICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaXNCZWZvcmUoXG4gICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmhvdXIod29ya1N0YXJ0SG91ckJ5SG9zdClcbiAgICAgICAgICAgIC5taW51dGUod29ya1N0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICApXG4gICAgKSB7XG4gICAgICBjb25zdCBzdGFydER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgICBob3Vyczogd29ya1N0YXJ0SG91cixcbiAgICAgICAgbWludXRlczogd29ya1N0YXJ0TWludXRlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbmREdXJhdGlvbiA9IGRheWpzLmR1cmF0aW9uKHtcbiAgICAgICAgaG91cnM6IGVuZEhvdXIsXG4gICAgICAgIG1pbnV0ZXM6IGVuZE1pbnV0ZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IGVuZER1cmF0aW9uLnN1YnRyYWN0KHN0YXJ0RHVyYXRpb24pO1xuICAgICAgY29uc3QgdG90YWxNaW51dGVzID0gdG90YWxEdXJhdGlvbi5hc01pbnV0ZXMoKTtcbiAgICAgIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxNaW51dGVzOyBpICs9IDMwKSB7XG4gICAgICAgIHRpbWVTbG90cy5wdXNoKHtcbiAgICAgICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludF0sXG4gICAgICAgICAgc3RhcnRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgICAgLmFkZChpLCAnbWludXRlJylcbiAgICAgICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgICAgICBlbmRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgICAgLmFkZChpICsgMzAsICdtaW51dGUnKVxuICAgICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICAgIGhvc3RJZCxcbiAgICAgICAgICBtb250aERheTogZm9ybWF0VG9Nb250aERheShcbiAgICAgICAgICAgIG1vbnRoQnlIb3N0IGFzIE1vbnRoVHlwZSxcbiAgICAgICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgICAgICksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIHRpbWVTbG90cyxcbiAgICAgICAgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzIGZvciBmaXJzdCBkYXkgYmVmb3JlIHN0YXJ0IHRpbWUnXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRpbWVTbG90cztcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgaG91cnM6IHN0YXJ0SG91ck9mSG9zdERhdGVCeUhvc3QsXG4gICAgICBtaW51dGVzOiBzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QsXG4gICAgfSk7XG4gICAgY29uc3QgZW5kRHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7IGhvdXJzOiBlbmRIb3VyLCBtaW51dGVzOiBlbmRNaW51dGUgfSk7XG4gICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IGVuZER1cmF0aW9uLnN1YnRyYWN0KHN0YXJ0RHVyYXRpb24pO1xuICAgIGNvbnN0IHRvdGFsTWludXRlcyA9IHRvdGFsRHVyYXRpb24uYXNNaW51dGVzKCk7XG4gICAgY29uc3QgdGltZVNsb3RzOiBUaW1lU2xvdFR5cGVbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxNaW51dGVzOyBpICs9IDMwKSB7XG4gICAgICB0aW1lU2xvdHMucHVzaCh7XG4gICAgICAgIGRheU9mV2VlazogZGF5T2ZXZWVrSW50VG9TdHJpbmdbZGF5T2ZXZWVrSW50XSxcbiAgICAgICAgc3RhcnRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ckJ5SG9zdClcbiAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgIC5hZGQoaSwgJ21pbnV0ZScpXG4gICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICBlbmRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ckJ5SG9zdClcbiAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAgIC5hZGQoaSArIDMwLCAnbWludXRlJylcbiAgICAgICAgICAuZm9ybWF0KCdISDptbScpIGFzIFRpbWUsXG4gICAgICAgIGhvc3RJZCxcbiAgICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgICAgbW9udGhCeUhvc3QgYXMgTW9udGhUeXBlLFxuICAgICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHRpbWVTbG90cywgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzIGZvciBmaXJzdCBkYXknKTtcbiAgICByZXR1cm4gdGltZVNsb3RzO1xuICB9XG4gIGNvbnN0IHN0YXJ0VGltZXMgPSB1c2VyUHJlZmVyZW5jZS5zdGFydFRpbWVzO1xuICBjb25zdCBlbmRUaW1lcyA9IHVzZXJQcmVmZXJlbmNlLmVuZFRpbWVzO1xuXG4gIGNvbnN0IGRheU9mV2Vla0ludCA9IGdldElTT0RheShcbiAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAudHoodXNlclRpbWV6b25lKVxuICAgICAgLnRvRGF0ZSgpXG4gICk7XG4gIGNvbnN0IHN0YXJ0SG91ciA9IHN0YXJ0VGltZXMuZmluZCgoaSkgPT4gaS5kYXkgPT09IGRheU9mV2Vla0ludCkuaG91cjtcbiAgY29uc3Qgc3RhcnRNaW51dGUgPSBzdGFydFRpbWVzLmZpbmQoKGkpID0+IGkuZGF5ID09PSBkYXlPZldlZWtJbnQpLm1pbnV0ZXM7XG4gIGNvbnN0IGVuZEhvdXIgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5ob3VyO1xuICBjb25zdCBlbmRNaW51dGUgPSBlbmRUaW1lcy5maW5kKChpKSA9PiBpLmRheSA9PT0gZGF5T2ZXZWVrSW50KS5taW51dGVzO1xuXG4gIGNvbnN0IG1vbnRoQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAubW9udGgoKTtcbiAgY29uc3QgZGF5T2ZNb250aEJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLmRhdGUoKTtcbiAgY29uc3QgZGF5T2ZXZWVrSW50QnlIb3N0ID0gZ2V0SVNPRGF5KFxuICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLnRvRGF0ZSgpXG4gICk7XG4gIGNvbnN0IHN0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAuaG91cihzdGFydEhvdXIpXG4gICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAuaG91cigpO1xuICBjb25zdCBzdGFydE1pbnV0ZUJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLnR6KHVzZXJUaW1lem9uZSlcbiAgICAubWludXRlKHN0YXJ0TWludXRlKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLm1pbnV0ZSgpO1xuXG4gIGNvbnN0IHN0YXJ0RHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgaG91cnM6IHN0YXJ0SG91cixcbiAgICBtaW51dGVzOiBzdGFydE1pbnV0ZSxcbiAgfSk7XG4gIGNvbnN0IGVuZER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oeyBob3VyczogZW5kSG91ciwgbWludXRlczogZW5kTWludXRlIH0pO1xuICBjb25zdCB0b3RhbER1cmF0aW9uID0gZW5kRHVyYXRpb24uc3VidHJhY3Qoc3RhcnREdXJhdGlvbik7XG4gIGNvbnN0IHRvdGFsTWludXRlcyA9IHRvdGFsRHVyYXRpb24uYXNNaW51dGVzKCk7XG4gIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbE1pbnV0ZXM7IGkgKz0gMzApIHtcbiAgICB0aW1lU2xvdHMucHVzaCh7XG4gICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludEJ5SG9zdF0sXG4gICAgICBzdGFydFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIC5hZGQoaSwgJ21pbnV0ZScpXG4gICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgIGVuZFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaG91cihzdGFydEhvdXJCeUhvc3QpXG4gICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIC5hZGQoaSArIDMwLCAnbWludXRlJylcbiAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgaG9zdElkLFxuICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgIG1vbnRoQnlIb3N0IGFzIE1vbnRoVHlwZSxcbiAgICAgICAgZGF5T2ZNb250aEJ5SG9zdCBhcyBEYXlUeXBlXG4gICAgICApLFxuICAgIH0pO1xuICB9XG4gIGNvbnNvbGUubG9nKHRpbWVTbG90cywgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzJyk7XG4gIHJldHVybiB0aW1lU2xvdHM7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVFdmVudERhdGVzID0gKFxuICBldmVudDogRXZlbnRQbHVzVHlwZSxcbiAgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZVR5cGVcbik6IGJvb2xlYW4gPT4ge1xuICBpZiAoIWV2ZW50Py50aW1lem9uZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGRpZmYgPSBkYXlqcyhldmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHooZXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgLmRpZmYoZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooZXZlbnQudGltZXpvbmUsIHRydWUpLCAnbScpO1xuICBjb25zdCBkaWZmRGF5ID0gZGF5anMoZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgIC5kaWZmKGRheWpzKGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKSwgJ2QnKTtcbiAgY29uc3QgZGlmZkhvdXJzID0gZGF5anMoZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgIC5kaWZmKGRheWpzKGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKSwgJ2gnKTtcblxuICBjb25zdCBpc29XZWVrRGF5ID0gZ2V0SVNPRGF5KFxuICAgIGRheWpzKGV2ZW50Py5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihldmVudD8udGltZXpvbmUsIHRydWUpLnRvRGF0ZSgpXG4gICk7XG4gIGNvbnN0IGVuZEhvdXIgPSB1c2VyUHJlZmVyZW5jZXMuZW5kVGltZXMuZmluZChcbiAgICAoZSkgPT4gZT8uZGF5ID09PSBpc29XZWVrRGF5XG4gICk/LmhvdXI7XG4gIGNvbnN0IGVuZE1pbnV0ZXMgPSB1c2VyUHJlZmVyZW5jZXMuZW5kVGltZXMuZmluZChcbiAgICAoZSkgPT4gZT8uZGF5ID09PSBpc29XZWVrRGF5XG4gICk/Lm1pbnV0ZXM7XG4gIGNvbnN0IHN0YXJ0SG91ciA9IHVzZXJQcmVmZXJlbmNlcy5zdGFydFRpbWVzLmZpbmQoXG4gICAgKGUpID0+IGU/LmRheSA9PT0gaXNvV2Vla0RheVxuICApPy5ob3VyO1xuICBjb25zdCBzdGFydE1pbnV0ZXMgPSB1c2VyUHJlZmVyZW5jZXMuc3RhcnRUaW1lcy5maW5kKFxuICAgIChlKSA9PiBlPy5kYXkgPT09IGlzb1dlZWtEYXlcbiAgKT8ubWludXRlcztcblxuICBpZiAoXG4gICAgZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5pc0FmdGVyKFxuICAgICAgICBkYXlqcyhldmVudD8uc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooZXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmhvdXIoZW5kSG91cilcbiAgICAgICAgICAubWludXRlKGVuZE1pbnV0ZXMpXG4gICAgICApXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChcbiAgICBkYXlqcyhldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLmlzQmVmb3JlKFxuICAgICAgICBkYXlqcyhldmVudD8uc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooZXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmhvdXIoc3RhcnRIb3VyKVxuICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVzKVxuICAgICAgKVxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZGlmZiA9PT0gMCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZXZlbnQuaWQsXG4gICAgICBldmVudC5zdGFydERhdGUsXG4gICAgICBldmVudC5lbmREYXRlLFxuICAgICAgJyB0aGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgYXJlIHRoZSBzYW1lJ1xuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGRpZmYgPCAwKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBldmVudC5pZCxcbiAgICAgIGV2ZW50LnN0YXJ0RGF0ZSxcbiAgICAgIGV2ZW50LmVuZERhdGUsXG4gICAgICAnIHRoZSBzdGFydCBkYXRlIGlzIGFmdGVyIGVuZCBkYXRlJ1xuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGRpZmZEYXkgPj0gMSkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZXZlbnQuaWQsXG4gICAgICBldmVudC5zdGFydERhdGUsXG4gICAgICBldmVudC5lbmREYXRlLFxuICAgICAgJyB0aGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgYXJlIG1vcmUgdGhhbiAxIGRheSBhcGFydCdcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChkaWZmSG91cnMgPiAyMykge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZXZlbnQuaWQsXG4gICAgICBldmVudC5zdGFydERhdGUsXG4gICAgICBldmVudC5lbmREYXRlLFxuICAgICAgJyB0aGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgYXJlIG1vcmUgdGhhbiAyMyBob3VycyBhcGFydCdcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlRXZlbnREYXRlc0ZvckV4dGVybmFsQXR0ZW5kZWUgPSAoXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlXG4pOiBib29sZWFuID0+IHtcbiAgaWYgKCFldmVudD8udGltZXpvbmUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBkaWZmID0gZGF5anMoZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgIC5kaWZmKGRheWpzKGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKSwgJ20nKTtcbiAgY29uc3QgZGlmZkRheSA9IGRheWpzKGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAuZGlmZihkYXlqcyhldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihldmVudC50aW1lem9uZSwgdHJ1ZSksICdkJyk7XG4gIGNvbnN0IGRpZmZIb3VycyA9IGRheWpzKGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAuZGlmZihkYXlqcyhldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihldmVudC50aW1lem9uZSwgdHJ1ZSksICdoJyk7XG5cbiAgaWYgKGRpZmYgPT09IDApIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGV2ZW50LmlkLFxuICAgICAgZXZlbnQuc3RhcnREYXRlLFxuICAgICAgZXZlbnQuZW5kRGF0ZSxcbiAgICAgICcgdGhlIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlIGFyZSB0aGUgc2FtZSdcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChkaWZmIDwgMCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZXZlbnQuaWQsXG4gICAgICBldmVudC5zdGFydERhdGUsXG4gICAgICBldmVudC5lbmREYXRlLFxuICAgICAgJyB0aGUgc3RhcnQgZGF0ZSBpcyBhZnRlciBlbmQgZGF0ZSdcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChkaWZmRGF5ID49IDEpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGV2ZW50LmlkLFxuICAgICAgZXZlbnQuc3RhcnREYXRlLFxuICAgICAgZXZlbnQuZW5kRGF0ZSxcbiAgICAgICcgdGhlIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlIGFyZSBtb3JlIHRoYW4gMSBkYXkgYXBhcnQnXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZGlmZkhvdXJzID4gMjMpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGV2ZW50LmlkLFxuICAgICAgZXZlbnQuc3RhcnREYXRlLFxuICAgICAgZXZlbnQuZW5kRGF0ZSxcbiAgICAgICcgdGhlIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlIGFyZSBtb3JlIHRoYW4gMjMgaG91cnMgYXBhcnQnXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUV2ZW50UGFydHMgPSAoXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBob3N0SWQ6IHN0cmluZ1xuKTogSW5pdGlhbEV2ZW50UGFydFR5cGVbXSA9PiB7XG4gIGNvbnNvbGUubG9nKFxuICAgIGV2ZW50LmlkLFxuICAgIGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSksXG4gICAgZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSksXG4gICAgJyBldmVudC5pZCwgZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSwgZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkgaW5zaWRlIGdlbmVyYXRlRXZlbnRQYXJ0cydcbiAgKTtcbiAgY29uc3QgbWludXRlcyA9IGRheWpzKGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAuZGlmZihkYXlqcyhldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihldmVudC50aW1lem9uZSwgdHJ1ZSksICdtJyk7XG4gIGNvbnNvbGUubG9nKFxuICAgIGV2ZW50LmlkLFxuICAgIG1pbnV0ZXMsXG4gICAgJ2V2ZW50LmlkLCAgbWludXRlcyBpbnNpZGUgZ2VuZXJhdGVFdmVudFBhcnRzJ1xuICApO1xuICBjb25zdCBwYXJ0cyA9IE1hdGguZmxvb3IobWludXRlcyAvIDE1KTtcbiAgY29uc3QgcmVtYWluZGVyID0gbWludXRlcyAlIDE1O1xuICBjb25zdCBldmVudFBhcnRzOiBJbml0aWFsRXZlbnRQYXJ0VHlwZVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHM7IGkrKykge1xuICAgIGV2ZW50UGFydHMucHVzaCh7XG4gICAgICAuLi5ldmVudCxcbiAgICAgIGdyb3VwSWQ6IGV2ZW50LmlkLFxuICAgICAgZXZlbnRJZDogZXZlbnQuaWQsXG4gICAgICBzdGFydERhdGU6IGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSksXG4gICAgICBlbmREYXRlOiBldmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSxcbiAgICAgIHBhcnQ6IGkgKyAxLFxuICAgICAgbGFzdFBhcnQ6IHJlbWFpbmRlciA+IDAgPyBwYXJ0cyArIDEgOiBwYXJ0cyxcbiAgICAgIGhvc3RJZCxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChyZW1haW5kZXIgPiAwKSB7XG4gICAgZXZlbnRQYXJ0cy5wdXNoKHtcbiAgICAgIC4uLmV2ZW50LFxuICAgICAgZ3JvdXBJZDogZXZlbnQuaWQsXG4gICAgICBldmVudElkOiBldmVudC5pZCxcbiAgICAgIHN0YXJ0RGF0ZTogZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSxcbiAgICAgIGVuZERhdGU6IGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpLFxuICAgICAgcGFydDogcGFydHMgKyAxLFxuICAgICAgbGFzdFBhcnQ6IHBhcnRzICsgMSxcbiAgICAgIGhvc3RJZCxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcbiAgICBldmVudC5pZCxcbiAgICBldmVudFBhcnRzPy5bMF0/LnN0YXJ0RGF0ZSxcbiAgICBldmVudFBhcnRzPy5bMF0/LmVuZERhdGUsXG4gICAgZXZlbnRQYXJ0cz8uWzBdPy5wYXJ0LFxuICAgIGV2ZW50UGFydHM/LlswXT8ubGFzdFBhcnQsXG4gICAgJ2V2ZW50LmlkLCAgZXZlbnRQYXJ0cz8uWzBdPy5zdGFydERhdGUsIGV2ZW50UGFydHM/LlswXT8uZW5kRGF0ZSwgZXZlbnRQYXJ0cz8uWzBdPy5wYXJ0LCBldmVudFBhcnRzPy5bMF0/Lmxhc3RQYXJ0LCdcbiAgKTtcbiAgcmV0dXJuIGV2ZW50UGFydHM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVFdmVudFBhcnRzTGl0ZSA9IChcbiAgZXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIGhvc3RJZDogc3RyaW5nXG4pOiBJbml0aWFsRXZlbnRQYXJ0VHlwZVtdID0+IHtcbiAgY29uc3QgbWludXRlcyA9IGRheWpzKGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAuZGlmZihkYXlqcyhldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihldmVudC50aW1lem9uZSwgdHJ1ZSksICdtJyk7XG4gIGNvbnN0IHBhcnRzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gMzApO1xuICBjb25zdCByZW1haW5kZXIgPSBtaW51dGVzICUgMzA7XG4gIGNvbnN0IGV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0czsgaSsrKSB7XG4gICAgZXZlbnRQYXJ0cy5wdXNoKHtcbiAgICAgIC4uLmV2ZW50LFxuICAgICAgZ3JvdXBJZDogZXZlbnQuaWQsXG4gICAgICBldmVudElkOiBldmVudC5pZCxcbiAgICAgIHN0YXJ0RGF0ZTogZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSxcbiAgICAgIGVuZERhdGU6IGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpLFxuICAgICAgcGFydDogaSArIDEsXG4gICAgICBsYXN0UGFydDogcmVtYWluZGVyID4gMCA/IHBhcnRzICsgMSA6IHBhcnRzLFxuICAgICAgaG9zdElkLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHJlbWFpbmRlciA+IDApIHtcbiAgICBldmVudFBhcnRzLnB1c2goe1xuICAgICAgLi4uZXZlbnQsXG4gICAgICBncm91cElkOiBldmVudC5pZCxcbiAgICAgIGV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgc3RhcnREYXRlOiBldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpLFxuICAgICAgZW5kRGF0ZTogZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSksXG4gICAgICBwYXJ0OiBwYXJ0cyArIDEsXG4gICAgICBsYXN0UGFydDogcGFydHMgKyAxLFxuICAgICAgaG9zdElkLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBldmVudFBhcnRzO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vZGlmeUV2ZW50UGFydHNGb3JTaW5ndWxhclByZUJ1ZmZlclRpbWUgPSAoXG4gIGV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW10sXG4gIGZvckV2ZW50SWQ6IHN0cmluZ1xuKTogSW5pdGlhbEV2ZW50UGFydFR5cGVbXSA9PiB7XG4gIGNvbnN0IHByZUJ1ZmZlckJlZm9yZUV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW10gPSBbXTtcbiAgY29uc3QgcHJlQnVmZmVyQWN0dWFsRXZlbnRQYXJ0czogSW5pdGlhbEV2ZW50UGFydFR5cGVbXSA9IFtdO1xuXG4gIGNvbnN0IHByZUJ1ZmZlckdyb3VwSWQgPSB1dWlkKCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudFBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGV2ZW50UGFydHNbaV0uZm9yRXZlbnRJZCA9PT0gZm9yRXZlbnRJZCAmJiBldmVudFBhcnRzW2ldLmlzUHJlRXZlbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBldmVudFBhcnRzW2ldLmZvckV2ZW50SWQsXG4gICAgICAgIGZvckV2ZW50SWQsXG4gICAgICAgICcgZXZlbnRQYXJ0c1tpXS5mb3JFdmVudElkID09PSBmb3JFdmVudElkICBpbnNpZGUgbW9kaWZ5RXZlbnRQYXJ0c0ZvclNpbmd1bGFyUHJlQnVmZmVyVGltZSdcbiAgICAgICk7XG4gICAgICBwcmVCdWZmZXJCZWZvcmVFdmVudFBhcnRzLnB1c2goe1xuICAgICAgICAuLi5ldmVudFBhcnRzW2ldLFxuICAgICAgICBncm91cElkOiBwcmVCdWZmZXJHcm91cElkLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudFBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGV2ZW50UGFydHNbaV0uaWQgPT09IGZvckV2ZW50SWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBldmVudFBhcnRzW2ldLmlkLFxuICAgICAgICBmb3JFdmVudElkLFxuICAgICAgICAnZXZlbnRQYXJ0c1tpXS5pZCA9PT0gZm9yRXZlbnRJZCBpbnNpZGUgbW9kaWZ5RXZlbnRQYXJ0c0ZvclNpbmd1bGFyUHJlQnVmZmVyVGltZSdcbiAgICAgICk7XG4gICAgICBwcmVCdWZmZXJBY3R1YWxFdmVudFBhcnRzLnB1c2goe1xuICAgICAgICAuLi5ldmVudFBhcnRzW2ldLFxuICAgICAgICBncm91cElkOiBwcmVCdWZmZXJHcm91cElkLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcHJlQnVmZmVyQmVmb3JlRXZlbnRQYXJ0c1NvcnRlZCA9IHByZUJ1ZmZlckJlZm9yZUV2ZW50UGFydHMuc29ydChcbiAgICAoYSwgYikgPT4gYS5wYXJ0IC0gYi5wYXJ0XG4gICk7XG4gIGNvbnN0IHByZUJ1ZmZlckFjdHVhbEV2ZW50UGFydHNTb3J0ZWQgPSBwcmVCdWZmZXJBY3R1YWxFdmVudFBhcnRzLnNvcnQoXG4gICAgKGEsIGIpID0+IGEucGFydCAtIGIucGFydFxuICApO1xuXG4gIGNvbnN0IHByZUJ1ZmZlckV2ZW50UGFydHNUb3RhbCA9IHByZUJ1ZmZlckJlZm9yZUV2ZW50UGFydHNTb3J0ZWQuY29uY2F0KFxuICAgIHByZUJ1ZmZlckFjdHVhbEV2ZW50UGFydHNTb3J0ZWRcbiAgKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByZUJ1ZmZlckV2ZW50UGFydHNUb3RhbC5sZW5ndGg7IGkrKykge1xuICAgIHByZUJ1ZmZlckV2ZW50UGFydHNUb3RhbFtpXS5wYXJ0ID0gaSArIDE7XG4gICAgcHJlQnVmZmVyRXZlbnRQYXJ0c1RvdGFsW2ldLmxhc3RQYXJ0ID0gcHJlQnVmZmVyRXZlbnRQYXJ0c1RvdGFsLmxlbmd0aDtcbiAgfVxuICBwcmVCdWZmZXJFdmVudFBhcnRzVG90YWwuZm9yRWFjaCgoZSkgPT5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGUuaWQsXG4gICAgICBlLmdyb3VwSWQsXG4gICAgICBlLmV2ZW50SWQsXG4gICAgICBlLnBhcnQsXG4gICAgICBlLmxhc3RQYXJ0LFxuICAgICAgZS5zdGFydERhdGUsXG4gICAgICBlLmVuZERhdGUsXG4gICAgICBgZS5pZCwgZS5ncm91cElkLCBlLmV2ZW50SWQsIGUucGFydCwgZS5sYXN0UGFydCwgZS5zdGFydERhdGUsIGUuZW5kRGF0ZSwgaW5zaWRlIG1vZGlmeUV2ZW50UGFydHNGb3JTaW5ndWxhclByZUJ1ZmZlclRpbWVgXG4gICAgKVxuICApO1xuICByZXR1cm4gcHJlQnVmZmVyRXZlbnRQYXJ0c1RvdGFsO1xufTtcbmV4cG9ydCBjb25zdCBtb2RpZnlFdmVudFBhcnRzRm9yTXVsdGlwbGVQcmVCdWZmZXJUaW1lID0gKFxuICBldmVudFBhcnRzOiBJbml0aWFsRXZlbnRQYXJ0VHlwZVtdXG4pOiBJbml0aWFsRXZlbnRQYXJ0VHlwZVtdID0+IHtcbiAgY29uc3QgdW5pcXVlUHJlQnVmZmVyUGFydEZvckV2ZW50SWRzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBwcmVCdWZmZXJFdmVudFBhcnRzVG90YWw6IEluaXRpYWxFdmVudFBhcnRUeXBlW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50UGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZXZlbnRQYXJ0c1tpXS5mb3JFdmVudElkICYmIGV2ZW50UGFydHNbaV0uaXNQcmVFdmVudCkge1xuICAgICAgY29uc3QgZm91bmRQYXJ0ID0gdW5pcXVlUHJlQnVmZmVyUGFydEZvckV2ZW50SWRzLmZpbmQoXG4gICAgICAgIChlKSA9PiBlID09PSBldmVudFBhcnRzW2ldLmZvckV2ZW50SWRcbiAgICAgICk7XG4gICAgICBpZiAoZm91bmRQYXJ0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW5pcXVlUHJlQnVmZmVyUGFydEZvckV2ZW50SWRzLnB1c2goZXZlbnRQYXJ0c1tpXS5mb3JFdmVudElkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaXF1ZVByZUJ1ZmZlclBhcnRGb3JFdmVudElkcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJldHVybmVkRXZlbnRQYXJ0VG90YWwgPSBtb2RpZnlFdmVudFBhcnRzRm9yU2luZ3VsYXJQcmVCdWZmZXJUaW1lKFxuICAgICAgZXZlbnRQYXJ0cyxcbiAgICAgIHVuaXF1ZVByZUJ1ZmZlclBhcnRGb3JFdmVudElkc1tpXVxuICAgICk7XG4gICAgcHJlQnVmZmVyRXZlbnRQYXJ0c1RvdGFsLnB1c2goLi4ucmV0dXJuZWRFdmVudFBhcnRUb3RhbCk7XG4gIH1cblxuICBjb25zdCBldmVudFBhcnRzRmlsdGVyZWQgPSBfLmRpZmZlcmVuY2VCeShcbiAgICBldmVudFBhcnRzLFxuICAgIHByZUJ1ZmZlckV2ZW50UGFydHNUb3RhbCxcbiAgICAnaWQnXG4gICk7XG4gIGNvbnN0IGNvbmNhdGVuYXRlZFZhbHVlcyA9IGV2ZW50UGFydHNGaWx0ZXJlZC5jb25jYXQoXG4gICAgcHJlQnVmZmVyRXZlbnRQYXJ0c1RvdGFsXG4gICk7XG4gIGNvbmNhdGVuYXRlZFZhbHVlcy5mb3JFYWNoKChlKSA9PlxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZS5pZCxcbiAgICAgIGUuZ3JvdXBJZCxcbiAgICAgIGUuZXZlbnRJZCxcbiAgICAgIGUucGFydCxcbiAgICAgIGUubGFzdFBhcnQsXG4gICAgICBlLnN0YXJ0RGF0ZSxcbiAgICAgIGUuZW5kRGF0ZSxcbiAgICAgIGU/LmZvckV2ZW50SWQsXG4gICAgICBgZS5pZCwgZS5ldmVudElkLCBlLmFjdHVhbElkLCBlLnBhcnQsIGUubGFzdFBhcnQsIGUuc3RhcnREYXRlLCBlLmVuZERhdGUsIGU/LmZvckV2ZW50SWQsICBpbnNpZGUgbW9kaWZ5RXZlbnRQYXJ0c0Zvck11bHRpcGxlUHJlQnVmZmVyVGltZWBcbiAgICApXG4gICk7XG4gIHJldHVybiBjb25jYXRlbmF0ZWRWYWx1ZXM7XG59O1xuXG5leHBvcnQgY29uc3QgbW9kaWZ5RXZlbnRQYXJ0c0Zvck11bHRpcGxlUG9zdEJ1ZmZlclRpbWUgPSAoXG4gIGV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW11cbik6IEluaXRpYWxFdmVudFBhcnRUeXBlW10gPT4ge1xuICBjb25zdCB1bmlxdWVQb3N0QnVmZmVyUGFydEZvckV2ZW50SWRzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBwb3N0QnVmZmVyRXZlbnRQYXJ0c1RvdGFsOiBJbml0aWFsRXZlbnRQYXJ0VHlwZVtdID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudFBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGV2ZW50UGFydHNbaV0uZm9yRXZlbnRJZCAmJiBldmVudFBhcnRzW2ldLmlzUG9zdEV2ZW50KSB7XG4gICAgICBjb25zdCBmb3VuZFBhcnQgPSB1bmlxdWVQb3N0QnVmZmVyUGFydEZvckV2ZW50SWRzLmZpbmQoXG4gICAgICAgIChlKSA9PiBlID09PSBldmVudFBhcnRzW2ldLmZvckV2ZW50SWRcbiAgICAgICk7XG4gICAgICBpZiAoZm91bmRQYXJ0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW5pcXVlUG9zdEJ1ZmZlclBhcnRGb3JFdmVudElkcy5wdXNoKGV2ZW50UGFydHNbaV0uZm9yRXZlbnRJZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmlxdWVQb3N0QnVmZmVyUGFydEZvckV2ZW50SWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcmV0dXJuZWRFdmVudFBhcnRUb3RhbCA9IG1vZGlmeUV2ZW50UGFydHNGb3JTaW5ndWxhclBvc3RCdWZmZXJUaW1lKFxuICAgICAgZXZlbnRQYXJ0cyxcbiAgICAgIHVuaXF1ZVBvc3RCdWZmZXJQYXJ0Rm9yRXZlbnRJZHNbaV1cbiAgICApO1xuICAgIHBvc3RCdWZmZXJFdmVudFBhcnRzVG90YWwucHVzaCguLi5yZXR1cm5lZEV2ZW50UGFydFRvdGFsKTtcbiAgfVxuXG4gIGNvbnN0IGV2ZW50UGFydHNGaWx0ZXJlZCA9IF8uZGlmZmVyZW5jZUJ5KFxuICAgIGV2ZW50UGFydHMsXG4gICAgcG9zdEJ1ZmZlckV2ZW50UGFydHNUb3RhbCxcbiAgICAnaWQnXG4gICk7XG4gIGNvbnN0IGNvbmNhdGVuYXRlZFZhbHVlcyA9IGV2ZW50UGFydHNGaWx0ZXJlZC5jb25jYXQoXG4gICAgcG9zdEJ1ZmZlckV2ZW50UGFydHNUb3RhbFxuICApO1xuXG4gIGNvbmNhdGVuYXRlZFZhbHVlcy5mb3JFYWNoKChlKSA9PlxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZS5pZCxcbiAgICAgIGUuZ3JvdXBJZCxcbiAgICAgIGUuZXZlbnRJZCxcbiAgICAgIGUucGFydCxcbiAgICAgIGUubGFzdFBhcnQsXG4gICAgICBlLnN0YXJ0RGF0ZSxcbiAgICAgIGUuZW5kRGF0ZSxcbiAgICAgIGU/LmZvckV2ZW50SWQsXG4gICAgICBgZS5pZCwgZS5ncm91cElkLCBlLmV2ZW50SWQsIGUucGFydCwgZS5sYXN0UGFydCwgZS5zdGFydERhdGUsIGUuZW5kRGF0ZSwgZT8uZm9yRXZlbnRJZCwgIGluc2lkZSBtb2RpZnlFdmVudFBhcnRzRm9yTXVsdGlwbGVQb3N0QnVmZmVyVGltZWBcbiAgICApXG4gICk7XG4gIHJldHVybiBjb25jYXRlbmF0ZWRWYWx1ZXM7XG59O1xuXG5leHBvcnQgY29uc3QgbW9kaWZ5RXZlbnRQYXJ0c0ZvclNpbmd1bGFyUG9zdEJ1ZmZlclRpbWUgPSAoXG4gIGV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW10sXG4gIGZvckV2ZW50SWQ6IHN0cmluZ1xuKTogSW5pdGlhbEV2ZW50UGFydFR5cGVbXSA9PiB7XG4gIGNvbnN0IHBvc3RCdWZmZXJBZnRlckV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW10gPSBbXTtcbiAgY29uc3QgcG9zdEJ1ZmZlckFjdHVhbEV2ZW50UGFydHM6IEluaXRpYWxFdmVudFBhcnRUeXBlW10gPSBbXTtcblxuICBjb25zdCBwb3N0QnVmZmVyR3JvdXBJZCA9IHV1aWQoKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50UGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZXZlbnRQYXJ0c1tpXS5pZCA9PSBmb3JFdmVudElkKSB7XG4gICAgICBwb3N0QnVmZmVyQWN0dWFsRXZlbnRQYXJ0cy5wdXNoKHtcbiAgICAgICAgLi4uZXZlbnRQYXJ0c1tpXSxcbiAgICAgICAgZ3JvdXBJZDogcG9zdEJ1ZmZlckdyb3VwSWQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50UGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZXZlbnRQYXJ0c1tpXS5mb3JFdmVudElkID09PSBmb3JFdmVudElkICYmIGV2ZW50UGFydHNbaV0uaXNQb3N0RXZlbnQpIHtcbiAgICAgIHBvc3RCdWZmZXJBZnRlckV2ZW50UGFydHMucHVzaCh7XG4gICAgICAgIC4uLmV2ZW50UGFydHNbaV0sXG4gICAgICAgIGdyb3VwSWQ6IHBvc3RCdWZmZXJHcm91cElkLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcG9zdEJ1ZmZlckFjdHVhbEV2ZW50UGFydHNTb3J0ZWQgPSBwb3N0QnVmZmVyQWN0dWFsRXZlbnRQYXJ0cy5zb3J0KFxuICAgIChhLCBiKSA9PiBhLnBhcnQgLSBiLnBhcnRcbiAgKTtcbiAgY29uc3QgcG9zdEJ1ZmZlckFmdGVyRXZlbnRQYXJ0c1NvcnRlZCA9IHBvc3RCdWZmZXJBZnRlckV2ZW50UGFydHMuc29ydChcbiAgICAoYSwgYikgPT4gYS5wYXJ0IC0gYi5wYXJ0XG4gICk7XG5cbiAgY29uc3QgcG9zdEJ1ZmZlckV2ZW50UGFydHNUb3RhbCA9IHBvc3RCdWZmZXJBY3R1YWxFdmVudFBhcnRzU29ydGVkLmNvbmNhdChcbiAgICBwb3N0QnVmZmVyQWZ0ZXJFdmVudFBhcnRzU29ydGVkXG4gICk7XG5cbiAgY29uc3QgcHJlRXZlbnRJZCA9IHBvc3RCdWZmZXJFdmVudFBhcnRzVG90YWw/LlswXT8ucHJlRXZlbnRJZDtcbiAgY29uc3QgYWN0dWFsRXZlbnRQcmV2aW91c0xhc3RQYXJ0ID0gcG9zdEJ1ZmZlckV2ZW50UGFydHNUb3RhbD8uWzBdPy5sYXN0UGFydDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3RCdWZmZXJFdmVudFBhcnRzVG90YWwubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocHJlRXZlbnRJZCkge1xuICAgICAgcG9zdEJ1ZmZlckV2ZW50UGFydHNUb3RhbFtpXS5sYXN0UGFydCA9XG4gICAgICAgIGFjdHVhbEV2ZW50UHJldmlvdXNMYXN0UGFydCArIHBvc3RCdWZmZXJBZnRlckV2ZW50UGFydHNTb3J0ZWQubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3N0QnVmZmVyRXZlbnRQYXJ0c1RvdGFsW2ldLnBhcnQgPSBpICsgMTtcbiAgICAgIHBvc3RCdWZmZXJFdmVudFBhcnRzVG90YWxbaV0ubGFzdFBhcnQgPSBwb3N0QnVmZmVyRXZlbnRQYXJ0c1RvdGFsLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3RCdWZmZXJBZnRlckV2ZW50UGFydHNTb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoXG4gICAgICBwb3N0QnVmZmVyRXZlbnRQYXJ0c1RvdGFsPy5bcG9zdEJ1ZmZlckFjdHVhbEV2ZW50UGFydHNTb3J0ZWQ/Lmxlbmd0aCArIGldXG4gICAgKSB7XG4gICAgICBwb3N0QnVmZmVyRXZlbnRQYXJ0c1RvdGFsW1xuICAgICAgICBwb3N0QnVmZmVyQWN0dWFsRXZlbnRQYXJ0c1NvcnRlZD8ubGVuZ3RoICsgaVxuICAgICAgXS5wYXJ0ID0gYWN0dWFsRXZlbnRQcmV2aW91c0xhc3RQYXJ0ICsgaSArIDE7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcHJlRXZlbnRQYXJ0cyA9IGV2ZW50UGFydHMuZmlsdGVyKChlKSA9PiBlLmV2ZW50SWQgPT09IHByZUV2ZW50SWQpO1xuICBjb25zdCBwcmVCdWZmZXJFdmVudFBhcnRzID0gcHJlRXZlbnRQYXJ0cz8ubWFwKChlKSA9PiAoe1xuICAgIC4uLmUsXG4gICAgZ3JvdXBJZDogcG9zdEJ1ZmZlckdyb3VwSWQsXG4gICAgbGFzdFBhcnQ6XG4gICAgICBhY3R1YWxFdmVudFByZXZpb3VzTGFzdFBhcnQgKyBwb3N0QnVmZmVyQWZ0ZXJFdmVudFBhcnRzU29ydGVkLmxlbmd0aCxcbiAgfSkpO1xuICBjb25zdCBjb25jYXRlbmF0ZWRWYWx1ZXMgPSBwcmVCdWZmZXJFdmVudFBhcnRzLmNvbmNhdChcbiAgICBwb3N0QnVmZmVyRXZlbnRQYXJ0c1RvdGFsXG4gICk7XG4gIGNvbmNhdGVuYXRlZFZhbHVlcy5mb3JFYWNoKChlKSA9PlxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZS5pZCxcbiAgICAgIGUuZ3JvdXBJZCxcbiAgICAgIGUuZXZlbnRJZCxcbiAgICAgIGUucGFydCxcbiAgICAgIGUubGFzdFBhcnQsXG4gICAgICBlLnN0YXJ0RGF0ZSxcbiAgICAgIGUuZW5kRGF0ZSxcbiAgICAgIGU/LmZvckV2ZW50SWQsXG4gICAgICBgZS5pZCwgZS5ncm91cElkLCBlLmV2ZW50SWQsIGUucGFydCwgZS5sYXN0UGFydCwgZS5zdGFydERhdGUsIGUuZW5kRGF0ZSwgZT8uZm9yRXZlbnRJZCwgIGluc2lkZSBtb2RpZnlFdmVudFBhcnRzRm9yU2luZ2x1bGFyUG9zdEJ1ZmZlclRpbWVgXG4gICAgKVxuICApO1xuICByZXR1cm4gY29uY2F0ZW5hdGVkVmFsdWVzO1xufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdEV2ZW50VHlwZVRvUGxhbm5lckV2ZW50ID0gKFxuICBldmVudDogSW5pdGlhbEV2ZW50UGFydFR5cGVQbHVzLFxuICB1c2VyUHJlZmVyZW5jZTogVXNlclByZWZlcmVuY2VUeXBlLFxuICB3b3JrVGltZXM6IFdvcmtUaW1lVHlwZVtdLFxuICBob3N0VGltZXpvbmU6IHN0cmluZ1xuKTogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZSA9PiB7XG4gIGNvbnN0IHtcbiAgICBhbGxEYXksXG4gICAgcGFydCxcbiAgICBmb3JFdmVudElkLFxuICAgIGdyb3VwSWQsXG4gICAgZXZlbnRJZCxcbiAgICBpc0JyZWFrLFxuICAgIGlzRXh0ZXJuYWxNZWV0aW5nLFxuICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBpc01lZXRpbmcsXG4gICAgaXNNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBpc1Bvc3RFdmVudCxcbiAgICBpc1ByZUV2ZW50LFxuICAgIG1vZGlmaWFibGUsXG4gICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgbmVnYXRpdmVJbXBhY3RTY29yZSxcbiAgICBuZWdhdGl2ZUltcGFjdFRpbWUsXG4gICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgcG9zaXRpdmVJbXBhY3RTY29yZSxcbiAgICBwb3NpdGl2ZUltcGFjdFRpbWUsXG4gICAgcHJlZmVycmVkRGF5T2ZXZWVrLFxuICAgIHByZWZlcnJlZEVuZFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRUaW1lLFxuICAgIHByaW9yaXR5LFxuICAgIHN0YXJ0RGF0ZSxcbiAgICBlbmREYXRlLFxuICAgIHRhc2tJZCxcbiAgICB1c2VySWQsXG4gICAgd2Vla2x5VGFza0xpc3QsXG4gICAgZGFpbHlUYXNrTGlzdCxcbiAgICBoYXJkRGVhZGxpbmUsXG4gICAgc29mdERlYWRsaW5lLFxuICAgIHJlY3VycmluZ0V2ZW50SWQsXG4gICAgbGFzdFBhcnQsXG4gICAgcHJlZmVycmVkVGltZVJhbmdlcyxcbiAgICBob3N0SWQsXG4gICAgbWVldGluZ0lkLFxuICB9ID0gZXZlbnQ7XG5cbiAgaWYgKGFsbERheSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgdG90YWxXb3JraW5nSG91cnMgPSBjb252ZXJ0VG9Ub3RhbFdvcmtpbmdIb3Vyc0ZvckludGVybmFsQXR0ZW5kZWUoXG4gICAgdXNlclByZWZlcmVuY2UsXG4gICAgZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuZm9ybWF0KCksXG4gICAgaG9zdFRpbWV6b25lXG4gICk7XG5cbiAgY29uc3QgdXNlcjogVXNlclBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUgPSB7XG4gICAgaWQ6IGV2ZW50LnVzZXJJZCxcbiAgICBtYXhXb3JrTG9hZFBlcmNlbnQ6IHVzZXJQcmVmZXJlbmNlLm1heFdvcmtMb2FkUGVyY2VudCxcbiAgICBiYWNrVG9CYWNrTWVldGluZ3M6IHVzZXJQcmVmZXJlbmNlLmJhY2tUb0JhY2tNZWV0aW5ncyxcbiAgICBtYXhOdW1iZXJPZk1lZXRpbmdzOiB1c2VyUHJlZmVyZW5jZS5tYXhOdW1iZXJPZk1lZXRpbmdzLFxuICAgIG1pbk51bWJlck9mQnJlYWtzOiB1c2VyUHJlZmVyZW5jZS5taW5OdW1iZXJPZkJyZWFrcyxcbiAgICB3b3JrVGltZXMsXG4gICAgaG9zdElkLFxuICB9O1xuXG4gIGNvbnN0IGV2ZW50UGxhbm5lclJlcXVlc3RCb2R5OiBFdmVudFBhcnRQbGFubmVyUmVxdWVzdEJvZHlUeXBlID0ge1xuICAgIGdyb3VwSWQsXG4gICAgZXZlbnRJZCxcbiAgICBwYXJ0LFxuICAgIGxhc3RQYXJ0LFxuICAgIHN0YXJ0RGF0ZSxcbiAgICBlbmREYXRlLFxuICAgIHRhc2tJZCxcbiAgICBoYXJkRGVhZGxpbmUsXG4gICAgc29mdERlYWRsaW5lLFxuICAgIHVzZXJJZCxcbiAgICB1c2VyLFxuICAgIHByaW9yaXR5LFxuICAgIGlzUHJlRXZlbnQsXG4gICAgaXNQb3N0RXZlbnQsXG4gICAgZm9yRXZlbnRJZCxcbiAgICBwb3NpdGl2ZUltcGFjdFNjb3JlLFxuICAgIG5lZ2F0aXZlSW1wYWN0U2NvcmUsXG4gICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWs6XG4gICAgICBkYXlPZldlZWtJbnRUb1N0cmluZ1twb3NpdGl2ZUltcGFjdERheU9mV2Vla10gPz8gbnVsbCxcbiAgICBwb3NpdGl2ZUltcGFjdFRpbWUsXG4gICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWs6XG4gICAgICBkYXlPZldlZWtJbnRUb1N0cmluZ1tuZWdhdGl2ZUltcGFjdERheU9mV2Vla10gPz8gbnVsbCxcbiAgICBuZWdhdGl2ZUltcGFjdFRpbWUsXG4gICAgbW9kaWZpYWJsZSxcbiAgICBwcmVmZXJyZWREYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW3ByZWZlcnJlZERheU9mV2Vla10gPz8gbnVsbCxcbiAgICBwcmVmZXJyZWRUaW1lLFxuICAgIGlzTWVldGluZyxcbiAgICBpc0V4dGVybmFsTWVldGluZyxcbiAgICBpc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGUsXG4gICAgaXNNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBkYWlseVRhc2tMaXN0LFxuICAgIHdlZWtseVRhc2tMaXN0LFxuICAgIGdhcDogaXNCcmVhayxcbiAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRFbmRUaW1lUmFuZ2UsXG4gICAgdG90YWxXb3JraW5nSG91cnMsXG4gICAgcmVjdXJyaW5nRXZlbnRJZCxcbiAgICBob3N0SWQsXG4gICAgbWVldGluZ0lkLFxuICAgIGV2ZW50OiB7XG4gICAgICBpZDogZXZlbnRJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGhvc3RJZCxcbiAgICAgIHByZWZlcnJlZFRpbWVSYW5nZXM6XG4gICAgICAgIHByZWZlcnJlZFRpbWVSYW5nZXM/Lm1hcCgoZSkgPT4gKHtcbiAgICAgICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nPy5bZT8uZGF5T2ZXZWVrXSA/PyBudWxsLFxuICAgICAgICAgIHN0YXJ0VGltZTogZT8uc3RhcnRUaW1lLFxuICAgICAgICAgIGVuZFRpbWU6IGU/LmVuZFRpbWUsXG4gICAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgaG9zdElkLFxuICAgICAgICB9KSkgPz8gbnVsbCxcbiAgICB9LFxuICB9O1xuICByZXR1cm4gZXZlbnRQbGFubmVyUmVxdWVzdEJvZHk7XG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0RXZlbnRUeXBlVG9QbGFubmVyRXZlbnRGb3JFeHRlcm5hbEF0dGVuZGVlID0gKFxuICBldmVudDogSW5pdGlhbEV2ZW50UGFydFR5cGVQbHVzLFxuICB3b3JrVGltZXM6IFdvcmtUaW1lVHlwZVtdLFxuICBhdHRlbmRlZUV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBob3N0VGltZXpvbmU6IHN0cmluZ1xuKTogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZSA9PiB7XG4gIGNvbnN0IHtcbiAgICBhbGxEYXksXG4gICAgcGFydCxcbiAgICBmb3JFdmVudElkLFxuICAgIGdyb3VwSWQsXG4gICAgZXZlbnRJZCxcbiAgICBpc0JyZWFrLFxuICAgIGlzRXh0ZXJuYWxNZWV0aW5nLFxuICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBpc01lZXRpbmcsXG4gICAgaXNNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBpc1Bvc3RFdmVudCxcbiAgICBpc1ByZUV2ZW50LFxuICAgIG1vZGlmaWFibGUsXG4gICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgbmVnYXRpdmVJbXBhY3RTY29yZSxcbiAgICBuZWdhdGl2ZUltcGFjdFRpbWUsXG4gICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgcG9zaXRpdmVJbXBhY3RTY29yZSxcbiAgICBwb3NpdGl2ZUltcGFjdFRpbWUsXG4gICAgcHJlZmVycmVkRGF5T2ZXZWVrLFxuICAgIHByZWZlcnJlZEVuZFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRUaW1lLFxuICAgIHByaW9yaXR5LFxuICAgIHN0YXJ0RGF0ZSxcbiAgICBlbmREYXRlLFxuICAgIHRhc2tJZCxcbiAgICB1c2VySWQsXG4gICAgd2Vla2x5VGFza0xpc3QsXG4gICAgZGFpbHlUYXNrTGlzdCxcbiAgICBoYXJkRGVhZGxpbmUsXG4gICAgc29mdERlYWRsaW5lLFxuICAgIHJlY3VycmluZ0V2ZW50SWQsXG4gICAgbGFzdFBhcnQsXG4gICAgcHJlZmVycmVkVGltZVJhbmdlcyxcbiAgICBob3N0SWQsXG4gICAgbWVldGluZ0lkLFxuICB9ID0gZXZlbnQ7XG5cbiAgaWYgKGFsbERheSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgdG90YWxXb3JraW5nSG91cnMgPSBjb252ZXJ0VG9Ub3RhbFdvcmtpbmdIb3Vyc0ZvckV4dGVybmFsQXR0ZW5kZWUoXG4gICAgYXR0ZW5kZWVFdmVudHMsXG4gICAgZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuZm9ybWF0KCksXG4gICAgaG9zdFRpbWV6b25lLFxuICAgIGV2ZW50Py50aW1lem9uZVxuICApO1xuXG4gIGNvbnN0IHVzZXI6IFVzZXJQbGFubmVyUmVxdWVzdEJvZHlUeXBlID0ge1xuICAgIGlkOiBldmVudC51c2VySWQsXG4gICAgbWF4V29ya0xvYWRQZXJjZW50OiAxMDAsXG4gICAgYmFja1RvQmFja01lZXRpbmdzOiBmYWxzZSxcbiAgICBtYXhOdW1iZXJPZk1lZXRpbmdzOiA5OSxcbiAgICBtaW5OdW1iZXJPZkJyZWFrczogMCxcbiAgICB3b3JrVGltZXMsXG4gICAgaG9zdElkLFxuICB9O1xuXG4gIGNvbnN0IGV2ZW50UGxhbm5lclJlcXVlc3RCb2R5OiBFdmVudFBhcnRQbGFubmVyUmVxdWVzdEJvZHlUeXBlID0ge1xuICAgIGdyb3VwSWQsXG4gICAgZXZlbnRJZCxcbiAgICBwYXJ0LFxuICAgIGxhc3RQYXJ0LFxuICAgIHN0YXJ0RGF0ZSxcbiAgICBlbmREYXRlLFxuICAgIHRhc2tJZCxcbiAgICBoYXJkRGVhZGxpbmUsXG4gICAgc29mdERlYWRsaW5lLFxuICAgIHVzZXJJZCxcbiAgICB1c2VyLFxuICAgIHByaW9yaXR5LFxuICAgIGlzUHJlRXZlbnQsXG4gICAgaXNQb3N0RXZlbnQsXG4gICAgZm9yRXZlbnRJZCxcbiAgICBwb3NpdGl2ZUltcGFjdFNjb3JlLFxuICAgIG5lZ2F0aXZlSW1wYWN0U2NvcmUsXG4gICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWs6XG4gICAgICBkYXlPZldlZWtJbnRUb1N0cmluZ1twb3NpdGl2ZUltcGFjdERheU9mV2Vla10gPz8gbnVsbCxcbiAgICBwb3NpdGl2ZUltcGFjdFRpbWUsXG4gICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWs6XG4gICAgICBkYXlPZldlZWtJbnRUb1N0cmluZ1tuZWdhdGl2ZUltcGFjdERheU9mV2Vla10gPz8gbnVsbCxcbiAgICBuZWdhdGl2ZUltcGFjdFRpbWUsXG4gICAgbW9kaWZpYWJsZSxcbiAgICBwcmVmZXJyZWREYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW3ByZWZlcnJlZERheU9mV2Vla10gPz8gbnVsbCxcbiAgICBwcmVmZXJyZWRUaW1lLFxuICAgIGlzTWVldGluZyxcbiAgICBpc0V4dGVybmFsTWVldGluZyxcbiAgICBpc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGUsXG4gICAgaXNNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBkYWlseVRhc2tMaXN0LFxuICAgIHdlZWtseVRhc2tMaXN0LFxuICAgIGdhcDogaXNCcmVhayxcbiAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRFbmRUaW1lUmFuZ2UsXG4gICAgdG90YWxXb3JraW5nSG91cnMsXG4gICAgcmVjdXJyaW5nRXZlbnRJZCxcbiAgICBob3N0SWQsXG4gICAgbWVldGluZ0lkLFxuICAgIGV2ZW50OiB7XG4gICAgICBpZDogZXZlbnRJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGhvc3RJZCxcbiAgICAgIHByZWZlcnJlZFRpbWVSYW5nZXM6XG4gICAgICAgIHByZWZlcnJlZFRpbWVSYW5nZXM/Lm1hcCgoZSkgPT4gKHtcbiAgICAgICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nPy5bZT8uZGF5T2ZXZWVrXSA/PyBudWxsLFxuICAgICAgICAgIHN0YXJ0VGltZTogZT8uc3RhcnRUaW1lLFxuICAgICAgICAgIGVuZFRpbWU6IGU/LmVuZFRpbWUsXG4gICAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgaG9zdElkLFxuICAgICAgICB9KSkgPz8gbnVsbCxcbiAgICB9LFxuICB9O1xuICByZXR1cm4gZXZlbnRQbGFubmVyUmVxdWVzdEJvZHk7XG59O1xuXG5leHBvcnQgY29uc3QgY29udmVydE1lZXRpbmdQbHVzVHlwZVRvRXZlbnRQbHVzVHlwZSA9IChcbiAgZXZlbnQ6IEV2ZW50TWVldGluZ1BsdXNUeXBlXG4pOiBFdmVudFBsdXNUeXBlID0+IHtcbiAgY29uc3QgbmV3RXZlbnQ6IEV2ZW50UGx1c1R5cGUgPSB7XG4gICAgLi4uZXZlbnQsXG4gICAgcHJlZmVycmVkVGltZVJhbmdlczpcbiAgICAgIGV2ZW50Py5wcmVmZXJyZWRUaW1lUmFuZ2VzPy5tYXAoKHB0KSA9PiAoe1xuICAgICAgICBpZDogcHQuaWQsXG4gICAgICAgIGV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgICBkYXlPZldlZWs6IHB0Py5kYXlPZldlZWssXG4gICAgICAgIHN0YXJ0VGltZTogcHQ/LnN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZTogcHQ/LmVuZFRpbWUsXG4gICAgICAgIHVwZGF0ZWRBdDogcHQ/LnVwZGF0ZWRBdCxcbiAgICAgICAgY3JlYXRlZERhdGU6IHB0Py5jcmVhdGVkRGF0ZSxcbiAgICAgICAgdXNlcklkOiBldmVudD8udXNlcklkLFxuICAgICAgfSkpIHx8IG51bGwsXG4gIH07XG5cbiAgcmV0dXJuIG5ld0V2ZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IHNldFByZWZlcnJlZFRpbWVGb3JVbk1vZGlmaWFibGVFdmVudCA9IChcbiAgZXZlbnQ6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUsXG4gIHRpbWV6b25lOiBzdHJpbmdcbik6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUgPT4ge1xuICBpZiAoIWV2ZW50Py5tb2RpZmlhYmxlKSB7XG4gICAgaWYgKCFldmVudD8ucHJlZmVycmVkRGF5T2ZXZWVrICYmICFldmVudD8ucHJlZmVycmVkVGltZSkge1xuICAgICAgY29uc3QgbmV3RXZlbnQgPSB7XG4gICAgICAgIC4uLmV2ZW50LFxuICAgICAgICBwcmVmZXJyZWREYXlPZldlZWs6XG4gICAgICAgICAgZGF5T2ZXZWVrSW50VG9TdHJpbmdbXG4gICAgICAgICAgICBnZXRJU09EYXkoXG4gICAgICAgICAgICAgIGRheWpzKGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KHRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIF0sXG4gICAgICAgIHByZWZlcnJlZFRpbWU6IGRheWpzKGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KHRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgfVxuICAgIHJldHVybiBldmVudDtcbiAgfVxuICByZXR1cm4gZXZlbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgbGlzdEV2ZW50c1dpdGhJZHMgPSBhc3luYyAoaWRzOiBzdHJpbmdbXSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnbGlzdEV2ZW50c1dpdGhJZHMnO1xuXG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgcXVlcnkgbGlzdEV2ZW50c1dpdGhJZHMoJGlkczogW1N0cmluZyFdISkge1xuICAgICAgRXZlbnQod2hlcmU6IHtpZDoge19pbjogJGlkc319KSB7XG4gICAgICAgIGFsbERheVxuICAgICAgICBhbnlvbmVDYW5BZGRTZWxmXG4gICAgICAgIGF0dGFjaG1lbnRzXG4gICAgICAgIGF0dGVuZGVlc09taXR0ZWRcbiAgICAgICAgYmFja2dyb3VuZENvbG9yXG4gICAgICAgIGNhbGVuZGFySWRcbiAgICAgICAgY29sb3JJZFxuICAgICAgICBjb25mZXJlbmNlSWRcbiAgICAgICAgY29weUF2YWlsYWJpbGl0eVxuICAgICAgICBjb3B5Q2F0ZWdvcmllc1xuICAgICAgICBjb3B5RHVyYXRpb25cbiAgICAgICAgY29weUlzQnJlYWtcbiAgICAgICAgY29weUlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgIGNvcHlJc01lZXRpbmdcbiAgICAgICAgY29weU1vZGlmaWFibGVcbiAgICAgICAgY29weVByaW9yaXR5TGV2ZWxcbiAgICAgICAgY29weVJlbWluZGVyc1xuICAgICAgICBjb3B5VGltZUJsb2NraW5nXG4gICAgICAgIGNvcHlUaW1lUHJlZmVyZW5jZVxuICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICBjcmVhdG9yXG4gICAgICAgIGRhaWx5VGFza0xpc3RcbiAgICAgICAgZGVsZXRlZFxuICAgICAgICBkdXJhdGlvblxuICAgICAgICBlbmREYXRlXG4gICAgICAgIGVuZFRpbWVVbnNwZWNpZmllZFxuICAgICAgICBldmVudElkXG4gICAgICAgIGV2ZW50VHlwZVxuICAgICAgICBleHRlbmRlZFByb3BlcnRpZXNcbiAgICAgICAgZm9sbG93VXBFdmVudElkXG4gICAgICAgIGZvckV2ZW50SWRcbiAgICAgICAgZm9yZWdyb3VuZENvbG9yXG4gICAgICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyc1xuICAgICAgICBndWVzdHNDYW5Nb2RpZnlcbiAgICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHNcbiAgICAgICAgaGFuZ291dExpbmtcbiAgICAgICAgaGFyZERlYWRsaW5lXG4gICAgICAgIGh0bWxMaW5rXG4gICAgICAgIGlDYWxVSURcbiAgICAgICAgaWRcbiAgICAgICAgaXNCcmVha1xuICAgICAgICBpc0V4dGVybmFsTWVldGluZ1xuICAgICAgICBpc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgaXNGb2xsb3dVcFxuICAgICAgICBpc01lZXRpbmdcbiAgICAgICAgaXNNZWV0aW5nTW9kaWZpYWJsZVxuICAgICAgICBpc1Bvc3RFdmVudFxuICAgICAgICBpc1ByZUV2ZW50XG4gICAgICAgIGxpbmtzXG4gICAgICAgIGxvY2F0aW9uXG4gICAgICAgIGxvY2tlZFxuICAgICAgICBtYXhBdHRlbmRlZXNcbiAgICAgICAgbWVldGluZ0lkXG4gICAgICAgIG1ldGhvZFxuICAgICAgICBtb2RpZmlhYmxlXG4gICAgICAgIG5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrXG4gICAgICAgIG5lZ2F0aXZlSW1wYWN0U2NvcmVcbiAgICAgICAgbmVnYXRpdmVJbXBhY3RUaW1lXG4gICAgICAgIG5vdGVzXG4gICAgICAgIG9yZ2FuaXplclxuICAgICAgICBvcmlnaW5hbEFsbERheVxuICAgICAgICBvcmlnaW5hbFN0YXJ0RGF0ZVxuICAgICAgICBvcmlnaW5hbFRpbWV6b25lXG4gICAgICAgIHBvc2l0aXZlSW1wYWN0RGF5T2ZXZWVrXG4gICAgICAgIHBvc2l0aXZlSW1wYWN0U2NvcmVcbiAgICAgICAgcG9zaXRpdmVJbXBhY3RUaW1lXG4gICAgICAgIHBvc3RFdmVudElkXG4gICAgICAgIHByZUV2ZW50SWRcbiAgICAgICAgcHJlZmVycmVkRGF5T2ZXZWVrXG4gICAgICAgIHByZWZlcnJlZEVuZFRpbWVSYW5nZVxuICAgICAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgICBwcmVmZXJyZWRUaW1lXG4gICAgICAgIHByaW9yaXR5XG4gICAgICAgIHByaXZhdGVDb3B5XG4gICAgICAgIHJlY3VycmVuY2VcbiAgICAgICAgcmVjdXJyZW5jZVJ1bGVcbiAgICAgICAgcmVjdXJyaW5nRXZlbnRJZFxuICAgICAgICBzZW5kVXBkYXRlc1xuICAgICAgICBzb2Z0RGVhZGxpbmVcbiAgICAgICAgc291cmNlXG4gICAgICAgIHN0YXJ0RGF0ZVxuICAgICAgICBzdGF0dXNcbiAgICAgICAgc3VtbWFyeVxuICAgICAgICB0YXNrSWRcbiAgICAgICAgdGFza1R5cGVcbiAgICAgICAgdGltZUJsb2NraW5nXG4gICAgICAgIHRpbWV6b25lXG4gICAgICAgIHRpdGxlXG4gICAgICAgIHRyYW5zcGFyZW5jeVxuICAgICAgICB1bmxpbmtcbiAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgIHVzZURlZmF1bHRBbGFybXNcbiAgICAgICAgdXNlcklkXG4gICAgICAgIHVzZXJNb2RpZmllZEF2YWlsYWJpbGl0eVxuICAgICAgICB1c2VyTW9kaWZpZWRDYXRlZ29yaWVzXG4gICAgICAgIHVzZXJNb2RpZmllZER1cmF0aW9uXG4gICAgICAgIHVzZXJNb2RpZmllZElzQnJlYWtcbiAgICAgICAgdXNlck1vZGlmaWVkSXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgdXNlck1vZGlmaWVkSXNNZWV0aW5nXG4gICAgICAgIHVzZXJNb2RpZmllZE1vZGlmaWFibGVcbiAgICAgICAgdXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbFxuICAgICAgICB1c2VyTW9kaWZpZWRSZW1pbmRlcnNcbiAgICAgICAgdXNlck1vZGlmaWVkVGltZUJsb2NraW5nXG4gICAgICAgIHVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlXG4gICAgICAgIHZpc2liaWxpdHlcbiAgICAgICAgd2Vla2x5VGFza0xpc3RcbiAgICAgICAgYnlXZWVrRGF5XG4gICAgICAgIGxvY2FsU3luY2VkXG4gICAgICAgIHVzZXJNb2RpZmllZENvbG9yXG4gICAgICAgIGNvcHlDb2xvclxuICAgICAgfVxuICAgIH1cbiAgICBgO1xuXG4gICAgY29uc3QgcmVzOiB7IGRhdGE6IHsgRXZlbnQ6IEV2ZW50VHlwZVtdIH0gfSA9IGF3YWl0IGdvdFxuICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLUhhc3VyYS1BZG1pbi1TZWNyZXQnOiBoYXN1cmFBZG1pblNlY3JldCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgICBpZHMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uRXZlbnQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBsaXN0IGlkcyB3aXRoIGlkcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgdGFnRXZlbnRzRm9yRGFpbHlPcldlZWtseVRhc2sgPSBhc3luYyAoXG4gIGV2ZW50czogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdXG4pOiBQcm9taXNlPEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGVbXSB8IG51bGw+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmaWx0ZXJlZEV2ZW50cyA9IGV2ZW50cy5maWx0ZXIoKGUpID0+IGUucmVjdXJyaW5nRXZlbnRJZCk7XG4gICAgaWYgKGZpbHRlcmVkRXZlbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBvcmlnaW5hbEV2ZW50cyA9IGF3YWl0IGxpc3RFdmVudHNXaXRoSWRzKFxuICAgICAgICBfLnVuaXEoZmlsdGVyZWRFdmVudHMubWFwKChlKSA9PiBlPy5yZWN1cnJpbmdFdmVudElkKSlcbiAgICAgICk7XG4gICAgICBpZiAob3JpZ2luYWxFdmVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdGFnZ2VkRmlsdGVyZWRFdmVudHMgPSBmaWx0ZXJlZEV2ZW50cy5tYXAoKGUpID0+XG4gICAgICAgICAgdGFnRXZlbnRGb3JEYWlseU9yV2Vla2x5VGFzayhcbiAgICAgICAgICAgIGUsXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50cy5maW5kKChvZSkgPT4gb2UuaWQgPT09IGUucmVjdXJyaW5nRXZlbnRJZClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5ld0V2ZW50cyA9IGV2ZW50cy5tYXAoKGUpID0+IHtcbiAgICAgICAgICBpZiAoZT8ucmVjdXJyaW5nRXZlbnRJZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnZ2VkRmlsdGVyZWRFdmVudCA9IHRhZ2dlZEZpbHRlcmVkRXZlbnRzLmZpbmQoXG4gICAgICAgICAgICAgICh0ZSkgPT4gdGU/LmV2ZW50SWQgPT09IGU/LmV2ZW50SWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAodGFnZ2VkRmlsdGVyZWRFdmVudD8uZXZlbnRJZCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGFnZ2VkRmlsdGVyZWRFdmVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXdFdmVudHM7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZygndGFnRXZlbnRzRm9yRGFpbHlvcldlZWtseVRhc2s6IG9yaWdpbmFsRXZlbnRzIGlzIGVtcHR5Jyk7XG4gICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnRzO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gdG8gdGFnIGV2ZW50cyBmb3IgZGFpbHkgb3Igd2Vla2x5IHRhc2snKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHRhZ0V2ZW50Rm9yRGFpbHlPcldlZWtseVRhc2sgPSAoXG4gIGV2ZW50VG9TdWJtaXQ6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUsXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlXG4pID0+IHtcbiAgaWYgKCFldmVudD8uaWQpIHtcbiAgICBjb25zb2xlLmxvZygnbm8gb3JpZ2luYWwgZXZlbnQgaW5zaWRlIHRhZ0V2ZW50Rm9yRGFpbHlzT3JXZWVrbHlUYXNrJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIWV2ZW50VG9TdWJtaXQ/LmV2ZW50SWQpIHtcbiAgICBjb25zb2xlLmxvZygnbm8gZXZlbnRUb1N1Ym1pdCBpbnNpZGUgdGFnRXZlbnRGb3JEYWlseU9yV2Vla2x5VGFzaycpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGV2ZW50VG9TdWJtaXQ/LnJlY3VycmluZ0V2ZW50SWQpIHtcbiAgICBpZiAoZXZlbnQ/LndlZWtseVRhc2tMaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5ldmVudFRvU3VibWl0LFxuICAgICAgICB3ZWVrbHlUYXNrTGlzdDogZXZlbnQud2Vla2x5VGFza0xpc3QsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoZXZlbnQ/LmRhaWx5VGFza0xpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmV2ZW50VG9TdWJtaXQsXG4gICAgICAgIGRhaWx5VGFza0xpc3Q6IGV2ZW50LmRhaWx5VGFza0xpc3QsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnRUb1N1Ym1pdDtcbiAgfVxuICByZXR1cm4gZXZlbnRUb1N1Ym1pdDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVVzZXJQbGFubmVyUmVxdWVzdEJvZHkgPSAoXG4gIHVzZXJQcmVmZXJlbmNlOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxuICB3b3JrVGltZXM6IFdvcmtUaW1lVHlwZVtdLFxuICBob3N0SWQ6IHN0cmluZ1xuKTogVXNlclBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUgPT4ge1xuICBjb25zdCB7XG4gICAgbWF4V29ya0xvYWRQZXJjZW50LFxuICAgIGJhY2tUb0JhY2tNZWV0aW5ncyxcbiAgICBtYXhOdW1iZXJPZk1lZXRpbmdzLFxuICAgIG1pbk51bWJlck9mQnJlYWtzLFxuICB9ID0gdXNlclByZWZlcmVuY2U7XG4gIGNvbnN0IHVzZXI6IFVzZXJQbGFubmVyUmVxdWVzdEJvZHlUeXBlID0ge1xuICAgIGlkOiB1c2VySWQsXG4gICAgbWF4V29ya0xvYWRQZXJjZW50LFxuICAgIGJhY2tUb0JhY2tNZWV0aW5ncyxcbiAgICBtYXhOdW1iZXJPZk1lZXRpbmdzLFxuICAgIG1pbk51bWJlck9mQnJlYWtzLFxuICAgIHdvcmtUaW1lcyxcbiAgICBob3N0SWQsXG4gIH07XG4gIHJldHVybiB1c2VyO1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlVXNlclBsYW5uZXJSZXF1ZXN0Qm9keUZvckV4dGVybmFsQXR0ZW5kZWUgPSAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICB3b3JrVGltZXM6IFdvcmtUaW1lVHlwZVtdLFxuICBob3N0SWQ6IHN0cmluZ1xuKTogVXNlclBsYW5uZXJSZXF1ZXN0Qm9keVR5cGUgPT4ge1xuICBjb25zdCB1c2VyOiBVc2VyUGxhbm5lclJlcXVlc3RCb2R5VHlwZSA9IHtcbiAgICBpZDogdXNlcklkLFxuICAgIG1heFdvcmtMb2FkUGVyY2VudDogMTAwLFxuICAgIGJhY2tUb0JhY2tNZWV0aW5nczogZmFsc2UsXG4gICAgbWF4TnVtYmVyT2ZNZWV0aW5nczogOTksXG4gICAgbWluTnVtYmVyT2ZCcmVha3M6IDAsXG4gICAgd29ya1RpbWVzLFxuICAgIGhvc3RJZCxcbiAgfTtcbiAgcmV0dXJuIHVzZXI7XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0V2ZW50c0Zvck9wdGFQbGFubmVyRm9yTWFpbkhvc3QgPSBhc3luYyAoXG4gIG1haW5Ib3N0SWQ6IHN0cmluZyxcbiAgYWxsSG9zdEV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICB3aW5kb3dTdGFydERhdGU6IHN0cmluZyxcbiAgd2luZG93RW5kRGF0ZTogc3RyaW5nLFxuICBob3N0VGltZXpvbmU6IHN0cmluZyxcbiAgb2xkSG9zdEV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBuZXdIb3N0UmVtaW5kZXJzPzogUmVtaW5kZXJzRm9yRXZlbnRUeXBlW10sXG4gIG5ld0hvc3RCdWZmZXJUaW1lcz86IEJ1ZmZlclRpbWVPYmplY3RUeXBlW11cbik6IFByb21pc2U8UmV0dXJuQm9keUZvckhvc3RGb3JPcHRhcGxhbm5lclByZXBUeXBlPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbmV3QnVmZmVyVGltZUFycmF5OiBFdmVudFBsdXNUeXBlW10gPSBbXTtcbiAgICBuZXdIb3N0QnVmZmVyVGltZXM/LmZvckVhY2goKG5ld0hvc3RCdWZmZXJUaW1lKSA9PiB7XG4gICAgICBpZiAobmV3SG9zdEJ1ZmZlclRpbWU/LmJlZm9yZUV2ZW50Py5pZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBuZXdIb3N0QnVmZmVyVGltZT8uYmVmb3JlRXZlbnQsXG4gICAgICAgICAgJyBuZXdUaW1lQmxvY2tpbmc/LmJlZm9yZUV2ZW50J1xuICAgICAgICApO1xuICAgICAgICBuZXdCdWZmZXJUaW1lQXJyYXkucHVzaChuZXdIb3N0QnVmZmVyVGltZS5iZWZvcmVFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdIb3N0QnVmZmVyVGltZT8uYWZ0ZXJFdmVudD8uaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgbmV3SG9zdEJ1ZmZlclRpbWU/LmFmdGVyRXZlbnQsXG4gICAgICAgICAgJyBuZXdUaW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQnXG4gICAgICAgICk7XG4gICAgICAgIG5ld0J1ZmZlclRpbWVBcnJheS5wdXNoKG5ld0hvc3RCdWZmZXJUaW1lLmFmdGVyRXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kaWZpZWRBbGxIb3N0RXZlbnRzID0gXy5jbG9uZURlZXAoYWxsSG9zdEV2ZW50cyk7XG5cbiAgICBtb2RpZmllZEFsbEhvc3RFdmVudHMucHVzaCguLi5uZXdCdWZmZXJUaW1lQXJyYXkpO1xuXG4gICAgY29uc3QgdXNlclByZWZlcmVuY2VzID0gYXdhaXQgZ2V0VXNlclByZWZlcmVuY2VzKG1haW5Ib3N0SWQpO1xuXG4gICAgY29uc3QgZ2xvYmFsUHJpbWFyeUNhbGVuZGFyID0gYXdhaXQgZ2V0R2xvYmFsQ2FsZW5kYXIobWFpbkhvc3RJZCk7XG5cbiAgICBjb25zdCBkaWZmRGF5cyA9IGRheWpzKHdpbmRvd0VuZERhdGUuc2xpY2UoMCwgMTkpKS5kaWZmKFxuICAgICAgZGF5anMod2luZG93U3RhcnREYXRlLnNsaWNlKDAsIDE5KSksXG4gICAgICAnZGF5J1xuICAgICk7XG5cbiAgICBjb25zdCBtb2RpZmllZEFsbEV2ZW50c1dpdGhCcmVha3M6IEV2ZW50UGx1c1R5cGVbXSA9IFtdO1xuXG4gICAgY29uc3Qgc3RhcnREYXRlc0ZvckVhY2hEYXkgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGRpZmZEYXlzOyBpKyspIHtcbiAgICAgIHN0YXJ0RGF0ZXNGb3JFYWNoRGF5LnB1c2goXG4gICAgICAgIGRheWpzKHdpbmRvd1N0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuYWRkKGksICdkYXknKVxuICAgICAgICAgIC5mb3JtYXQoKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgcGFyZW50QnJlYWtzOiBFdmVudFBsdXNUeXBlW10gPSBbXTtcblxuICAgIGNvbnN0IGJyZWFrcyA9IGF3YWl0IGdlbmVyYXRlQnJlYWtFdmVudHNGb3JEYXRlKFxuICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgbWFpbkhvc3RJZCxcbiAgICAgIHdpbmRvd1N0YXJ0RGF0ZSxcbiAgICAgIHdpbmRvd0VuZERhdGUsXG4gICAgICBob3N0VGltZXpvbmUsXG4gICAgICBnbG9iYWxQcmltYXJ5Q2FsZW5kYXI/LmlkXG4gICAgKTtcblxuICAgIGJyZWFrcy5mb3JFYWNoKChiKSA9PiBjb25zb2xlLmxvZyhiLCAnIGdlbmVyYXRlZEJyZWFrcycpKTtcblxuICAgIGlmIChicmVha3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFsbEV2ZW50c1dpdGhEdXBsaWNhdGVGcmVlQnJlYWtzID0gXy5kaWZmZXJlbmNlQnkoXG4gICAgICAgIG1vZGlmaWVkQWxsSG9zdEV2ZW50cyxcbiAgICAgICAgYnJlYWtzLFxuICAgICAgICAnaWQnXG4gICAgICApO1xuICAgICAgbW9kaWZpZWRBbGxFdmVudHNXaXRoQnJlYWtzLnB1c2goLi4uYWxsRXZlbnRzV2l0aER1cGxpY2F0ZUZyZWVCcmVha3MpO1xuICAgICAgbW9kaWZpZWRBbGxFdmVudHNXaXRoQnJlYWtzLnB1c2goLi4uYnJlYWtzKTtcbiAgICAgIHBhcmVudEJyZWFrcy5wdXNoKC4uLmJyZWFrcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vZGlmaWVkQWxsRXZlbnRzV2l0aEJyZWFrcy5wdXNoKC4uLm1vZGlmaWVkQWxsSG9zdEV2ZW50cyk7XG4gICAgfVxuXG4gICAgY29uc3Qgd29ya1RpbWVzID0gZ2VuZXJhdGVXb3JrVGltZXNGb3JJbnRlcm5hbEF0dGVuZGVlKFxuICAgICAgbWFpbkhvc3RJZCxcbiAgICAgIG1haW5Ib3N0SWQsXG4gICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICBob3N0VGltZXpvbmUsXG4gICAgICBob3N0VGltZXpvbmVcbiAgICApO1xuICAgIGNvbnN0IHRpbWVzbG90cyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFydERhdGVzRm9yRWFjaERheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgY29uc3QgdGltZXNsb3RzRm9yRGF5ID0gYXdhaXQgZ2VuZXJhdGVUaW1lU2xvdHNMaXRlRm9ySW50ZXJuYWxBdHRlbmRlZShcbiAgICAgICAgICBzdGFydERhdGVzRm9yRWFjaERheT8uW2ldLFxuICAgICAgICAgIG1haW5Ib3N0SWQsXG4gICAgICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgICBob3N0VGltZXpvbmUsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgICB0aW1lc2xvdHMucHVzaCguLi50aW1lc2xvdHNGb3JEYXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRpbWVzbG90c0ZvckRheSA9IGF3YWl0IGdlbmVyYXRlVGltZVNsb3RzTGl0ZUZvckludGVybmFsQXR0ZW5kZWUoXG4gICAgICAgIHN0YXJ0RGF0ZXNGb3JFYWNoRGF5Py5baV0sXG4gICAgICAgIG1haW5Ib3N0SWQsXG4gICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgICBob3N0VGltZXpvbmUsXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgICAgdGltZXNsb3RzLnB1c2goLi4udGltZXNsb3RzRm9yRGF5KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2codGltZXNsb3RzLCAnIHRpbWVzbG90cycpO1xuXG4gICAgY29uc3QgZmlsdGVyZWRBbGxFdmVudHMgPSBfLnVuaXFCeShcbiAgICAgIG1vZGlmaWVkQWxsRXZlbnRzV2l0aEJyZWFrcy5maWx0ZXIoKGUpID0+XG4gICAgICAgIHZhbGlkYXRlRXZlbnREYXRlcyhlLCB1c2VyUHJlZmVyZW5jZXMpXG4gICAgICApLFxuICAgICAgJ2lkJ1xuICAgICk7XG4gICAgbGV0IGV2ZW50UGFydHM6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGVbXSA9IFtdO1xuXG4gICAgY29uc3QgZXZlbnRQYXJ0TWluaXNBY2N1bXVsYXRlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZmlsdGVyZWRBbGxFdmVudHMpIHtcbiAgICAgIGNvbnN0IGV2ZW50UGFydE1pbmlzID0gZ2VuZXJhdGVFdmVudFBhcnRzTGl0ZShldmVudCwgbWFpbkhvc3RJZCk7XG4gICAgICBldmVudFBhcnRNaW5pc0FjY3VtdWxhdGVkLnB1c2goLi4uZXZlbnRQYXJ0TWluaXMpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGlmaWVkRXZlbnRQYXJ0TWluaXNQcmVCdWZmZXIgPVxuICAgICAgbW9kaWZ5RXZlbnRQYXJ0c0Zvck11bHRpcGxlUHJlQnVmZmVyVGltZShldmVudFBhcnRNaW5pc0FjY3VtdWxhdGVkKTtcbiAgICBjb25zdCBtb2RpZmllZEV2ZW50UGFydE1pbmlzUHJlQW5kUG9zdEJ1ZmZlciA9XG4gICAgICBtb2RpZnlFdmVudFBhcnRzRm9yTXVsdGlwbGVQb3N0QnVmZmVyVGltZShcbiAgICAgICAgbW9kaWZpZWRFdmVudFBhcnRNaW5pc1ByZUJ1ZmZlclxuICAgICAgKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRFdmVudFBhcnRzOiBFdmVudFBhcnRQbGFubmVyUmVxdWVzdEJvZHlUeXBlW10gPVxuICAgICAgbW9kaWZpZWRFdmVudFBhcnRNaW5pc1ByZUFuZFBvc3RCdWZmZXIubWFwKChlKSA9PlxuICAgICAgICBmb3JtYXRFdmVudFR5cGVUb1BsYW5uZXJFdmVudChcbiAgICAgICAgICBlLFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgICB3b3JrVGltZXMsXG4gICAgICAgICAgaG9zdFRpbWV6b25lXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgaWYgKGZvcm1hdHRlZEV2ZW50UGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgZXZlbnRQYXJ0cy5wdXNoKC4uLmZvcm1hdHRlZEV2ZW50UGFydHMpO1xuICAgIH1cblxuICAgIGlmIChldmVudFBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGV2ZW50UGFydHMuZm9yRWFjaCgoZSkgPT4gY29uc29sZS5sb2coZSwgJyBldmVudFBhcnRzIGFmdGVyIGZvcm1hdHRpbmcnKSk7XG4gICAgICBjb25zdCBuZXdFdmVudFBhcnRzV2l0aFByZWZlcnJlZFRpbWVTZXQgPSBldmVudFBhcnRzLm1hcCgoZSkgPT5cbiAgICAgICAgc2V0UHJlZmVycmVkVGltZUZvclVuTW9kaWZpYWJsZUV2ZW50KFxuICAgICAgICAgIGUsXG4gICAgICAgICAgYWxsSG9zdEV2ZW50cy5maW5kKChmKSA9PiBmLmlkID09PSBlLmV2ZW50SWQpPy50aW1lem9uZVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0LmZvckVhY2goKGUpID0+XG4gICAgICAgIGNvbnNvbGUubG9nKGUsICcgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0JylcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdFdmVudFBhcnRzID0gYXdhaXQgdGFnRXZlbnRzRm9yRGFpbHlPcldlZWtseVRhc2soXG4gICAgICAgIG5ld0V2ZW50UGFydHNXaXRoUHJlZmVycmVkVGltZVNldFxuICAgICAgKTtcbiAgICAgIG5ld0V2ZW50UGFydHMuZm9yRWFjaCgoZSkgPT5cbiAgICAgICAgY29uc29sZS5sb2coZSwgJyBuZXdFdmVudFBhcnRzIGFmdGVyIHRhZ0V2ZW50c0ZvckRhaWx5T3JXZWVrbHlUYXNrJylcbiAgICAgICk7XG4gICAgICBjb25zdCB1c2VyUGxhbm5lclJlcXVlc3RCb2R5ID0gZ2VuZXJhdGVVc2VyUGxhbm5lclJlcXVlc3RCb2R5KFxuICAgICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgIHVzZXJQcmVmZXJlbmNlcy51c2VySWQsXG4gICAgICAgIHdvcmtUaW1lcyxcbiAgICAgICAgbWFpbkhvc3RJZFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJQbGFubmVyUmVxdWVzdEJvZHksICcgdXNlclBsYW5uZXJSZXF1ZXN0Qm9keScpO1xuXG4gICAgICBjb25zdCBtb2RpZmllZE5ld0V2ZW50UGFydHM6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGVbXSA9XG4gICAgICAgIG5ld0V2ZW50UGFydHMubWFwKChldmVudFBhcnQpID0+IHtcbiAgICAgICAgICBjb25zdCBvbGRFdmVudCA9IGZpbHRlcmVkQWxsRXZlbnRzLmZpbmQoXG4gICAgICAgICAgICAoZXZlbnQpID0+IGV2ZW50LmlkID09PSBldmVudFBhcnQuZXZlbnRJZFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdyb3VwSWQ6IGV2ZW50UGFydD8uZ3JvdXBJZCxcbiAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50UGFydD8uZXZlbnRJZCxcbiAgICAgICAgICAgIHBhcnQ6IGV2ZW50UGFydD8ucGFydCxcbiAgICAgICAgICAgIGxhc3RQYXJ0OiBldmVudFBhcnQ/Lmxhc3RQYXJ0LFxuICAgICAgICAgICAgbWVldGluZ0lkOiBldmVudFBhcnQ/Lm1lZXRpbmdJZCxcbiAgICAgICAgICAgIGhvc3RJZDogbWFpbkhvc3RJZCxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogZGF5anMoZXZlbnRQYXJ0Py5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC5mb3JtYXQoKSxcbiAgICAgICAgICAgIGVuZERhdGU6IGRheWpzKGV2ZW50UGFydD8uZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihvbGRFdmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgICAgICAgdXNlcklkOiBldmVudFBhcnQ/LnVzZXJJZCxcbiAgICAgICAgICAgIHVzZXI6IGV2ZW50UGFydD8udXNlcixcbiAgICAgICAgICAgIHByaW9yaXR5OiBldmVudFBhcnQ/LnByaW9yaXR5LFxuICAgICAgICAgICAgaXNQcmVFdmVudDogZXZlbnRQYXJ0Py5pc1ByZUV2ZW50LFxuICAgICAgICAgICAgaXNQb3N0RXZlbnQ6IGV2ZW50UGFydD8uaXNQb3N0RXZlbnQsXG4gICAgICAgICAgICBwb3NpdGl2ZUltcGFjdFNjb3JlOiBldmVudFBhcnQ/LnBvc2l0aXZlSW1wYWN0U2NvcmUsXG4gICAgICAgICAgICBuZWdhdGl2ZUltcGFjdFNjb3JlOiBldmVudFBhcnQ/Lm5lZ2F0aXZlSW1wYWN0U2NvcmUsXG4gICAgICAgICAgICBtb2RpZmlhYmxlOiBldmVudFBhcnQ/Lm1vZGlmaWFibGUsXG4gICAgICAgICAgICBpc01lZXRpbmc6IGV2ZW50UGFydD8uaXNNZWV0aW5nLFxuICAgICAgICAgICAgaXNFeHRlcm5hbE1lZXRpbmc6IGV2ZW50UGFydD8uaXNFeHRlcm5hbE1lZXRpbmcsXG4gICAgICAgICAgICBpc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGU6IGV2ZW50UGFydD8uaXNFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlLFxuICAgICAgICAgICAgaXNNZWV0aW5nTW9kaWZpYWJsZTogZXZlbnRQYXJ0Py5pc01lZXRpbmdNb2RpZmlhYmxlLFxuICAgICAgICAgICAgZGFpbHlUYXNrTGlzdDogZXZlbnRQYXJ0Py5kYWlseVRhc2tMaXN0LFxuICAgICAgICAgICAgd2Vla2x5VGFza0xpc3Q6IGV2ZW50UGFydD8ud2Vla2x5VGFza0xpc3QsXG4gICAgICAgICAgICBnYXA6IGV2ZW50UGFydD8uZ2FwLFxuICAgICAgICAgICAgdG90YWxXb3JraW5nSG91cnM6IGV2ZW50UGFydD8udG90YWxXb3JraW5nSG91cnMsXG4gICAgICAgICAgICBoYXJkRGVhZGxpbmU6IGV2ZW50UGFydD8uaGFyZERlYWRsaW5lLFxuICAgICAgICAgICAgc29mdERlYWRsaW5lOiBldmVudFBhcnQ/LnNvZnREZWFkbGluZSxcbiAgICAgICAgICAgIGZvckV2ZW50SWQ6IGV2ZW50UGFydD8uZm9yRXZlbnRJZCxcbiAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0RGF5T2ZXZWVrOiBldmVudFBhcnQ/LnBvc2l0aXZlSW1wYWN0RGF5T2ZXZWVrLFxuICAgICAgICAgICAgcG9zaXRpdmVJbXBhY3RUaW1lOiBldmVudFBhcnQ/LnBvc2l0aXZlSW1wYWN0VGltZSxcbiAgICAgICAgICAgIG5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrOiBldmVudFBhcnQ/Lm5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrLFxuICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3RUaW1lOiBldmVudFBhcnQ/Lm5lZ2F0aXZlSW1wYWN0VGltZSxcbiAgICAgICAgICAgIHByZWZlcnJlZERheU9mV2VlazogZXZlbnRQYXJ0Py5wcmVmZXJyZWREYXlPZldlZWssXG4gICAgICAgICAgICBwcmVmZXJyZWRUaW1lOiBldmVudFBhcnQ/LnByZWZlcnJlZFRpbWUsXG4gICAgICAgICAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZTogZXZlbnRQYXJ0Py5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICAgICAgICAgIHByZWZlcnJlZEVuZFRpbWVSYW5nZTogZXZlbnRQYXJ0Py5wcmVmZXJyZWRFbmRUaW1lUmFuZ2UsXG4gICAgICAgICAgICBldmVudDogZXZlbnRQYXJ0Py5ldmVudCxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIG1vZGlmaWVkTmV3RXZlbnRQYXJ0cz8ubGVuZ3RoID4gMFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHVzZXJJZDogbWFpbkhvc3RJZCxcbiAgICAgICAgICAgIGhvc3RJZDogbWFpbkhvc3RJZCxcbiAgICAgICAgICAgIGV2ZW50UGFydHM6IG1vZGlmaWVkTmV3RXZlbnRQYXJ0cyxcbiAgICAgICAgICAgIGFsbEV2ZW50czogZmlsdGVyZWRBbGxFdmVudHMsXG4gICAgICAgICAgICBicmVha3M6IHBhcmVudEJyZWFrcyxcbiAgICAgICAgICAgIG9sZEV2ZW50czogb2xkSG9zdEV2ZW50cyxcbiAgICAgICAgICAgIHRpbWVzbG90cyxcbiAgICAgICAgICAgIHVzZXJQbGFubmVyUmVxdWVzdEJvZHksXG4gICAgICAgICAgICBuZXdIb3N0UmVtaW5kZXJzLFxuICAgICAgICAgICAgbmV3SG9zdEJ1ZmZlclRpbWVzLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZSxcbiAgICAgICcgdW5hYmxlIHRvIHByb2Nlc3MgZXZlbnRzIGZvciBvcHRhcGxhbm5lciBmb3IgaG9zdCBhdHRlbmRlZSdcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0V2ZW50c0Zvck9wdGFQbGFubmVyRm9ySW50ZXJuYWxBdHRlbmRlZXMgPSBhc3luYyAoXG4gIG1haW5Ib3N0SWQ6IHN0cmluZyxcbiAgYWxsRXZlbnRzOiBFdmVudFBsdXNUeXBlW10sXG4gIHdpbmRvd1N0YXJ0RGF0ZTogc3RyaW5nLFxuICB3aW5kb3dFbmREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICBpbnRlcm5hbEF0dGVuZGVlczogTWVldGluZ0Fzc2lzdEF0dGVuZGVlVHlwZVtdLFxuICBvbGRFdmVudHM6IEV2ZW50VHlwZVtdLFxuICBvbGRNZWV0aW5nRXZlbnRzOiBFdmVudE1lZXRpbmdQbHVzVHlwZVtdLFxuICBuZXdIb3N0UmVtaW5kZXJzPzogUmVtaW5kZXJzRm9yRXZlbnRUeXBlW10sXG4gIG5ld0hvc3RCdWZmZXJUaW1lcz86IEJ1ZmZlclRpbWVPYmplY3RUeXBlW11cbik6IFByb21pc2U8UmV0dXJuQm9keUZvckF0dGVuZGVlRm9yT3B0YXBsYW5uZXJQcmVwVHlwZT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5ld0J1ZmZlclRpbWVBcnJheTogRXZlbnRQbHVzVHlwZVtdID0gW107XG4gICAgbmV3SG9zdEJ1ZmZlclRpbWVzPy5mb3JFYWNoKChuZXdIb3N0QnVmZmVyVGltZSkgPT4ge1xuICAgICAgaWYgKG5ld0hvc3RCdWZmZXJUaW1lPy5iZWZvcmVFdmVudD8uaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgbmV3SG9zdEJ1ZmZlclRpbWU/LmJlZm9yZUV2ZW50LFxuICAgICAgICAgICcgbmV3VGltZUJsb2NraW5nPy5iZWZvcmVFdmVudCdcbiAgICAgICAgKTtcbiAgICAgICAgbmV3QnVmZmVyVGltZUFycmF5LnB1c2gobmV3SG9zdEJ1ZmZlclRpbWUuYmVmb3JlRXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3SG9zdEJ1ZmZlclRpbWU/LmFmdGVyRXZlbnQ/LmlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIG5ld0hvc3RCdWZmZXJUaW1lPy5hZnRlckV2ZW50LFxuICAgICAgICAgICcgbmV3VGltZUJsb2NraW5nPy5hZnRlckV2ZW50J1xuICAgICAgICApO1xuICAgICAgICBuZXdCdWZmZXJUaW1lQXJyYXkucHVzaChuZXdIb3N0QnVmZmVyVGltZS5hZnRlckV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGZpbHRlcmVkT2xkTWVldGluZ0V2ZW50cyA9IG9sZE1lZXRpbmdFdmVudHNcbiAgICAgID8ubWFwKChtKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSBhbGxFdmVudHM/LmZpbmRJbmRleCgoYSkgPT4gYT8uaWQgPT09IG0/LmlkKTtcblxuICAgICAgICBpZiAoZm91bmRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG07XG4gICAgICB9KVxuICAgICAgPy5maWx0ZXIoKGUpID0+IGUgIT09IG51bGwpO1xuXG4gICAgY29uc3QgbW9kaWZpZWRBbGxFdmVudHMgPSBfLmNsb25lRGVlcChhbGxFdmVudHMpO1xuXG4gICAgaWYgKGZpbHRlcmVkT2xkTWVldGluZ0V2ZW50cz8uWzBdPy5pZCkge1xuICAgICAgbW9kaWZpZWRBbGxFdmVudHMucHVzaChcbiAgICAgICAgLi4uZmlsdGVyZWRPbGRNZWV0aW5nRXZlbnRzPy5tYXAoKGEpID0+XG4gICAgICAgICAgY29udmVydE1lZXRpbmdQbHVzVHlwZVRvRXZlbnRQbHVzVHlwZShhKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIG1vZGlmaWVkQWxsRXZlbnRzLnB1c2goLi4ubmV3QnVmZmVyVGltZUFycmF5KTtcblxuICAgIGNvbnN0IHVuZmlsdGVyZWRVc2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlVHlwZVtdID0gW107XG4gICAgZm9yIChjb25zdCBpbnRlcm5hbEF0dGVuZGVlIG9mIGludGVybmFsQXR0ZW5kZWVzKSB7XG4gICAgICBjb25zdCB1c2VyUHJlZmVyZW5jZSA9IGF3YWl0IGdldFVzZXJQcmVmZXJlbmNlcyhpbnRlcm5hbEF0dGVuZGVlPy51c2VySWQpO1xuICAgICAgdW5maWx0ZXJlZFVzZXJQcmVmZXJlbmNlcy5wdXNoKHVzZXJQcmVmZXJlbmNlKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlVHlwZVtdID0gXy51bmlxV2l0aChcbiAgICAgIHVuZmlsdGVyZWRVc2VyUHJlZmVyZW5jZXMsXG4gICAgICBfLmlzRXF1YWxcbiAgICApO1xuXG4gICAgY29uc3QgdW5maWx0ZXJlZEdsb2JhbFByaW1hcnlDYWxlbmRhcnM6IENhbGVuZGFyVHlwZVtdID0gW107XG4gICAgZm9yIChjb25zdCBpbnRlcm5hbEF0dGVuZGVlIG9mIGludGVybmFsQXR0ZW5kZWVzKSB7XG4gICAgICBjb25zdCBnbG9iYWxQcmltYXJ5Q2FsZW5kYXIgPSBhd2FpdCBnZXRHbG9iYWxDYWxlbmRhcihcbiAgICAgICAgaW50ZXJuYWxBdHRlbmRlZT8udXNlcklkXG4gICAgICApO1xuICAgICAgdW5maWx0ZXJlZEdsb2JhbFByaW1hcnlDYWxlbmRhcnMucHVzaChnbG9iYWxQcmltYXJ5Q2FsZW5kYXIpO1xuICAgIH1cblxuICAgIGNvbnN0IGdsb2JhbFByaW1hcnlDYWxlbmRhcnMgPSBfLnVuaXFXaXRoKFxuICAgICAgdW5maWx0ZXJlZEdsb2JhbFByaW1hcnlDYWxlbmRhcnMsXG4gICAgICBfLmlzRXF1YWxcbiAgICApO1xuXG4gICAgY29uc3QgbW9kaWZpZWRBbGxFdmVudHNXaXRoQnJlYWtzOiBFdmVudFBsdXNUeXBlW10gPSBbXTtcblxuICAgIGxldCBwYXJlbnRCcmVha3M6IEV2ZW50UGx1c1R5cGVbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgdXNlclByZWZlcmVuY2Ugb2YgdXNlclByZWZlcmVuY2VzKSB7XG4gICAgICBjb25zdCBnbG9iYWxQcmltYXJ5Q2FsZW5kYXIgPSBnbG9iYWxQcmltYXJ5Q2FsZW5kYXJzLmZpbmQoXG4gICAgICAgIChnKSA9PiBnPy51c2VySWQgPT09IHVzZXJQcmVmZXJlbmNlPy51c2VySWRcbiAgICAgICk7XG4gICAgICBpZiAoIWdsb2JhbFByaW1hcnlDYWxlbmRhcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGdsb2JhbCBwcmltYXJ5IGNhbGVuZGFyIGZvdW5kJyk7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyUHJlZmVyZW5jZT8udXNlcklkO1xuXG4gICAgICBjb25zdCBicmVha3MgPSBhd2FpdCBnZW5lcmF0ZUJyZWFrRXZlbnRzRm9yRGF0ZShcbiAgICAgICAgdXNlclByZWZlcmVuY2UsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgd2luZG93U3RhcnREYXRlLFxuICAgICAgICB3aW5kb3dFbmREYXRlLFxuICAgICAgICBob3N0VGltZXpvbmUsXG4gICAgICAgIGdsb2JhbFByaW1hcnlDYWxlbmRhcj8uaWRcbiAgICAgICk7XG5cbiAgICAgIGJyZWFrcy5mb3JFYWNoKChiKSA9PiBjb25zb2xlLmxvZyhiLCAnIGdlbmVyYXRlZEJyZWFrcycpKTtcblxuICAgICAgaWYgKGJyZWFrcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBhbGxFdmVudHNXaXRoRHVwbGljYXRlRnJlZUJyZWFrcyA9IF8uZGlmZmVyZW5jZUJ5KFxuICAgICAgICAgIG1vZGlmaWVkQWxsRXZlbnRzLFxuICAgICAgICAgIGJyZWFrcyxcbiAgICAgICAgICAnaWQnXG4gICAgICAgICk7XG4gICAgICAgIG1vZGlmaWVkQWxsRXZlbnRzV2l0aEJyZWFrcy5wdXNoKC4uLmFsbEV2ZW50c1dpdGhEdXBsaWNhdGVGcmVlQnJlYWtzKTtcbiAgICAgICAgbW9kaWZpZWRBbGxFdmVudHNXaXRoQnJlYWtzLnB1c2goLi4uYnJlYWtzKTtcbiAgICAgICAgcGFyZW50QnJlYWtzLnB1c2goLi4uYnJlYWtzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGlmaWVkQWxsRXZlbnRzV2l0aEJyZWFrcy5wdXNoKC4uLm1vZGlmaWVkQWxsRXZlbnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkaWZmRGF5cyA9IGRheWpzKHdpbmRvd0VuZERhdGUuc2xpY2UoMCwgMTkpKS5kaWZmKFxuICAgICAgZGF5anMod2luZG93U3RhcnREYXRlLnNsaWNlKDAsIDE5KSksXG4gICAgICAnZGF5J1xuICAgICk7XG4gICAgY29uc3Qgc3RhcnREYXRlc0ZvckVhY2hEYXkgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGRpZmZEYXlzOyBpKyspIHtcbiAgICAgIHN0YXJ0RGF0ZXNGb3JFYWNoRGF5LnB1c2goXG4gICAgICAgIGRheWpzKHdpbmRvd1N0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuYWRkKGksICdkYXknKVxuICAgICAgICAgIC5mb3JtYXQoKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB1bmZpbHRlcmVkV29ya1RpbWVzOiBXb3JrVGltZVR5cGVbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgaW50ZXJuYWxBdHRlbmRlZSBvZiBpbnRlcm5hbEF0dGVuZGVlcykge1xuICAgICAgY29uc3QgdXNlclByZWZlcmVuY2UgPSB1c2VyUHJlZmVyZW5jZXMuZmluZChcbiAgICAgICAgKHUpID0+IHUudXNlcklkID09PSBpbnRlcm5hbEF0dGVuZGVlLnVzZXJJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGF0dGVuZGVlVGltZXpvbmUgPSBpbnRlcm5hbEF0dGVuZGVlPy50aW1lem9uZTtcbiAgICAgIGNvbnN0IHdvcmtUaW1lc0ZvckF0dGVuZGVlID0gZ2VuZXJhdGVXb3JrVGltZXNGb3JJbnRlcm5hbEF0dGVuZGVlKFxuICAgICAgICBtYWluSG9zdElkLFxuICAgICAgICBpbnRlcm5hbEF0dGVuZGVlLnVzZXJJZCxcbiAgICAgICAgdXNlclByZWZlcmVuY2UsXG4gICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgYXR0ZW5kZWVUaW1lem9uZVxuICAgICAgKTtcbiAgICAgIHVuZmlsdGVyZWRXb3JrVGltZXMucHVzaCguLi53b3JrVGltZXNGb3JBdHRlbmRlZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgd29ya1RpbWVzOiBXb3JrVGltZVR5cGVbXSA9IF8udW5pcVdpdGgoXG4gICAgICB1bmZpbHRlcmVkV29ya1RpbWVzLFxuICAgICAgXy5pc0VxdWFsXG4gICAgKTtcblxuICAgIGNvbnN0IHVuZmlsdGVyZWRUaW1lc2xvdHMgPSBbXTtcbiAgICBjb25zdCB0aW1lc2xvdHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnREYXRlc0ZvckVhY2hEYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgaW50ZXJuYWxBdHRlbmRlZSBvZiBpbnRlcm5hbEF0dGVuZGVlcykge1xuICAgICAgICAgIGNvbnN0IHVzZXJQcmVmZXJlbmNlID0gdXNlclByZWZlcmVuY2VzLmZpbmQoXG4gICAgICAgICAgICAodSkgPT4gdS51c2VySWQgPT09IGludGVybmFsQXR0ZW5kZWUudXNlcklkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCB0aW1lc2xvdHNGb3JEYXkgPVxuICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdGVUaW1lU2xvdHNMaXRlRm9ySW50ZXJuYWxBdHRlbmRlZShcbiAgICAgICAgICAgICAgc3RhcnREYXRlc0ZvckVhY2hEYXk/LltpXSxcbiAgICAgICAgICAgICAgbWFpbkhvc3RJZCxcbiAgICAgICAgICAgICAgdXNlclByZWZlcmVuY2UsXG4gICAgICAgICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgICAgICAgaW50ZXJuYWxBdHRlbmRlZT8udGltZXpvbmUsXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgdW5maWx0ZXJlZFRpbWVzbG90cy5wdXNoKC4uLnRpbWVzbG90c0ZvckRheSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGludGVybmFsQXR0ZW5kZWUgb2YgaW50ZXJuYWxBdHRlbmRlZXMpIHtcbiAgICAgICAgY29uc3QgdXNlclByZWZlcmVuY2UgPSB1c2VyUHJlZmVyZW5jZXMuZmluZChcbiAgICAgICAgICAodSkgPT4gdS51c2VySWQgPT09IGludGVybmFsQXR0ZW5kZWUudXNlcklkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRpbWVzbG90c0ZvckRheSA9IGF3YWl0IGdlbmVyYXRlVGltZVNsb3RzTGl0ZUZvckludGVybmFsQXR0ZW5kZWUoXG4gICAgICAgICAgc3RhcnREYXRlc0ZvckVhY2hEYXk/LltpXSxcbiAgICAgICAgICBtYWluSG9zdElkLFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlLFxuICAgICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgICBpbnRlcm5hbEF0dGVuZGVlPy50aW1lem9uZSxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICB1bmZpbHRlcmVkVGltZXNsb3RzLnB1c2goLi4udGltZXNsb3RzRm9yRGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aW1lc2xvdHMucHVzaCguLi5fLnVuaXFXaXRoKHVuZmlsdGVyZWRUaW1lc2xvdHMsIF8uaXNFcXVhbCkpO1xuICAgIGNvbnNvbGUubG9nKHRpbWVzbG90cywgJ2lzTWFjaGluZVBybyB0aW1lc2xvdHMnKTtcblxuICAgIGNvbnN0IHVuZmlsdGVyZWRBbGxFdmVudHM6IEV2ZW50UGx1c1R5cGVbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgaW50ZXJuYWxBdHRlbmRlZSBvZiBpbnRlcm5hbEF0dGVuZGVlcykge1xuICAgICAgY29uc3QgdXNlclByZWZlcmVuY2UgPSB1c2VyUHJlZmVyZW5jZXMuZmluZChcbiAgICAgICAgKHUpID0+IHUudXNlcklkID09PSBpbnRlcm5hbEF0dGVuZGVlLnVzZXJJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1vZGlmaWVkQWxsRXZlbnRzV2l0aEJyZWFrc1dpdGhVc2VyID1cbiAgICAgICAgbW9kaWZpZWRBbGxFdmVudHNXaXRoQnJlYWtzLmZpbHRlcihcbiAgICAgICAgICAoZSkgPT4gZS51c2VySWQgPT09IGludGVybmFsQXR0ZW5kZWUudXNlcklkXG4gICAgICAgICk7XG4gICAgICBjb25zdCBldmVudHMgPSBtb2RpZmllZEFsbEV2ZW50c1dpdGhCcmVha3NXaXRoVXNlci5maWx0ZXIoKGUpID0+XG4gICAgICAgIHZhbGlkYXRlRXZlbnREYXRlcyhlLCB1c2VyUHJlZmVyZW5jZSlcbiAgICAgICk7XG4gICAgICB1bmZpbHRlcmVkQWxsRXZlbnRzLnB1c2goLi4uZXZlbnRzKTtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVyZWRBbGxFdmVudHMgPSBfLnVuaXFCeSh1bmZpbHRlcmVkQWxsRXZlbnRzLCAnaWQnKTtcbiAgICBsZXQgZXZlbnRQYXJ0czogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID0gW107XG5cbiAgICBjb25zdCBldmVudFBhcnRNaW5pc0FjY3VtdWxhdGVkID0gW107XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBmaWx0ZXJlZEFsbEV2ZW50cykge1xuICAgICAgY29uc3QgZXZlbnRQYXJ0TWluaXMgPSBnZW5lcmF0ZUV2ZW50UGFydHNMaXRlKGV2ZW50LCBtYWluSG9zdElkKTtcbiAgICAgIGV2ZW50UGFydE1pbmlzQWNjdW11bGF0ZWQucHVzaCguLi5ldmVudFBhcnRNaW5pcyk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kaWZpZWRFdmVudFBhcnRNaW5pc1ByZUJ1ZmZlciA9XG4gICAgICBtb2RpZnlFdmVudFBhcnRzRm9yTXVsdGlwbGVQcmVCdWZmZXJUaW1lKGV2ZW50UGFydE1pbmlzQWNjdW11bGF0ZWQpO1xuICAgIGNvbnN0IG1vZGlmaWVkRXZlbnRQYXJ0TWluaXNQcmVBbmRQb3N0QnVmZmVyID1cbiAgICAgIG1vZGlmeUV2ZW50UGFydHNGb3JNdWx0aXBsZVBvc3RCdWZmZXJUaW1lKFxuICAgICAgICBtb2RpZmllZEV2ZW50UGFydE1pbmlzUHJlQnVmZmVyXG4gICAgICApO1xuICAgIGNvbnN0IGZvcm1hdHRlZEV2ZW50UGFydHM6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGVbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgdXNlclByZWZlcmVuY2Ugb2YgdXNlclByZWZlcmVuY2VzKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRFdmVudFBhcnRzRm9yVXNlcjogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID1cbiAgICAgICAgbW9kaWZpZWRFdmVudFBhcnRNaW5pc1ByZUFuZFBvc3RCdWZmZXJcbiAgICAgICAgICAuZmlsdGVyKChlKSA9PiBlPy51c2VySWQgPT09IHVzZXJQcmVmZXJlbmNlPy51c2VySWQpXG4gICAgICAgICAgLm1hcCgoZSkgPT5cbiAgICAgICAgICAgIGZvcm1hdEV2ZW50VHlwZVRvUGxhbm5lckV2ZW50KFxuICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICB1c2VyUHJlZmVyZW5jZSxcbiAgICAgICAgICAgICAgd29ya1RpbWVzLFxuICAgICAgICAgICAgICBob3N0VGltZXpvbmVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgZm9ybWF0dGVkRXZlbnRQYXJ0cy5wdXNoKC4uLmZvcm1hdHRlZEV2ZW50UGFydHNGb3JVc2VyKTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0dGVkRXZlbnRQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICBldmVudFBhcnRzLnB1c2goLi4uXy51bmlxV2l0aChmb3JtYXR0ZWRFdmVudFBhcnRzLCBfLmlzRXF1YWwpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnRQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICBldmVudFBhcnRzLmZvckVhY2goKGUpID0+IGNvbnNvbGUubG9nKGUsICcgZXZlbnRQYXJ0cyBhZnRlciBmb3JtYXR0aW5nJykpO1xuICAgICAgY29uc3QgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0ID0gZXZlbnRQYXJ0cy5tYXAoKGUpID0+XG4gICAgICAgIHNldFByZWZlcnJlZFRpbWVGb3JVbk1vZGlmaWFibGVFdmVudChcbiAgICAgICAgICBlLFxuICAgICAgICAgIGFsbEV2ZW50cy5maW5kKChmKSA9PiBmLmlkID09PSBlLmV2ZW50SWQpPy50aW1lem9uZVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0LmZvckVhY2goKGUpID0+XG4gICAgICAgIGNvbnNvbGUubG9nKGUsICcgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0JylcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdFdmVudFBhcnRzID0gYXdhaXQgdGFnRXZlbnRzRm9yRGFpbHlPcldlZWtseVRhc2soXG4gICAgICAgIG5ld0V2ZW50UGFydHNXaXRoUHJlZmVycmVkVGltZVNldFxuICAgICAgKTtcbiAgICAgIG5ld0V2ZW50UGFydHMuZm9yRWFjaCgoZSkgPT5cbiAgICAgICAgY29uc29sZS5sb2coZSwgJyBuZXdFdmVudFBhcnRzIGFmdGVyIHRhZ0V2ZW50c0ZvckRhaWx5T3JXZWVrbHlUYXNrJylcbiAgICAgICk7XG4gICAgICBjb25zdCB1bmZpbHRlcmVkVXNlckxpc3Q6IFVzZXJQbGFubmVyUmVxdWVzdEJvZHlUeXBlW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgdXNlclByZWZlcmVuY2Ugb2YgdXNlclByZWZlcmVuY2VzKSB7XG4gICAgICAgIGNvbnN0IHVzZXJQbGFubmVyUmVxdWVzdEJvZHkgPSBnZW5lcmF0ZVVzZXJQbGFubmVyUmVxdWVzdEJvZHkoXG4gICAgICAgICAgdXNlclByZWZlcmVuY2UsXG4gICAgICAgICAgdXNlclByZWZlcmVuY2U/LnVzZXJJZCxcbiAgICAgICAgICB3b3JrVGltZXMsXG4gICAgICAgICAgbWFpbkhvc3RJZFxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VyUGxhbm5lclJlcXVlc3RCb2R5LCAnIHVzZXJQbGFubmVyUmVxdWVzdEJvZHknKTtcbiAgICAgICAgdW5maWx0ZXJlZFVzZXJMaXN0LnB1c2godXNlclBsYW5uZXJSZXF1ZXN0Qm9keSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJMaXN0OiBVc2VyUGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID0gXy51bmlxV2l0aChcbiAgICAgICAgdW5maWx0ZXJlZFVzZXJMaXN0LFxuICAgICAgICBfLmlzRXF1YWxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG1vZGlmaWVkTmV3RXZlbnRQYXJ0czogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID1cbiAgICAgICAgbmV3RXZlbnRQYXJ0cy5tYXAoKGV2ZW50UGFydCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9sZEV2ZW50ID0gZmlsdGVyZWRBbGxFdmVudHMuZmluZChcbiAgICAgICAgICAgIChldmVudCkgPT4gZXZlbnQuaWQgPT09IGV2ZW50UGFydC5ldmVudElkXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ3JvdXBJZDogZXZlbnRQYXJ0Py5ncm91cElkLFxuICAgICAgICAgICAgZXZlbnRJZDogZXZlbnRQYXJ0Py5ldmVudElkLFxuICAgICAgICAgICAgcGFydDogZXZlbnRQYXJ0Py5wYXJ0LFxuICAgICAgICAgICAgbGFzdFBhcnQ6IGV2ZW50UGFydD8ubGFzdFBhcnQsXG4gICAgICAgICAgICBtZWV0aW5nSWQ6IGV2ZW50UGFydD8ubWVldGluZ0lkLFxuICAgICAgICAgICAgaG9zdElkOiBtYWluSG9zdElkLFxuICAgICAgICAgICAgc3RhcnREYXRlOiBkYXlqcyhldmVudFBhcnQ/LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihvbGRFdmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgICAgICAgZW5kRGF0ZTogZGF5anMoZXZlbnRQYXJ0Py5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAuZm9ybWF0KCksXG4gICAgICAgICAgICB1c2VySWQ6IGV2ZW50UGFydD8udXNlcklkLFxuICAgICAgICAgICAgdXNlcjogZXZlbnRQYXJ0Py51c2VyLFxuICAgICAgICAgICAgcHJpb3JpdHk6IGV2ZW50UGFydD8ucHJpb3JpdHksXG4gICAgICAgICAgICBpc1ByZUV2ZW50OiBldmVudFBhcnQ/LmlzUHJlRXZlbnQsXG4gICAgICAgICAgICBpc1Bvc3RFdmVudDogZXZlbnRQYXJ0Py5pc1Bvc3RFdmVudCxcbiAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0U2NvcmU6IGV2ZW50UGFydD8ucG9zaXRpdmVJbXBhY3RTY29yZSxcbiAgICAgICAgICAgIG5lZ2F0aXZlSW1wYWN0U2NvcmU6IGV2ZW50UGFydD8ubmVnYXRpdmVJbXBhY3RTY29yZSxcbiAgICAgICAgICAgIG1vZGlmaWFibGU6IGV2ZW50UGFydD8ubW9kaWZpYWJsZSxcbiAgICAgICAgICAgIGlzTWVldGluZzogZXZlbnRQYXJ0Py5pc01lZXRpbmcsXG4gICAgICAgICAgICBpc0V4dGVybmFsTWVldGluZzogZXZlbnRQYXJ0Py5pc0V4dGVybmFsTWVldGluZyxcbiAgICAgICAgICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZTogZXZlbnRQYXJ0Py5pc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGUsXG4gICAgICAgICAgICBpc01lZXRpbmdNb2RpZmlhYmxlOiBldmVudFBhcnQ/LmlzTWVldGluZ01vZGlmaWFibGUsXG4gICAgICAgICAgICBkYWlseVRhc2tMaXN0OiBldmVudFBhcnQ/LmRhaWx5VGFza0xpc3QsXG4gICAgICAgICAgICB3ZWVrbHlUYXNrTGlzdDogZXZlbnRQYXJ0Py53ZWVrbHlUYXNrTGlzdCxcbiAgICAgICAgICAgIGdhcDogZXZlbnRQYXJ0Py5nYXAsXG4gICAgICAgICAgICB0b3RhbFdvcmtpbmdIb3VyczogZXZlbnRQYXJ0Py50b3RhbFdvcmtpbmdIb3VycyxcbiAgICAgICAgICAgIGhhcmREZWFkbGluZTogZXZlbnRQYXJ0Py5oYXJkRGVhZGxpbmUsXG4gICAgICAgICAgICBzb2Z0RGVhZGxpbmU6IGV2ZW50UGFydD8uc29mdERlYWRsaW5lLFxuICAgICAgICAgICAgZm9yRXZlbnRJZDogZXZlbnRQYXJ0Py5mb3JFdmVudElkLFxuICAgICAgICAgICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWs6IGV2ZW50UGFydD8ucG9zaXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgICAgICAgICBwb3NpdGl2ZUltcGFjdFRpbWU6IGV2ZW50UGFydD8ucG9zaXRpdmVJbXBhY3RUaW1lLFxuICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWs6IGV2ZW50UGFydD8ubmVnYXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgICAgICAgICBuZWdhdGl2ZUltcGFjdFRpbWU6IGV2ZW50UGFydD8ubmVnYXRpdmVJbXBhY3RUaW1lLFxuICAgICAgICAgICAgcHJlZmVycmVkRGF5T2ZXZWVrOiBldmVudFBhcnQ/LnByZWZlcnJlZERheU9mV2VlayxcbiAgICAgICAgICAgIHByZWZlcnJlZFRpbWU6IGV2ZW50UGFydD8ucHJlZmVycmVkVGltZSxcbiAgICAgICAgICAgIHByZWZlcnJlZFN0YXJ0VGltZVJhbmdlOiBldmVudFBhcnQ/LnByZWZlcnJlZFN0YXJ0VGltZVJhbmdlLFxuICAgICAgICAgICAgcHJlZmVycmVkRW5kVGltZVJhbmdlOiBldmVudFBhcnQ/LnByZWZlcnJlZEVuZFRpbWVSYW5nZSxcbiAgICAgICAgICAgIGV2ZW50OiBldmVudFBhcnQ/LmV2ZW50LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbW9kaWZpZWROZXdFdmVudFBhcnRzPy5sZW5ndGggPiAwXG4gICAgICAgID8ge1xuICAgICAgICAgICAgdXNlcklkczogaW50ZXJuYWxBdHRlbmRlZXMubWFwKChhKSA9PiBhLnVzZXJJZCksXG4gICAgICAgICAgICBob3N0SWQ6IG1haW5Ib3N0SWQsXG4gICAgICAgICAgICBldmVudFBhcnRzOiBtb2RpZmllZE5ld0V2ZW50UGFydHMsXG4gICAgICAgICAgICBhbGxFdmVudHM6IGZpbHRlcmVkQWxsRXZlbnRzLFxuICAgICAgICAgICAgb2xkRXZlbnRzLFxuICAgICAgICAgICAgdGltZXNsb3RzLFxuICAgICAgICAgICAgdXNlckxpc3QsXG4gICAgICAgICAgICBuZXdIb3N0UmVtaW5kZXJzLFxuICAgICAgICAgICAgbmV3SG9zdEJ1ZmZlclRpbWVzLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZSxcbiAgICAgICcgdW5hYmxlIHRvIHByb2Nlc3MgZXZlbnRzIGZvciBvcHRhcGxhbm5lciBmb3IgZWFjaCBhdHRlbmRlZSdcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY29udmVydE1lZXRpbmdBc3Npc3RFdmVudFR5cGVUb0V2ZW50UGx1c1R5cGUgPSAoXG4gIGV2ZW50OiBNZWV0aW5nQXNzaXN0RXZlbnRUeXBlLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogRXZlbnRQbHVzVHlwZSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGV2ZW50Py5pZCxcbiAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICB0aXRsZTogZXZlbnQ/LnN1bW1hcnksXG4gICAgc3RhcnREYXRlOiBldmVudD8uc3RhcnREYXRlLFxuICAgIGVuZERhdGU6IGV2ZW50Py5lbmREYXRlLFxuICAgIGFsbERheTogZXZlbnQ/LmFsbERheSxcbiAgICByZWN1cnJlbmNlUnVsZTogZXZlbnQ/LnJlY3VycmVuY2VSdWxlLFxuICAgIGxvY2F0aW9uOiBldmVudD8ubG9jYXRpb24sXG4gICAgbm90ZXM6IGV2ZW50Py5ub3RlcyxcbiAgICBhdHRhY2htZW50czogZXZlbnQ/LmF0dGFjaG1lbnRzLFxuICAgIGxpbmtzOiBldmVudD8ubGlua3MsXG4gICAgdGltZXpvbmU6IGV2ZW50Py50aW1lem9uZSxcbiAgICBjcmVhdGVkRGF0ZTogZXZlbnQ/LmNyZWF0ZWREYXRlLFxuICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgIHByaW9yaXR5OiAxLFxuICAgIGlzRm9sbG93VXA6IGZhbHNlLFxuICAgIGlzUHJlRXZlbnQ6IGZhbHNlLFxuICAgIGlzUG9zdEV2ZW50OiBmYWxzZSxcbiAgICBtb2RpZmlhYmxlOiBmYWxzZSxcbiAgICBhbnlvbmVDYW5BZGRTZWxmOiB0cnVlLFxuICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogdHJ1ZSxcbiAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0czogdHJ1ZSxcbiAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLFxuICAgIG9yaWdpbmFsQWxsRGF5OiB1bmRlZmluZWQsXG4gICAgc3VtbWFyeTogZXZlbnQ/LnN1bW1hcnksXG4gICAgdHJhbnNwYXJlbmN5OiBldmVudD8udHJhbnNwYXJlbmN5LFxuICAgIHZpc2liaWxpdHk6IGV2ZW50Py52aXNpYmlsaXR5LFxuICAgIHJlY3VycmluZ0V2ZW50SWQ6IGV2ZW50Py5yZWN1cnJpbmdFdmVudElkLFxuICAgIHVwZGF0ZWRBdDogZXZlbnQ/LnVwZGF0ZWRBdCxcbiAgICBpQ2FsVUlEOiBldmVudD8uaUNhbFVJRCxcbiAgICBodG1sTGluazogZXZlbnQ/Lmh0bWxMaW5rLFxuICAgIGNvbG9ySWQ6IGV2ZW50Py5jb2xvcklkLFxuICAgIGNyZWF0b3I6IGV2ZW50Py5jcmVhdG9yLFxuICAgIG9yZ2FuaXplcjogZXZlbnQ/Lm9yZ2FuaXplcixcbiAgICBlbmRUaW1lVW5zcGVjaWZpZWQ6IGV2ZW50Py5lbmRUaW1lVW5zcGVjaWZpZWQsXG4gICAgcmVjdXJyZW5jZTogZXZlbnQ/LnJlY3VycmVuY2UsXG4gICAgb3JpZ2luYWxUaW1lem9uZTogZXZlbnQ/LnRpbWV6b25lLFxuICAgIGV4dGVuZGVkUHJvcGVydGllczogZXZlbnQ/LmV4dGVuZGVkUHJvcGVydGllcyxcbiAgICBoYW5nb3V0TGluazogZXZlbnQ/LmhhbmdvdXRMaW5rLFxuICAgIGd1ZXN0c0Nhbk1vZGlmeTogZXZlbnQ/Lmd1ZXN0c0Nhbk1vZGlmeSxcbiAgICBsb2NrZWQ6IGV2ZW50Py5sb2NrZWQsXG4gICAgc291cmNlOiBldmVudD8uc291cmNlLFxuICAgIGV2ZW50VHlwZTogZXZlbnQ/LmV2ZW50VHlwZSxcbiAgICBwcml2YXRlQ29weTogZXZlbnQ/LnByaXZhdGVDb3B5LFxuICAgIGNhbGVuZGFySWQ6IGV2ZW50Py5jYWxlbmRhcklkLFxuICAgIGJhY2tncm91bmRDb2xvcjogZXZlbnQ/LmJhY2tncm91bmRDb2xvcixcbiAgICBmb3JlZ3JvdW5kQ29sb3I6IGV2ZW50Py5mb3JlZ3JvdW5kQ29sb3IsXG4gICAgdXNlRGVmYXVsdEFsYXJtczogZXZlbnQ/LnVzZURlZmF1bHRBbGFybXMsXG4gICAgbWVldGluZ0lkOiBldmVudD8ubWVldGluZ0lkLFxuICAgIGV2ZW50SWQ6IGV2ZW50Py5ldmVudElkLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlV29ya1RpbWVzRm9yRXh0ZXJuYWxBdHRlbmRlZSA9IChcbiAgaG9zdElkOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBhdHRlbmRlZUV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBob3N0VGltZXpvbmU6IHN0cmluZyxcbiAgdXNlclRpbWV6b25lOiBzdHJpbmdcbikgPT4ge1xuICBjb25zdCBkYXlzSW5XZWVrID0gNztcblxuICBjb25zdCB3b3JrVGltZXM6IFdvcmtUaW1lVHlwZVtdID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXlzSW5XZWVrOyBpKyspIHtcbiAgICBjb25zdCBkYXlPZldlZWtJbnQgPSBpICsgMTtcblxuICAgIGNvbnN0IHNhbWVEYXlFdmVudHMgPSBhdHRlbmRlZUV2ZW50cy5maWx0ZXIoXG4gICAgICAoZSkgPT5cbiAgICAgICAgZ2V0SVNPRGF5KFxuICAgICAgICAgIGRheWpzKGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAudG9EYXRlKClcbiAgICAgICAgKSA9PT1cbiAgICAgICAgaSArIDFcbiAgICApO1xuICAgIGNvbnN0IG1pblN0YXJ0RGF0ZSA9IF8ubWluQnkoc2FtZURheUV2ZW50cywgKGUpID0+XG4gICAgICBkYXlqcyhlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLnVuaXgoKVxuICAgICk7XG4gICAgY29uc3QgbWF4RW5kRGF0ZSA9IF8ubWF4Qnkoc2FtZURheUV2ZW50cywgKGUpID0+XG4gICAgICBkYXlqcyhlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC51bml4KClcbiAgICApO1xuICAgIGNvbnN0IHN0YXJ0SG91ciA9IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBzdGFydE1pbnV0ZSA9IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKDApLFxuICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoobWluU3RhcnREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgICAnbWludXRlJyxcbiAgICAgICAgJ1spJ1xuICAgICAgKVxuICAgICAgPyAwXG4gICAgICA6IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAxNVxuICAgICAgICA6IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgICAgLm1pbnV0ZSg0NSksXG4gICAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgPyAzMFxuICAgICAgICAgIDogNDU7XG5cbiAgICBsZXQgZW5kSG91ciA9IGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHoobWF4RW5kRGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBlbmRNaW51dGUgPSBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1heEVuZERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KG1heEVuZERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgLm1pbnV0ZSgwKSxcbiAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoobWF4RW5kRGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICdbKSdcbiAgICAgIClcbiAgICAgID8gMTVcbiAgICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICAgKVxuICAgICAgICA/IDMwXG4gICAgICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1heEVuZERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgICAubWludXRlKDQ1KSxcbiAgICAgICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICAgICAnWyknXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICA/IDQ1XG4gICAgICAgICAgOiAwO1xuICAgIGlmIChlbmRNaW51dGUgPT09IDApIHtcbiAgICAgIGlmIChlbmRIb3VyIDwgMjMpIHtcbiAgICAgICAgZW5kSG91ciArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdvcmtUaW1lcy5wdXNoKHtcbiAgICAgIGRheU9mV2VlazogZGF5T2ZXZWVrSW50VG9TdHJpbmdbZGF5T2ZXZWVrSW50XSxcbiAgICAgIHN0YXJ0VGltZTogZGF5anMoXG4gICAgICAgIHNldElTT0RheShcbiAgICAgICAgICBkYXlqcygpXG4gICAgICAgICAgICAuaG91cihzdGFydEhvdXIpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50b0RhdGUoKSxcbiAgICAgICAgICBpICsgMVxuICAgICAgICApXG4gICAgICApXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgIGVuZFRpbWU6IGRheWpzKFxuICAgICAgICBzZXRJU09EYXkoXG4gICAgICAgICAgZGF5anMoKVxuICAgICAgICAgICAgLmhvdXIoZW5kSG91cilcbiAgICAgICAgICAgIC5taW51dGUoZW5kTWludXRlKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50b0RhdGUoKSxcbiAgICAgICAgICBpICsgMVxuICAgICAgICApXG4gICAgICApXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgIGhvc3RJZCxcbiAgICAgIHVzZXJJZCxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB3b3JrVGltZXM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUaW1lU2xvdHNGb3JFeHRlcm5hbEF0dGVuZGVlID0gKFxuICBob3N0U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RJZDogc3RyaW5nLFxuICBhdHRlbmRlZUV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBob3N0VGltZXpvbmU6IHN0cmluZyxcbiAgdXNlclRpbWV6b25lOiBzdHJpbmcsXG4gIGlzRmlyc3REYXk/OiBib29sZWFuXG4pID0+IHtcbiAgaWYgKGlzRmlyc3REYXkpIHtcbiAgICBjb25zdCBkYXlPZldlZWtJbnRCeUhvc3QgPSBnZXRJU09EYXkoXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICAgICk7XG4gICAgY29uc3QgbW9udGhCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAubW9udGgoKTtcbiAgICBjb25zdCBkYXlPZk1vbnRoQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgLmRhdGUoKTtcbiAgICBjb25zdCBzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS5taW51dGUoMCksXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLm1pbnV0ZSgxNSksXG4gICAgICAgICdtaW51dGUnLFxuICAgICAgICAnWyknXG4gICAgICApXG4gICAgICA/IDBcbiAgICAgIDogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAxNVxuICAgICAgICA6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC5taW51dGUoNDUpLFxuICAgICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgID8gMzBcbiAgICAgICAgICA6IDQ1O1xuXG4gICAgY29uc3Qgc2FtZURheUV2ZW50cyA9IGF0dGVuZGVlRXZlbnRzLmZpbHRlcihcbiAgICAgIChlKSA9PlxuICAgICAgICBnZXRJU09EYXkoXG4gICAgICAgICAgZGF5anMoZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAudG9EYXRlKClcbiAgICAgICAgKSA9PT0gZGF5T2ZXZWVrSW50QnlIb3N0XG4gICAgKTtcbiAgICBjb25zdCBtYXhFbmREYXRlID0gXy5tYXhCeShzYW1lRGF5RXZlbnRzLCAoZSkgPT5cbiAgICAgIGRheWpzKGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eih1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC51bml4KClcbiAgICApO1xuXG4gICAgbGV0IHdvcmtFbmRIb3VyQnlIb3N0ID0gZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuaG91cigpO1xuICAgIGNvbnN0IHdvcmtFbmRNaW51dGVCeUhvc3QgPSBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1heEVuZERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KG1heEVuZERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgLm1pbnV0ZSgwKSxcbiAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoobWF4RW5kRGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICdbKSdcbiAgICAgIClcbiAgICAgID8gMTVcbiAgICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICAgKVxuICAgICAgICA/IDMwXG4gICAgICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1heEVuZERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgICAubWludXRlKDQ1KSxcbiAgICAgICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICAgICAnWyknXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICA/IDQ1XG4gICAgICAgICAgOiAwO1xuICAgIGlmICh3b3JrRW5kTWludXRlQnlIb3N0ID09PSAwKSB7XG4gICAgICBpZiAod29ya0VuZEhvdXJCeUhvc3QgPCAyMykge1xuICAgICAgICB3b3JrRW5kSG91ckJ5SG9zdCArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG1pblN0YXJ0RGF0ZSA9IF8ubWluQnkoc2FtZURheUV2ZW50cywgKGUpID0+XG4gICAgICBkYXlqcyhlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eih1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC51bml4KClcbiAgICApO1xuXG4gICAgY29uc3Qgd29ya1N0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCB3b3JrU3RhcnRNaW51dGVCeUhvc3QgPSBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgLm1pbnV0ZSgwKSxcbiAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICdbKSdcbiAgICAgIClcbiAgICAgID8gMFxuICAgICAgOiBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSgxNSksXG4gICAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAnWyknXG4gICAgICAgICAgICApXG4gICAgICAgID8gMTVcbiAgICAgICAgOiBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgICAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGUudGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAgIC5taW51dGUoNDUpLFxuICAgICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgID8gMzBcbiAgICAgICAgICA6IDQ1O1xuXG4gICAgaWYgKFxuICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5pc0JlZm9yZShcbiAgICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cih3b3JrU3RhcnRIb3VyQnlIb3N0KVxuICAgICAgICAgICAgLm1pbnV0ZSh3b3JrU3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIClcbiAgICApIHtcbiAgICAgIGNvbnN0IHN0YXJ0RHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgICAgIGhvdXJzOiB3b3JrU3RhcnRIb3VyQnlIb3N0LFxuICAgICAgICBtaW51dGVzOiB3b3JrU3RhcnRNaW51dGVCeUhvc3QsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGVuZER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgICBob3Vyczogd29ya0VuZEhvdXJCeUhvc3QsXG4gICAgICAgIG1pbnV0ZXM6IHdvcmtFbmRNaW51dGVCeUhvc3QsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBlbmREdXJhdGlvbi5zdWJ0cmFjdChzdGFydER1cmF0aW9uKTtcbiAgICAgIGNvbnN0IHRvdGFsTWludXRlcyA9IHRvdGFsRHVyYXRpb24uYXNNaW51dGVzKCk7XG5cbiAgICAgIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGhvc3RTdGFydERhdGUsXG4gICAgICAgIGRheU9mV2Vla0ludEJ5SG9zdCxcbiAgICAgICAgZGF5T2ZNb250aEJ5SG9zdCxcbiAgICAgICAgc3RhcnRIb3VyT2ZIb3N0RGF0ZUJ5SG9zdCxcbiAgICAgICAgc3RhcnRNaW51dGVPZkhvc3REYXRlQnlIb3N0LFxuICAgICAgICB3b3JrRW5kSG91ckJ5SG9zdCxcbiAgICAgICAgd29ya0VuZE1pbnV0ZUJ5SG9zdCxcbiAgICAgICAgdGltZXpvbmUsXG4gICAgICAgIGBzdGFydERhdGUsICBkYXlPZldlZWtJbnRCeUhvc3QsIGRheU9mTW9udGhCeUhvc3QsIHN0YXJ0SG91ckJ5SG9zdCwgc3RhcnRNaW51dGVCeUhvc3QsIGVuZEhvdXJCeUhvc3QsIGVuZE1pbnV0ZUJ5SG9zdCB0b3RhbE1pbnV0ZXMsIHRpbWV6b25lLCBpbnNpZGUgZmlyc3REYXkgaW5zaWRlIGdlbmVyYXRlVGltZXNsb3RzYFxuICAgICAgKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxNaW51dGVzOyBpICs9IDE1KSB7XG4gICAgICAgIHRpbWVTbG90cy5wdXNoKHtcbiAgICAgICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludEJ5SG9zdF0sXG4gICAgICAgICAgc3RhcnRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAuaG91cihzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0KVxuICAgICAgICAgICAgLm1pbnV0ZShzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QpXG4gICAgICAgICAgICAuYWRkKGksICdtaW51dGUnKVxuICAgICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICAgIGVuZFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ck9mSG9zdERhdGVCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlT2ZIb3N0RGF0ZUJ5SG9zdClcbiAgICAgICAgICAgIC5hZGQoaSArIDE1LCAnbWludXRlJylcbiAgICAgICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgICAgICBob3N0SWQsXG4gICAgICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgICAgICBtb250aEJ5SG9zdCBhcyBNb250aFR5cGUsXG4gICAgICAgICAgICBkYXlPZk1vbnRoQnlIb3N0IGFzIERheVR5cGVcbiAgICAgICAgICApLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICB0aW1lU2xvdHMsXG4gICAgICAgICcgdGltZVNsb3RzIGluc2lkZSBnZW5lcmF0ZVRpbWVTbG90cyBmb3IgZmlyc3QgZGF5IHdoZXJlIHN0YXJ0RGF0ZSBpcyBiZWZvcmUgd29yayBzdGFydCB0aW1lJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiB0aW1lU2xvdHM7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnREdXJhdGlvbiA9IGRheWpzLmR1cmF0aW9uKHtcbiAgICAgIGhvdXJzOiBzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0LFxuICAgICAgbWludXRlczogc3RhcnRNaW51dGVPZkhvc3REYXRlQnlIb3N0LFxuICAgIH0pO1xuICAgIGNvbnN0IGVuZER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgaG91cnM6IHdvcmtFbmRIb3VyQnlIb3N0LFxuICAgICAgbWludXRlczogd29ya0VuZE1pbnV0ZUJ5SG9zdCxcbiAgICB9KTtcbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gZW5kRHVyYXRpb24uc3VidHJhY3Qoc3RhcnREdXJhdGlvbik7XG4gICAgY29uc3QgdG90YWxNaW51dGVzID0gdG90YWxEdXJhdGlvbi5hc01pbnV0ZXMoKTtcblxuICAgIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGhvc3RTdGFydERhdGUsXG4gICAgICBkYXlPZldlZWtJbnRCeUhvc3QsXG4gICAgICBkYXlPZk1vbnRoQnlIb3N0LFxuICAgICAgc3RhcnRIb3VyT2ZIb3N0RGF0ZUJ5SG9zdCxcbiAgICAgIHN0YXJ0TWludXRlT2ZIb3N0RGF0ZUJ5SG9zdCxcbiAgICAgIHdvcmtFbmRIb3VyQnlIb3N0LFxuICAgICAgd29ya0VuZE1pbnV0ZUJ5SG9zdCxcbiAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgIGBzdGFydERhdGUsICBkYXlPZldlZWtJbnRCeUhvc3QsIGRheU9mTW9udGgsIHN0YXJ0SG91ciwgc3RhcnRNaW51dGUsIGVuZEhvdXIsIGVuZE1pbnV0ZSB0b3RhbE1pbnV0ZXMsIHRpbWV6b25lLCBpbnNpZGUgZmlyc3REYXkgaW5zaWRlIGdlbmVyYXRlVGltZXNsb3RzYFxuICAgICk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbE1pbnV0ZXM7IGkgKz0gMTUpIHtcbiAgICAgIHRpbWVTbG90cy5wdXNoKHtcbiAgICAgICAgZGF5T2ZXZWVrOiBkYXlPZldlZWtJbnRUb1N0cmluZ1tkYXlPZldlZWtJbnRCeUhvc3RdLFxuICAgICAgICBzdGFydFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmhvdXIoc3RhcnRIb3VyT2ZIb3N0RGF0ZUJ5SG9zdClcbiAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlT2ZIb3N0RGF0ZUJ5SG9zdClcbiAgICAgICAgICAuYWRkKGksICdtaW51dGUnKVxuICAgICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgICAgZW5kVGltZTogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuaG91cihzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0KVxuICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVPZkhvc3REYXRlQnlIb3N0KVxuICAgICAgICAgIC5hZGQoaSArIDE1LCAnbWludXRlJylcbiAgICAgICAgICAuZm9ybWF0KCdISDptbScpIGFzIFRpbWUsXG4gICAgICAgIGhvc3RJZCxcbiAgICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgICAgbW9udGhCeUhvc3QgYXMgTW9udGhUeXBlLFxuICAgICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2codGltZVNsb3RzLCAnIHRpbWVTbG90cyBpbnNpZGUgZ2VuZXJhdGVUaW1lU2xvdHMgZm9yIGZpcnN0IGRheScpO1xuICAgIHJldHVybiB0aW1lU2xvdHM7XG4gIH1cblxuICBjb25zdCBkYXlPZldlZWtJbnRCeUhvc3QgPSBnZXRJU09EYXkoXG4gICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSkudG9EYXRlKClcbiAgKTtcbiAgY29uc3QgbW9udGhCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgIC5tb250aCgpO1xuICBjb25zdCBkYXlPZk1vbnRoQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAuZGF0ZSgpO1xuXG4gIGNvbnN0IHNhbWVEYXlFdmVudHMgPSBhdHRlbmRlZUV2ZW50cy5maWx0ZXIoXG4gICAgKGUpID0+XG4gICAgICBnZXRJU09EYXkoXG4gICAgICAgIGRheWpzKGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAudG9EYXRlKClcbiAgICAgICkgPT09IGRheU9mV2Vla0ludEJ5SG9zdFxuICApO1xuICBjb25zdCBtaW5TdGFydERhdGUgPSBfLm1pbkJ5KHNhbWVEYXlFdmVudHMsIChlKSA9PlxuICAgIGRheWpzKGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihlLnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAudW5peCgpXG4gICk7XG4gIGNvbnN0IG1heEVuZERhdGUgPSBfLm1heEJ5KHNhbWVEYXlFdmVudHMsIChlKSA9PlxuICAgIGRheWpzKGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooZS50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLnVuaXgoKVxuICApO1xuXG4gIGxldCB3b3JrRW5kSG91ckJ5SG9zdCA9IGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAudHooaG9zdFRpbWV6b25lKVxuICAgIC5ob3VyKCk7XG4gIGNvbnN0IHdvcmtFbmRNaW51dGVCeUhvc3QgPSBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAuaXNCZXR3ZWVuKFxuICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLm1pbnV0ZSgwKSxcbiAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgJ21pbnV0ZScsXG4gICAgICAnWyknXG4gICAgKVxuICAgID8gMTVcbiAgICA6IGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAubWludXRlKDE1KSxcbiAgICAgICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAnWyknXG4gICAgICAgICAgKVxuICAgICAgPyAzMFxuICAgICAgOiBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSg0NSksXG4gICAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgICAnWyknXG4gICAgICAgICAgICApXG4gICAgICAgID8gNDVcbiAgICAgICAgOiAwO1xuICBpZiAod29ya0VuZE1pbnV0ZUJ5SG9zdCA9PT0gMCkge1xuICAgIGlmICh3b3JrRW5kSG91ckJ5SG9zdCA8IDIzKSB7XG4gICAgICB3b3JrRW5kSG91ckJ5SG9zdCArPSAxO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHdvcmtTdGFydEhvdXJCeUhvc3QgPSBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAuaG91cigpO1xuICBjb25zdCB3b3JrU3RhcnRNaW51dGVCeUhvc3QgPSBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAuaXNCZXR3ZWVuKFxuICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLm1pbnV0ZSgwKSxcbiAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgJ21pbnV0ZScsXG4gICAgICAnWyknXG4gICAgKVxuICAgID8gMFxuICAgIDogZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgIC5taW51dGUoMTUpLFxuICAgICAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICdbKSdcbiAgICAgICAgICApXG4gICAgICA/IDE1XG4gICAgICA6IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDQ1KSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAzMFxuICAgICAgICA6IDQ1O1xuXG4gIGNvbnNvbGUubG9nKFxuICAgIG1vbnRoQnlIb3N0LFxuICAgIGRheU9mTW9udGhCeUhvc3QsXG4gICAgd29ya1N0YXJ0SG91ckJ5SG9zdCxcbiAgICB3b3JrU3RhcnRNaW51dGVCeUhvc3QsXG4gICAgd29ya0VuZEhvdXJCeUhvc3QsXG4gICAgJyBtb250aEJ5SG9zdCwgZGF5T2ZNb250aEJ5SG9zdCwgd29ya1N0YXJ0SG91ckJ5SG9zdCwgd29ya1N0YXJ0TWludXRlQnlIb3N0LCB3b3JrRW5kSG91ckJ5SG9zdCdcbiAgKTtcbiAgY29uc3Qgc3RhcnREdXJhdGlvbiA9IGRheWpzLmR1cmF0aW9uKHtcbiAgICBob3Vyczogd29ya1N0YXJ0SG91ckJ5SG9zdCxcbiAgICBtaW51dGVzOiB3b3JrU3RhcnRNaW51dGVCeUhvc3QsXG4gIH0pO1xuICBjb25zdCBlbmREdXJhdGlvbiA9IGRheWpzLmR1cmF0aW9uKHtcbiAgICBob3Vyczogd29ya0VuZEhvdXJCeUhvc3QsXG4gICAgbWludXRlczogd29ya0VuZE1pbnV0ZUJ5SG9zdCxcbiAgfSk7XG4gIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBlbmREdXJhdGlvbi5zdWJ0cmFjdChzdGFydER1cmF0aW9uKTtcbiAgY29uc3QgdG90YWxNaW51dGVzID0gdG90YWxEdXJhdGlvbi5hc01pbnV0ZXMoKTtcbiAgY29uc3QgdGltZVNsb3RzOiBUaW1lU2xvdFR5cGVbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsTWludXRlczsgaSArPSAxNSkge1xuICAgIHRpbWVTbG90cy5wdXNoKHtcbiAgICAgIGRheU9mV2VlazogZGF5T2ZXZWVrSW50VG9TdHJpbmdbZGF5T2ZXZWVrSW50QnlIb3N0XSxcbiAgICAgIHN0YXJ0VGltZTogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5ob3VyKHdvcmtTdGFydEhvdXJCeUhvc3QpXG4gICAgICAgIC5taW51dGUod29ya1N0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAuYWRkKGksICdtaW51dGUnKVxuICAgICAgICAuZm9ybWF0KCdISDptbScpIGFzIFRpbWUsXG4gICAgICBlbmRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmhvdXIod29ya1N0YXJ0SG91ckJ5SG9zdClcbiAgICAgICAgLm1pbnV0ZSh3b3JrU3RhcnRNaW51dGVCeUhvc3QpXG4gICAgICAgIC5hZGQoaSArIDE1LCAnbWludXRlJylcbiAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgaG9zdElkLFxuICAgICAgbW9udGhEYXk6IGZvcm1hdFRvTW9udGhEYXkoXG4gICAgICAgIG1vbnRoQnlIb3N0IGFzIE1vbnRoVHlwZSxcbiAgICAgICAgZGF5T2ZNb250aEJ5SG9zdCBhcyBEYXlUeXBlXG4gICAgICApLFxuICAgIH0pO1xuICB9XG5cbiAgY29uc29sZS5sb2codGltZVNsb3RzLCAnIHRpbWVTbG90cyBpbnNpZGUgZ2VuZXJhdGVUaW1lU2xvdHMnKTtcbiAgcmV0dXJuIHRpbWVTbG90cztcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRpbWVTbG90c0xpdGVGb3JFeHRlcm5hbEF0dGVuZGVlID0gKFxuICBob3N0U3RhcnREYXRlOiBzdHJpbmcsXG4gIGhvc3RJZDogc3RyaW5nLFxuICBhdHRlbmRlZUV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBob3N0VGltZXpvbmU6IHN0cmluZyxcbiAgdXNlclRpbWV6b25lOiBzdHJpbmcsXG4gIGlzRmlyc3REYXk/OiBib29sZWFuXG4pID0+IHtcbiAgaWYgKGlzRmlyc3REYXkpIHtcbiAgICBjb25zdCBkYXlPZldlZWtJbnRCeUhvc3QgPSBnZXRJU09EYXkoXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICAgICk7XG4gICAgY29uc3QgbW9udGhCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAubW9udGgoKTtcbiAgICBjb25zdCBkYXlPZk1vbnRoQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgLmRhdGUoKTtcbiAgICBjb25zdCBzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0ID0gZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgLmhvdXIoKTtcbiAgICBjb25zdCBzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS5taW51dGUoMCksXG4gICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihob3N0VGltZXpvbmUsIHRydWUpLm1pbnV0ZSgzMCksXG4gICAgICAgICdtaW51dGUnLFxuICAgICAgICAnWyknXG4gICAgICApXG4gICAgICA/IDBcbiAgICAgIDogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgICAgICAgZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDU5KSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAzMFxuICAgICAgICA6IDA7XG5cbiAgICBjb25zdCBzYW1lRGF5RXZlbnRzID0gYXR0ZW5kZWVFdmVudHMuZmlsdGVyKFxuICAgICAgKGUpID0+XG4gICAgICAgIGdldElTT0RheShcbiAgICAgICAgICBkYXlqcyhlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgIC50b0RhdGUoKVxuICAgICAgICApID09PSBkYXlPZldlZWtJbnRCeUhvc3RcbiAgICApO1xuICAgIGNvbnN0IG1heEVuZERhdGUgPSBfLm1heEJ5KHNhbWVEYXlFdmVudHMsIChlKSA9PlxuICAgICAgZGF5anMoZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLnVuaXgoKVxuICAgICk7XG5cbiAgICBsZXQgd29ya0VuZEhvdXJCeUhvc3QgPSBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuaG91cigpO1xuICAgIGNvbnN0IHdvcmtFbmRNaW51dGVCeUhvc3QgPSBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKDApLFxuICAgICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAubWludXRlKDMwKSxcbiAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICdbKSdcbiAgICAgIClcbiAgICAgID8gMzBcbiAgICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoNTkpLFxuICAgICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgICAgKVxuICAgICAgICA/IDBcbiAgICAgICAgOiAzMDtcbiAgICBpZiAod29ya0VuZE1pbnV0ZUJ5SG9zdCA9PT0gMCkge1xuICAgICAgaWYgKHdvcmtFbmRIb3VyQnlIb3N0IDwgMjMpIHtcbiAgICAgICAgd29ya0VuZEhvdXJCeUhvc3QgKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtaW5TdGFydERhdGUgPSBfLm1pbkJ5KHNhbWVEYXlFdmVudHMsIChlKSA9PlxuICAgICAgZGF5anMoZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAudW5peCgpXG4gICAgKTtcblxuICAgIGNvbnN0IHdvcmtTdGFydEhvdXJCeUhvc3QgPSBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAuaG91cigpO1xuICAgIGNvbnN0IHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCA9IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgIC5taW51dGUoMCksXG4gICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAnbWludXRlJyxcbiAgICAgICAgJ1spJ1xuICAgICAgKVxuICAgICAgPyAwXG4gICAgICA6IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgIC5pc0JldHdlZW4oXG4gICAgICAgICAgICAgIGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgICAubWludXRlKDU5KSxcbiAgICAgICAgICAgICAgJ21pbnV0ZScsXG4gICAgICAgICAgICAgICdbKSdcbiAgICAgICAgICAgIClcbiAgICAgICAgPyAzMFxuICAgICAgICA6IDA7XG5cbiAgICBpZiAoXG4gICAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLmlzQmVmb3JlKFxuICAgICAgICAgIGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5ob3VyKHdvcmtTdGFydEhvdXJCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHdvcmtTdGFydE1pbnV0ZUJ5SG9zdClcbiAgICAgICAgKVxuICAgICkge1xuICAgICAgY29uc3Qgc3RhcnREdXJhdGlvbiA9IGRheWpzLmR1cmF0aW9uKHtcbiAgICAgICAgaG91cnM6IHdvcmtTdGFydEhvdXJCeUhvc3QsXG4gICAgICAgIG1pbnV0ZXM6IHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZW5kRHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgICAgIGhvdXJzOiB3b3JrRW5kSG91ckJ5SG9zdCxcbiAgICAgICAgbWludXRlczogd29ya0VuZE1pbnV0ZUJ5SG9zdCxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IGVuZER1cmF0aW9uLnN1YnRyYWN0KHN0YXJ0RHVyYXRpb24pO1xuICAgICAgY29uc3QgdG90YWxNaW51dGVzID0gdG90YWxEdXJhdGlvbi5hc01pbnV0ZXMoKTtcblxuICAgICAgY29uc3QgdGltZVNsb3RzOiBUaW1lU2xvdFR5cGVbXSA9IFtdO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgaG9zdFN0YXJ0RGF0ZSxcbiAgICAgICAgZGF5T2ZXZWVrSW50QnlIb3N0LFxuICAgICAgICBkYXlPZk1vbnRoQnlIb3N0LFxuICAgICAgICBzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0LFxuICAgICAgICBzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QsXG4gICAgICAgIHdvcmtFbmRIb3VyQnlIb3N0LFxuICAgICAgICB3b3JrRW5kTWludXRlQnlIb3N0LFxuICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgYHN0YXJ0RGF0ZSwgIGRheU9mV2Vla0ludEJ5SG9zdCwgZGF5T2ZNb250aEJ5SG9zdCwgc3RhcnRIb3VyQnlIb3N0LCBzdGFydE1pbnV0ZUJ5SG9zdCwgZW5kSG91ckJ5SG9zdCwgZW5kTWludXRlQnlIb3N0IHRvdGFsTWludXRlcywgdGltZXpvbmUsIGluc2lkZSBmaXJzdERheSBpbnNpZGUgZ2VuZXJhdGVUaW1lc2xvdHNgXG4gICAgICApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbE1pbnV0ZXM7IGkgKz0gMzApIHtcbiAgICAgICAgdGltZVNsb3RzLnB1c2goe1xuICAgICAgICAgIGRheU9mV2VlazogZGF5T2ZXZWVrSW50VG9TdHJpbmdbZGF5T2ZXZWVrSW50QnlIb3N0XSxcbiAgICAgICAgICBzdGFydFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ck9mSG9zdERhdGVCeUhvc3QpXG4gICAgICAgICAgICAubWludXRlKHN0YXJ0TWludXRlT2ZIb3N0RGF0ZUJ5SG9zdClcbiAgICAgICAgICAgIC5hZGQoaSwgJ21pbnV0ZScpXG4gICAgICAgICAgICAuZm9ybWF0KCdISDptbScpIGFzIFRpbWUsXG4gICAgICAgICAgZW5kVGltZTogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLmhvdXIoc3RhcnRIb3VyT2ZIb3N0RGF0ZUJ5SG9zdClcbiAgICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVPZkhvc3REYXRlQnlIb3N0KVxuICAgICAgICAgICAgLmFkZChpICsgMzAsICdtaW51dGUnKVxuICAgICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICAgIGhvc3RJZCxcbiAgICAgICAgICBtb250aERheTogZm9ybWF0VG9Nb250aERheShcbiAgICAgICAgICAgIG1vbnRoQnlIb3N0IGFzIE1vbnRoVHlwZSxcbiAgICAgICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgICAgICksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIHRpbWVTbG90cyxcbiAgICAgICAgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzIGZvciBmaXJzdCBkYXkgd2hlcmUgc3RhcnREYXRlIGlzIGJlZm9yZSB3b3JrIHN0YXJ0IHRpbWUnXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRpbWVTbG90cztcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydER1cmF0aW9uID0gZGF5anMuZHVyYXRpb24oe1xuICAgICAgaG91cnM6IHN0YXJ0SG91ck9mSG9zdERhdGVCeUhvc3QsXG4gICAgICBtaW51dGVzOiBzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QsXG4gICAgfSk7XG4gICAgY29uc3QgZW5kRHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgICBob3Vyczogd29ya0VuZEhvdXJCeUhvc3QsXG4gICAgICBtaW51dGVzOiB3b3JrRW5kTWludXRlQnlIb3N0LFxuICAgIH0pO1xuICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBlbmREdXJhdGlvbi5zdWJ0cmFjdChzdGFydER1cmF0aW9uKTtcbiAgICBjb25zdCB0b3RhbE1pbnV0ZXMgPSB0b3RhbER1cmF0aW9uLmFzTWludXRlcygpO1xuXG4gICAgY29uc3QgdGltZVNsb3RzOiBUaW1lU2xvdFR5cGVbXSA9IFtdO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgaG9zdFN0YXJ0RGF0ZSxcbiAgICAgIGRheU9mV2Vla0ludEJ5SG9zdCxcbiAgICAgIGRheU9mTW9udGhCeUhvc3QsXG4gICAgICBzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0LFxuICAgICAgc3RhcnRNaW51dGVPZkhvc3REYXRlQnlIb3N0LFxuICAgICAgd29ya0VuZEhvdXJCeUhvc3QsXG4gICAgICB3b3JrRW5kTWludXRlQnlIb3N0LFxuICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgYHN0YXJ0RGF0ZSwgIGRheU9mV2Vla0ludEJ5SG9zdCwgZGF5T2ZNb250aCwgc3RhcnRIb3VyLCBzdGFydE1pbnV0ZSwgZW5kSG91ciwgZW5kTWludXRlIHRvdGFsTWludXRlcywgdGltZXpvbmUsIGluc2lkZSBmaXJzdERheSBpbnNpZGUgZ2VuZXJhdGVUaW1lc2xvdHNgXG4gICAgKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsTWludXRlczsgaSArPSAzMCkge1xuICAgICAgdGltZVNsb3RzLnB1c2goe1xuICAgICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludEJ5SG9zdF0sXG4gICAgICAgIHN0YXJ0VGltZTogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuaG91cihzdGFydEhvdXJPZkhvc3REYXRlQnlIb3N0KVxuICAgICAgICAgIC5taW51dGUoc3RhcnRNaW51dGVPZkhvc3REYXRlQnlIb3N0KVxuICAgICAgICAgIC5hZGQoaSwgJ21pbnV0ZScpXG4gICAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgICBlbmRUaW1lOiBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5ob3VyKHN0YXJ0SG91ck9mSG9zdERhdGVCeUhvc3QpXG4gICAgICAgICAgLm1pbnV0ZShzdGFydE1pbnV0ZU9mSG9zdERhdGVCeUhvc3QpXG4gICAgICAgICAgLmFkZChpICsgMzAsICdtaW51dGUnKVxuICAgICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgICAgaG9zdElkLFxuICAgICAgICBtb250aERheTogZm9ybWF0VG9Nb250aERheShcbiAgICAgICAgICBtb250aEJ5SG9zdCBhcyBNb250aFR5cGUsXG4gICAgICAgICAgZGF5T2ZNb250aEJ5SG9zdCBhcyBEYXlUeXBlXG4gICAgICAgICksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyh0aW1lU2xvdHMsICcgdGltZVNsb3RzIGluc2lkZSBnZW5lcmF0ZVRpbWVTbG90cyBmb3IgZmlyc3QgZGF5Jyk7XG4gICAgcmV0dXJuIHRpbWVTbG90cztcbiAgfVxuXG4gIGNvbnN0IGRheU9mV2Vla0ludEJ5SG9zdCA9IGdldElTT0RheShcbiAgICBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooaG9zdFRpbWV6b25lLCB0cnVlKS50b0RhdGUoKVxuICApO1xuICBjb25zdCBtb250aEJ5SG9zdCA9IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgLm1vbnRoKCk7XG4gIGNvbnN0IGRheU9mTW9udGhCeUhvc3QgPSBkYXlqcyhob3N0U3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgIC5kYXRlKCk7XG5cbiAgY29uc3Qgc2FtZURheUV2ZW50cyA9IGF0dGVuZGVlRXZlbnRzLmZpbHRlcihcbiAgICAoZSkgPT5cbiAgICAgIGdldElTT0RheShcbiAgICAgICAgZGF5anMoZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eih1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAudG9EYXRlKClcbiAgICAgICkgPT09IGRheU9mV2Vla0ludEJ5SG9zdFxuICApO1xuICBjb25zdCBtaW5TdGFydERhdGUgPSBfLm1pbkJ5KHNhbWVEYXlFdmVudHMsIChlKSA9PlxuICAgIGRheWpzKGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eih1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgLnVuaXgoKVxuICApO1xuICBjb25zdCBtYXhFbmREYXRlID0gXy5tYXhCeShzYW1lRGF5RXZlbnRzLCAoZSkgPT5cbiAgICBkYXlqcyhlLmVuZERhdGUuc2xpY2UoMCwgMTkpKS50eih1c2VyVGltZXpvbmUsIHRydWUpLnR6KGhvc3RUaW1lem9uZSkudW5peCgpXG4gICk7XG5cbiAgbGV0IHdvcmtFbmRIb3VyQnlIb3N0ID0gZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgLmhvdXIoKTtcbiAgY29uc3Qgd29ya0VuZE1pbnV0ZUJ5SG9zdCA9IGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAudHooaG9zdFRpbWV6b25lKVxuICAgIC5pc0JldHdlZW4oXG4gICAgICBkYXlqcyhtYXhFbmREYXRlLmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAubWludXRlKDApLFxuICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAnbWludXRlJyxcbiAgICAgICdbKSdcbiAgICApXG4gICAgPyAzMFxuICAgIDogZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoobWF4RW5kRGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgLmlzQmV0d2VlbihcbiAgICAgICAgICAgIGRheWpzKG1heEVuZERhdGUuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihtYXhFbmREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgIC5taW51dGUoMzApLFxuICAgICAgICAgICAgZGF5anMobWF4RW5kRGF0ZS5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1heEVuZERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLm1pbnV0ZSg1OSksXG4gICAgICAgICAgICAnbWludXRlJyxcbiAgICAgICAgICAgICdbKSdcbiAgICAgICAgICApXG4gICAgICA/IDBcbiAgICAgIDogMzA7XG4gIGlmICh3b3JrRW5kTWludXRlQnlIb3N0ID09PSAwKSB7XG4gICAgaWYgKHdvcmtFbmRIb3VyQnlIb3N0IDwgMjMpIHtcbiAgICAgIHdvcmtFbmRIb3VyQnlIb3N0ICs9IDE7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgd29ya1N0YXJ0SG91ckJ5SG9zdCA9IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAudHooaG9zdFRpbWV6b25lKVxuICAgIC5ob3VyKCk7XG4gIGNvbnN0IHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCA9IGRheWpzKG1pblN0YXJ0RGF0ZS5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAudHooaG9zdFRpbWV6b25lKVxuICAgIC5pc0JldHdlZW4oXG4gICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAubWludXRlKDApLFxuICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAnbWludXRlJyxcbiAgICAgICdbKSdcbiAgICApXG4gICAgPyAwXG4gICAgOiBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoobWluU3RhcnREYXRlPy50aW1lem9uZSB8fCB1c2VyVGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAuaXNCZXR3ZWVuKFxuICAgICAgICAgICAgZGF5anMobWluU3RhcnREYXRlLnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihtaW5TdGFydERhdGU/LnRpbWV6b25lIHx8IHVzZXJUaW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLm1pbnV0ZSgzMCksXG4gICAgICAgICAgICBkYXlqcyhtaW5TdGFydERhdGUuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgICAgLnR6KG1pblN0YXJ0RGF0ZT8udGltZXpvbmUgfHwgdXNlclRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooaG9zdFRpbWV6b25lKVxuICAgICAgICAgICAgICAubWludXRlKDU5KSxcbiAgICAgICAgICAgICdtaW51dGUnLFxuICAgICAgICAgICAgJ1spJ1xuICAgICAgICAgIClcbiAgICAgID8gMzBcbiAgICAgIDogMDtcblxuICBjb25zb2xlLmxvZyhcbiAgICBtb250aEJ5SG9zdCxcbiAgICBkYXlPZk1vbnRoQnlIb3N0LFxuICAgIHdvcmtTdGFydEhvdXJCeUhvc3QsXG4gICAgd29ya1N0YXJ0TWludXRlQnlIb3N0LFxuICAgIHdvcmtFbmRIb3VyQnlIb3N0LFxuICAgICcgbW9udGhCeUhvc3QsIGRheU9mTW9udGhCeUhvc3QsIHdvcmtTdGFydEhvdXJCeUhvc3QsIHdvcmtTdGFydE1pbnV0ZUJ5SG9zdCwgd29ya0VuZEhvdXJCeUhvc3QnXG4gICk7XG4gIGNvbnN0IHN0YXJ0RHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgaG91cnM6IHdvcmtTdGFydEhvdXJCeUhvc3QsXG4gICAgbWludXRlczogd29ya1N0YXJ0TWludXRlQnlIb3N0LFxuICB9KTtcbiAgY29uc3QgZW5kRHVyYXRpb24gPSBkYXlqcy5kdXJhdGlvbih7XG4gICAgaG91cnM6IHdvcmtFbmRIb3VyQnlIb3N0LFxuICAgIG1pbnV0ZXM6IHdvcmtFbmRNaW51dGVCeUhvc3QsXG4gIH0pO1xuICBjb25zdCB0b3RhbER1cmF0aW9uID0gZW5kRHVyYXRpb24uc3VidHJhY3Qoc3RhcnREdXJhdGlvbik7XG4gIGNvbnN0IHRvdGFsTWludXRlcyA9IHRvdGFsRHVyYXRpb24uYXNNaW51dGVzKCk7XG4gIGNvbnN0IHRpbWVTbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbE1pbnV0ZXM7IGkgKz0gMzApIHtcbiAgICB0aW1lU2xvdHMucHVzaCh7XG4gICAgICBkYXlPZldlZWs6IGRheU9mV2Vla0ludFRvU3RyaW5nW2RheU9mV2Vla0ludEJ5SG9zdF0sXG4gICAgICBzdGFydFRpbWU6IGRheWpzKGhvc3RTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHooaG9zdFRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuaG91cih3b3JrU3RhcnRIb3VyQnlIb3N0KVxuICAgICAgICAubWludXRlKHdvcmtTdGFydE1pbnV0ZUJ5SG9zdClcbiAgICAgICAgLmFkZChpLCAnbWludXRlJylcbiAgICAgICAgLmZvcm1hdCgnSEg6bW0nKSBhcyBUaW1lLFxuICAgICAgZW5kVGltZTogZGF5anMoaG9zdFN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5ob3VyKHdvcmtTdGFydEhvdXJCeUhvc3QpXG4gICAgICAgIC5taW51dGUod29ya1N0YXJ0TWludXRlQnlIb3N0KVxuICAgICAgICAuYWRkKGkgKyAzMCwgJ21pbnV0ZScpXG4gICAgICAgIC5mb3JtYXQoJ0hIOm1tJykgYXMgVGltZSxcbiAgICAgIGhvc3RJZCxcbiAgICAgIG1vbnRoRGF5OiBmb3JtYXRUb01vbnRoRGF5KFxuICAgICAgICBtb250aEJ5SG9zdCBhcyBNb250aFR5cGUsXG4gICAgICAgIGRheU9mTW9udGhCeUhvc3QgYXMgRGF5VHlwZVxuICAgICAgKSxcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKHRpbWVTbG90cywgJyB0aW1lU2xvdHMgaW5zaWRlIGdlbmVyYXRlVGltZVNsb3RzJyk7XG4gIHJldHVybiB0aW1lU2xvdHM7XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0V2ZW50c0Zvck9wdGFQbGFubmVyRm9yRXh0ZXJuYWxBdHRlbmRlZXMgPSBhc3luYyAoXG4gIHVzZXJJZHM6IHN0cmluZ1tdLFxuICBtYWluSG9zdElkOiBzdHJpbmcsXG4gIGFsbEV4dGVybmFsRXZlbnRzOiBNZWV0aW5nQXNzaXN0RXZlbnRUeXBlW10sXG4gIHdpbmRvd1N0YXJ0RGF0ZTogc3RyaW5nLFxuICB3aW5kb3dFbmREYXRlOiBzdHJpbmcsXG4gIGhvc3RUaW1lem9uZTogc3RyaW5nLFxuICBleHRlcm5hbEF0dGVuZGVlczogTWVldGluZ0Fzc2lzdEF0dGVuZGVlVHlwZVtdLFxuICBvbGRFeHRlcm5hbE1lZXRpbmdFdmVudHM/OiBFdmVudE1lZXRpbmdQbHVzVHlwZVtdXG4pOiBQcm9taXNlPFJldHVybkJvZHlGb3JFeHRlcm5hbEF0dGVuZGVlRm9yT3B0YXBsYW5uZXJQcmVwVHlwZT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG1vZGlmaWVkQWxsRXh0ZXJuYWxFdmVudHMgPSBhbGxFeHRlcm5hbEV2ZW50cy5tYXAoKGUpID0+XG4gICAgICBjb252ZXJ0TWVldGluZ0Fzc2lzdEV2ZW50VHlwZVRvRXZlbnRQbHVzVHlwZShcbiAgICAgICAgZSxcbiAgICAgICAgZXh0ZXJuYWxBdHRlbmRlZXMuZmluZCgoYSkgPT4gYS5pZCA9PT0gZS5hdHRlbmRlZUlkKT8udXNlcklkXG4gICAgICApXG4gICAgKTtcblxuICAgIGNvbnN0IG9sZENvbnZlcnRlZE1lZXRpbmdFdmVudHMgPSBvbGRFeHRlcm5hbE1lZXRpbmdFdmVudHNcbiAgICAgIC5tYXAoKGEpID0+IGNvbnZlcnRNZWV0aW5nUGx1c1R5cGVUb0V2ZW50UGx1c1R5cGUoYSkpXG4gICAgICA/LmZpbHRlcigoZSkgPT4gISFlKTtcbiAgICBpZiAob2xkQ29udmVydGVkTWVldGluZ0V2ZW50cz8ubGVuZ3RoID4gMCkge1xuICAgICAgbW9kaWZpZWRBbGxFeHRlcm5hbEV2ZW50cy5wdXNoKC4uLm9sZENvbnZlcnRlZE1lZXRpbmdFdmVudHMpO1xuICAgIH1cblxuICAgIGNvbnN0IGRpZmZEYXlzID0gZGF5anMod2luZG93RW5kRGF0ZS5zbGljZSgwLCAxOSkpLmRpZmYoXG4gICAgICBkYXlqcyh3aW5kb3dTdGFydERhdGUuc2xpY2UoMCwgMTkpKSxcbiAgICAgICdkYXknXG4gICAgKTtcblxuICAgIGNvbnN0IHN0YXJ0RGF0ZXNGb3JFYWNoRGF5ID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBkaWZmRGF5czsgaSsrKSB7XG4gICAgICBzdGFydERhdGVzRm9yRWFjaERheS5wdXNoKFxuICAgICAgICBkYXlqcyh3aW5kb3dTdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eihob3N0VGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmFkZChpLCAnZGF5JylcbiAgICAgICAgICAuZm9ybWF0KClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdW5maWx0ZXJlZFdvcmtUaW1lczogV29ya1RpbWVUeXBlW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZXh0ZXJuYWxBdHRlbmRlZSBvZiBleHRlcm5hbEF0dGVuZGVlcykge1xuICAgICAgY29uc3Qgd29ya1RpbWVzRm9yQXR0ZW5kZWUgPSBnZW5lcmF0ZVdvcmtUaW1lc0ZvckV4dGVybmFsQXR0ZW5kZWUoXG4gICAgICAgIG1haW5Ib3N0SWQsXG4gICAgICAgIGV4dGVybmFsQXR0ZW5kZWU/LnVzZXJJZCxcbiAgICAgICAgbW9kaWZpZWRBbGxFeHRlcm5hbEV2ZW50cyxcbiAgICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgICBleHRlcm5hbEF0dGVuZGVlPy50aW1lem9uZVxuICAgICAgKTtcbiAgICAgIHVuZmlsdGVyZWRXb3JrVGltZXMucHVzaCguLi53b3JrVGltZXNGb3JBdHRlbmRlZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgd29ya1RpbWVzOiBXb3JrVGltZVR5cGVbXSA9IF8udW5pcVdpdGgoXG4gICAgICB1bmZpbHRlcmVkV29ya1RpbWVzLFxuICAgICAgXy5pc0VxdWFsXG4gICAgKTtcblxuICAgIGNvbnN0IHVuZmlsdGVyZWRUaW1lc2xvdHM6IFRpbWVTbG90VHlwZVtdID0gW107XG4gICAgY29uc3QgdGltZXNsb3RzOiBUaW1lU2xvdFR5cGVbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFydERhdGVzRm9yRWFjaERheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBleHRlcm5hbEF0dGVuZGVlIG9mIGV4dGVybmFsQXR0ZW5kZWVzKSB7XG4gICAgICAgICAgY29uc3QgdGltZXNsb3RzRm9yRGF5ID1cbiAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlVGltZVNsb3RzTGl0ZUZvckV4dGVybmFsQXR0ZW5kZWUoXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZXNGb3JFYWNoRGF5Py5baV0sXG4gICAgICAgICAgICAgIG1haW5Ib3N0SWQsXG4gICAgICAgICAgICAgIG1vZGlmaWVkQWxsRXh0ZXJuYWxFdmVudHMsXG4gICAgICAgICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgICAgICAgZXh0ZXJuYWxBdHRlbmRlZT8udGltZXpvbmUsXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgdW5maWx0ZXJlZFRpbWVzbG90cy5wdXNoKC4uLnRpbWVzbG90c0ZvckRheSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgZXh0ZXJuYWxBdHRlbmRlZSBvZiBleHRlcm5hbEF0dGVuZGVlcykge1xuICAgICAgICBjb25zdCB0aW1lc2xvdHNGb3JEYXkgPSBhd2FpdCBnZW5lcmF0ZVRpbWVTbG90c0xpdGVGb3JFeHRlcm5hbEF0dGVuZGVlKFxuICAgICAgICAgIHN0YXJ0RGF0ZXNGb3JFYWNoRGF5Py5baV0sXG4gICAgICAgICAgbWFpbkhvc3RJZCxcbiAgICAgICAgICBtb2RpZmllZEFsbEV4dGVybmFsRXZlbnRzLFxuICAgICAgICAgIGhvc3RUaW1lem9uZSxcbiAgICAgICAgICBleHRlcm5hbEF0dGVuZGVlPy50aW1lem9uZSxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICB1bmZpbHRlcmVkVGltZXNsb3RzLnB1c2goLi4udGltZXNsb3RzRm9yRGF5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGltZXNsb3RzLnB1c2goLi4uXy51bmlxV2l0aCh1bmZpbHRlcmVkVGltZXNsb3RzLCBfLmlzRXF1YWwpKTtcbiAgICBjb25zb2xlLmxvZyh0aW1lc2xvdHMsICcgdGltZXNsb3RzJyk7XG5cbiAgICBjb25zdCBmaWx0ZXJlZEFsbEV2ZW50cyA9IF8udW5pcUJ5KFxuICAgICAgbW9kaWZpZWRBbGxFeHRlcm5hbEV2ZW50cy5maWx0ZXIoKGUpID0+XG4gICAgICAgIHZhbGlkYXRlRXZlbnREYXRlc0ZvckV4dGVybmFsQXR0ZW5kZWUoZSlcbiAgICAgICksXG4gICAgICAnaWQnXG4gICAgKTtcbiAgICBsZXQgZXZlbnRQYXJ0czogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID0gW107XG5cbiAgICBjb25zdCBldmVudFBhcnRNaW5pc0FjY3VtdWxhdGVkID0gW107XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBmaWx0ZXJlZEFsbEV2ZW50cykge1xuICAgICAgY29uc3QgZXZlbnRQYXJ0TWluaXMgPSBnZW5lcmF0ZUV2ZW50UGFydHNMaXRlKGV2ZW50LCBtYWluSG9zdElkKTtcbiAgICAgIGV2ZW50UGFydE1pbmlzQWNjdW11bGF0ZWQucHVzaCguLi5ldmVudFBhcnRNaW5pcyk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kaWZpZWRFdmVudFBhcnRNaW5pc1ByZUJ1ZmZlciA9XG4gICAgICBtb2RpZnlFdmVudFBhcnRzRm9yTXVsdGlwbGVQcmVCdWZmZXJUaW1lKGV2ZW50UGFydE1pbmlzQWNjdW11bGF0ZWQpO1xuICAgIGNvbnN0IG1vZGlmaWVkRXZlbnRQYXJ0TWluaXNQcmVBbmRQb3N0QnVmZmVyID1cbiAgICAgIG1vZGlmeUV2ZW50UGFydHNGb3JNdWx0aXBsZVBvc3RCdWZmZXJUaW1lKFxuICAgICAgICBtb2RpZmllZEV2ZW50UGFydE1pbmlzUHJlQnVmZmVyXG4gICAgICApO1xuICAgIGNvbnN0IGZvcm1hdHRlZEV2ZW50UGFydHM6IEV2ZW50UGFydFBsYW5uZXJSZXF1ZXN0Qm9keVR5cGVbXSA9XG4gICAgICBtb2RpZmllZEV2ZW50UGFydE1pbmlzUHJlQW5kUG9zdEJ1ZmZlci5tYXAoKGUpID0+XG4gICAgICAgIGZvcm1hdEV2ZW50VHlwZVRvUGxhbm5lckV2ZW50Rm9yRXh0ZXJuYWxBdHRlbmRlZShcbiAgICAgICAgICBlLFxuICAgICAgICAgIHdvcmtUaW1lcyxcbiAgICAgICAgICBmaWx0ZXJlZEFsbEV2ZW50cyxcbiAgICAgICAgICBob3N0VGltZXpvbmVcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICBpZiAoZm9ybWF0dGVkRXZlbnRQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICBldmVudFBhcnRzLnB1c2goLi4uZm9ybWF0dGVkRXZlbnRQYXJ0cyk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50UGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgZXZlbnRQYXJ0cy5mb3JFYWNoKChlKSA9PiBjb25zb2xlLmxvZyhlLCAnIGV2ZW50UGFydHMgYWZ0ZXIgZm9ybWF0dGluZycpKTtcbiAgICAgIGNvbnN0IG5ld0V2ZW50UGFydHNXaXRoUHJlZmVycmVkVGltZVNldCA9IGV2ZW50UGFydHMubWFwKChlKSA9PlxuICAgICAgICBzZXRQcmVmZXJyZWRUaW1lRm9yVW5Nb2RpZmlhYmxlRXZlbnQoXG4gICAgICAgICAgZSxcbiAgICAgICAgICBhbGxFeHRlcm5hbEV2ZW50cy5maW5kKChmKSA9PiBmLmlkID09PSBlLmV2ZW50SWQpPy50aW1lem9uZVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0LmZvckVhY2goKGUpID0+XG4gICAgICAgIGNvbnNvbGUubG9nKGUsICcgbmV3RXZlbnRQYXJ0c1dpdGhQcmVmZXJyZWRUaW1lU2V0JylcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdFdmVudFBhcnRzID0gYXdhaXQgdGFnRXZlbnRzRm9yRGFpbHlPcldlZWtseVRhc2soXG4gICAgICAgIG5ld0V2ZW50UGFydHNXaXRoUHJlZmVycmVkVGltZVNldFxuICAgICAgKTtcbiAgICAgIG5ld0V2ZW50UGFydHMuZm9yRWFjaCgoZSkgPT5cbiAgICAgICAgY29uc29sZS5sb2coZSwgJyBuZXdFdmVudFBhcnRzIGFmdGVyIHRhZ0V2ZW50c0ZvckRhaWx5T3JXZWVrbHlUYXNrJylcbiAgICAgICk7XG4gICAgICBjb25zdCB1c2VyTGlzdDogVXNlclBsYW5uZXJSZXF1ZXN0Qm9keVR5cGVbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBleHRlcm5hbEF0dGVuZGVlIG9mIGV4dGVybmFsQXR0ZW5kZWVzKSB7XG4gICAgICAgIGNvbnN0IHVzZXJQbGFubmVyUmVxdWVzdEJvZHkgPVxuICAgICAgICAgIGdlbmVyYXRlVXNlclBsYW5uZXJSZXF1ZXN0Qm9keUZvckV4dGVybmFsQXR0ZW5kZWUoXG4gICAgICAgICAgICBleHRlcm5hbEF0dGVuZGVlPy51c2VySWQsXG4gICAgICAgICAgICB3b3JrVGltZXMsXG4gICAgICAgICAgICBtYWluSG9zdElkXG4gICAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2codXNlclBsYW5uZXJSZXF1ZXN0Qm9keSwgJyB1c2VyUGxhbm5lclJlcXVlc3RCb2R5Jyk7XG4gICAgICAgIHVzZXJMaXN0LnB1c2godXNlclBsYW5uZXJSZXF1ZXN0Qm9keSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vZGlmaWVkTmV3RXZlbnRQYXJ0czogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID1cbiAgICAgICAgbmV3RXZlbnRQYXJ0cy5tYXAoKGV2ZW50UGFydCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9sZEV2ZW50ID0gZmlsdGVyZWRBbGxFdmVudHM/LmZpbmQoXG4gICAgICAgICAgICAoZXZlbnQpID0+IGV2ZW50LmlkID09PSBldmVudFBhcnQuZXZlbnRJZFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdyb3VwSWQ6IGV2ZW50UGFydD8uZ3JvdXBJZCxcbiAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50UGFydD8uZXZlbnRJZCxcbiAgICAgICAgICAgIHBhcnQ6IGV2ZW50UGFydD8ucGFydCxcbiAgICAgICAgICAgIGxhc3RQYXJ0OiBldmVudFBhcnQ/Lmxhc3RQYXJ0LFxuICAgICAgICAgICAgbWVldGluZ0lkOiBldmVudFBhcnQ/Lm1lZXRpbmdJZCxcbiAgICAgICAgICAgIGhvc3RJZDogbWFpbkhvc3RJZCxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogZGF5anMoZXZlbnRQYXJ0Py5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgICAgICAgIC5mb3JtYXQoKSxcbiAgICAgICAgICAgIGVuZERhdGU6IGRheWpzKGV2ZW50UGFydD8uZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgICAgIC50eihvbGRFdmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgLnR6KGhvc3RUaW1lem9uZSlcbiAgICAgICAgICAgICAgLmZvcm1hdCgpLFxuICAgICAgICAgICAgdXNlcklkOiBldmVudFBhcnQ/LnVzZXJJZCxcbiAgICAgICAgICAgIHVzZXI6IGV2ZW50UGFydD8udXNlcixcbiAgICAgICAgICAgIHByaW9yaXR5OiBldmVudFBhcnQ/LnByaW9yaXR5LFxuICAgICAgICAgICAgaXNQcmVFdmVudDogZXZlbnRQYXJ0Py5pc1ByZUV2ZW50LFxuICAgICAgICAgICAgaXNQb3N0RXZlbnQ6IGV2ZW50UGFydD8uaXNQb3N0RXZlbnQsXG4gICAgICAgICAgICBwb3NpdGl2ZUltcGFjdFNjb3JlOiBldmVudFBhcnQ/LnBvc2l0aXZlSW1wYWN0U2NvcmUsXG4gICAgICAgICAgICBuZWdhdGl2ZUltcGFjdFNjb3JlOiBldmVudFBhcnQ/Lm5lZ2F0aXZlSW1wYWN0U2NvcmUsXG4gICAgICAgICAgICBtb2RpZmlhYmxlOiBldmVudFBhcnQ/Lm1vZGlmaWFibGUsXG4gICAgICAgICAgICBpc01lZXRpbmc6IGV2ZW50UGFydD8uaXNNZWV0aW5nLFxuICAgICAgICAgICAgaXNFeHRlcm5hbE1lZXRpbmc6IGV2ZW50UGFydD8uaXNFeHRlcm5hbE1lZXRpbmcsXG4gICAgICAgICAgICBpc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGU6IGV2ZW50UGFydD8uaXNFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlLFxuICAgICAgICAgICAgaXNNZWV0aW5nTW9kaWZpYWJsZTogZXZlbnRQYXJ0Py5pc01lZXRpbmdNb2RpZmlhYmxlLFxuICAgICAgICAgICAgZGFpbHlUYXNrTGlzdDogZXZlbnRQYXJ0Py5kYWlseVRhc2tMaXN0LFxuICAgICAgICAgICAgd2Vla2x5VGFza0xpc3Q6IGV2ZW50UGFydD8ud2Vla2x5VGFza0xpc3QsXG4gICAgICAgICAgICBnYXA6IGV2ZW50UGFydD8uZ2FwLFxuICAgICAgICAgICAgdG90YWxXb3JraW5nSG91cnM6IGV2ZW50UGFydD8udG90YWxXb3JraW5nSG91cnMsXG4gICAgICAgICAgICBoYXJkRGVhZGxpbmU6IGV2ZW50UGFydD8uaGFyZERlYWRsaW5lLFxuICAgICAgICAgICAgc29mdERlYWRsaW5lOiBldmVudFBhcnQ/LnNvZnREZWFkbGluZSxcbiAgICAgICAgICAgIGZvckV2ZW50SWQ6IGV2ZW50UGFydD8uZm9yRXZlbnRJZCxcbiAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0RGF5T2ZXZWVrOiBldmVudFBhcnQ/LnBvc2l0aXZlSW1wYWN0RGF5T2ZXZWVrLFxuICAgICAgICAgICAgcG9zaXRpdmVJbXBhY3RUaW1lOiBldmVudFBhcnQ/LnBvc2l0aXZlSW1wYWN0VGltZSxcbiAgICAgICAgICAgIG5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrOiBldmVudFBhcnQ/Lm5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrLFxuICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3RUaW1lOiBldmVudFBhcnQ/Lm5lZ2F0aXZlSW1wYWN0VGltZSxcbiAgICAgICAgICAgIHByZWZlcnJlZERheU9mV2VlazogZXZlbnRQYXJ0Py5wcmVmZXJyZWREYXlPZldlZWssXG4gICAgICAgICAgICBwcmVmZXJyZWRUaW1lOiBldmVudFBhcnQ/LnByZWZlcnJlZFRpbWUsXG4gICAgICAgICAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZTogZXZlbnRQYXJ0Py5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICAgICAgICAgIHByZWZlcnJlZEVuZFRpbWVSYW5nZTogZXZlbnRQYXJ0Py5wcmVmZXJyZWRFbmRUaW1lUmFuZ2UsXG4gICAgICAgICAgICBldmVudDogZXZlbnRQYXJ0Py5ldmVudCxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIG1vZGlmaWVkTmV3RXZlbnRQYXJ0cz8ubGVuZ3RoID4gMFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHVzZXJJZHMsXG4gICAgICAgICAgICBob3N0SWQ6IG1haW5Ib3N0SWQsXG4gICAgICAgICAgICBldmVudFBhcnRzOiBtb2RpZmllZE5ld0V2ZW50UGFydHMsXG4gICAgICAgICAgICBhbGxFdmVudHM6IGZpbHRlcmVkQWxsRXZlbnRzLFxuICAgICAgICAgICAgb2xkQXR0ZW5kZWVFdmVudHM6IGFsbEV4dGVybmFsRXZlbnRzLFxuICAgICAgICAgICAgdGltZXNsb3RzLFxuICAgICAgICAgICAgdXNlckxpc3QsXG4gICAgICAgICAgfVxuICAgICAgICA6IG51bGw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBlLFxuICAgICAgJyB1bmFibGUgdG8gcHJvY2VzcyBldmVudHMgZm9yIG9wdGFwbGFubmVyIGZvciBleHRlcm5hbCBhdHRlbmRlZSdcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgb3B0YVBsYW5XZWVrbHkgPSBhc3luYyAoXG4gIHRpbWVzbG90czogVGltZVNsb3RUeXBlW10sXG4gIHVzZXJMaXN0OiBVc2VyUGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdLFxuICBldmVudFBhcnRzOiBFdmVudFBhcnRQbGFubmVyUmVxdWVzdEJvZHlUeXBlW10sXG4gIHNpbmdsZXRvbklkOiBzdHJpbmcsXG4gIGhvc3RJZDogc3RyaW5nLFxuICBmaWxlS2V5OiBzdHJpbmcsXG4gIGRlbGF5OiBudW1iZXIsXG4gIGNhbGxCYWNrVXJsOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBQbGFubmVyUmVxdWVzdEJvZHlUeXBlID0ge1xuICAgICAgc2luZ2xldG9uSWQsXG4gICAgICBob3N0SWQsXG4gICAgICB0aW1lc2xvdHMsXG4gICAgICB1c2VyTGlzdCxcbiAgICAgIGV2ZW50UGFydHMsXG4gICAgICBmaWxlS2V5LFxuICAgICAgZGVsYXksXG4gICAgICBjYWxsQmFja1VybCxcbiAgICB9O1xuXG4gICAgYXdhaXQgZ290XG4gICAgICAucG9zdChgJHtvcHRhUGxhbm5lclVybH0vdGltZVRhYmxlL2FkbWluL3NvbHZlLWRheWAsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7QnVmZmVyLmZyb20oYCR7b3B0YVBsYW5uZXJVc2VybmFtZX06JHtvcHRhUGxhbm5lclBhc3N3b3JkfWApLnRvU3RyaW5nKCdiYXNlNjQnKX1gLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiByZXF1ZXN0Qm9keSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2coJyBvcHRhUGxhbldlZWtseSBjYWxsZWQnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgb3B0YVBsYW5XZWVrbHknKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUZyZWVtaXVtQnlJZCA9IGFzeW5jIChpZDogc3RyaW5nLCB1c2FnZTogbnVtYmVyKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdVcGRhdGVGcmVlbWl1bUJ5SWQnO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICAgICAgbXV0YXRpb24gVXBkYXRlRnJlZW1pdW1CeUlkKCRpZDogdXVpZCEsICR1c2FnZTogSW50ISkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZV9GcmVlbWl1bV9ieV9wayhwa19jb2x1bW5zOiB7aWQ6ICRpZH0sIF9zZXQ6IHt1c2FnZTogJHVzYWdlfSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgICAgICB1c2FnZVxuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG5cbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICBpZCxcbiAgICAgIHVzYWdlLFxuICAgIH07XG5cbiAgICBjb25zdCByZXNwb25zZTogeyBkYXRhOiB7IHVwZGF0ZV9GcmVlbWl1bV9ieV9wazogRnJlZW1pdW1UeXBlIH0gfSA9XG4gICAgICBhd2FpdCBnb3RcbiAgICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2U/LmRhdGE/LnVwZGF0ZV9GcmVlbWl1bV9ieV9wayxcbiAgICAgICcgcmVzcG9uc2UgYWZ0ZXIgdXBkYXRpbmcgdXBkYXRlX0ZyZWVtaXVtX2J5X3BrJ1xuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U/LmRhdGE/LnVwZGF0ZV9GcmVlbWl1bV9ieV9waztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSBmcmVlbWl1bScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RnJlZW1pdW1CeVVzZXJJZCA9IGFzeW5jICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnR2V0RnJlZW1pdW1CeVVzZXJJZCc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBxdWVyeSBHZXRGcmVlbWl1bUJ5VXNlcklkKCR1c2VySWQ6IHV1aWQhKSB7XG4gICAgICAgICAgICAgICAgRnJlZW1pdW0od2hlcmU6IHt1c2VySWQ6IHtfZXE6ICR1c2VySWR9fSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgICAgICB1c2FnZVxuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG5cbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICB1c2VySWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IEZyZWVtaXVtOiBGcmVlbWl1bVR5cGVbXSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cocmVzLCAnIHJlcyBmcm9tIGdldEZyZWVtaXVtQnlVc2VySWQgJyk7XG5cbiAgICByZXR1cm4gcmVzPy5kYXRhPy5GcmVlbWl1bT8uWzBdO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coJyB1bmFibGUgdG8gZ2V0IGZyZWVtaXVtIGJ5IHVzZXIgaWQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NFdmVudHNGb3JPcHRhUGxhbm5lciA9IGFzeW5jIChcbiAgbWFpbkhvc3RJZDogc3RyaW5nLFxuICBpbnRlcm5hbEF0dGVuZGVlczogTWVldGluZ0Fzc2lzdEF0dGVuZGVlVHlwZVtdLFxuICBtZWV0aW5nRXZlbnRQbHVzOiBFdmVudE1lZXRpbmdQbHVzVHlwZVtdLFxuICBhbGxFdmVudHM6IEV2ZW50UGx1c1R5cGVbXSxcbiAgd2luZG93U3RhcnREYXRlOiBzdHJpbmcsXG4gIHdpbmRvd0VuZERhdGU6IHN0cmluZyxcbiAgaG9zdFRpbWV6b25lOiBzdHJpbmcsXG4gIG9sZEV2ZW50czogRXZlbnRUeXBlW10sXG4gIGV4dGVybmFsQXR0ZW5kZWVzPzogTWVldGluZ0Fzc2lzdEF0dGVuZGVlVHlwZVtdLFxuICBtZWV0aW5nQXNzaXN0RXZlbnRzPzogTWVldGluZ0Fzc2lzdEV2ZW50VHlwZVtdLFxuICBuZXdIb3N0UmVtaW5kZXJzPzogUmVtaW5kZXJzRm9yRXZlbnRUeXBlW10sXG4gIG5ld0hvc3RCdWZmZXJUaW1lcz86IEJ1ZmZlclRpbWVPYmplY3RUeXBlW11cbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGFsbEhvc3RFdmVudHMgPSBhbGxFdmVudHMuZmlsdGVyKChlKSA9PiBlLnVzZXJJZCA9PT0gbWFpbkhvc3RJZCk7XG5cbiAgICBjb25zdCBvbGRIb3N0RXZlbnRzID0gb2xkRXZlbnRzLmZpbHRlcigoZSkgPT4gZT8udXNlcklkID09PSBtYWluSG9zdElkKTtcblxuICAgIGNvbnN0IGhvc3RJc0ludGVybmFsQXR0ZW5kZWUgPSBpbnRlcm5hbEF0dGVuZGVlcy5zb21lKFxuICAgICAgKGlhKSA9PiBpYT8udXNlcklkID09PSBtYWluSG9zdElkXG4gICAgKTtcblxuICAgIGxldCByZXR1cm5WYWx1ZXNGcm9tSW50ZXJuYWxBdHRlbmRlZXM6XG4gICAgICB8IFJldHVybkJvZHlGb3JBdHRlbmRlZUZvck9wdGFwbGFubmVyUHJlcFR5cGVcbiAgICAgIHwge30gPSB7fTtcbiAgICBsZXQgcmV0dXJuVmFsdWVzRnJvbUhvc3Q6IFJldHVybkJvZHlGb3JIb3N0Rm9yT3B0YXBsYW5uZXJQcmVwVHlwZSB8IHt9ID0ge307XG5cbiAgICBpZiAoaG9zdElzSW50ZXJuYWxBdHRlbmRlZSkge1xuICAgICAgcmV0dXJuVmFsdWVzRnJvbUludGVybmFsQXR0ZW5kZWVzID1cbiAgICAgICAgYXdhaXQgcHJvY2Vzc0V2ZW50c0Zvck9wdGFQbGFubmVyRm9ySW50ZXJuYWxBdHRlbmRlZXMoXG4gICAgICAgICAgbWFpbkhvc3RJZCxcbiAgICAgICAgICBhbGxFdmVudHMsXG4gICAgICAgICAgd2luZG93U3RhcnREYXRlLFxuICAgICAgICAgIHdpbmRvd0VuZERhdGUsXG4gICAgICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgICAgIGludGVybmFsQXR0ZW5kZWVzLFxuICAgICAgICAgIG9sZEV2ZW50cyxcbiAgICAgICAgICBtZWV0aW5nRXZlbnRQbHVzLFxuICAgICAgICAgIG5ld0hvc3RSZW1pbmRlcnMsXG4gICAgICAgICAgbmV3SG9zdEJ1ZmZlclRpbWVzXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVyblZhbHVlc0Zyb21Ib3N0ID0gYXdhaXQgcHJvY2Vzc0V2ZW50c0Zvck9wdGFQbGFubmVyRm9yTWFpbkhvc3QoXG4gICAgICAgIG1haW5Ib3N0SWQsXG4gICAgICAgIGFsbEhvc3RFdmVudHMsXG4gICAgICAgIHdpbmRvd1N0YXJ0RGF0ZSxcbiAgICAgICAgd2luZG93RW5kRGF0ZSxcbiAgICAgICAgaG9zdFRpbWV6b25lLFxuICAgICAgICBvbGRIb3N0RXZlbnRzLFxuICAgICAgICBuZXdIb3N0UmVtaW5kZXJzLFxuICAgICAgICBuZXdIb3N0QnVmZmVyVGltZXNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZXJuYWxNZWV0aW5nRXZlbnRQbHVzID0gbWVldGluZ0V2ZW50UGx1c1xuICAgICAgLm1hcCgoZSkgPT4ge1xuICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gZXh0ZXJuYWxBdHRlbmRlZXM/LmZpbmRJbmRleChcbiAgICAgICAgICAoYSkgPT4gYT8udXNlcklkID09PSBlPy51c2VySWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPiAtMSkge1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSlcbiAgICAgID8uZmlsdGVyKChlKSA9PiBlICE9PSBudWxsKTtcblxuICAgIGNvbnN0IHJldHVyblZhbHVlc0Zyb21FeHRlcm5hbEF0dGVuZGVlczogUmV0dXJuQm9keUZvckV4dGVybmFsQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlID1cbiAgICAgIGV4dGVybmFsQXR0ZW5kZWVzPy5sZW5ndGggPiAwXG4gICAgICAgID8gYXdhaXQgcHJvY2Vzc0V2ZW50c0Zvck9wdGFQbGFubmVyRm9yRXh0ZXJuYWxBdHRlbmRlZXMoXG4gICAgICAgICAgICBleHRlcm5hbEF0dGVuZGVlcz8ubWFwKChhKSA9PiBhLnVzZXJJZCksXG4gICAgICAgICAgICBtYWluSG9zdElkLFxuICAgICAgICAgICAgbWVldGluZ0Fzc2lzdEV2ZW50cyxcbiAgICAgICAgICAgIHdpbmRvd1N0YXJ0RGF0ZSxcbiAgICAgICAgICAgIHdpbmRvd0VuZERhdGUsXG4gICAgICAgICAgICBob3N0VGltZXpvbmUsXG4gICAgICAgICAgICBleHRlcm5hbEF0dGVuZGVlcyxcbiAgICAgICAgICAgIGV4dGVybmFsTWVldGluZ0V2ZW50UGx1c1xuICAgICAgICAgIClcbiAgICAgICAgOiBudWxsO1xuXG4gICAgY29uc3QgZXZlbnRQYXJ0czogRXZlbnRQYXJ0UGxhbm5lclJlcXVlc3RCb2R5VHlwZVtdID0gW107XG4gICAgY29uc3QgYWxsRXZlbnRzRm9yUGxhbm5lcjogRXZlbnRQbHVzVHlwZVtdID0gW107XG4gICAgY29uc3QgYnJlYWtzOiBFdmVudFBsdXNUeXBlW10gPSBbXTtcbiAgICBjb25zdCBvbGRFdmVudHNGb3JQbGFubmVyOiBFdmVudFBsdXNUeXBlW10gPSBbXTtcbiAgICBjb25zdCBvbGRBdHRlbmRlZUV2ZW50czogTWVldGluZ0Fzc2lzdEV2ZW50VHlwZVtdID0gW107XG4gICAgY29uc3QgdW5maWx0ZXJlZFRpbWVzbG90czogVGltZVNsb3RUeXBlW10gPSBbXTtcbiAgICBjb25zdCB1bmZpbHRlcmVkVXNlckxpc3Q6IFVzZXJQbGFubmVyUmVxdWVzdEJvZHlUeXBlW10gPSBbXTtcblxuICAgIGlmIChcbiAgICAgICEoXG4gICAgICAgIChyZXR1cm5WYWx1ZXNGcm9tSG9zdCBhcyBSZXR1cm5Cb2R5Rm9ySG9zdEZvck9wdGFwbGFubmVyUHJlcFR5cGUpXG4gICAgICAgICAgPy5ldmVudFBhcnRzPy5sZW5ndGggPiAwXG4gICAgICApXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdubyBldmVudCBwYXJ0cyBwcm9kdWNlZCBzb21ldGhpbmcgd2VudCB3cm9uZyBpbiBvcHRhcGxhbm5lcidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKHJldHVyblZhbHVlc0Zyb21Ib3N0IGFzIFJldHVybkJvZHlGb3JIb3N0Rm9yT3B0YXBsYW5uZXJQcmVwVHlwZSlcbiAgICAgICAgPy5ldmVudFBhcnRzPy5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICBldmVudFBhcnRzLnB1c2goXG4gICAgICAgIC4uLihyZXR1cm5WYWx1ZXNGcm9tSG9zdCBhcyBSZXR1cm5Cb2R5Rm9ySG9zdEZvck9wdGFwbGFubmVyUHJlcFR5cGUpXG4gICAgICAgICAgPy5ldmVudFBhcnRzXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChhbGxIb3N0RXZlbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBhbGxFdmVudHNGb3JQbGFubmVyLnB1c2goLi4uYWxsSG9zdEV2ZW50cyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKHJldHVyblZhbHVlc0Zyb21Ib3N0IGFzIFJldHVybkJvZHlGb3JIb3N0Rm9yT3B0YXBsYW5uZXJQcmVwVHlwZSk/LmJyZWFrc1xuICAgICAgICA/Lmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIGJyZWFrcy5wdXNoKFxuICAgICAgICAuLi4ocmV0dXJuVmFsdWVzRnJvbUhvc3QgYXMgUmV0dXJuQm9keUZvckhvc3RGb3JPcHRhcGxhbm5lclByZXBUeXBlKVxuICAgICAgICAgID8uYnJlYWtzXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIChyZXR1cm5WYWx1ZXNGcm9tSG9zdCBhcyBSZXR1cm5Cb2R5Rm9ySG9zdEZvck9wdGFwbGFubmVyUHJlcFR5cGUpXG4gICAgICAgID8ub2xkRXZlbnRzPy5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICBvbGRFdmVudHNGb3JQbGFubmVyLnB1c2goXG4gICAgICAgIC4uLihyZXR1cm5WYWx1ZXNGcm9tSG9zdCBhcyBSZXR1cm5Cb2R5Rm9ySG9zdEZvck9wdGFwbGFubmVyUHJlcFR5cGUpXG4gICAgICAgICAgPy5vbGRFdmVudHNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKHJldHVyblZhbHVlc0Zyb21Ib3N0IGFzIFJldHVybkJvZHlGb3JIb3N0Rm9yT3B0YXBsYW5uZXJQcmVwVHlwZSlcbiAgICAgICAgPy50aW1lc2xvdHM/Lmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIHVuZmlsdGVyZWRUaW1lc2xvdHMucHVzaChcbiAgICAgICAgLi4uKHJldHVyblZhbHVlc0Zyb21Ib3N0IGFzIFJldHVybkJvZHlGb3JIb3N0Rm9yT3B0YXBsYW5uZXJQcmVwVHlwZSlcbiAgICAgICAgICA/LnRpbWVzbG90c1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAocmV0dXJuVmFsdWVzRnJvbUhvc3QgYXMgUmV0dXJuQm9keUZvckhvc3RGb3JPcHRhcGxhbm5lclByZXBUeXBlKVxuICAgICAgICA/LnVzZXJQbGFubmVyUmVxdWVzdEJvZHk/LmlkXG4gICAgKSB7XG4gICAgICB1bmZpbHRlcmVkVXNlckxpc3QucHVzaChcbiAgICAgICAgKHJldHVyblZhbHVlc0Zyb21Ib3N0IGFzIFJldHVybkJvZHlGb3JIb3N0Rm9yT3B0YXBsYW5uZXJQcmVwVHlwZSlcbiAgICAgICAgICA/LnVzZXJQbGFubmVyUmVxdWVzdEJvZHlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKFxuICAgICAgICByZXR1cm5WYWx1ZXNGcm9tSW50ZXJuYWxBdHRlbmRlZXMgYXMgUmV0dXJuQm9keUZvckF0dGVuZGVlRm9yT3B0YXBsYW5uZXJQcmVwVHlwZVxuICAgICAgKT8udXNlckxpc3Q/LlswXT8uaWRcbiAgICApIHtcbiAgICAgIHVuZmlsdGVyZWRVc2VyTGlzdC5wdXNoKFxuICAgICAgICAuLi4oXG4gICAgICAgICAgcmV0dXJuVmFsdWVzRnJvbUludGVybmFsQXR0ZW5kZWVzIGFzIFJldHVybkJvZHlGb3JBdHRlbmRlZUZvck9wdGFwbGFubmVyUHJlcFR5cGVcbiAgICAgICAgKT8udXNlckxpc3RcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKFxuICAgICAgICByZXR1cm5WYWx1ZXNGcm9tSW50ZXJuYWxBdHRlbmRlZXMgYXMgUmV0dXJuQm9keUZvckF0dGVuZGVlRm9yT3B0YXBsYW5uZXJQcmVwVHlwZVxuICAgICAgKT8uZXZlbnRQYXJ0cz8ubGVuZ3RoID4gMFxuICAgICkge1xuICAgICAgZXZlbnRQYXJ0cy5wdXNoKFxuICAgICAgICAuLi4oXG4gICAgICAgICAgcmV0dXJuVmFsdWVzRnJvbUludGVybmFsQXR0ZW5kZWVzIGFzIFJldHVybkJvZHlGb3JBdHRlbmRlZUZvck9wdGFwbGFubmVyUHJlcFR5cGVcbiAgICAgICAgKT8uZXZlbnRQYXJ0c1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAoXG4gICAgICAgIHJldHVyblZhbHVlc0Zyb21JbnRlcm5hbEF0dGVuZGVlcyBhcyBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlXG4gICAgICApPy5hbGxFdmVudHM/Lmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIGFsbEV2ZW50c0ZvclBsYW5uZXIucHVzaChcbiAgICAgICAgLi4uKFxuICAgICAgICAgIHJldHVyblZhbHVlc0Zyb21JbnRlcm5hbEF0dGVuZGVlcyBhcyBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlXG4gICAgICAgICk/LmFsbEV2ZW50c1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAoXG4gICAgICAgIHJldHVyblZhbHVlc0Zyb21JbnRlcm5hbEF0dGVuZGVlcyBhcyBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlXG4gICAgICApPy5vbGRFdmVudHM/Lmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIG9sZEV2ZW50c0ZvclBsYW5uZXIucHVzaChcbiAgICAgICAgLi4uKFxuICAgICAgICAgIHJldHVyblZhbHVlc0Zyb21JbnRlcm5hbEF0dGVuZGVlcyBhcyBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlXG4gICAgICAgICk/Lm9sZEV2ZW50c1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAoXG4gICAgICAgIHJldHVyblZhbHVlc0Zyb21JbnRlcm5hbEF0dGVuZGVlcyBhcyBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlXG4gICAgICApPy50aW1lc2xvdHM/Lmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIHVuZmlsdGVyZWRUaW1lc2xvdHMucHVzaChcbiAgICAgICAgLi4uKFxuICAgICAgICAgIHJldHVyblZhbHVlc0Zyb21JbnRlcm5hbEF0dGVuZGVlcyBhcyBSZXR1cm5Cb2R5Rm9yQXR0ZW5kZWVGb3JPcHRhcGxhbm5lclByZXBUeXBlXG4gICAgICAgICk/LnRpbWVzbG90c1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocmV0dXJuVmFsdWVzRnJvbUV4dGVybmFsQXR0ZW5kZWVzPy5ldmVudFBhcnRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBldmVudFBhcnRzLnB1c2goLi4ucmV0dXJuVmFsdWVzRnJvbUV4dGVybmFsQXR0ZW5kZWVzPy5ldmVudFBhcnRzKTtcbiAgICB9XG5cbiAgICBpZiAocmV0dXJuVmFsdWVzRnJvbUV4dGVybmFsQXR0ZW5kZWVzPy5hbGxFdmVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGFsbEV2ZW50c0ZvclBsYW5uZXIucHVzaCguLi5yZXR1cm5WYWx1ZXNGcm9tRXh0ZXJuYWxBdHRlbmRlZXM/LmFsbEV2ZW50cyk7XG4gICAgfVxuXG4gICAgaWYgKHJldHVyblZhbHVlc0Zyb21FeHRlcm5hbEF0dGVuZGVlcz8ub2xkQXR0ZW5kZWVFdmVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIG9sZEF0dGVuZGVlRXZlbnRzLnB1c2goXG4gICAgICAgIC4uLnJldHVyblZhbHVlc0Zyb21FeHRlcm5hbEF0dGVuZGVlcz8ub2xkQXR0ZW5kZWVFdmVudHNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJldHVyblZhbHVlc0Zyb21FeHRlcm5hbEF0dGVuZGVlcz8udGltZXNsb3RzPy5sZW5ndGggPiAwKSB7XG4gICAgICB1bmZpbHRlcmVkVGltZXNsb3RzLnB1c2goLi4ucmV0dXJuVmFsdWVzRnJvbUV4dGVybmFsQXR0ZW5kZWVzPy50aW1lc2xvdHMpO1xuICAgIH1cblxuICAgIGlmIChyZXR1cm5WYWx1ZXNGcm9tRXh0ZXJuYWxBdHRlbmRlZXM/LnVzZXJMaXN0Py5sZW5ndGggPiAwKSB7XG4gICAgICB1bmZpbHRlcmVkVXNlckxpc3QucHVzaCguLi5yZXR1cm5WYWx1ZXNGcm9tRXh0ZXJuYWxBdHRlbmRlZXM/LnVzZXJMaXN0KTtcbiAgICB9XG5cbiAgICBjb25zdCBkdXBsaWNhdGVGcmVlRXZlbnRQYXJ0cyA9IF8udW5pcVdpdGgoZXZlbnRQYXJ0cywgXy5pc0VxdWFsKTtcbiAgICBjb25zdCBkdXBsaWNhdGVGcmVlQWxsRXZlbnRzID0gXy51bmlxV2l0aChhbGxFdmVudHNGb3JQbGFubmVyLCBfLmlzRXF1YWwpO1xuICAgIGNvbnN0IGR1cGxpY2F0ZUZyZWVCcmVha3MgPSBfLnVuaXFXaXRoKGJyZWFrcywgXy5pc0VxdWFsKTtcbiAgICBjb25zdCBkdXBsaWNhdGVGcmVlT2xkRXZlbnRzID0gXy51bmlxV2l0aChvbGRFdmVudHMsIF8uaXNFcXVhbCk7XG4gICAgY29uc3QgZHVwbGljYXRlRnJlZU9sZEF0dGVuZGVlRXZlbnRzID0gXy51bmlxV2l0aChcbiAgICAgIG9sZEF0dGVuZGVlRXZlbnRzLFxuICAgICAgXy5pc0VxdWFsXG4gICAgKTtcbiAgICBjb25zdCBkdXBsaWNhdGVGcmVlVGltZXNsb3RzID0gXy51bmlxV2l0aCh1bmZpbHRlcmVkVGltZXNsb3RzLCBfLmlzRXF1YWwpO1xuICAgIGNvbnN0IHNpbmdsZXRvbklkID0gdXVpZCgpO1xuXG4gICAgaWYgKCFkdXBsaWNhdGVGcmVlRXZlbnRQYXJ0cyB8fCBkdXBsaWNhdGVGcmVlRXZlbnRQYXJ0cz8ubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IFBhcnRzIGxlbmd0aCBpcyAwIG9yIGRvIG5vdCBleGlzdCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIEJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc2luZ2xldG9uSWQsXG4gICAgICAgIGhvc3RJZDogbWFpbkhvc3RJZCxcbiAgICAgICAgZXZlbnRQYXJ0czogZHVwbGljYXRlRnJlZUV2ZW50UGFydHMsXG4gICAgICAgIGFsbEV2ZW50czogZHVwbGljYXRlRnJlZUFsbEV2ZW50cyxcbiAgICAgICAgYnJlYWtzOiBkdXBsaWNhdGVGcmVlQnJlYWtzLFxuICAgICAgICBvbGRFdmVudHM6IGR1cGxpY2F0ZUZyZWVPbGRFdmVudHMsXG4gICAgICAgIG9sZEF0dGVuZGVlRXZlbnRzOiBkdXBsaWNhdGVGcmVlT2xkQXR0ZW5kZWVFdmVudHMsXG4gICAgICAgIG5ld0hvc3RSZW1pbmRlcnMsXG4gICAgICAgIG5ld0hvc3RCdWZmZXJUaW1lcyxcbiAgICAgIH0pLFxuICAgICAgQnVja2V0OiBidWNrZXROYW1lLFxuICAgICAgS2V5OiBgJHttYWluSG9zdElkfS8ke3NpbmdsZXRvbklkfS5qc29uYCxcbiAgICAgIENvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfTtcblxuICAgIGNvbnN0IHMzQ29tbWFuZCA9IG5ldyBQdXRPYmplY3RDb21tYW5kKHBhcmFtcyk7XG5cbiAgICBjb25zdCBzM1Jlc3BvbnNlID0gYXdhaXQgczNDbGllbnQuc2VuZChzM0NvbW1hbmQpO1xuXG4gICAgY29uc29sZS5sb2coczNSZXNwb25zZSwgJyBzM1Jlc3BvbnNlJyk7XG5cbiAgICBhd2FpdCBvcHRhUGxhbldlZWtseShcbiAgICAgIGR1cGxpY2F0ZUZyZWVUaW1lc2xvdHMsXG4gICAgICB1bmZpbHRlcmVkVXNlckxpc3QsXG4gICAgICBkdXBsaWNhdGVGcmVlRXZlbnRQYXJ0cyxcbiAgICAgIHNpbmdsZXRvbklkLFxuICAgICAgbWFpbkhvc3RJZCxcbiAgICAgIGAke21haW5Ib3N0SWR9LyR7c2luZ2xldG9uSWR9Lmpzb25gLFxuICAgICAgb3B0YXBsYW5uZXJEdXJhdGlvbixcbiAgICAgIG9uT3B0YVBsYW5DYWxlbmRhckFkbWluQ2FsbEJhY2tVcmxcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKCdvcHRhcGxhbm5lciByZXF1ZXN0IHNlbnQnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHByb2Nlc3MgZXZlbnRzIGZvciBvcHRhcGxhbm5lcicpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VXNlckNhdGVnb3JpZXMgPSBhc3luYyAodXNlcklkKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdnZXRVc2VyQ2F0ZWdvcmllcyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBxdWVyeSBnZXRVc2VyQ2F0ZWdvcmllcygkdXNlcklkOiB1dWlkISkge1xuICAgICAgICBDYXRlZ29yeSh3aGVyZToge3VzZXJJZDoge19lcTogJHVzZXJJZH19KSB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgIGNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgICBjb3B5VGltZUJsb2NraW5nXG4gICAgICAgICAgY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgICAgY29weVJlbWluZGVyc1xuICAgICAgICAgIGNvcHlQcmlvcml0eUxldmVsXG4gICAgICAgICAgY29weU1vZGlmaWFibGVcbiAgICAgICAgICBkZWZhdWx0QXZhaWxhYmlsaXR5XG4gICAgICAgICAgZGVmYXVsdFRpbWVCbG9ja2luZ1xuICAgICAgICAgIGRlZmF1bHRUaW1lUHJlZmVyZW5jZVxuICAgICAgICAgIGRlZmF1bHRSZW1pbmRlcnNcbiAgICAgICAgICBkZWZhdWx0UHJpb3JpdHlMZXZlbFxuICAgICAgICAgIGRlZmF1bHRNb2RpZmlhYmxlXG4gICAgICAgICAgY29weUlzQnJlYWtcbiAgICAgICAgICBjb2xvclxuICAgICAgICAgIGRlbGV0ZWRcbiAgICAgICAgICBpZFxuICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICB1c2VySWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IENhdGVnb3J5OiBDYXRlZ29yeVR5cGVbXSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLUhhc3VyYS1BZG1pbi1TZWNyZXQnOiBoYXN1cmFBZG1pblNlY3JldCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uQ2F0ZWdvcnk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBnZXQgdXNlciBjYXRlZ29yaWVzJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kQmVzdE1hdGNoQ2F0ZWdvcnkyID0gYXN5bmMgKFxuICBldmVudDogRXZlbnRQbHVzVHlwZSxcbiAgcG9zc2libGVMYWJlbHM6IENhdGVnb3J5VHlwZVtdXG4pOiBQcm9taXNlPENsYXNzaWZpY2F0aW9uUmVzcG9uc2VCb2R5VHlwZT4gPT4ge1xuICB0cnkge1xuICAgIGlmICghZXZlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm8gZXZlbnQgcGFzc2VkIGluc2lkZSBmaW5kQmVzdE1hdGNoQ2F0ZWdvcnkyJyk7XG4gICAgfVxuXG4gICAgaWYgKCFwb3NzaWJsZUxhYmVscykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnbm8gcG9zc2libGUgbGFiZWxzIHBhc3NlZCBpbnNpZGUgZmluZEJlc3RNYXRjaENhdGVnb3J5MidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBzdW1tYXJ5LCBub3RlcyB9ID0gZXZlbnQ7XG4gICAgY29uc3Qgc2VudGVuY2UgPSBgJHtzdW1tYXJ5fSR7bm90ZXMgPyBgOiAke25vdGVzfWAgOiAnJ31gO1xuXG4gICAgY29uc3QgbGFiZWxOYW1lcyA9IHBvc3NpYmxlTGFiZWxzLm1hcCgoYSkgPT4gYT8ubmFtZSk7XG5cbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPVxuICAgICAgJ1lvdSBhcmUgYW4gZXhwZXJ0IGV2ZW50IGNhdGVnb3JpemVyLiBHaXZlbiBhbiBldmVudCBkZXNjcmlwdGlvbiBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlIGNhdGVnb3JpZXMsIHJldHVybiBhIEpTT04gYXJyYXkgc3RyaW5nIGNvbnRhaW5pbmcgb25seSB0aGUgbmFtZXMgb2YgdGhlIGNhdGVnb3JpZXMgdGhhdCBkaXJlY3RseSBhcHBseSB0byB0aGUgZXZlbnQuIERvIG5vdCBwcm92aWRlIGFueSBleHBsYW5hdGlvbiwgb25seSB0aGUgSlNPTiBhcnJheSBzdHJpbmcuJztcbiAgICBjb25zdCB1c2VyUHJvbXB0ID0gYEV2ZW50OiBcIiR7c2VudGVuY2V9XCJcbkNhdGVnb3JpZXM6ICR7SlNPTi5zdHJpbmdpZnkobGFiZWxOYW1lcyl9YDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgbW9kZWw6ICdncHQtMy41LXR1cmJvJywgLy8gVXNpbmcgc3RyaW5nIGRpcmVjdGx5IGFzIG9wZW5BSUNoYXRHUFRNb2RlbCBpcyBub3QgYXZhaWxhYmxlIGhlcmVcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlclByb21wdCB9LFxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4yLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxsbVJlc3BvbnNlU3RyaW5nID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuICAgICAgbGV0IG1hdGNoZWRMYWJlbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGlmIChsbG1SZXNwb25zZVN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG1hdGNoZWRMYWJlbHMgPSBKU09OLnBhcnNlKGxsbVJlc3BvbnNlU3RyaW5nKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhQXJyYXkuaXNBcnJheShtYXRjaGVkTGFiZWxzKSB8fFxuICAgICAgICAgICAgIW1hdGNoZWRMYWJlbHMuZXZlcnkoKGl0ZW0pID0+IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICdMTE0gcmVzcG9uc2UgaXMgbm90IGEgdmFsaWQgSlNPTiBhcnJheSBvZiBzdHJpbmdzOicsXG4gICAgICAgICAgICAgIGxsbVJlc3BvbnNlU3RyaW5nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbWF0Y2hlZExhYmVscyA9IFtdOyAvLyBGYWxsYmFjayB0byBlbXB0eSBpZiBub3QgYSBzdHJpbmcgYXJyYXlcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgJ0Vycm9yIHBhcnNpbmcgTExNIHJlc3BvbnNlOicsXG4gICAgICAgICAgICBwYXJzZUVycm9yLFxuICAgICAgICAgICAgbGxtUmVzcG9uc2VTdHJpbmdcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIEZhbGxiYWNrOiBhdHRlbXB0IHRvIGV4dHJhY3QgbGFiZWxzIGlmIGl0J3MgYSBzaW1wbGUgbGlzdCBub3QgaW4gSlNPTiBhcnJheSBmb3JtYXRcbiAgICAgICAgICBpZiAodHlwZW9mIGxsbVJlc3BvbnNlU3RyaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbWF0Y2hlZExhYmVscyA9IGxhYmVsTmFtZXMuZmlsdGVyKChsYWJlbCkgPT5cbiAgICAgICAgICAgICAgbGxtUmVzcG9uc2VTdHJpbmcuaW5jbHVkZXMobGFiZWwpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRjaGVkTGFiZWxzID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdMTE0gcmVzcG9uc2UgY29udGVudCBpcyBudWxsIG9yIHVuZGVmaW5lZC4nKTtcbiAgICAgICAgbWF0Y2hlZExhYmVscyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzY29yZXMgPSBsYWJlbE5hbWVzLm1hcCgobGFiZWwpID0+XG4gICAgICAgIG1hdGNoZWRMYWJlbHMuaW5jbHVkZXMobGFiZWwpID8gMC45IDogMC4xXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHQ6IENsYXNzaWZpY2F0aW9uUmVzcG9uc2VCb2R5VHlwZSA9IHtcbiAgICAgICAgbGFiZWxzOiBsYWJlbE5hbWVzLFxuICAgICAgICBzY29yZXMsXG4gICAgICAgIHNlbnRlbmNlLFxuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICByZXN1bHQsXG4gICAgICAgIGV2ZW50Py5pZCxcbiAgICAgICAgJyByZXN1bHQsIGV2ZW50Py5pZCBpbnNpZGUgZmluZEJlc3RNYXRjaENhdGVnb3J5MiB3aXRoIE9wZW5BSSdcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGFwaUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnRXJyb3IgY2FsbGluZyBPcGVuQUkgQVBJIG9yIHByb2Nlc3NpbmcgaXRzIHJlc3BvbnNlOicsXG4gICAgICAgIGFwaUVycm9yXG4gICAgICApO1xuICAgICAgLy8gRmFsbGJhY2sgdG8gbG93IHNjb3JlcyBmb3IgYWxsIGNhdGVnb3JpZXMgaW4gY2FzZSBvZiBBUEkgZXJyb3JcbiAgICAgIGNvbnN0IHNjb3JlcyA9IGxhYmVsTmFtZXMubWFwKCgpID0+IDAuMSk7XG4gICAgICBjb25zdCBlcnJvclJlc3VsdDogQ2xhc3NpZmljYXRpb25SZXNwb25zZUJvZHlUeXBlID0ge1xuICAgICAgICBsYWJlbHM6IGxhYmVsTmFtZXMsXG4gICAgICAgIHNjb3JlcyxcbiAgICAgICAgc2VudGVuY2UsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGVycm9yUmVzdWx0O1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFRoaXMgb3V0ZXIgY2F0Y2ggYmxvY2sgaGFuZGxlcyBlcnJvcnMgZnJvbSB0aGUgaW5pdGlhbCB2YWxpZGF0aW9uIHN0ZXBzXG4gICAgY29uc29sZS5sb2coZSwgJyBpbml0aWFsIGVycm9yIGluIGZpbmRCZXN0TWF0Y2hDYXRlZ29yeTInKTtcbiAgICAvLyBPcHRpb25hbGx5IHJldGhyb3cgb3IgcmV0dXJuIGEgc3BlY2lmaWMgZXJyb3IgcmVzcG9uc2VcbiAgICB0aHJvdyBlOyAvLyBSZS10aHJvd2luZyB0aGUgb3JpZ2luYWwgZXJyb3IgaWYgaXQncyBmcm9tIHByZS1BUEkgY2FsbCBsb2dpY1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0Jlc3RNYXRjaENhdGVnb3JpZXMgPSAoXG4gIGJvZHk6IENsYXNzaWZpY2F0aW9uUmVzcG9uc2VCb2R5VHlwZSxcbiAgbmV3UG9zc2libGVMYWJlbHM6IHN0cmluZ1tdXG4pID0+IHtcbiAgY29uc3QgeyBzY29yZXMgfSA9IGJvZHk7XG4gIGxldCBiZXN0TWF0Y2hDYXRlZ29yeSA9ICcnO1xuICBsZXQgYmVzdE1hdGNoU2NvcmUgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1Bvc3NpYmxlTGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGFiZWwgPSBuZXdQb3NzaWJsZUxhYmVsc1tpXTtcbiAgICBjb25zdCBzY29yZSA9IHNjb3Jlc1tpXTtcbiAgICBpZiAoc2NvcmUgPiBtaW5UaHJlc2hvbGRTY29yZSkge1xuICAgICAgaWYgKHNjb3JlID4gYmVzdE1hdGNoU2NvcmUpIHtcbiAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnkgPSBsYWJlbDtcbiAgICAgICAgYmVzdE1hdGNoU2NvcmUgPSBzY29yZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmVzdE1hdGNoQ2F0ZWdvcnk7XG59O1xuXG5jb25zdCBhZGRUb0Jlc3RNYXRjaENhdGVnb3JpZXMgPSAoXG4gIG5ld0V2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBuZXdQb3NzaWJsZUxhYmVsczogc3RyaW5nW10sXG4gIHNjb3JlczogbnVtYmVyW10sXG4gIGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdXG4pOiBDYXRlZ29yeVR5cGVbXSB8IFtdID0+IHtcbiAgY29uc3QgYmVzdE1hdGNoQ2F0ZWdvcmllcyA9IFtdO1xuXG4gIGNvbnN0IG1lZXRpbmdJbmRleCA9IG5ld1Bvc3NpYmxlTGFiZWxzLmluZGV4T2YobWVldGluZ0xhYmVsKTtcbiAgY29uc3QgZXh0ZXJuYWxNZWV0aW5nSW5kZXggPSBuZXdQb3NzaWJsZUxhYmVscy5pbmRleE9mKGV4dGVybmFsTWVldGluZ0xhYmVsKTtcblxuICBpZiAobWVldGluZ0luZGV4ID4gLTEgJiYgc2NvcmVzW21lZXRpbmdJbmRleF0gPiBtaW5UaHJlc2hvbGRTY29yZSkge1xuICAgIGJlc3RNYXRjaENhdGVnb3JpZXMucHVzaChcbiAgICAgIGNhdGVnb3JpZXM/LmZpbmQoKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBtZWV0aW5nTGFiZWwpXG4gICAgKTtcbiAgfVxuXG4gIGlmIChcbiAgICBleHRlcm5hbE1lZXRpbmdJbmRleCA+IC0xICYmXG4gICAgc2NvcmVzW2V4dGVybmFsTWVldGluZ0luZGV4XSA+IG1pblRocmVzaG9sZFNjb3JlXG4gICkge1xuICAgIGJlc3RNYXRjaENhdGVnb3JpZXMucHVzaChcbiAgICAgIGNhdGVnb3JpZXM/LmZpbmQoKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBleHRlcm5hbE1lZXRpbmdMYWJlbClcbiAgICApO1xuICB9XG5cbiAgaWYgKG5ld0V2ZW50LmlzTWVldGluZyAmJiBtZWV0aW5nSW5kZXggPiAtMSkge1xuICAgIGJlc3RNYXRjaENhdGVnb3JpZXMucHVzaChcbiAgICAgIGNhdGVnb3JpZXM/LmZpbmQoKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBtZWV0aW5nTGFiZWwpXG4gICAgKTtcbiAgfVxuXG4gIGlmIChuZXdFdmVudC5pc0V4dGVybmFsTWVldGluZyAmJiBleHRlcm5hbE1lZXRpbmdJbmRleCA+IC0xKSB7XG4gICAgYmVzdE1hdGNoQ2F0ZWdvcmllcy5wdXNoKFxuICAgICAgY2F0ZWdvcmllcz8uZmluZCgoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Lm5hbWUgPT09IGV4dGVybmFsTWVldGluZ0xhYmVsKVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gYmVzdE1hdGNoQ2F0ZWdvcmllcztcbn07XG5cbmV4cG9ydCBjb25zdCBwcm9jZXNzRXZlbnRGb3JNZWV0aW5nVHlwZUNhdGVnb3JpZXMgPSAoXG4gIG5ld0V2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBiZXN0TWF0Y2hDYXRlZ29yeTogQ2F0ZWdvcnlUeXBlLFxuICBuZXdQb3NzaWJsZUxhYmVsczogc3RyaW5nW10sXG4gIHNjb3JlczogbnVtYmVyW10sXG4gIGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdXG4pOiBDYXRlZ29yeVR5cGVbXSB8IFtdID0+IHtcbiAgY29uc3QgYmVzdE1hdGNoQ2F0ZWdvcmllcyA9IGFkZFRvQmVzdE1hdGNoQ2F0ZWdvcmllcyhcbiAgICBuZXdFdmVudCxcbiAgICBuZXdQb3NzaWJsZUxhYmVscyxcbiAgICBzY29yZXMsXG4gICAgY2F0ZWdvcmllc1xuICApO1xuXG4gIGlmIChiZXN0TWF0Y2hDYXRlZ29yaWVzPy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIChiZXN0TWF0Y2hDYXRlZ29yaWVzIGFzIENhdGVnb3J5VHlwZVtdKS5jb25jYXQoW2Jlc3RNYXRjaENhdGVnb3J5XSk7XG4gIH1cblxuICByZXR1cm4gW2Jlc3RNYXRjaENhdGVnb3J5XTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVbmlxdWVMYWJlbHMgPSAobGFiZWxzOiBDYXRlZ29yeVR5cGVbXSkgPT4ge1xuICBjb25zdCB1bmlxdWVMYWJlbHMgPSBfLnVuaXFCeShsYWJlbHMsICdpZCcpO1xuICByZXR1cm4gdW5pcXVlTGFiZWxzO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvcHlPdmVyQ2F0ZWdvcnlEZWZhdWx0cyA9IChcbiAgZXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIGNhdGVnb3J5OiBDYXRlZ29yeVR5cGVcbik6IEV2ZW50UGx1c1R5cGUgPT4ge1xuICByZXR1cm4ge1xuICAgIC4uLmV2ZW50LFxuICAgIHRyYW5zcGFyZW5jeTogIWV2ZW50Py51c2VyTW9kaWZpZWRBdmFpbGFiaWxpdHlcbiAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRBdmFpbGFiaWxpdHlcbiAgICAgICAgPyAndHJhbnNwYXJlbnQnXG4gICAgICAgIDogJ29wYXF1ZSdcbiAgICAgIDogZXZlbnQudHJhbnNwYXJlbmN5LFxuICAgIHByaW9yaXR5OlxuICAgICAgKCFldmVudD8udXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbFxuICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0UHJpb3JpdHlMZXZlbFxuICAgICAgICA6IGV2ZW50Py5wcmlvcml0eSkgfHwgMSxcbiAgICBtb2RpZmlhYmxlOiAhZXZlbnQ/LnVzZXJNb2RpZmllZE1vZGlmaWFibGVcbiAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRNb2RpZmlhYmxlXG4gICAgICA6IGV2ZW50Lm1vZGlmaWFibGUsXG4gICAgaXNCcmVhazogIWV2ZW50Py51c2VyTW9kaWZpZWRJc0JyZWFrXG4gICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0SXNCcmVha1xuICAgICAgOiBldmVudC5pc0JyZWFrLFxuICAgIGlzTWVldGluZzogIWV2ZW50Py51c2VyTW9kaWZpZWRJc01lZXRpbmdcbiAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRJc01lZXRpbmdcbiAgICAgIDogY2F0ZWdvcnk/Lm5hbWUgPT09IG1lZXRpbmdMYWJlbFxuICAgICAgICA/IHRydWVcbiAgICAgICAgOiBldmVudC5pc01lZXRpbmcsXG4gICAgaXNFeHRlcm5hbE1lZXRpbmc6ICFldmVudD8udXNlck1vZGlmaWVkSXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRJc0V4dGVybmFsTWVldGluZ1xuICAgICAgOiBjYXRlZ29yeT8ubmFtZSA9PT0gZXh0ZXJuYWxNZWV0aW5nTGFiZWxcbiAgICAgICAgPyB0cnVlXG4gICAgICAgIDogZXZlbnQuaXNFeHRlcm5hbE1lZXRpbmcsXG4gICAgaXNNZWV0aW5nTW9kaWZpYWJsZTogIWV2ZW50Py51c2VyTW9kaWZpZWRNb2RpZmlhYmxlXG4gICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0TWVldGluZ01vZGlmaWFibGVcbiAgICAgIDogZXZlbnQuaXNNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICBpc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGU6ICFldmVudD8udXNlck1vZGlmaWVkTW9kaWZpYWJsZVxuICAgICAgPyBjYXRlZ29yeT8uZGVmYXVsdEV4dGVybmFsTWVldGluZ01vZGlmaWFibGVcbiAgICAgIDogZXZlbnQuaXNFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlLFxuICAgIGJhY2tncm91bmRDb2xvcjogIWV2ZW50Py51c2VyTW9kaWZpZWRDb2xvclxuICAgICAgPyBjYXRlZ29yeT8uY29sb3JcbiAgICAgIDogZXZlbnQuYmFja2dyb3VuZENvbG9yLFxuICAgIHByZWZlcnJlZFRpbWVSYW5nZXM6XG4gICAgICAhZXZlbnQ/LnVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlICYmXG4gICAgICBjYXRlZ29yeT8uZGVmYXVsdFRpbWVQcmVmZXJlbmNlPy5sZW5ndGggPiAwXG4gICAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRUaW1lUHJlZmVyZW5jZT8ubWFwKCh0cCkgPT4gKHtcbiAgICAgICAgICAgIC4uLnRwLFxuICAgICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50Py5pZCxcbiAgICAgICAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGRheWpzKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHVzZXJJZDogZXZlbnQ/LnVzZXJJZCxcbiAgICAgICAgICB9KSlcbiAgICAgICAgOiBldmVudC5wcmVmZXJyZWRUaW1lUmFuZ2VzLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlbWluZGVyc0FuZFRpbWVCbG9ja2luZ0ZvckJlc3RNYXRjaENhdGVnb3J5ID0gYXN5bmMgKFxuICBpZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgbmV3RXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIGJlc3RNYXRjaENhdGVnb3J5OiBDYXRlZ29yeVR5cGUsXG4gIG5ld1JlbWluZGVyczE/OiBSZW1pbmRlclR5cGVbXSxcbiAgbmV3VGltZUJsb2NraW5nMT86IEJ1ZmZlclRpbWVPYmplY3RUeXBlLFxuICBwcmV2aW91c0V2ZW50PzogRXZlbnRQbHVzVHlwZVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFiZXN0TWF0Y2hDYXRlZ29yeT8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYmVzdE1hdGNoQ2F0ZWdvcnkgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgaWYgKCFuZXdFdmVudD8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbmV3RXZlbnQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lkIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndXNlcklkIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuXG4gICAgbGV0IG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzEgfHwge307XG4gICAgbGV0IG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczEgfHwgW107XG4gICAgY29uc3Qgb2xkUmVtaW5kZXJzID0gYXdhaXQgbGlzdFJlbWluZGVyc0ZvckV2ZW50KGlkLCB1c2VySWQpO1xuICAgIGNvbnN0IHJlbWluZGVycyA9IGNyZWF0ZVJlbWluZGVyc1VzaW5nQ2F0ZWdvcnlEZWZhdWx0c0ZvckV2ZW50KFxuICAgICAgbmV3RXZlbnQsXG4gICAgICBiZXN0TWF0Y2hDYXRlZ29yeSxcbiAgICAgIG9sZFJlbWluZGVycyxcbiAgICAgIHByZXZpb3VzRXZlbnRcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKHJlbWluZGVycywgJyByZW1pbmRlcnMnKTtcbiAgICBpZiAoXG4gICAgICByZW1pbmRlcnM/Lmxlbmd0aCA+IDAgJiZcbiAgICAgIGJlc3RNYXRjaENhdGVnb3J5Py5jb3B5UmVtaW5kZXJzICYmXG4gICAgICAhbmV3RXZlbnQ/LnVzZXJNb2RpZmllZFJlbWluZGVyc1xuICAgICkge1xuICAgICAgbmV3UmVtaW5kZXJzLnB1c2goLi4ucmVtaW5kZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhbmV3RXZlbnQ/LnVzZXJNb2RpZmllZFRpbWVCbG9ja2luZyAmJlxuICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnk/LmNvcHlUaW1lQmxvY2tpbmdcbiAgICApIHtcbiAgICAgIGNvbnN0IHRpbWVCbG9ja2luZyA9IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGb3JDYXRlZ29yeURlZmF1bHRzKFxuICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yeSxcbiAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyh0aW1lQmxvY2tpbmcsICcgdGltZUJsb2NraW5nJyk7XG4gICAgICBpZiAodGltZUJsb2NraW5nPy5iZWZvcmVFdmVudCkge1xuICAgICAgICAobmV3VGltZUJsb2NraW5nIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlKS5iZWZvcmVFdmVudCA9XG4gICAgICAgICAgdGltZUJsb2NraW5nLmJlZm9yZUV2ZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAodGltZUJsb2NraW5nPy5hZnRlckV2ZW50KSB7XG4gICAgICAgIChuZXdUaW1lQmxvY2tpbmcgYXMgQnVmZmVyVGltZU9iamVjdFR5cGUpLmFmdGVyRXZlbnQgPVxuICAgICAgICAgIHRpbWVCbG9ja2luZy5hZnRlckV2ZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRpbWVCbG9ja2luZz8ubmV3RXZlbnQ/LnByZUV2ZW50SWQgfHxcbiAgICAgICAgdGltZUJsb2NraW5nPy5uZXdFdmVudD8ucG9zdEV2ZW50SWRcbiAgICAgICkge1xuICAgICAgICBuZXdFdmVudCA9IHRpbWVCbG9ja2luZy5uZXdFdmVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgbmV3RXZlbnQsIG5ld1JlbWluZGVycywgbmV3VGltZUJsb2NraW5nIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGUsXG4gICAgICAnIHVuYWJsZSB0byBjcmVhdGUgcmVtaW5kZXJzIGFuZCB0aW1lIGJsb2NraW5nIGZvciBiZXN0IG1hdGNoIGNhdGVnb3J5J1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDYXRlZ29yeUV2ZW50cyA9IGFzeW5jIChcbiAgY2F0ZWdvcnlFdmVudHM6IENhdGVnb3J5RXZlbnRUeXBlW11cbikgPT4ge1xuICB0cnkge1xuICAgIGZvciAoY29uc3QgY2F0ZWdvcnlFdmVudCBvZiBjYXRlZ29yeUV2ZW50cykge1xuICAgICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgICBjYXRlZ29yeUlkOiBjYXRlZ29yeUV2ZW50Py5jYXRlZ29yeUlkLFxuICAgICAgICBldmVudElkOiBjYXRlZ29yeUV2ZW50Py5ldmVudElkLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnQ29ubmVjdGlvbkJ5Q2F0ZWdvcnlJZEFuZEV2ZW50SWQnO1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IENvbm5lY3Rpb25CeUNhdGVnb3J5SWRBbmRFdmVudElkKCRjYXRlZ29yeUlkOiB1dWlkISwgJGV2ZW50SWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICBDYXRlZ29yeV9FdmVudCh3aGVyZToge2NhdGVnb3J5SWQ6IHtfZXE6ICRjYXRlZ29yeUlkfSwgZXZlbnRJZDoge19lcTogJGV2ZW50SWR9fSkge1xuICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgIGNhdGVnb3J5SWRcbiAgICAgICAgICAgIGRlbGV0ZWRcbiAgICAgICAgICAgIGV2ZW50SWRcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXM6IHsgZGF0YTogeyBDYXRlZ29yeV9FdmVudDogQ2F0ZWdvcnlFdmVudFR5cGVbXSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLmpzb24oKTtcblxuICAgICAgaWYgKCFyZXM/LmRhdGE/LkNhdGVnb3J5X0V2ZW50Py5bMF0pIHtcbiAgICAgICAgY29uc3QgdmFyaWFibGVzMiA9IHtcbiAgICAgICAgICBpZDogY2F0ZWdvcnlFdmVudC5pZCxcbiAgICAgICAgICBjYXRlZ29yeUlkOiBjYXRlZ29yeUV2ZW50Py5jYXRlZ29yeUlkLFxuICAgICAgICAgIGV2ZW50SWQ6IGNhdGVnb3J5RXZlbnQ/LmV2ZW50SWQsXG4gICAgICAgICAgY3JlYXRlZERhdGU6IGNhdGVnb3J5RXZlbnQ/LmNyZWF0ZWREYXRlLFxuICAgICAgICAgIHVwZGF0ZWRBdDogY2F0ZWdvcnlFdmVudD8udXBkYXRlZEF0LFxuICAgICAgICAgIHVzZXJJZDogY2F0ZWdvcnlFdmVudD8udXNlcklkLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvcGVyYXRpb25OYW1lMiA9ICdJbnNlcnRDYXRlZ29yeV9FdmVudCc7XG4gICAgICAgIGNvbnN0IHF1ZXJ5MiA9IGBcbiAgICAgICAgICBtdXRhdGlvbiBJbnNlcnRDYXRlZ29yeV9FdmVudCgkaWQ6IHV1aWQhLCAkY2F0ZWdvcnlJZDogdXVpZCEsICRjcmVhdGVkRGF0ZTogdGltZXN0YW1wdHosICRldmVudElkOiBTdHJpbmchLCAkdXBkYXRlZEF0OiB0aW1lc3RhbXB0eiwgJHVzZXJJZDogdXVpZCEpIHtcbiAgICAgICAgICAgIGluc2VydF9DYXRlZ29yeV9FdmVudF9vbmUob2JqZWN0OiB7Y2F0ZWdvcnlJZDogJGNhdGVnb3J5SWQsIGNyZWF0ZWREYXRlOiAkY3JlYXRlZERhdGUsIGRlbGV0ZWQ6IGZhbHNlLCBldmVudElkOiAkZXZlbnRJZCwgaWQ6ICRpZCwgdXBkYXRlZEF0OiAkdXBkYXRlZEF0LCB1c2VySWQ6ICR1c2VySWR9KSB7XG4gICAgICAgICAgICAgIGNhdGVnb3J5SWRcbiAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgZGVsZXRlZFxuICAgICAgICAgICAgICBldmVudElkXG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICAgIGNvbnN0IHJlczIgPSBhd2FpdCBnb3RcbiAgICAgICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6IG9wZXJhdGlvbk5hbWUyLFxuICAgICAgICAgICAgICBxdWVyeTogcXVlcnkyLFxuICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlczIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmpzb24oKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhyZXMyLCAnIHJlc3BvbnNlIGFmdGVyIGluc2VydGluZyBjYXRlZ29yeSBldmVudCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwc2VydCBjYXRlZ29yeSBldmVudHMnKTtcbiAgfVxufTtcblxuY29uc3QgY29weU92ZXJDYXRlZ29yeURlZmF1bHRzRm9yTWVldGluZ1R5cGUgPSAoXG4gIGV2ZW50LFxuICBjYXRlZ29yaWVzOiBDYXRlZ29yeVR5cGVbXVxuKSA9PiB7XG4gIGNvbnN0IG1lZXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXM/LmZpbmQoXG4gICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBtZWV0aW5nTGFiZWxcbiAgKTtcbiAgY29uc3QgZXh0ZXJuYWxDYXRlZ29yeSA9IGNhdGVnb3JpZXM/LmZpbmQoXG4gICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBleHRlcm5hbE1lZXRpbmdMYWJlbFxuICApO1xuXG4gIGxldCBuZXdFdmVudE1lZXRpbmcgPSBudWxsO1xuICBsZXQgbmV3RXZlbnRFeHRlcm5hbCA9IG51bGw7XG5cbiAgaWYgKG1lZXRpbmdDYXRlZ29yeT8uaWQpIHtcbiAgICBuZXdFdmVudE1lZXRpbmcgPSBjb3B5T3ZlckNhdGVnb3J5RGVmYXVsdHMoZXZlbnQsIG1lZXRpbmdDYXRlZ29yeSk7XG4gIH1cblxuICBpZiAoZXh0ZXJuYWxDYXRlZ29yeT8uaWQpIHtcbiAgICBuZXdFdmVudEV4dGVybmFsID0gY29weU92ZXJDYXRlZ29yeURlZmF1bHRzKGV2ZW50LCBleHRlcm5hbENhdGVnb3J5KTtcbiAgfVxuXG4gIHJldHVybiB7IG5ld0V2ZW50TWVldGluZywgbmV3RXZlbnRFeHRlcm5hbCB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGxpc3RSZW1pbmRlcnNGb3JFdmVudCA9IGFzeW5jIChcbiAgZXZlbnRJZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFldmVudElkKSB7XG4gICAgICBjb25zb2xlLmxvZyhldmVudElkLCAnIG5vIGV2ZW50SWQgcHJlc2VudCBpbnNpZGUgbGlzdFJlbWluZGVyc0ZvckV2ZW50Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJJZCwgJyBubyB1c2VySWQgcHJlc2VudCBpbnNpZGUgbGlzdFJlbWluZGVyc0ZvckV2ZW50Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCcgbGlzdFJlbWluZGVyc0ZvckV2ZW50IGNhbGxlZCcpO1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnbGlzdFJlbWluZGVyc0ZvckV2ZW50JztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICBxdWVyeSBsaXN0UmVtaW5kZXJzRm9yRXZlbnQoJHVzZXJJZDogdXVpZCEsICRldmVudElkOiBTdHJpbmchKSB7XG4gICAgICBSZW1pbmRlcih3aGVyZToge3VzZXJJZDoge19lcTogJHVzZXJJZH0sIGV2ZW50SWQ6IHtfZXE6ICRldmVudElkfSwgZGVsZXRlZDoge19uZXE6IHRydWV9fSkge1xuICAgICAgICBldmVudElkXG4gICAgICAgIGlkXG4gICAgICAgIG1pbnV0ZXNcbiAgICAgICAgcmVtaW5kZXJEYXRlXG4gICAgICAgIHRpbWV6b25lXG4gICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICB1c2VEZWZhdWx0XG4gICAgICAgIHVzZXJJZFxuICAgICAgICBkZWxldGVkXG4gICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICB9XG4gICAgfVxuICBgO1xuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IFJlbWluZGVyOiBSZW1pbmRlclR5cGVbXSB9IH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMsICcgcmVzIGZyb20gbGlzdFJlbWluZGVyc0ZvckV2ZW50Jyk7XG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uUmVtaW5kZXI7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIGxpc3RSZW1pbmRlcnNGb3JFdmVudCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVtaW5kZXJzVXNpbmdDYXRlZ29yeURlZmF1bHRzRm9yRXZlbnQgPSAoXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBiZXN0TWF0Y2hDYXRlZ29yeTogQ2F0ZWdvcnlUeXBlLFxuICBvbGRSZW1pbmRlcnM6IFJlbWluZGVyVHlwZVtdLFxuICBwcmV2aW91c0V2ZW50OiBFdmVudFBsdXNUeXBlXG4pOiBSZW1pbmRlclR5cGVbXSA9PiB7XG4gIGlmIChldmVudC51c2VyTW9kaWZpZWRSZW1pbmRlcnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChwcmV2aW91c0V2ZW50Py5jb3B5UmVtaW5kZXJzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAocHJldmlvdXNFdmVudD8uaWQgJiYgYmVzdE1hdGNoQ2F0ZWdvcnk/LmNvcHlSZW1pbmRlcnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHJlbWluZGVycyA9IGJlc3RNYXRjaENhdGVnb3J5Py5kZWZhdWx0UmVtaW5kZXJzO1xuICBpZiAoIShyZW1pbmRlcnM/Lmxlbmd0aCA+IDApKSB7XG4gICAgcmV0dXJuIG9sZFJlbWluZGVycztcbiAgfVxuXG4gIGNvbnN0IG5ld1JlbWluZGVycyA9IFtdO1xuICByZW1pbmRlcnMuZm9yRWFjaCgocmVtaW5kZXIpID0+IHtcbiAgICBuZXdSZW1pbmRlcnMucHVzaCh7XG4gICAgICBpZDogdXVpZCgpLFxuICAgICAgbWludXRlczogcmVtaW5kZXIsXG4gICAgICBldmVudElkOiBldmVudC5pZCxcbiAgICAgIHVzZXJJZDogZXZlbnQudXNlcklkLFxuICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgZGVsZXRlZDogZmFsc2UsXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gbmV3UmVtaW5kZXJzO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGb3JDYXRlZ29yeURlZmF1bHRzID0gKFxuICBiZXN0TWF0Y2hDYXRlZ29yeTogQ2F0ZWdvcnlUeXBlLFxuICBldmVudDogRXZlbnRQbHVzVHlwZSxcbiAgcHJldmlvdXNFdmVudD86IEV2ZW50UGx1c1R5cGVcbikgPT4ge1xuICBpZiAocHJldmlvdXNFdmVudD8uY29weVRpbWVCbG9ja2luZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHByZXZpb3VzRXZlbnQ/LmlkICYmIGJlc3RNYXRjaENhdGVnb3J5Py5jb3B5VGltZUJsb2NraW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoZXZlbnQ/LnVzZXJNb2RpZmllZFRpbWVCbG9ja2luZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGV2ZW50SWQgPSB1dWlkKCk7XG4gIGNvbnN0IGV2ZW50SWQxID0gdXVpZCgpO1xuICBjb25zdCBwcmVFdmVudElkID0gZXZlbnQ/LnByZUV2ZW50SWQgfHwgYCR7ZXZlbnRJZH0jJHtldmVudD8uY2FsZW5kYXJJZH1gO1xuICBjb25zdCBwb3N0RXZlbnRJZCA9IGV2ZW50Py5wb3N0RXZlbnRJZCB8fCBgJHtldmVudElkMX0jJHtldmVudD8uY2FsZW5kYXJJZH1gO1xuXG4gIGxldCB2YWx1ZXNUb1JldHVybjogYW55ID0ge307XG4gIHZhbHVlc1RvUmV0dXJuLm5ld0V2ZW50ID0gZXZlbnQ7XG5cbiAgaWYgKGJlc3RNYXRjaENhdGVnb3J5Py5kZWZhdWx0VGltZUJsb2NraW5nPy5hZnRlckV2ZW50KSB7XG4gICAgY29uc3QgZm9ybWF0dGVkWm9uZUFmdGVyRXZlbnRFbmREYXRlID0gZGF5anMoZXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooZXZlbnQ/LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLmFkZChiZXN0TWF0Y2hDYXRlZ29yeS5kZWZhdWx0VGltZUJsb2NraW5nLmFmdGVyRXZlbnQsICdtJylcbiAgICAgIC5mb3JtYXQoKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRab25lQWZ0ZXJFdmVudFN0YXJ0RGF0ZSA9IGRheWpzKGV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KGV2ZW50Py50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5mb3JtYXQoKTtcblxuICAgIGNvbnN0IGFmdGVyRXZlbnQ6IEV2ZW50UGx1c1R5cGUgPSB7XG4gICAgICBpZDogcG9zdEV2ZW50SWQsXG4gICAgICBpc1ByZUV2ZW50OiBmYWxzZSxcbiAgICAgIGZvckV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgaXNQb3N0RXZlbnQ6IHRydWUsXG4gICAgICBub3RlczogJ0J1ZmZlciB0aW1lJyxcbiAgICAgIHN1bW1hcnk6ICdCdWZmZXIgdGltZScsXG4gICAgICBzdGFydERhdGU6IGZvcm1hdHRlZFpvbmVBZnRlckV2ZW50U3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZTogZm9ybWF0dGVkWm9uZUFmdGVyRXZlbnRFbmREYXRlLFxuICAgICAgbWV0aG9kOiBldmVudD8ucG9zdEV2ZW50SWQgPyAndXBkYXRlJyA6ICdjcmVhdGUnLFxuICAgICAgdXNlcklkOiBldmVudD8udXNlcklkLFxuICAgICAgY3JlYXRlZERhdGU6IGRheWpzKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICBpc0ZvbGxvd1VwOiBmYWxzZSxcbiAgICAgIG1vZGlmaWFibGU6IHRydWUsXG4gICAgICBhbnlvbmVDYW5BZGRTZWxmOiBmYWxzZSxcbiAgICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogZmFsc2UsXG4gICAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0czogZmFsc2UsXG4gICAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLFxuICAgICAgb3JpZ2luYWxBbGxEYXk6IGZhbHNlLFxuICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjYWxlbmRhcklkOiBldmVudD8uY2FsZW5kYXJJZCxcbiAgICAgIHRpbWV6b25lOiBldmVudD8udGltZXpvbmUsXG4gICAgICBldmVudElkOiBwb3N0RXZlbnRJZC5zcGxpdCgnIycpWzBdLFxuICAgIH07XG4gICAgdmFsdWVzVG9SZXR1cm4uYWZ0ZXJFdmVudCA9IGFmdGVyRXZlbnQ7XG4gICAgdmFsdWVzVG9SZXR1cm4ubmV3RXZlbnQgPSB7XG4gICAgICAuLi52YWx1ZXNUb1JldHVybi5uZXdFdmVudCxcbiAgICAgIHBvc3RFdmVudElkLFxuICAgICAgdGltZUJsb2NraW5nOiB7XG4gICAgICAgIC4uLnZhbHVlc1RvUmV0dXJuPy5uZXdFdmVudD8udGltZUJsb2NraW5nLFxuICAgICAgICBhZnRlckV2ZW50OiBiZXN0TWF0Y2hDYXRlZ29yeS5kZWZhdWx0VGltZUJsb2NraW5nLmFmdGVyRXZlbnQsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBpZiAoYmVzdE1hdGNoQ2F0ZWdvcnk/LmRlZmF1bHRUaW1lQmxvY2tpbmc/LmJlZm9yZUV2ZW50KSB7XG4gICAgY29uc3QgZm9ybWF0dGVkWm9uZUJlZm9yZUV2ZW50U3RhcnREYXRlID0gZGF5anMoXG4gICAgICBldmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpXG4gICAgKVxuICAgICAgLnR6KGV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLnN1YnRyYWN0KGJlc3RNYXRjaENhdGVnb3J5LmRlZmF1bHRUaW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQsICdtJylcbiAgICAgIC5mb3JtYXQoKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRab25lQmVmb3JlRXZlbnRFbmREYXRlID0gZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5mb3JtYXQoKTtcblxuICAgIGNvbnN0IGJlZm9yZUV2ZW50OiBFdmVudFBsdXNUeXBlID0ge1xuICAgICAgaWQ6IHByZUV2ZW50SWQsXG4gICAgICBpc1ByZUV2ZW50OiB0cnVlLFxuICAgICAgaXNQb3N0RXZlbnQ6IGZhbHNlLFxuICAgICAgZm9yRXZlbnRJZDogZXZlbnQuaWQsXG4gICAgICBub3RlczogJ0J1ZmZlciB0aW1lJyxcbiAgICAgIHN1bW1hcnk6ICdCdWZmZXIgdGltZScsXG4gICAgICBzdGFydERhdGU6IGZvcm1hdHRlZFpvbmVCZWZvcmVFdmVudFN0YXJ0RGF0ZSxcbiAgICAgIGVuZERhdGU6IGZvcm1hdHRlZFpvbmVCZWZvcmVFdmVudEVuZERhdGUsXG4gICAgICBtZXRob2Q6IGV2ZW50Py5wcmVFdmVudElkID8gJ3VwZGF0ZScgOiAnY3JlYXRlJyxcbiAgICAgIHVzZXJJZDogZXZlbnQ/LnVzZXJJZCxcbiAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgIHByaW9yaXR5OiAxLFxuICAgICAgaXNGb2xsb3dVcDogZmFsc2UsXG4gICAgICBtb2RpZmlhYmxlOiB0cnVlLFxuICAgICAgYW55b25lQ2FuQWRkU2VsZjogZmFsc2UsXG4gICAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnM6IGZhbHNlLFxuICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHM6IGZhbHNlLFxuICAgICAgb3JpZ2luYWxTdGFydERhdGU6IHVuZGVmaW5lZCxcbiAgICAgIG9yaWdpbmFsQWxsRGF5OiBmYWxzZSxcbiAgICAgIHVwZGF0ZWRBdDogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgY2FsZW5kYXJJZDogZXZlbnQ/LmNhbGVuZGFySWQsXG4gICAgICB0aW1lem9uZTogZXZlbnQ/LnRpbWV6b25lLFxuICAgICAgZXZlbnRJZDogcHJlRXZlbnRJZC5zcGxpdCgnIycpWzBdLFxuICAgIH07XG4gICAgdmFsdWVzVG9SZXR1cm4uYmVmb3JlRXZlbnQgPSBiZWZvcmVFdmVudDtcbiAgICB2YWx1ZXNUb1JldHVybi5uZXdFdmVudCA9IHtcbiAgICAgIC4uLnZhbHVlc1RvUmV0dXJuLm5ld0V2ZW50LFxuICAgICAgcHJlRXZlbnRJZCxcbiAgICAgIHRpbWVCbG9ja2luZzoge1xuICAgICAgICAuLi52YWx1ZXNUb1JldHVybj8ubmV3RXZlbnQ/LnRpbWVCbG9ja2luZyxcbiAgICAgICAgYmVmb3JlRXZlbnQ6IGJlc3RNYXRjaENhdGVnb3J5LmRlZmF1bHRUaW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gdmFsdWVzVG9SZXR1cm47XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVmFsdWVzRm9yTWVldGluZ1R5cGVDYXRlZ29yaWVzID0gYXN5bmMgKFxuICBldmVudCxcbiAgbmV3RXZlbnQxOiBFdmVudFBsdXNUeXBlLFxuICBiZXN0TWF0Y2hDYXRlZ29yaWVzOiBDYXRlZ29yeVR5cGVbXSxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIG5ld1JlbWluZGVyczE/OiBSZW1pbmRlclR5cGVbXSxcbiAgbmV3VGltZUJsb2NraW5nMT86IHtcbiAgICBiZWZvcmVFdmVudD86IEV2ZW50UGx1c1R5cGU7XG4gICAgYWZ0ZXJFdmVudD86IEV2ZW50UGx1c1R5cGU7XG4gIH0sXG4gIHByZXZpb3VzRXZlbnQ/OiBFdmVudFBsdXNUeXBlXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIShiZXN0TWF0Y2hDYXRlZ29yaWVzPy5sZW5ndGggPiAwKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnYmVzdE1hdGNoQ2F0ZWdvcmllcyBjYW5ub3QgYmUgZW1wdHkgaW5zaWRlIHVwZGF0ZVZhbHVlc0Zvck1lZXRpbmdUeXBlQ2F0ZWdvcmllcyAnXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgbmV3RXZlbnQgPSBuZXdFdmVudDE7XG4gICAgbGV0IG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczEgfHwgW107XG4gICAgbGV0IG5ld0J1ZmZlclRpbWUgPSBuZXdUaW1lQmxvY2tpbmcxIHx8IHt9O1xuICAgIGNvbnN0IG5ld0NhdGVnb3J5Q29uc3RhbnRFdmVudHMgPSBjb3B5T3ZlckNhdGVnb3J5RGVmYXVsdHNGb3JNZWV0aW5nVHlwZShcbiAgICAgIGV2ZW50LFxuICAgICAgYmVzdE1hdGNoQ2F0ZWdvcmllc1xuICAgICk7XG4gICAgY29uc29sZS5sb2cobmV3Q2F0ZWdvcnlDb25zdGFudEV2ZW50cywgJyBuZXdDYXRlZ29yeUNvbnN0YW50RXZlbnRzJyk7XG5cbiAgICBpZiAobmV3Q2F0ZWdvcnlDb25zdGFudEV2ZW50cz8ubmV3RXZlbnRNZWV0aW5nPy5pZCkge1xuICAgICAgbmV3RXZlbnQgPSB7IC4uLm5ld0V2ZW50LCAuLi5uZXdDYXRlZ29yeUNvbnN0YW50RXZlbnRzLm5ld0V2ZW50TWVldGluZyB9O1xuICAgICAgY29uc3QgbWVldGluZ0NhdGVnb3J5ID0gYmVzdE1hdGNoQ2F0ZWdvcmllcz8uZmluZChcbiAgICAgICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBtZWV0aW5nTGFiZWxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG9sZFJlbWluZGVycyA9IGF3YWl0IGxpc3RSZW1pbmRlcnNGb3JFdmVudChcbiAgICAgICAgbmV3Q2F0ZWdvcnlDb25zdGFudEV2ZW50cy5uZXdFdmVudE1lZXRpbmcuaWQsXG4gICAgICAgIHVzZXJJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlbWluZGVycyA9IGNyZWF0ZVJlbWluZGVyc1VzaW5nQ2F0ZWdvcnlEZWZhdWx0c0ZvckV2ZW50KFxuICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgbWVldGluZ0NhdGVnb3J5LFxuICAgICAgICBvbGRSZW1pbmRlcnMsXG4gICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhyZW1pbmRlcnMsICcgcmVtaW5kZXJzJyk7XG4gICAgICBpZiAocmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG5ld1JlbWluZGVycy5wdXNoKC4uLnJlbWluZGVycyk7XG4gICAgICAgIG5ld1JlbWluZGVycyA9IF8udW5pcUJ5KG5ld1JlbWluZGVycywgJ21pbnV0ZXMnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYnVmZmVyVGltZSA9IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGb3JDYXRlZ29yeURlZmF1bHRzKFxuICAgICAgICBtZWV0aW5nQ2F0ZWdvcnksXG4gICAgICAgIG5ld0V2ZW50LFxuICAgICAgICBwcmV2aW91c0V2ZW50XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coYnVmZmVyVGltZSwgJyB0aW1lQmxvY2tpbmcnKTtcbiAgICAgIGlmIChidWZmZXJUaW1lPy5iZWZvcmVFdmVudCkge1xuICAgICAgICBuZXdCdWZmZXJUaW1lLmJlZm9yZUV2ZW50ID0gYnVmZmVyVGltZS5iZWZvcmVFdmVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKGJ1ZmZlclRpbWU/LmFmdGVyRXZlbnQpIHtcbiAgICAgICAgbmV3QnVmZmVyVGltZS5hZnRlckV2ZW50ID0gYnVmZmVyVGltZS5hZnRlckV2ZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGJ1ZmZlclRpbWU/Lm5ld0V2ZW50Py5wcmVFdmVudElkIHx8XG4gICAgICAgIGJ1ZmZlclRpbWU/Lm5ld0V2ZW50Py5wb3N0RXZlbnRJZFxuICAgICAgKSB7XG4gICAgICAgIG5ld0V2ZW50ID0gYnVmZmVyVGltZS5uZXdFdmVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3Q2F0ZWdvcnlDb25zdGFudEV2ZW50cz8ubmV3RXZlbnRFeHRlcm5hbD8uaWQpIHtcbiAgICAgIG5ld0V2ZW50ID0geyAuLi5uZXdFdmVudCwgLi4ubmV3Q2F0ZWdvcnlDb25zdGFudEV2ZW50cy5uZXdFdmVudEV4dGVybmFsIH07XG4gICAgICBjb25zdCBleHRlcm5hbENhdGVnb3J5ID0gYmVzdE1hdGNoQ2F0ZWdvcmllcz8uZmluZChcbiAgICAgICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBleHRlcm5hbE1lZXRpbmdMYWJlbFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb2xkUmVtaW5kZXJzID0gYXdhaXQgbGlzdFJlbWluZGVyc0ZvckV2ZW50KFxuICAgICAgICBuZXdDYXRlZ29yeUNvbnN0YW50RXZlbnRzLm5ld0V2ZW50RXh0ZXJuYWwuaWQsXG4gICAgICAgIHVzZXJJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlbWluZGVycyA9IGNyZWF0ZVJlbWluZGVyc1VzaW5nQ2F0ZWdvcnlEZWZhdWx0c0ZvckV2ZW50KFxuICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgZXh0ZXJuYWxDYXRlZ29yeSxcbiAgICAgICAgb2xkUmVtaW5kZXJzLFxuICAgICAgICBwcmV2aW91c0V2ZW50XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2cocmVtaW5kZXJzLCAnIHJlbWluZGVycycpO1xuICAgICAgaWYgKHJlbWluZGVycz8ubGVuZ3RoID4gMCkge1xuICAgICAgICBuZXdSZW1pbmRlcnMucHVzaCguLi5yZW1pbmRlcnMpO1xuICAgICAgICBuZXdSZW1pbmRlcnMgPSBfLnVuaXFCeShuZXdSZW1pbmRlcnMsICdtaW51dGVzJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRpbWVCbG9ja2luZyA9IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGb3JDYXRlZ29yeURlZmF1bHRzKFxuICAgICAgICBleHRlcm5hbENhdGVnb3J5LFxuICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgcHJldmlvdXNFdmVudFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKHRpbWVCbG9ja2luZywgJyB0aW1lQmxvY2tpbmcnKTtcbiAgICAgIGlmICh0aW1lQmxvY2tpbmc/LmJlZm9yZUV2ZW50KSB7XG4gICAgICAgIG5ld0J1ZmZlclRpbWUuYmVmb3JlRXZlbnQgPSB0aW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQpIHtcbiAgICAgICAgbmV3QnVmZmVyVGltZS5hZnRlckV2ZW50ID0gdGltZUJsb2NraW5nLmFmdGVyRXZlbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGltZUJsb2NraW5nPy5uZXdFdmVudD8ucHJlRXZlbnRJZCB8fFxuICAgICAgICB0aW1lQmxvY2tpbmc/Lm5ld0V2ZW50Py5wb3N0RXZlbnRJZFxuICAgICAgKSB7XG4gICAgICAgIG5ld0V2ZW50ID0gdGltZUJsb2NraW5nLm5ld0V2ZW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBuZXdFdmVudCwgbmV3UmVtaW5kZXJzLCBuZXdUaW1lQmxvY2tpbmc6IG5ld0J1ZmZlclRpbWUgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSB2YWx1ZXMgZm9yIGRlZmF1bHQgY2F0ZWdvcmllcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMgPSBhc3luYyAoXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICB2ZWN0b3I6IG51bWJlcltdXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkLCB1c2VySWQgfSA9IGV2ZW50O1xuICAgIGNvbnNvbGUubG9nKGlkLCAnIGlkIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50Rm9yQ2F0ZWdvcnlEZWZhdWx0cycpO1xuXG4gICAgY29uc3QgY2F0ZWdvcmllczogQ2F0ZWdvcnlUeXBlW10gPSBhd2FpdCBnZXRVc2VyQ2F0ZWdvcmllcyh1c2VySWQpO1xuXG4gICAgaWYgKCFjYXRlZ29yaWVzPy5bMF0/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdjYXRlZ29yaWVzIGlzIG5vdCBhdmFpbGFibGUgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMnXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgY2F0ZWdvcmllcyxcbiAgICAgIGlkLFxuICAgICAgJyBjYXRlZ29yaWVzLCBpZCBwcm9jZXNzVXNlckV2ZW50Rm9yQ2F0ZWdvcnlEZWZhdWx0cydcbiAgICApO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCBmaW5kQmVzdE1hdGNoQ2F0ZWdvcnkyKGV2ZW50LCBjYXRlZ29yaWVzKTtcbiAgICBjb25zb2xlLmxvZyhib2R5LCBpZCwgJyBib2R5LCBpZCBwcm9jZXNzVXNlckV2ZW50Rm9yQ2F0ZWdvcnlEZWZhdWx0cycpO1xuICAgIGNvbnN0IHsgbGFiZWxzLCBzY29yZXMgfSA9IGJvZHk7XG5cbiAgICBjb25zdCBiZXN0TWF0Y2hMYWJlbCA9IHByb2Nlc3NCZXN0TWF0Y2hDYXRlZ29yaWVzKGJvZHksIGxhYmVscyk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBiZXN0TWF0Y2hMYWJlbCxcbiAgICAgIGlkLFxuICAgICAgJyBiZXN0TWF0Y2hMYWJlbCwgaWQgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMnXG4gICAgKTtcblxuICAgIGlmIChiZXN0TWF0Y2hMYWJlbCkge1xuICAgICAgY29uc3QgYmVzdE1hdGNoQ2F0ZWdvcnkgPSBjYXRlZ29yaWVzPy5maW5kKFxuICAgICAgICAoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Lm5hbWUgPT09IGJlc3RNYXRjaExhYmVsXG4gICAgICApO1xuICAgICAgbGV0IGJlc3RNYXRjaFBsdXNNZWV0aW5nQ2F0ZWdvcmllcyA9XG4gICAgICAgIGF3YWl0IHByb2Nlc3NFdmVudEZvck1lZXRpbmdUeXBlQ2F0ZWdvcmllcyhcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yeSxcbiAgICAgICAgICBsYWJlbHMsXG4gICAgICAgICAgc2NvcmVzLFxuICAgICAgICAgIGNhdGVnb3JpZXNcbiAgICAgICAgKTtcbiAgICAgIGlmIChiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgYmVzdE1hdGNoUGx1c01lZXRpbmdDYXRlZ29yaWVzID0gZ2V0VW5pcXVlTGFiZWxzKFxuICAgICAgICAgIGJlc3RNYXRjaFBsdXNNZWV0aW5nQ2F0ZWdvcmllc1xuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXMsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgJyBiZXN0TWF0Y2hBbmRNZWV0aW5nQ2F0ZWdvcmllcywgaWQgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdDYXRlZ29yeURlZmF1bHRFdmVudCA9IGNvcHlPdmVyQ2F0ZWdvcnlEZWZhdWx0cyhcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIGJlc3RNYXRjaENhdGVnb3J5XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIG5ld0NhdGVnb3J5RGVmYXVsdEV2ZW50LFxuICAgICAgICBpZCxcbiAgICAgICAgJyBuZXdDYXRlZ29yeURlZmF1bHRFdmVudCwgaWQgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMnXG4gICAgICApO1xuXG4gICAgICBsZXQgbmV3RXZlbnQ6IEV2ZW50UGx1c1R5cGUgPSBuZXdDYXRlZ29yeURlZmF1bHRFdmVudCA/PyBldmVudDtcbiAgICAgIGNvbnNvbGUubG9nKG5ld0V2ZW50LCAnIG5ld0V2ZW50IHByb2Nlc3NVc2VyRXZlbnRGb3JDYXRlZ29yeURlZmF1bHRzJyk7XG4gICAgICBsZXQgbmV3UmVtaW5kZXJzOiBSZW1pbmRlclR5cGVbXSA9IFtdO1xuICAgICAgbGV0IG5ld1RpbWVCbG9ja2luZzogQnVmZmVyVGltZU9iamVjdFR5cGUgPSB7fTtcblxuICAgICAgY29uc3Qge1xuICAgICAgICBuZXdFdmVudDogbmV3RXZlbnQxLFxuICAgICAgICBuZXdSZW1pbmRlcnM6IG5ld1JlbWluZGVyczEsXG4gICAgICAgIG5ld1RpbWVCbG9ja2luZzogbmV3VGltZUJsb2NraW5nMSxcbiAgICAgIH0gPSBhd2FpdCBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGb3JCZXN0TWF0Y2hDYXRlZ29yeShcbiAgICAgICAgaWQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgIGJlc3RNYXRjaENhdGVnb3J5LFxuICAgICAgICBuZXdSZW1pbmRlcnMsXG4gICAgICAgIG5ld1RpbWVCbG9ja2luZ1xuICAgICAgKTtcbiAgICAgIG5ld0V2ZW50ID0gbmV3RXZlbnQxO1xuICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMTtcbiAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzE7XG5cbiAgICAgIGlmIChiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlFdmVudHM6IENhdGVnb3J5RXZlbnRUeXBlW10gPVxuICAgICAgICAgIGJlc3RNYXRjaFBsdXNNZWV0aW5nQ2F0ZWdvcmllcy5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RXZlbnQ6IENhdGVnb3J5RXZlbnRUeXBlID0ge1xuICAgICAgICAgICAgICBjYXRlZ29yeUlkOiBjLmlkLFxuICAgICAgICAgICAgICBldmVudElkOiBpZCxcbiAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0gYXMgQ2F0ZWdvcnlFdmVudFR5cGU7XG4gICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnlFdmVudDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgY2F0ZWdvcnlFdmVudHMsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgJyBjYXRlZ29yeUV2ZW50cywgaWQgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMnXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IGNyZWF0ZUNhdGVnb3J5RXZlbnRzKGNhdGVnb3J5RXZlbnRzKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudDEsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzOiBuZXdSZW1pbmRlcnMxLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzogbmV3VGltZUJsb2NraW5nMSxcbiAgICAgICAgfSA9IGF3YWl0IHVwZGF0ZVZhbHVlc0Zvck1lZXRpbmdUeXBlQ2F0ZWdvcmllcyhcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICBiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXMsXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmdcbiAgICAgICAgKTtcbiAgICAgICAgbmV3RXZlbnQgPSBuZXdFdmVudDE7XG4gICAgICAgIG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczE7XG4gICAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzE7XG4gICAgICB9XG5cbiAgICAgIG5ld0V2ZW50LnZlY3RvciA9IHZlY3RvcjtcblxuICAgICAgY29uc29sZS5sb2cobmV3RXZlbnQsICcgbmV3RXZlbnQgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHMnKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBuZXdSZW1pbmRlcnMsXG4gICAgICAgICcgbmV3UmVtaW5kZXJzIHByb2Nlc3NVc2VyRXZlbnRGb3JDYXRlZ29yeURlZmF1bHRzJ1xuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBuZXdUaW1lQmxvY2tpbmcsXG4gICAgICAgICcgbmV3VGltZUJsb2NraW5nIHByb2Nlc3NVc2VyRXZlbnRGb3JDYXRlZ29yeURlZmF1bHRzJ1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgfTtcbiAgICB9XG4gICAgZXZlbnQudmVjdG9yID0gdmVjdG9yO1xuICAgIHJldHVybiB7XG4gICAgICBuZXdFdmVudDogZXZlbnQsXG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgZScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgbGlzdENhdGVnb3JpZXNGb3JFdmVudCA9IGFzeW5jIChldmVudElkOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhldmVudElkLCAnIGV2ZW50SWQgaW5zaWRlIGxpc3RDYXRlZ29yaWVzRm9yRXZlbnQnKTtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ2xpc3RDYXRlZ29yaWVzRm9yRXZlbnQnO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgcXVlcnkgbGlzdENhdGVnb3JpZXNGb3JFdmVudCgkZXZlbnRJZDogU3RyaW5nISkge1xuICAgICAgICBDYXRlZ29yeV9FdmVudCh3aGVyZToge2V2ZW50SWQ6IHtfZXE6ICRldmVudElkfX0pIHtcbiAgICAgICAgICBDYXRlZ29yeSB7XG4gICAgICAgICAgICBjb2xvclxuICAgICAgICAgICAgY29weUF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgY29weUlzQnJlYWtcbiAgICAgICAgICAgIGNvcHlJc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgICAgY29weUlzTWVldGluZ1xuICAgICAgICAgICAgY29weU1vZGlmaWFibGVcbiAgICAgICAgICAgIGNvcHlQcmlvcml0eUxldmVsXG4gICAgICAgICAgICBjb3B5UmVtaW5kZXJzXG4gICAgICAgICAgICBjb3B5VGltZUJsb2NraW5nXG4gICAgICAgICAgICBjb3B5VGltZVByZWZlcmVuY2VcbiAgICAgICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICAgICAgICBkZWZhdWx0QXZhaWxhYmlsaXR5XG4gICAgICAgICAgICBkZWZhdWx0RXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZVxuICAgICAgICAgICAgZGVmYXVsdElzQnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHRJc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgICAgZGVmYXVsdElzTWVldGluZ1xuICAgICAgICAgICAgZGVmYXVsdE1lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgICAgICBkZWZhdWx0TW9kaWZpYWJsZVxuICAgICAgICAgICAgZGVmYXVsdFByaW9yaXR5TGV2ZWxcbiAgICAgICAgICAgIGRlZmF1bHRSZW1pbmRlcnNcbiAgICAgICAgICAgIGRlZmF1bHRUaW1lQmxvY2tpbmdcbiAgICAgICAgICAgIGRlZmF1bHRUaW1lUHJlZmVyZW5jZVxuICAgICAgICAgICAgZGVsZXRlZFxuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhdGVnb3J5SWRcbiAgICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICAgIGRlbGV0ZWRcbiAgICAgICAgICBldmVudElkXG4gICAgICAgICAgaWRcbiAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgY29uc3QgcmVzOiB7IGRhdGE6IHsgQ2F0ZWdvcnlfRXZlbnQ6IENhdGVnb3J5RXZlbnRUeXBlW10gfSB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgIGV2ZW50SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKHJlcywgJyBsaXN0Q2F0ZWdvcmllc0ZvckV2ZW50Jyk7XG4gICAgY29uc3QgY2F0ZWdvcmllczogQ2F0ZWdvcnlUeXBlW10gPSByZXM/LmRhdGE/LkNhdGVnb3J5X0V2ZW50Py5tYXAoXG4gICAgICAoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Py5DYXRlZ29yeVxuICAgICk/LmZpbHRlcigoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Py5pZCAhPT0gbnVsbCk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBjYXRlZ29yaWVzLFxuICAgICAgJyBjYXRlZ29yaWVzIGZyb20gbGlzdENhdGVnb3JpZXNGb3JFdmVudCBhZnRlciBmaWx0ZXInXG4gICAgKTtcbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGxpc3RDYXRlZ29yaWVzRm9yRXZlbnQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NCZXN0TWF0Y2hDYXRlZ29yaWVzTm9UaHJlc2hvbGQgPSAoXG4gIGJvZHksXG4gIG5ld1Bvc3NpYmxlTGFiZWxzXG4pID0+IHtcbiAgY29uc3QgeyBzY29yZXMgfSA9IGJvZHk7XG4gIGxldCBiZXN0TWF0Y2hDYXRlZ29yeSA9ICcnO1xuICBsZXQgYmVzdE1hdGNoU2NvcmUgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1Bvc3NpYmxlTGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGFiZWwgPSBuZXdQb3NzaWJsZUxhYmVsc1tpXTtcbiAgICBjb25zdCBzY29yZSA9IHNjb3Jlc1tpXTtcblxuICAgIGlmIChzY29yZSA+IGJlc3RNYXRjaFNjb3JlKSB7XG4gICAgICBiZXN0TWF0Y2hDYXRlZ29yeSA9IGxhYmVsO1xuICAgICAgYmVzdE1hdGNoU2NvcmUgPSBzY29yZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmVzdE1hdGNoQ2F0ZWdvcnk7XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHNXaXRoVXNlck1vZGlmaWVkQ2F0ZWdvcmllcyA9XG4gIGFzeW5jIChldmVudDogRXZlbnRQbHVzVHlwZSwgdmVjdG9yOiBudW1iZXJbXSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkLCB1c2VySWQgfSA9IGV2ZW50O1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGlkLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgICcgaWQsIHVzZXJJZCBpbnNpZGUgcHJvY2Vzc1VzZXJFdmVudEZvckNhdGVnb3J5RGVmYXVsdHNXaXRoVXNlck1vZGlmaWVkQ2F0ZWdvcmllcydcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdID0gYXdhaXQgbGlzdENhdGVnb3JpZXNGb3JFdmVudChcbiAgICAgICAgZXZlbnQ/LmlkXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhjYXRlZ29yaWVzLCAnIGNhdGVnb3JpZXMnKTtcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCBmaW5kQmVzdE1hdGNoQ2F0ZWdvcnkyKGV2ZW50LCBjYXRlZ29yaWVzKTtcbiAgICAgIGNvbnNvbGUubG9nKGJvZHksICcgYm9keScpO1xuICAgICAgY29uc3QgeyBsYWJlbHMsIHNjb3JlcyB9ID0gYm9keTtcblxuICAgICAgY29uc3QgYmVzdE1hdGNoTGFiZWwgPSBwcm9jZXNzQmVzdE1hdGNoQ2F0ZWdvcmllc05vVGhyZXNob2xkKFxuICAgICAgICBib2R5LFxuICAgICAgICBsYWJlbHNcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhiZXN0TWF0Y2hMYWJlbCwgJyBiZXN0TWF0Y2hMYWJlbCcpO1xuICAgICAgbGV0IGJlc3RNYXRjaENhdGVnb3J5OiBDYXRlZ29yeVR5cGUgfCBudWxsID0gbnVsbDtcbiAgICAgIGxldCBuZXdFdmVudDogRXZlbnRQbHVzVHlwZSA9IGV2ZW50O1xuICAgICAgY29uc29sZS5sb2cobmV3RXZlbnQsICcgbmV3RXZlbnQnKTtcbiAgICAgIGxldCBuZXdSZW1pbmRlcnM6IFJlbWluZGVyVHlwZVtdID0gW107XG4gICAgICBsZXQgbmV3VGltZUJsb2NraW5nOiBCdWZmZXJUaW1lT2JqZWN0VHlwZSB8IG9iamVjdCA9IHt9O1xuICAgICAgaWYgKGJlc3RNYXRjaExhYmVsKSB7XG4gICAgICAgIGJlc3RNYXRjaENhdGVnb3J5ID0gY2F0ZWdvcmllcy5maW5kKFxuICAgICAgICAgIChjYXRlZ29yeSkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gYmVzdE1hdGNoTGFiZWxcbiAgICAgICAgKTtcbiAgICAgICAgbGFiZWxzLnB1c2gobWVldGluZ0xhYmVsLCBleHRlcm5hbE1lZXRpbmdMYWJlbCk7XG4gICAgICAgIHNjb3Jlcy5wdXNoKDAsIDApO1xuICAgICAgICBsZXQgYmVzdE1hdGNoUGx1c01lZXRpbmdDYXRlZ29yaWVzID1cbiAgICAgICAgICBwcm9jZXNzRXZlbnRGb3JNZWV0aW5nVHlwZUNhdGVnb3JpZXMoXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgIGJlc3RNYXRjaENhdGVnb3J5LFxuICAgICAgICAgICAgbGFiZWxzLFxuICAgICAgICAgICAgc2NvcmVzLFxuICAgICAgICAgICAgY2F0ZWdvcmllc1xuICAgICAgICAgICk7XG4gICAgICAgIGlmIChiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXMgPSBnZXRVbmlxdWVMYWJlbHMoXG4gICAgICAgICAgICBiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXNcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYmVzdE1hdGNoUGx1c01lZXRpbmdDYXRlZ29yaWVzLFxuICAgICAgICAgICAgJyBiZXN0TWF0Y2hBbmRNZWV0aW5nQ2F0ZWdvcmllcydcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RXZlbnRzOiBDYXRlZ29yeUV2ZW50VHlwZVtdID1cbiAgICAgICAgICAgIGJlc3RNYXRjaFBsdXNNZWV0aW5nQ2F0ZWdvcmllcy5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlFdmVudDogQ2F0ZWdvcnlFdmVudFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogYy5pZCxcbiAgICAgICAgICAgICAgICBldmVudElkOiBpZCxcbiAgICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICB9IGFzIENhdGVnb3J5RXZlbnRUeXBlO1xuICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnlFdmVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5RXZlbnRzLCAnIGNhdGVnb3J5RXZlbnRzJyk7XG4gICAgICAgICAgYXdhaXQgY3JlYXRlQ2F0ZWdvcnlFdmVudHMoY2F0ZWdvcnlFdmVudHMpO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudDEsXG4gICAgICAgICAgICBuZXdSZW1pbmRlcnM6IG5ld1JlbWluZGVyczEsXG4gICAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgICAgfSA9IGF3YWl0IHVwZGF0ZVZhbHVlc0Zvck1lZXRpbmdUeXBlQ2F0ZWdvcmllcyhcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICBiZXN0TWF0Y2hQbHVzTWVldGluZ0NhdGVnb3JpZXMsXG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBuZXdSZW1pbmRlcnMsXG4gICAgICAgICAgICBuZXdUaW1lQmxvY2tpbmdcbiAgICAgICAgICApO1xuICAgICAgICAgIG5ld0V2ZW50ID0gbmV3RXZlbnQxO1xuICAgICAgICAgIG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczE7XG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nID0gbmV3VGltZUJsb2NraW5nMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgbmV3Q2F0ZWdvcnlEZWZhdWx0RXZlbnQ6IEV2ZW50UGx1c1R5cGUgfCBudWxsID0gbnVsbDtcbiAgICAgIGlmIChiZXN0TWF0Y2hDYXRlZ29yeSkge1xuICAgICAgICBuZXdDYXRlZ29yeURlZmF1bHRFdmVudCA9IGNvcHlPdmVyQ2F0ZWdvcnlEZWZhdWx0cyhcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yeVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2cobmV3Q2F0ZWdvcnlEZWZhdWx0RXZlbnQsICcgbmV3Q2F0ZWdvcnlEZWZhdWx0RXZlbnQnKTtcblxuICAgICAgbmV3RXZlbnQgPSBuZXdDYXRlZ29yeURlZmF1bHRFdmVudCA/PyBuZXdFdmVudCA/PyBldmVudDtcbiAgICAgIGNvbnNvbGUubG9nKG5ld0V2ZW50LCAnIG5ld0V2ZW50Jyk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudDEsXG4gICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmcxLFxuICAgICAgfSA9IGF3YWl0IGNyZWF0ZVJlbWluZGVyc0FuZFRpbWVCbG9ja2luZ0ZvckJlc3RNYXRjaENhdGVnb3J5KFxuICAgICAgICBpZCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnksXG4gICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgbmV3VGltZUJsb2NraW5nIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlXG4gICAgICApO1xuXG4gICAgICBuZXdFdmVudCA9IG5ld0V2ZW50MTtcbiAgICAgIG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczE7XG4gICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlO1xuXG4gICAgICBpZiAoY2F0ZWdvcmllcz8ubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgbmV3RXZlbnQ6IG5ld0V2ZW50MSxcbiAgICAgICAgICBuZXdSZW1pbmRlcnM6IG5ld1JlbWluZGVyczEsXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmcxLFxuICAgICAgICB9ID0gYXdhaXQgdXBkYXRlVmFsdWVzRm9yTWVldGluZ1R5cGVDYXRlZ29yaWVzKFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgIGNhdGVnb3JpZXMsXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcgYXMgQnVmZmVyVGltZU9iamVjdFR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgbmV3RXZlbnQgPSBuZXdFdmVudDE7XG4gICAgICAgIG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczE7XG4gICAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzE7XG4gICAgICB9XG5cbiAgICAgIG5ld0V2ZW50LnZlY3RvciA9IHZlY3RvcjtcblxuICAgICAgY29uc29sZS5sb2cobmV3RXZlbnQsICcgbmV3RXZlbnQnKTtcbiAgICAgIGNvbnNvbGUubG9nKG5ld1JlbWluZGVycywgJyBuZXdSZW1pbmRlcnMnKTtcbiAgICAgIGNvbnNvbGUubG9nKG5ld1RpbWVCbG9ja2luZywgJyBuZXdUaW1lQmxvY2tpbmcnKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlLCAnIGUnKTtcbiAgICB9XG4gIH07XG5cbmV4cG9ydCBjb25zdCBnZXRFdmVudEZyb21QcmltYXJ5S2V5ID0gYXN5bmMgKFxuICBldmVudElkOiBzdHJpbmdcbik6IFByb21pc2U8RXZlbnRQbHVzVHlwZT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnZ2V0RXZlbnRGcm9tUHJpbWFyeUtleSc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IGdldEV2ZW50RnJvbVByaW1hcnlLZXkoJGV2ZW50SWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgIEV2ZW50X2J5X3BrKGlkOiAkZXZlbnRJZCkge1xuICAgICAgICAgICAgICBhbGxEYXlcbiAgICAgICAgICAgICAgYW55b25lQ2FuQWRkU2VsZlxuICAgICAgICAgICAgICBhdHRhY2htZW50c1xuICAgICAgICAgICAgICBhdHRlbmRlZXNPbWl0dGVkXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclxuICAgICAgICAgICAgICBjYWxlbmRhcklkXG4gICAgICAgICAgICAgIGNvbG9ySWRcbiAgICAgICAgICAgICAgY29uZmVyZW5jZUlkXG4gICAgICAgICAgICAgIGNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgICAgICAgY29weUNhdGVnb3JpZXNcbiAgICAgICAgICAgICAgY29weUR1cmF0aW9uXG4gICAgICAgICAgICAgIGNvcHlJc0JyZWFrXG4gICAgICAgICAgICAgIGNvcHlJc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgICAgICBjb3B5SXNNZWV0aW5nXG4gICAgICAgICAgICAgIGNvcHlNb2RpZmlhYmxlXG4gICAgICAgICAgICAgIGNvcHlQcmlvcml0eUxldmVsXG4gICAgICAgICAgICAgIGNvcHlSZW1pbmRlcnNcbiAgICAgICAgICAgICAgY29weVRpbWVCbG9ja2luZ1xuICAgICAgICAgICAgICBjb3B5VGltZVByZWZlcmVuY2VcbiAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgY3JlYXRvclxuICAgICAgICAgICAgICBkYWlseVRhc2tMaXN0XG4gICAgICAgICAgICAgIGRlbGV0ZWRcbiAgICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgICAgICAgZW5kRGF0ZVxuICAgICAgICAgICAgICBlbmRUaW1lVW5zcGVjaWZpZWRcbiAgICAgICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgICAgICBldmVudFR5cGVcbiAgICAgICAgICAgICAgZXh0ZW5kZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgIGZvbGxvd1VwRXZlbnRJZFxuICAgICAgICAgICAgICBmb3JFdmVudElkXG4gICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvclxuICAgICAgICAgICAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnNcbiAgICAgICAgICAgICAgZ3Vlc3RzQ2FuTW9kaWZ5XG4gICAgICAgICAgICAgIGd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzXG4gICAgICAgICAgICAgIGhhbmdvdXRMaW5rXG4gICAgICAgICAgICAgIGhhcmREZWFkbGluZVxuICAgICAgICAgICAgICBodG1sTGlua1xuICAgICAgICAgICAgICBpQ2FsVUlEXG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIGlzQnJlYWtcbiAgICAgICAgICAgICAgaXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgICAgaXNFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgICAgICAgIGlzRm9sbG93VXBcbiAgICAgICAgICAgICAgaXNNZWV0aW5nXG4gICAgICAgICAgICAgIGlzTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgICAgICAgaXNQb3N0RXZlbnRcbiAgICAgICAgICAgICAgaXNQcmVFdmVudFxuICAgICAgICAgICAgICBsaW5rc1xuICAgICAgICAgICAgICBsb2NhdGlvblxuICAgICAgICAgICAgICBsb2NrZWRcbiAgICAgICAgICAgICAgbWF4QXR0ZW5kZWVzXG4gICAgICAgICAgICAgIG1ldGhvZFxuICAgICAgICAgICAgICBtb2RpZmlhYmxlXG4gICAgICAgICAgICAgIG5lZ2F0aXZlSW1wYWN0RGF5T2ZXZWVrXG4gICAgICAgICAgICAgIG5lZ2F0aXZlSW1wYWN0U2NvcmVcbiAgICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3RUaW1lXG4gICAgICAgICAgICAgIG5vdGVzXG4gICAgICAgICAgICAgIG9yZ2FuaXplclxuICAgICAgICAgICAgICBvcmlnaW5hbEFsbERheVxuICAgICAgICAgICAgICBvcmlnaW5hbFN0YXJ0RGF0ZVxuICAgICAgICAgICAgICBvcmlnaW5hbFRpbWV6b25lXG4gICAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0RGF5T2ZXZWVrXG4gICAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0U2NvcmVcbiAgICAgICAgICAgICAgcG9zaXRpdmVJbXBhY3RUaW1lXG4gICAgICAgICAgICAgIHBvc3RFdmVudElkXG4gICAgICAgICAgICAgIHByZUV2ZW50SWRcbiAgICAgICAgICAgICAgcHJlZmVycmVkRGF5T2ZXZWVrXG4gICAgICAgICAgICAgIHByZWZlcnJlZEVuZFRpbWVSYW5nZVxuICAgICAgICAgICAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgICAgICAgICBwcmVmZXJyZWRUaW1lXG4gICAgICAgICAgICAgIHByaW9yaXR5XG4gICAgICAgICAgICAgIHByaXZhdGVDb3B5XG4gICAgICAgICAgICAgIHJlY3VycmVuY2VcbiAgICAgICAgICAgICAgcmVjdXJyZW5jZVJ1bGVcbiAgICAgICAgICAgICAgcmVjdXJyaW5nRXZlbnRJZFxuICAgICAgICAgICAgICBzZW5kVXBkYXRlc1xuICAgICAgICAgICAgICBzb2Z0RGVhZGxpbmVcbiAgICAgICAgICAgICAgc291cmNlXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZVxuICAgICAgICAgICAgICBzdGF0dXNcbiAgICAgICAgICAgICAgc3VtbWFyeVxuICAgICAgICAgICAgICB0YXNrSWRcbiAgICAgICAgICAgICAgdGFza1R5cGVcbiAgICAgICAgICAgICAgdGltZUJsb2NraW5nXG4gICAgICAgICAgICAgIHRpbWV6b25lXG4gICAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVxuICAgICAgICAgICAgICB1bmxpbmtcbiAgICAgICAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgICAgICAgIHVzZURlZmF1bHRBbGFybXNcbiAgICAgICAgICAgICAgdXNlcklkXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZEF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRDYXRlZ29yaWVzXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZER1cmF0aW9uXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZElzQnJlYWtcbiAgICAgICAgICAgICAgdXNlck1vZGlmaWVkSXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgICAgdXNlck1vZGlmaWVkSXNNZWV0aW5nXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZE1vZGlmaWFibGVcbiAgICAgICAgICAgICAgdXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRSZW1pbmRlcnNcbiAgICAgICAgICAgICAgdXNlck1vZGlmaWVkVGltZUJsb2NraW5nXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlXG4gICAgICAgICAgICAgIHZpc2liaWxpdHlcbiAgICAgICAgICAgICAgd2Vla2x5VGFza0xpc3RcbiAgICAgICAgICAgICAgYnlXZWVrRGF5XG4gICAgICAgICAgICAgIGxvY2FsU3luY2VkXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZENvbG9yXG4gICAgICAgICAgICAgIGNvcHlDb2xvclxuICAgICAgICAgICAgICBtZWV0aW5nSWRcbiAgICAgICAgICAgICAgY29weUV4dGVybmFsTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgICAgICAgY29weU1lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgICAgICAgIHVzZXJNb2RpZmllZEV4dGVybmFsTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgICAgICAgdXNlck1vZGlmaWVkTWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gIGA7XG4gICAgY29uc3QgcmVzOiB7IGRhdGE6IHsgRXZlbnRfYnlfcGs6IEV2ZW50UGx1c1R5cGUgfSB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgIGV2ZW50SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgZnJvbSBnZXRFdmVudEZyb21QcmltYXJ5S2V5Jyk7XG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uRXZlbnRfYnlfcGs7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIGdldEV2ZW50RnJvbVByaW1hcnlLZXknKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZURvY0luU2VhcmNoMyA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0U2VhcmNoQ2xpZW50KCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuZGVsZXRlKHtcbiAgICAgIGlkLFxuICAgICAgaW5kZXg6IHNlYXJjaEluZGV4LFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdEZWxldGluZyBkb2N1bWVudCBpbiBzZWFyY2g6Jyk7XG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UuYm9keSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBkZWxldGUgZG9jJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjb3B5T3ZlclByZXZpb3VzRXZlbnREZWZhdWx0cyA9IChcbiAgZXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIHByZXZpb3VzRXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIGNhdGVnb3J5PzogQ2F0ZWdvcnlUeXBlLFxuICB1c2VyUHJlZmVyZW5jZXM/OiBVc2VyUHJlZmVyZW5jZVR5cGVcbik6IEV2ZW50UGx1c1R5cGUgPT4ge1xuICBjb25zdCBwcmV2aW91c0R1cmF0aW9uID0gZGF5anNcbiAgICAuZHVyYXRpb24oXG4gICAgICBkYXlqcyhwcmV2aW91c0V2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoocHJldmlvdXNFdmVudD8udGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5kaWZmKFxuICAgICAgICAgIGRheWpzKHByZXZpb3VzRXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSkudHooXG4gICAgICAgICAgICBwcmV2aW91c0V2ZW50Py50aW1lem9uZSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gICAgLmFzTWludXRlcygpO1xuICByZXR1cm4ge1xuICAgIC4uLmV2ZW50LFxuICAgIHRyYW5zcGFyZW5jeTogIWV2ZW50Py51c2VyTW9kaWZpZWRBdmFpbGFiaWxpdHlcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weUF2YWlsYWJpbGl0eVxuICAgICAgICA/IHByZXZpb3VzRXZlbnQudHJhbnNwYXJlbmN5XG4gICAgICAgIDogY2F0ZWdvcnk/LmNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnRyYW5zcGFyZW5jeVxuICAgICAgICAgIDogY2F0ZWdvcnk/LmRlZmF1bHRBdmFpbGFiaWxpdHlcbiAgICAgICAgICAgID8gJ3RyYW5zcGFyZW50J1xuICAgICAgICAgICAgOiB1c2VyUHJlZmVyZW5jZXM/LmNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py50cmFuc3BhcmVuY3lcbiAgICAgICAgICAgICAgOiBldmVudD8udHJhbnNwYXJlbmN5XG4gICAgICA6IGV2ZW50LnRyYW5zcGFyZW5jeSxcbiAgICBwcmVmZXJyZWRUaW1lOiAhZXZlbnQ/LnVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlUaW1lUHJlZmVyZW5jZSAmJiBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5wcmVmZXJyZWRUaW1lXG4gICAgICAgIDogY2F0ZWdvcnk/LmNvcHlUaW1lUHJlZmVyZW5jZSAmJiBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICAgICAgOiB1c2VyUHJlZmVyZW5jZXM/LmNvcHlUaW1lUHJlZmVyZW5jZSAmJiBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFRpbWVcbiAgICAgICAgICAgIDogZXZlbnQ/LnByZWZlcnJlZFRpbWVcbiAgICAgIDogZXZlbnQucHJlZmVycmVkVGltZSxcbiAgICBwcmVmZXJyZWREYXlPZldlZWs6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlICYmIHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZERheU9mV2Vla1xuICAgICAgICA/IHByZXZpb3VzRXZlbnQucHJlZmVycmVkRGF5T2ZXZWVrXG4gICAgICAgIDogY2F0ZWdvcnk/LmNvcHlUaW1lUHJlZmVyZW5jZSAmJiBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWREYXlPZldlZWtcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZERheU9mV2Vla1xuICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5VGltZVByZWZlcmVuY2UgJiZcbiAgICAgICAgICAgICAgcHJldmlvdXNFdmVudD8ucHJlZmVycmVkRGF5T2ZXZWVrXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZERheU9mV2Vla1xuICAgICAgICAgICAgOiBldmVudD8ucHJlZmVycmVkRGF5T2ZXZWVrXG4gICAgICA6IGV2ZW50LnByZWZlcnJlZERheU9mV2VlayxcbiAgICBwcmVmZXJyZWRTdGFydFRpbWVSYW5nZTogIWV2ZW50Py51c2VyTW9kaWZpZWRUaW1lUHJlZmVyZW5jZVxuICAgICAgPyBwcmV2aW91c0V2ZW50Py5jb3B5VGltZVByZWZlcmVuY2UgJiZcbiAgICAgICAgcHJldmlvdXNFdmVudD8ucHJlZmVycmVkU3RhcnRUaW1lUmFuZ2VcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50LnByZWZlcnJlZFN0YXJ0VGltZVJhbmdlXG4gICAgICAgIDogY2F0ZWdvcnk/LmNvcHlUaW1lUHJlZmVyZW5jZSAmJiBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgICAgID8gcHJldmlvdXNFdmVudD8ucHJlZmVycmVkU3RhcnRUaW1lUmFuZ2VcbiAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weVRpbWVQcmVmZXJlbmNlICYmXG4gICAgICAgICAgICAgIHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFN0YXJ0VGltZVJhbmdlXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFN0YXJ0VGltZVJhbmdlXG4gICAgICAgICAgICA6IGV2ZW50Py5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgOiBldmVudC5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRFbmRUaW1lUmFuZ2U6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlICYmXG4gICAgICAgIHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZEVuZFRpbWVSYW5nZVxuICAgICAgICA/IHByZXZpb3VzRXZlbnQucHJlZmVycmVkRW5kVGltZVJhbmdlXG4gICAgICAgIDogY2F0ZWdvcnk/LmNvcHlUaW1lUHJlZmVyZW5jZSAmJiBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRFbmRUaW1lUmFuZ2VcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZEVuZFRpbWVSYW5nZVxuICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5VGltZVByZWZlcmVuY2UgJiZcbiAgICAgICAgICAgICAgcHJldmlvdXNFdmVudD8ucHJlZmVycmVkRW5kVGltZVJhbmdlXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZEVuZFRpbWVSYW5nZVxuICAgICAgICAgICAgOiBldmVudD8ucHJlZmVycmVkRW5kVGltZVJhbmdlXG4gICAgICA6IGV2ZW50LnByZWZlcnJlZEVuZFRpbWVSYW5nZSxcbiAgICBwcmlvcml0eTpcbiAgICAgICghZXZlbnQ/LnVzZXJNb2RpZmllZFByaW9yaXR5TGV2ZWxcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5jb3B5UHJpb3JpdHlMZXZlbFxuICAgICAgICAgID8gcHJldmlvdXNFdmVudC5wcmlvcml0eVxuICAgICAgICAgIDogY2F0ZWdvcnk/LmNvcHlQcmlvcml0eUxldmVsXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByaW9yaXR5XG4gICAgICAgICAgICA6IGNhdGVnb3J5Py5kZWZhdWx0UHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0UHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weVByaW9yaXR5TGV2ZWxcbiAgICAgICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByaW9yaXR5XG4gICAgICAgICAgICAgICAgOiBldmVudD8ucHJpb3JpdHlcbiAgICAgICAgOiBldmVudD8ucHJpb3JpdHkpIHx8IDEsXG4gICAgaXNCcmVhazogIWV2ZW50Py51c2VyTW9kaWZpZWRJc0JyZWFrXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlJc0JyZWFrXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5pc0JyZWFrXG4gICAgICAgIDogY2F0ZWdvcnk/LmNvcHlJc0JyZWFrXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc0JyZWFrXG4gICAgICAgICAgOiBjYXRlZ29yeT8uZGVmYXVsdElzQnJlYWtcbiAgICAgICAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRJc0JyZWFrXG4gICAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weUlzQnJlYWtcbiAgICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc0JyZWFrXG4gICAgICAgICAgICAgIDogZXZlbnQ/LmlzQnJlYWtcbiAgICAgIDogZXZlbnQuaXNCcmVhayxcbiAgICBpc01lZXRpbmc6ICFldmVudD8udXNlck1vZGlmaWVkSXNNZWV0aW5nXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlJc01lZXRpbmdcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50LmlzTWVldGluZ1xuICAgICAgICA6IGNhdGVnb3J5Py5jb3B5SXNNZWV0aW5nXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc01lZXRpbmdcbiAgICAgICAgICA6IGNhdGVnb3J5Py5kZWZhdWx0SXNNZWV0aW5nXG4gICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0SXNNZWV0aW5nXG4gICAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weUlzTWVldGluZ1xuICAgICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LmlzTWVldGluZ1xuICAgICAgICAgICAgICA6IGNhdGVnb3J5Py5uYW1lID09PSBtZWV0aW5nTGFiZWxcbiAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICA6IGV2ZW50Py5pc01lZXRpbmdcbiAgICAgIDogZXZlbnQuaXNNZWV0aW5nLFxuICAgIGlzRXh0ZXJuYWxNZWV0aW5nOiAhZXZlbnQ/LnVzZXJNb2RpZmllZElzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlJc0V4dGVybmFsTWVldGluZ1xuICAgICAgICA/IHByZXZpb3VzRXZlbnQuaXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgOiBjYXRlZ29yeT8uY29weUlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgIDogY2F0ZWdvcnk/LmRlZmF1bHRJc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgICAgPyBjYXRlZ29yeT8uZGVmYXVsdElzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weUlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8uaXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgICAgOiBjYXRlZ29yeT8ubmFtZSA9PT0gZXh0ZXJuYWxNZWV0aW5nTGFiZWxcbiAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICA6IGV2ZW50Py5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgOiBldmVudC5pc0V4dGVybmFsTWVldGluZyxcbiAgICBtb2RpZmlhYmxlOiAhZXZlbnQ/LnVzZXJNb2RpZmllZE1vZGlmaWFibGVcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weU1vZGlmaWFibGVcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50Lm1vZGlmaWFibGVcbiAgICAgICAgOiBjYXRlZ29yeT8uY29weU1vZGlmaWFibGVcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/Lm1vZGlmaWFibGVcbiAgICAgICAgICA6IGNhdGVnb3J5Py5kZWZhdWx0TW9kaWZpYWJsZVxuICAgICAgICAgICAgPyBjYXRlZ29yeT8uZGVmYXVsdE1vZGlmaWFibGVcbiAgICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5TW9kaWZpYWJsZVxuICAgICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/Lm1vZGlmaWFibGVcbiAgICAgICAgICAgICAgOiBldmVudD8ubW9kaWZpYWJsZVxuICAgICAgOiBldmVudC5tb2RpZmlhYmxlLFxuICAgIGlzTWVldGluZ01vZGlmaWFibGU6ICFldmVudD8udXNlck1vZGlmaWVkTW9kaWZpYWJsZVxuICAgICAgPyBwcmV2aW91c0V2ZW50Py5jb3B5SXNNZWV0aW5nXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5pc01lZXRpbmdcbiAgICAgICAgOiBjYXRlZ29yeT8uY29weUlzTWVldGluZ1xuICAgICAgICAgID8gcHJldmlvdXNFdmVudD8uaXNNZWV0aW5nXG4gICAgICAgICAgOiBjYXRlZ29yeT8uZGVmYXVsdElzTWVldGluZ1xuICAgICAgICAgICAgPyBjYXRlZ29yeT8uZGVmYXVsdElzTWVldGluZ1xuICAgICAgICAgICAgOiB1c2VyUHJlZmVyZW5jZXM/LmNvcHlJc01lZXRpbmdcbiAgICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc01lZXRpbmdcbiAgICAgICAgICAgICAgOiBldmVudD8uaXNNZWV0aW5nXG4gICAgICA6IGV2ZW50LmlzTWVldGluZ01vZGlmaWFibGUsXG4gICAgaXNFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlOiAhZXZlbnQ/LnVzZXJNb2RpZmllZE1vZGlmaWFibGVcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weUlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgICA6IGNhdGVnb3J5Py5jb3B5SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LmlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgOiBjYXRlZ29yeT8uZGVmYXVsdElzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgICAgICA6IGV2ZW50Py5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgOiBldmVudC5pc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGUsXG4gICAgZHVyYXRpb246ICFldmVudD8udXNlck1vZGlmaWVkRHVyYXRpb25cbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weUR1cmF0aW9uXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5kdXJhdGlvbiB8fCBwcmV2aW91c0R1cmF0aW9uXG4gICAgICAgIDogZXZlbnQ/LmR1cmF0aW9uXG4gICAgICA6IGV2ZW50LmR1cmF0aW9uLFxuICAgIGVuZERhdGU6ICFldmVudD8udXNlck1vZGlmaWVkRHVyYXRpb25cbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weUR1cmF0aW9uXG4gICAgICAgID8gZGF5anMoZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5hZGQocHJldmlvdXNFdmVudC5kdXJhdGlvbiB8fCBwcmV2aW91c0R1cmF0aW9uLCAnbWludXRlcycpXG4gICAgICAgICAgICAuZm9ybWF0KClcbiAgICAgICAgOiBldmVudD8uZW5kRGF0ZVxuICAgICAgOiBldmVudC5lbmREYXRlLFxuICAgIHByZWZlcnJlZFRpbWVSYW5nZXM6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlICYmXG4gICAgICAgIHByZXZpb3VzRXZlbnQucHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMFxuICAgICAgICA/IHByZXZpb3VzRXZlbnQucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICA6IGNhdGVnb3J5Py5jb3B5VGltZVByZWZlcmVuY2UgJiZcbiAgICAgICAgICAgIHByZXZpb3VzRXZlbnQucHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMFxuICAgICAgICAgID8gcHJldmlvdXNFdmVudD8ucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5VGltZVByZWZlcmVuY2UgJiZcbiAgICAgICAgICAgICAgcHJldmlvdXNFdmVudC5wcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgICAgICAgIDogY2F0ZWdvcnk/LmRlZmF1bHRUaW1lUHJlZmVyZW5jZT8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0VGltZVByZWZlcmVuY2U/Lm1hcCgodHApID0+ICh7XG4gICAgICAgICAgICAgICAgICAuLi50cCxcbiAgICAgICAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50Py5pZCxcbiAgICAgICAgICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IGV2ZW50Py51c2VySWQsXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgIDogZXZlbnQ/LnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgIDogZXZlbnQucHJlZmVycmVkVGltZVJhbmdlcyxcblxuICAgIGNvcHlBdmFpbGFiaWxpdHk6ICFwcmV2aW91c0V2ZW50Py51bmxpbmtcbiAgICAgID8gcHJldmlvdXNFdmVudC5jb3B5QXZhaWxhYmlsaXR5XG4gICAgICA6IGZhbHNlLFxuICAgIGNvcHlUaW1lUHJlZmVyZW5jZTogIXByZXZpb3VzRXZlbnQ/LnVubGlua1xuICAgICAgPyBwcmV2aW91c0V2ZW50LmNvcHlUaW1lUHJlZmVyZW5jZVxuICAgICAgOiBmYWxzZSxcbiAgICBjb3B5UHJpb3JpdHlMZXZlbDogIXByZXZpb3VzRXZlbnQ/LnVubGlua1xuICAgICAgPyBwcmV2aW91c0V2ZW50LmNvcHlQcmlvcml0eUxldmVsXG4gICAgICA6IGZhbHNlLFxuICAgIGNvcHlJc0JyZWFrOiAhcHJldmlvdXNFdmVudD8udW5saW5rID8gcHJldmlvdXNFdmVudC5jb3B5SXNCcmVhayA6IGZhbHNlLFxuICAgIGNvcHlNb2RpZmlhYmxlOiAhcHJldmlvdXNFdmVudD8udW5saW5rXG4gICAgICA/IHByZXZpb3VzRXZlbnQuY29weU1vZGlmaWFibGVcbiAgICAgIDogZmFsc2UsXG4gICAgY29weUlzTWVldGluZzogIXByZXZpb3VzRXZlbnQ/LnVubGluayA/IHByZXZpb3VzRXZlbnQuY29weUlzTWVldGluZyA6IGZhbHNlLFxuICAgIGNvcHlJc0V4dGVybmFsTWVldGluZzogIXByZXZpb3VzRXZlbnQ/LnVubGlua1xuICAgICAgPyBwcmV2aW91c0V2ZW50LmNvcHlJc0V4dGVybmFsTWVldGluZ1xuICAgICAgOiBmYWxzZSxcbiAgICBjb3B5RHVyYXRpb246ICFwcmV2aW91c0V2ZW50Py51bmxpbmsgPyBwcmV2aW91c0V2ZW50LmNvcHlEdXJhdGlvbiA6IGZhbHNlLFxuICAgIGNvcHlDYXRlZ29yaWVzOiAhcHJldmlvdXNFdmVudD8udW5saW5rXG4gICAgICA/IHByZXZpb3VzRXZlbnQuY29weUNhdGVnb3JpZXNcbiAgICAgIDogZmFsc2UsXG4gICAgY29weVJlbWluZGVyczogIXByZXZpb3VzRXZlbnQ/LnVubGluayA/IHByZXZpb3VzRXZlbnQuY29weVJlbWluZGVycyA6IGZhbHNlLFxuICAgIGNvcHlUaW1lQmxvY2tpbmc6ICFwcmV2aW91c0V2ZW50Py51bmxpbmtcbiAgICAgID8gcHJldmlvdXNFdmVudC5jb3B5VGltZUJsb2NraW5nXG4gICAgICA6IGZhbHNlLFxuICAgIGNvcHlDb2xvcjogIXByZXZpb3VzRXZlbnQ/LnVubGluayA/IHByZXZpb3VzRXZlbnQuY29weUNvbG9yIDogZmFsc2UsXG4gICAgdW5saW5rOiAhcHJldmlvdXNFdmVudD8udW5saW5rID8gZmFsc2UgOiB0cnVlLFxuXG4gICAgcG9zaXRpdmVJbXBhY3REYXlPZldlZWs6ICFwcmV2aW91c0V2ZW50Py51bmxpbmtcbiAgICAgID8gcHJldmlvdXNFdmVudC5wb3NpdGl2ZUltcGFjdERheU9mV2Vla1xuICAgICAgOiBudWxsLFxuICAgIHBvc2l0aXZlSW1wYWN0U2NvcmU6ICFwcmV2aW91c0V2ZW50Py51bmxpbmtcbiAgICAgID8gcHJldmlvdXNFdmVudC5wb3NpdGl2ZUltcGFjdFNjb3JlXG4gICAgICA6IG51bGwsXG4gICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWs6ICFwcmV2aW91c0V2ZW50Py51bmxpbmtcbiAgICAgID8gcHJldmlvdXNFdmVudC5uZWdhdGl2ZUltcGFjdERheU9mV2Vla1xuICAgICAgOiBudWxsLFxuICAgIG5lZ2F0aXZlSW1wYWN0U2NvcmU6ICFwcmV2aW91c0V2ZW50Py51bmxpbmtcbiAgICAgID8gcHJldmlvdXNFdmVudC5uZWdhdGl2ZUltcGFjdFNjb3JlXG4gICAgICA6IG51bGwsXG4gICAgcG9zaXRpdmVJbXBhY3RUaW1lOiAhcHJldmlvdXNFdmVudD8udW5saW5rXG4gICAgICA/IHByZXZpb3VzRXZlbnQucG9zaXRpdmVJbXBhY3RUaW1lXG4gICAgICA6IG51bGwsXG4gICAgbmVnYXRpdmVJbXBhY3RUaW1lOiAhcHJldmlvdXNFdmVudD8udW5saW5rXG4gICAgICA/IHByZXZpb3VzRXZlbnQubmVnYXRpdmVJbXBhY3RUaW1lXG4gICAgICA6IG51bGwsXG5cbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICFldmVudD8udXNlck1vZGlmaWVkQ29sb3JcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weUNvbG9yXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgOiBjYXRlZ29yeT8uY29sb3JcbiAgICAgICAgICA/IGNhdGVnb3J5Py5jb2xvclxuICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5Q29sb3JcbiAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8uYmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICA6IGV2ZW50Py5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgIDogZXZlbnQuYmFja2dyb3VuZENvbG9yLFxuICAgIGNvbG9ySWQ6XG4gICAgICBwcmV2aW91c0V2ZW50Py5jb3B5Q29sb3IgJiYgcHJldmlvdXNFdmVudD8uY29sb3JJZFxuICAgICAgICA/IHByZXZpb3VzRXZlbnQuY29sb3JJZFxuICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weUNvbG9yICYmIHByZXZpb3VzRXZlbnQ/LmNvbG9ySWRcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvbG9ySWRcbiAgICAgICAgICA6IGV2ZW50Py5jb2xvcklkLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGcm9tUHJldmlvdXNFdmVudCA9IChcbiAgZXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIHByZXZpb3VzRXZlbnQ6IEV2ZW50UGx1c1R5cGVcbikgPT4ge1xuICBpZiAoIXByZXZpb3VzRXZlbnQ/LmNvcHlUaW1lQmxvY2tpbmcpIHtcbiAgICBjb25zb2xlLmxvZygnbm8gY29weSB0aW1lIGJsb2NraW5nJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoZXZlbnQudXNlck1vZGlmaWVkVGltZUJsb2NraW5nKSB7XG4gICAgY29uc29sZS5sb2coJ3VzZXIgbW9kaWZpZWQgdGltZSBibG9ja2luZycpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZXZlbnRJZCA9IHV1aWQoKTtcbiAgY29uc3QgZXZlbnRJZDEgPSB1dWlkKCk7XG5cbiAgY29uc3QgcHJlRXZlbnRJZCA9IGV2ZW50Py5wcmVFdmVudElkIHx8IGAke2V2ZW50SWR9IyR7ZXZlbnQ/LmNhbGVuZGFySWR9YDtcbiAgY29uc3QgcG9zdEV2ZW50SWQgPSBldmVudD8ucG9zdEV2ZW50SWQgfHwgYCR7ZXZlbnRJZDF9IyR7ZXZlbnQ/LmNhbGVuZGFySWR9YDtcblxuICBsZXQgdmFsdWVzVG9SZXR1cm46IGFueSA9IHt9O1xuICB2YWx1ZXNUb1JldHVybi5uZXdFdmVudCA9IGV2ZW50O1xuXG4gIGlmIChwcmV2aW91c0V2ZW50Py50aW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQpIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRab25lQWZ0ZXJFdmVudEVuZERhdGUgPSBkYXlqcyhldmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5hZGQocHJldmlvdXNFdmVudD8udGltZUJsb2NraW5nPy5hZnRlckV2ZW50LCAnbScpXG4gICAgICAuZm9ybWF0KCk7XG4gICAgY29uc3QgZm9ybWF0dGVkWm9uZUFmdGVyRXZlbnRTdGFydERhdGUgPSBkYXlqcyhldmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5mb3JtYXQoKTtcblxuICAgIGNvbnN0IGFmdGVyRXZlbnQ6IEV2ZW50UGx1c1R5cGUgPSB7XG4gICAgICBpZDogcG9zdEV2ZW50SWQsXG4gICAgICBpc1ByZUV2ZW50OiBmYWxzZSxcbiAgICAgIGZvckV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgaXNQb3N0RXZlbnQ6IHRydWUsXG4gICAgICBub3RlczogJ0J1ZmZlciB0aW1lJyxcbiAgICAgIHN1bW1hcnk6ICdCdWZmZXIgdGltZScsXG4gICAgICBzdGFydERhdGU6IGZvcm1hdHRlZFpvbmVBZnRlckV2ZW50U3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZTogZm9ybWF0dGVkWm9uZUFmdGVyRXZlbnRFbmREYXRlLFxuICAgICAgbWV0aG9kOiBldmVudD8ucG9zdEV2ZW50SWQgPyAndXBkYXRlJyA6ICdjcmVhdGUnLFxuICAgICAgdXNlcklkOiBldmVudD8udXNlcklkLFxuICAgICAgY3JlYXRlZERhdGU6IGRheWpzKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICBpc0ZvbGxvd1VwOiBmYWxzZSxcbiAgICAgIG1vZGlmaWFibGU6IHRydWUsXG4gICAgICBhbnlvbmVDYW5BZGRTZWxmOiBmYWxzZSxcbiAgICAgIGd1ZXN0c0Nhbkludml0ZU90aGVyczogZmFsc2UsXG4gICAgICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0czogZmFsc2UsXG4gICAgICBvcmlnaW5hbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLFxuICAgICAgb3JpZ2luYWxBbGxEYXk6IGZhbHNlLFxuICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjYWxlbmRhcklkOiBldmVudD8uY2FsZW5kYXJJZCxcbiAgICAgIHRpbWV6b25lOiBldmVudD8udGltZXpvbmUsXG4gICAgICBldmVudElkOiBwb3N0RXZlbnRJZC5zcGxpdCgnIycpWzBdLFxuICAgIH07XG4gICAgdmFsdWVzVG9SZXR1cm4uYWZ0ZXJFdmVudCA9IGFmdGVyRXZlbnQ7XG4gICAgdmFsdWVzVG9SZXR1cm4ubmV3RXZlbnQgPSB7XG4gICAgICAuLi52YWx1ZXNUb1JldHVybi5uZXdFdmVudCxcbiAgICAgIHBvc3RFdmVudElkLFxuICAgICAgdGltZUJsb2NraW5nOiB7XG4gICAgICAgIC4uLnZhbHVlc1RvUmV0dXJuPy5uZXdFdmVudD8udGltZUJsb2NraW5nLFxuICAgICAgICBhZnRlckV2ZW50OiBwcmV2aW91c0V2ZW50Py50aW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBpZiAocHJldmlvdXNFdmVudD8udGltZUJsb2NraW5nPy5iZWZvcmVFdmVudCkge1xuICAgIGNvbnN0IGZvcm1hdHRlZFpvbmVCZWZvcmVFdmVudFN0YXJ0RGF0ZSA9IGRheWpzKFxuICAgICAgZXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KVxuICAgIClcbiAgICAgIC50eihldmVudC50aW1lem9uZSwgdHJ1ZSlcbiAgICAgIC5zdWJ0cmFjdChwcmV2aW91c0V2ZW50Py50aW1lQmxvY2tpbmc/LmJlZm9yZUV2ZW50LCAnbScpXG4gICAgICAuZm9ybWF0KCk7XG4gICAgY29uc3QgZm9ybWF0dGVkWm9uZUJlZm9yZUV2ZW50RW5kRGF0ZSA9IGRheWpzKGV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHooZXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAuZm9ybWF0KCk7XG5cbiAgICBjb25zdCBiZWZvcmVFdmVudDogRXZlbnRQbHVzVHlwZSA9IHtcbiAgICAgIGlkOiBwcmVFdmVudElkLFxuICAgICAgaXNQcmVFdmVudDogdHJ1ZSxcbiAgICAgIGlzUG9zdEV2ZW50OiBmYWxzZSxcbiAgICAgIGZvckV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgbm90ZXM6ICdCdWZmZXIgdGltZScsXG4gICAgICBzdW1tYXJ5OiAnQnVmZmVyIHRpbWUnLFxuICAgICAgc3RhcnREYXRlOiBmb3JtYXR0ZWRab25lQmVmb3JlRXZlbnRTdGFydERhdGUsXG4gICAgICBlbmREYXRlOiBmb3JtYXR0ZWRab25lQmVmb3JlRXZlbnRFbmREYXRlLFxuICAgICAgbWV0aG9kOiBldmVudD8ucHJlRXZlbnRJZCA/ICd1cGRhdGUnIDogJ2NyZWF0ZScsXG4gICAgICB1c2VySWQ6IGV2ZW50Py51c2VySWQsXG4gICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgZGVsZXRlZDogZmFsc2UsXG4gICAgICBwcmlvcml0eTogMSxcbiAgICAgIGlzRm9sbG93VXA6IGZhbHNlLFxuICAgICAgbW9kaWZpYWJsZTogdHJ1ZSxcbiAgICAgIGFueW9uZUNhbkFkZFNlbGY6IGZhbHNlLFxuICAgICAgZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzOiBmYWxzZSxcbiAgICAgIGd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzOiBmYWxzZSxcbiAgICAgIG9yaWdpbmFsU3RhcnREYXRlOiB1bmRlZmluZWQsXG4gICAgICBvcmlnaW5hbEFsbERheTogZmFsc2UsXG4gICAgICB1cGRhdGVkQXQ6IGRheWpzKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGNhbGVuZGFySWQ6IGV2ZW50Py5jYWxlbmRhcklkLFxuICAgICAgdGltZXpvbmU6IGV2ZW50Py50aW1lem9uZSxcbiAgICAgIGV2ZW50SWQ6IHByZUV2ZW50SWQuc3BsaXQoJyMnKVswXSxcbiAgICB9O1xuICAgIHZhbHVlc1RvUmV0dXJuLmJlZm9yZUV2ZW50ID0gYmVmb3JlRXZlbnQ7XG4gICAgdmFsdWVzVG9SZXR1cm4ubmV3RXZlbnQgPSB7XG4gICAgICAuLi52YWx1ZXNUb1JldHVybi5uZXdFdmVudCxcbiAgICAgIHByZUV2ZW50SWQsXG4gICAgICB0aW1lQmxvY2tpbmc6IHtcbiAgICAgICAgLi4udmFsdWVzVG9SZXR1cm4/Lm5ld0V2ZW50Py50aW1lQmxvY2tpbmcsXG4gICAgICAgIGJlZm9yZUV2ZW50OiBwcmV2aW91c0V2ZW50Py50aW1lQmxvY2tpbmc/LmJlZm9yZUV2ZW50LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlc1RvUmV0dXJuO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlbWluZGVyc0Zyb21QcmV2aW91c0V2ZW50Rm9yRXZlbnQgPSBhc3luYyAoXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBwcmV2aW91c0V2ZW50OiBFdmVudFBsdXNUeXBlLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxSZW1pbmRlclR5cGVbXT4gPT4ge1xuICBpZiAoZXZlbnQudXNlck1vZGlmaWVkUmVtaW5kZXJzKSB7XG4gICAgY29uc29sZS5sb2coJ25vIGV2ZW50IGluc2lkZSBjcmVhdGVSZW1pbmRlcnNGcm9tUHJldmlvdXNFdmVudEZvckV2ZW50Jyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIXByZXZpb3VzRXZlbnQ/LmlkKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICAnbm8gcHJldmlvdXNFdmVudCBpbnNpZGUgY3JlYXRlUmVtaW5kZXJzRnJvbVByZXZpb3VzRXZlbnRGb3JFdmVudCdcbiAgICApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKCFwcmV2aW91c0V2ZW50Py5jb3B5UmVtaW5kZXJzKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICAnbm8gcHJldmlvdXNFdmVudCBpbnNpZGUgY3JlYXRlUmVtaW5kZXJzRnJvbVByZXZpb3VzRXZlbnRGb3JFdmVudCdcbiAgICApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcmVtaW5kZXJzID0gYXdhaXQgbGlzdFJlbWluZGVyc0ZvckV2ZW50KHByZXZpb3VzRXZlbnQuaWQsIHVzZXJJZCk7XG5cbiAgcmV0dXJuIHJlbWluZGVycz8ubWFwKChyZW1pbmRlcikgPT4gKHtcbiAgICAuLi5yZW1pbmRlcixcbiAgICBldmVudElkOiBldmVudC5pZCxcbiAgICBpZDogdXVpZCgpLFxuICAgIHVwZGF0ZWRBdDogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgZGVsZXRlZDogZmFsc2UsXG4gIH0pKTtcbn07XG5cbmNvbnN0IGNvcHlPdmVyTWVldGluZ0FuZEV4dGVybmFsTWVldGluZ0RlZmF1bHRzV2l0aFByZXZpb3VzRXZlbnRGb3VuZCA9IChcbiAgZXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIHByZXZpb3VzRXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIGNhdGVnb3J5OiBDYXRlZ29yeVR5cGUsXG4gIHVzZXJQcmVmZXJlbmNlczogVXNlclByZWZlcmVuY2VUeXBlXG4pOiBFdmVudFBsdXNUeXBlID0+IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ldmVudCxcbiAgICB0cmFuc3BhcmVuY3k6ICFldmVudD8udXNlck1vZGlmaWVkQXZhaWxhYmlsaXR5XG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50LnRyYW5zcGFyZW5jeVxuICAgICAgICA6IGNhdGVnb3J5LmNvcHlBdmFpbGFiaWxpdHlcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnRyYW5zcGFyZW5jeVxuICAgICAgICAgIDogY2F0ZWdvcnkuZGVmYXVsdEF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgPyAndHJhbnNwYXJlbnQnXG4gICAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weUF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnRyYW5zcGFyZW5jeVxuICAgICAgICAgICAgICA6IGV2ZW50Py50cmFuc3BhcmVuY3lcbiAgICAgIDogZXZlbnQudHJhbnNwYXJlbmN5LFxuICAgIHByZWZlcnJlZFRpbWU6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5wcmVmZXJyZWRUaW1lXG4gICAgICAgIDogY2F0ZWdvcnkuY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICAgICAgOiB1c2VyUHJlZmVyZW5jZXM/LmNvcHlUaW1lUHJlZmVyZW5jZVxuICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICAgICAgICA6IGV2ZW50Py5wcmVmZXJyZWRUaW1lXG4gICAgICA6IGV2ZW50LnByZWZlcnJlZFRpbWUsXG4gICAgcHJlZmVycmVkRGF5T2ZXZWVrOiAhZXZlbnQ/LnVzZXJNb2RpZmllZFRpbWVQcmVmZXJlbmNlXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlUaW1lUHJlZmVyZW5jZVxuICAgICAgICA/IHByZXZpb3VzRXZlbnQucHJlZmVycmVkRGF5T2ZXZWVrXG4gICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5VGltZVByZWZlcmVuY2VcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZERheU9mV2Vla1xuICAgICAgICAgIDogZXZlbnQ/LnByZWZlcnJlZERheU9mV2Vla1xuICAgICAgOiBldmVudC5wcmVmZXJyZWREYXlPZldlZWssXG4gICAgcHJlZmVycmVkU3RhcnRUaW1lUmFuZ2U6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgICA6IGNhdGVnb3J5LmNvcHlUaW1lUHJlZmVyZW5jZVxuICAgICAgICAgID8gcHJldmlvdXNFdmVudD8ucHJlZmVycmVkU3RhcnRUaW1lUmFuZ2VcbiAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFN0YXJ0VGltZVJhbmdlXG4gICAgICAgICAgICA6IGV2ZW50Py5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZVxuICAgICAgOiBldmVudC5wcmVmZXJyZWRTdGFydFRpbWVSYW5nZSxcbiAgICBwcmVmZXJyZWRFbmRUaW1lUmFuZ2U6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5wcmVmZXJyZWRFbmRUaW1lUmFuZ2VcbiAgICAgICAgOiBjYXRlZ29yeS5jb3B5VGltZVByZWZlcmVuY2VcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZEVuZFRpbWVSYW5nZVxuICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5VGltZVByZWZlcmVuY2VcbiAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8ucHJlZmVycmVkRW5kVGltZVJhbmdlXG4gICAgICAgICAgICA6IGV2ZW50Py5wcmVmZXJyZWRFbmRUaW1lUmFuZ2VcbiAgICAgIDogZXZlbnQucHJlZmVycmVkRW5kVGltZVJhbmdlLFxuICAgIHByaW9yaXR5OlxuICAgICAgKCFldmVudD8udXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbFxuICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlQcmlvcml0eUxldmVsXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50LnByaW9yaXR5XG4gICAgICAgICAgOiBjYXRlZ29yeS5jb3B5UHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5wcmlvcml0eVxuICAgICAgICAgICAgOiBjYXRlZ29yeS5kZWZhdWx0UHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0UHJpb3JpdHlMZXZlbFxuICAgICAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weVByaW9yaXR5TGV2ZWxcbiAgICAgICAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByaW9yaXR5XG4gICAgICAgICAgICAgICAgOiBldmVudD8ucHJpb3JpdHlcbiAgICAgICAgOiBldmVudD8ucHJpb3JpdHkpIHx8IDEsXG4gICAgaXNCcmVhazogIWV2ZW50Py51c2VyTW9kaWZpZWRJc0JyZWFrXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlJc0JyZWFrXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5pc0JyZWFrXG4gICAgICAgIDogY2F0ZWdvcnkuY29weUlzQnJlYWtcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LmlzQnJlYWtcbiAgICAgICAgICA6IGNhdGVnb3J5LmRlZmF1bHRJc0JyZWFrXG4gICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0SXNCcmVha1xuICAgICAgICAgICAgOiB1c2VyUHJlZmVyZW5jZXM/LmNvcHlJc0JyZWFrXG4gICAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8uaXNCcmVha1xuICAgICAgICAgICAgICA6IGV2ZW50Py5pc0JyZWFrXG4gICAgICA6IGV2ZW50LmlzQnJlYWssXG4gICAgaXNNZWV0aW5nOiAhZXZlbnQ/LnVzZXJNb2RpZmllZElzTWVldGluZ1xuICAgICAgPyBwcmV2aW91c0V2ZW50Py5jb3B5SXNNZWV0aW5nXG4gICAgICAgID8gcHJldmlvdXNFdmVudC5pc01lZXRpbmdcbiAgICAgICAgOiBjYXRlZ29yeS5jb3B5SXNNZWV0aW5nXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc01lZXRpbmdcbiAgICAgICAgICA6IGNhdGVnb3J5LmRlZmF1bHRJc01lZXRpbmdcbiAgICAgICAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRJc01lZXRpbmdcbiAgICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5SXNNZWV0aW5nXG4gICAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8uaXNNZWV0aW5nXG4gICAgICAgICAgICAgIDogY2F0ZWdvcnkubmFtZSA9PT0gbWVldGluZ0xhYmVsXG4gICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgOiBldmVudD8uaXNNZWV0aW5nXG4gICAgICA6IGV2ZW50LmlzTWVldGluZyxcbiAgICBpc0V4dGVybmFsTWVldGluZzogIWV2ZW50Py51c2VyTW9kaWZpZWRJc0V4dGVybmFsTWVldGluZ1xuICAgICAgPyBwcmV2aW91c0V2ZW50Py5jb3B5SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50LmlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgIDogY2F0ZWdvcnkuY29weUlzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgIDogY2F0ZWdvcnkuZGVmYXVsdElzRXh0ZXJuYWxNZWV0aW5nXG4gICAgICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5SXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgICAgICAgICAgPyBwcmV2aW91c0V2ZW50Py5pc0V4dGVybmFsTWVldGluZ1xuICAgICAgICAgICAgICA6IGNhdGVnb3J5Lm5hbWUgPT09IGV4dGVybmFsTWVldGluZ0xhYmVsXG4gICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgOiBldmVudD8uaXNFeHRlcm5hbE1lZXRpbmdcbiAgICAgIDogZXZlbnQuaXNFeHRlcm5hbE1lZXRpbmcsXG4gICAgaXNNZWV0aW5nTW9kaWZpYWJsZTogIWV2ZW50Py51c2VyTW9kaWZpZWRNb2RpZmlhYmxlXG4gICAgICA/IGNhdGVnb3J5LmRlZmF1bHRNZWV0aW5nTW9kaWZpYWJsZVxuICAgICAgICA/IGNhdGVnb3J5Py5kZWZhdWx0TWVldGluZ01vZGlmaWFibGVcbiAgICAgICAgOiBldmVudD8uaXNNZWV0aW5nTW9kaWZpYWJsZVxuICAgICAgOiBldmVudC5pc01lZXRpbmdNb2RpZmlhYmxlLFxuICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZTogIWV2ZW50Py51c2VyTW9kaWZpZWRNb2RpZmlhYmxlXG4gICAgICA/IGNhdGVnb3J5LmRlZmF1bHRFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRFeHRlcm5hbE1lZXRpbmdNb2RpZmlhYmxlXG4gICAgICAgIDogZXZlbnQ/LmlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZVxuICAgICAgOiBldmVudC5pc0V4dGVybmFsTWVldGluZ01vZGlmaWFibGUsXG4gICAgYmFja2dyb3VuZENvbG9yOiAhZXZlbnQ/LnVzZXJNb2RpZmllZENvbG9yXG4gICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvcHlDb2xvclxuICAgICAgICA/IHByZXZpb3VzRXZlbnQuYmFja2dyb3VuZENvbG9yXG4gICAgICAgIDogY2F0ZWdvcnkuY29sb3JcbiAgICAgICAgICA/IGNhdGVnb3J5Py5jb2xvclxuICAgICAgICAgIDogdXNlclByZWZlcmVuY2VzPy5jb3B5Q29sb3JcbiAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8uYmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICA6IGV2ZW50Py5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgIDogZXZlbnQuYmFja2dyb3VuZENvbG9yLFxuICAgIGNvbG9ySWQ6XG4gICAgICBwcmV2aW91c0V2ZW50Py5jb3B5Q29sb3IgJiYgcHJldmlvdXNFdmVudD8uY29sb3JJZFxuICAgICAgICA/IHByZXZpb3VzRXZlbnQuY29sb3JJZFxuICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weUNvbG9yICYmIHByZXZpb3VzRXZlbnQ/LmNvbG9ySWRcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LmNvbG9ySWRcbiAgICAgICAgICA6IGV2ZW50Py5jb2xvcklkLFxuICAgIHByZWZlcnJlZFRpbWVSYW5nZXM6ICFldmVudD8udXNlck1vZGlmaWVkVGltZVByZWZlcmVuY2VcbiAgICAgID8gcHJldmlvdXNFdmVudD8uY29weVRpbWVQcmVmZXJlbmNlICYmXG4gICAgICAgIHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDBcbiAgICAgICAgPyBwcmV2aW91c0V2ZW50LnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgICAgOiBjYXRlZ29yeS5jb3B5VGltZVByZWZlcmVuY2UgJiZcbiAgICAgICAgICAgIHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDBcbiAgICAgICAgICA/IHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgICAgICA6IHVzZXJQcmVmZXJlbmNlcz8uY29weVRpbWVQcmVmZXJlbmNlICYmXG4gICAgICAgICAgICAgIHByZXZpb3VzRXZlbnQ/LnByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcHJldmlvdXNFdmVudD8ucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgOiBjYXRlZ29yeS5kZWZhdWx0VGltZVByZWZlcmVuY2U/Lm1hcCgodHApID0+ICh7XG4gICAgICAgICAgICAgICAgICAuLi50cCxcbiAgICAgICAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50Py5pZCxcbiAgICAgICAgICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IGV2ZW50Py51c2VySWQsXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgID8gY2F0ZWdvcnk/LmRlZmF1bHRUaW1lUHJlZmVyZW5jZT8ubWFwKCh0cCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC4uLnRwLFxuICAgICAgICAgICAgICAgICAgZXZlbnRJZDogZXZlbnQ/LmlkLFxuICAgICAgICAgICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRheWpzKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgIHVzZXJJZDogZXZlbnQ/LnVzZXJJZCxcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgOiBldmVudD8ucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgOiBldmVudC5wcmVmZXJyZWRUaW1lUmFuZ2VzLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvcHlPdmVyQ2F0ZWdvcnlNZWV0aW5nQW5kRXh0ZXJuYWxNZWV0aW5nRGVmYXVsdHNXaXRoRm91bmRQcmV2aW91c0V2ZW50ID1cbiAgKFxuICAgIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICAgIGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdLFxuICAgIHVzZXJQcmVmZXJlbmNlczogVXNlclByZWZlcmVuY2VUeXBlLFxuICAgIHByZXZpb3VzRXZlbnQ6IEV2ZW50UGx1c1R5cGVcbiAgKSA9PiB7XG4gICAgaWYgKCEoY2F0ZWdvcmllcz8ubGVuZ3RoID4gMCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAnbm8gY2F0ZWdvcmllcyBpbnNpZGUgY29weU92ZXJDYXRlZ29yeURlZmF1bHRzRm9yQ29uc3RhbnRzV2l0aEZvdW5kUHJldmlvdXNFdmVudCdcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyUHJlZmVyZW5jZXM/LmlkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJ25vIHVzZXJQcmVmZXJlbmNlcyBpbnNpZGUgY29weU92ZXJDYXRlZ29yeURlZmF1bHRzRm9yQ29uc3RhbnRzV2l0aEZvdW5kUHJldmlvdXNFdmVudCdcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFwcmV2aW91c0V2ZW50Py5pZCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICdubyBwcmV2aW91c0V2ZW50IGluc2lkZSBjb3B5T3ZlckNhdGVnb3J5RGVmYXVsdHNGb3JDb25zdGFudHNXaXRoRm91bmRQcmV2aW91c0V2ZW50J1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFldmVudD8uaWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAnbm8gZXZlbnQgaW5zaWRlIGNvcHlPdmVyQ2F0ZWdvcnlEZWZhdWx0c0ZvckNvbnN0YW50c1dpdGhGb3VuZFByZXZpb3VzRXZlbnQnXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1lZXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXMuZmluZChcbiAgICAgIChjYXRlZ29yeSkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gbWVldGluZ0xhYmVsXG4gICAgKTtcbiAgICBjb25zdCBleHRlcm5hbENhdGVnb3J5ID0gY2F0ZWdvcmllcy5maW5kKFxuICAgICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBleHRlcm5hbE1lZXRpbmdMYWJlbFxuICAgICk7XG5cbiAgICBsZXQgbmV3RXZlbnRNZWV0aW5nOiBFdmVudFBsdXNUeXBlIHwge30gPSB7fTtcbiAgICBsZXQgbmV3RXZlbnRFeHRlcm5hbDogRXZlbnRQbHVzVHlwZSB8IHt9ID0ge307XG5cbiAgICBpZiAobWVldGluZ0NhdGVnb3J5Py5pZCkge1xuICAgICAgbmV3RXZlbnRNZWV0aW5nID1cbiAgICAgICAgY29weU92ZXJNZWV0aW5nQW5kRXh0ZXJuYWxNZWV0aW5nRGVmYXVsdHNXaXRoUHJldmlvdXNFdmVudEZvdW5kKFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIHByZXZpb3VzRXZlbnQsXG4gICAgICAgICAgbWVldGluZ0NhdGVnb3J5LFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChleHRlcm5hbENhdGVnb3J5Py5pZCkge1xuICAgICAgbmV3RXZlbnRFeHRlcm5hbCA9XG4gICAgICAgIGNvcHlPdmVyTWVldGluZ0FuZEV4dGVybmFsTWVldGluZ0RlZmF1bHRzV2l0aFByZXZpb3VzRXZlbnRGb3VuZChcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBwcmV2aW91c0V2ZW50LFxuICAgICAgICAgIG1lZXRpbmdDYXRlZ29yeSxcbiAgICAgICAgICB1c2VyUHJlZmVyZW5jZXNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBuZXdFdmVudE1lZXRpbmcsIG5ld0V2ZW50RXh0ZXJuYWwgfTtcbiAgfTtcbmV4cG9ydCBjb25zdCBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGcm9tUHJldmlvdXNFdmVudEdpdmVuVXNlclByZWZlcmVuY2VzID1cbiAgYXN5bmMgKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG5ld0V2ZW50OiBFdmVudFBsdXNUeXBlLFxuICAgIG5ld1JlbWluZGVyczE/OiBSZW1pbmRlclR5cGVbXSxcbiAgICBuZXdUaW1lQmxvY2tpbmcxPzogQnVmZmVyVGltZU9iamVjdFR5cGUsXG4gICAgcHJldmlvdXNFdmVudD86IEV2ZW50UGx1c1R5cGUsXG4gICAgdXNlclByZWZlcmVuY2VzPzogVXNlclByZWZlcmVuY2VUeXBlXG4gICkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMSB8fCBbXTtcbiAgICAgIGxldCBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxIHx8IHt9O1xuICAgICAgaWYgKCFuZXdFdmVudD8udXNlck1vZGlmaWVkUmVtaW5kZXJzICYmIHVzZXJQcmVmZXJlbmNlcz8uY29weVJlbWluZGVycykge1xuICAgICAgICBjb25zdCByZW1pbmRlcnMgPSBhd2FpdCBjcmVhdGVSZW1pbmRlcnNGcm9tUHJldmlvdXNFdmVudEZvckV2ZW50KFxuICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgIHByZXZpb3VzRXZlbnQsXG4gICAgICAgICAgdXNlcklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocmVtaW5kZXJzLCAnIHJlbWluZGVycycpO1xuICAgICAgICBpZiAocmVtaW5kZXJzPy5sZW5ndGggPiAwICYmICFuZXdFdmVudD8udXNlck1vZGlmaWVkUmVtaW5kZXJzKSB7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzLnB1c2goLi4ucmVtaW5kZXJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICFuZXdFdmVudD8udXNlck1vZGlmaWVkVGltZUJsb2NraW5nICYmXG4gICAgICAgIHVzZXJQcmVmZXJlbmNlcz8uY29weVRpbWVCbG9ja2luZ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHRpbWVCbG9ja2luZyA9IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGcm9tUHJldmlvdXNFdmVudChcbiAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICBwcmV2aW91c0V2ZW50XG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRpbWVCbG9ja2luZywgJyB0aW1lQmxvY2tpbmcnKTtcbiAgICAgICAgaWYgKHRpbWVCbG9ja2luZz8uYmVmb3JlRXZlbnQpIHtcbiAgICAgICAgICAobmV3VGltZUJsb2NraW5nIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlKS5iZWZvcmVFdmVudCA9XG4gICAgICAgICAgICB0aW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGltZUJsb2NraW5nPy5hZnRlckV2ZW50KSB7XG4gICAgICAgICAgKG5ld1RpbWVCbG9ja2luZyBhcyBCdWZmZXJUaW1lT2JqZWN0VHlwZSkuYWZ0ZXJFdmVudCA9XG4gICAgICAgICAgICB0aW1lQmxvY2tpbmcuYWZ0ZXJFdmVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aW1lQmxvY2tpbmc/Lm5ld0V2ZW50Py5wcmVFdmVudElkIHx8XG4gICAgICAgICAgdGltZUJsb2NraW5nPy5uZXdFdmVudD8ucG9zdEV2ZW50SWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgbmV3RXZlbnQgPSB0aW1lQmxvY2tpbmcubmV3RXZlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7IG5ld0V2ZW50LCBuZXdSZW1pbmRlcnMsIG5ld1RpbWVCbG9ja2luZyB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBlLFxuICAgICAgICAnIHVuYWJsZSB0byBjcmVhdGUgcmVtaW5kZXJzIGFuZCB0aW1lIGJsb2NraW5nIGZyb20gcHJldmlvdXMgZXZlbnQgZ2l2ZW4gdXNlciBwcmVmZXJlbmNlcydcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVmFsdWVzRm9yRXZlbnRXaXRoUHJldmlvdXNFdmVudFBsdXNNZWV0aW5nQW5kRXh0ZXJuYWxNZWV0aW5nID1cbiAgYXN5bmMgKFxuICAgIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICAgIG5ld0V2ZW50MTogRXZlbnRQbHVzVHlwZSxcbiAgICBiZXN0TWF0Y2hDYXRlZ29yaWVzOiBDYXRlZ29yeVR5cGVbXSxcbiAgICBuZXdSZW1pbmRlcnMxOiBSZW1pbmRlclR5cGVbXSxcbiAgICBuZXdUaW1lQmxvY2tpbmcxOiBCdWZmZXJUaW1lT2JqZWN0VHlwZSxcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB1c2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlVHlwZSxcbiAgICBwcmV2aW91c0V2ZW50OiBFdmVudFBsdXNUeXBlXG4gICkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgbmV3RXZlbnQgPSBuZXdFdmVudDE7XG4gICAgICBsZXQgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMSB8fCBbXTtcbiAgICAgIGxldCBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxIHx8IHt9O1xuICAgICAgY29uc3QgeyBuZXdFdmVudE1lZXRpbmcsIG5ld0V2ZW50RXh0ZXJuYWwgfSA9XG4gICAgICAgIGNvcHlPdmVyQ2F0ZWdvcnlNZWV0aW5nQW5kRXh0ZXJuYWxNZWV0aW5nRGVmYXVsdHNXaXRoRm91bmRQcmV2aW91c0V2ZW50KFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIGJlc3RNYXRjaENhdGVnb3JpZXMsXG4gICAgICAgICAgdXNlclByZWZlcmVuY2VzLFxuICAgICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICAgKTtcblxuICAgICAgaWYgKChuZXdFdmVudE1lZXRpbmcgYXMgRXZlbnRQbHVzVHlwZSk/LmlkKSB7XG4gICAgICAgIG5ld0V2ZW50ID0geyAuLi5uZXdFdmVudCwgLi4ubmV3RXZlbnRNZWV0aW5nIH07XG4gICAgICAgIGNvbnN0IG1lZXRpbmdDYXRlZ29yeSA9IGJlc3RNYXRjaENhdGVnb3JpZXMuZmluZChcbiAgICAgICAgICAoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Lm5hbWUgPT09IG1lZXRpbmdMYWJlbFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG9sZFJlbWluZGVycyA9IGF3YWl0IGxpc3RSZW1pbmRlcnNGb3JFdmVudChcbiAgICAgICAgICAobmV3RXZlbnRNZWV0aW5nIGFzIEV2ZW50UGx1c1R5cGUpPy5pZCxcbiAgICAgICAgICB1c2VySWRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcmVtaW5kZXJzID0gY3JlYXRlUmVtaW5kZXJzVXNpbmdDYXRlZ29yeURlZmF1bHRzRm9yRXZlbnQoXG4gICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgbWVldGluZ0NhdGVnb3J5LFxuICAgICAgICAgIG9sZFJlbWluZGVycyxcbiAgICAgICAgICBwcmV2aW91c0V2ZW50XG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlbWluZGVycywgJyByZW1pbmRlcnMnKTtcbiAgICAgICAgaWYgKHJlbWluZGVycz8ubGVuZ3RoID4gMCAmJiAhbmV3RXZlbnQ/LnVzZXJNb2RpZmllZFJlbWluZGVycykge1xuICAgICAgICAgIG5ld1JlbWluZGVycy5wdXNoKC4uLnJlbWluZGVycyk7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzID0gXy51bmlxQnkobmV3UmVtaW5kZXJzLCAnbWludXRlcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFuZXdFdmVudD8udXNlck1vZGlmaWVkVGltZUJsb2NraW5nKSB7XG4gICAgICAgICAgY29uc3QgdGltZUJsb2NraW5nID0gY3JlYXRlUHJlQW5kUG9zdEV2ZW50c0ZvckNhdGVnb3J5RGVmYXVsdHMoXG4gICAgICAgICAgICBtZWV0aW5nQ2F0ZWdvcnksXG4gICAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRpbWVCbG9ja2luZywgJyB0aW1lQmxvY2tpbmcnKTtcbiAgICAgICAgICBpZiAodGltZUJsb2NraW5nPy5iZWZvcmVFdmVudCkge1xuICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nLmJlZm9yZUV2ZW50ID0gdGltZUJsb2NraW5nLmJlZm9yZUV2ZW50O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQpIHtcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZy5hZnRlckV2ZW50ID0gdGltZUJsb2NraW5nLmFmdGVyRXZlbnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGltZUJsb2NraW5nPy5uZXdFdmVudD8ucHJlRXZlbnRJZCB8fFxuICAgICAgICAgICAgdGltZUJsb2NraW5nPy5uZXdFdmVudD8ucG9zdEV2ZW50SWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG5ld0V2ZW50ID0gdGltZUJsb2NraW5nLm5ld0V2ZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoKG5ld0V2ZW50RXh0ZXJuYWwgYXMgRXZlbnRQbHVzVHlwZSk/LmlkKSB7XG4gICAgICAgIG5ld0V2ZW50ID0geyAuLi5uZXdFdmVudCwgLi4ubmV3RXZlbnRFeHRlcm5hbCB9O1xuICAgICAgICBjb25zdCBleHRlcm5hbENhdGVnb3J5ID0gYmVzdE1hdGNoQ2F0ZWdvcmllcy5maW5kKFxuICAgICAgICAgIChjYXRlZ29yeSkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gZXh0ZXJuYWxNZWV0aW5nTGFiZWxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBvbGRSZW1pbmRlcnMgPSBhd2FpdCBsaXN0UmVtaW5kZXJzRm9yRXZlbnQoXG4gICAgICAgICAgKG5ld0V2ZW50RXh0ZXJuYWwgYXMgRXZlbnRQbHVzVHlwZSkuaWQsXG4gICAgICAgICAgdXNlcklkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlbWluZGVycyA9IGNyZWF0ZVJlbWluZGVyc1VzaW5nQ2F0ZWdvcnlEZWZhdWx0c0ZvckV2ZW50KFxuICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgIGV4dGVybmFsQ2F0ZWdvcnksXG4gICAgICAgICAgb2xkUmVtaW5kZXJzLFxuICAgICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2cocmVtaW5kZXJzLCAnIHJlbWluZGVycycpO1xuICAgICAgICBpZiAocmVtaW5kZXJzPy5sZW5ndGggPiAwICYmICFuZXdFdmVudD8udXNlck1vZGlmaWVkUmVtaW5kZXJzKSB7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzLnB1c2goLi4ucmVtaW5kZXJzKTtcbiAgICAgICAgICBuZXdSZW1pbmRlcnMgPSBfLnVuaXFCeShuZXdSZW1pbmRlcnMsICdtaW51dGVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW5ld0V2ZW50Py51c2VyTW9kaWZpZWRUaW1lQmxvY2tpbmcpIHtcbiAgICAgICAgICBjb25zdCB0aW1lQmxvY2tpbmcgPSBjcmVhdGVQcmVBbmRQb3N0RXZlbnRzRm9yQ2F0ZWdvcnlEZWZhdWx0cyhcbiAgICAgICAgICAgIGV4dGVybmFsQ2F0ZWdvcnksXG4gICAgICAgICAgICBuZXdFdmVudFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc29sZS5sb2codGltZUJsb2NraW5nLCAnIHRpbWVCbG9ja2luZycpO1xuICAgICAgICAgIGlmICh0aW1lQmxvY2tpbmc/LmJlZm9yZUV2ZW50KSB7XG4gICAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQgPSB0aW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRpbWVCbG9ja2luZz8uYWZ0ZXJFdmVudCkge1xuICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nLmFmdGVyRXZlbnQgPSB0aW1lQmxvY2tpbmcuYWZ0ZXJFdmVudDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aW1lQmxvY2tpbmc/Lm5ld0V2ZW50Py5wcmVFdmVudElkIHx8XG4gICAgICAgICAgICB0aW1lQmxvY2tpbmc/Lm5ld0V2ZW50Py5wb3N0RXZlbnRJZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbmV3RXZlbnQgPSB0aW1lQmxvY2tpbmcubmV3RXZlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IG5ld0V2ZW50LCBuZXdSZW1pbmRlcnMsIG5ld1RpbWVCbG9ja2luZyB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSB2YWx1ZXMgZm9yIGRlZmF1bHQgY2F0ZWdvcmllcycpO1xuICAgIH1cbiAgfTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlbWluZGVyc0FuZFRpbWVCbG9ja2luZ0Zyb21QcmV2aW91c0V2ZW50ID0gYXN5bmMgKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgbmV3RXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIG5ld1JlbWluZGVyczE6IFJlbWluZGVyVHlwZVtdLFxuICBuZXdUaW1lQmxvY2tpbmcxOiBCdWZmZXJUaW1lT2JqZWN0VHlwZSxcbiAgcHJldmlvdXNFdmVudD86IEV2ZW50UGx1c1R5cGVcbikgPT4ge1xuICB0cnkge1xuICAgIGxldCBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMxIHx8IFtdO1xuICAgIGxldCBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxIHx8IHt9O1xuICAgIGNvbnN0IHJlbWluZGVycyA9IGF3YWl0IGNyZWF0ZVJlbWluZGVyc0Zyb21QcmV2aW91c0V2ZW50Rm9yRXZlbnQoXG4gICAgICBuZXdFdmVudCxcbiAgICAgIHByZXZpb3VzRXZlbnQsXG4gICAgICB1c2VySWRcbiAgICApO1xuXG4gICAgY29uc29sZS5sb2cocmVtaW5kZXJzLCAnIHJlbWluZGVycycpO1xuICAgIGlmIChcbiAgICAgIHJlbWluZGVycz8ubGVuZ3RoID4gMCAmJlxuICAgICAgIW5ld0V2ZW50Py51c2VyTW9kaWZpZWRSZW1pbmRlcnMgJiZcbiAgICAgIHByZXZpb3VzRXZlbnQ/LmNvcHlSZW1pbmRlcnNcbiAgICApIHtcbiAgICAgIG5ld1JlbWluZGVycy5wdXNoKC4uLnJlbWluZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgIW5ld0V2ZW50Py51c2VyTW9kaWZpZWRUaW1lQmxvY2tpbmcgJiZcbiAgICAgIHByZXZpb3VzRXZlbnQ/LmNvcHlUaW1lQmxvY2tpbmdcbiAgICApIHtcbiAgICAgIGNvbnN0IHRpbWVCbG9ja2luZyA9IGNyZWF0ZVByZUFuZFBvc3RFdmVudHNGcm9tUHJldmlvdXNFdmVudChcbiAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyh0aW1lQmxvY2tpbmcsICcgdGltZUJsb2NraW5nJyk7XG4gICAgICBpZiAodGltZUJsb2NraW5nPy5iZWZvcmVFdmVudCkge1xuICAgICAgICBuZXdUaW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQgPSB0aW1lQmxvY2tpbmcuYmVmb3JlRXZlbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aW1lQmxvY2tpbmc/LmFmdGVyRXZlbnQpIHtcbiAgICAgICAgbmV3VGltZUJsb2NraW5nLmFmdGVyRXZlbnQgPSB0aW1lQmxvY2tpbmcuYWZ0ZXJFdmVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0aW1lQmxvY2tpbmc/Lm5ld0V2ZW50Py5wcmVFdmVudElkIHx8XG4gICAgICAgIHRpbWVCbG9ja2luZz8ubmV3RXZlbnQ/LnBvc3RFdmVudElkXG4gICAgICApIHtcbiAgICAgICAgbmV3RXZlbnQgPSB0aW1lQmxvY2tpbmcubmV3RXZlbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IG5ld0V2ZW50LCBuZXdSZW1pbmRlcnMsIG5ld1RpbWVCbG9ja2luZyB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBlLFxuICAgICAgJyB1bmFibGUgdG8gY3JlYXRlIHJlbWluZGVycyBhbmQgdGltZSBibG9ja2luZyBmcm9tIHByZXZpb3VzIGV2ZW50J1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMgPSBhc3luYyAoXG4gIGlkOiBzdHJpbmcsXG4gIHByZXZpb3VzRXZlbnQ6IEV2ZW50UGx1c1R5cGUsXG4gIG9sZEV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICB1c2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlVHlwZSxcbiAgYmVzdE1hdGNoQ2F0ZWdvcnkxOiBDYXRlZ29yeVR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBiZXN0TWF0Y2hDYXRlZ29yaWVzMTogQ2F0ZWdvcnlUeXBlW10sXG4gIG5ld01vZGlmaWVkRXZlbnQxOiBFdmVudFBsdXNUeXBlLFxuICBuZXdSZW1pbmRlcnMxOiBSZW1pbmRlclR5cGVbXSA9IFtdLFxuICBuZXdUaW1lQmxvY2tpbmcxOiBCdWZmZXJUaW1lT2JqZWN0VHlwZSA9IHt9LFxuICBwcmV2aW91c0NhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdID0gW10sXG4gIHByZXZpb3VzTWVldGluZ0NhdGVnb3JpZXNXaXRoTWVldGluZ0xhYmVsOiBDYXRlZ29yeVR5cGVbXSA9IFtdLFxuICBwcmV2aW91c01lZXRpbmdDYXRlZ29yaWVzV2l0aEV4dGVybmFsTWVldGluZ0xhYmVsOiBDYXRlZ29yeVR5cGVbXSA9IFtdXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJyBubyBpZCBpbnNpZGUgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudEFuZENvcHlDYXRlZ29yaWVzJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghcHJldmlvdXNFdmVudCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICcgbm8gcHJldmlvdXNFdmVudCBpbnNpZGUgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudEFuZENvcHlDYXRlZ29yaWVzJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghb2xkRXZlbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAnIG5vIGV2ZW50IGluc2lkZSBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMnXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyUHJlZmVyZW5jZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAnIG5vIHVzZXJQcmVmZXJlbmNlcyBpbnNpZGUgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudEFuZENvcHlDYXRlZ29yaWVzJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghYmVzdE1hdGNoQ2F0ZWdvcnkxKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJ25vIGJlc3RNYXRjaENhdGVnb3JpZXMgaW5zaWRlIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRBbmRDb3B5Q2F0ZWdvcmllcydcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICcgbm8gdXNlcklkIGluc2lkZSBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMnXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFiZXN0TWF0Y2hDYXRlZ29yaWVzMSkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICcgbm8gYmVzdE1hdGNoQ2F0ZWdvcmllcyBpbnNpZGUgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudEFuZENvcHlDYXRlZ29yaWVzJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghbmV3TW9kaWZpZWRFdmVudDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAnIG5vIG5ld01vZGlmaWVkRXZlbnQxIGluc2lkZSBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMnXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGJlc3RNYXRjaENhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdID0gYmVzdE1hdGNoQ2F0ZWdvcmllczEgfHwgW107XG4gICAgbGV0IGJlc3RNYXRjaENhdGVnb3J5OiBDYXRlZ29yeVR5cGUgfCBvYmplY3QgPSBiZXN0TWF0Y2hDYXRlZ29yeTEgfHwge307XG4gICAgbGV0IG5ld01vZGlmaWVkRXZlbnQ6IEV2ZW50UGx1c1R5cGUgfCBvYmplY3QgPSBuZXdNb2RpZmllZEV2ZW50MSB8fCB7fTtcbiAgICBsZXQgbmV3UmVtaW5kZXJzOiBSZW1pbmRlclR5cGVbXSA9IG5ld1JlbWluZGVyczEgfHwgW107XG4gICAgbGV0IG5ld1RpbWVCbG9ja2luZzogQnVmZmVyVGltZU9iamVjdFR5cGUgPSBuZXdUaW1lQmxvY2tpbmcxIHx8IHt9O1xuXG4gICAgaWYgKCFwcmV2aW91c0V2ZW50Py51bmxpbmsgJiYgIW9sZEV2ZW50Py51c2VyTW9kaWZpZWRDYXRlZ29yaWVzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChwcmV2aW91c0V2ZW50Py5jb3B5Q2F0ZWdvcmllcyB8fCB1c2VyUHJlZmVyZW5jZXM/LmNvcHlDYXRlZ29yaWVzKSAmJlxuICAgICAgICBwcmV2aW91c0NhdGVnb3JpZXM/Lmxlbmd0aCA+IDBcbiAgICAgICkge1xuICAgICAgICBjb25zdCBjYXRlZ29yeUV2ZW50czogQ2F0ZWdvcnlFdmVudFR5cGVbXSA9IHByZXZpb3VzQ2F0ZWdvcmllcy5tYXAoXG4gICAgICAgICAgKGMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RXZlbnQ6IENhdGVnb3J5RXZlbnRUeXBlID0ge1xuICAgICAgICAgICAgICBjYXRlZ29yeUlkOiBjLmlkLFxuICAgICAgICAgICAgICBldmVudElkOiBpZCxcbiAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0gYXMgQ2F0ZWdvcnlFdmVudFR5cGU7XG4gICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnlFdmVudDtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5RXZlbnRzLCAnIGNhdGVnb3J5RXZlbnRzJyk7XG4gICAgICAgIGF3YWl0IGNyZWF0ZUNhdGVnb3J5RXZlbnRzKGNhdGVnb3J5RXZlbnRzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZpb3VzQ2F0ZWdvcmllcz8uWzBdPy5pZCkge1xuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgZmluZEJlc3RNYXRjaENhdGVnb3J5MihvbGRFdmVudCwgcHJldmlvdXNDYXRlZ29yaWVzKTtcbiAgICAgICAgY29uc29sZS5sb2coYm9keSwgJyBib2R5Jyk7XG4gICAgICAgIGNvbnN0IHsgbGFiZWxzIH0gPSBib2R5O1xuXG4gICAgICAgIGNvbnN0IGJlc3RNYXRjaExhYmVsID0gcHJvY2Vzc0Jlc3RNYXRjaENhdGVnb3JpZXNOb1RocmVzaG9sZChcbiAgICAgICAgICBib2R5LFxuICAgICAgICAgIGxhYmVsc1xuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhiZXN0TWF0Y2hMYWJlbCwgJyBiZXN0TWF0Y2hMYWJlbCcpO1xuXG4gICAgICAgIGJlc3RNYXRjaENhdGVnb3J5ID0gcHJldmlvdXNDYXRlZ29yaWVzLmZpbmQoXG4gICAgICAgICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBiZXN0TWF0Y2hMYWJlbFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICgoYmVzdE1hdGNoQ2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlKT8uaWQpIHtcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gY29weU92ZXJQcmV2aW91c0V2ZW50RGVmYXVsdHMoXG4gICAgICAgICAgICBvbGRFdmVudCxcbiAgICAgICAgICAgIHByZXZpb3VzRXZlbnQsXG4gICAgICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yeSBhcyBDYXRlZ29yeVR5cGUsXG4gICAgICAgICAgICB1c2VyUHJlZmVyZW5jZXNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gY29weU92ZXJQcmV2aW91c0V2ZW50RGVmYXVsdHMoXG4gICAgICAgICAgb2xkRXZlbnQsXG4gICAgICAgICAgcHJldmlvdXNFdmVudCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdXNlclByZWZlcmVuY2VzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgKHVzZXJQcmVmZXJlbmNlcz8uY29weVJlbWluZGVycyB8fCB1c2VyUHJlZmVyZW5jZXM/LmNvcHlUaW1lQmxvY2tpbmcpICYmXG4gICAgICAgIChuZXdNb2RpZmllZEV2ZW50IGFzIEV2ZW50UGx1c1R5cGUpPy5pZFxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBuZXdFdmVudDogbmV3RXZlbnQxLFxuICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgIH0gPSBhd2FpdCBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGcm9tUHJldmlvdXNFdmVudEdpdmVuVXNlclByZWZlcmVuY2VzKFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50IGFzIEV2ZW50UGx1c1R5cGUsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyBhcyBCdWZmZXJUaW1lT2JqZWN0VHlwZSxcbiAgICAgICAgICBwcmV2aW91c0V2ZW50LFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlc1xuICAgICAgICApO1xuXG4gICAgICAgIGlmIChuZXdFdmVudDE/LmlkKSB7XG4gICAgICAgICAgbmV3TW9kaWZpZWRFdmVudCA9IG5ld0V2ZW50MTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSZW1pbmRlcnMxPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdUaW1lQmxvY2tpbmcxPy5hZnRlckV2ZW50IHx8IG5ld1RpbWVCbG9ja2luZzE/LmJlZm9yZUV2ZW50KSB7XG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nID0gbmV3VGltZUJsb2NraW5nMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICgoYmVzdE1hdGNoQ2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlKT8uZGVmYXVsdFJlbWluZGVycyB8fFxuICAgICAgICAgIChiZXN0TWF0Y2hDYXRlZ29yeSBhcyBDYXRlZ29yeVR5cGUpPy5kZWZhdWx0VGltZUJsb2NraW5nKSAmJlxuICAgICAgICAobmV3TW9kaWZpZWRFdmVudCBhcyBFdmVudFBsdXNUeXBlKT8uaWRcbiAgICAgICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgbmV3RXZlbnQ6IG5ld0V2ZW50MyxcbiAgICAgICAgICBuZXdSZW1pbmRlcnM6IG5ld1JlbWluZGVyczMsXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmczLFxuICAgICAgICB9ID0gYXdhaXQgdXBkYXRlVmFsdWVzRm9yRXZlbnRXaXRoUHJldmlvdXNFdmVudFBsdXNNZWV0aW5nQW5kRXh0ZXJuYWxNZWV0aW5nKFxuICAgICAgICAgIG9sZEV2ZW50LFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQgYXMgRXZlbnRQbHVzVHlwZSxcbiAgICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yaWVzLFxuICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcsXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgICBwcmV2aW91c0V2ZW50XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG5ld0V2ZW50Mykge1xuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQgPSBuZXdFdmVudDM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3UmVtaW5kZXJzMykge1xuICAgICAgICAgIG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3VGltZUJsb2NraW5nMykge1xuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzM7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAoKGJlc3RNYXRjaENhdGVnb3J5IGFzIENhdGVnb3J5VHlwZSk/LmNvcHlSZW1pbmRlcnMgfHxcbiAgICAgICAgICAoYmVzdE1hdGNoQ2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlKT8uY29weVRpbWVCbG9ja2luZykgJiZcbiAgICAgICAgKG5ld01vZGlmaWVkRXZlbnQgYXMgRXZlbnRQbHVzVHlwZSk/LmlkXG4gICAgICApIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudDIsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzOiBuZXdSZW1pbmRlcnMyLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzogbmV3VGltZUJsb2NraW5nMixcbiAgICAgICAgfSA9IGF3YWl0IGNyZWF0ZVJlbWluZGVyc0FuZFRpbWVCbG9ja2luZ0ZvckJlc3RNYXRjaENhdGVnb3J5KFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50IGFzIEV2ZW50UGx1c1R5cGUsXG4gICAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlLFxuICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmdcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG5ld0V2ZW50Mj8uaWQpIHtcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gbmV3RXZlbnQyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JlbWluZGVyczI/LlswXT8uaWQpIHtcbiAgICAgICAgICBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChuZXdUaW1lQmxvY2tpbmcyIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlKT8uYmVmb3JlRXZlbnQ/LmlkIHx8XG4gICAgICAgICAgKG5ld1RpbWVCbG9ja2luZzIgYXMgQnVmZmVyVGltZU9iamVjdFR5cGUpPy5hZnRlckV2ZW50Py5pZFxuICAgICAgICApIHtcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgKHByZXZpb3VzTWVldGluZ0NhdGVnb3JpZXNXaXRoTWVldGluZ0xhYmVsPy5bMF0/LmNvcHlSZW1pbmRlcnMgfHxcbiAgICAgICAgICBwcmV2aW91c01lZXRpbmdDYXRlZ29yaWVzV2l0aE1lZXRpbmdMYWJlbD8uWzBdPy5jb3B5VGltZUJsb2NraW5nKSAmJlxuICAgICAgICAobmV3TW9kaWZpZWRFdmVudCBhcyBFdmVudFBsdXNUeXBlKT8uaWRcbiAgICAgICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgbmV3RXZlbnQ6IG5ld0V2ZW50MixcbiAgICAgICAgICBuZXdSZW1pbmRlcnM6IG5ld1JlbWluZGVyczIsXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmcyLFxuICAgICAgICB9ID0gYXdhaXQgY3JlYXRlUmVtaW5kZXJzQW5kVGltZUJsb2NraW5nRm9yQmVzdE1hdGNoQ2F0ZWdvcnkoXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQgYXMgRXZlbnRQbHVzVHlwZSxcbiAgICAgICAgICBwcmV2aW91c01lZXRpbmdDYXRlZ29yaWVzV2l0aE1lZXRpbmdMYWJlbD8uWzBdLFxuICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmdcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG5ld0V2ZW50Mj8uaWQpIHtcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gbmV3RXZlbnQyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JlbWluZGVyczI/LlswXT8uaWQpIHtcbiAgICAgICAgICBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzI/LmFmdGVyRXZlbnQ/LmlkIHx8XG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nMj8uYmVmb3JlRXZlbnQ/LmlkXG4gICAgICAgICkge1xuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAocHJldmlvdXNNZWV0aW5nQ2F0ZWdvcmllc1dpdGhFeHRlcm5hbE1lZXRpbmdMYWJlbD8uWzBdXG4gICAgICAgICAgPy5jb3B5UmVtaW5kZXJzIHx8XG4gICAgICAgICAgcHJldmlvdXNNZWV0aW5nQ2F0ZWdvcmllc1dpdGhFeHRlcm5hbE1lZXRpbmdMYWJlbD8uWzBdXG4gICAgICAgICAgICA/LmNvcHlUaW1lQmxvY2tpbmcpICYmXG4gICAgICAgIChuZXdNb2RpZmllZEV2ZW50IGFzIEV2ZW50UGx1c1R5cGUpPy5pZFxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBuZXdFdmVudDogbmV3RXZlbnQyLFxuICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMixcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzIsXG4gICAgICAgIH0gPSBhd2FpdCBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGb3JCZXN0TWF0Y2hDYXRlZ29yeShcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgbmV3TW9kaWZpZWRFdmVudCBhcyBFdmVudFBsdXNUeXBlLFxuICAgICAgICAgIHByZXZpb3VzTWVldGluZ0NhdGVnb3JpZXNXaXRoRXh0ZXJuYWxNZWV0aW5nTGFiZWw/LlswXSxcbiAgICAgICAgICBuZXdSZW1pbmRlcnMsXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nXG4gICAgICAgICk7XG4gICAgICAgIGlmIChuZXdFdmVudDIpIHtcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gbmV3RXZlbnQyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JlbWluZGVyczIpIHtcbiAgICAgICAgICBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1RpbWVCbG9ja2luZzIpIHtcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgKHByZXZpb3VzRXZlbnQ/LmNvcHlSZW1pbmRlcnMgfHwgcHJldmlvdXNFdmVudD8uY29weVRpbWVCbG9ja2luZykgJiZcbiAgICAgICAgKG5ld01vZGlmaWVkRXZlbnQgYXMgRXZlbnRQbHVzVHlwZSk/LmlkXG4gICAgICApIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudDEsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzOiBuZXdSZW1pbmRlcnMxLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzogbmV3VGltZUJsb2NraW5nMSxcbiAgICAgICAgfSA9IGF3YWl0IGNyZWF0ZVJlbWluZGVyc0FuZFRpbWVCbG9ja2luZ0Zyb21QcmV2aW91c0V2ZW50KFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50IGFzIEV2ZW50UGx1c1R5cGUsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZ1xuICAgICAgICApO1xuXG4gICAgICAgIGlmIChuZXdFdmVudDE/LmlkKSB7XG4gICAgICAgICAgbmV3TW9kaWZpZWRFdmVudCA9IG5ld0V2ZW50MTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSZW1pbmRlcnMxPy5bMF0/LmlkKSB7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAobmV3VGltZUJsb2NraW5nMSBhcyBCdWZmZXJUaW1lT2JqZWN0VHlwZSk/LmFmdGVyRXZlbnQ/LmlkIHx8XG4gICAgICAgICAgKG5ld1RpbWVCbG9ja2luZzEgYXMgQnVmZmVyVGltZU9iamVjdFR5cGUpPy5iZWZvcmVFdmVudD8uaWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nID0gbmV3VGltZUJsb2NraW5nMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBiZXN0TWF0Y2hDYXRlZ29yaWVzID0gZ2V0VW5pcXVlTGFiZWxzKGJlc3RNYXRjaENhdGVnb3JpZXMpO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGJlc3RNYXRjaENhdGVnb3JpZXMsXG4gICAgICAgICcgYmVzdE1hdGNoQ2F0ZWdvcmllcyBmcm9tIHByZXZpb3VzQ2F0ZWdvcmllcydcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2cobmV3TW9kaWZpZWRFdmVudCwgJyBuZXdNb2RpZmllZEV2ZW50Jyk7XG4gICAgY29uc29sZS5sb2cobmV3UmVtaW5kZXJzLCAnIG5ld1JlbWluZGVycycpO1xuICAgIGNvbnNvbGUubG9nKG5ld1RpbWVCbG9ja2luZywgJyBuZXdUaW1lQmxvY2tpbmcnKTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRBbmRDb3B5Q2F0ZWdvcmllcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudFdpdGhvdXRDYXRlZ29yaWVzID0gYXN5bmMgKFxuICBwcmV2aW91c0V2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBldmVudDogRXZlbnRQbHVzVHlwZSxcbiAgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZVR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBuZXdSZW1pbmRlcnM6IFJlbWluZGVyVHlwZVtdID0gW10sXG4gIG5ld1RpbWVCbG9ja2luZzogQnVmZmVyVGltZU9iamVjdFR5cGUgPSB7fVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRXaXRob3V0Q2F0ZWdvcmllcycpO1xuICAgIGlmICghcHJldmlvdXNFdmVudCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICcgbm8gcHJldmlvdXNFdmVudCBpbnNpZGUgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudEFuZENvcHlDYXRlZ29yaWVzJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghdXNlclByZWZlcmVuY2VzKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJyBubyB1c2VyUHJlZmVyZW5jZXMgaW5zaWRlIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRBbmRDb3B5Q2F0ZWdvcmllcydcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICcgbm8gdXNlcklkIGluc2lkZSBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMnXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFldmVudCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICcgbm8gbmV3TW9kaWZpZWRFdmVudCBpbnNpZGUgcHJvY2Vzc0V2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudEFuZENvcHlDYXRlZ29yaWVzJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBuZXdNb2RpZmllZEV2ZW50ID0gZXZlbnQ7XG5cbiAgICBpZiAoIXByZXZpb3VzRXZlbnQ/LnVubGluaykge1xuICAgICAgbmV3TW9kaWZpZWRFdmVudCA9IGNvcHlPdmVyUHJldmlvdXNFdmVudERlZmF1bHRzKFxuICAgICAgICBldmVudCxcbiAgICAgICAgcHJldmlvdXNFdmVudCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1c2VyUHJlZmVyZW5jZXNcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgbmV3TW9kaWZpZWRFdmVudCxcbiAgICAgICAgJyBuZXdNb2RpZmllZEV2ZW50IGluc2lkZSBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50V2l0aG91dENhdGVnb3JpZXMgYWZ0ZXIgY29weU92ZXJQcmV2aW91c0V2ZW50RGVmYXVsdHMnXG4gICAgICApO1xuICAgICAgaWYgKFxuICAgICAgICAodXNlclByZWZlcmVuY2VzPy5jb3B5UmVtaW5kZXJzIHx8IHVzZXJQcmVmZXJlbmNlcz8uY29weVRpbWVCbG9ja2luZykgJiZcbiAgICAgICAgKGV2ZW50IGFzIEV2ZW50UGx1c1R5cGUpPy5pZFxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBuZXdFdmVudDogbmV3RXZlbnQxLFxuICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgIH0gPSBhd2FpdCBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGcm9tUHJldmlvdXNFdmVudEdpdmVuVXNlclByZWZlcmVuY2VzKFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50IGFzIEV2ZW50UGx1c1R5cGUsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyBhcyBCdWZmZXJUaW1lT2JqZWN0VHlwZSxcbiAgICAgICAgICBwcmV2aW91c0V2ZW50LFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlc1xuICAgICAgICApO1xuXG4gICAgICAgIGlmIChuZXdFdmVudDE/LmlkKSB7XG4gICAgICAgICAgbmV3TW9kaWZpZWRFdmVudCA9IG5ld0V2ZW50MTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSZW1pbmRlcnMxPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdUaW1lQmxvY2tpbmcxPy5hZnRlckV2ZW50IHx8IG5ld1RpbWVCbG9ja2luZzE/LmJlZm9yZUV2ZW50KSB7XG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nID0gbmV3VGltZUJsb2NraW5nMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIChwcmV2aW91c0V2ZW50Py5jb3B5UmVtaW5kZXJzIHx8IHByZXZpb3VzRXZlbnQ/LmNvcHlUaW1lQmxvY2tpbmcpICYmXG4gICAgICAgIChldmVudCBhcyBFdmVudFBsdXNUeXBlKT8uaWRcbiAgICAgICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgbmV3RXZlbnQ6IG5ld0V2ZW50MSxcbiAgICAgICAgICBuZXdSZW1pbmRlcnM6IG5ld1JlbWluZGVyczEsXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmcxLFxuICAgICAgICB9ID0gYXdhaXQgY3JlYXRlUmVtaW5kZXJzQW5kVGltZUJsb2NraW5nRnJvbVByZXZpb3VzRXZlbnQoXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQgYXMgRXZlbnRQbHVzVHlwZSxcbiAgICAgICAgICBuZXdSZW1pbmRlcnMsXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG5ld0V2ZW50MT8uaWQpIHtcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gbmV3RXZlbnQxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JlbWluZGVyczE/LlswXT8uaWQpIHtcbiAgICAgICAgICBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChuZXdUaW1lQmxvY2tpbmcxIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlKT8uYWZ0ZXJFdmVudD8uaWQgfHxcbiAgICAgICAgICAobmV3VGltZUJsb2NraW5nMSBhcyBCdWZmZXJUaW1lT2JqZWN0VHlwZSk/LmJlZm9yZUV2ZW50Py5pZFxuICAgICAgICApIHtcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2cobmV3TW9kaWZpZWRFdmVudCwgJyBuZXdNb2RpZmllZEV2ZW50Jyk7XG4gICAgY29uc29sZS5sb2cobmV3UmVtaW5kZXJzLCAnIG5ld1JlbWluZGVycycpO1xuICAgIGNvbnNvbGUubG9nKG5ld1RpbWVCbG9ja2luZywgJyBuZXdUaW1lQmxvY2tpbmcnKTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRXaXRob3V0Q2F0ZWdvcmllcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc1VzZXJFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnQgPSBhc3luYyAoXG4gIGV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBwcmV2aW91c0V2ZW50SWQ6IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCwgdXNlcklkIH0gPSBldmVudDtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGlkLFxuICAgICAgdXNlcklkLFxuICAgICAgcHJldmlvdXNFdmVudElkLFxuICAgICAgJyBpZCwgdXNlcklkLCBwcmV2aW91c0V2ZW50SWQsIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCdcbiAgICApO1xuICAgIGlmICghaWQgfHwgIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpZCBvciB1c2VySWQgaXMgbWlzc2luZycpO1xuICAgIH1cbiAgICBjb25zdCBwcmV2aW91c0V2ZW50ID0gYXdhaXQgZ2V0RXZlbnRGcm9tUHJpbWFyeUtleShwcmV2aW91c0V2ZW50SWQpO1xuICAgIGNvbnN0IHByZWZlcnJlZFRpbWVSYW5nZXMgPVxuICAgICAgYXdhaXQgbGlzdFByZWZlcnJlZFRpbWVSYW5nZXNGb3JFdmVudChwcmV2aW91c0V2ZW50SWQpO1xuICAgIHByZXZpb3VzRXZlbnQucHJlZmVycmVkVGltZVJhbmdlcyA9IHByZWZlcnJlZFRpbWVSYW5nZXM7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBwcmV2aW91c0V2ZW50LFxuICAgICAgJyBwcmV2aW91c0V2ZW50IGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCdcbiAgICApO1xuICAgIGNvbnN0IGNhdGVnb3JpZXM6IENhdGVnb3J5VHlwZVtdID0gYXdhaXQgZ2V0VXNlckNhdGVnb3JpZXModXNlcklkKTtcbiAgICBjb25zb2xlLmxvZyhpZCwgY2F0ZWdvcmllcywgJyBpZCwgY2F0ZWdvcmllcycpO1xuXG4gICAgY29uc3QgYm9keTogQ2xhc3NpZmljYXRpb25SZXNwb25zZUJvZHlUeXBlID0gYXdhaXQgZmluZEJlc3RNYXRjaENhdGVnb3J5MihcbiAgICAgIGV2ZW50LFxuICAgICAgY2F0ZWdvcmllc1xuICAgICk7XG4gICAgY29uc29sZS5sb2coaWQsIGJvZHksICcgaWQsIGJvZHknKTtcbiAgICBjb25zdCB7IGxhYmVscywgc2NvcmVzIH0gPSBib2R5O1xuXG4gICAgY29uc3QgYmVzdE1hdGNoTGFiZWwgPSBwcm9jZXNzQmVzdE1hdGNoQ2F0ZWdvcmllcyhib2R5LCBsYWJlbHMpO1xuICAgIGNvbnNvbGUubG9nKGlkLCBiZXN0TWF0Y2hMYWJlbCwgJyBpZCwgYmVzdE1hdGNoTGFiZWwnKTtcbiAgICBsZXQgYmVzdE1hdGNoQ2F0ZWdvcnk6IENhdGVnb3J5VHlwZSB8IG9iamVjdCA9IHt9O1xuICAgIGlmIChiZXN0TWF0Y2hMYWJlbCkge1xuICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnkgPSBjYXRlZ29yaWVzLmZpbmQoXG4gICAgICAgIChjYXRlZ29yeSkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gYmVzdE1hdGNoTGFiZWxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGJlc3RNYXRjaENhdGVnb3JpZXNQbHVzTWVldGluZ1R5cGUgPSBbXTtcbiAgICBpZiAoKGJlc3RNYXRjaENhdGVnb3J5IGFzIENhdGVnb3J5VHlwZSk/LmlkKSB7XG4gICAgICBiZXN0TWF0Y2hDYXRlZ29yaWVzUGx1c01lZXRpbmdUeXBlID1cbiAgICAgICAgYXdhaXQgcHJvY2Vzc0V2ZW50Rm9yTWVldGluZ1R5cGVDYXRlZ29yaWVzKFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIGJlc3RNYXRjaENhdGVnb3J5IGFzIENhdGVnb3J5VHlwZSxcbiAgICAgICAgICBsYWJlbHMsXG4gICAgICAgICAgc2NvcmVzLFxuICAgICAgICAgIGNhdGVnb3JpZXNcbiAgICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBpZCxcbiAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcmllc1BsdXNNZWV0aW5nVHlwZSxcbiAgICAgICAgJyBpZCwgYmVzdE1hdGNoQ2F0ZWdvcmllc1BsdXNNZWV0aW5nVHlwZSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclByZWZlcmVuY2VzID0gYXdhaXQgZ2V0VXNlclByZWZlcmVuY2VzKHVzZXJJZCk7XG4gICAgY29uc29sZS5sb2coaWQsIHVzZXJQcmVmZXJlbmNlcywgJyBpZCwgdXNlclByZWZlcmVuY2VzJyk7XG4gICAgaWYgKCF1c2VyUHJlZmVyZW5jZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndXNlclByZWZlcmVuY2VzIGlzIG1pc3NpbmcnKTtcbiAgICB9XG5cbiAgICBsZXQgbmV3TW9kaWZpZWRFdmVudCA9IGV2ZW50O1xuICAgIGxldCBuZXdSZW1pbmRlcnM6IFJlbWluZGVyVHlwZVtdID0gW107XG4gICAgbGV0IG5ld1RpbWVCbG9ja2luZzogQnVmZmVyVGltZU9iamVjdFR5cGUgPSB7fTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgaWQsXG4gICAgICBwcmV2aW91c0V2ZW50LFxuICAgICAgJyBpZCwgcHJldmlvdXNFdmVudCBiZWZvcmUgaWYgY2xhdXNlIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCdcbiAgICApO1xuXG4gICAgaWYgKFxuICAgICAgKHByZXZpb3VzRXZlbnQ/LmNvcHlDYXRlZ29yaWVzIHx8IHVzZXJQcmVmZXJlbmNlcz8uY29weUNhdGVnb3JpZXMpICYmXG4gICAgICAhcHJldmlvdXNFdmVudD8udW5saW5rICYmXG4gICAgICAhZXZlbnQ/LnVzZXJNb2RpZmllZENhdGVnb3JpZXNcbiAgICApIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzQ2F0ZWdvcmllcyA9IGF3YWl0IGxpc3RDYXRlZ29yaWVzRm9yRXZlbnQocHJldmlvdXNFdmVudC5pZCk7XG4gICAgICBjb25zb2xlLmxvZyhpZCwgcHJldmlvdXNDYXRlZ29yaWVzLCAnIGlkLCBwcmV2aW91c0NhdGVnb3JpZXMnKTtcblxuICAgICAgaWYgKHVzZXJQcmVmZXJlbmNlcz8uaWQgJiYgbmV3TW9kaWZpZWRFdmVudD8uaWQpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNNZWV0aW5nQ2F0ZWdvcmllc1dpdGhNZWV0aW5nTGFiZWwgPVxuICAgICAgICAgIHByZXZpb3VzQ2F0ZWdvcmllcy5maWx0ZXIoXG4gICAgICAgICAgICAoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Lm5hbWUgPT09IG1lZXRpbmdMYWJlbFxuICAgICAgICAgICk7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzTWVldGluZ0NhdGVnb3JpZXNXaXRoRXh0ZXJuYWxNZWV0aW5nTGFiZWwgPVxuICAgICAgICAgIHByZXZpb3VzQ2F0ZWdvcmllcy5maWx0ZXIoXG4gICAgICAgICAgICAoY2F0ZWdvcnkpID0+IGNhdGVnb3J5Lm5hbWUgPT09IGV4dGVybmFsTWVldGluZ0xhYmVsXG4gICAgICAgICAgKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQ6IG5ld01vZGlmaWVkRXZlbnQxLFxuICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgIH0gPSBhd2FpdCBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMoXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcHJldmlvdXNFdmVudCxcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlLFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yaWVzUGx1c01lZXRpbmdUeXBlLFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyxcbiAgICAgICAgICBwcmV2aW91c0NhdGVnb3JpZXMsXG4gICAgICAgICAgcHJldmlvdXNNZWV0aW5nQ2F0ZWdvcmllc1dpdGhNZWV0aW5nTGFiZWwsXG4gICAgICAgICAgcHJldmlvdXNNZWV0aW5nQ2F0ZWdvcmllc1dpdGhFeHRlcm5hbE1lZXRpbmdMYWJlbFxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQxLFxuICAgICAgICAgICcgbmV3TW9kaWZpZWRFdmVudCwgbmV3TW9kaWZpZWRFdmVudDEgaW5zaWRlIHByb2Nlc3NVc2VyRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50IGFmdGVyIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRBbmRDb3B5Q2F0ZWdvcmllcydcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgICAgJyBuZXdUaW1lQmxvY2tpbmcsIG5ld1RpbWVCbG9ja2luZzEsIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCBhZnRlciBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50QW5kQ29weUNhdGVnb3JpZXMnXG4gICAgICAgICk7XG4gICAgICAgIG5ld01vZGlmaWVkRXZlbnQgPSBuZXdNb2RpZmllZEV2ZW50MSBhcyBFdmVudFBsdXNUeXBlO1xuICAgICAgICBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMxO1xuICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQ6IG5ld01vZGlmaWVkRXZlbnQxLFxuICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgIH0gPSBhd2FpdCBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50V2l0aG91dENhdGVnb3JpZXMoXG4gICAgICAgICAgcHJldmlvdXNFdmVudCxcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZ1xuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQxLFxuICAgICAgICAgICcgbmV3TW9kaWZpZWRFdmVudCwgbmV3TW9kaWZpZWRFdmVudDEgaW5zaWRlIHByb2Nlc3NVc2VyRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50IGFmdGVyIGVsc2UgIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRBbmRDb3B5Q2F0ZWdvcmllcydcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgICAgJyBuZXdUaW1lQmxvY2tpbmcsIG5ld1RpbWVCbG9ja2luZzEsIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCBhZnRlciBlbHNlIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRBbmRDb3B5Q2F0ZWdvcmllcydcbiAgICAgICAgKTtcbiAgICAgICAgbmV3TW9kaWZpZWRFdmVudCA9IG5ld01vZGlmaWVkRXZlbnQxIGFzIEV2ZW50UGx1c1R5cGU7XG4gICAgICAgIG5ld1JlbWluZGVycyA9IG5ld1JlbWluZGVyczE7XG4gICAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzEgYXMgQnVmZmVyVGltZU9iamVjdFR5cGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdXNlclByZWZlcmVuY2VzPy5pZCAmJlxuICAgICAgIXByZXZpb3VzRXZlbnQ/LmNvcHlDYXRlZ29yaWVzICYmXG4gICAgICAhdXNlclByZWZlcmVuY2VzPy5jb3B5Q2F0ZWdvcmllcyAmJlxuICAgICAgIWV2ZW50Py51c2VyTW9kaWZpZWRDYXRlZ29yaWVzICYmXG4gICAgICBldmVudD8uaWQgJiZcbiAgICAgIHByZXZpb3VzRXZlbnQ/LmlkXG4gICAgKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChiZXN0TWF0Y2hDYXRlZ29yeSBhcyBDYXRlZ29yeVR5cGUpPy5pZCAmJlxuICAgICAgICBiZXN0TWF0Y2hDYXRlZ29yaWVzUGx1c01lZXRpbmdUeXBlPy5sZW5ndGggPiAwXG4gICAgICApIHtcbiAgICAgICAgbmV3TW9kaWZpZWRFdmVudCA9IGNvcHlPdmVyUHJldmlvdXNFdmVudERlZmF1bHRzKFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIHByZXZpb3VzRXZlbnQsXG4gICAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlLFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlc1xuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgICcgbmV3TW9kaWZpZWRFdmVudCBmcm9tIEJlc3RNYXRjaENhdGVnb3J5J1xuICAgICAgICApO1xuICAgICAgICBpZiAobmV3TW9kaWZpZWRFdmVudD8uaWQpIHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBuZXdFdmVudDogbmV3RXZlbnQxLFxuICAgICAgICAgICAgbmV3UmVtaW5kZXJzOiBuZXdSZW1pbmRlcnMxLFxuICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmcxLFxuICAgICAgICAgIH0gPSBhd2FpdCBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGb3JCZXN0TWF0Y2hDYXRlZ29yeShcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgbmV3TW9kaWZpZWRFdmVudCxcbiAgICAgICAgICAgIGJlc3RNYXRjaENhdGVnb3J5IGFzIENhdGVnb3J5VHlwZSxcbiAgICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZ1xuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgICAgbmV3RXZlbnQxLFxuICAgICAgICAgICAgJyBuZXdNb2RpZmllZEV2ZW50LCBuZXdFdmVudDEgaW5zaWRlIHByb2Nlc3NVc2VyRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50IGFmdGVyIGNyZWF0ZVJlbWluZGVyc0FuZFRpbWVCbG9ja2luZ0ZvckJlc3RNYXRjaENhdGVnb3J5J1xuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcsXG4gICAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcxLFxuICAgICAgICAgICAgJyBuZXdUaW1lQmxvY2tpbmcsIG5ld1RpbWVCbG9ja2luZzEsIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCBhZnRlciBjcmVhdGVSZW1pbmRlcnNBbmRUaW1lQmxvY2tpbmdGb3JCZXN0TWF0Y2hDYXRlZ29yeSdcbiAgICAgICAgICApO1xuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQgPSBuZXdFdmVudDE7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMTtcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgICAgJyBuZXdNb2RpZmllZEV2ZW50IGluc2lkZSBCZXN0TWF0Y2hDYXRlZ29yeSdcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKG5ld1JlbWluZGVycywgJyBuZXdSZW1pbmRlcnMgaW5zaWRlICcpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKG5ld1RpbWVCbG9ja2luZywgJyBuZXdUaW1lQmxvY2tpbmcgaW5zaWRlICcpO1xuXG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgbmV3RXZlbnQ6IG5ld0V2ZW50MixcbiAgICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMixcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzogbmV3VGltZUJsb2NraW5nMixcbiAgICAgICAgICB9ID0gYXdhaXQgdXBkYXRlVmFsdWVzRm9yRXZlbnRXaXRoUHJldmlvdXNFdmVudFBsdXNNZWV0aW5nQW5kRXh0ZXJuYWxNZWV0aW5nKFxuICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgICAgYmVzdE1hdGNoQ2F0ZWdvcmllc1BsdXNNZWV0aW5nVHlwZSxcbiAgICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyxcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgbmV3TW9kaWZpZWRFdmVudCxcbiAgICAgICAgICAgIG5ld0V2ZW50MixcbiAgICAgICAgICAgICcgbmV3TW9kaWZpZWRFdmVudCwgbmV3RXZlbnQyIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCBhZnRlciB1cGRhdGVWYWx1ZXNGb3JFdmVudFdpdGhQcmV2aW91c0V2ZW50UGx1c01lZXRpbmdBbmRFeHRlcm5hbE1lZXRpbmcnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyxcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzIsXG4gICAgICAgICAgICAnIG5ld1RpbWVCbG9ja2luZywgbmV3VGltZUJsb2NraW5nMiwgaW5zaWRlIHByb2Nlc3NVc2VyRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50IGFmdGVyIHVwZGF0ZVZhbHVlc0ZvckV2ZW50V2l0aFByZXZpb3VzRXZlbnRQbHVzTWVldGluZ0FuZEV4dGVybmFsTWVldGluZydcbiAgICAgICAgICApO1xuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQgPSBuZXdFdmVudDI7XG4gICAgICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMjtcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcyO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgICAgJyBuZXdNb2RpZmllZEV2ZW50IGluc2lkZSBCZXN0TWF0Y2hDYXRlZ29yeSBhZnRlciB1cGRhdGVWYWx1ZXNGb3JFdmVudFdpdGhQcmV2aW91c0V2ZW50V2l0aE1lZXRpbmdBbmRFeHRlcm5hbE1lZXRpbmcnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICAgICcgbmV3UmVtaW5kZXJzIGluc2lkZSBCZXN0TWF0Y2hDYXRlZ29yeSBhZnRlciB1cGRhdGVWYWx1ZXNGb3JFdmVudFdpdGhQcmV2aW91c0V2ZW50V2l0aE1lZXRpbmdBbmRFeHRlcm5hbE1lZXRpbmcnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyxcbiAgICAgICAgICAgICcgbmV3VGltZUJsb2NraW5nIGluc2lkZSBCZXN0TWF0Y2hDYXRlZ29yeSBhZnRlciB1cGRhdGVWYWx1ZXNGb3JFdmVudFdpdGhQcmV2aW91c0V2ZW50V2l0aE1lZXRpbmdBbmRFeHRlcm5hbE1lZXRpbmcnXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQ6IG5ld01vZGlmaWVkRXZlbnQxLFxuICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgICBuZXdUaW1lQmxvY2tpbmc6IG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgIH0gPSBhd2FpdCBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50V2l0aG91dENhdGVnb3JpZXMoXG4gICAgICAgICAgcHJldmlvdXNFdmVudCxcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZ1xuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQxLFxuICAgICAgICAgICcgbmV3TW9kaWZpZWRFdmVudCwgbmV3TW9kaWZpZWRFdmVudDEgaW5zaWRlIHByb2Nlc3NVc2VyRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50IGFmdGVyIHByb2Nlc3NFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnRXaXRob3V0Q2F0ZWdvcmllcydcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgICAgIG5ld1RpbWVCbG9ja2luZzEsXG4gICAgICAgICAgJyBuZXdUaW1lQmxvY2tpbmcsIG5ld1RpbWVCbG9ja2luZzEsIGluc2lkZSBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudCBhZnRlciBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50V2l0aG91dENhdGVnb3JpZXMnXG4gICAgICAgICk7XG4gICAgICAgIG5ld01vZGlmaWVkRXZlbnQgPSBuZXdNb2RpZmllZEV2ZW50MSBhcyBFdmVudFBsdXNUeXBlO1xuICAgICAgICBuZXdSZW1pbmRlcnMgPSBuZXdSZW1pbmRlcnMxO1xuICAgICAgICBuZXdUaW1lQmxvY2tpbmcgPSBuZXdUaW1lQmxvY2tpbmcxIGFzIEJ1ZmZlclRpbWVPYmplY3RUeXBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5ld0V2ZW50OiBFdmVudFBsdXNUeXBlID0gbmV3TW9kaWZpZWRFdmVudCA/PyBldmVudDtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIG5ld0V2ZW50LFxuICAgICAgZXZlbnQsXG4gICAgICAnIG5ld0V2ZW50LCBldmVudCBsYXN0IGJlZm9yZSByZXR1cm5lZCBpbnNpZGUgcHJvY2Vzc1VzZXJFdmVudFdpdGhGb3VuZFByZXZpb3VzRXZlbnQnXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXdFdmVudCxcbiAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgIG5ld1RpbWVCbG9ja2luZyxcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50Jyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwcm9jZXNzVXNlckV2ZW50V2l0aEZvdW5kUHJldmlvdXNFdmVudFdpdGhVc2VyTW9kaWZpZWRDYXRlZ29yaWVzID1cbiAgYXN5bmMgKGV2ZW50OiBFdmVudFBsdXNUeXBlLCBwcmV2aW91c0V2ZW50SWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWV2ZW50Py5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V2ZW50IGlzIG1pc3NpbmcnKTtcbiAgICAgIH1cbiAgICAgIGlmICghcHJldmlvdXNFdmVudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncHJldmlvdXNFdmVudElkIGlzIG1pc3NpbmcnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2F0ZWdvcmllczogQ2F0ZWdvcnlUeXBlW10gPSBhd2FpdCBsaXN0Q2F0ZWdvcmllc0ZvckV2ZW50KFxuICAgICAgICBldmVudD8uaWRcbiAgICAgICk7XG4gICAgICBpZiAoIWNhdGVnb3JpZXM/LlswXT8uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYXRlZ29yaWVzIGlzIG1pc3NpbmcnKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBldmVudD8uaWQsXG4gICAgICAgICdpZCBpbnNpZGUgIHByb2Nlc3NVc2VyRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50V2l0aFVzZXJNb2RpZmllZENhdGVnb3JpZXMnXG4gICAgICApO1xuICAgICAgY29uc3QgcHJldmlvdXNFdmVudCA9IGF3YWl0IGdldEV2ZW50RnJvbVByaW1hcnlLZXkocHJldmlvdXNFdmVudElkKTtcbiAgICAgIGNvbnN0IHByZWZlcnJlZFRpbWVSYW5nZXMgPVxuICAgICAgICBhd2FpdCBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50KHByZXZpb3VzRXZlbnRJZCk7XG4gICAgICBwcmV2aW91c0V2ZW50LnByZWZlcnJlZFRpbWVSYW5nZXMgPSBwcmVmZXJyZWRUaW1lUmFuZ2VzO1xuICAgICAgaWYgKCFwcmV2aW91c0V2ZW50Py5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ByZXZpb3VzRXZlbnQgaXMgbWlzc2luZycpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coY2F0ZWdvcmllcywgJyBjYXRlZ29yaWVzJyk7XG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgZmluZEJlc3RNYXRjaENhdGVnb3J5MihldmVudCwgY2F0ZWdvcmllcyk7XG4gICAgICBjb25zb2xlLmxvZyhib2R5LCAnIGJvZHknKTtcbiAgICAgIGlmIChib2R5Py5sYWJlbHM/LlswXSkge1xuICAgICAgICBjb25zdCB7IGxhYmVscyB9ID0gYm9keTtcblxuICAgICAgICBjb25zdCBiZXN0TWF0Y2hMYWJlbCA9IHByb2Nlc3NCZXN0TWF0Y2hDYXRlZ29yaWVzTm9UaHJlc2hvbGQoXG4gICAgICAgICAgYm9keSxcbiAgICAgICAgICBsYWJlbHNcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coYmVzdE1hdGNoTGFiZWwsICcgYmVzdE1hdGNoTGFiZWwnKTtcbiAgICAgICAgaWYgKGJlc3RNYXRjaExhYmVsKSB7XG4gICAgICAgICAgbGV0IGJlc3RNYXRjaENhdGVnb3J5ID0gY2F0ZWdvcmllcy5maW5kKFxuICAgICAgICAgICAgKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lID09PSBiZXN0TWF0Y2hMYWJlbFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCFiZXN0TWF0Y2hDYXRlZ29yeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiZXN0TWF0Y2hDYXRlZ29yeSBpcyBtaXNzaW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHVzZXJQcmVmZXJlbmNlcyA9IGF3YWl0IGdldFVzZXJQcmVmZXJlbmNlcyhldmVudD8udXNlcklkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyUHJlZmVyZW5jZXMsICcgdXNlclByZWZlcmVuY2VzJyk7XG4gICAgICAgICAgaWYgKCF1c2VyUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlclByZWZlcmVuY2VzIGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IG5ld01vZGlmaWVkRXZlbnQgPSBjb3B5T3ZlclByZXZpb3VzRXZlbnREZWZhdWx0cyhcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgcHJldmlvdXNFdmVudCxcbiAgICAgICAgICAgIGJlc3RNYXRjaENhdGVnb3J5LFxuICAgICAgICAgICAgdXNlclByZWZlcmVuY2VzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQsXG4gICAgICAgICAgICAnIG5ld01vZGlmaWVkRXZlbnQgZnJvbSBCZXN0TWF0Y2hDYXRlZ29yeSdcbiAgICAgICAgICApO1xuICAgICAgICAgIGxldCBuZXdSZW1pbmRlcnM6IFJlbWluZGVyVHlwZVtdID0gW107XG4gICAgICAgICAgbGV0IG5ld1RpbWVCbG9ja2luZzogQnVmZmVyVGltZU9iamVjdFR5cGUgPSB7fTtcblxuICAgICAgICAgIGlmIChjYXRlZ29yaWVzPy5sZW5ndGggPiAwICYmIG5ld01vZGlmaWVkRXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudDEsXG4gICAgICAgICAgICAgIG5ld1JlbWluZGVyczogbmV3UmVtaW5kZXJzMSxcbiAgICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nOiBuZXdUaW1lQmxvY2tpbmcxLFxuICAgICAgICAgICAgfSA9IGF3YWl0IHVwZGF0ZVZhbHVlc0ZvckV2ZW50V2l0aFByZXZpb3VzRXZlbnRQbHVzTWVldGluZ0FuZEV4dGVybmFsTWVldGluZyhcbiAgICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICAgIG5ld01vZGlmaWVkRXZlbnQsXG4gICAgICAgICAgICAgIGNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgIG5ld1JlbWluZGVycyxcbiAgICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgICAgICAgICBldmVudD8udXNlcklkLFxuICAgICAgICAgICAgICB1c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgICAgICAgIHByZXZpb3VzRXZlbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50ID0gbmV3RXZlbnQxO1xuICAgICAgICAgICAgbmV3UmVtaW5kZXJzID0gbmV3UmVtaW5kZXJzMSB8fCBbXTtcbiAgICAgICAgICAgIG5ld1RpbWVCbG9ja2luZyA9IG5ld1RpbWVCbG9ja2luZzEgfHwge307XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICBuZXdNb2RpZmllZEV2ZW50LFxuICAgICAgICAgICAgICAnIG5ld01vZGlmaWVkRXZlbnQgaW5zaWRlIGVsc2Ugc3RhdGVtZW50IG9mIGNvcHlDYXRlZ29yaWVzJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICBuZXdSZW1pbmRlcnMsXG4gICAgICAgICAgICAgICcgbmV3UmVtaW5kZXJzIGluc2lkZSBlbHNlIHN0YXRlbWVudCBvZiBjb3B5Q2F0ZWdvcmllcydcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgICAgICAgICAnIG5ld1RpbWVCbG9ja2luZyBpbnNpZGUgZWxzZSBzdGF0ZW1lbnQgb2YgY29weUNhdGVnb3JpZXMnXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IG5ld0V2ZW50OiBFdmVudFBsdXNUeXBlID0gbmV3TW9kaWZpZWRFdmVudCA/PyBldmVudDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhuZXdFdmVudCwgJyBuZXdFdmVudCcpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgICAgbmV3UmVtaW5kZXJzLFxuICAgICAgICAgICAgbmV3VGltZUJsb2NraW5nLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgZSxcbiAgICAgICAgJyBwcm9jZXNzRXZlbnRXaXRoRm91bmRQcmV2aW91c0V2ZW50V2l0aFVzZXJNb2RpZmllZENhdGVnb3JpZXMnXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZU9wdGFQbGFuID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJyBkZWxldGVPcHRhUGxhbm5lciBjYWxsZWQnKTtcbiAgICBhd2FpdCBnb3RcbiAgICAgIC5kZWxldGUoYCR7b3B0YVBsYW5uZXJVcmx9L3RpbWVUYWJsZS9hZG1pbi9kZWxldGUvJHt1c2VySWR9YCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtCdWZmZXIuZnJvbShgJHtvcHRhUGxhbm5lclVzZXJuYW1lfToke29wdGFQbGFubmVyUGFzc3dvcmR9YCkudG9TdHJpbmcoJ2Jhc2U2NCcpfWAsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKCcgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgT3B0YVBsYW5uZXInKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgZGVsZXRlT3B0YVBsYW5uZXInKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlRXZlbnRzRnJvbU9wdGFwbGFubmVyID0gKFxuICB1bnNvcnRlZEV2ZW50czogRXZlbnRQbGFubmVyUmVzcG9uc2VCb2R5VHlwZVtdXG4pID0+IHtcbiAgY29uc3Qgc29ydGVkRXZlbnRzID0gdW5zb3J0ZWRFdmVudHMuc29ydCgoYSwgYikgPT4ge1xuICAgIGlmIChhLnBhcnQgPCBiLnBhcnQpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKGEucGFydCA+IGIucGFydCkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9KTtcbiAgY29uc3QgZmlyc3RQYXJ0U3RhcnRUaW1lID0gc29ydGVkRXZlbnRzPy5bMF0/LnRpbWVzbG90Py5zdGFydFRpbWU7XG4gIGNvbnN0IGZpcnN0UGFydEVuZFRpbWUgPSBzb3J0ZWRFdmVudHM/LlswXT8udGltZXNsb3Q/LmVuZFRpbWU7XG4gIGNvbnN0IGxhc3RQYXJ0RW5kVGltZSA9XG4gICAgc29ydGVkRXZlbnRzPy5bc29ydGVkRXZlbnRzPy5sZW5ndGggLSAxXT8udGltZXNsb3Q/LmVuZFRpbWU7XG5cbiAgY29uc3Qgc3RhcnRIb3VyID0gcGFyc2VJbnQoZmlyc3RQYXJ0U3RhcnRUaW1lLnNwbGl0KCc6JylbMF0sIDEwKTtcbiAgY29uc3Qgc3RhcnRNaW51dGUgPSBwYXJzZUludChmaXJzdFBhcnRTdGFydFRpbWUuc3BsaXQoJzonKVsxXSwgMTApO1xuICBjb25zdCBlbmRIb3VyID0gcGFyc2VJbnQobGFzdFBhcnRFbmRUaW1lLnNwbGl0KCc6JylbMF0sIDEwKTtcbiAgY29uc3QgZW5kTWludXRlID0gcGFyc2VJbnQobGFzdFBhcnRFbmRUaW1lLnNwbGl0KCc6JylbMV0sIDEwKTtcblxuICBjb25zdCBmaXJzdFBhcnRFbmRIb3VyID0gcGFyc2VJbnQoZmlyc3RQYXJ0RW5kVGltZS5zcGxpdCgnOicpWzBdLCAxMCk7XG4gIGNvbnN0IGZpcnN0UGFydEVuZE1pbnV0ZSA9IHBhcnNlSW50KGZpcnN0UGFydEVuZFRpbWUuc3BsaXQoJzonKVsxXSwgMTApO1xuICBjb25zdCBkdXJhdGlvbk1pbnV0ZXMgPSBkYXlqc1xuICAgIC5kdXJhdGlvbihcbiAgICAgIGRheWpzKClcbiAgICAgICAgLmhvdXIoc3RhcnRIb3VyKVxuICAgICAgICAubWludXRlKHN0YXJ0TWludXRlKVxuICAgICAgICAuZGlmZihkYXlqcygpLmhvdXIoZmlyc3RQYXJ0RW5kSG91cikubWludXRlKGZpcnN0UGFydEVuZE1pbnV0ZSkpXG4gICAgKVxuICAgIC5hc01pbnV0ZXMoKTtcblxuICBjb25zdCBwbGFubmVyRHVyYXRpb25NaW51dGVzID0gZGF5anNcbiAgICAuZHVyYXRpb24oXG4gICAgICBkYXlqcygpXG4gICAgICAgIC5ob3VyKHN0YXJ0SG91cilcbiAgICAgICAgLm1pbnV0ZShzdGFydE1pbnV0ZSlcbiAgICAgICAgLmRpZmYoZGF5anMoKS5ob3VyKGVuZEhvdXIpLm1pbnV0ZShlbmRNaW51dGUpKVxuICAgIClcbiAgICAuYXNNaW51dGVzKCk7XG5cbiAgY29uc3QgZXhwZWN0ZWREdXJhdGlvbk1pbnV0ZXMgPSBzb3J0ZWRFdmVudHM/LlswXT8ubGFzdFBhcnQgKiBkdXJhdGlvbk1pbnV0ZXM7XG5cbiAgY29uc3QgZGlmZk1pbnV0ZXMgPSBNYXRoLmFicyhcbiAgICBwbGFubmVyRHVyYXRpb25NaW51dGVzIC0gZXhwZWN0ZWREdXJhdGlvbk1pbnV0ZXNcbiAgKTtcblxuICBpZiAoTWF0aC5yb3VuZChkaWZmTWludXRlcykgPiAwKSB7XG4gICAgY29uc29sZS5sb2cocGxhbm5lckR1cmF0aW9uTWludXRlcywgJyBwbGFubmVyRHVyYXRpb25NaW51dGVzJyk7XG4gICAgY29uc29sZS5sb2coZXhwZWN0ZWREdXJhdGlvbk1pbnV0ZXMsICcgZXhwZWN0ZWREdXJhdGlvbk1pbnV0ZXMnKTtcbiAgICBjb25zb2xlLmxvZyhkaWZmTWludXRlcywgJyBkaWZmTWludXRlcycpO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgc29ydGVkRXZlbnRzPy5bMF0/LmV2ZW50SWQsXG4gICAgICBzdGFydEhvdXIsXG4gICAgICBzdGFydE1pbnV0ZSxcbiAgICAgIGVuZEhvdXIsXG4gICAgICBlbmRNaW51dGUsXG4gICAgICBzb3J0ZWRFdmVudHM/LlswXT8uc3RhcnREYXRlLFxuICAgICAgc29ydGVkRXZlbnRzPy5bMF0/LmVuZERhdGUsXG4gICAgICBmaXJzdFBhcnRTdGFydFRpbWUsXG4gICAgICBsYXN0UGFydEVuZFRpbWUsXG4gICAgICBzb3J0ZWRFdmVudHM/LlswXT8udGltZXNsb3QsXG4gICAgICBzb3J0ZWRFdmVudHM/Lltzb3J0ZWRFdmVudHM/Lmxlbmd0aCAtIDFdPy50aW1lc2xvdCxcbiAgICAgIGAgc29ydGVkRXZlbnRzPy5bMF0/LmV2ZW50SWQsIHN0YXJ0SG91ciwgc3RhcnRNaW51dGUsIGVuZEhvdXIsIGVuZE1pbnV0ZSwgc29ydGVkRXZlbnRzPy5bMF0/LnN0YXJ0RGF0ZSwgc29ydGVkRXZlbnRzPy5bMF0/LmVuZERhdGUsIGZpcnN0UGFydFN0YXJ0VGltZSwgbGFzdFBhcnRFbmRUaW1lLCBzb3J0ZWRFdmVudHM/LlswXT8udGltZXNsb3QsIHNvcnRlZEV2ZW50cz8uW3NvcnRlZEV2ZW50cz8ubGVuZ3RoIC0gMV0/LnRpbWVzbG90YFxuICAgICk7XG4gICAgZm9yIChjb25zdCBzb3J0ZWRFdmVudCBvZiBzb3J0ZWRFdmVudHMpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBzb3J0ZWRFdmVudD8uZXZlbnRJZCxcbiAgICAgICAgc29ydGVkRXZlbnQucGFydCxcbiAgICAgICAgc29ydGVkRXZlbnQ/LnRpbWVzbG90LFxuICAgICAgICBzb3J0ZWRFdmVudC5sYXN0UGFydCxcbiAgICAgICAgJyBzb3J0ZWRFdmVudD8uZXZlbnRJZCwgc29ydGVkRXZlbnQucGFydCwgc29ydGVkRXZlbnQ/LnRpbWVzbG90LCBzb3J0ZWRFdmVudC5sYXN0UGFydCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ3BsYW5uZXJEdXJhdGlvbk1pbnV0ZXMgYXJlIG5vdCBlcXVhbCB0byBleHBlY3RlZER1cmF0aW9uTWludXRlcyBpbnNpZGUgdmFsaWRhdGVFdmVudEZyb21PcHRhcGxhbm5lciBhbmQgbW9yZSB0aGFuIDMwIG1pbnV0ZXMgYXBhcnQnXG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldE1vbnRoRGF5RnJvbVNsb3QgPSAoXG4gIG1vbnRoRGF5OiBNb250aERheVR5cGVcbik6IHsgbW9udGg6IE1vbnRoVHlwZTsgZGF5OiBEYXlUeXBlIH0gPT4ge1xuICBjb25zdCBtb250aFN0cmluZyA9IG1vbnRoRGF5LnNsaWNlKDIsIDQpO1xuICBjb25zdCBkYXlTdHJpbmcgPSBtb250aERheS5zbGljZSg1LCA3KTtcbiAgY29uc3QgbW9udGggPSAocGFyc2VJbnQobW9udGhTdHJpbmcsIDEwKSAtIDEpIGFzIE1vbnRoVHlwZTtcbiAgY29uc3QgZGF5ID0gcGFyc2VJbnQoZGF5U3RyaW5nLCAxMCkgYXMgRGF5VHlwZTtcbiAgcmV0dXJuIHsgbW9udGgsIGRheSB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdFBsYW5uZXJFdmVudHNUb0V2ZW50QW5kQWRqdXN0VGltZSA9IChcbiAgZXZlbnRzOiBFdmVudFBsYW5uZXJSZXNwb25zZUJvZHlUeXBlW10sXG4gIG9sZEV2ZW50OiBFdmVudFBsdXNUeXBlLFxuICBob3N0VGltZXpvbmU6IHN0cmluZ1xuKTogRXZlbnRQbHVzVHlwZSA9PiB7XG4gIGlmICghZXZlbnRzPy5bMF0/LmlkKSB7XG4gICAgY29uc29sZS5sb2coJyBubyBldmVudHMgcHJlc2VudCBpbnNpZGUgZm9ybWF0UGxhbm5lckV2ZW50c1RvRXZlbnQnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICghb2xkRXZlbnQ/LmlkKSB7XG4gICAgY29uc29sZS5sb2coJyBubyBvbGRFdmVudCBpbnNpZGUgZm9ybWF0UGxhbm5lckV2ZW50c1RvRXZlbnQnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICghb2xkRXZlbnQ/LmNhbGVuZGFySWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGNhbGVuZGFySWQgaW5zaWRlIG9sZEV2ZW50Jyk7XG4gIH1cblxuICBpZiAoIWRheWpzKGV2ZW50cz8uWzBdPy5zdGFydERhdGUpLmlzVmFsaWQoKSkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50cz8uWzBdLCAnIGV2ZW50cz8uWzBdJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydERhdGUgaXMgbm90IHZhbGlkIGJlZm9yZSBmb3JtYXR0aW5nJyk7XG4gIH1cblxuICBpZiAoIWRheWpzKGV2ZW50cz8uWzBdPy5lbmREYXRlKS5pc1ZhbGlkKCkpIHtcbiAgICBjb25zb2xlLmxvZyhldmVudHM/LlswXSwgJyBldmVudHM/LlswXScpO1xuICAgIHRocm93IG5ldyBFcnJvcignc3RhcnREYXRlIGlzIG5vdCB2YWxpZCBiZWZvcmUgZm9ybWF0dGluZycpO1xuICB9XG5cbiAgY29uc3Qgc29ydGVkRXZlbnRzID0gZXZlbnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5wYXJ0IDwgYi5wYXJ0KSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlmIChhLnBhcnQgPiBiLnBhcnQpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfSk7XG5cbiAgY29uc3QgZmlyc3RQYXJ0ID0gc29ydGVkRXZlbnRzWzBdO1xuICBjb25zdCBsYXN0UGFydCA9IHNvcnRlZEV2ZW50c1tzb3J0ZWRFdmVudHMubGVuZ3RoIC0gMV07XG5cbiAgY29uc3QgbW9udGhEYXkgPSBmaXJzdFBhcnQ/LnRpbWVzbG90Py5tb250aERheTtcbiAgY29uc3QgeyBtb250aCwgZGF5IH0gPSBnZXRNb250aERheUZyb21TbG90KG1vbnRoRGF5KTtcblxuICBjb25zdCBzdGFydEhvdXIgPSBmaXJzdFBhcnQ/LnRpbWVzbG90Py5zdGFydFRpbWVcbiAgICA/IHBhcnNlSW50KGZpcnN0UGFydC50aW1lc2xvdC5zdGFydFRpbWUuc3BsaXQoJzonKVswXSwgMTApXG4gICAgOiBkYXlqcyhvbGRFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihvbGRFdmVudC50aW1lem9uZSwgdHJ1ZSkuaG91cigpO1xuXG4gIGNvbnN0IHN0YXJ0TWludXRlID0gZmlyc3RQYXJ0Py50aW1lc2xvdD8uc3RhcnRUaW1lXG4gICAgPyBwYXJzZUludChmaXJzdFBhcnQudGltZXNsb3Quc3RhcnRUaW1lLnNwbGl0KCc6JylbMV0sIDEwKVxuICAgIDogZGF5anMob2xkRXZlbnQuc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAubWludXRlKCk7XG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IGZpcnN0UGFydD8udGltZXNsb3Q/Lm1vbnRoRGF5XG4gICAgPyBkYXlqcyhvbGRFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5tb250aChtb250aClcbiAgICAgICAgLmRhdGUoZGF5KVxuICAgICAgICAuaG91cihzdGFydEhvdXIpXG4gICAgICAgIC5taW51dGUoc3RhcnRNaW51dGUpXG4gICAgICAgIC50eihvbGRFdmVudC50aW1lem9uZSlcbiAgICAgICAgLmZvcm1hdCgpXG4gICAgOiBkYXlqcyhvbGRFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5ob3VyKHN0YXJ0SG91cilcbiAgICAgICAgLm1pbnV0ZShzdGFydE1pbnV0ZSlcbiAgICAgICAgLmZvcm1hdCgpO1xuXG4gIGNvbnN0IGVuZEhvdXIgPSBsYXN0UGFydD8udGltZXNsb3Q/LmVuZFRpbWVcbiAgICA/IHBhcnNlSW50KGxhc3RQYXJ0LnRpbWVzbG90LmVuZFRpbWUuc3BsaXQoJzonKVswXSwgMTApXG4gICAgOiBkYXlqcyhvbGRFdmVudC5lbmREYXRlLnNsaWNlKDAsIDE5KSkudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpLmhvdXIoKTtcbiAgY29uc3QgZW5kTWludXRlID0gbGFzdFBhcnQ/LnRpbWVzbG90Py5lbmRUaW1lXG4gICAgPyBwYXJzZUludChsYXN0UGFydC50aW1lc2xvdC5lbmRUaW1lLnNwbGl0KCc6JylbMV0sIDEwKVxuICAgIDogZGF5anMob2xkRXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKS5taW51dGUoKTtcbiAgY29uc3QgZW5kRGF0ZSA9IGxhc3RQYXJ0Py50aW1lc2xvdD8ubW9udGhEYXlcbiAgICA/IGRheWpzKG9sZEV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgIC50eihob3N0VGltZXpvbmUpXG4gICAgICAgIC5tb250aChtb250aClcbiAgICAgICAgLmRhdGUoZGF5KVxuICAgICAgICAuaG91cihlbmRIb3VyKVxuICAgICAgICAubWludXRlKGVuZE1pbnV0ZSlcbiAgICAgICAgLnR6KG9sZEV2ZW50LnRpbWV6b25lKVxuICAgICAgICAuZm9ybWF0KClcbiAgICA6IGRheWpzKG9sZEV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAgIC5taW51dGUoZW5kTWludXRlKVxuICAgICAgICAuaG91cihlbmRIb3VyKVxuICAgICAgICAuZm9ybWF0KCk7XG5cbiAgY29uc29sZS5sb2coXG4gICAgb2xkRXZlbnQuaWQsXG4gICAgc3RhcnREYXRlLFxuICAgIGZpcnN0UGFydD8udGltZXNsb3Q/LmRheU9mV2VlayxcbiAgICBmaXJzdFBhcnQ/LnRpbWVzbG90Py5tb250aERheSxcbiAgICBmaXJzdFBhcnQ/LnRpbWVzbG90Py5zdGFydFRpbWUsXG4gICAgc3RhcnRIb3VyLFxuICAgIHN0YXJ0TWludXRlLFxuICAgIGRheWpzKG9sZEV2ZW50LnN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAudHoob2xkRXZlbnQudGltZXpvbmUsIHRydWUpXG4gICAgICAubW9udGgobW9udGgpXG4gICAgICAuZGF0ZShkYXkpXG4gICAgICAuaG91cihzdGFydEhvdXIpXG4gICAgICAubWludXRlKHN0YXJ0TWludXRlKVxuICAgICAgLmZvcm1hdCgpLFxuICAgIGAgb2xkRXZlbnQuaWQsIHN0YXJ0RGF0ZSwgZmlyc3RQYXJ0Py50aW1lc2xvdD8uZGF5T2ZXZWVrLCBmaXJzdFBhcnQ/LnRpbWVzbG90Py5tb250aERheSwgZmlyc3RQYXJ0Py50aW1lc2xvdD8uc3RhcnRUaW1lLCBzdGFydEhvdXIsIHN0YXJ0TWludXRlLCBkYXlqcyhvbGRFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKS50eihvbGRFdmVudC50aW1lem9uZSwgdHJ1ZSkubW9udGgobW9udGgpXG4gIC5kYXRlKGRheSlcbiAgLmhvdXIoc3RhcnRIb3VyKS5taW51dGUoc3RhcnRNaW51dGUpLmZvcm1hdCgpLGBcbiAgKTtcblxuICBjb25zb2xlLmxvZyhcbiAgICBvbGRFdmVudC5pZCxcbiAgICBlbmREYXRlLFxuICAgIGxhc3RQYXJ0Py50aW1lc2xvdD8uZGF5T2ZXZWVrLFxuICAgIGxhc3RQYXJ0Py50aW1lc2xvdD8ubW9udGhEYXksXG4gICAgbGFzdFBhcnQ/LnRpbWVzbG90Py5lbmRUaW1lLFxuICAgIGVuZEhvdXIsXG4gICAgZW5kTWludXRlLFxuICAgIGRheWpzKG9sZEV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLm1vbnRoKG1vbnRoKVxuICAgICAgLmRhdGUoZGF5KVxuICAgICAgLmhvdXIoZW5kSG91cilcbiAgICAgIC5taW51dGUoZW5kTWludXRlKVxuICAgICAgLmZvcm1hdCgpLFxuICAgIGAgb2xkRXZlbnQuaWQsIGVuZERhdGUsIGxhc3RQYXJ0Py50aW1lc2xvdD8uZGF5T2ZXZWVrLCBsYXN0UGFydD8udGltZXNsb3Q/Lm1vbnRoRGF5LCBsYXN0UGFydD8udGltZXNsb3Q/LmVuZFRpbWUsIGVuZEhvdXIsIGVuZE1pbnV0ZSwgZGF5anMob2xkRXZlbnQuZW5kRGF0ZS5zbGljZSgwLCAxOSkpLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgIC5tb250aChtb250aClcbiAgICAuZGF0ZShkYXkpXG4gICAgLmhvdXIoZW5kSG91cikubWludXRlKGVuZE1pbnV0ZSkuZm9ybWF0KClgXG4gICk7XG5cbiAgY29uc3QgbmV3RXZlbnQ6IEV2ZW50UGx1c1R5cGUgPSB7XG4gICAgLi4ub2xkRXZlbnQsXG4gICAgc3RhcnREYXRlLFxuICAgIGVuZERhdGUsXG4gIH07XG4gIGNvbnNvbGUubG9nKG5ld0V2ZW50LCAnIG5ld0V2ZW50IGluc2lkZSBmb3JtYXRQbGFubmVyRXZlbnRzVG9FdmVudCcpO1xuXG4gIGlmICghZGF5anMoc3RhcnREYXRlKS5pc1ZhbGlkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0RGF0ZSBpcyBub3QgdmFsaWQgYWZ0ZXIgZm9ybWF0dGluZycpO1xuICB9XG5cbiAgaWYgKCFkYXlqcyhlbmREYXRlKS5pc1ZhbGlkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0RGF0ZSBpcyBub3QgdmFsaWQgYWZ0ZXIgZm9ybWF0dGluZycpO1xuICB9XG5cbiAgcmV0dXJuIG5ld0V2ZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IHB1dERhdGFJblNlYXJjaCA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgdmVjdG9yOiBudW1iZXJbXSxcbiAgdXNlcklkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFNlYXJjaENsaWVudCgpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmluZGV4KHtcbiAgICAgIGlkLFxuICAgICAgaW5kZXg6IHNlYXJjaEluZGV4LFxuICAgICAgYm9keTogeyBbZXZlbnRWZWN0b3JOYW1lXTogdmVjdG9yLCB1c2VySWQgfSxcbiAgICAgIHJlZnJlc2g6IHRydWUsXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ0FkZGluZyBkb2N1bWVudDonKTtcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5ib2R5KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHB1dCBkYXRhIGludG8gc2VhcmNoJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjb21wYXJlRXZlbnRzVG9GaWx0ZXJVbmVxdWFsRXZlbnRzID0gKFxuICBuZXdFdmVudDogRXZlbnRQbHVzVHlwZSxcbiAgb2xkRXZlbnQ/OiBFdmVudFBsdXNUeXBlXG4pID0+IHtcbiAgaWYgKCFvbGRFdmVudD8uaWQpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIG9sZEV2ZW50Py5pZCxcbiAgICAgICcgb2xkRXZlbnQ/LmlkIGluc2lkZSBjb21wYXJlRXZlbnRzVG9GaWx0ZXJVbmVxdWFsRXZlbnRzIGxpa2VseSBuZXcnXG4gICAgKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICghbmV3RXZlbnQ/LmlkKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBuZXdFdmVudD8uaWQsXG4gICAgICAnbm8gIG5ld0V2ZW50Py5pZCBpbnNpZGUgY29tcGFyZUV2ZW50c1RvRmlsdGVyVW5lcXVhbEV2ZW50cy0gYnVnICdcbiAgICApO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGAke25ld0V2ZW50fSAtLS0gJHtuZXdFdmVudD8uaWR9LCBubyAgbmV3RXZlbnQ/LmlkIGluc2lkZSBjb21wYXJlRXZlbnRzVG9GaWx0ZXJVbmVxdWFsRXZlbnRzLSBidWdgXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IG9sZEV2ZW50TW9kaWZpZWQgPSB7XG4gICAgLi4ub2xkRXZlbnQsXG4gICAgc3RhcnREYXRlOiBkYXlqcyhvbGRFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLmZvcm1hdCgpLFxuICAgIGVuZERhdGU6IGRheWpzKG9sZEV2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG9sZEV2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLmZvcm1hdCgpLFxuICB9O1xuXG4gIGNvbnN0IG5ld0V2ZW50TW9kaWZpZWQgPSB7XG4gICAgLi4ubmV3RXZlbnQsXG4gICAgc3RhcnREYXRlOiBkYXlqcyhuZXdFdmVudC5zdGFydERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG5ld0V2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLmZvcm1hdCgpLFxuICAgIGVuZERhdGU6IGRheWpzKG5ld0V2ZW50LmVuZERhdGUuc2xpY2UoMCwgMTkpKVxuICAgICAgLnR6KG5ld0V2ZW50LnRpbWV6b25lLCB0cnVlKVxuICAgICAgLmZvcm1hdCgpLFxuICB9O1xuICBjb25zb2xlLmxvZyhcbiAgICAhXy5pc0VxdWFsKG5ld0V2ZW50TW9kaWZpZWQsIG9sZEV2ZW50TW9kaWZpZWQpLFxuICAgICcgIV8uaXNFcXVhbChuZXdFdmVudE1vZGlmaWVkLCBvbGRFdmVudE1vZGlmaWVkKSdcbiAgKTtcbiAgcmV0dXJuICFfLmlzRXF1YWwobmV3RXZlbnRNb2RpZmllZCwgb2xkRXZlbnRNb2RpZmllZCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q2FsZW5kYXJXaXRoSWQgPSBhc3luYyAoY2FsZW5kYXJJZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdnZXRDYWxlbmRhcic7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgcXVlcnkgZ2V0Q2FsZW5kYXIoJGlkOiBTdHJpbmchKSB7XG4gICAgICBDYWxlbmRhcl9ieV9wayhpZDogJGlkKSB7XG4gICAgICAgIHJlc291cmNlXG4gICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICB1c2VySWRcbiAgICAgICAgYWNjb3VudFxuICAgICAgICBjb2xvcklkXG4gICAgICAgIGlkXG4gICAgICAgIG1vZGlmaWFibGVcbiAgICAgICAgdGl0bGVcbiAgICAgICAgYmFja2dyb3VuZENvbG9yXG4gICAgICAgIGFjY291bnRcbiAgICAgICAgYWNjZXNzTGV2ZWxcbiAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgZGVmYXVsdFJlbWluZGVyc1xuICAgICAgICBwcmltYXJ5XG4gICAgICAgIGdsb2JhbFByaW1hcnlcbiAgICAgICAgZm9yZWdyb3VuZENvbG9yXG4gICAgICAgIHBhZ2VUb2tlblxuICAgICAgICBzeW5jVG9rZW5cbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgaWQ6IGNhbGVuZGFySWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IENhbGVuZGFyX2J5X3BrOiBDYWxlbmRhclR5cGUgfSB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgZnJvbSBnZXRDYWxlbmRhckZvckV2ZW50Jyk7XG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uQ2FsZW5kYXJfYnlfcGs7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIGdldENhbGVuZGFyRm9yRXZlbnQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldENhbGVuZGFySW50ZWdyYXRpb24gPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICByZXNvdXJjZTogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ2dldENhbGVuZGFySW50ZWdyYXRpb24nO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgcXVlcnkgZ2V0Q2FsZW5kYXJJbnRlZ3JhdGlvbigkdXNlcklkOiB1dWlkISwgJHJlc291cmNlOiBTdHJpbmchKSB7XG4gICAgICAgIENhbGVuZGFyX0ludGVncmF0aW9uKHdoZXJlOiB7dXNlcklkOiB7X2VxOiAkdXNlcklkfSwgcmVzb3VyY2U6IHtfZXE6ICRyZXNvdXJjZX19KSB7XG4gICAgICAgICAgdG9rZW5cbiAgICAgICAgICBleHBpcmVzQXRcbiAgICAgICAgICBpZFxuICAgICAgICAgIHJlZnJlc2hUb2tlblxuICAgICAgICAgIHJlc291cmNlXG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIGNsaWVudFR5cGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgdXNlcklkLFxuICAgICAgcmVzb3VyY2UsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IENhbGVuZGFyX0ludGVncmF0aW9uOiBDYWxlbmRhckludGVncmF0aW9uVHlwZVtdIH0gfSA9XG4gICAgICBhd2FpdCBnb3RcbiAgICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMsICcgcmVzIGluc2lkZSBnZXRDYWxlbmRhckludGVncmF0aW9uJyk7XG4gICAgaWYgKHJlcz8uZGF0YT8uQ2FsZW5kYXJfSW50ZWdyYXRpb24/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiByZXM/LmRhdGE/LkNhbGVuZGFyX0ludGVncmF0aW9uPy5bMF07XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IGNhbGVuZGFyIGludGVncmF0aW9uJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtYXRSZW1pbmRlcnNGb3JHb29nbGUgPSAoXG4gIHJlbWluZGVyczogUmVtaW5kZXJUeXBlW11cbik6IEdvb2dsZVJlbWluZGVyVHlwZSA9PiB7XG4gIGNvbnN0IGdvb2dsZU92ZXJyaWRlczogT3ZlcnJpZGVUeXBlcyA9IHJlbWluZGVycy5tYXAoKHJlbWluZGVyKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogJ2VtYWlsJyxcbiAgICAgIG1pbnV0ZXM6IHJlbWluZGVyLm1pbnV0ZXMsXG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IGdvb2dsZVJlbWluZGVyczogR29vZ2xlUmVtaW5kZXJUeXBlID0ge1xuICAgIG92ZXJyaWRlczogZ29vZ2xlT3ZlcnJpZGVzLFxuICAgIHVzZURlZmF1bHQ6IGZhbHNlLFxuICB9O1xuICByZXR1cm4gZ29vZ2xlUmVtaW5kZXJzO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlZnJlc2hab29tVG9rZW4gPSBhc3luYyAoXG4gIHJlZnJlc2hUb2tlbjogc3RyaW5nXG4pOiBQcm9taXNlPHtcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XG4gIHRva2VuX3R5cGU6ICdiZWFyZXInO1xuICByZWZyZXNoX3Rva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNfaW46IG51bWJlcjtcbiAgc2NvcGU6IHN0cmluZztcbn0+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VybmFtZSA9IHpvb21DbGllbnRJZDtcbiAgICBjb25zdCBwYXNzd29yZCA9IHpvb21DbGllbnRTZWNyZXQ7XG5cbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgZGF0YTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlbixcbiAgICAgICAgZ3JhbnRfdHlwZTogJ3JlZnJlc2hfdG9rZW4nLFxuICAgICAgfSkudG9TdHJpbmcoKSxcbiAgICAgIGJhc2VVUkw6IHpvb21CYXNlVG9rZW5VcmwsXG4gICAgICB1cmw6ICcvb2F1dGgvdG9rZW4nLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgIH0sXG4gICAgICBhdXRoOiB7XG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0sXG4gICAgfSkudGhlbigoeyBkYXRhIH0pID0+IFByb21pc2UucmVzb2x2ZShkYXRhKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byByZWZyZXNoIHpvb20gdG9rZW4nKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHJlZnJlc2hHb29nbGVUb2tlbiA9IGFzeW5jIChcbiAgcmVmcmVzaFRva2VuOiBzdHJpbmcsXG4gIGNsaWVudFR5cGU6ICdpb3MnIHwgJ2FuZHJvaWQnIHwgJ3dlYicgfCAnYXRvbWljLXdlYidcbik6IFByb21pc2U8e1xuICBhY2Nlc3NfdG9rZW46IHN0cmluZztcbiAgZXhwaXJlc19pbjogbnVtYmVyO1xuICBzY29wZTogc3RyaW5nO1xuICB0b2tlbl90eXBlOiBzdHJpbmc7XG59PiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ3JlZnJlc2hHb29nbGVUb2tlbiBjYWxsZWQnLCByZWZyZXNoVG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKCdjbGllbnRUeXBlJywgY2xpZW50VHlwZSk7XG4gICAgY29uc29sZS5sb2coJ2dvb2dsZUNsaWVudElkSW9zJywgZ29vZ2xlQ2xpZW50SWRJb3MpO1xuICAgIHN3aXRjaCAoY2xpZW50VHlwZSkge1xuICAgICAgY2FzZSAnaW9zJzpcbiAgICAgICAgcmV0dXJuIGdvdFxuICAgICAgICAgIC5wb3N0KGdvb2dsZVRva2VuVXJsLCB7XG4gICAgICAgICAgICBmb3JtOiB7XG4gICAgICAgICAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcbiAgICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IGdvb2dsZUNsaWVudElkSW9zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5qc29uKCk7XG4gICAgICBjYXNlICdhbmRyb2lkJzpcbiAgICAgICAgcmV0dXJuIGdvdFxuICAgICAgICAgIC5wb3N0KGdvb2dsZVRva2VuVXJsLCB7XG4gICAgICAgICAgICBmb3JtOiB7XG4gICAgICAgICAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcbiAgICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IGdvb2dsZUNsaWVudElkQW5kcm9pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuanNvbigpO1xuICAgICAgY2FzZSAnd2ViJzpcbiAgICAgICAgcmV0dXJuIGdvdFxuICAgICAgICAgIC5wb3N0KGdvb2dsZVRva2VuVXJsLCB7XG4gICAgICAgICAgICBmb3JtOiB7XG4gICAgICAgICAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcbiAgICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IGdvb2dsZUNsaWVudElkV2ViLFxuICAgICAgICAgICAgICBjbGllbnRfc2VjcmV0OiBnb29nbGVDbGllbnRTZWNyZXRXZWIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmpzb24oKTtcbiAgICAgIGNhc2UgJ2F0b21pYy13ZWInOlxuICAgICAgICByZXR1cm4gZ290XG4gICAgICAgICAgLnBvc3QoZ29vZ2xlVG9rZW5VcmwsIHtcbiAgICAgICAgICAgIGZvcm06IHtcbiAgICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ3JlZnJlc2hfdG9rZW4nLFxuICAgICAgICAgICAgICByZWZyZXNoX3Rva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICAgIGNsaWVudF9pZDogZ29vZ2xlQ2xpZW50SWRBdG9taWNXZWIsXG4gICAgICAgICAgICAgIGNsaWVudF9zZWNyZXQ6IGdvb2dsZUNsaWVudFNlY3JldEF0b21pY1dlYixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuanNvbigpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHJlZnJlc2ggZ29vZ2xlIHRva2VuJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVDYWxlbmRhckludGVncmF0aW9uID0gYXN5bmMgKFxuICBpZDogc3RyaW5nLFxuICB0b2tlbj86IHN0cmluZyxcbiAgZXhwaXJlc0luPzogbnVtYmVyLFxuICBlbmFibGVkPzogYm9vbGVhblxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICd1cGRhdGVDYWxlbmRhckludGVncmF0aW9uJztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgIG11dGF0aW9uIHVwZGF0ZUNhbGVuZGFySW50ZWdyYXRpb24oJGlkOiB1dWlkISwke3Rva2VuICE9PSB1bmRlZmluZWQgPyAnICR0b2tlbjogU3RyaW5nLCcgOiAnJ30ke2V4cGlyZXNJbiAhPT0gdW5kZWZpbmVkID8gJyAkZXhwaXJlc0F0OiB0aW1lc3RhbXB0eiwnIDogJyd9JHtlbmFibGVkICE9PSB1bmRlZmluZWQgPyAnICRlbmFibGVkOiBCb29sZWFuLCcgOiAnJ30pIHtcbiAgICAgICAgdXBkYXRlX0NhbGVuZGFyX0ludGVncmF0aW9uX2J5X3BrKHBrX2NvbHVtbnM6IHtpZDogJGlkfSwgX3NldDogeyR7dG9rZW4gIT09IHVuZGVmaW5lZCA/ICd0b2tlbjogJHRva2VuLCcgOiAnJ30ke2V4cGlyZXNJbiAhPT0gdW5kZWZpbmVkID8gJyBleHBpcmVzQXQ6ICRleHBpcmVzQXQsJyA6ICcnfSR7ZW5hYmxlZCAhPT0gdW5kZWZpbmVkID8gJyBlbmFibGVkOiAkZW5hYmxlZCwnIDogJyd9fSkge1xuICAgICAgICAgIGlkXG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIHJlZnJlc2hUb2tlblxuICAgICAgICAgIHRva2VuXG4gICAgICAgICAgY2xpZW50VHlwZVxuICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICBpZCxcbiAgICAgIHRva2VuLFxuICAgICAgZXhwaXJlc0F0OiBkYXlqcygpLmFkZChleHBpcmVzSW4sICdzZWNvbmRzJykudG9JU09TdHJpbmcoKSxcbiAgICAgIGVuYWJsZWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdvdFxuICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMsICcgcmVzIGluc2lkZSB1cGRhdGVDYWxlbmRhckludGVncmF0aW9uJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byB1cGRhdGUgY2FsZW5kYXIgaW50ZWdyYXRpb24nKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlY3J5cHRab29tVG9rZW5zID0gKFxuICBlbmNyeXB0ZWRUb2tlbjogc3RyaW5nLFxuICBlbmNyeXB0ZWRSZWZyZXNoVG9rZW4/OiBzdHJpbmdcbikgPT4ge1xuICBjb25zdCBpdkJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHpvb21JVkZvclBhc3MsICdiYXNlNjQnKTtcbiAgY29uc3Qgc2FsdEJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHpvb21TYWx0Rm9yUGFzcywgJ2Jhc2U2NCcpO1xuXG4gIGNvbnN0IGtleSA9IGNyeXB0by5wYmtkZjJTeW5jKFxuICAgIHpvb21QYXNzS2V5IGFzIHN0cmluZyxcbiAgICBzYWx0QnVmZmVyLFxuICAgIDEwMDAwLFxuICAgIDMyLFxuICAgICdzaGEyNTYnXG4gICk7XG5cbiAgY29uc3QgZGVjaXBoZXJUb2tlbiA9IGNyeXB0by5jcmVhdGVEZWNpcGhlcml2KCdhZXMtMjU2LWNiYycsIGtleSwgaXZCdWZmZXIpO1xuICBsZXQgZGVjcnlwdGVkVG9rZW4gPSBkZWNpcGhlclRva2VuLnVwZGF0ZShlbmNyeXB0ZWRUb2tlbiwgJ2Jhc2U2NCcsICd1dGY4Jyk7XG4gIGRlY3J5cHRlZFRva2VuICs9IGRlY2lwaGVyVG9rZW4uZmluYWwoJ3V0ZjgnKTtcblxuICBpZiAoZW5jcnlwdGVkUmVmcmVzaFRva2VuKSB7XG4gICAgY29uc3QgZGVjaXBoZXJSZWZyZXNoVG9rZW4gPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXJpdihcbiAgICAgICdhZXMtMjU2LWNiYycsXG4gICAgICBrZXksXG4gICAgICBpdkJ1ZmZlclxuICAgICk7XG4gICAgbGV0IGRlY3J5cHRlZFJlZnJlc2hUb2tlbiA9IGRlY2lwaGVyUmVmcmVzaFRva2VuLnVwZGF0ZShcbiAgICAgIGVuY3J5cHRlZFJlZnJlc2hUb2tlbixcbiAgICAgICdiYXNlNjQnLFxuICAgICAgJ3V0ZjgnXG4gICAgKTtcbiAgICBkZWNyeXB0ZWRSZWZyZXNoVG9rZW4gKz0gZGVjaXBoZXJSZWZyZXNoVG9rZW4uZmluYWwoJ3V0ZjgnKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b2tlbjogZGVjcnlwdGVkVG9rZW4sXG4gICAgICByZWZyZXNoVG9rZW46IGRlY3J5cHRlZFJlZnJlc2hUb2tlbixcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0b2tlbjogZGVjcnlwdGVkVG9rZW4sXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZW5jcnlwdFpvb21Ub2tlbnMgPSAodG9rZW46IHN0cmluZywgcmVmcmVzaFRva2VuPzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGl2QnVmZmVyID0gQnVmZmVyLmZyb20oem9vbUlWRm9yUGFzcywgJ2Jhc2U2NCcpO1xuICBjb25zdCBzYWx0QnVmZmVyID0gQnVmZmVyLmZyb20oem9vbVNhbHRGb3JQYXNzLCAnYmFzZTY0Jyk7XG5cbiAgY29uc3Qga2V5ID0gY3J5cHRvLnBia2RmMlN5bmMoXG4gICAgem9vbVBhc3NLZXkgYXMgc3RyaW5nLFxuICAgIHNhbHRCdWZmZXIsXG4gICAgMTAwMDAsXG4gICAgMzIsXG4gICAgJ3NoYTI1NidcbiAgKTtcbiAgY29uc3QgY2lwaGVyVG9rZW4gPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYoJ2Flcy0yNTYtY2JjJywga2V5LCBpdkJ1ZmZlcik7XG4gIGxldCBlbmNyeXB0ZWRUb2tlbiA9IGNpcGhlclRva2VuLnVwZGF0ZSh0b2tlbiwgJ3V0ZjgnLCAnYmFzZTY0Jyk7XG4gIGVuY3J5cHRlZFRva2VuICs9IGNpcGhlclRva2VuLmZpbmFsKCdiYXNlNjQnKTtcblxuICBsZXQgZW5jcnlwdGVkUmVmcmVzaFRva2VuID0gJyc7XG5cbiAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgIGNvbnN0IGNpcGhlclJlZnJlc2hUb2tlbiA9IGNyeXB0by5jcmVhdGVDaXBoZXJpdihcbiAgICAgICdhZXMtMjU2LWNiYycsXG4gICAgICBrZXksXG4gICAgICBpdkJ1ZmZlclxuICAgICk7XG4gICAgZW5jcnlwdGVkUmVmcmVzaFRva2VuID0gY2lwaGVyUmVmcmVzaFRva2VuLnVwZGF0ZShcbiAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICd1dGY4JyxcbiAgICAgICdiYXNlNjQnXG4gICAgKTtcbiAgICBlbmNyeXB0ZWRSZWZyZXNoVG9rZW4gKz0gY2lwaGVyUmVmcmVzaFRva2VuLmZpbmFsKCdiYXNlNjQnKTtcbiAgfVxuXG4gIGlmIChlbmNyeXB0ZWRSZWZyZXNoVG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW5jcnlwdGVkVG9rZW4sXG4gICAgICBlbmNyeXB0ZWRSZWZyZXNoVG9rZW4sXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyBlbmNyeXB0ZWRUb2tlbiB9O1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Wm9vbUludGVncmF0aW9uID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCwgdG9rZW4sIGV4cGlyZXNBdCwgcmVmcmVzaFRva2VuIH0gPSBhd2FpdCBnZXRDYWxlbmRhckludGVncmF0aW9uKFxuICAgICAgdXNlcklkLFxuICAgICAgem9vbVJlc291cmNlTmFtZVxuICAgICk7XG5cbiAgICBjb25zdCBkZWNyeXB0ZWRUb2tlbnMgPSBkZWNyeXB0Wm9vbVRva2Vucyh0b2tlbiwgcmVmcmVzaFRva2VuKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZCxcbiAgICAgIGV4cGlyZXNBdCxcbiAgICAgIC4uLmRlY3J5cHRlZFRva2VucyxcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IHpvb20gaW50ZWdyYXRpb24nKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVpvb21JbnRlZ3JhdGlvbiA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgYWNjZXNzVG9rZW46IHN0cmluZyxcbiAgZXhwaXJlc0luOiBudW1iZXJcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZW5jcnlwdGVkVG9rZW4gfSA9IGVuY3J5cHRab29tVG9rZW5zKGFjY2Vzc1Rva2VuKTtcbiAgICBhd2FpdCB1cGRhdGVDYWxlbmRhckludGVncmF0aW9uKGlkLCBlbmNyeXB0ZWRUb2tlbiwgZXhwaXJlc0luKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSB6b29tIGludGVncmF0aW9uJyk7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0Wm9vbUFQSVRva2VuID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gIGxldCBpbnRlZ3JhdGlvbklkID0gJyc7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ2dldFpvb21BUElUb2tlbiBjYWxsZWQnKTtcbiAgICBjb25zdCB7IGlkLCB0b2tlbiwgZXhwaXJlc0F0LCByZWZyZXNoVG9rZW4gfSA9XG4gICAgICBhd2FpdCBnZXRab29tSW50ZWdyYXRpb24odXNlcklkKTtcbiAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgICAgY29uc29sZS5sb2coJ3pvb20gbm90IGFjdGl2ZSwgbm8gcmVmcmVzaCB0b2tlbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVncmF0aW9uSWQgPSBpZDtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGlkLFxuICAgICAgdG9rZW4sXG4gICAgICBleHBpcmVzQXQsXG4gICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAnIGlkLCB0b2tlbiwgZXhwaXJlc0F0LCByZWZyZXNoVG9rZW4nXG4gICAgKTtcbiAgICBpZiAoZGF5anMoKS5pc0FmdGVyKGRheWpzKGV4cGlyZXNBdCkpIHx8ICF0b2tlbikge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVmcmVzaFpvb21Ub2tlbihyZWZyZXNoVG9rZW4pO1xuICAgICAgY29uc29sZS5sb2cocmVzLCAnIHJlcyBmcm9tIHJlZnJlc2hab29tVG9rZW4nKTtcbiAgICAgIGF3YWl0IHVwZGF0ZVpvb21JbnRlZ3JhdGlvbihpZCwgcmVzLmFjY2Vzc190b2tlbiwgcmVzLmV4cGlyZXNfaW4pO1xuICAgICAgcmV0dXJuIHJlcy5hY2Nlc3NfdG9rZW47XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IHpvb20gYXBpIHRva2VuJyk7XG4gICAgYXdhaXQgdXBkYXRlQ2FsZW5kYXJJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvbklkLCBudWxsLCBudWxsLCBmYWxzZSk7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0R29vZ2xlQVBJVG9rZW4gPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICByZXNvdXJjZTogc3RyaW5nLFxuICBjbGllbnRUeXBlOiAnaW9zJyB8ICdhbmRyb2lkJyB8ICd3ZWInIHwgJ2F0b21pYy13ZWInXG4pID0+IHtcbiAgbGV0IGludGVncmF0aW9uSWQgPSAnJztcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkLCB0b2tlbiwgZXhwaXJlc0F0LCByZWZyZXNoVG9rZW4gfSA9IGF3YWl0IGdldENhbGVuZGFySW50ZWdyYXRpb24oXG4gICAgICB1c2VySWQsXG4gICAgICByZXNvdXJjZVxuICAgICk7XG4gICAgaW50ZWdyYXRpb25JZCA9IGlkO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgaWQsXG4gICAgICB0b2tlbixcbiAgICAgIGV4cGlyZXNBdCxcbiAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICcgaWQsIHRva2VuLCBleHBpcmVzQXQsIHJlZnJlc2hUb2tlbidcbiAgICApO1xuICAgIGlmIChkYXlqcygpLmlzQWZ0ZXIoZGF5anMoZXhwaXJlc0F0KSkgfHwgIXRva2VuKSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZWZyZXNoR29vZ2xlVG9rZW4ocmVmcmVzaFRva2VuLCBjbGllbnRUeXBlKTtcbiAgICAgIGNvbnNvbGUubG9nKHJlcywgJyByZXMgZnJvbSByZWZyZXNoR29vZ2xlVG9rZW4nKTtcbiAgICAgIGF3YWl0IHVwZGF0ZUNhbGVuZGFySW50ZWdyYXRpb24oaWQsIHJlcy5hY2Nlc3NfdG9rZW4sIHJlcy5leHBpcmVzX2luKTtcbiAgICAgIHJldHVybiByZXMuYWNjZXNzX3Rva2VuO1xuICAgIH1cbiAgICByZXR1cm4gdG9rZW47XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBnZXQgYXBpIHRva2VuJyk7XG4gICAgYXdhaXQgdXBkYXRlQ2FsZW5kYXJJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvbklkLCBudWxsLCBudWxsLCBmYWxzZSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwYXRjaEdvb2dsZUV2ZW50ID0gYXN5bmMgKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgY2FsZW5kYXJJZDogc3RyaW5nLFxuICBldmVudElkOiBzdHJpbmcsXG4gIGNsaWVudFR5cGU6ICdpb3MnIHwgJ2FuZHJvaWQnIHwgJ3dlYicgfCAnYXRvbWljLXdlYicsXG4gIGVuZERhdGVUaW1lPzogc3RyaW5nLFxuICBzdGFydERhdGVUaW1lPzogc3RyaW5nLFxuICBjb25mZXJlbmNlRGF0YVZlcnNpb24/OiAwIHwgMSxcbiAgbWF4QXR0ZW5kZWVzPzogbnVtYmVyLFxuICBzZW5kVXBkYXRlcz86IEdvb2dsZVNlbmRVcGRhdGVzVHlwZSxcbiAgYW55b25lQ2FuQWRkU2VsZj86IGJvb2xlYW4sXG4gIGF0dGVuZGVlcz86IEdvb2dsZUF0dGVuZGVlVHlwZVtdLFxuICBjb25mZXJlbmNlRGF0YT86IEdvb2dsZUNvbmZlcmVuY2VEYXRhVHlwZSxcbiAgc3VtbWFyeT86IHN0cmluZyxcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmcsXG4gIHRpbWV6b25lPzogc3RyaW5nLFxuICBzdGFydERhdGU/OiBzdHJpbmcsXG4gIGVuZERhdGU/OiBzdHJpbmcsXG4gIGV4dGVuZGVkUHJvcGVydGllcz86IEdvb2dsZUV4dGVuZGVkUHJvcGVydGllc1R5cGUsXG4gIGd1ZXN0c0Nhbkludml0ZU90aGVycz86IGJvb2xlYW4sXG4gIGd1ZXN0c0Nhbk1vZGlmeT86IGJvb2xlYW4sXG4gIGd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzPzogYm9vbGVhbixcbiAgb3JpZ2luYWxTdGFydERhdGVUaW1lPzogc3RyaW5nLFxuICBvcmlnaW5hbFN0YXJ0RGF0ZT86IHN0cmluZyxcbiAgcmVjdXJyZW5jZT86IHN0cmluZ1tdLFxuICByZW1pbmRlcnM/OiBHb29nbGVSZW1pbmRlclR5cGUsXG4gIHNvdXJjZT86IEdvb2dsZVNvdXJjZVR5cGUsXG4gIHN0YXR1cz86IHN0cmluZyxcbiAgdHJhbnNwYXJlbmN5PzogR29vZ2xlVHJhbnNwYXJlbmN5VHlwZSxcbiAgdmlzaWJpbGl0eT86IEdvb2dsZVZpc2liaWxpdHlUeXBlLFxuICBpQ2FsVUlEPzogc3RyaW5nLFxuICBhdHRlbmRlZXNPbWl0dGVkPzogYm9vbGVhbixcbiAgaGFuZ291dExpbms/OiBzdHJpbmcsXG4gIHByaXZhdGVDb3B5PzogYm9vbGVhbixcbiAgbG9ja2VkPzogYm9vbGVhbixcbiAgYXR0YWNobWVudHM/OiBHb29nbGVBdHRhY2htZW50VHlwZVtdLFxuICBldmVudFR5cGU/OiBHb29nbGVFdmVudFR5cGUxLFxuICBsb2NhdGlvbj86IHN0cmluZyxcbiAgY29sb3JJZD86IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBnZXRHb29nbGVBUElUb2tlbihcbiAgICAgIHVzZXJJZCxcbiAgICAgIGdvb2dsZUNhbGVuZGFyUmVzb3VyY2UsXG4gICAgICBjbGllbnRUeXBlXG4gICAgKTtcblxuICAgIGNvbnN0IGdvb2dsZUNhbGVuZGFyID0gZ29vZ2xlLmNhbGVuZGFyKHtcbiAgICAgIHZlcnNpb246ICd2MycsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxldCB2YXJpYWJsZXM6IGFueSA9IHtcbiAgICAgIGNhbGVuZGFySWQsXG4gICAgICBjb25mZXJlbmNlRGF0YVZlcnNpb24sXG4gICAgICBldmVudElkLFxuICAgICAgbWF4QXR0ZW5kZWVzLFxuICAgICAgc2VuZFVwZGF0ZXMsXG4gICAgICByZXF1ZXN0Qm9keToge30sXG4gICAgfTtcblxuICAgIGxldCByZXF1ZXN0Qm9keTogYW55ID0ge307XG5cbiAgICBpZiAoZW5kRGF0ZSAmJiB0aW1lem9uZSAmJiAhZW5kRGF0ZVRpbWUpIHtcbiAgICAgIGNvbnN0IGVuZCA9IHtcbiAgICAgICAgZGF0ZTogZGF5anMoZW5kRGF0ZVRpbWUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eih0aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuZm9ybWF0KCdZWVlZLU1NLUREJyksXG4gICAgICAgIHRpbWVab25lOiB0aW1lem9uZSxcbiAgICAgIH07XG4gICAgICByZXF1ZXN0Qm9keS5lbmQgPSBlbmQ7XG4gICAgfVxuXG4gICAgaWYgKGVuZERhdGVUaW1lICYmIHRpbWV6b25lICYmICFlbmREYXRlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgZW5kRGF0ZVRpbWUsXG4gICAgICAgIHRpbWV6b25lLFxuICAgICAgICAnIGV2ZW50SWQsIGVuZERhdGVUaW1lLCB0aW1lem9uZSBwcmlvcidcbiAgICAgICk7XG4gICAgICBjb25zdCBlbmQgPSB7XG4gICAgICAgIGRhdGVUaW1lOiBlbmREYXRlVGltZSxcbiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgICAgfTtcbiAgICAgIHJlcXVlc3RCb2R5LmVuZCA9IGVuZDtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGV2ZW50SWQsXG4gICAgICAgIGVuZC5kYXRlVGltZSxcbiAgICAgICAgZW5kLnRpbWVab25lLFxuICAgICAgICAnIGV2ZW50SWQsIGVuZERhdGVUaW1lLCB0aW1lem9uZSBhZnRlcidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0RGF0ZSAmJiB0aW1lem9uZSAmJiAhc3RhcnREYXRlVGltZSkge1xuICAgICAgY29uc3Qgc3RhcnQgPSB7XG4gICAgICAgIGRhdGU6IGRheWpzKHN0YXJ0RGF0ZVRpbWUuc2xpY2UoMCwgMTkpKVxuICAgICAgICAgIC50eih0aW1lem9uZSwgdHJ1ZSlcbiAgICAgICAgICAuZm9ybWF0KCdZWVlZLU1NLUREJyksXG4gICAgICAgIHRpbWVab25lOiB0aW1lem9uZSxcbiAgICAgIH07XG4gICAgICByZXF1ZXN0Qm9keS5zdGFydCA9IHN0YXJ0O1xuICAgIH1cblxuICAgIGlmIChzdGFydERhdGVUaW1lICYmIHRpbWV6b25lICYmICFzdGFydERhdGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBldmVudElkLFxuICAgICAgICBzdGFydERhdGVUaW1lLFxuICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgJyBldmVudElkLCBzdGFydERhdGVUaW1lLCB0aW1lem9uZSBwcmlvcidcbiAgICAgICk7XG4gICAgICBjb25zdCBzdGFydCA9IHtcbiAgICAgICAgZGF0ZVRpbWU6IHN0YXJ0RGF0ZVRpbWUsXG4gICAgICAgIHRpbWVab25lOiB0aW1lem9uZSxcbiAgICAgIH07XG4gICAgICByZXF1ZXN0Qm9keS5zdGFydCA9IHN0YXJ0O1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgc3RhcnQuZGF0ZVRpbWUsXG4gICAgICAgIHN0YXJ0LnRpbWVab25lLFxuICAgICAgICAnIGV2ZW50SWQsIHN0YXJ0RGF0ZVRpbWUsIHRpbWV6b25lIGFmdGVyJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAob3JpZ2luYWxTdGFydERhdGUgJiYgdGltZXpvbmUgJiYgIW9yaWdpbmFsU3RhcnREYXRlVGltZSkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxTdGFydFRpbWUgPSB7XG4gICAgICAgIGRhdGU6IGRheWpzKG9yaWdpbmFsU3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoodGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmZvcm1hdCgnWVlZWS1NTS1ERCcpLFxuICAgICAgICB0aW1lWm9uZTogdGltZXpvbmUsXG4gICAgICB9O1xuICAgICAgcmVxdWVzdEJvZHkub3JpZ2luYWxTdGFydFRpbWUgPSBvcmlnaW5hbFN0YXJ0VGltZTtcbiAgICB9XG5cbiAgICBpZiAob3JpZ2luYWxTdGFydERhdGVUaW1lICYmIHRpbWV6b25lICYmICFvcmlnaW5hbFN0YXJ0RGF0ZSkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxTdGFydFRpbWUgPSB7XG4gICAgICAgIGRhdGVUaW1lOiBvcmlnaW5hbFN0YXJ0RGF0ZVRpbWUsXG4gICAgICAgIHRpbWVab25lOiB0aW1lem9uZSxcbiAgICAgIH07XG4gICAgICByZXF1ZXN0Qm9keS5vcmlnaW5hbFN0YXJ0VGltZSA9IG9yaWdpbmFsU3RhcnRUaW1lO1xuICAgIH1cblxuICAgIGlmIChhbnlvbmVDYW5BZGRTZWxmKSB7XG4gICAgICByZXF1ZXN0Qm9keS5hbnlvbmVDYW5BZGRTZWxmID0gYW55b25lQ2FuQWRkU2VsZjtcbiAgICB9XG5cbiAgICBpZiAoYXR0ZW5kZWVzPy5bMF0/LmVtYWlsKSB7XG4gICAgICByZXF1ZXN0Qm9keS5hdHRlbmRlZXMgPSBhdHRlbmRlZXM7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZlcmVuY2VEYXRhPy5jcmVhdGVSZXF1ZXN0KSB7XG4gICAgICByZXF1ZXN0Qm9keS5jb25mZXJlbmNlRGF0YSA9IHtcbiAgICAgICAgY3JlYXRlUmVxdWVzdDoge1xuICAgICAgICAgIGNvbmZlcmVuY2VTb2x1dGlvbktleToge1xuICAgICAgICAgICAgdHlwZTogY29uZmVyZW5jZURhdGEudHlwZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVlc3RJZDogY29uZmVyZW5jZURhdGE/LnJlcXVlc3RJZCB8fCB1dWlkKCksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoY29uZmVyZW5jZURhdGE/LmVudHJ5UG9pbnRzPy5bMF0pIHtcbiAgICAgIHJlcXVlc3RCb2R5LmNvbmZlcmVuY2VEYXRhID0ge1xuICAgICAgICBjb25mZXJlbmNlU29sdXRpb246IHtcbiAgICAgICAgICBpY29uVXJpOiBjb25mZXJlbmNlRGF0YT8uaWNvblVyaSxcbiAgICAgICAgICBrZXk6IHtcbiAgICAgICAgICAgIHR5cGU6IGNvbmZlcmVuY2VEYXRhPy50eXBlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbmFtZTogY29uZmVyZW5jZURhdGE/Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgICAgIGVudHJ5UG9pbnRzOiBjb25mZXJlbmNlRGF0YT8uZW50cnlQb2ludHMsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChkZXNjcmlwdGlvbj8ubGVuZ3RoID4gMCkge1xuICAgICAgcmVxdWVzdEJvZHkuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoZXh0ZW5kZWRQcm9wZXJ0aWVzPy5wcml2YXRlIHx8IGV4dGVuZGVkUHJvcGVydGllcz8uc2hhcmVkKSB7XG4gICAgICByZXF1ZXN0Qm9keS5leHRlbmRlZFByb3BlcnRpZXMgPSBleHRlbmRlZFByb3BlcnRpZXM7XG4gICAgfVxuXG4gICAgaWYgKGd1ZXN0c0Nhbkludml0ZU90aGVycykge1xuICAgICAgcmVxdWVzdEJvZHkuZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzID0gZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzO1xuICAgIH1cblxuICAgIGlmIChndWVzdHNDYW5Nb2RpZnkpIHtcbiAgICAgIHJlcXVlc3RCb2R5Lmd1ZXN0c0Nhbk1vZGlmeSA9IGd1ZXN0c0Nhbk1vZGlmeTtcbiAgICB9XG5cbiAgICBpZiAoZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RCb2R5Lmd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzID0gZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHM7XG4gICAgfVxuXG4gICAgaWYgKGxvY2tlZCkge1xuICAgICAgcmVxdWVzdEJvZHkubG9ja2VkID0gbG9ja2VkO1xuICAgIH1cblxuICAgIGlmIChwcml2YXRlQ29weSkge1xuICAgICAgcmVxdWVzdEJvZHkucHJpdmF0ZUNvcHkgPSBwcml2YXRlQ29weTtcbiAgICB9XG5cbiAgICBpZiAocmVjdXJyZW5jZT8uWzBdKSB7XG4gICAgICByZXF1ZXN0Qm9keS5yZWN1cnJlbmNlID0gcmVjdXJyZW5jZTtcbiAgICB9XG5cbiAgICBpZiAocmVtaW5kZXJzKSB7XG4gICAgICByZXF1ZXN0Qm9keS5yZW1pbmRlcnMgPSByZW1pbmRlcnM7XG4gICAgfVxuXG4gICAgaWYgKHNvdXJjZT8udGl0bGUgfHwgc291cmNlPy51cmwpIHtcbiAgICAgIHJlcXVlc3RCb2R5LnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG5cbiAgICBpZiAoYXR0YWNobWVudHM/LlswXT8uZmlsZUlkKSB7XG4gICAgICByZXF1ZXN0Qm9keS5hdHRhY2htZW50cyA9IGF0dGFjaG1lbnRzO1xuICAgIH1cblxuICAgIGlmIChldmVudFR5cGU/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJlcXVlc3RCb2R5LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICByZXF1ZXN0Qm9keS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxuXG4gICAgaWYgKHRyYW5zcGFyZW5jeSkge1xuICAgICAgcmVxdWVzdEJvZHkudHJhbnNwYXJlbmN5ID0gdHJhbnNwYXJlbmN5O1xuICAgIH1cblxuICAgIGlmICh2aXNpYmlsaXR5KSB7XG4gICAgICByZXF1ZXN0Qm9keS52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcbiAgICB9XG5cbiAgICBpZiAoaUNhbFVJRD8ubGVuZ3RoID4gMCkge1xuICAgICAgcmVxdWVzdEJvZHkuaUNhbFVJRCA9IGlDYWxVSUQ7XG4gICAgfVxuXG4gICAgaWYgKGF0dGVuZGVlc09taXR0ZWQpIHtcbiAgICAgIHJlcXVlc3RCb2R5LmF0dGVuZGVlc09taXR0ZWQgPSBhdHRlbmRlZXNPbWl0dGVkO1xuICAgIH1cblxuICAgIGlmIChoYW5nb3V0TGluaz8ubGVuZ3RoID4gMCkge1xuICAgICAgcmVxdWVzdEJvZHkuaGFuZ291dExpbmsgPSBoYW5nb3V0TGluaztcbiAgICB9XG5cbiAgICBpZiAoc3VtbWFyeT8ubGVuZ3RoID4gMCkge1xuICAgICAgcmVxdWVzdEJvZHkuc3VtbWFyeSA9IHN1bW1hcnk7XG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9uPy5sZW5ndGggPiAwKSB7XG4gICAgICByZXF1ZXN0Qm9keS5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgIH1cblxuICAgIGlmIChjb2xvcklkKSB7XG4gICAgICByZXF1ZXN0Qm9keS5jb2xvcklkID0gY29sb3JJZDtcbiAgICB9XG5cbiAgICB2YXJpYWJsZXMucmVxdWVzdEJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGV2ZW50SWQsXG4gICAgICByZXF1ZXN0Qm9keSxcbiAgICAgICcgZXZlbnRJZCwgcmVxdWVzdEJvZHkgaW5zaWRlIGdvb2dsZVBhdGNoRXZlbnQnXG4gICAgKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBnb29nbGVDYWxlbmRhci5ldmVudHMucGF0Y2godmFyaWFibGVzKTtcbiAgICBjb25zb2xlLmxvZyhldmVudElkLCByZXMuZGF0YSwgJyBldmVudElkLCByZXN1bHRzIGZyb20gZ29vZ2xlUGF0Y2hFdmVudCcpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gcGF0Y2ggZ29vZ2xlIGV2ZW50Jyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVHb29nbGVFdmVudFdpdGhJZCA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGNhbGVuZGFySWQ6IHN0cmluZyxcbiAgY2xpZW50VHlwZTogJ2lvcycgfCAnYW5kcm9pZCcgfCAnd2ViJyB8ICdhdG9taWMtd2ViJyxcbiAgZXZlbnRJZDogc3RyaW5nLFxuICBlbmREYXRlVGltZT86IHN0cmluZyxcbiAgc3RhcnREYXRlVGltZT86IHN0cmluZyxcbiAgY29uZmVyZW5jZURhdGFWZXJzaW9uPzogMCB8IDEsXG4gIG1heEF0dGVuZGVlcz86IG51bWJlcixcbiAgc2VuZFVwZGF0ZXM/OiBHb29nbGVTZW5kVXBkYXRlc1R5cGUsXG4gIGFueW9uZUNhbkFkZFNlbGY/OiBib29sZWFuLFxuICBhdHRlbmRlZXM/OiBHb29nbGVBdHRlbmRlZVR5cGVbXSxcbiAgY29uZmVyZW5jZURhdGE/OiBHb29nbGVDb25mZXJlbmNlRGF0YVR5cGUsXG4gIHN1bW1hcnk/OiBzdHJpbmcsXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxuICB0aW1lem9uZT86IHN0cmluZyxcbiAgc3RhcnREYXRlPzogc3RyaW5nLFxuICBlbmREYXRlPzogc3RyaW5nLFxuICBleHRlbmRlZFByb3BlcnRpZXM/OiBHb29nbGVFeHRlbmRlZFByb3BlcnRpZXNUeXBlLFxuICBndWVzdHNDYW5JbnZpdGVPdGhlcnM/OiBib29sZWFuLFxuICBndWVzdHNDYW5Nb2RpZnk/OiBib29sZWFuLFxuICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0cz86IGJvb2xlYW4sXG4gIG9yaWdpbmFsU3RhcnREYXRlVGltZT86IHN0cmluZyxcbiAgb3JpZ2luYWxTdGFydERhdGU/OiBzdHJpbmcsXG4gIHJlY3VycmVuY2U/OiBzdHJpbmdbXSxcbiAgcmVtaW5kZXJzPzogR29vZ2xlUmVtaW5kZXJUeXBlLFxuICBzb3VyY2U/OiBHb29nbGVTb3VyY2VUeXBlLFxuICBzdGF0dXM/OiBzdHJpbmcsXG4gIHRyYW5zcGFyZW5jeT86IEdvb2dsZVRyYW5zcGFyZW5jeVR5cGUsXG4gIHZpc2liaWxpdHk/OiBHb29nbGVWaXNpYmlsaXR5VHlwZSxcbiAgaUNhbFVJRD86IHN0cmluZyxcbiAgYXR0ZW5kZWVzT21pdHRlZD86IGJvb2xlYW4sXG4gIGhhbmdvdXRMaW5rPzogc3RyaW5nLFxuICBwcml2YXRlQ29weT86IGJvb2xlYW4sXG4gIGxvY2tlZD86IGJvb2xlYW4sXG4gIGF0dGFjaG1lbnRzPzogR29vZ2xlQXR0YWNobWVudFR5cGVbXSxcbiAgZXZlbnRUeXBlPzogR29vZ2xlRXZlbnRUeXBlMSxcbiAgbG9jYXRpb24/OiBzdHJpbmcsXG4gIGNvbG9ySWQ/OiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZ2V0R29vZ2xlQVBJVG9rZW4oXG4gICAgICB1c2VySWQsXG4gICAgICBnb29nbGVDYWxlbmRhclJlc291cmNlLFxuICAgICAgY2xpZW50VHlwZVxuICAgICk7XG5cbiAgICBjb25zdCBnb29nbGVDYWxlbmRhciA9IGdvb2dsZS5jYWxlbmRhcih7XG4gICAgICB2ZXJzaW9uOiAndjMnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBsZXQgZGF0YTogYW55ID0ge307XG5cbiAgICBpZiAoZW5kRGF0ZVRpbWUgJiYgdGltZXpvbmUgJiYgIWVuZERhdGUpIHtcbiAgICAgIGNvbnN0IGVuZCA9IHtcbiAgICAgICAgZGF0ZVRpbWU6IGVuZERhdGVUaW1lLFxuICAgICAgICB0aW1lWm9uZTogdGltZXpvbmUsXG4gICAgICB9O1xuXG4gICAgICBkYXRhLmVuZCA9IGVuZDtcbiAgICB9XG5cbiAgICBpZiAoZW5kRGF0ZSAmJiB0aW1lem9uZSAmJiAhZW5kRGF0ZVRpbWUpIHtcbiAgICAgIGNvbnN0IGVuZCA9IHtcbiAgICAgICAgZGF0ZTogZGF5anMoZW5kRGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KHRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgICAgfTtcblxuICAgICAgZGF0YS5lbmQgPSBlbmQ7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0RGF0ZSAmJiB0aW1lem9uZSAmJiAhc3RhcnREYXRlVGltZSkge1xuICAgICAgY29uc3Qgc3RhcnQgPSB7XG4gICAgICAgIGRhdGU6IGRheWpzKHN0YXJ0RGF0ZS5zbGljZSgwLCAxOSkpXG4gICAgICAgICAgLnR6KHRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgIC5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgICAgfTtcbiAgICAgIGRhdGEuc3RhcnQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAoc3RhcnREYXRlVGltZSAmJiB0aW1lem9uZSAmJiAhc3RhcnREYXRlKSB7XG4gICAgICBjb25zdCBzdGFydCA9IHtcbiAgICAgICAgZGF0ZVRpbWU6IHN0YXJ0RGF0ZVRpbWUsXG4gICAgICAgIHRpbWVab25lOiB0aW1lem9uZSxcbiAgICAgIH07XG4gICAgICBkYXRhLnN0YXJ0ID0gc3RhcnQ7XG4gICAgfVxuXG4gICAgaWYgKG9yaWdpbmFsU3RhcnREYXRlICYmIHRpbWV6b25lICYmICFvcmlnaW5hbFN0YXJ0RGF0ZVRpbWUpIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsU3RhcnRUaW1lID0ge1xuICAgICAgICBkYXRlOiBvcmlnaW5hbFN0YXJ0RGF0ZSxcbiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgICAgfTtcbiAgICAgIGRhdGEub3JpZ2luYWxTdGFydFRpbWUgPSBvcmlnaW5hbFN0YXJ0VGltZTtcbiAgICB9XG5cbiAgICBpZiAob3JpZ2luYWxTdGFydERhdGVUaW1lICYmIHRpbWV6b25lICYmICFvcmlnaW5hbFN0YXJ0RGF0ZSkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxTdGFydFRpbWUgPSB7XG4gICAgICAgIGRhdGVUaW1lOiBkYXlqcyhvcmlnaW5hbFN0YXJ0RGF0ZVRpbWUpLnR6KHRpbWV6b25lLCB0cnVlKS5mb3JtYXQoKSxcbiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgICAgfTtcbiAgICAgIGRhdGEub3JpZ2luYWxTdGFydFRpbWUgPSBvcmlnaW5hbFN0YXJ0VGltZTtcbiAgICB9XG5cbiAgICBpZiAoYW55b25lQ2FuQWRkU2VsZikge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgYW55b25lQ2FuQWRkU2VsZiB9O1xuICAgIH1cblxuICAgIGlmIChhdHRlbmRlZXM/LlswXT8uZW1haWwpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGF0dGVuZGVlcyB9O1xuICAgIH1cblxuICAgIGlmIChjb25mZXJlbmNlRGF0YT8uY3JlYXRlUmVxdWVzdCkge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY29uZmVyZW5jZURhdGE6IHtcbiAgICAgICAgICBjcmVhdGVSZXF1ZXN0OiB7XG4gICAgICAgICAgICBjb25mZXJlbmNlU29sdXRpb25LZXk6IHtcbiAgICAgICAgICAgICAgdHlwZTogY29uZmVyZW5jZURhdGEudHlwZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXF1ZXN0SWQ6IGNvbmZlcmVuY2VEYXRhPy5yZXF1ZXN0SWQgfHwgdXVpZCgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoY29uZmVyZW5jZURhdGE/LmVudHJ5UG9pbnRzPy5bMF0pIHtcbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNvbmZlcmVuY2VEYXRhOiB7XG4gICAgICAgICAgY29uZmVyZW5jZVNvbHV0aW9uOiB7XG4gICAgICAgICAgICBpY29uVXJpOiBjb25mZXJlbmNlRGF0YT8uaWNvblVyaSxcbiAgICAgICAgICAgIGtleToge1xuICAgICAgICAgICAgICB0eXBlOiBjb25mZXJlbmNlRGF0YT8udHlwZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBjb25mZXJlbmNlRGF0YT8ubmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudHJ5UG9pbnRzOiBjb25mZXJlbmNlRGF0YT8uZW50cnlQb2ludHMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChkZXNjcmlwdGlvbj8ubGVuZ3RoID4gMCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgZGVzY3JpcHRpb24gfTtcbiAgICB9XG5cbiAgICBpZiAoZXh0ZW5kZWRQcm9wZXJ0aWVzPy5wcml2YXRlIHx8IGV4dGVuZGVkUHJvcGVydGllcz8uc2hhcmVkKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBleHRlbmRlZFByb3BlcnRpZXMgfTtcbiAgICB9XG5cbiAgICBpZiAoZ3Vlc3RzQ2FuSW52aXRlT3RoZXJzKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBndWVzdHNDYW5JbnZpdGVPdGhlcnMgfTtcbiAgICB9XG5cbiAgICBpZiAoZ3Vlc3RzQ2FuTW9kaWZ5KSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBndWVzdHNDYW5Nb2RpZnkgfTtcbiAgICB9XG5cbiAgICBpZiAoZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGd1ZXN0c0NhblNlZU90aGVyR3Vlc3RzIH07XG4gICAgfVxuXG4gICAgaWYgKGxvY2tlZCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgbG9ja2VkIH07XG4gICAgfVxuXG4gICAgaWYgKHByaXZhdGVDb3B5KSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBwcml2YXRlQ29weSB9O1xuICAgIH1cblxuICAgIGlmIChyZWN1cnJlbmNlPy5bMF0pIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIHJlY3VycmVuY2UgfTtcbiAgICB9XG5cbiAgICBpZiAocmVtaW5kZXJzKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCByZW1pbmRlcnMgfTtcbiAgICB9XG5cbiAgICBpZiAoc291cmNlPy50aXRsZSB8fCBzb3VyY2U/LnVybCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgc291cmNlIH07XG4gICAgfVxuXG4gICAgaWYgKGF0dGFjaG1lbnRzPy5bMF0/LmZpbGVJZCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgYXR0YWNobWVudHMgfTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnRUeXBlPy5sZW5ndGggPiAwKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBldmVudFR5cGUgfTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBzdGF0dXMgfTtcbiAgICB9XG5cbiAgICBpZiAodHJhbnNwYXJlbmN5KSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCB0cmFuc3BhcmVuY3kgfTtcbiAgICB9XG5cbiAgICBpZiAodmlzaWJpbGl0eSkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgdmlzaWJpbGl0eSB9O1xuICAgIH1cblxuICAgIGlmIChpQ2FsVUlEPy5sZW5ndGggPiAwKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBpQ2FsVUlEIH07XG4gICAgfVxuXG4gICAgaWYgKGF0dGVuZGVlc09taXR0ZWQpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGF0dGVuZGVlc09taXR0ZWQgfTtcbiAgICB9XG5cbiAgICBpZiAoaGFuZ291dExpbms/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGhhbmdvdXRMaW5rIH07XG4gICAgfVxuXG4gICAgaWYgKHN1bW1hcnk/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIHN1bW1hcnkgfTtcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb24/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGxvY2F0aW9uIH07XG4gICAgfVxuXG4gICAgaWYgKGNvbG9ySWQpIHtcbiAgICAgIGRhdGEuY29sb3JJZCA9IGNvbG9ySWQ7XG4gICAgfVxuXG4gICAgZGF0YS5pZCA9IGV2ZW50SWQ7XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBnb29nbGVDYWxlbmRhci5ldmVudHMuaW5zZXJ0KHtcbiAgICAgIGNhbGVuZGFySWQsXG4gICAgICBjb25mZXJlbmNlRGF0YVZlcnNpb24sXG4gICAgICBtYXhBdHRlbmRlZXMsXG4gICAgICBzZW5kVXBkYXRlcyxcblxuICAgICAgcmVxdWVzdEJvZHk6IGRhdGEsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXM/LmRhdGEsICcgcmVzPy5kYXRhIGZyb20gZ29vZ2xlQ3JlYXRlRXZlbnRXaXRoSWQnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSBnb29nbGUgZXZlbnQgd2l0aCBpZCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlR29vZ2xlRXZlbnQgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICBjYWxlbmRhcklkOiBzdHJpbmcsXG4gIGNsaWVudFR5cGU6ICdpb3MnIHwgJ2FuZHJvaWQnIHwgJ3dlYicgfCAnYXRvbWljLXdlYicsXG4gIGdlbmVyYXRlZElkPzogc3RyaW5nLFxuICBlbmREYXRlVGltZT86IHN0cmluZyxcbiAgc3RhcnREYXRlVGltZT86IHN0cmluZyxcbiAgY29uZmVyZW5jZURhdGFWZXJzaW9uPzogMCB8IDEsXG4gIG1heEF0dGVuZGVlcz86IG51bWJlcixcbiAgc2VuZFVwZGF0ZXM/OiBHb29nbGVTZW5kVXBkYXRlc1R5cGUsXG4gIGFueW9uZUNhbkFkZFNlbGY/OiBib29sZWFuLFxuICBhdHRlbmRlZXM/OiBHb29nbGVBdHRlbmRlZVR5cGVbXSxcbiAgY29uZmVyZW5jZURhdGE/OiBHb29nbGVDb25mZXJlbmNlRGF0YVR5cGUsXG4gIHN1bW1hcnk/OiBzdHJpbmcsXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxuICB0aW1lem9uZT86IHN0cmluZyxcbiAgc3RhcnREYXRlPzogc3RyaW5nLFxuICBlbmREYXRlPzogc3RyaW5nLFxuICBleHRlbmRlZFByb3BlcnRpZXM/OiBHb29nbGVFeHRlbmRlZFByb3BlcnRpZXNUeXBlLFxuICBndWVzdHNDYW5JbnZpdGVPdGhlcnM/OiBib29sZWFuLFxuICBndWVzdHNDYW5Nb2RpZnk/OiBib29sZWFuLFxuICBndWVzdHNDYW5TZWVPdGhlckd1ZXN0cz86IGJvb2xlYW4sXG4gIG9yaWdpbmFsU3RhcnREYXRlVGltZT86IHN0cmluZyxcbiAgb3JpZ2luYWxTdGFydERhdGU/OiBzdHJpbmcsXG4gIHJlY3VycmVuY2U/OiBzdHJpbmdbXSxcbiAgcmVtaW5kZXJzPzogR29vZ2xlUmVtaW5kZXJUeXBlLFxuICBzb3VyY2U/OiBHb29nbGVTb3VyY2VUeXBlLFxuICBzdGF0dXM/OiBzdHJpbmcsXG4gIHRyYW5zcGFyZW5jeT86IEdvb2dsZVRyYW5zcGFyZW5jeVR5cGUsXG4gIHZpc2liaWxpdHk/OiBHb29nbGVWaXNpYmlsaXR5VHlwZSxcbiAgaUNhbFVJRD86IHN0cmluZyxcbiAgYXR0ZW5kZWVzT21pdHRlZD86IGJvb2xlYW4sXG4gIGhhbmdvdXRMaW5rPzogc3RyaW5nLFxuICBwcml2YXRlQ29weT86IGJvb2xlYW4sXG4gIGxvY2tlZD86IGJvb2xlYW4sXG4gIGF0dGFjaG1lbnRzPzogR29vZ2xlQXR0YWNobWVudFR5cGVbXSxcbiAgZXZlbnRUeXBlPzogR29vZ2xlRXZlbnRUeXBlMSxcbiAgbG9jYXRpb24/OiBzdHJpbmcsXG4gIGNvbG9ySWQ/OiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgZ2VuZXJhdGVkSWQsXG4gICAgICBjb25mZXJlbmNlRGF0YVZlcnNpb24sXG4gICAgICBjb25mZXJlbmNlRGF0YSxcbiAgICAgICcgZ2VuZXJhdGVkSWQsIGNvbmZlcmVuY2VEYXRhVmVyc2lvbiwgY29uZmVyZW5jZURhdGEgaW5zaWRlIGNyZWF0ZUdvb2dsZUV2ZW50J1xuICAgICk7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBnZXRHb29nbGVBUElUb2tlbihcbiAgICAgIHVzZXJJZCxcbiAgICAgIGdvb2dsZUNhbGVuZGFyUmVzb3VyY2UsXG4gICAgICBjbGllbnRUeXBlXG4gICAgKTtcblxuICAgIGNvbnN0IGdvb2dsZUNhbGVuZGFyID0gZ29vZ2xlLmNhbGVuZGFyKHtcbiAgICAgIHZlcnNpb246ICd2MycsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxldCBkYXRhOiBhbnkgPSB7fTtcblxuICAgIGlmIChlbmREYXRlVGltZSAmJiB0aW1lem9uZSAmJiAhZW5kRGF0ZSkge1xuICAgICAgY29uc3QgZW5kID0ge1xuICAgICAgICBkYXRlVGltZTogZW5kRGF0ZVRpbWUsXG4gICAgICAgIHRpbWVab25lOiB0aW1lem9uZSxcbiAgICAgIH07XG5cbiAgICAgIGRhdGEuZW5kID0gZW5kO1xuICAgIH1cblxuICAgIGlmIChlbmREYXRlICYmIHRpbWV6b25lICYmICFlbmREYXRlVGltZSkge1xuICAgICAgY29uc3QgZW5kID0ge1xuICAgICAgICBkYXRlOiBkYXlqcyhlbmREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoodGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmZvcm1hdCgnWVlZWS1NTS1ERCcpLFxuICAgICAgICB0aW1lWm9uZTogdGltZXpvbmUsXG4gICAgICB9O1xuXG4gICAgICBkYXRhLmVuZCA9IGVuZDtcbiAgICB9XG5cbiAgICBpZiAoc3RhcnREYXRlICYmIHRpbWV6b25lICYmICFzdGFydERhdGVUaW1lKSB7XG4gICAgICBjb25zdCBzdGFydCA9IHtcbiAgICAgICAgZGF0ZTogZGF5anMoc3RhcnREYXRlLnNsaWNlKDAsIDE5KSlcbiAgICAgICAgICAudHoodGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgLmZvcm1hdCgnWVlZWS1NTS1ERCcpLFxuICAgICAgICB0aW1lWm9uZTogdGltZXpvbmUsXG4gICAgICB9O1xuICAgICAgZGF0YS5zdGFydCA9IHN0YXJ0O1xuICAgIH1cblxuICAgIGlmIChzdGFydERhdGVUaW1lICYmIHRpbWV6b25lICYmICFzdGFydERhdGUpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0ge1xuICAgICAgICBkYXRlVGltZTogc3RhcnREYXRlVGltZSxcbiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgICAgfTtcbiAgICAgIGRhdGEuc3RhcnQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAob3JpZ2luYWxTdGFydERhdGUgJiYgdGltZXpvbmUgJiYgIW9yaWdpbmFsU3RhcnREYXRlVGltZSkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxTdGFydFRpbWUgPSB7XG4gICAgICAgIGRhdGU6IG9yaWdpbmFsU3RhcnREYXRlLFxuICAgICAgICB0aW1lWm9uZTogdGltZXpvbmUsXG4gICAgICB9O1xuICAgICAgZGF0YS5vcmlnaW5hbFN0YXJ0VGltZSA9IG9yaWdpbmFsU3RhcnRUaW1lO1xuICAgIH1cblxuICAgIGlmIChvcmlnaW5hbFN0YXJ0RGF0ZVRpbWUgJiYgdGltZXpvbmUgJiYgIW9yaWdpbmFsU3RhcnREYXRlKSB7XG4gICAgICBjb25zdCBvcmlnaW5hbFN0YXJ0VGltZSA9IHtcbiAgICAgICAgZGF0ZVRpbWU6IGRheWpzKG9yaWdpbmFsU3RhcnREYXRlVGltZSkudHoodGltZXpvbmUsIHRydWUpLmZvcm1hdCgpLFxuICAgICAgICB0aW1lWm9uZTogdGltZXpvbmUsXG4gICAgICB9O1xuICAgICAgZGF0YS5vcmlnaW5hbFN0YXJ0VGltZSA9IG9yaWdpbmFsU3RhcnRUaW1lO1xuICAgIH1cblxuICAgIGlmIChhbnlvbmVDYW5BZGRTZWxmKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBhbnlvbmVDYW5BZGRTZWxmIH07XG4gICAgfVxuXG4gICAgaWYgKGF0dGVuZGVlcz8uWzBdPy5lbWFpbCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgYXR0ZW5kZWVzIH07XG4gICAgfVxuXG4gICAgaWYgKGNvbmZlcmVuY2VEYXRhPy5jcmVhdGVSZXF1ZXN0KSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjb25mZXJlbmNlRGF0YToge1xuICAgICAgICAgIGNyZWF0ZVJlcXVlc3Q6IHtcbiAgICAgICAgICAgIGNvbmZlcmVuY2VTb2x1dGlvbktleToge1xuICAgICAgICAgICAgICB0eXBlOiBjb25mZXJlbmNlRGF0YS50eXBlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcXVlc3RJZDogY29uZmVyZW5jZURhdGE/LnJlcXVlc3RJZCB8fCB1dWlkKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChjb25mZXJlbmNlRGF0YT8uZW50cnlQb2ludHM/LlswXSkge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY29uZmVyZW5jZURhdGE6IHtcbiAgICAgICAgICBjb25mZXJlbmNlU29sdXRpb246IHtcbiAgICAgICAgICAgIGljb25Vcmk6IGNvbmZlcmVuY2VEYXRhPy5pY29uVXJpLFxuICAgICAgICAgICAga2V5OiB7XG4gICAgICAgICAgICAgIHR5cGU6IGNvbmZlcmVuY2VEYXRhPy50eXBlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IGNvbmZlcmVuY2VEYXRhPy5uYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZW50cnlQb2ludHM6IGNvbmZlcmVuY2VEYXRhPy5lbnRyeVBvaW50cyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGRlc2NyaXB0aW9uPy5sZW5ndGggPiAwKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBkZXNjcmlwdGlvbiB9O1xuICAgIH1cblxuICAgIGlmIChleHRlbmRlZFByb3BlcnRpZXM/LnByaXZhdGUgfHwgZXh0ZW5kZWRQcm9wZXJ0aWVzPy5zaGFyZWQpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGV4dGVuZGVkUHJvcGVydGllcyB9O1xuICAgIH1cblxuICAgIGlmIChndWVzdHNDYW5JbnZpdGVPdGhlcnMpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGd1ZXN0c0Nhbkludml0ZU90aGVycyB9O1xuICAgIH1cblxuICAgIGlmIChndWVzdHNDYW5Nb2RpZnkpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGd1ZXN0c0Nhbk1vZGlmeSB9O1xuICAgIH1cblxuICAgIGlmIChndWVzdHNDYW5TZWVPdGhlckd1ZXN0cykge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMgfTtcbiAgICB9XG5cbiAgICBpZiAobG9ja2VkKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBsb2NrZWQgfTtcbiAgICB9XG5cbiAgICBpZiAocHJpdmF0ZUNvcHkpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIHByaXZhdGVDb3B5IH07XG4gICAgfVxuXG4gICAgaWYgKHJlY3VycmVuY2U/LlswXSkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgcmVjdXJyZW5jZSB9O1xuICAgIH1cblxuICAgIGlmIChyZW1pbmRlcnM/Lm92ZXJyaWRlcz8ubGVuZ3RoID4gMCB8fCByZW1pbmRlcnM/LnVzZURlZmF1bHQpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIHJlbWluZGVycyB9O1xuICAgIH1cblxuICAgIGlmIChzb3VyY2U/LnRpdGxlIHx8IHNvdXJjZT8udXJsKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBzb3VyY2UgfTtcbiAgICB9XG5cbiAgICBpZiAoYXR0YWNobWVudHM/LlswXT8uZmlsZUlkKSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCBhdHRhY2htZW50cyB9O1xuICAgIH1cblxuICAgIGlmIChldmVudFR5cGU/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGV2ZW50VHlwZSB9O1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIHN0YXR1cyB9O1xuICAgIH1cblxuICAgIGlmICh0cmFuc3BhcmVuY3kpIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIHRyYW5zcGFyZW5jeSB9O1xuICAgIH1cblxuICAgIGlmICh2aXNpYmlsaXR5KSB7XG4gICAgICBkYXRhID0geyAuLi5kYXRhLCB2aXNpYmlsaXR5IH07XG4gICAgfVxuXG4gICAgaWYgKGlDYWxVSUQ/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIGlDYWxVSUQgfTtcbiAgICB9XG5cbiAgICBpZiAoYXR0ZW5kZWVzT21pdHRlZCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgYXR0ZW5kZWVzT21pdHRlZCB9O1xuICAgIH1cblxuICAgIGlmIChoYW5nb3V0TGluaz8ubGVuZ3RoID4gMCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgaGFuZ291dExpbmsgfTtcbiAgICB9XG5cbiAgICBpZiAoc3VtbWFyeT8ubGVuZ3RoID4gMCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgc3VtbWFyeSB9O1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbj8ubGVuZ3RoID4gMCkge1xuICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgbG9jYXRpb24gfTtcbiAgICB9XG5cbiAgICBpZiAoY29sb3JJZCkge1xuICAgICAgZGF0YS5jb2xvcklkID0gY29sb3JJZDtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBnb29nbGVDYWxlbmRhci5ldmVudHMuaW5zZXJ0KHtcbiAgICAgIGNhbGVuZGFySWQsXG4gICAgICBjb25mZXJlbmNlRGF0YVZlcnNpb24sXG4gICAgICBtYXhBdHRlbmRlZXMsXG4gICAgICBzZW5kVXBkYXRlcyxcblxuICAgICAgcmVxdWVzdEJvZHk6IGRhdGEsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXM/LmRhdGEsICcgcmVzPy5kYXRhIGZyb20gZ29vZ2xlQ3JlYXRlRXZlbnQnKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGAke3Jlcz8uZGF0YT8uaWR9IyR7Y2FsZW5kYXJJZH1gLFxuICAgICAgZ29vZ2xlRXZlbnRJZDogcmVzPy5kYXRhPy5pZCxcbiAgICAgIGdlbmVyYXRlZElkLFxuICAgICAgY2FsZW5kYXJJZCxcbiAgICAgIGdlbmVyYXRlZEV2ZW50SWQ6IGdlbmVyYXRlZElkLnNwbGl0KCcjJylbMF0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgY3JlYXRlR29vZ2xlRXZlbnQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHBvc3RQbGFubmVyTW9kaWZ5RXZlbnRJbkNhbGVuZGFyID0gYXN5bmMgKFxuICBuZXdFdmVudDogRXZlbnRQbHVzVHlwZSxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIG1ldGhvZDogJ3VwZGF0ZScgfCAnY3JlYXRlJyB8ICdjcmVhdGVXaXRoSWQnLFxuICByZXNvdXJjZTogc3RyaW5nLFxuICBpc1RpbWVCbG9ja2luZzogYm9vbGVhbixcbiAgY2xpZW50VHlwZTogJ2lvcycgfCAnYW5kcm9pZCcgfCAnd2ViJyB8ICdhdG9taWMtd2ViJyxcbiAgbmV3UmVtaW5kZXJzPzogUmVtaW5kZXJUeXBlW10sXG4gIGF0dGVuZGVlcz86IE1lZXRpbmdBc3Npc3RBdHRlbmRlZVR5cGVbXSxcbiAgY29uZmVyZW5jZT86IENvbmZlcmVuY2VUeXBlXG4pOiBQcm9taXNlPHN0cmluZyB8IENyZWF0ZUdvb2dsZUV2ZW50UmVzcG9uc2VUeXBlPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2cobmV3RXZlbnQsICcgbmV3RXZlbnQgaW5zaWRlIHBvc3RQbGFubmVyTW9kaWZ5RXZlbnRJbkNhbGVuZGFyJyk7XG4gICAgaWYgKG1ldGhvZCA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgIGlmIChyZXNvdXJjZSA9PT0gZ29vZ2xlQ2FsZW5kYXJSZXNvdXJjZSkge1xuICAgICAgICBjb25zdCBnb29nbGVSZW1pbmRlcnM6IEdvb2dsZVJlbWluZGVyVHlwZSA9XG4gICAgICAgICAgbmV3UmVtaW5kZXJzPy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGZvcm1hdFJlbWluZGVyc0Zvckdvb2dsZShuZXdSZW1pbmRlcnMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICBhd2FpdCBwYXRjaEdvb2dsZUV2ZW50KFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBuZXdFdmVudC5jYWxlbmRhcklkLFxuICAgICAgICAgIG5ld0V2ZW50LmV2ZW50SWQsXG4gICAgICAgICAgY2xpZW50VHlwZSxcbiAgICAgICAgICBuZXdFdmVudC5lbmREYXRlLFxuICAgICAgICAgIG5ld0V2ZW50LnN0YXJ0RGF0ZSxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIG5ld0V2ZW50LnRpbWV6b25lLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIGdvb2dsZVJlbWluZGVycyxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIG5ld0V2ZW50LnRyYW5zcGFyZW5jeSxcbiAgICAgICAgICBuZXdFdmVudD8udmlzaWJpbGl0eSxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIG5ld0V2ZW50Py5jb2xvcklkXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBuZXdFdmVudC5pZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ2NyZWF0ZScpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgJyBuZXdFdmVudCBpbnNpZGUgY3JlYXRlIGluc2lkZSBwb3N0UGxhbm5lck1vZGlmeUV2ZW50SW5DYWxlbmRhcidcbiAgICAgICk7XG4gICAgICBpZiAocmVzb3VyY2UgPT09IGdvb2dsZUNhbGVuZGFyUmVzb3VyY2UpIHtcbiAgICAgICAgY29uc3QgZ29vZ2xlUmVtaW5kZXJzOiBHb29nbGVSZW1pbmRlclR5cGUgPVxuICAgICAgICAgIG5ld1JlbWluZGVycz8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyBmb3JtYXRSZW1pbmRlcnNGb3JHb29nbGUobmV3UmVtaW5kZXJzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgaWRSZXNwb25zZUJvZHk6IENyZWF0ZUdvb2dsZUV2ZW50UmVzcG9uc2VUeXBlID1cbiAgICAgICAgICBhd2FpdCBjcmVhdGVHb29nbGVFdmVudChcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIG5ld0V2ZW50LmNhbGVuZGFySWQsXG4gICAgICAgICAgICBjbGllbnRUeXBlLFxuICAgICAgICAgICAgbmV3RXZlbnQ/LmlkLFxuICAgICAgICAgICAgbmV3RXZlbnQ/LmVuZERhdGUsXG4gICAgICAgICAgICBuZXdFdmVudD8uc3RhcnREYXRlLFxuICAgICAgICAgICAgY29uZmVyZW5jZT8uaWQgPyAxIDogMCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF0dGVuZGVlcz8ubWFwKChhKSA9PiAoe1xuICAgICAgICAgICAgICBlbWFpbDogYT8ucHJpbWFyeUVtYWlsPy50cmltKCksXG4gICAgICAgICAgICAgIGlkOiBhPy5pZCxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGE/Lm5hbWUsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBjb25mZXJlbmNlPy5pZFxuICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbmZlcmVuY2U/LmFwcCA9PT0gJ3pvb20nID8gJ2FkZE9uJyA6ICdoYW5nb3V0c01lZXQnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogY29uZmVyZW5jZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvbmZlcmVuY2VJZDogY29uZmVyZW5jZT8uaWQsXG4gICAgICAgICAgICAgICAgICBlbnRyeVBvaW50czogY29uZmVyZW5jZT8uZW50cnlQb2ludHMsXG4gICAgICAgICAgICAgICAgICBjcmVhdGVSZXF1ZXN0OlxuICAgICAgICAgICAgICAgICAgICBjb25mZXJlbmNlPy5hcHAgPT09ICdnb29nbGUnXG4gICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogY29uZmVyZW5jZT8ucmVxdWVzdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25mZXJlbmNlU29sdXRpb25LZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaGFuZ291dHNNZWV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbmV3RXZlbnQuc3VtbWFyeSB8fCBuZXdFdmVudD8udGl0bGUsXG4gICAgICAgICAgICBuZXdFdmVudC5ub3RlcyxcbiAgICAgICAgICAgIG5ld0V2ZW50LnRpbWV6b25lLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgbmV3RXZlbnQ/LnJlY3VycmVuY2UsXG4gICAgICAgICAgICBnb29nbGVSZW1pbmRlcnMsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICBuZXdFdmVudC50cmFuc3BhcmVuY3ksXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICBpc1RpbWVCbG9ja2luZyA/ICdmb2N1c1RpbWUnIDogJ2RlZmF1bHQnLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgbmV3RXZlbnQ/LmNvbG9ySWRcbiAgICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBpZFJlc3BvbnNlQm9keSxcbiAgICAgICAgICBuZXdFdmVudD8uZW5kRGF0ZSxcbiAgICAgICAgICBuZXdFdmVudD8uc3RhcnREYXRlLFxuICAgICAgICAgICcgaWRSZXNwb25zZUJvZHksIG5ld0V2ZW50Py5lbmREYXRlLCAgbmV3RXZlbnQ/LnN0YXJ0RGF0ZSdcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGlkUmVzcG9uc2VCb2R5O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnY3JlYXRlV2l0aElkJykge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAnIG5ld0V2ZW50IGluc2lkZSBjcmVhdGVXaXRoSWQgaW5zaWRlIHBvc3RQbGFubmVyTW9kaWZ5RXZlbnRJbkNhbGVuZGFyJ1xuICAgICAgKTtcbiAgICAgIGlmIChyZXNvdXJjZSA9PT0gZ29vZ2xlQ2FsZW5kYXJSZXNvdXJjZSkge1xuICAgICAgICBjb25zdCBnb29nbGVSZW1pbmRlcnM6IEdvb2dsZVJlbWluZGVyVHlwZSA9XG4gICAgICAgICAgbmV3UmVtaW5kZXJzPy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGZvcm1hdFJlbWluZGVyc0Zvckdvb2dsZShuZXdSZW1pbmRlcnMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICBhd2FpdCBjcmVhdGVHb29nbGVFdmVudFdpdGhJZChcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgbmV3RXZlbnQuY2FsZW5kYXJJZCxcbiAgICAgICAgICBjbGllbnRUeXBlLFxuICAgICAgICAgIG5ld0V2ZW50Py5ldmVudElkLFxuICAgICAgICAgIG5ld0V2ZW50Py5lbmREYXRlLFxuICAgICAgICAgIG5ld0V2ZW50Py5zdGFydERhdGUsXG4gICAgICAgICAgY29uZmVyZW5jZT8uaWQgPyAxIDogMCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICBhdHRlbmRlZXM/Lm1hcCgoYSkgPT4gKHtcbiAgICAgICAgICAgIGVtYWlsOiBhPy5wcmltYXJ5RW1haWwsXG4gICAgICAgICAgICBpZDogYT8uaWQsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogYT8ubmFtZSxcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgY29uZmVyZW5jZT8uaWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6IGNvbmZlcmVuY2U/LmFwcCA9PT0gJ3pvb20nID8gJ2FkZE9uJyA6ICdoYW5nb3V0c01lZXQnLFxuICAgICAgICAgICAgICAgIG5hbWU6IGNvbmZlcmVuY2U/Lm5hbWUsXG4gICAgICAgICAgICAgICAgY29uZmVyZW5jZUlkOiBjb25mZXJlbmNlPy5pZCxcbiAgICAgICAgICAgICAgICBlbnRyeVBvaW50czogY29uZmVyZW5jZT8uZW50cnlQb2ludHMsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgIG5ld0V2ZW50LnN1bW1hcnkgfHwgbmV3RXZlbnQ/LnRpdGxlLFxuICAgICAgICAgIG5ld0V2ZW50Lm5vdGVzLFxuICAgICAgICAgIG5ld0V2ZW50LnRpbWV6b25lLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgbmV3RXZlbnQ/LnJlY3VycmVuY2UsXG4gICAgICAgICAgZ29vZ2xlUmVtaW5kZXJzLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgbmV3RXZlbnQudHJhbnNwYXJlbmN5LFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICBpc1RpbWVCbG9ja2luZyA/ICdmb2N1c1RpbWUnIDogJ2RlZmF1bHQnLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICBuZXdFdmVudD8uY29sb3JJZFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSBldmVudCcpO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgbmV3RXZlbnQ/LmlkLFxuICAgICAgbmV3RXZlbnQ/LmVuZERhdGUsXG4gICAgICBuZXdFdmVudD8uc3RhcnREYXRlLFxuICAgICAgJyBlcnJvciAtIG5ld0V2ZW50Py5pZCwgbmV3RXZlbnQ/LmVuZERhdGUsICBuZXdFdmVudD8uc3RhcnREYXRlJ1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1cHNlcnRFdmVudHNQb3N0UGxhbm5lciA9IGFzeW5jIChldmVudHM6IEV2ZW50VHlwZVtdKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdJbnNlcnRFdmVudCc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBtdXRhdGlvbiBJbnNlcnRFdmVudCgkZXZlbnRzOiBbRXZlbnRfaW5zZXJ0X2lucHV0IV0hKSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0X0V2ZW50KFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzOiAkZXZlbnRzLFxuICAgICAgICAgICAgICAgICAgICBvbl9jb25mbGljdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludDogRXZlbnRfcGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbERheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnJlbmNlUnVsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xsb3dVcEV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGb2xsb3dVcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ByZUV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUG9zdEV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZUV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdEV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JFdmVudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZlcmVuY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBdHRlbmRlZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFVwZGF0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW55b25lQ2FuQWRkU2VsZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxTdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxBbGxEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJyaW5nRXZlbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaUNhbFVJRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sTGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVVbnNwZWNpZmllZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnJlbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVGltZXpvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWVzT21pdHRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRlZFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZ291dExpbmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Vlc3RzQ2FuTW9kaWZ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGVDb3B5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VEZWZhdWx0QWxhcm1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aXZlSW1wYWN0U2NvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3RTY29yZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGl2ZUltcGFjdERheU9mV2VlayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGl2ZUltcGFjdFRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3REYXlPZldlZWssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVnYXRpdmVJbXBhY3RUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZERheU9mV2VlayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXh0ZXJuYWxNZWV0aW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXh0ZXJuYWxNZWV0aW5nTW9kaWZpYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc01lZXRpbmdNb2RpZmlhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTWVldGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYWlseVRhc2tMaXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtseVRhc2tMaXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQnJlYWssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkU3RhcnRUaW1lUmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkRW5kVGltZVJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlBdmFpbGFiaWxpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weVRpbWVCbG9ja2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5VGltZVByZWZlcmVuY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weVJlbWluZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5UHJpb3JpdHlMZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5TW9kaWZpYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5Q2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5SXNCcmVhayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lQmxvY2tpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1vZGlmaWVkQXZhaWxhYmlsaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJNb2RpZmllZFRpbWVCbG9ja2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRUaW1lUHJlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRSZW1pbmRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1vZGlmaWVkUHJpb3JpdHlMZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRDYXRlZ29yaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJNb2RpZmllZE1vZGlmaWFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1vZGlmaWVkSXNCcmVhayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXJkRGVhZGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29mdERlYWRsaW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlJc01lZXRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUlzRXh0ZXJuYWxNZWV0aW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJNb2RpZmllZElzTWVldGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRJc0V4dGVybmFsTWVldGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5RHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1vZGlmaWVkRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5saW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTW9kaWZpZWRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieVdlZWtEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTeW5jZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVldGluZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5pbmcge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZF9yb3dzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIF8udW5pcUJ5KGV2ZW50cywgJ2lkJykuZm9yRWFjaCgoZSkgPT5cbiAgICAgIGNvbnNvbGUubG9nKGU/LmlkLCBlLCAnaWQsIGUgaW5zaWRlIHVwc2VydEV2ZW50c1Bvc3RQbGFubmVyICcpXG4gICAgKTtcbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICBldmVudHM6IF8udW5pcUJ5KGV2ZW50cywgJ2lkJyksXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlOiB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGluc2VydF9FdmVudDogeyBhZmZlY3RlZF9yb3dzOiBudW1iZXI7IHJldHVybmluZzogeyBpZDogc3RyaW5nIH1bXSB9O1xuICAgICAgfTtcbiAgICB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICByZXNwb25zZSxcbiAgICAgIHJlc3BvbnNlPy5kYXRhPy5pbnNlcnRfRXZlbnQ/LmFmZmVjdGVkX3Jvd3MsXG4gICAgICAnIHJlc3BvbnNlIGFmdGVyIHVwc2VydGluZyBldmVudHMnXG4gICAgKTtcbiAgICByZXNwb25zZT8uZGF0YT8uaW5zZXJ0X0V2ZW50Py5yZXR1cm5pbmc/LmZvckVhY2goKGUpID0+XG4gICAgICBjb25zb2xlLmxvZyhlLCAnIHJldHVybmluZyAgcmVzcG9uc2UgYWZ0ZXIgdXBzZXJ0aW5nIGV2ZW50cycpXG4gICAgKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byB1cGRhdGUgZXZlbnQnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGluc2VydEF0dGVuZGVlc2ZvckV2ZW50ID0gYXN5bmMgKGF0dGVuZGVlczogQXR0ZW5kZWVUeXBlW10pID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIShhdHRlbmRlZXM/LmZpbHRlcigoYSkgPT4gISFhPy5ldmVudElkKT8ubGVuZ3RoID4gMCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0luc2VydEF0dGVuZGVlc0ZvckV2ZW50JztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgICAgIG11dGF0aW9uIEluc2VydEF0dGVuZGVlc0ZvckV2ZW50KCRhdHRlbmRlZXM6IFtBdHRlbmRlZV9pbnNlcnRfaW5wdXQhXSEpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRfQXR0ZW5kZWUob2JqZWN0czogJGF0dGVuZGVlcykge1xuICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZF9yb3dzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybmluZyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsR3Vlc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0SWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBpbUFkZHJlc3Nlc1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIGF0dGVuZGVlcyxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzcG9uc2U6IHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgaW5zZXJ0X0F0dGVuZGVlOiB7IGFmZmVjdGVkX3Jvd3M6IG51bWJlcjsgcmV0dXJuaW5nOiBBdHRlbmRlZVR5cGVbXSB9O1xuICAgICAgfTtcbiAgICB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIHJlc3BvbnNlPy5kYXRhPy5pbnNlcnRfQXR0ZW5kZWU/LnJldHVybmluZyxcbiAgICAgICcgdGhpcyBpcyByZXNwb25zZSBpbiBpbnNlcnRBdHRlbmRlZXMnXG4gICAgKTtcbiAgICByZXNwb25zZT8uZGF0YT8uaW5zZXJ0X0F0dGVuZGVlPy5yZXR1cm5pbmcuZm9yRWFjaCgocikgPT5cbiAgICAgIGNvbnNvbGUubG9nKHIsICcgcmVzcG9uc2UgaW4gaW5zZXJ0QXR0ZW5kZWVzJylcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gaW5zZXJ0IEF0dGVuZGVlcyBmb3IgbmV3IGV2ZW50Jyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVBdHRlbmRlZXNXaXRoSWRzID0gYXN5bmMgKFxuICBldmVudElkczogc3RyaW5nW10sXG4gIHVzZXJJZDogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIShldmVudElkcz8uZmlsdGVyKChlKSA9PiAhIWUpPy5sZW5ndGggPiAwKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBldmVudElkcy5mb3JFYWNoKChlKSA9PlxuICAgICAgY29uc29sZS5sb2coZSwgJyBldmVudElkcyBpbnNpZGUgZGVsZXRlUmVtaW5kZXJzV2l0aElkcycpXG4gICAgKTtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0RlbGV0ZUF0dGVuZGVlc1dpdGhFdmVudElkcyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBtdXRhdGlvbiBEZWxldGVBdHRlbmRlZXNXaXRoRXZlbnRJZHMoJHVzZXJJZDogdXVpZCEsICRldmVudElkczogW1N0cmluZyFdISkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZV9BdHRlbmRlZSh3aGVyZToge3VzZXJJZDoge19lcTogJHVzZXJJZH0sIGV2ZW50SWQ6IHtfaW46ICRldmVudElkc319KSB7XG4gICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkX3Jvd3NcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuaW5nIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxHdWVzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RJZFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGltQWRkcmVzc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbFxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgdXNlcklkLFxuICAgICAgZXZlbnRJZHMsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UsICcgdGhpcyBpcyByZXNwb25zZSBpbiBkZWxldGVBdHRlbmRlZXNXaXRoSWRzJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIGRlbGV0ZUF0dGVuZGVlc1dpdGhJZHMnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVJlbWluZGVyc1dpdGhJZHMgPSBhc3luYyAoXG4gIGV2ZW50SWRzOiBzdHJpbmdbXSxcbiAgdXNlcklkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGlmICghKGV2ZW50SWRzPy5maWx0ZXIoKGUpID0+ICEhZSk/Lmxlbmd0aCA+IDApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV2ZW50SWRzLmZvckVhY2goKGUpID0+XG4gICAgICBjb25zb2xlLmxvZyhlLCAnIGV2ZW50SWRzIGluc2lkZSBkZWxldGVSZW1pbmRlcnNXaXRoSWRzJylcbiAgICApO1xuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnZGVsZXRlUmVtaW5kZXJzV2l0aElkcyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBtdXRhdGlvbiBkZWxldGVSZW1pbmRlcnNXaXRoSWRzKCR1c2VySWQ6IHV1aWQhLCAkZXZlbnRJZHM6IFtTdHJpbmchXSEpIHtcbiAgICAgICAgZGVsZXRlX1JlbWluZGVyKHdoZXJlOiB7dXNlcklkOiB7X2VxOiAkdXNlcklkfSwgZXZlbnRJZDoge19pbjogJGV2ZW50SWRzfX0pIHtcbiAgICAgICAgICBhZmZlY3RlZF9yb3dzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgdXNlcklkLFxuICAgICAgZXZlbnRJZHMsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UsICcgdGhpcyBpcyByZXNwb25zZSBpbiBkZWxldGVSZW1pbmRlcnNXaXRoSWRzJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIGRlbGV0ZVJlbWluZGVyc1dpdGhJZHMnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGluc2VydFJlbWluZGVycyA9IGFzeW5jIChyZW1pbmRlcnM6IFJlbWluZGVyVHlwZUFkanVzdGVkW10pID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIShyZW1pbmRlcnM/LmZpbHRlcigoZSkgPT4gISFlPy5ldmVudElkKT8ubGVuZ3RoID4gMCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW1pbmRlcnMuZm9yRWFjaCgocikgPT5cbiAgICAgIGNvbnNvbGUubG9nKHIsICcgcmVtaW5kZXIgaW5zaWRlIGluc2VydFJlbWluZGVycycpXG4gICAgKTtcblxuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnSW5zZXJ0UmVtaW5kZXInO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICAgICAgbXV0YXRpb24gSW5zZXJ0UmVtaW5kZXIoJHJlbWluZGVyczogW1JlbWluZGVyX2luc2VydF9pbnB1dCFdISkge1xuICAgICAgICAgICAgICAgIGluc2VydF9SZW1pbmRlcihvYmplY3RzOiAkcmVtaW5kZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkX3Jvd3NcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuaW5nIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRJZFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1pbmRlckRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZURlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIHJlbWluZGVycyxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzcG9uc2U6IHtcbiAgICAgIGRhdGE6IHsgaW5zZXJ0X1JlbWluZGVyOiB7IHJldHVybmluZzogUmVtaW5kZXJUeXBlW10gfSB9O1xuICAgIH0gPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGhhc3VyYUdyYXBoVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1IYXN1cmEtQWRtaW4tU2VjcmV0JzogaGFzdXJhQWRtaW5TZWNyZXQsXG4gICAgICAgICAgJ1gtSGFzdXJhLVJvbGUnOiAnYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgICBqc29uOiB7XG4gICAgICAgICAgb3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgcmVzcG9uc2U/LmRhdGE/Lmluc2VydF9SZW1pbmRlcj8ucmV0dXJuaW5nLFxuICAgICAgJyB0aGlzIGlzIHJlc3BvbnNlIGluIGluc2VydFJlbWluZGVycydcbiAgICApO1xuICAgIHJlc3BvbnNlPy5kYXRhPy5pbnNlcnRfUmVtaW5kZXI/LnJldHVybmluZy5mb3JFYWNoKChyKSA9PlxuICAgICAgY29uc29sZS5sb2cociwgJyByZXNwb25zZSBpbiBpbnNlcnRSZW1pbmRlcicpXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGluc2VydFJlbWluZGVycycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlUHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50cyA9IGFzeW5jIChcbiAgZXZlbnRJZHM6IHN0cmluZ1tdXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0RlbGV0ZVByZWZlcnJlZFRpbWVSYW5nZXNHaXZlbkV2ZW50cyc7XG4gICAgY29uc3QgcXVlcnkgPSBgbXV0YXRpb24gRGVsZXRlUHJlZmVycmVkVGltZVJhbmdlc0dpdmVuRXZlbnRzKCRldmVudElkczogW1N0cmluZyFdISkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZV9QcmVmZXJyZWRUaW1lUmFuZ2Uod2hlcmU6IHtldmVudElkOiB7X2luOiAkZXZlbnRJZHN9fSkge1xuICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZF9yb3dzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgZXZlbnRJZHMsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczoge1xuICAgICAgZGF0YTogeyBkZWxldGVfUHJlZmVycmVkVGltZVJhbmdlOiB7IGFmZmVjdGVkX3Jvd3M6IG51bWJlciB9IH07XG4gICAgfSA9IGF3YWl0IGdvdFxuICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLUhhc3VyYS1BZG1pbi1TZWNyZXQnOiBoYXN1cmFBZG1pblNlY3JldCxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2coXG4gICAgICByZXM/LmRhdGE/LmRlbGV0ZV9QcmVmZXJyZWRUaW1lUmFuZ2U/LmFmZmVjdGVkX3Jvd3MsXG4gICAgICAnIHRoaXMgaXMgcmVzcG9uc2UgYWZmZWN0ZWRfcm93cyBpbiBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VzRm9yRXZlbnQnXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGRlbGV0ZSBwcmVmZXJyZWQgdGltZSByYW5nZXMnKTtcbiAgfVxufTtcbmV4cG9ydCBjb25zdCBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VzRm9yRXZlbnQgPSBhc3luYyAoZXZlbnRJZDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFldmVudElkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgZXZlbnRJZCxcbiAgICAgICAgJyBubyBldmVudElkIGluc2lkZSBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VzRm9yRXZlbnQnXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnRGVsZXRlUHJlZmVycmVkVGltZVJhbmdlc0dpdmVuRXZlbnQnO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgbXV0YXRpb24gRGVsZXRlUHJlZmVycmVkVGltZVJhbmdlc0dpdmVuRXZlbnQoJGV2ZW50SWQ6IFN0cmluZyEpIHtcbiAgICAgICAgZGVsZXRlX1ByZWZlcnJlZFRpbWVSYW5nZSh3aGVyZToge2V2ZW50SWQ6IHtfZXE6ICRldmVudElkfX0pIHtcbiAgICAgICAgICBhZmZlY3RlZF9yb3dzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgZXZlbnRJZCxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzOiB7XG4gICAgICBkYXRhOiB7IGRlbGV0ZV9QcmVmZXJyZWRUaW1lUmFuZ2U6IHsgYWZmZWN0ZWRfcm93czogbnVtYmVyIH0gfTtcbiAgICB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIHJlcz8uZGF0YT8uZGVsZXRlX1ByZWZlcnJlZFRpbWVSYW5nZT8uYWZmZWN0ZWRfcm93cyxcbiAgICAgICcgdGhpcyBpcyByZXNwb25zZSBhZmZlY3RlZF9yb3dzIGluIGRlbGV0ZVByZWZlcnJlZFRpbWVSYW5nZXNGb3JFdmVudCdcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZGVsZXRlUHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50Jyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VzID0gYXN5bmMgKFxuICBwcmVmZXJyZWRUaW1lUmFuZ2VzOiBQcmVmZXJyZWRUaW1lUmFuZ2VUeXBlW11cbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgcHJlZmVycmVkVGltZVJhbmdlcyxcbiAgICAgICcgcHJlZmVycmVkVGltZVJhbmdlcyBpbnNpZGUgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlcydcbiAgICApO1xuICAgIGlmICghKHByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDApKSB7XG4gICAgICBjb25zb2xlLmxvZygnbm8gcHJlZmVycmVkVGltZVJhbmdlcyBpbnNpZGUgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSAnSW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlcyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBtdXRhdGlvbiBJbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VzKCRwcmVmZXJyZWRUaW1lUmFuZ2VzOiBbUHJlZmVycmVkVGltZVJhbmdlX2luc2VydF9pbnB1dCFdISkge1xuICAgICAgICBpbnNlcnRfUHJlZmVycmVkVGltZVJhbmdlKG9iamVjdHM6ICRwcmVmZXJyZWRUaW1lUmFuZ2VzKSB7XG4gICAgICAgICAgYWZmZWN0ZWRfcm93c1xuICAgICAgICAgIHJldHVybmluZyB7XG4gICAgICAgICAgICBjcmVhdGVkRGF0ZVxuICAgICAgICAgICAgZGF5T2ZXZWVrXG4gICAgICAgICAgICBlbmRUaW1lXG4gICAgICAgICAgICBldmVudElkXG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgc3RhcnRUaW1lXG4gICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG5cbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICBwcmVmZXJyZWRUaW1lUmFuZ2VzLFxuICAgIH07XG5cbiAgICBjb25zdCByZXNwb25zZToge1xuICAgICAgZGF0YToge1xuICAgICAgICBpbnNlcnRfUHJlZmVycmVkVGltZVJhbmdlOiB7XG4gICAgICAgICAgcmV0dXJuaW5nOiBQcmVmZXJyZWRUaW1lUmFuZ2VUeXBlW107XG4gICAgICAgICAgYWZmZWN0ZWRfcm93czogbnVtYmVyO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSwgJyByZXNwb25zZSBpbnNpZGUgaW5zZXJ0X1ByZWZlcnJlZFRpbWVSYW5nZXMnKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIHJlc3BvbnNlPy5kYXRhLFxuICAgICAgJyByZXNwb25zZT8uZGF0YSBpbnNpZGUgaW5zZXJ0X1ByZWZlcnJlZFRpbWVSYW5nZXMnXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIHJlc3BvbnNlPy5kYXRhPy5pbnNlcnRfUHJlZmVycmVkVGltZVJhbmdlPy5hZmZlY3RlZF9yb3dzLFxuICAgICAgJyBhZmZlY3RlZF9yb3dzIGluc2lkZSBpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VzJ1xuICAgICk7XG4gICAgcmVzcG9uc2U/LmRhdGE/Lmluc2VydF9QcmVmZXJyZWRUaW1lUmFuZ2U/LnJldHVybmluZz8ubWFwKChwdCkgPT5cbiAgICAgIGNvbnNvbGUubG9nKHB0LCAnIHJldHVybmluZyBpbnNpZGUgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlcycpXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGluc2VydCBwcmVmZXJyZWQgdGltZSByYW5nZXMnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUFsbENhbGVuZGFyRXZlbnRzUG9zdFBsYW5uZXIgPSBhc3luYyAoXG4gIHBsYW5uZXJFdmVudHM6IEV2ZW50UGxhbm5lclJlc3BvbnNlQm9keVR5cGVbXVtdLFxuICBldmVudHNUb1ZhbGlkYXRlOiBFdmVudFBsYW5uZXJSZXNwb25zZUJvZHlUeXBlW11bXSxcbiAgYWxsRXZlbnRzOiBFdmVudFBsdXNUeXBlW10sXG4gIG9sZEV2ZW50czogRXZlbnRQbHVzVHlwZVtdLFxuICBob3N0VGltZXpvbmU6IHN0cmluZyxcbiAgaG9zdEJ1ZmZlclRpbWVzPzogQnVmZmVyVGltZU9iamVjdFR5cGVbXSxcbiAgbmV3SG9zdFJlbWluZGVycz86IFJlbWluZGVyc0ZvckV2ZW50VHlwZVtdLFxuICBicmVha3M/OiBFdmVudFBsdXNUeXBlW10sXG4gIG9sZEF0dGVuZGVlRXh0ZXJuYWxFdmVudHM/OiBNZWV0aW5nQXNzaXN0RXZlbnRUeXBlW10sXG4gIGlzUmVwbGFuPzogYm9vbGVhbixcbiAgb3JpZ2luYWxHb29nbGVFdmVudElkVG9VcGRhdGU/OiBzdHJpbmcsXG4gIG9yaWdpbmFsQ2FsZW5kYXJJZFRvVXBkYXRlPzogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBldmVudHNUb1ZhbGlkYXRlLmZvckVhY2goKGUpID0+IHZhbGlkYXRlRXZlbnRzRnJvbU9wdGFwbGFubmVyKGUpKTtcbiAgICBjb25zdCBldmVudHNUb1VwZGF0ZTogRXZlbnRQbHVzVHlwZVtdID0gcGxhbm5lckV2ZW50cy5tYXAoKGUpID0+XG4gICAgICBmb3JtYXRQbGFubmVyRXZlbnRzVG9FdmVudEFuZEFkanVzdFRpbWUoXG4gICAgICAgIGUsXG4gICAgICAgIGFsbEV2ZW50cz8uZmluZCgoZXZlbnQpID0+IGV2ZW50LmlkID09PSBlWzBdLmV2ZW50SWQpLFxuICAgICAgICBob3N0VGltZXpvbmVcbiAgICAgIClcbiAgICApO1xuICAgIGV2ZW50c1RvVXBkYXRlLmZvckVhY2goKGUpID0+XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgZSxcbiAgICAgICAgJyBldmVudHNUb1VwZGF0ZSBpbnNpZGUgdXBkYXRlQWxsQ2FsZW5kYXJFdmVudHNQb3N0UGxhbm5lcidcbiAgICAgIClcbiAgICApO1xuXG4gICAgY29uc3QgZmlsdGVyZWRBbGxFdmVudHMgPSBhbGxFdmVudHNcbiAgICAgIC5tYXAoKGUpID0+IHtcbiAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IG9sZEF0dGVuZGVlRXh0ZXJuYWxFdmVudHM/LmZpbmRJbmRleChcbiAgICAgICAgICAoYSkgPT4gYT8uaWQgPT09IGU/LmlkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID4gLTEpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH0pXG4gICAgICA/LmZpbHRlcigoZSkgPT4gZSAhPT0gbnVsbCk7XG5cbiAgICBjb25zdCBldmVudHNXaXRoTWVldGluZ0lkcyA9XG4gICAgICBmaWx0ZXJlZEFsbEV2ZW50cz8uZmlsdGVyKChlKSA9PiAhIWU/Lm1lZXRpbmdJZCkgfHwgW107XG4gICAgY29uc3QgbWVldGluZ0lkc09mSW50ZXJuYWxBdHRlbmRlZXMgPSBfLnVuaXFCeShcbiAgICAgIGZpbHRlcmVkQWxsRXZlbnRzLFxuICAgICAgJ21lZXRpbmdJZCdcbiAgICApXG4gICAgICA/LmZpbHRlcigoZSkgPT4gISFlPy5tZWV0aW5nSWQpXG4gICAgICA/Lm1hcCgoZSkgPT4gZS5tZWV0aW5nSWQpO1xuXG4gICAgY29uc29sZS5sb2coZXZlbnRzV2l0aE1lZXRpbmdJZHMsICcgZXZlbnRzV2l0aE1lZXRpbmdJZHMnKTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgbWVldGluZ0lkc09mSW50ZXJuYWxBdHRlbmRlZXMsXG4gICAgICAnIG1lZXRpbmdJZHNPZkludGVybmFsQXR0ZW5kZWVzJ1xuICAgICk7XG5cbiAgICBjb25zdCBldmVudHNUb0JlQ3JlYXRlZFdpdGhOZXdJZDoge1xuICAgICAgbWVldGluZ0lkOiBzdHJpbmc7XG4gICAgICBldmVudDogRXZlbnRQbHVzVHlwZTtcbiAgICAgIGNvbmZlcmVuY2U/OiBDb25mZXJlbmNlVHlwZTtcbiAgICAgIGF0dGVuZGVlcz86IE1lZXRpbmdBc3Npc3RBdHRlbmRlZVR5cGVbXTtcbiAgICAgIHJlc291cmNlPzogc3RyaW5nO1xuICAgICAgY2xpZW50VHlwZT86ICdpb3MnIHwgJ2FuZHJvaWQnIHwgJ3dlYicgfCAnYXRvbWljLXdlYic7XG4gICAgfVtdID0gW107XG5cbiAgICBpZiAoXG4gICAgICBtZWV0aW5nSWRzT2ZJbnRlcm5hbEF0dGVuZGVlcyAmJlxuICAgICAgbWVldGluZ0lkc09mSW50ZXJuYWxBdHRlbmRlZXM/Lmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIGNvbnN0IG1lZXRpbmdBc3Npc3RzID1cbiAgICAgICAgKGF3YWl0IGxpc3RNZWV0aW5nQXNzaXN0c0dpdmVuTWVldGluZ0lkcyhcbiAgICAgICAgICBtZWV0aW5nSWRzT2ZJbnRlcm5hbEF0dGVuZGVlc1xuICAgICAgICApKSB8fCBbXTtcbiAgICAgIGZvciAoY29uc3QgbWVldGluZ0Fzc2lzdCBvZiBtZWV0aW5nQXNzaXN0cykge1xuICAgICAgICBjb25zdCBhdHRlbmRlZXMgPSBhd2FpdCBsaXN0TWVldGluZ0Fzc2lzdEF0dGVuZGVlc0dpdmVuTWVldGluZ0lkKFxuICAgICAgICAgIG1lZXRpbmdBc3Npc3Q/LmlkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGV4dGVybmFsQXR0ZW5kZWVzID0gYXR0ZW5kZWVzPy5maWx0ZXIoXG4gICAgICAgICAgKGEpID0+ICEhYT8uZXh0ZXJuYWxBdHRlbmRlZVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50Rm9yTWVldGluZ0lkSG9zdE9ubHkgPSBldmVudHNXaXRoTWVldGluZ0lkc1xuICAgICAgICAgID8uZmlsdGVyKChlKSA9PiBlPy5tZWV0aW5nSWQgPT09IG1lZXRpbmdBc3Npc3Q/LmlkKVxuICAgICAgICAgID8uZmlsdGVyKChlKSA9PiBlPy51c2VySWQgPT09IG1lZXRpbmdBc3Npc3Q/LnVzZXJJZClcbiAgICAgICAgICA/LmZpbHRlcigoZSkgPT4gZT8ubWV0aG9kID09PSAnY3JlYXRlJylcbiAgICAgICAgICA/LmZpbHRlcigoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxJbmRleCA9IGV4dGVybmFsQXR0ZW5kZWVzPy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIChhKSA9PiBhPy51c2VySWQgPT09IGU/LnVzZXJJZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChleHRlcm5hbEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9KT8uWzBdO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50c0Zvck1lZXRpbmdJZFNpbkhvc3QgPSBldmVudHNXaXRoTWVldGluZ0lkc1xuICAgICAgICAgID8uZmlsdGVyKChlKSA9PiBlPy5tZWV0aW5nSWQgPT09IG1lZXRpbmdBc3Npc3Q/LmlkKVxuICAgICAgICAgID8uZmlsdGVyKChlKSA9PiBlPy51c2VySWQgIT09IG1lZXRpbmdBc3Npc3Q/LnVzZXJJZClcbiAgICAgICAgICA/LmZpbHRlcigoZSkgPT4gZT8ubWV0aG9kID09PSAnY3JlYXRlJylcbiAgICAgICAgICA/LmZpbHRlcigoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxJbmRleCA9IGV4dGVybmFsQXR0ZW5kZWVzPy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIChhKSA9PiBhPy51c2VySWQgPT09IGU/LnVzZXJJZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChleHRlcm5hbEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBldmVudHNGb3JNZWV0aW5nSWRTaW5Ib3N0LFxuICAgICAgICAgICcgZXZlbnRzRm9yTWVldGluZ0lkU2luSG9zdCBpbnNpZGUgZm9yIGxvb3AgbWVldGluZ0lkc09mSW50ZXJuYWxBdHRlbmRlZXMnXG4gICAgICAgICk7XG5cbiAgICAgICAgZm9yIChjb25zdCBldmVudEZvck1lZXRpbmdJZFNpbkhvc3Qgb2YgZXZlbnRzRm9yTWVldGluZ0lkU2luSG9zdCkge1xuICAgICAgICAgIGV2ZW50Rm9yTWVldGluZ0lkU2luSG9zdC5zdGFydERhdGUgPSBkYXlqcyhcbiAgICAgICAgICAgIGV2ZW50Rm9yTWVldGluZ0lkSG9zdE9ubHkuc3RhcnREYXRlLnNsaWNlKDAsIDE5KVxuICAgICAgICAgIClcbiAgICAgICAgICAgIC50eihldmVudEZvck1lZXRpbmdJZEhvc3RPbmx5LnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnR6KGV2ZW50Rm9yTWVldGluZ0lkU2luSG9zdC50aW1lem9uZSlcbiAgICAgICAgICAgIC5mb3JtYXQoKTtcbiAgICAgICAgICBldmVudEZvck1lZXRpbmdJZFNpbkhvc3QuZW5kRGF0ZSA9IGRheWpzKFxuICAgICAgICAgICAgZXZlbnRGb3JNZWV0aW5nSWRIb3N0T25seS5lbmREYXRlLnNsaWNlKDAsIDE5KVxuICAgICAgICAgIClcbiAgICAgICAgICAgIC50eihldmVudEZvck1lZXRpbmdJZEhvc3RPbmx5LnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgLnR6KGV2ZW50Rm9yTWVldGluZ0lkU2luSG9zdC50aW1lem9uZSlcbiAgICAgICAgICAgIC5mb3JtYXQoKTtcblxuICAgICAgICAgIGV2ZW50c1RvQmVDcmVhdGVkV2l0aE5ld0lkLnB1c2goe1xuICAgICAgICAgICAgbWVldGluZ0lkOiBtZWV0aW5nQXNzaXN0Py5pZCxcbiAgICAgICAgICAgIGV2ZW50OiBldmVudEZvck1lZXRpbmdJZFNpbkhvc3QsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudHNGb3JNZWV0aW5nSWRTaW5Ib3N0QW55TWV0aG9kID0gZXZlbnRzV2l0aE1lZXRpbmdJZHNcbiAgICAgICAgICA/LmZpbHRlcigoZSkgPT4gZT8ubWVldGluZ0lkID09PSBtZWV0aW5nQXNzaXN0Py5pZClcbiAgICAgICAgICA/LmZpbHRlcigoZSkgPT4gZT8udXNlcklkICE9PSBtZWV0aW5nQXNzaXN0Py51c2VySWQpXG4gICAgICAgICAgPy5maWx0ZXIoKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsSW5kZXggPSBleHRlcm5hbEF0dGVuZGVlcz8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAoYSkgPT4gYT8udXNlcklkID09PSBlPy51c2VySWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZXh0ZXJuYWxJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZXZlbnRGb3JNZWV0aW5nSWRIb3N0T25seUFueU1ldGhvZCA9IGV2ZW50c1dpdGhNZWV0aW5nSWRzXG4gICAgICAgICAgPy5maWx0ZXIoKGUpID0+IGU/Lm1lZXRpbmdJZCA9PT0gbWVldGluZ0Fzc2lzdD8uaWQpXG4gICAgICAgICAgPy5maWx0ZXIoKGUpID0+IGU/LnVzZXJJZCA9PT0gbWVldGluZ0Fzc2lzdD8udXNlcklkKVxuICAgICAgICAgID8uZmlsdGVyKChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHRlcm5hbEluZGV4ID0gZXh0ZXJuYWxBdHRlbmRlZXM/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgKGEpID0+IGE/LnVzZXJJZCA9PT0gZT8udXNlcklkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGV4dGVybmFsSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0pPy5bMF07XG5cbiAgICAgICAgaWYgKGV2ZW50Rm9yTWVldGluZ0lkSG9zdE9ubHlBbnlNZXRob2Q/LmlkKSB7XG4gICAgICAgICAgZXZlbnRzRm9yTWVldGluZ0lkU2luSG9zdEFueU1ldGhvZD8uZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdGFydERhdGUgPSBkYXlqcyhcbiAgICAgICAgICAgICAgZXZlbnRGb3JNZWV0aW5nSWRIb3N0T25seUFueU1ldGhvZC5zdGFydERhdGUuc2xpY2UoMCwgMTkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgIC50eihldmVudEZvck1lZXRpbmdJZEhvc3RPbmx5QW55TWV0aG9kLnRpbWV6b25lLCB0cnVlKVxuICAgICAgICAgICAgICAudHooZS50aW1lem9uZSlcbiAgICAgICAgICAgICAgLmZvcm1hdCgpO1xuICAgICAgICAgICAgZS5lbmREYXRlID0gZGF5anMoXG4gICAgICAgICAgICAgIGV2ZW50Rm9yTWVldGluZ0lkSG9zdE9ubHlBbnlNZXRob2QuZW5kRGF0ZS5zbGljZSgwLCAxOSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLnR6KGV2ZW50Rm9yTWVldGluZ0lkSG9zdE9ubHlBbnlNZXRob2QudGltZXpvbmUsIHRydWUpXG4gICAgICAgICAgICAgIC50eihlLnRpbWV6b25lKVxuICAgICAgICAgICAgICAuZm9ybWF0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJlZEV2ZW50c1RvVXBkYXRlID0gZXZlbnRzVG9VcGRhdGVcbiAgICAgIC5maWx0ZXIoKGUxKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvdW5kT2xkRXZlbnQgPSBvbGRFdmVudHM/LmZpbmQoKGUyKSA9PiBlMj8uaWQgPT09IGUxPy5pZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvdW5kT2xkRXZlbnQsICcgZm91bmRPbGRFdmVudCBpbnNpZGUgZmlsdGVyJyk7XG4gICAgICAgIGlmIChmb3VuZE9sZEV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGNvbXBhcmVFdmVudHNUb0ZpbHRlclVuZXF1YWxFdmVudHMoZTEsIGZvdW5kT2xkRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSlcbiAgICAgID8uZmlsdGVyKChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50RXhpc3RzID0gb2xkQXR0ZW5kZWVFeHRlcm5hbEV2ZW50cz8uZmluZChcbiAgICAgICAgICAoYSkgPT4gYT8uaWQgPT09IGU/LmlkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50RXhpc3RzLCAnIGV2ZW50RXhpc3RzJyk7XG4gICAgICAgIHJldHVybiAhZXZlbnRFeGlzdHM7XG4gICAgICB9KVxuICAgICAgPy5maWx0ZXIoKGUpID0+IHtcbiAgICAgICAgY29uc3QgY3JlYXRlRXZlbnRTaW5Ib3N0SW5kZXggPSBldmVudHNUb0JlQ3JlYXRlZFdpdGhOZXdJZD8uZmluZEluZGV4KFxuICAgICAgICAgIChjKSA9PiBjPy5ldmVudD8uaWQgPT09IGU/LmlkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGNyZWF0ZUV2ZW50U2luSG9zdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KVxuICAgICAgPy5maWx0ZXIoKGUpID0+ICEhZSk7XG5cbiAgICBmaWx0ZXJlZEV2ZW50c1RvVXBkYXRlLmZvckVhY2goKGUxKSA9PlxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGUxLFxuICAgICAgICBvbGRFdmVudHM/LmZpbmQoKGUyKSA9PiBlMj8uaWQgPT09IGUxPy5pZCksXG4gICAgICAgICcgIGZpbHRlcmVkRXZlbnRzVG9VcGRhdGUnXG4gICAgICApXG4gICAgKTtcblxuICAgIGxldCBjcmVhdGVQcm9taXNlczogUHJvbWlzZTxDcmVhdGVHb29nbGVFdmVudFJlc3BvbnNlVHlwZT5bXSA9IFtdO1xuICAgIGxldCB1cGRhdGVQcm9taXNlczogUHJvbWlzZTxzdHJpbmc+W10gPSBbXTtcbiAgICBjb25zdCBldmVudHNUb1Vwc2VydDogRXZlbnRQbHVzVHlwZVtdID0gW107XG4gICAgY29uc3QgZGVsZXRlUmVtaW5kZXJzOiBSZW1pbmRlclR5cGVBZGp1c3RlZFtdID0gW107XG4gICAgY29uc3QgaW5zZXJ0UmVtaW5kZXJPYmplY3RzOiBSZW1pbmRlclR5cGVBZGp1c3RlZFtdID0gW107XG4gICAgY29uc3QgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0czogUHJlZmVycmVkVGltZVJhbmdlVHlwZVtdID0gW107XG4gICAgY29uc3QgZGVsZXRlUHJlZmVycmVkVGltZVJhbmdlT2JqZWN0czogUHJlZmVycmVkVGltZVJhbmdlVHlwZVtdID0gW107XG4gICAgY29uc3QgaW5zZXJ0QXR0ZW5kZWVPYmplY3RzOiBBdHRlbmRlZVR5cGVbXSA9IFtdO1xuXG4gICAgY29uc3QgZXZlbnRUb0ZpbHRlckZvclVwZGF0ZUNvbmZlcmVuY2VzOiBFdmVudFBsdXNUeXBlW10gPSBbXTtcblxuICAgIGNvbnN0IGV2ZW50c1RvUmVtb3ZlOiBFdmVudFBsdXNUeXBlW10gPSBbXTtcblxuICAgIGhvc3RCdWZmZXJUaW1lcz8uZm9yRWFjaCgoYikgPT5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBiLmJlZm9yZUV2ZW50LFxuICAgICAgICBiLmFmdGVyRXZlbnQsXG4gICAgICAgICcgYnVmZmVyVGltZXMgYmVmb3JlIGV2ZW50VG9VcGRhdGUgbG9vcCBpbnNpZGUgdXBkYXRlQWxsQ2FsZW5kYXJFdmVudHNQb3N0UGxhbm5lcidcbiAgICAgIClcbiAgICApO1xuXG4gICAgZm9yIChjb25zdCBldmVudFRvVXBkYXRlIG9mIGZpbHRlcmVkRXZlbnRzVG9VcGRhdGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBldmVudFRvVXBkYXRlLFxuICAgICAgICAnIGV2ZW50VG9VcGRhdGUgaW5zaWRlIHVwZGF0ZUFsbENhbGVuZGFyRXZlbnRzUG9zdFBsYW5uZXInXG4gICAgICApO1xuICAgICAgY29uc3QgeyByZXNvdXJjZSB9ID0gYXdhaXQgZ2V0Q2FsZW5kYXJXaXRoSWQoZXZlbnRUb1VwZGF0ZS5jYWxlbmRhcklkKTtcbiAgICAgIGNvbnN0IGNhbGVuZGFySW50ZWdyYXRpb24gPSBhd2FpdCBnZXRDYWxlbmRhckludGVncmF0aW9uKFxuICAgICAgICBldmVudFRvVXBkYXRlLnVzZXJJZCxcbiAgICAgICAgcmVzb3VyY2VcbiAgICAgICk7XG4gICAgICBjb25zdCBjbGllbnRUeXBlID0gY2FsZW5kYXJJbnRlZ3JhdGlvbj8uY2xpZW50VHlwZTtcblxuICAgICAgLy8gLS0tIFJFUExBTiBMT0dJQyAtLS1cbiAgICAgIGlmIChcbiAgICAgICAgaXNSZXBsYW4gJiZcbiAgICAgICAgb3JpZ2luYWxHb29nbGVFdmVudElkVG9VcGRhdGUgJiZcbiAgICAgICAgb3JpZ2luYWxDYWxlbmRhcklkVG9VcGRhdGUgJiZcbiAgICAgICAgZXZlbnRUb1VwZGF0ZS5ldmVudElkID09PSBvcmlnaW5hbEdvb2dsZUV2ZW50SWRUb1VwZGF0ZSAmJiAvLyBldmVudElkIGlzIEdvb2dsZSdzIElEXG4gICAgICAgIGV2ZW50VG9VcGRhdGUuY2FsZW5kYXJJZCA9PT0gb3JpZ2luYWxDYWxlbmRhcklkVG9VcGRhdGVcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgUmVwbGFubmluZzogVXBkYXRpbmcgZXZlbnQgJHtvcmlnaW5hbEdvb2dsZUV2ZW50SWRUb1VwZGF0ZX0gaW4gY2FsZW5kYXIgJHtvcmlnaW5hbENhbGVuZGFySWRUb1VwZGF0ZX1gXG4gICAgICAgICk7XG4gICAgICAgIC8vIEVuc3VyZSBhdHRlbmRlZXMgYXJlIGluIEdvb2dsZUF0dGVuZGVlVHlwZSBmb3JtYXQgaWYgbmVlZGVkIGJ5IHBhdGNoR29vZ2xlRXZlbnRcbiAgICAgICAgY29uc3QgZ29vZ2xlQXR0ZW5kZWVzOiBHb29nbGVBdHRlbmRlZVR5cGVbXSA9XG4gICAgICAgICAgZXZlbnRUb1VwZGF0ZS5hdHRlbmRlZXM/Lm1hcCgoYXR0KSA9PiAoe1xuICAgICAgICAgICAgZW1haWw6IGF0dC5wcmltYXJ5RW1haWwgfHwgYXR0LmVtYWlscz8uWzBdPy52YWx1ZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBhdHQubmFtZSxcbiAgICAgICAgICAgIC8vIFdlIG1pZ2h0IG5lZWQgdG8gbWFwIHJlc3BvbnNlU3RhdHVzLCBvcHRpb25hbCwgZXRjLiBpZiBhdmFpbGFibGUgYW5kIG5lZWRlZFxuICAgICAgICAgIH0pKSB8fCBbXTtcblxuICAgICAgICAvLyBDYWxsIHBvc3RQbGFubmVyTW9kaWZ5RXZlbnRJbkNhbGVuZGFyIHdpdGggJ3VwZGF0ZSdcbiAgICAgICAgLy8gSU1QT1JUQU5UOiBuZXdFdmVudC5ldmVudElkIGZvciBwYXRjaEdvb2dsZUV2ZW50IHNob3VsZCBiZSB0aGUgb3JpZ2luYWxHb29nbGVFdmVudElkVG9VcGRhdGVcbiAgICAgICAgLy8gVGhlIGV2ZW50VG9VcGRhdGUgY29udGFpbnMgdGhlIG5ldyBzdGFydC9lbmQgdGltZXMgYW5kIG90aGVyIG1vZGlmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgIHVwZGF0ZVByb21pc2VzLnB1c2goXG4gICAgICAgICAgcG9zdFBsYW5uZXJNb2RpZnlFdmVudEluQ2FsZW5kYXIoXG4gICAgICAgICAgICB7IC4uLmV2ZW50VG9VcGRhdGUsIGV2ZW50SWQ6IG9yaWdpbmFsR29vZ2xlRXZlbnRJZFRvVXBkYXRlIH0sIC8vIFBhc3Mgb3JpZ2luYWwgR29vZ2xlIElEIGZvciB1cGRhdGVcbiAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUudXNlcklkLFxuICAgICAgICAgICAgJ3VwZGF0ZScsXG4gICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgIGZhbHNlLCAvLyBBc3N1bWluZyB0aGUgbWFpbiByZXBsYW5uZWQgZXZlbnQgaXMgbm90IGluaGVyZW50bHkgYSBcInRpbWUgYmxvY2tpbmdcIiBicmVha1xuICAgICAgICAgICAgY2xpZW50VHlwZSxcbiAgICAgICAgICAgIHJlbWluZGVyc09iamVjdEZvckV2ZW50Py5yZW1pbmRlcnMsXG4gICAgICAgICAgICBnb29nbGVBdHRlbmRlZXMsIC8vIFBhc3MgdGhlIGZ1bGwgZmluYWwgbGlzdCBvZiBhdHRlbmRlZXNcbiAgICAgICAgICAgIHVuZGVmaW5lZCAvLyBDb25mZXJlbmNlIGRhdGEgLSBoYW5kbGUgaWYgaXQgY2FuIGNoYW5nZSBkdXJpbmcgcmVwbGFuXG4gICAgICAgICAgKSBhcyBQcm9taXNlPHN0cmluZz5cbiAgICAgICAgKTtcbiAgICAgICAgZXZlbnRUb1VwZGF0ZS5tZXRob2QgPSBudWxsOyAvLyBNYXJrIGFzIHByb2Nlc3NlZCBmb3IgdXBzZXJ0IGxvZ2ljXG4gICAgICAgIGV2ZW50c1RvVXBzZXJ0LnB1c2goZXZlbnRUb1VwZGF0ZSk7IC8vIFN0aWxsIHVwc2VydCB0byBIYXN1cmEgdG8gcmVmbGVjdCBjaGFuZ2VzXG5cbiAgICAgICAgLy8gSGFuZGxlIHJlbWluZGVycyBhbmQgcHJlZmVycmVkIHRpbWUgcmFuZ2VzIGZvciB0aGUgdXBkYXRlZCBldmVudFxuICAgICAgICBpZiAocmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQ/LnJlbWluZGVycz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IG9sZFJlbWluZGVycyA9IGF3YWl0IGxpc3RSZW1pbmRlcnNGb3JFdmVudChcbiAgICAgICAgICAgIG9yaWdpbmFsR29vZ2xlRXZlbnRJZFRvVXBkYXRlLFxuICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS51c2VySWRcbiAgICAgICAgICApOyAvLyBVc2Ugb3JpZ2luYWwgSURcbiAgICAgICAgICBpZiAob2xkUmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkZWxldGVSZW1pbmRlcnMucHVzaChcbiAgICAgICAgICAgICAgLi4ub2xkUmVtaW5kZXJzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgICAgIGV2ZW50SWQ6IG9yaWdpbmFsR29vZ2xlRXZlbnRJZFRvVXBkYXRlLFxuICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGluc2VydFJlbWluZGVyT2JqZWN0cy5wdXNoKFxuICAgICAgICAgICAgLi4ucmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQucmVtaW5kZXJzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgICAgZXZlbnRJZDogb3JpZ2luYWxHb29nbGVFdmVudElkVG9VcGRhdGUsXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9sZFByZWZlcnJlZFRpbWVSYW5nZXMgPSBhd2FpdCBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50KFxuICAgICAgICAgIG9yaWdpbmFsR29vZ2xlRXZlbnRJZFRvVXBkYXRlXG4gICAgICAgICk7IC8vIFVzZSBvcmlnaW5hbCBJRFxuICAgICAgICBpZiAoXG4gICAgICAgICAgIV8uaXNFcXVhbChvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzLCBldmVudFRvVXBkYXRlLnByZWZlcnJlZFRpbWVSYW5nZXMpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzLnB1c2goXG4gICAgICAgICAgICAgIC4uLm9sZFByZWZlcnJlZFRpbWVSYW5nZXMubWFwKChwdHIpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4ucHRyLFxuICAgICAgICAgICAgICAgIGV2ZW50SWQ6IG9yaWdpbmFsR29vZ2xlRXZlbnRJZFRvVXBkYXRlLFxuICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChldmVudFRvVXBkYXRlPy5wcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzLnB1c2goXG4gICAgICAgICAgICAgIC4uLmV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlcy5tYXAoKHB0cikgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5wdHIsXG4gICAgICAgICAgICAgICAgZXZlbnRJZDogb3JpZ2luYWxHb29nbGVFdmVudElkVG9VcGRhdGUsXG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7IC8vIFNraXAgdGhlIGNyZWF0ZSBsb2dpYyBiZWxvdyBmb3IgdGhpcyBldmVudFxuICAgICAgfVxuICAgICAgLy8gLS0tIEVORCBSRVBMQU4gTE9HSUMgLS0tXG5cbiAgICAgIGNvbnN0IGJlZm9yZUV2ZW50SW5kZXggPSBob3N0QnVmZmVyVGltZXM/LmZpbmRJbmRleChcbiAgICAgICAgKGJ1ZmZlclRpbWVzKSA9PiBidWZmZXJUaW1lcz8uYmVmb3JlRXZlbnQ/LmlkID09PSBldmVudFRvVXBkYXRlLmlkXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coYmVmb3JlRXZlbnRJbmRleCwgcmVzb3VyY2UsICcgYmVmb3JlRXZlbnRJbmRleCwgcmVzb3VyY2UgJyk7XG4gICAgICBjb25zdCBhZnRlckV2ZW50SW5kZXggPSBob3N0QnVmZmVyVGltZXM/LmZpbmRJbmRleChcbiAgICAgICAgKGJ1ZmZlclRpbWVzKSA9PiBidWZmZXJUaW1lcz8uYWZ0ZXJFdmVudD8uaWQgPT09IGV2ZW50VG9VcGRhdGUuaWRcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhhZnRlckV2ZW50SW5kZXgsIHJlc291cmNlLCAnIGFmdGVyRXZlbnRJbmRleCwgcmVzb3VyY2UgJyk7XG4gICAgICBjb25zdCByZW1pbmRlcnNPYmplY3RGb3JFdmVudCA9IG5ld0hvc3RSZW1pbmRlcnM/LmZpbmQoXG4gICAgICAgIChyZW1pbmRlcikgPT4gcmVtaW5kZXIuZXZlbnRJZCA9PT0gZXZlbnRUb1VwZGF0ZS5pZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGJyZWFrSW5kZXggPSBicmVha3M/LmZpbmRJbmRleChcbiAgICAgICAgKGJyZWFrRXZlbnQpID0+IGJyZWFrRXZlbnQuaWQgPT09IGV2ZW50VG9VcGRhdGUuaWRcbiAgICAgICk7XG5cbiAgICAgIGlmIChiZWZvcmVFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgY29uc29sZS5sb2coYmVmb3JlRXZlbnRJbmRleCwgcmVzb3VyY2UsICcgYmVmb3JlRXZlbnRJbmRleCwgcmVzb3VyY2UnKTtcbiAgICAgICAgaWYgKHJlc291cmNlID09PSBnb29nbGVDYWxlbmRhclJlc291cmNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBldmVudFRvVXBkYXRlLmlkLFxuICAgICAgICAgICAgYmVmb3JlRXZlbnRJbmRleCxcbiAgICAgICAgICAgICcgdXBkYXRlZEV2ZW50LmlkLCBiZWZvcmVFdmVudEluZGV4LCAnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBob3N0QnVmZmVyVGltZXM/LltiZWZvcmVFdmVudEluZGV4XT8uYmVmb3JlRXZlbnQ/Lm1ldGhvZCA9PT1cbiAgICAgICAgICAgICdjcmVhdGUnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5pZCxcbiAgICAgICAgICAgICAgYmVmb3JlRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgJyB1cGRhdGVkRXZlbnQuaWQsIGJlZm9yZUV2ZW50SW5kZXgsIGluc2lkZSBpZiAodGltZUJsb2NraW5nPy5bYmVmb3JlRXZlbnRJbmRleF0/LmJlZm9yZUV2ZW50Py5tZXRob2QgPT09IGNyZWF0ZSknXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3JlYXRlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgcG9zdFBsYW5uZXJNb2RpZnlFdmVudEluQ2FsZW5kYXIoXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZSxcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAnY3JlYXRlJyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICB0cnVlLCAvLyBpc1RpbWVCbG9ja2luZyBmb3IgYnVmZmVyIGV2ZW50c1xuICAgICAgICAgICAgICAgIGNsaWVudFR5cGUsXG4gICAgICAgICAgICAgICAgcmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQ/LnJlbWluZGVycywgLy8gUGFzcyByZW1pbmRlcnMgaWYgYW55XG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBBdHRlbmRlZXMgZm9yIGJ1ZmZlciBldmVudHM/IFVzdWFsbHkgbm9uZS5cbiAgICAgICAgICAgICAgICB1bmRlZmluZWQgLy8gQ29uZmVyZW5jZSBmb3IgYnVmZmVyIGV2ZW50cz8gVXN1YWxseSBub25lLlxuICAgICAgICAgICAgICApIGFzIFByb21pc2U8Q3JlYXRlR29vZ2xlRXZlbnRSZXNwb25zZVR5cGU+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBldmVudFRvVXBkYXRlLm1ldGhvZCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChyZW1pbmRlcnNPYmplY3RGb3JFdmVudD8ucmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGluc2VydFJlbWluZGVyT2JqZWN0cy5wdXNoKC4uLnJlbWluZGVyc09iamVjdEZvckV2ZW50LnJlbWluZGVycyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9sZFByZWZlcnJlZFRpbWVSYW5nZXMgPVxuICAgICAgICAgICAgICBhd2FpdCBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50KGV2ZW50VG9VcGRhdGUuaWQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhXy5pc0VxdWFsKFxuICAgICAgICAgICAgICAgIG9sZFByZWZlcnJlZFRpbWVSYW5nZXMsXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5wcmVmZXJyZWRUaW1lUmFuZ2VzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAob2xkUHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZVByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHMucHVzaCguLi5vbGRQcmVmZXJyZWRUaW1lUmFuZ2VzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChldmVudFRvVXBkYXRlPy5wcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgLi4uZXZlbnRUb1VwZGF0ZS5wcmVmZXJyZWRUaW1lUmFuZ2VzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBob3N0QnVmZmVyVGltZXM/LltiZWZvcmVFdmVudEluZGV4XT8uYmVmb3JlRXZlbnQ/Lm1ldGhvZCA9PT1cbiAgICAgICAgICAgICd1cGRhdGUnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRFdmVudFRvVXBkYXRlID0gZmlsdGVyZWRBbGxFdmVudHM/LmZpbmQoXG4gICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gZXZlbnRUb1VwZGF0ZT8uaWRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghZXZlbnRUb1VwZGF0ZT8ubW9kaWZpYWJsZSAmJiBvbGRFdmVudFRvVXBkYXRlPy5pZCkge1xuICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnN0YXJ0RGF0ZSA9IG9sZEV2ZW50VG9VcGRhdGUuc3RhcnREYXRlO1xuICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLmVuZERhdGUgPSBvbGRFdmVudFRvVXBkYXRlLmVuZERhdGU7XG4gICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUudGltZXpvbmUgPSBvbGRFdmVudFRvVXBkYXRlLnRpbWV6b25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1cGRhdGVQcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICBwb3N0UGxhbm5lck1vZGlmeUV2ZW50SW5DYWxlbmRhcihcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAndXBkYXRlJyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICB0cnVlLCAvLyBpc1RpbWVCbG9ja2luZyBmb3IgYnVmZmVyIGV2ZW50c1xuICAgICAgICAgICAgICAgIGNsaWVudFR5cGUsXG4gICAgICAgICAgICAgICAgcmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQ/LnJlbWluZGVycywgLy8gUGFzcyByZW1pbmRlcnMgaWYgYW55XG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBBdHRlbmRlZXNcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQgLy8gQ29uZmVyZW5jZVxuICAgICAgICAgICAgICApIGFzIFByb21pc2U8c3RyaW5nPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHJlbWluZGVyc09iamVjdEZvckV2ZW50Py5yZW1pbmRlcnM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc3Qgb2xkUmVtaW5kZXJzID0gYXdhaXQgbGlzdFJlbWluZGVyc0ZvckV2ZW50KFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LmlkLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LnVzZXJJZFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAob2xkUmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlUmVtaW5kZXJzLnB1c2goLi4ub2xkUmVtaW5kZXJzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpbnNlcnRSZW1pbmRlck9iamVjdHMucHVzaCguLi5yZW1pbmRlcnNPYmplY3RGb3JFdmVudC5yZW1pbmRlcnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzID1cbiAgICAgICAgICAgICAgYXdhaXQgbGlzdFByZWZlcnJlZFRpbWVSYW5nZXNGb3JFdmVudChldmVudFRvVXBkYXRlLmlkKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIV8uaXNFcXVhbChcbiAgICAgICAgICAgICAgICBvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKG9sZFByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzLnB1c2goLi4ub2xkUHJlZmVycmVkVGltZVJhbmdlcyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZXZlbnRUb1VwZGF0ZT8ucHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGluc2VydFByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHMucHVzaChcbiAgICAgICAgICAgICAgICAgIC4uLmV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBldmVudHNUb1Vwc2VydC5wdXNoKGV2ZW50VG9VcGRhdGUpO1xuICAgICAgfSBlbHNlIGlmIChhZnRlckV2ZW50SW5kZXggPiAtMSkge1xuICAgICAgICBjb25zb2xlLmxvZyhhZnRlckV2ZW50SW5kZXgsIHJlc291cmNlLCAnIGFmdGVyRXZlbnRJbmRleCwgcmVzb3VyY2UnKTtcbiAgICAgICAgaWYgKHJlc291cmNlID09PSBnb29nbGVDYWxlbmRhclJlc291cmNlKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgaG9zdEJ1ZmZlclRpbWVzPy5bYWZ0ZXJFdmVudEluZGV4XT8uYWZ0ZXJFdmVudD8ubWV0aG9kID09PSAnY3JlYXRlJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgY3JlYXRlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgcG9zdFBsYW5uZXJNb2RpZnlFdmVudEluQ2FsZW5kYXIoXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZSxcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAnY3JlYXRlJyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICB0cnVlLCAvLyBpc1RpbWVCbG9ja2luZyBmb3IgYnVmZmVyIGV2ZW50c1xuICAgICAgICAgICAgICAgIGNsaWVudFR5cGUsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBSZW1pbmRlcnMgZm9yIGJ1ZmZlciBldmVudHM/XG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBBdHRlbmRlZXNcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQgLy8gQ29uZmVyZW5jZVxuICAgICAgICAgICAgICApIGFzIFByb21pc2U8Q3JlYXRlR29vZ2xlRXZlbnRSZXNwb25zZVR5cGU+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBldmVudFRvVXBkYXRlLm1ldGhvZCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChyZW1pbmRlcnNPYmplY3RGb3JFdmVudD8ucmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGluc2VydFJlbWluZGVyT2JqZWN0cy5wdXNoKC4uLnJlbWluZGVyc09iamVjdEZvckV2ZW50LnJlbWluZGVycyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9sZFByZWZlcnJlZFRpbWVSYW5nZXMgPVxuICAgICAgICAgICAgICBhd2FpdCBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50KGV2ZW50VG9VcGRhdGUuaWQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhXy5pc0VxdWFsKFxuICAgICAgICAgICAgICAgIG9sZFByZWZlcnJlZFRpbWVSYW5nZXMsXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5wcmVmZXJyZWRUaW1lUmFuZ2VzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAob2xkUHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZVByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHMucHVzaCguLi5vbGRQcmVmZXJyZWRUaW1lUmFuZ2VzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChldmVudFRvVXBkYXRlPy5wcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgLi4uZXZlbnRUb1VwZGF0ZS5wcmVmZXJyZWRUaW1lUmFuZ2VzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBob3N0QnVmZmVyVGltZXM/LlthZnRlckV2ZW50SW5kZXhdPy5hZnRlckV2ZW50Py5tZXRob2QgPT09ICd1cGRhdGUnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRFdmVudFRvVXBkYXRlID0gZmlsdGVyZWRBbGxFdmVudHM/LmZpbmQoXG4gICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gZXZlbnRUb1VwZGF0ZT8uaWRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghZXZlbnRUb1VwZGF0ZT8ubW9kaWZpYWJsZSAmJiBvbGRFdmVudFRvVXBkYXRlPy5pZCkge1xuICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnN0YXJ0RGF0ZSA9IG9sZEV2ZW50VG9VcGRhdGUuc3RhcnREYXRlO1xuICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLmVuZERhdGUgPSBvbGRFdmVudFRvVXBkYXRlLmVuZERhdGU7XG4gICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUudGltZXpvbmUgPSBvbGRFdmVudFRvVXBkYXRlLnRpbWV6b25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1cGRhdGVQcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICBwb3N0UGxhbm5lck1vZGlmeUV2ZW50SW5DYWxlbmRhcihcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAndXBkYXRlJyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICB0cnVlLCAvLyBpc1RpbWVCbG9ja2luZyBmb3IgYnVmZmVyIGV2ZW50c1xuICAgICAgICAgICAgICAgIGNsaWVudFR5cGUsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBSZW1pbmRlcnNcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIEF0dGVuZGVlc1xuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCAvLyBDb25mZXJlbmNlXG4gICAgICAgICAgICAgICkgYXMgUHJvbWlzZTxzdHJpbmc+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAocmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQ/LnJlbWluZGVycz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zdCBvbGRSZW1pbmRlcnMgPSBhd2FpdCBsaXN0UmVtaW5kZXJzRm9yRXZlbnQoXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZT8uaWQsXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZT8udXNlcklkXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChvbGRSZW1pbmRlcnM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGVSZW1pbmRlcnMucHVzaCguLi5vbGRSZW1pbmRlcnMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGluc2VydFJlbWluZGVyT2JqZWN0cy5wdXNoKC4uLnJlbWluZGVyc09iamVjdEZvckV2ZW50LnJlbWluZGVycyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9sZFByZWZlcnJlZFRpbWVSYW5nZXMgPVxuICAgICAgICAgICAgICBhd2FpdCBsaXN0UHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50KGV2ZW50VG9VcGRhdGUuaWQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhXy5pc0VxdWFsKFxuICAgICAgICAgICAgICAgIG9sZFByZWZlcnJlZFRpbWVSYW5nZXMsXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5wcmVmZXJyZWRUaW1lUmFuZ2VzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAob2xkUHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZVByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHMucHVzaCguLi5vbGRQcmVmZXJyZWRUaW1lUmFuZ2VzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChldmVudFRvVXBkYXRlPy5wcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgLi4uZXZlbnRUb1VwZGF0ZS5wcmVmZXJyZWRUaW1lUmFuZ2VzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGV2ZW50c1RvVXBzZXJ0LnB1c2goZXZlbnRUb1VwZGF0ZSk7XG4gICAgICB9IGVsc2UgaWYgKGJyZWFrSW5kZXggPiAtMSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBicmVha0luZGV4LFxuICAgICAgICAgIGJyZWFrcz8uW2JyZWFrSW5kZXhdPy5tZXRob2QsXG4gICAgICAgICAgcmVzb3VyY2UsXG4gICAgICAgICAgJyBicmVha0luZGV4LCBicmVha3M/LlticmVha0luZGV4XT8ubWV0aG9kLCByZXNvdXJjZSdcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJlc291cmNlID09PSBnb29nbGVDYWxlbmRhclJlc291cmNlKSB7XG4gICAgICAgICAgaWYgKGJyZWFrcz8uW2JyZWFrSW5kZXhdPy5tZXRob2QgPT09ICdjcmVhdGUnKSB7XG4gICAgICAgICAgICBjcmVhdGVQcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICBwb3N0UGxhbm5lck1vZGlmeUV2ZW50SW5DYWxlbmRhcihcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUudXNlcklkLFxuICAgICAgICAgICAgICAgICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgIHJlc291cmNlLFxuICAgICAgICAgICAgICAgIGZhbHNlLCAvLyBOb3QgYSBicmVhayBldmVudCBpdHNlbGZcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlLFxuICAgICAgICAgICAgICAgIHJlbWluZGVyc09iamVjdEZvckV2ZW50Py5yZW1pbmRlcnMsIC8vIFBhc3MgcmVtaW5kZXJzIGlmIGFueVxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gQXR0ZW5kZWVzXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkIC8vIENvbmZlcmVuY2VcbiAgICAgICAgICAgICAgKSBhcyBQcm9taXNlPENyZWF0ZUdvb2dsZUV2ZW50UmVzcG9uc2VUeXBlPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5tZXRob2QgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAocmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQ/LnJlbWluZGVycz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBpbnNlcnRSZW1pbmRlck9iamVjdHMucHVzaCguLi5yZW1pbmRlcnNPYmplY3RGb3JFdmVudC5yZW1pbmRlcnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzID1cbiAgICAgICAgICAgICAgYXdhaXQgbGlzdFByZWZlcnJlZFRpbWVSYW5nZXNGb3JFdmVudChldmVudFRvVXBkYXRlLmlkKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIV8uaXNFcXVhbChcbiAgICAgICAgICAgICAgICBvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKG9sZFByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzLnB1c2goLi4ub2xkUHJlZmVycmVkVGltZVJhbmdlcyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZXZlbnRUb1VwZGF0ZT8ucHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGluc2VydFByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHMucHVzaChcbiAgICAgICAgICAgICAgICAgIC4uLmV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWtzW2JyZWFrSW5kZXhdLm1ldGhvZCA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIGlmIChicmVha3M/LlticmVha0luZGV4XT8ubWV0aG9kID09PSAndXBkYXRlJykge1xuICAgICAgICAgICAgY29uc3Qgb2xkRXZlbnRUb1VwZGF0ZSA9IGZpbHRlcmVkQWxsRXZlbnRzPy5maW5kKFxuICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IGV2ZW50VG9VcGRhdGU/LmlkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIWV2ZW50VG9VcGRhdGU/Lm1vZGlmaWFibGUgJiYgb2xkRXZlbnRUb1VwZGF0ZT8uaWQpIHtcbiAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5zdGFydERhdGUgPSBvbGRFdmVudFRvVXBkYXRlLnN0YXJ0RGF0ZTtcbiAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5lbmREYXRlID0gb2xkRXZlbnRUb1VwZGF0ZS5lbmREYXRlO1xuICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnRpbWV6b25lID0gb2xkRXZlbnRUb1VwZGF0ZS50aW1lem9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXBkYXRlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgcG9zdFBsYW5uZXJNb2RpZnlFdmVudEluQ2FsZW5kYXIoXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZSxcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAndXBkYXRlJyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICBmYWxzZSwgLy8gTm90IGEgYnJlYWsgZXZlbnRcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlLFxuICAgICAgICAgICAgICAgIHJlbWluZGVyc09iamVjdEZvckV2ZW50Py5yZW1pbmRlcnMsIC8vIFBhc3MgcmVtaW5kZXJzIGlmIGFueVxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gQXR0ZW5kZWVzXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkIC8vIENvbmZlcmVuY2VcbiAgICAgICAgICAgICAgKSBhcyBQcm9taXNlPHN0cmluZz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChyZW1pbmRlcnNPYmplY3RGb3JFdmVudD8ucmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG9sZFJlbWluZGVycyA9IGF3YWl0IGxpc3RSZW1pbmRlcnNGb3JFdmVudChcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlPy5pZCxcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlPy51c2VySWRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKG9sZFJlbWluZGVycz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZVJlbWluZGVycy5wdXNoKC4uLm9sZFJlbWluZGVycyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpbnNlcnRSZW1pbmRlck9iamVjdHMucHVzaCguLi5yZW1pbmRlcnNPYmplY3RGb3JFdmVudC5yZW1pbmRlcnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzID1cbiAgICAgICAgICAgICAgYXdhaXQgbGlzdFByZWZlcnJlZFRpbWVSYW5nZXNGb3JFdmVudChldmVudFRvVXBkYXRlLmlkKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIV8uaXNFcXVhbChcbiAgICAgICAgICAgICAgICBvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKG9sZFByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGVQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzLnB1c2goLi4ub2xkUHJlZmVycmVkVGltZVJhbmdlcyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZXZlbnRUb1VwZGF0ZT8ucHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGluc2VydFByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHMucHVzaChcbiAgICAgICAgICAgICAgICAgIC4uLmV2ZW50VG9VcGRhdGUucHJlZmVycmVkVGltZVJhbmdlc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWtzW2JyZWFrSW5kZXhdLm1ldGhvZCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGV2ZW50c1RvVXBzZXJ0LnB1c2goZXZlbnRUb1VwZGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzb3VyY2UgPT09IGdvb2dsZUNhbGVuZGFyUmVzb3VyY2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUsXG4gICAgICAgICAgICAnIHVwZGF0ZWRFdmVudCBpbnNpZGUgZWxzZSBpbnNpZGUgY29uc3QgdXBkYXRlZEV2ZW50IG9mIHVwZGF0ZWRFdmVudHMgaW5zaWRlIHVwZGF0ZUFsbENhbGVuZGFyRXZlbnRzUG9zdFBsYW5uZXInXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoZXZlbnRUb1VwZGF0ZT8ubWV0aG9kID09PSAnY3JlYXRlJykge1xuICAgICAgICAgICAgaWYgKGV2ZW50VG9VcGRhdGU/Lm1lZXRpbmdJZCkge1xuICAgICAgICAgICAgICBjb25zdCBtZWV0aW5nQXNzaXN0ID0gYXdhaXQgZ2V0TWVldGluZ0Fzc2lzdChcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlPy5tZWV0aW5nSWRcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBpZiAobWVldGluZ0Fzc2lzdD8udXNlcklkICE9PSBldmVudFRvVXBkYXRlPy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBldmVudHNUb1JlbW92ZS5wdXNoKGV2ZW50VG9VcGRhdGUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lZXRpbmdBc3Npc3Q/LnVzZXJJZCwgJyBtZWV0aW5nQXNzaXN0Py51c2VySWQnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudFRvVXBkYXRlPy51c2VySWQsICcgZXZlbnRUb1VwZGF0ZT8udXNlcklkJyk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LmlkLFxuICAgICAgICAgICAgICAgICAgJ2V2ZW50IHdpdGggbWVldGluZ0Fzc2lzdCBub3QgaG9zdCBjb250aW51ZSdcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVldGluZ0Fzc2lzdD8udXNlcklkID09PSBldmVudFRvVXBkYXRlPy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICdnZXQgYXR0ZW5kZWVzIGNhbGxlZCBpbnNpZGUgbWV0aG9kIGNyZWF0ZSB1cGRhdGVBbGxDYWxlbmRhckV2ZW50c1Bvc3RQbGFubmVyJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0ZW5kZWVzID1cbiAgICAgICAgICAgICAgICAgIGF3YWl0IGxpc3RNZWV0aW5nQXNzaXN0QXR0ZW5kZWVzR2l2ZW5NZWV0aW5nSWQoXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/Lm1lZXRpbmdJZFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgIGF0dGVuZGVlcyxcbiAgICAgICAgICAgICAgICAgICcgYXR0ZW5kZWVzIGluc2lkZSBtZXRob2QgY3JlYXRlIHVwZGF0ZUFsbENhbGVuZGFyRXZlbnRzUG9zdFBsYW5uZXInXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsZXQgY29uZmVyZW5jZTogQ29uZmVyZW5jZVR5cGUgfCB7fSA9IHt9O1xuXG4gICAgICAgICAgICAgICAgaWYgKG1lZXRpbmdBc3Npc3Q/LmVuYWJsZUNvbmZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBtZWV0aW5nQXNzaXN0Py5lbmFibGVDb25mZXJlbmNlLFxuICAgICAgICAgICAgICAgICAgICAnIG1lZXRpbmdBc3Npc3Q/LmVuYWJsZUNvbmZlcmVuY2UnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY29uc3Qgem9vbVRva2VuID0gYXdhaXQgZ2V0Wm9vbUFQSVRva2VuKFxuICAgICAgICAgICAgICAgICAgICBtZWV0aW5nQXNzaXN0Py51c2VySWRcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIGNvbmZlcmVuY2UgPSB6b29tVG9rZW5cbiAgICAgICAgICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IG1lZXRpbmdBc3Npc3Q/LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFySWQ6IGV2ZW50VG9VcGRhdGU/LmNhbGVuZGFySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHA6ICdnb29nbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRUb1VwZGF0ZT8uc3VtbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiBldmVudFRvVXBkYXRlPy5ub3RlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLmZvcm1hdCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0hvc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29uZmVyZW5jZSwgJyBjb25mZXJlbmNlIGJlZm9yZSBpZiAoem9vbVRva2VuKScpO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoem9vbVRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHpvb21Ub2tlbiwgJyB6b29tVG9rZW4gaW5zaWRlIGlmICh6b29tVG9rZW4pJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhvc3RBdHRlbmRlZSA9IGF0dGVuZGVlcz8uZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAoYSkgPT4gYT8udXNlcklkID09PSBtZWV0aW5nQXNzaXN0Py51c2VySWRcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICBob3N0QXR0ZW5kZWUsXG4gICAgICAgICAgICAgICAgICAgICAgJyBob3N0QXR0ZW5kZWUgaW5zaWRlIGlmICh6b29tVG9rZW4pJ1xuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHpvb21PYmplY3QgPSBhd2FpdCBjcmVhdGVab29tTWVldGluZyhcbiAgICAgICAgICAgICAgICAgICAgICB6b29tVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZT8uc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgIG1lZXRpbmdBc3Npc3Q/LnRpbWV6b25lLFxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LnN1bW1hcnksXG4gICAgICAgICAgICAgICAgICAgICAgbWVldGluZ0Fzc2lzdD8uZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgaG9zdEF0dGVuZGVlPy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3RBdHRlbmRlZT8ucHJpbWFyeUVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlcz8ubWFwKChhKSA9PiBhPy5wcmltYXJ5RW1haWwpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgem9vbU9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAnIHpvb21PYmplY3QgYWZ0ZXIgY3JlYXRlWm9vbU1lZXRpbmcnXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHpvb21PYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25mZXJlbmNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGAke3pvb21PYmplY3Q/LmlkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGV2ZW50VG9VcGRhdGU/LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFySWQ6IGV2ZW50VG9VcGRhdGU/LmNhbGVuZGFySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHA6ICd6b29tJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHpvb21PYmplY3Q/LmFnZW5kYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiB6b29tT2JqZWN0Py5hZ2VuZGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2luVXJsOiB6b29tT2JqZWN0Py5qb2luX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VXJsOiB6b29tT2JqZWN0Py5zdGFydF91cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0hvc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlQb2ludHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5UG9pbnRUeXBlOiAndmlkZW8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB6b29tT2JqZWN0Py5qb2luX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogem9vbU9iamVjdD8ucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiB6b29tT2JqZWN0Py5qb2luX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgfSBhcyBDb25mZXJlbmNlVHlwZTtcblxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VG9GaWx0ZXJGb3JVcGRhdGVDb25mZXJlbmNlcy5wdXNoKGV2ZW50VG9VcGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICBjb25mZXJlbmNlLFxuICAgICAgICAgICAgICAgICAgJyBjb25mZXJlbmNlIGJlZm9yZSBjcmVhdGVQcm9taXNlcyBwb3N0UGxhbm5lck1vZGlmeUV2ZW50SW5DYWxlbmRhcidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1lZXRpbmdBc3Npc3Q/LmxvY2tBZnRlcikge1xuICAgICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5tb2RpZmlhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3JlYXRlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgICAgIHBvc3RQbGFubmVyTW9kaWZ5RXZlbnRJbkNhbGVuZGFyKFxuICAgICAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLFxuICAgICAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgJ2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZXMsXG4gICAgICAgICAgICAgICAgICAgIChjb25mZXJlbmNlIGFzIENvbmZlcmVuY2VUeXBlKT8uaWRcbiAgICAgICAgICAgICAgICAgICAgICA/IChjb25mZXJlbmNlIGFzIENvbmZlcmVuY2VUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICApIGFzIFByb21pc2U8Q3JlYXRlR29vZ2xlRXZlbnRSZXNwb25zZVR5cGU+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmICgoY29uZmVyZW5jZSBhcyBDb25mZXJlbmNlVHlwZSk/LmlkKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbnNlcnRDb25mZXJlbmNlKGNvbmZlcmVuY2UgYXMgQ29uZmVyZW5jZVR5cGUpO1xuICAgICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5jb25mZXJlbmNlSWQgPSAoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZlcmVuY2UgYXMgQ29uZmVyZW5jZVR5cGVcbiAgICAgICAgICAgICAgICAgICk/LmlkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZW1pbmRlcnNPYmplY3RGb3JFdmVudD8ucmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBpbnNlcnRSZW1pbmRlck9iamVjdHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVtaW5kZXJzT2JqZWN0Rm9yRXZlbnQ/LnJlbWluZGVyc1xuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRUb1VwZGF0ZT8ucHJlZmVycmVkVGltZVJhbmdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAuLi5ldmVudFRvVXBkYXRlLnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYXR0ZW5kZWVzVG9CZUluc2VydDogQXR0ZW5kZWVUeXBlW10gPSBhdHRlbmRlZXM/Lm1hcChcbiAgICAgICAgICAgICAgICAgIChhKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBpZDogYT8uaWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogYT8udXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWN0SWQ6IGE/LmNvbnRhY3RJZCxcbiAgICAgICAgICAgICAgICAgICAgZW1haWxzOiBhPy5lbWFpbHMsXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyczogYT8ucGhvbmVOdW1iZXJzLFxuICAgICAgICAgICAgICAgICAgICBpbUFkZHJlc3NlczogYT8uaW1BZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50VG9VcGRhdGU/LmlkLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlOiBkYXlqcygpLmZvcm1hdCgpLFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGluc2VydEF0dGVuZGVlT2JqZWN0cy5wdXNoKC4uLmF0dGVuZGVlc1RvQmVJbnNlcnQpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxBdHRlbmRlZXMgPSBhdHRlbmRlZXM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChhKSA9PiAhIWE/LmV4dGVybmFsQXR0ZW5kZWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmICgoY29uZmVyZW5jZSBhcyBDb25mZXJlbmNlVHlwZSk/LmlkKSB7XG4gICAgICAgICAgICAgICAgICBldmVudHNUb0JlQ3JlYXRlZFdpdGhOZXdJZFxuICAgICAgICAgICAgICAgICAgICA/LmZpbHRlcigoYykgPT4gISFjKVxuICAgICAgICAgICAgICAgICAgICA/LmZvckVhY2goKGMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRlcm5hbEluZGV4ID0gZXh0ZXJuYWxBdHRlbmRlZXM/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy51c2VySWQgPT09IGM/LmV2ZW50Py51c2VySWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgYz8ubWVldGluZ0lkID09PSBtZWV0aW5nQXNzaXN0Py5pZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZXJuYWxJbmRleCA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMuY29uZmVyZW5jZSA9IGNvbmZlcmVuY2UgYXMgQ29uZmVyZW5jZVR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBldmVudHNUb0JlQ3JlYXRlZFdpdGhOZXdJZFxuICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKGMpID0+ICEhYylcbiAgICAgICAgICAgICAgICAgID8uZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRlcm5hbEluZGV4ID0gZXh0ZXJuYWxBdHRlbmRlZXM/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8udXNlcklkID09PSBjPy5ldmVudD8udXNlcklkXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgIGM/Lm1lZXRpbmdJZCA9PT0gbWVldGluZ0Fzc2lzdD8uaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICBleHRlcm5hbEluZGV4ID09PSAtMVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICBjLmF0dGVuZGVlcyA9IGF0dGVuZGVlcztcbiAgICAgICAgICAgICAgICAgICAgICBjLmV2ZW50Lm1ldGhvZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgYy5yZXNvdXJjZSA9IHJlc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgIGMuY2xpZW50VHlwZSA9IGNsaWVudFR5cGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUubWV0aG9kID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb2xkRXZlbnRUb1VwZGF0ZSA9IGZpbHRlcmVkQWxsRXZlbnRzPy5maW5kKFxuICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IGV2ZW50VG9VcGRhdGU/LmlkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIWV2ZW50VG9VcGRhdGU/Lm1vZGlmaWFibGUgJiYgb2xkRXZlbnRUb1VwZGF0ZT8uaWQpIHtcbiAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5zdGFydERhdGUgPSBvbGRFdmVudFRvVXBkYXRlLnN0YXJ0RGF0ZTtcbiAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZS5lbmREYXRlID0gb2xkRXZlbnRUb1VwZGF0ZS5lbmREYXRlO1xuICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnRpbWV6b25lID0gb2xkRXZlbnRUb1VwZGF0ZS50aW1lem9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXBkYXRlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgcG9zdFBsYW5uZXJNb2RpZnlFdmVudEluQ2FsZW5kYXIoXG4gICAgICAgICAgICAgICAgZXZlbnRUb1VwZGF0ZSxcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAndXBkYXRlJyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlLFxuICAgICAgICAgICAgICAgIHJlbWluZGVyc09iamVjdEZvckV2ZW50Py5yZW1pbmRlcnNcbiAgICAgICAgICAgICAgKSBhcyBQcm9taXNlPHN0cmluZz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV2ZW50VG9VcGRhdGUubWV0aG9kID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHJlbWluZGVyc09iamVjdEZvckV2ZW50Py5yZW1pbmRlcnM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc3Qgb2xkUmVtaW5kZXJzID0gYXdhaXQgbGlzdFJlbWluZGVyc0ZvckV2ZW50KFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LmlkLFxuICAgICAgICAgICAgICAgIGV2ZW50VG9VcGRhdGU/LnVzZXJJZFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAob2xkUmVtaW5kZXJzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlUmVtaW5kZXJzLnB1c2goLi4ub2xkUmVtaW5kZXJzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpbnNlcnRSZW1pbmRlck9iamVjdHMucHVzaCguLi5yZW1pbmRlcnNPYmplY3RGb3JFdmVudD8ucmVtaW5kZXJzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgb2xkUHJlZmVycmVkVGltZVJhbmdlcyA9XG4gICAgICAgICAgICAgIGF3YWl0IGxpc3RQcmVmZXJyZWRUaW1lUmFuZ2VzRm9yRXZlbnQoZXZlbnRUb1VwZGF0ZS5pZCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFfLmlzRXF1YWwoXG4gICAgICAgICAgICAgICAgb2xkUHJlZmVycmVkVGltZVJhbmdlcyxcbiAgICAgICAgICAgICAgICBldmVudFRvVXBkYXRlLnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChvbGRQcmVmZXJyZWRUaW1lUmFuZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlUHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cy5wdXNoKC4uLm9sZFByZWZlcnJlZFRpbWVSYW5nZXMpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGV2ZW50VG9VcGRhdGU/LnByZWZlcnJlZFRpbWVSYW5nZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzLnB1c2goXG4gICAgICAgICAgICAgICAgICAuLi5ldmVudFRvVXBkYXRlLnByZWZlcnJlZFRpbWVSYW5nZXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnRzVG9VcHNlcnQucHVzaChldmVudFRvVXBkYXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpZFJlc3BvbnNlQm9kaWVzID0gYXdhaXQgUHJvbWlzZS5hbGwoY3JlYXRlUHJvbWlzZXMpO1xuXG4gICAgY29uc3QgY2xvbmVFdmVudHNUb1Vwc2VydCA9IF8uY2xvbmVEZWVwKGV2ZW50c1RvVXBzZXJ0KTtcblxuICAgIGNvbnN0IGV2ZW50c1RvRWRpdDogRXZlbnRQbHVzVHlwZVtdID0gW107XG5cbiAgICBjb25zdCBpZE1vZGlmaWVkRXZlbnRzVG9VcHNlcnQ6IEV2ZW50UGx1c1R5cGVbXSA9IGV2ZW50c1RvVXBzZXJ0Lm1hcChcbiAgICAgIChlMSkgPT4ge1xuICAgICAgICBjb25zdCBpZFJlc3BvbnNlQm9keSA9IGlkUmVzcG9uc2VCb2RpZXM/LmZpbmQoXG4gICAgICAgICAgKHIpID0+IHIuZ2VuZXJhdGVkSWQgPT09IGUxLmlkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChpZFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICBjb25zdCBnZW5lcmF0ZWRJZEVkaXRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBlMT8uaWRcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgbmV3SWRFZGl0SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gaWRSZXNwb25zZUJvZHk/LmlkXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgZ2VuZXJhdGVkSWRFZGl0SW5kZXgsXG4gICAgICAgICAgICBuZXdJZEVkaXRJbmRleCxcbiAgICAgICAgICAgICcgZ2VuZXJhdGVkSWRFZGl0SW5kZXgsIG5ld0lkRWRpdEluZGV4J1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoZ2VuZXJhdGVkSWRFZGl0SW5kZXggPiAtMSB8fCBuZXdJZEVkaXRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBpZiAoZ2VuZXJhdGVkSWRFZGl0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICBjb25zdCBnZW5JZEVkaXRlZEV2ZW50ID0gZXZlbnRzVG9FZGl0W2dlbmVyYXRlZElkRWRpdEluZGV4XTtcblxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBnZW5JZEVkaXRlZEV2ZW50LFxuICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LFxuICAgICAgICAgICAgICAgICcgZ2VuSWRFZGl0ZWRFdmVudCwgaWRSZXNwb25zZUJvZHkgaW5zaWRlIGdlbmVyYXRlZElkRWRpdEluZGV4ID4gLTEnXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgZ2VuSWRFZGl0ZWRFdmVudC5pZCA9IGlkUmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgZ2VuSWRFZGl0ZWRFdmVudC5ldmVudElkID0gaWRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG5cbiAgICAgICAgICAgICAgaWYgKGdlbklkRWRpdGVkRXZlbnQ/LnByZUV2ZW50SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgIGdlbklkRWRpdGVkRXZlbnQ/LnByZUV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAnIGdlbklkRWRpdGVkRXZlbnQ/LnByZUV2ZW50SWQnXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lUHJlRXZlbnQgPSBjbG9uZUV2ZW50c1RvVXBzZXJ0LmZpbmQoXG4gICAgICAgICAgICAgICAgICAoZTIpID0+IGUyLmlkID09PSBnZW5JZEVkaXRlZEV2ZW50LnByZUV2ZW50SWRcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNsb25lUHJlRXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVQcmVFdmVudD8uaWQsXG4gICAgICAgICAgICAgICAgICAgICcgY2xvbmVQcmVFdmVudD8uaWQgaW5zaWRlIGdlbklkRWRpdGVkRXZlbnQ/LnByZUV2ZW50SWQgaW5zaWRlIGdlbmVyYXRlZElkRWRpdEluZGV4ID4gLTEnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY2xvbmVQcmVFdmVudC5mb3JFdmVudElkID0gaWRSZXNwb25zZUJvZHkuaWQ7XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkT2ZQcmVFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gZ2VuSWRFZGl0ZWRFdmVudC5wcmVFdmVudElkXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZlByZUV2ZW50UmVzcG9uc2VCb2R5ID0gaWRSZXNwb25zZUJvZGllcz8uZmluZChcbiAgICAgICAgICAgICAgICAgICAgKGMpID0+IGM/LmdlbmVyYXRlZElkID09PSBnZW5JZEVkaXRlZEV2ZW50LnByZUV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChuZXdJZE9mUHJlRXZlbnRSZXNwb25zZUJvZHk/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lUHJlRXZlbnQuaWQgPSBuZXdJZE9mUHJlRXZlbnRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZVByZUV2ZW50LmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQcmVFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mUHJlRXZlbnRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gbmV3SWRPZlByZUV2ZW50UmVzcG9uc2VCb2R5Py5pZFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW5JZE9mUHJlRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5JZE9mUHJlRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgaW5zaWRlIGdlbklkT2ZQcmVFdmVudEluZGV4ID4gLTEgJ1xuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZQcmVFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mUHJlRXZlbnRJbmRleF0uaWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZlByZUV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZlByZUV2ZW50SW5kZXhdLmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZlByZUV2ZW50UmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0lkT2ZQcmVFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQcmVFdmVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJyBuZXdJZE9mUHJlRXZlbnRJbmRleCA+IC0xJ1xuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W25ld0lkT2ZQcmVFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGNsb25lUHJlRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGdlbklkRWRpdGVkRXZlbnQ/LnBvc3RFdmVudElkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICBnZW5JZEVkaXRlZEV2ZW50Py5wb3N0RXZlbnRJZCxcbiAgICAgICAgICAgICAgICAgICcgZ2VuSWRFZGl0ZWRFdmVudD8ucG9zdEV2ZW50SWQnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZVBvc3RFdmVudCA9IGNsb25lRXZlbnRzVG9VcHNlcnQuZmluZChcbiAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IGdlbklkRWRpdGVkRXZlbnQucG9zdEV2ZW50SWRcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNsb25lUG9zdEV2ZW50Py5pZCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2xvbmVQb3N0RXZlbnQ/LmlkLCAnIGNsb25lUG9zdEV2ZW50Py5pZCcpO1xuICAgICAgICAgICAgICAgICAgY2xvbmVQb3N0RXZlbnQuZm9yRXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5LmlkO1xuXG4gICAgICAgICAgICAgICAgICBjb25zdCBnZW5JZE9mUG9zdEV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBnZW5JZEVkaXRlZEV2ZW50LnBvc3RFdmVudElkXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZlBvc3RFdmVudFJlc3BvbnNlQm9keSA9IGlkUmVzcG9uc2VCb2RpZXM/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIChjKSA9PiBjPy5nZW5lcmF0ZWRJZCA9PT0gZ2VuSWRFZGl0ZWRFdmVudC5wb3N0RXZlbnRJZFxuICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKG5ld0lkT2ZQb3N0RXZlbnRSZXNwb25zZUJvZHk/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lUG9zdEV2ZW50LmlkID0gbmV3SWRPZlBvc3RFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lUG9zdEV2ZW50LmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQb3N0RXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZlBvc3RFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgKGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBlPy5pZCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIGAke25ld0lkT2ZQb3N0RXZlbnRSZXNwb25zZUJvZHl9IyR7Y2xvbmVQb3N0RXZlbnQuY2FsZW5kYXJJZH1gXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlbklkT2ZQb3N0RXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5JZE9mUG9zdEV2ZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGdlbklkT2ZQb3N0RXZlbnRJbmRleCA+IC0xJ1xuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZQb3N0RXZlbnRJbmRleF0uZm9yRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZlBvc3RFdmVudEluZGV4XS5pZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mUG9zdEV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZlBvc3RFdmVudEluZGV4XS5ldmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQb3N0RXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3SWRPZlBvc3RFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQb3N0RXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgbmV3SWRPZlBvc3RFdmVudEluZGV4ID4gLTEnXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbbmV3SWRPZlBvc3RFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGNsb25lUG9zdEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChnZW5JZEVkaXRlZEV2ZW50Py5mb3JFdmVudElkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlbklkRWRpdGVkRXZlbnQ/LmlzUHJlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBnZW5JZEVkaXRlZEV2ZW50Py5pc1ByZUV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAnIGdlbklkRWRpdGVkRXZlbnQ/LmlzUHJlRXZlbnQgaW5zaWRlIGdlbklkRWRpdGVkRXZlbnQ/LmZvckV2ZW50SWQnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY29uc3QgZm9yRXZlbnQgPSBjbG9uZUV2ZW50c1RvVXBzZXJ0LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IGdlbklkRWRpdGVkRXZlbnQuZm9yRXZlbnRJZFxuICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKGZvckV2ZW50Py5pZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICBmb3JFdmVudD8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgJyBmb3JFdmVudD8uaWQgaW5zaWRlIGdlbklkRWRpdGVkRXZlbnQ/LmZvckV2ZW50SWQnXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGZvckV2ZW50LnByZUV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2VuSWRPZkZvckV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IGZvckV2ZW50Py5pZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgIChjKSA9PiBjPy5nZW5lcmF0ZWRJZCA9PT0gZm9yRXZlbnQ/LmlkXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBmb3JFdmVudC5pZCA9IG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yRXZlbnQuZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mRm9yRXZlbnRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkXG4gICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5JZE9mRm9yRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuSWRPZkZvckV2ZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgZ2VuSWRPZkZvckV2ZW50SW5kZXggPiAtMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLnByZUV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mRm9yRXZlbnRJbmRleF0uaWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZGb3JFdmVudEluZGV4XS5ldmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3SWRPZkZvckV2ZW50SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZGb3JFdmVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIG5ld0lkT2ZFdmVudEluZGV4ID4gLTEnXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W25ld0lkT2ZGb3JFdmVudEluZGV4XS5wcmVFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRSZXNwb25zZUJvZHkuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGZvckV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdlbklkRWRpdGVkRXZlbnQ/LmlzUG9zdEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgZ2VuSWRFZGl0ZWRFdmVudD8uaXNQb3N0RXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICcgZ2VuSWRFZGl0ZWRFdmVudD8uaXNQb3N0RXZlbnQnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY29uc3QgZm9yRXZlbnQgPSBjbG9uZUV2ZW50c1RvVXBzZXJ0LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IGdlbklkRWRpdGVkRXZlbnQuZm9yRXZlbnRJZFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIGlmIChmb3JFdmVudD8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZm9yRXZlbnQ/LmlkLCAnIGZvckV2ZW50Py5pZCcpO1xuICAgICAgICAgICAgICAgICAgICBmb3JFdmVudC5wb3N0RXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5JZE9mRm9yRXZlbnRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gZm9yRXZlbnQ/LmlkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keSA9IGlkUmVzcG9uc2VCb2RpZXM/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgKGMpID0+IGM/LmdlbmVyYXRlZElkID09PSBmb3JFdmVudD8uaWRcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkT2ZGb3JFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGdlbklkT2ZGb3JFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5JZE9mRm9yRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyBnZW5JZE9mRm9yRXZlbnRJbmRleCA+IC0xIGluc2lkZSBnZW5JZEVkaXRlZEV2ZW50Py5pc1Bvc3RFdmVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLnBvc3RFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRSZXNwb25zZUJvZHkuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLmlkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mRm9yRXZlbnRJbmRleF0uZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0lkT2ZGb3JFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mRm9yRXZlbnRJbmRleCA+IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIG5ld0lkT2ZGb3JFdmVudEluZGV4ID4gLTEgaW5zaWRlIGdlbklkRWRpdGVkRXZlbnQ/LmlzUG9zdEV2ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtuZXdJZE9mRm9yRXZlbnRJbmRleF0ucG9zdEV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0LnB1c2goZm9yRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcHQgb2YgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cykge1xuICAgICAgICAgICAgICAgIGlmIChwdD8uZXZlbnRJZCA9PT0gZTEuaWQpIHtcbiAgICAgICAgICAgICAgICAgIHB0LmV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGluc2VydFJlbWluZGVyT2JqZWN0cykge1xuICAgICAgICAgICAgICAgIGlmIChyPy5ldmVudElkID09PSBlMS5pZCkge1xuICAgICAgICAgICAgICAgICAgci5ldmVudElkID0gaWRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgYSBvZiBpbnNlcnRBdHRlbmRlZU9iamVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYT8uZXZlbnRJZCA9PT0gZTEuaWQpIHtcbiAgICAgICAgICAgICAgICAgIGEuZXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZTE/Lm1lZXRpbmdJZCkge1xuICAgICAgICAgICAgICAgIGV2ZW50c1RvQmVDcmVhdGVkV2l0aE5ld0lkXG4gICAgICAgICAgICAgICAgICA/LmZpbHRlcigoYykgPT4gYz8ubWVldGluZ0lkID09PSBlMT8ubWVldGluZ0lkKVxuICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKGMpID0+ICEhYz8uZXZlbnQ/LmlkKVxuICAgICAgICAgICAgICAgICAgPy5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgIGMuZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgaWRSZXNwb25zZUJvZHksXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuSWRFZGl0ZWRFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAnIGMuZXZlbnQsIGNyZWF0ZWRFdmVudCwgZWRpdGVkRXZlbnQgaW5zaWRlIGVkaXRlZEV2ZW50IGluc2lkZSBnZW5lcmF0ZWRFdmVudHNUb0VkaXRJbmRleCdcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYy5ldmVudC5pZCA9IGAke2lkUmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkfSMke2MuZXZlbnQuY2FsZW5kYXJJZH1gO1xuICAgICAgICAgICAgICAgICAgICBjLmV2ZW50LmV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0lkRWRpdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3SWRXaXRoRWRpdGVkRXZlbnQgPSBldmVudHNUb0VkaXRbbmV3SWRFZGl0SW5kZXhdO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdJZFdpdGhFZGl0ZWRFdmVudCwgJyBuZXdJZFdpdGhFZGl0ZWRFdmVudCcpO1xuXG4gICAgICAgICAgICAgIGlmIChuZXdJZFdpdGhFZGl0ZWRFdmVudD8ucHJlRXZlbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgbmV3SWRXaXRoRWRpdGVkRXZlbnQ/LnByZUV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAnIG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5wcmVFdmVudElkJ1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZVByZUV2ZW50ID0gY2xvbmVFdmVudHNUb1Vwc2VydC5maW5kKFxuICAgICAgICAgICAgICAgICAgKGUyKSA9PiBlMi5pZCA9PT0gbmV3SWRXaXRoRWRpdGVkRXZlbnQucHJlRXZlbnRJZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VuSWRPck5ld0lkV2l0aFByZUV2ZW50RWRpdGVkRXZlbnQgPSBldmVudHNUb0VkaXQ/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAoZTMpID0+IGUzLmlkID09PSBuZXdJZFdpdGhFZGl0ZWRFdmVudD8ucHJlRXZlbnRJZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2VuSWRPck5ld0lkV2l0aFByZUV2ZW50RWRpdGVkRXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgZ2VuSWRPck5ld0lkV2l0aFByZUV2ZW50RWRpdGVkRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICcgZ2VuSWRPck5ld0lkV2l0aFByZUV2ZW50RWRpdGVkRXZlbnQgaW5zaWRlIG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5wcmVFdmVudElkIGluc2lkZSBuZXdJZFdpdGhFZGl0ZWRFdmVudCdcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIGdlbklkT3JOZXdJZFdpdGhQcmVFdmVudEVkaXRlZEV2ZW50LmZvckV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcblxuICAgICAgICAgICAgICAgICAgY29uc3QgcHJlRXZlbnRXaXRoTmV3SWRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoaSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBpLmdlbmVyYXRlZElkID09PSBnZW5JZE9yTmV3SWRXaXRoUHJlRXZlbnRFZGl0ZWRFdmVudD8uaWRcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChwcmVFdmVudFdpdGhOZXdJZFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuSWRPck5ld0lkV2l0aFByZUV2ZW50RWRpdGVkRXZlbnQuaWQgPVxuICAgICAgICAgICAgICAgICAgICAgIHByZUV2ZW50V2l0aE5ld0lkUmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgZ2VuSWRPck5ld0lkV2l0aFByZUV2ZW50RWRpdGVkRXZlbnQuZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgcHJlRXZlbnRXaXRoTmV3SWRSZXNwb25zZUJvZHkuZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2xvbmVQcmVFdmVudD8uaWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBjbG9uZVByZUV2ZW50Py5pZCxcbiAgICAgICAgICAgICAgICAgICAgJyBjbG9uZVByZUV2ZW50Py5pZCBpbnNpZGUgbmV3SWRXaXRoRWRpdGVkRXZlbnQ/LnByZUV2ZW50SWQnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY2xvbmVQcmVFdmVudC5mb3JFdmVudElkID0gaWRSZXNwb25zZUJvZHkuaWQ7XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkV2l0aFByZUV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBuZXdJZFdpdGhFZGl0ZWRFdmVudC5wcmVFdmVudElkXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRXaXRoUHJlRXZlbnRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoYykgPT4gYz8uZ2VuZXJhdGVkSWQgPT09IG5ld0lkV2l0aEVkaXRlZEV2ZW50LnByZUV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChuZXdJZFdpdGhQcmVFdmVudFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVQcmVFdmVudC5pZCA9IG5ld0lkV2l0aFByZUV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVQcmVFdmVudC5ldmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICBuZXdJZFdpdGhQcmVFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZFdpdGhQcmVFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBuZXdJZFdpdGhQcmVFdmVudFJlc3BvbnNlQm9keT8uaWRcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VuSWRXaXRoUHJlRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5JZFdpdGhQcmVFdmVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJyBnZW5JZFdpdGhQcmVFdmVudEluZGV4ID4gLTEgaW5zaWRlIGNsb25lUHJlRXZlbnQ/LmlkIGluc2lkZSBuZXdJZFdpdGhFZGl0ZWRFdmVudD8ucHJlRXZlbnRJZCdcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZFdpdGhQcmVFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZFdpdGhQcmVFdmVudEluZGV4XS5pZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJZFdpdGhQcmVFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkV2l0aFByZUV2ZW50SW5kZXhdLmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRXaXRoUHJlRXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3SWRXaXRoUHJlRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJZFdpdGhQcmVFdmVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJyBuZXdJZFdpdGhQcmVFdmVudEluZGV4ID4gLTEgaW5zaWRlIGNsb25lUHJlRXZlbnQ/LmlkIGluc2lkZSBuZXdJZFdpdGhFZGl0ZWRFdmVudD8ucHJlRXZlbnRJZCdcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtuZXdJZFdpdGhQcmVFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGNsb25lUHJlRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5wb3N0RXZlbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lUG9zdEV2ZW50ID0gY2xvbmVFdmVudHNUb1Vwc2VydD8uZmluZChcbiAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IG5ld0lkV2l0aEVkaXRlZEV2ZW50LnBvc3RFdmVudElkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkT3JOZXdJZFdpdGhQb3N0RXZlbnRFZGl0ZWRFdmVudCA9IGV2ZW50c1RvRWRpdD8uZmluZChcbiAgICAgICAgICAgICAgICAgIChlMykgPT4gZTMuaWQgPT09IG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5wb3N0RXZlbnRJZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2VuSWRPck5ld0lkV2l0aFBvc3RFdmVudEVkaXRlZEV2ZW50Py5pZCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIGdlbklkT3JOZXdJZFdpdGhQb3N0RXZlbnRFZGl0ZWRFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgJyBnZW5JZE9yTmV3SWRXaXRoUG9zdEV2ZW50RWRpdGVkRXZlbnQgaW5zaWRlIG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5wb3N0RXZlbnRJZCBpbnNpZGUgbmV3SWRXaXRoRWRpdGVkRXZlbnQnXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICBnZW5JZE9yTmV3SWRXaXRoUG9zdEV2ZW50RWRpdGVkRXZlbnQuZm9yRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuXG4gICAgICAgICAgICAgICAgICBjb25zdCBwb3N0RXZlbnRXaXRoTmV3SWRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoaSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBpLmdlbmVyYXRlZElkID09PSBnZW5JZE9yTmV3SWRXaXRoUG9zdEV2ZW50RWRpdGVkRXZlbnQ/LmlkXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICBpZiAocG9zdEV2ZW50V2l0aE5ld0lkUmVzcG9uc2VCb2R5Py5pZCkge1xuICAgICAgICAgICAgICAgICAgICBnZW5JZE9yTmV3SWRXaXRoUG9zdEV2ZW50RWRpdGVkRXZlbnQuaWQgPVxuICAgICAgICAgICAgICAgICAgICAgIHBvc3RFdmVudFdpdGhOZXdJZFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGdlbklkT3JOZXdJZFdpdGhQb3N0RXZlbnRFZGl0ZWRFdmVudC5ldmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICBwb3N0RXZlbnRXaXRoTmV3SWRSZXNwb25zZUJvZHkuZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2xvbmVQb3N0RXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgICBjbG9uZVBvc3RFdmVudC5mb3JFdmVudElkID0gbmV3SWRXaXRoRWRpdGVkRXZlbnQuaWQ7XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkV2l0aFBvc3RFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gbmV3SWRXaXRoRWRpdGVkRXZlbnQucG9zdEV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZFdpdGhQb3N0RXZlbnRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoYykgPT4gYz8uZ2VuZXJhdGVkSWQgPT09IG5ld0lkV2l0aEVkaXRlZEV2ZW50LnBvc3RFdmVudElkXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICBpZiAobmV3SWRXaXRoUG9zdEV2ZW50UmVzcG9uc2VCb2R5Py5pZCkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZVBvc3RFdmVudC5pZCA9IG5ld0lkV2l0aFBvc3RFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lUG9zdEV2ZW50LmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgIG5ld0lkV2l0aFBvc3RFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudHNUb0VkaXRQb3N0RXZlbnRXaXRoQ3JlYXRlSWRJbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZT8uaWQgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke25ld0lkV2l0aFBvc3RFdmVudFJlc3BvbnNlQm9keX0jJHtjbG9uZVBvc3RFdmVudC5jYWxlbmRhcklkfWBcbiAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW5JZFdpdGhQb3N0RXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkV2l0aFBvc3RFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkV2l0aEVkaXRlZEV2ZW50LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZFdpdGhQb3N0RXZlbnRJbmRleF0uaWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRXaXRoUG9zdEV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRXaXRoUG9zdEV2ZW50SW5kZXhdLmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRXaXRoUG9zdEV2ZW50UmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1RvRWRpdFBvc3RFdmVudFdpdGhDcmVhdGVJZEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRQb3N0RXZlbnRXaXRoQ3JlYXRlSWRJbmRleFxuICAgICAgICAgICAgICAgICAgICAgIF0uZm9yRXZlbnRJZCA9IG5ld0lkV2l0aEVkaXRlZEV2ZW50LmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGNsb25lUG9zdEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChuZXdJZFdpdGhFZGl0ZWRFdmVudD8uZm9yRXZlbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgbmV3SWRXaXRoRWRpdGVkRXZlbnQ/LmZvckV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAnIG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5mb3JFdmVudElkJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5pc1ByZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgbmV3SWRXaXRoRWRpdGVkRXZlbnQ/LmlzUHJlRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICcgbmV3SWRXaXRoRWRpdGVkRXZlbnQ/LmlzUHJlRXZlbnQgaW5zaWRlIG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5mb3JFdmVudElkJ1xuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZvckV2ZW50ID0gY2xvbmVFdmVudHNUb1Vwc2VydC5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoZTIpID0+IGUyLmlkID09PSBuZXdJZFdpdGhFZGl0ZWRFdmVudC5mb3JFdmVudElkXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoZm9yRXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvckV2ZW50Py5pZCwgJyBmb3JFdmVudD8uaWQnKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3JFdmVudC5wcmVFdmVudElkID0gbmV3SWRXaXRoRWRpdGVkRXZlbnQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkT2ZGb3JFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBmb3JFdmVudD8uaWRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5ID0gaWRSZXNwb25zZUJvZGllcz8uZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAoYykgPT4gYz8uZ2VuZXJhdGVkSWQgPT09IGZvckV2ZW50Py5pZFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yRXZlbnQuaWQgPSBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIGZvckV2ZW50LmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZkZvckV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGdlbklkT2ZGb3JFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5JZE9mRm9yRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyBnZW5JZE9mRm9yRXZlbnRJbmRleCA+IC0xJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mRm9yRXZlbnRJbmRleF0ucHJlRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZGb3JFdmVudEluZGV4XS5pZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdJZE9mRm9yRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgbmV3SWRPZkZvckV2ZW50SW5kZXggPiAtMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbbmV3SWRPZkZvckV2ZW50SW5kZXhdLnByZUV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0LnB1c2goZm9yRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3SWRXaXRoRWRpdGVkRXZlbnQ/LmlzUG9zdEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmb3JFdmVudCA9IGNsb25lRXZlbnRzVG9VcHNlcnQ/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IG5ld0lkV2l0aEVkaXRlZEV2ZW50LmZvckV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBpZiAoZm9yRXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgIGZvckV2ZW50Py5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAnIGZvckV2ZW50Py5pZCBpbnNpZGUgbmV3SWRXaXRoRWRpdGVkRXZlbnQ/LmlzUG9zdEV2ZW50J1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBmb3JFdmVudC5wb3N0RXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5JZE9mRm9yRXZlbnRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gZm9yRXZlbnQ/LmlkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keSA9IGlkUmVzcG9uc2VCb2RpZXM/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgKGMpID0+IGM/LmdlbmVyYXRlZElkID09PSBmb3JFdmVudD8uaWRcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkT2ZGb3JFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGdlbklkT2ZGb3JFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5JZE9mRm9yRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyBnZW5JZE9mRm9yRXZlbnRJbmRleCA+IC0xIGluc2lkZSBmb3JFdmVudD8uaWQgaW5zaWRlIG5ld0lkV2l0aEVkaXRlZEV2ZW50Py5pc1Bvc3RFdmVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLnBvc3RFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRSZXNwb25zZUJvZHkuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLmlkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mRm9yRXZlbnRJbmRleF0uZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0lkT2ZGb3JFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtuZXdJZE9mRm9yRXZlbnRJbmRleF0ucG9zdEV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0LnB1c2goZm9yRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGluc2VydFByZWZlcnJlZFRpbWVSYW5nZU9iamVjdHM/LmZvckVhY2goKHB0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHB0Py5ldmVudElkID09PSBlMS5pZCkge1xuICAgICAgICAgICAgICAgICAgcHQuZXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGluc2VydFJlbWluZGVyT2JqZWN0cz8uZm9yRWFjaCgocikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyPy5ldmVudElkID09PSBlMS5pZCkge1xuICAgICAgICAgICAgICAgICAgci5ldmVudElkID0gaWRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKGUxPy5tZWV0aW5nSWQpIHtcbiAgICAgICAgICAgICAgICBldmVudHNUb0JlQ3JlYXRlZFdpdGhOZXdJZFxuICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKGMpID0+IGM/Lm1lZXRpbmdJZCA9PT0gZTE/Lm1lZXRpbmdJZClcbiAgICAgICAgICAgICAgICAgID8uZmlsdGVyKChjKSA9PiAhIWM/LmV2ZW50Py5pZClcbiAgICAgICAgICAgICAgICAgID8uZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICBjLmV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LFxuICAgICAgICAgICAgICAgICAgICAgIG5ld0lkV2l0aEVkaXRlZEV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICcgYy5ldmVudCwgY3JlYXRlZEV2ZW50LCBjcmVhdGVkQW5kRWRpdGVkRXZlbnQsIGluc2lkZSBmb3JFYWNoIGluc2lkZSBjcmVhdGVkRXZlbnRUb0VkaXRJbmRleCdcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYy5ldmVudC5pZCA9IGAke2lkUmVzcG9uc2VCb2R5Lmdvb2dsZUV2ZW50SWR9IyR7Yz8uZXZlbnQ/LmNhbGVuZGFySWR9YDtcbiAgICAgICAgICAgICAgICAgICAgYy5ldmVudC5ldmVudElkID0gaWRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjbG9uZUV2ZW50ID0gY2xvbmVFdmVudHNUb1Vwc2VydD8uZmluZChcbiAgICAgICAgICAgICAgKGUyKSA9PiBlMj8uaWQgPT09IGUxPy5pZFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGNsb25lRXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgIGNsb25lRXZlbnQuaWQgPSBpZFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgIGNsb25lRXZlbnQuZXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuXG4gICAgICAgICAgICAgIGlmIChjbG9uZUV2ZW50Py5wcmVFdmVudElkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICBjbG9uZUV2ZW50Py5wcmVFdmVudElkLFxuICAgICAgICAgICAgICAgICAgJyBjbG9uZUV2ZW50Py5wcmVFdmVudElkIGluc2lkZSBlbHNlJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVQcmVFdmVudCA9IGNsb25lRXZlbnRzVG9VcHNlcnQuZmluZChcbiAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IGNsb25lRXZlbnQucHJlRXZlbnRJZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2xvbmVQcmVFdmVudD8uaWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBjbG9uZVByZUV2ZW50Py5pZCxcbiAgICAgICAgICAgICAgICAgICAgJyBjbG9uZVByZUV2ZW50Py5pZCBpbnNpZGUgY2xvbmVFdmVudD8ucHJlRXZlbnRJZCBpbnNpZGUgZWxzZSdcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjbG9uZVByZUV2ZW50LmZvckV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keS5pZDtcblxuICAgICAgICAgICAgICAgICAgY29uc3QgZ2VuSWRPZlByZUV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBjbG9uZUV2ZW50LnByZUV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mUHJlRXZlbnRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoYykgPT4gYz8uZ2VuZXJhdGVkSWQgPT09IGNsb25lRXZlbnQucHJlRXZlbnRJZFxuICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKG5ld0lkT2ZQcmVFdmVudFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVQcmVFdmVudC5pZCA9IG5ld0lkT2ZQcmVFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lUHJlRXZlbnQuZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZlByZUV2ZW50UmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkT2ZQcmVFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBuZXdJZE9mUHJlRXZlbnRSZXNwb25zZUJvZHk/LmlkXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlbklkT2ZQcmVFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbklkT2ZQcmVFdmVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJyBpbnNpZGUgZ2VuSWRPZlByZUV2ZW50SW5kZXggPiAtMSBjbG9uZVByZUV2ZW50Py5pZCBpbnNpZGUgY2xvbmVFdmVudD8ucHJlRXZlbnRJZCBpbnNpZGUgZWxzZSdcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mUHJlRXZlbnRJbmRleF0uZm9yRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZlByZUV2ZW50SW5kZXhdLmlkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQcmVFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZQcmVFdmVudEluZGV4XS5ldmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQcmVFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdJZE9mUHJlRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mUHJlRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgbmV3SWRPZlByZUV2ZW50SW5kZXggPiAtMSBpbnNpZGUgZ2VuSWRPZlByZUV2ZW50SW5kZXggPiAtMSBjbG9uZVByZUV2ZW50Py5pZCBpbnNpZGUgY2xvbmVFdmVudD8ucHJlRXZlbnRJZCBpbnNpZGUgZWxzZSdcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtuZXdJZE9mUHJlRXZlbnRJbmRleF0uZm9yRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXQucHVzaChjbG9uZVByZUV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChjbG9uZUV2ZW50Py5wb3N0RXZlbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgY2xvbmVFdmVudD8ucG9zdEV2ZW50SWQsXG4gICAgICAgICAgICAgICAgICAnIGNsb25lRXZlbnQ/LnBvc3RFdmVudElkJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVQb3N0RXZlbnQgPSBjbG9uZUV2ZW50c1RvVXBzZXJ0Py5maW5kKFxuICAgICAgICAgICAgICAgICAgKGUyKSA9PiBlMi5pZCA9PT0gY2xvbmVFdmVudC5wb3N0RXZlbnRJZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2xvbmVQb3N0RXZlbnQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjbG9uZVBvc3RFdmVudD8uaWQsICcgY2xvbmVQb3N0RXZlbnQ/LmlkJyk7XG4gICAgICAgICAgICAgICAgICBjbG9uZVBvc3RFdmVudC5mb3JFdmVudElkID0gaWRSZXNwb25zZUJvZHkuaWQ7XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkT2ZQb3N0RXZlbnRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IGNsb25lRXZlbnQucG9zdEV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mUG9zdEV2ZW50UmVzcG9uc2VCb2R5ID0gaWRSZXNwb25zZUJvZGllcz8uZmluZChcbiAgICAgICAgICAgICAgICAgICAgKGMpID0+IGM/LmdlbmVyYXRlZElkID09PSBjbG9uZUV2ZW50LnBvc3RFdmVudElkXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICBpZiAobmV3SWRPZlBvc3RFdmVudFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVQb3N0RXZlbnQuaWQgPSBuZXdJZE9mUG9zdEV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVQb3N0RXZlbnQuZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZlBvc3RFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mUG9zdEV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IG5ld0lkT2ZQb3N0RXZlbnRSZXNwb25zZUJvZHk/LmlkXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlbklkT2ZQb3N0RXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5JZE9mUG9zdEV2ZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGdlbklkT2ZQb3N0RXZlbnRJbmRleCA+IC0xJ1xuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZQb3N0RXZlbnRJbmRleF0uZm9yRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZlBvc3RFdmVudEluZGV4XS5pZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mUG9zdEV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZlBvc3RFdmVudEluZGV4XS5ldmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQb3N0RXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3SWRPZlBvc3RFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZQb3N0RXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgbmV3SWRPZlBvc3RFdmVudEluZGV4ID4gLTEnXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbbmV3SWRPZlBvc3RFdmVudEluZGV4XS5mb3JFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGNsb25lUG9zdEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGV2ZW50c1RvRWRpdC5wdXNoKGNsb25lRXZlbnQpO1xuXG4gICAgICAgICAgICAgIGlmIChlMT8uZm9yRXZlbnRJZCkge1xuICAgICAgICAgICAgICAgIGlmIChlMT8uaXNQcmVFdmVudCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIGUxPy5pc1ByZUV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAnIGUxPy5pc1ByZUV2ZW50IGluc2lkZSBlMT8uZm9yRXZlbnRJZCdcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmb3JFdmVudCA9IGNsb25lRXZlbnRzVG9VcHNlcnQ/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIChlMikgPT4gZTIuaWQgPT09IGUxLmZvckV2ZW50SWRcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChmb3JFdmVudD8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgZm9yRXZlbnQ/LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICcgZm9yRXZlbnQ/LmlkIGluc2lkZSBnZW5JZEVkaXRlZEV2ZW50Py5mb3JFdmVudElkJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBmb3JFdmVudC5wcmVFdmVudElkID0gaWRSZXNwb25zZUJvZHkuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbklkT2ZGb3JFdmVudEluZGV4ID0gZXZlbnRzVG9FZGl0Py5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBmb3JFdmVudD8uaWRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5ID0gaWRSZXNwb25zZUJvZGllcz8uZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAoYykgPT4gYz8uZ2VuZXJhdGVkSWQgPT09IGZvckV2ZW50Py5pZFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yRXZlbnQuaWQgPSBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIGZvckV2ZW50LmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5nb29nbGVFdmVudElkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRPZkZvckV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAgIChlKSA9PiBlPy5pZCA9PT0gbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VuSWRPZkZvckV2ZW50SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdlbklkT2ZGb3JFdmVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIGdlbklkT2ZGb3JFdmVudEluZGV4ID4gLTEnXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZGb3JFdmVudEluZGV4XS5wcmVFdmVudElkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRSZXNwb25zZUJvZHkuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLmlkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50UmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtnZW5JZE9mRm9yRXZlbnRJbmRleF0uZXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0lkT2ZGb3JFdmVudEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mRm9yRXZlbnRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyBuZXdJZE9mRm9yRXZlbnRJbmRleCA+IC0xJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1RvRWRpdFtuZXdJZE9mRm9yRXZlbnRJbmRleF0ucHJlRXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXQucHVzaChmb3JFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlMT8uaXNQb3N0RXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUxPy5pc1Bvc3RFdmVudCwgJyBlMT8uaXNQb3N0RXZlbnQnKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZvckV2ZW50ID0gY2xvbmVFdmVudHNUb1Vwc2VydD8uZmluZChcbiAgICAgICAgICAgICAgICAgICAgKGUyKSA9PiBlMi5pZCA9PT0gZTEuZm9yRXZlbnRJZFxuICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKGZvckV2ZW50Py5pZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICBmb3JFdmVudD8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgJyBmb3JFdmVudD8uaWQgaW5zaWRlIGUxPy5pc1Bvc3RFdmVudCdcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yRXZlbnQucG9zdEV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keS5pZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2VuSWRPZkZvckV2ZW50SW5kZXggPSBldmVudHNUb0VkaXQ/LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZT8uaWQgPT09IGZvckV2ZW50Py5pZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgIChjKSA9PiBjPy5nZW5lcmF0ZWRJZCA9PT0gZm9yRXZlbnQ/LmlkXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZE9mRm9yRXZlbnRJbmRleCA9IGV2ZW50c1RvRWRpdD8uZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgICAgICAgKGUpID0+IGU/LmlkID09PSBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/LmlkXG4gICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5JZE9mRm9yRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuSWRPZkZvckV2ZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgZ2VuSWRPZkZvckV2ZW50SW5kZXggPiAtMSBpbnNpZGUgZTE/LmlzUG9zdEV2ZW50IGluc2lkZSBlMT8uaXNQb3N0RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZGb3JFdmVudEluZGV4XS5wb3N0RXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W2dlbklkT2ZGb3JFdmVudEluZGV4XS5pZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkT2ZGb3JFdmVudFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXRbZ2VuSWRPZkZvckV2ZW50SW5kZXhdLmV2ZW50SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJZE9mRm9yRXZlbnRSZXNwb25zZUJvZHk/Lmdvb2dsZUV2ZW50SWQ7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdJZE9mRm9yRXZlbnRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWRPZkZvckV2ZW50SW5kZXggPiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyBuZXdJZE9mRm9yRXZlbnRJbmRleCA+IC0xIGluc2lkZSBlMT8uaXNQb3N0RXZlbnQgaW5zaWRlIGluc2lkZSBlMT8uaXNQb3N0RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzVG9FZGl0W25ld0lkT2ZGb3JFdmVudEluZGV4XS5wb3N0RXZlbnRJZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkUmVzcG9uc2VCb2R5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNUb0VkaXQucHVzaChmb3JFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cz8uZm9yRWFjaCgocHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHQ/LmV2ZW50SWQgPT09IGUxLmlkKSB7XG4gICAgICAgICAgICAgICAgICBwdC5ldmVudElkID0gaWRSZXNwb25zZUJvZHk/LmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaW5zZXJ0UmVtaW5kZXJPYmplY3RzPy5mb3JFYWNoKChyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHI/LmV2ZW50SWQgPT09IGUxLmlkKSB7XG4gICAgICAgICAgICAgICAgICByLmV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoZTE/Lm1lZXRpbmdJZCkge1xuICAgICAgICAgICAgICAgIGV2ZW50c1RvQmVDcmVhdGVkV2l0aE5ld0lkXG4gICAgICAgICAgICAgICAgICA/LmZpbHRlcigoYykgPT4gYz8ubWVldGluZ0lkID09PSBlMT8ubWVldGluZ0lkKVxuICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKGMpID0+ICEhYz8uZXZlbnQ/LmlkKVxuICAgICAgICAgICAgICAgICAgPy5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgIGMuZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgY2xvbmVFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAnIGMuZXZlbnQsIGNsb25lRXZlbnQgaW5zaWRlIGVsc2UgJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjLmV2ZW50LmlkID0gYCR7aWRSZXNwb25zZUJvZHkuZ29vZ2xlRXZlbnRJZH0jJHtjPy5ldmVudD8uY2FsZW5kYXJJZH1gO1xuICAgICAgICAgICAgICAgICAgICBjLmV2ZW50LmV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keT8uZ29vZ2xlRXZlbnRJZDtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZXZlbnRzVG9SZW1vdmUucHVzaChlMSk7XG4gICAgICAgICAgcmV0dXJuIGUxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGUxO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25zdCBldmVudHNXaXRoTWVldGluZ0Fzc2lzdFNpbkhvc3QgPVxuICAgICAgZXZlbnRzVG9CZUNyZWF0ZWRXaXRoTmV3SWQ/Lm1hcCgoYykgPT4gYz8uZXZlbnQpIHx8IFtdO1xuXG4gICAgZXZlbnRzVG9FZGl0Py5mb3JFYWNoKChlKSA9PiBjb25zb2xlLmxvZyhlLCAnIGV2ZW50c1RvRWRpdCcpKTtcblxuICAgIGNvbnN0IGV2ZW50c01pbnVzRXZlbnRzVG9SZW1vdmUgPSBfLmRpZmZlcmVuY2VCeShcbiAgICAgIGlkTW9kaWZpZWRFdmVudHNUb1Vwc2VydCxcbiAgICAgIGV2ZW50c1RvUmVtb3ZlLFxuICAgICAgJ2lkJ1xuICAgICk7XG5cbiAgICBjb25zdCBmaW5hbEV2ZW50c1RvVXBzZXJ0ID0gZXZlbnRzTWludXNFdmVudHNUb1JlbW92ZVxuICAgICAgLmNvbmNhdChldmVudHNXaXRoTWVldGluZ0Fzc2lzdFNpbkhvc3QpXG4gICAgICAuY29uY2F0KF8udW5pcUJ5KGV2ZW50c1RvRWRpdCwgJ2lkJykpXG4gICAgICA/LmZpbHRlcigoZSkgPT4gISFlKTtcblxuICAgIGZpbmFsRXZlbnRzVG9VcHNlcnQ/LmZvckVhY2goKGUpID0+IGNvbnNvbGUubG9nKGUsICcgZmluYWxFdmVudHNUb1Vwc2VydCcpKTtcblxuICAgIHVwZGF0ZVByb21pc2VzPy5mb3JFYWNoKChlKSA9PlxuICAgICAgY29uc29sZS5sb2coZSwgJyB1cGRhdGVQcm9taXNlcyBiZWZvcmUgZmlsdGVyJylcbiAgICApO1xuXG4gICAgYXdhaXQgcHJvY2Vzc0V2ZW50c0ZvclVwZGF0aW5nQ29uZmVyZW5jZXMoXG4gICAgICBmaW5hbEV2ZW50c1RvVXBzZXJ0Py5maWx0ZXIoXG4gICAgICAgIChlKSA9PlxuICAgICAgICAgICFldmVudFRvRmlsdGVyRm9yVXBkYXRlQ29uZmVyZW5jZXM/LmZpbmQoXG4gICAgICAgICAgICAoZikgPT4gZT8uY29uZmVyZW5jZUlkID09PSBmPy5jb25mZXJlbmNlSWRcbiAgICAgICAgICApXG4gICAgICApXG4gICAgKTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIFByb21pc2UuYWxsKHVwZGF0ZVByb21pc2VzPy5maWx0ZXIoKGUpID0+ICEhZSkpLFxuICAgICAgdXBzZXJ0RXZlbnRzUG9zdFBsYW5uZXIoXG4gICAgICAgIGZpbmFsRXZlbnRzVG9VcHNlcnQubWFwKChlKSA9PlxuICAgICAgICAgIF8ub21pdChlLCBbJ3ZlY3RvcicsICdwcmVmZXJyZWRUaW1lUmFuZ2VzJ10pXG4gICAgICAgIClcbiAgICAgICksXG4gICAgXSk7XG5cbiAgICBmb3IgKGNvbnN0IGluc2VydFJlbWluZGVyT2JqZWN0IG9mIGluc2VydFJlbWluZGVyT2JqZWN0cykge1xuICAgICAgY29uc3QgaWRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAoaSkgPT4gaT8uZ2VuZXJhdGVkSWQgPT09IGluc2VydFJlbWluZGVyT2JqZWN0Py5ldmVudElkXG4gICAgICApO1xuXG4gICAgICBpZiAoaWRSZXNwb25zZUJvZHk/LmlkKSB7XG4gICAgICAgIGluc2VydFJlbWluZGVyT2JqZWN0LmV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3Qgb2YgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cykge1xuICAgICAgY29uc3QgaWRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAoaSkgPT4gaT8uZ2VuZXJhdGVkSWQgPT09IGluc2VydFByZWZlcnJlZFRpbWVSYW5nZU9iamVjdD8uZXZlbnRJZFxuICAgICAgKTtcblxuICAgICAgaWYgKGlkUmVzcG9uc2VCb2R5Py5pZCkge1xuICAgICAgICBpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3QuZXZlbnRJZCA9IGlkUmVzcG9uc2VCb2R5Py5pZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGluc2VydEF0dGVuZGVlT2JqZWN0IG9mIGluc2VydEF0dGVuZGVlT2JqZWN0cykge1xuICAgICAgY29uc3QgaWRSZXNwb25zZUJvZHkgPSBpZFJlc3BvbnNlQm9kaWVzPy5maW5kKFxuICAgICAgICAoaSkgPT4gaT8uZ2VuZXJhdGVkSWQgPT09IGluc2VydEF0dGVuZGVlT2JqZWN0Py5ldmVudElkXG4gICAgICApO1xuXG4gICAgICBpZiAoaWRSZXNwb25zZUJvZHk/LmlkKSB7XG4gICAgICAgIGluc2VydEF0dGVuZGVlT2JqZWN0LmV2ZW50SWQgPSBpZFJlc3BvbnNlQm9keT8uaWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVsZXRlUmVtaW5kZXJzLmZvckVhY2goKGQpID0+IGNvbnNvbGUubG9nKGQsICcgZGVsZXRlUmVtaW5kZXJzJykpO1xuICAgIGluc2VydFJlbWluZGVyT2JqZWN0cz8uZm9yRWFjaCgoaSkgPT5cbiAgICAgIGNvbnNvbGUubG9nKGksICcgaW5zZXJ0UmVtaW5kZXJPYmplY3RzJylcbiAgICApO1xuICAgIGNvbnN0IGRlbGV0ZVJlbWluZGVySWRzID0gZGVsZXRlUmVtaW5kZXJzXG4gICAgICAuZmlsdGVyKChyKSA9PiAhIXI/LmV2ZW50SWQpXG4gICAgICA/Lm1hcCgocikgPT4gcj8uZXZlbnRJZCk7XG4gICAgY29uc3QgaW5zZXJ0UmVtaW5kZXJzRmlsdGVyZWQ6IFJlbWluZGVyVHlwZUFkanVzdGVkW10gPVxuICAgICAgaW5zZXJ0UmVtaW5kZXJPYmplY3RzLmZpbHRlcigocikgPT4gISFyPy5ldmVudElkKTtcblxuICAgIGRlbGV0ZVJlbWluZGVySWRzLmZvckVhY2goKGQpID0+IGNvbnNvbGUubG9nKGQsICcgZGVsZXRlUmVtaW5kZXJJZHMnKSk7XG4gICAgaW5zZXJ0UmVtaW5kZXJzRmlsdGVyZWQuZm9yRWFjaCgoaSkgPT5cbiAgICAgIGNvbnNvbGUubG9nKGksICcgaW5zZXJ0UmVtaW5kZXJzRmlsdGVyZWQnKVxuICAgICk7XG4gICAgYXdhaXQgZGVsZXRlUmVtaW5kZXJzV2l0aElkcyhcbiAgICAgIF8udW5pcShkZWxldGVSZW1pbmRlcklkcyksXG4gICAgICBmaWx0ZXJlZEV2ZW50c1RvVXBkYXRlPy5bMF0/LnVzZXJJZFxuICAgICk7XG4gICAgYXdhaXQgaW5zZXJ0UmVtaW5kZXJzKGluc2VydFJlbWluZGVyc0ZpbHRlcmVkKTtcbiAgICBjb25zdCBkaXN0aW5jdFRvRGVsZXRlUHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cyA9IF8udW5pcUJ5KFxuICAgICAgZGVsZXRlUHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cyxcbiAgICAgICdldmVudElkJ1xuICAgICk7XG4gICAgY29uc3QgZXZlbnRJZHNGb3JQdHMgPSBkaXN0aW5jdFRvRGVsZXRlUHJlZmVycmVkVGltZVJhbmdlT2JqZWN0cz8ubWFwKFxuICAgICAgKHB0KSA9PiBwdD8uZXZlbnRJZFxuICAgICk7XG4gICAgYXdhaXQgZGVsZXRlUHJlZmVycmVkVGltZVJhbmdlc0ZvckV2ZW50cyhldmVudElkc0ZvclB0cyk7XG4gICAgYXdhaXQgaW5zZXJ0UHJlZmVycmVkVGltZVJhbmdlcyhpbnNlcnRQcmVmZXJyZWRUaW1lUmFuZ2VPYmplY3RzKTtcbiAgICBhd2FpdCBpbnNlcnRBdHRlbmRlZXNmb3JFdmVudChpbnNlcnRBdHRlbmRlZU9iamVjdHMpO1xuICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzIScpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gdXBkYXRlICcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlWm9vbU1lZXRpbmcgPSBhc3luYyAoXG4gIHpvb21Ub2tlbjogc3RyaW5nLFxuICBtZWV0aW5nSWQ6IG51bWJlclxuKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZ290LmRlbGV0ZShgJHt6b29tQmFzZVVybH0vbWVldGluZ3MvJHttZWV0aW5nSWR9YCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7em9vbVRva2VufWAsXG4gICAgICAgIENvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2cobWVldGluZ0lkLCAnc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgbWVldGluZycpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZGVsZXRlIHpvb20gbWVldGluZycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Wm9vbU1lZXRpbmcgPSBhc3luYyAoem9vbVRva2VuOiBzdHJpbmcsIG1lZXRpbmdJZDogbnVtYmVyKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzOiBab29tTWVldGluZ09iamVjdFR5cGUgPSBhd2FpdCBnb3QoXG4gICAgICBgJHt6b29tQmFzZVVybH0vbWVldGluZ3MvJHttZWV0aW5nSWR9YCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt6b29tVG9rZW59YCxcbiAgICAgICAgICBDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgICkuanNvbigpO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGdldCB6b29tIG1lZXRpbmcnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVpvb21NZWV0aW5nU3RhcnREYXRlID0gYXN5bmMgKFxuICB6b29tVG9rZW46IHN0cmluZyxcbiAgbWVldGluZ0lkOiBudW1iZXIsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICB0aW1lem9uZTogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXFCb2R5ID0ge1xuICAgICAgc3RhcnRfdGltZTogZGF5anMoc3RhcnREYXRlPy5zbGljZSgwLCAxOSkpLnV0YygpLmZvcm1hdCgpLFxuICAgICAgdGltZXpvbmUsXG4gICAgfTtcblxuICAgIGF3YWl0IGdvdFxuICAgICAgLnBhdGNoKGAke3pvb21CYXNlVXJsfS9tZWV0aW5ncy8ke21lZXRpbmdJZH1gLCB7XG4gICAgICAgIGpzb246IHJlcUJvZHksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7em9vbVRva2VufWAsXG4gICAgICAgICAgQ29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cobWVldGluZ0lkLCAnc3VjY2Vzc2Z1bGx5IHBhdGNoZWQgem9vbSBtZWV0aW5nIHN0YXJ0aW5nIGRhdGUnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSB6b29tIG1lZXRpbmcnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVpvb21NZWV0aW5nID0gYXN5bmMgKFxuICB6b29tVG9rZW46IHN0cmluZyxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIHRpbWV6b25lOiBzdHJpbmcsXG4gIGFnZW5kYTogc3RyaW5nLFxuICBkdXJhdGlvbjogbnVtYmVyLFxuICBjb250YWN0TmFtZT86IHN0cmluZyxcbiAgY29udGFjdEVtYWlsPzogc3RyaW5nLFxuICBtZWV0aW5nSW52aXRlZXM/OiBzdHJpbmdbXVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKGRheWpzKCkuaXNBZnRlcihkYXlqcyhzdGFydERhdGUpKSkge1xuICAgICAgY29uc29sZS5sb2coJyBzdGFydHRpbWUgaXMgaW4gdGhlIHBhc3QnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnR0aW1lIGlzIGluIHRoZSBwYXN0Jyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXG4gICAgICBkYXlqcyhzdGFydERhdGU/LnNsaWNlKDAsIDE5KSlcbiAgICAgICAgLnR6KHRpbWV6b25lLCB0cnVlKVxuICAgICAgICAuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzJyksXG4gICAgICB0aW1lem9uZSxcbiAgICAgIGFnZW5kYSxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgYCBkYXlqcyhzdGFydERhdGU/LnNsaWNlKDAsIDE5KSkudHoodGltZXpvbmUsIHRydWUpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcycpLFxuICAgICAgICAgICAgdGltZXpvbmUsXG4gICAgICAgICAgICBhZ2VuZGEsXG4gICAgICAgICAgICBkdXJhdGlvbiwgY3JlYXRlWm9vbU1lZXRpbmcgY2FsbGVkYFxuICAgICk7XG5cbiAgICBsZXQgc2V0dGluZ3M6IGFueSA9IHt9O1xuXG4gICAgaWYgKGNvbnRhY3ROYW1lPy5sZW5ndGggPiAwICYmIGNvbnRhY3RFbWFpbD8ubGVuZ3RoID4gMCkge1xuICAgICAgc2V0dGluZ3MgPSB7XG4gICAgICAgIGNvbnRhY3RfbmFtZTogY29udGFjdE5hbWUsXG4gICAgICAgIGNvbnRhY3RfZW1haWw6IGNvbnRhY3RFbWFpbCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKG1lZXRpbmdJbnZpdGVlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgc2V0dGluZ3MgPSB7XG4gICAgICAgIC4uLnNldHRpbmdzLFxuICAgICAgICBtZWV0aW5nX2ludml0ZWVzOiBtZWV0aW5nSW52aXRlZXM/Lm1hcCgobSkgPT4gKHsgZW1haWw6IG0gfSkpLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBsZXQgcmVxQm9keTogQ3JlYXRlWm9vbU1lZXRpbmdSZXF1ZXN0Qm9keVR5cGUgPSB7fTtcblxuICAgIGlmIChPYmplY3Qua2V5cyhzZXR0aW5ncyk/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJlcUJvZHkuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB9XG5cbiAgICByZXFCb2R5ID0ge1xuICAgICAgLi4ucmVxQm9keSxcbiAgICAgIHN0YXJ0X3RpbWU6IGRheWpzKHN0YXJ0RGF0ZT8uc2xpY2UoMCwgMTkpKVxuICAgICAgICAudHoodGltZXpvbmUsIHRydWUpXG4gICAgICAgIC51dGMoKVxuICAgICAgICAuZm9ybWF0KCksXG4gICAgICBhZ2VuZGEsXG4gICAgICBkdXJhdGlvbixcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2cocmVxQm9keSwgJyByZXFCb2R5IGluc2lkZSBjcmVhdGVab29tTWVldGluZycpO1xuXG4gICAgY29uc3QgcmVzOiBab29tTWVldGluZ09iamVjdFR5cGUgPSBhd2FpdCBnb3RcbiAgICAgIC5wb3N0KGAke3pvb21CYXNlVXJsfS91c2Vycy9tZS9tZWV0aW5nc2AsIHtcbiAgICAgICAganNvbjogcmVxQm9keSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt6b29tVG9rZW59YCxcbiAgICAgICAgICBDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMsICcgcmVzIGluc2lkZSBjcmVhdGVab29tTWVldGluZycpO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGNyZWF0ZSB6b29tIG1lZXRpbmcnKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGluc2VydENvbmZlcmVuY2VzID0gYXN5bmMgKGNvbmZlcmVuY2VzOiBDb25mZXJlbmNlVHlwZVtdKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdJbnNlcnRDb25mZXJlbmNlcyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBtdXRhdGlvbiBJbnNlcnRDb25mZXJlbmNlcygkY29uZmVyZW5jZXM6IFtDb25mZXJlbmNlX2luc2VydF9pbnB1dCFdISkge1xuICAgICAgICAgICAgICAgIGluc2VydF9Db25mZXJlbmNlKG9iamVjdHM6ICRjb25mZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZF9yb3dzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybmluZyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFySWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeVBvaW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZ291dExpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0hvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW5VcmxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRVcmxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21Qcml2YXRlTWVldGluZ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGA7XG5cbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XG4gICAgICBjb25mZXJlbmNlcyxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzOiB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGluc2VydF9Db25mZXJlbmNlOiB7XG4gICAgICAgICAgYWZmZWN0ZWRfcm93czogbnVtYmVyO1xuICAgICAgICAgIHJldHVybmluZzogQ29uZmVyZW5jZVR5cGVbXTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSA9IGF3YWl0IGdvdFxuICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLUhhc3VyYS1BZG1pbi1TZWNyZXQnOiBoYXN1cmFBZG1pblNlY3JldCxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2coXG4gICAgICByZXM/LmRhdGE/Lmluc2VydF9Db25mZXJlbmNlPy5yZXR1cm5pbmcsXG4gICAgICAnIHN1Y2Nlc3NmdWxseSBpbnNlcnRlZCBjb25mZXJlbmNlcydcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gaW5zZXJ0IGNvbmZlcmVuY2VzJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRDb25mZXJlbmNlID0gYXN5bmMgKGNvbmZlcmVuY2U6IENvbmZlcmVuY2VUeXBlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9ICdJbnNlcnRDb25mZXJlbmNlJztcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgICAgIG11dGF0aW9uIEluc2VydENvbmZlcmVuY2UoJGNvbmZlcmVuY2U6IENvbmZlcmVuY2VfaW5zZXJ0X2lucHV0ISkge1xuICAgICAgICAgICAgICAgIGluc2VydF9Db25mZXJlbmNlX29uZShvYmplY3Q6ICRjb25mZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcFxuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhcklkXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgZW50cnlQb2ludHNcbiAgICAgICAgICAgICAgICAgICAgaGFuZ291dExpbmtcbiAgICAgICAgICAgICAgICAgICAgaWNvblVyaVxuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICBpc0hvc3RcbiAgICAgICAgICAgICAgICAgICAgam9pblVybFxuICAgICAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgICAgICBub3Rlc1xuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAgICBzdGFydFVybFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkXG4gICAgICAgICAgICAgICAgICAgIHpvb21Qcml2YXRlTWVldGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIGNvbmZlcmVuY2UsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IGluc2VydF9Db25mZXJlbmNlX29uZTogQ29uZmVyZW5jZVR5cGUgfSB9ID0gYXdhaXQgZ290XG4gICAgICAucG9zdChoYXN1cmFHcmFwaFVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtSGFzdXJhLUFkbWluLVNlY3JldCc6IGhhc3VyYUFkbWluU2VjcmV0LFxuICAgICAgICAgICdYLUhhc3VyYS1Sb2xlJzogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgICAganNvbjoge1xuICAgICAgICAgIG9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5qc29uKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXMsICcgc3VjY2Vzc2Z1bGx5IGluc2VydGVkIG9uZSBjb25mZXJlbmNlJyk7XG5cbiAgICByZXR1cm4gcmVzPy5kYXRhPy5pbnNlcnRfQ29uZmVyZW5jZV9vbmU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBpbnNlcnQgY29uZmVyZW5jZScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgbGlzdENvbmZlcmVuY2VzV2l0aEhvc3RzID0gYXN5bmMgKGlkczogc3RyaW5nW10pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0xpc3RDb25mZXJlbmNlc1dpdGhIb3N0SWQnO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICAgICAgcXVlcnkgTGlzdENvbmZlcmVuY2VzV2l0aEhvc3RJZCgkaWRzOiBbU3RyaW5nIV0hKSB7XG4gICAgICAgICAgICAgICAgQ29uZmVyZW5jZSh3aGVyZToge2lkOiB7X2luOiAkaWRzfSwgaXNIb3N0OiB7X2VxOiB0cnVlfX0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwXG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFySWRcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFxuICAgICAgICAgICAgICAgICAgICBlbnRyeVBvaW50c1xuICAgICAgICAgICAgICAgICAgICBoYW5nb3V0TGlua1xuICAgICAgICAgICAgICAgICAgICBpY29uVXJpXG4gICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgIGlzSG9zdFxuICAgICAgICAgICAgICAgICAgICBqb2luVXJsXG4gICAgICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgICAgICAgIG5vdGVzXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VXJsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICAgICAgem9vbVByaXZhdGVNZWV0aW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuXG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgaWRzLFxuICAgIH07XG5cbiAgICBjb25zdCByZXM6IHsgZGF0YTogeyBDb25mZXJlbmNlOiBDb25mZXJlbmNlVHlwZVtdIH0gfSA9IGF3YWl0IGdvdFxuICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLUhhc3VyYS1BZG1pbi1TZWNyZXQnOiBoYXN1cmFBZG1pblNlY3JldCxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cocmVzLCAnIHN1Y2Nlc3NmdWxseSBsaXN0ZWQgY29uZmVyZW5jZXMgd2l0aCBob3N0cycpO1xuXG4gICAgcmV0dXJuIHJlcz8uZGF0YT8uQ29uZmVyZW5jZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGxpc3QgY29uZmVyZW5jZXMgd2l0aCBob3N0cycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0V2ZW50c0ZvclVwZGF0aW5nQ29uZmVyZW5jZXMgPSBhc3luYyAoXG4gIGZpbmFsRXZlbnRzVG9VcHNlcnQ6IEV2ZW50UGx1c1R5cGVbXVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXZlbnRzV2l0aENvbmZlcmVuY2VzID0gZmluYWxFdmVudHNUb1Vwc2VydC5maWx0ZXIoXG4gICAgICAoZSkgPT4gISFlPy5jb25mZXJlbmNlSWRcbiAgICApO1xuXG4gICAgY29uc3QgY29uZmVyZW5jZUlkcyA9IGV2ZW50c1dpdGhDb25mZXJlbmNlcz8ubWFwKChlKSA9PiBlPy5jb25mZXJlbmNlSWQpO1xuICAgIGNvbnN0IGNvbmZlcmVuY2VzV2l0aEhvc3RzID0gYXdhaXQgbGlzdENvbmZlcmVuY2VzV2l0aEhvc3RzKGNvbmZlcmVuY2VJZHMpO1xuXG4gICAgY29uc3QgZXZlbnRzV2l0aEhvc3RDb25mZXJlbmNlcyA9IGV2ZW50c1dpdGhDb25mZXJlbmNlcz8uZmlsdGVyKFxuICAgICAgKGUpID0+ICEhY29uZmVyZW5jZXNXaXRoSG9zdHM/LmZpbmQoKGMpID0+IGM/LnVzZXJJZCA9PT0gZT8udXNlcklkKVxuICAgICk7XG5cbiAgICBpZiAoIWV2ZW50c1dpdGhIb3N0Q29uZmVyZW5jZXM/LlswXT8uaWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdubyBldmVudCB3aXRoIGhvc3QgY29uZmVyZW5jZXMgcHJlc2VudCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZXZlbnRXaXRoSG9zdENvbmZlcmVuY2Ugb2YgZXZlbnRzV2l0aEhvc3RDb25mZXJlbmNlcykge1xuICAgICAgY29uc3Qgem9vbVRva2VuID0gYXdhaXQgZ2V0Wm9vbUFQSVRva2VuKGV2ZW50V2l0aEhvc3RDb25mZXJlbmNlPy51c2VySWQpO1xuICAgICAgY29uc3QgY29uZmVyZW5jZVRvRXZlbnQgPSBjb25mZXJlbmNlc1dpdGhIb3N0cz8uZmluZChcbiAgICAgICAgKGMpID0+IGM/LmlkID09PSBldmVudFdpdGhIb3N0Q29uZmVyZW5jZT8uY29uZmVyZW5jZUlkXG4gICAgICApO1xuICAgICAgaWYgKFxuICAgICAgICB6b29tVG9rZW4gJiZcbiAgICAgICAgY29uZmVyZW5jZVRvRXZlbnQ/LmFwcCA9PT0gJ3pvb20nICYmXG4gICAgICAgIHR5cGVvZiBwYXJzZUludChjb25mZXJlbmNlVG9FdmVudD8uaWQsIDEwKSA9PT0gJ251bWJlcidcbiAgICAgICkge1xuICAgICAgICBhd2FpdCB1cGRhdGVab29tTWVldGluZ1N0YXJ0RGF0ZShcbiAgICAgICAgICB6b29tVG9rZW4sXG4gICAgICAgICAgcGFyc2VJbnQoY29uZmVyZW5jZVRvRXZlbnQ/LmlkLCAxMCksXG4gICAgICAgICAgZXZlbnRXaXRoSG9zdENvbmZlcmVuY2U/LnN0YXJ0RGF0ZSxcbiAgICAgICAgICBldmVudFdpdGhIb3N0Q29uZmVyZW5jZT8udGltZXpvbmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBwcm9jZXNzRXZlbnRzZm9ydXBkYXRpbmdjb25mZXJlbmNlcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0V2ZW50c0ZvckNyZWF0aW5nQ29uZmVyZW5jZXMgPSBhc3luYyAoXG4gIGZpbmFsRXZlbnRzVG9VcHNlcnQ6IEV2ZW50UGx1c1R5cGVbXSxcbiAgY3JlYXRlUmVzdWx0czoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZ2VuZXJhdGVkSWQ6IHN0cmluZztcbiAgfVtdXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjcmVhdGVkRXZlbnRzV2l0aE1lZXRpbmdJZCA9IGZpbmFsRXZlbnRzVG9VcHNlcnRcbiAgICAgID8uZmlsdGVyKChlKSA9PiAhIWNyZWF0ZVJlc3VsdHM/LmZpbmQoKGMpID0+IGM/LmlkID09PSBlPy5pZCkpXG4gICAgICA/LmZpbHRlcigoZSkgPT4gISFlPy5tZWV0aW5nSWQpO1xuXG4gICAgY29uc3QgdW5pcXVlTWVldGluZ0lkQ3JlYXRlZEV2ZW50cyA9IF8udW5pcUJ5KFxuICAgICAgY3JlYXRlZEV2ZW50c1dpdGhNZWV0aW5nSWQsXG4gICAgICAnbWVldGluZ0lkJ1xuICAgICk7XG5cbiAgICBpZiAoIXVuaXF1ZU1lZXRpbmdJZENyZWF0ZWRFdmVudHM/LlswXSkge1xuICAgICAgY29uc29sZS5sb2coJyBubyBuZXcgbWVldGluZyBldmVudHMgY3JlYXRlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZWV0aW5nQXNzaXN0T2JqZWN0cyA9IGF3YWl0IGxpc3RNZWV0aW5nQXNzaXN0c0dpdmVuTWVldGluZ0lkcyhcbiAgICAgIHVuaXF1ZU1lZXRpbmdJZENyZWF0ZWRFdmVudHM/Lm1hcCgoZSkgPT4gZT8ubWVldGluZ0lkKVxuICAgICk7XG5cbiAgICBjb25zdCB6b29tT2JqZWN0czogKFpvb21NZWV0aW5nT2JqZWN0VHlwZSAmIHtcbiAgICAgIG1lZXRpbmdJZDogc3RyaW5nO1xuICAgICAgaG9zdElkOiBzdHJpbmc7XG4gICAgfSlbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBtZWV0aW5nQXNzaXN0IG9mIG1lZXRpbmdBc3Npc3RPYmplY3RzKSB7XG4gICAgICBjb25zdCB6b29tVG9rZW4gPSBhd2FpdCBnZXRab29tQVBJVG9rZW4obWVldGluZ0Fzc2lzdD8udXNlcklkKTtcblxuICAgICAgaWYgKHpvb21Ub2tlbikge1xuICAgICAgICBjb25zdCBtZWV0aW5nRXZlbnQgPSB1bmlxdWVNZWV0aW5nSWRDcmVhdGVkRXZlbnRzPy5maW5kKFxuICAgICAgICAgIChlKSA9PiBlPy5tZWV0aW5nSWQgPT09IG1lZXRpbmdBc3Npc3Q/LmlkXG4gICAgICAgICk7XG4gICAgICAgIGlmICghbWVldGluZ0V2ZW50KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJyBub3QgbWVldGluZ0V2ZW50IGZvdW5kIGZvciB6b29tIGNvbnRpbnVlJyk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhdHRlbmRlZXMgPSBhd2FpdCBsaXN0TWVldGluZ0Fzc2lzdEF0dGVuZGVlc0dpdmVuTWVldGluZ0lkKFxuICAgICAgICAgIG1lZXRpbmdFdmVudD8ubWVldGluZ0lkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFhdHRlbmRlZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnIG5vIGF0dGVuZGVlcyBwcmVzZW50IGZvciB6b29tIGNvbnRpbnVlJyk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG9zdEF0dGVuZGVlID0gYXR0ZW5kZWVzPy5maW5kKFxuICAgICAgICAgIChhKSA9PiBhPy51c2VySWQgPT09IG1lZXRpbmdBc3Npc3Q/LnVzZXJJZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHpvb21PYmplY3QgPSBhd2FpdCBjcmVhdGVab29tTWVldGluZyhcbiAgICAgICAgICB6b29tVG9rZW4sXG4gICAgICAgICAgbWVldGluZ0V2ZW50Py5zdGFydERhdGUsXG4gICAgICAgICAgbWVldGluZ0Fzc2lzdD8udGltZXpvbmUsXG4gICAgICAgICAgbWVldGluZ0V2ZW50Py5zdW1tYXJ5LFxuICAgICAgICAgIG1lZXRpbmdBc3Npc3Q/LmR1cmF0aW9uLFxuICAgICAgICAgIGhvc3RBdHRlbmRlZT8ubmFtZSxcbiAgICAgICAgICBob3N0QXR0ZW5kZWU/LnByaW1hcnlFbWFpbCxcbiAgICAgICAgICBhdHRlbmRlZXM/Lm1hcCgoYSkgPT4gYT8ucHJpbWFyeUVtYWlsKVxuICAgICAgICApO1xuXG4gICAgICAgIHpvb21PYmplY3RzLnB1c2goe1xuICAgICAgICAgIC4uLnpvb21PYmplY3QsXG4gICAgICAgICAgbWVldGluZ0lkOiBtZWV0aW5nQXNzaXN0Py5pZCxcbiAgICAgICAgICBob3N0SWQ6IG1lZXRpbmdBc3Npc3Q/LnVzZXJJZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgem9vbU9iamVjdCxcbiAgICAgICAgICAnIHpvb21PYmplY3QgaW5zaWRlIHByb2Nlc3NFdmVudHNGb3JDcmVhdGluZ0NvbmZlcmVuY2VzJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKHpvb21PYmplY3RzLCAnIHpvb21PYmplY3RzJyk7XG4gICAgaWYgKHpvb21PYmplY3RzPy5bMF0/LmlkKSB7XG4gICAgICByZXR1cm4gem9vbU9iamVjdHM7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gY3JlYXRlIGNvbmZlcmVuY2VzJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBsaXN0TWVldGluZ0Fzc2lzdHNHaXZlbk1lZXRpbmdJZHMgPSBhc3luYyAoXG4gIG1lZXRpbmdJZHM6IHN0cmluZ1tdXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gJ0xpc3RNZWV0aW5nQXNzaXN0cyc7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgICAgICBxdWVyeSBMaXN0TWVldGluZ0Fzc2lzdHMoJG1lZXRpbmdJZHM6IFt1dWlkIV0hKSB7XG4gICAgICAgICAgICAgICAgTWVldGluZ19Bc3Npc3Qod2hlcmU6IHtpZDoge19pbjogJG1lZXRpbmdJZHN9fSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0F0dGVuZGVlVXBkYXRlUHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICAgICAgYW55b25lQ2FuQWRkU2VsZlxuICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZUNhbk1vZGlmeVxuICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZUNvdW50XG4gICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlUmVzcG9uZGVkQ291bnRcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlclRpbWVcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJJZFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxJZkFueVJlZnVzZVxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxsZWRcbiAgICAgICAgICAgICAgICAgICAgY29sb3JJZFxuICAgICAgICAgICAgICAgICAgICBjb25mZXJlbmNlQXBwXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUF0dGVuZGVlUHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlQ29uZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICBlbmFibGVIb3N0UHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZVxuICAgICAgICAgICAgICAgICAgICBldmVudElkXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZURhdGVcbiAgICAgICAgICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yXG4gICAgICAgICAgICAgICAgICAgIGd1YXJhbnRlZUF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICBndWVzdHNDYW5JbnZpdGVPdGhlcnNcbiAgICAgICAgICAgICAgICAgICAgZ3Vlc3RzQ2FuU2VlT3RoZXJHdWVzdHNcbiAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgbm90ZXNcbiAgICAgICAgICAgICAgICAgICAgbWluVGhyZXNob2xkQ291bnRcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlcbiAgICAgICAgICAgICAgICAgICAgcmVtaW5kZXJzXG4gICAgICAgICAgICAgICAgICAgIHNlbmRVcGRhdGVzXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZVxuICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5XG4gICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXRcbiAgICAgICAgICAgICAgICAgICAgdXNlRGVmYXVsdEFsYXJtc1xuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dFbmREYXRlXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd1N0YXJ0RGF0ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcbiAgICAgIG1lZXRpbmdJZHMsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlczogeyBkYXRhOiB7IE1lZXRpbmdfQXNzaXN0OiBNZWV0aW5nQXNzaXN0VHlwZVtdIH0gfSA9IGF3YWl0IGdvdFxuICAgICAgLnBvc3QoaGFzdXJhR3JhcGhVcmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLUhhc3VyYS1BZG1pbi1TZWNyZXQnOiBoYXN1cmFBZG1pblNlY3JldCxcbiAgICAgICAgICAnWC1IYXN1cmEtUm9sZSc6ICdhZG1pbicsXG4gICAgICAgIH0sXG4gICAgICAgIGpzb246IHtcbiAgICAgICAgICBvcGVyYXRpb25OYW1lLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cocmVzLCAnIHN1Y2Nlc3NmdWxseSBsaXN0ZWQgbGlzdE1lZXRpbmdBc3Npc3RzR2l2ZW5NZWV0aW5nSWRzJyk7XG5cbiAgICByZXR1cm4gcmVzPy5kYXRhPy5NZWV0aW5nX0Fzc2lzdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIGxpc3QgbWVldGluZyBhc3Npc3RzJyk7XG4gIH1cbn07XG4iXX0=