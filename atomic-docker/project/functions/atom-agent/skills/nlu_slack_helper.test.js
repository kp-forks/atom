import { buildSlackSearchQuery } from './nlu_slack_helper';
describe('buildSlackSearchQuery', () => {
    it('should build a query with fromUser and textKeywords', () => {
        const params = {
            fromUser: '@bob',
            textKeywords: 'Q1 report',
        };
        const expectedQuery = 'from:@bob Q1 report';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should build a query with inChannel and onDate', () => {
        const params = {
            inChannel: '#marketing',
            onDate: '2023-10-26',
        };
        const expectedQuery = 'in:#marketing on:2023-10-26';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should build a query with exactPhrase and hasFile', () => {
        const params = {
            exactPhrase: 'project deadline extension',
            hasFile: true,
        };
        const expectedQuery = '"project deadline extension" has:file';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should build a query with afterDate and beforeDate', () => {
        const params = {
            afterDate: '2023-09-01',
            beforeDate: '2023-09-30',
        };
        const expectedQuery = 'after:2023-09-01 before:2023-09-30';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should handle mentionsUser and hasReaction', () => {
        const params = {
            mentionsUser: 'Claire',
            hasReaction: ':eyes:',
        };
        const expectedQuery = 'mentions:Claire has::eyes:';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should handle hasLink', () => {
        const params = {
            hasLink: true,
            inChannel: 'C012ABCDEF',
        };
        const expectedQuery = 'in:C012ABCDEF has:link';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should combine multiple parameters correctly', () => {
        const params = {
            fromUser: 'david',
            inChannel: '#general',
            textKeywords: 'important update client meeting',
            afterDate: '2024-01-01',
            hasFile: true,
        };
        // Order might vary for textKeywords if not handled specifically, but all parts should be present.
        // For predictability in tests, ensure a consistent order or use a matcher that ignores order of space-separated terms.
        // Current implementation joins in a specific order.
        const expectedQuery = 'from:david in:#general has:file after:2024-01-01 important update client meeting';
        expect(buildSlackSearchQuery(params)).toEqual(expect.stringContaining('from:david'));
        expect(buildSlackSearchQuery(params)).toEqual(expect.stringContaining('in:#general'));
        expect(buildSlackSearchQuery(params)).toEqual(expect.stringContaining('has:file'));
        expect(buildSlackSearchQuery(params)).toEqual(expect.stringContaining('after:2024-01-01'));
        expect(buildSlackSearchQuery(params)).toEqual(expect.stringContaining('important update client meeting'));
    });
    it('should return an empty string for empty params', () => {
        const params = {};
        const expectedQuery = '';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should trim whitespace from parameters', () => {
        const params = {
            fromUser: '  @bob  ',
            textKeywords: '  Q1 report  ',
        };
        const expectedQuery = 'from:@bob Q1 report';
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
    });
    it('should correctly format hasReaction by removing colons if present', () => {
        const params1 = { hasReaction: ':smile:' };
        expect(buildSlackSearchQuery(params1)).toBe('has::smile:');
        const params2 = { hasReaction: 'tada' };
        expect(buildSlackSearchQuery(params2)).toBe('has::tada:');
    });
    it('should not include onDate if afterDate or beforeDate is present', () => {
        const params = {
            onDate: '2023-10-26',
            afterDate: '2023-10-25',
        };
        const expectedQuery = 'after:2023-10-25'; // onDate should be ignored
        expect(buildSlackSearchQuery(params)).toBe(expectedQuery);
        const params2 = {
            onDate: '2023-10-26',
            beforeDate: '2023-10-27',
        };
        const expectedQuery2 = 'before:2023-10-27'; // onDate should be ignored
        expect(buildSlackSearchQuery(params2)).toBe(expectedQuery2);
        const params3 = {
            onDate: '2023-10-26',
            afterDate: '2023-10-25',
            beforeDate: '2023-10-27',
        };
        const expectedQuery3 = 'after:2023-10-25 before:2023-10-27'; // onDate should be ignored
        expect(buildSlackSearchQuery(params3)).toBe(expectedQuery3);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmx1X3NsYWNrX2hlbHBlci50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibmx1X3NsYWNrX2hlbHBlci50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRzNELFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUU7SUFDckMsRUFBRSxDQUFDLHFEQUFxRCxFQUFFLEdBQUcsRUFBRTtRQUM3RCxNQUFNLE1BQU0sR0FBeUI7WUFDbkMsUUFBUSxFQUFFLE1BQU07WUFDaEIsWUFBWSxFQUFFLFdBQVc7U0FDMUIsQ0FBQztRQUNGLE1BQU0sYUFBYSxHQUFHLHFCQUFxQixDQUFDO1FBQzVDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM1RCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxnREFBZ0QsRUFBRSxHQUFHLEVBQUU7UUFDeEQsTUFBTSxNQUFNLEdBQXlCO1lBQ25DLFNBQVMsRUFBRSxZQUFZO1lBQ3ZCLE1BQU0sRUFBRSxZQUFZO1NBQ3JCLENBQUM7UUFDRixNQUFNLGFBQWEsR0FBRyw2QkFBNkIsQ0FBQztRQUNwRCxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDNUQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1FBQzNELE1BQU0sTUFBTSxHQUF5QjtZQUNuQyxXQUFXLEVBQUUsNEJBQTRCO1lBQ3pDLE9BQU8sRUFBRSxJQUFJO1NBQ2QsQ0FBQztRQUNGLE1BQU0sYUFBYSxHQUFHLHVDQUF1QyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FB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cEMsTUFBTSxFQUFFLFlBQVk7WUFDcEIsU0FBUyxFQUFFLFlBQVk7WUFDdkIsVUFBVSxFQUFFLFlBQVk7U0FDekIsQ0FBQztRQUNGLE1BQU0sY0FBYyxHQUFHLG9DQUFvQyxDQUFDLENBQUMsMkJBQTJCO1FBQ3hGLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRTbGFja1NlYXJjaFF1ZXJ5IH0gZnJvbSAnLi9ubHVfc2xhY2tfaGVscGVyJztcbmltcG9ydCB7IFN0cnVjdHVyZWRTbGFja1F1ZXJ5IH0gZnJvbSAnLi9sbG1fc2xhY2tfcXVlcnlfdW5kZXJzdGFuZGVyJztcblxuZGVzY3JpYmUoJ2J1aWxkU2xhY2tTZWFyY2hRdWVyeScsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCBidWlsZCBhIHF1ZXJ5IHdpdGggZnJvbVVzZXIgYW5kIHRleHRLZXl3b3JkcycsICgpID0+IHtcbiAgICBjb25zdCBwYXJhbXM6IFN0cnVjdHVyZWRTbGFja1F1ZXJ5ID0ge1xuICAgICAgZnJvbVVzZXI6ICdAYm9iJyxcbiAgICAgIHRleHRLZXl3b3JkczogJ1ExIHJlcG9ydCcsXG4gICAgfTtcbiAgICBjb25zdCBleHBlY3RlZFF1ZXJ5ID0gJ2Zyb206QGJvYiBRMSByZXBvcnQnO1xuICAgIGV4cGVjdChidWlsZFNsYWNrU2VhcmNoUXVlcnkocGFyYW1zKSkudG9CZShleHBlY3RlZFF1ZXJ5KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBidWlsZCBhIHF1ZXJ5IHdpdGggaW5DaGFubmVsIGFuZCBvbkRhdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zOiBTdHJ1Y3R1cmVkU2xhY2tRdWVyeSA9IHtcbiAgICAgIGluQ2hhbm5lbDogJyNtYXJrZXRpbmcnLFxuICAgICAgb25EYXRlOiAnMjAyMy0xMC0yNicsXG4gICAgfTtcbiAgICBjb25zdCBleHBlY3RlZFF1ZXJ5ID0gJ2luOiNtYXJrZXRpbmcgb246MjAyMy0xMC0yNic7XG4gICAgZXhwZWN0KGJ1aWxkU2xhY2tTZWFyY2hRdWVyeShwYXJhbXMpKS50b0JlKGV4cGVjdGVkUXVlcnkpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJ1aWxkIGEgcXVlcnkgd2l0aCBleGFjdFBocmFzZSBhbmQgaGFzRmlsZScsICgpID0+IHtcbiAgICBjb25zdCBwYXJhbXM6IFN0cnVjdHVyZWRTbGFja1F1ZXJ5ID0ge1xuICAgICAgZXhhY3RQaHJhc2U6ICdwcm9qZWN0IGRlYWRsaW5lIGV4dGVuc2lvbicsXG4gICAgICBoYXNGaWxlOiB0cnVlLFxuICAgIH07XG4gICAgY29uc3QgZXhwZWN0ZWRRdWVyeSA9ICdcInByb2plY3QgZGVhZGxpbmUgZXh0ZW5zaW9uXCIgaGFzOmZpbGUnO1xuICAgIGV4cGVjdChidWlsZFNsYWNrU2VhcmNoUXVlcnkocGFyYW1zKSkudG9CZShleHBlY3RlZFF1ZXJ5KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBidWlsZCBhIHF1ZXJ5IHdpdGggYWZ0ZXJEYXRlIGFuZCBiZWZvcmVEYXRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtczogU3RydWN0dXJlZFNsYWNrUXVlcnkgPSB7XG4gICAgICBhZnRlckRhdGU6ICcyMDIzLTA5LTAxJyxcbiAgICAgIGJlZm9yZURhdGU6ICcyMDIzLTA5LTMwJyxcbiAgICB9O1xuICAgIGNvbnN0IGV4cGVjdGVkUXVlcnkgPSAnYWZ0ZXI6MjAyMy0wOS0wMSBiZWZvcmU6MjAyMy0wOS0zMCc7XG4gICAgZXhwZWN0KGJ1aWxkU2xhY2tTZWFyY2hRdWVyeShwYXJhbXMpKS50b0JlKGV4cGVjdGVkUXVlcnkpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBtZW50aW9uc1VzZXIgYW5kIGhhc1JlYWN0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtczogU3RydWN0dXJlZFNsYWNrUXVlcnkgPSB7XG4gICAgICBtZW50aW9uc1VzZXI6ICdDbGFpcmUnLFxuICAgICAgaGFzUmVhY3Rpb246ICc6ZXllczonLFxuICAgIH07XG4gICAgY29uc3QgZXhwZWN0ZWRRdWVyeSA9ICdtZW50aW9uczpDbGFpcmUgaGFzOjpleWVzOic7XG4gICAgZXhwZWN0KGJ1aWxkU2xhY2tTZWFyY2hRdWVyeShwYXJhbXMpKS50b0JlKGV4cGVjdGVkUXVlcnkpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBoYXNMaW5rJywgKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtczogU3RydWN0dXJlZFNsYWNrUXVlcnkgPSB7XG4gICAgICBoYXNMaW5rOiB0cnVlLFxuICAgICAgaW5DaGFubmVsOiAnQzAxMkFCQ0RFRicsXG4gICAgfTtcbiAgICBjb25zdCBleHBlY3RlZFF1ZXJ5ID0gJ2luOkMwMTJBQkNERUYgaGFzOmxpbmsnO1xuICAgIGV4cGVjdChidWlsZFNsYWNrU2VhcmNoUXVlcnkocGFyYW1zKSkudG9CZShleHBlY3RlZFF1ZXJ5KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjb21iaW5lIG11bHRpcGxlIHBhcmFtZXRlcnMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtczogU3RydWN0dXJlZFNsYWNrUXVlcnkgPSB7XG4gICAgICBmcm9tVXNlcjogJ2RhdmlkJyxcbiAgICAgIGluQ2hhbm5lbDogJyNnZW5lcmFsJyxcbiAgICAgIHRleHRLZXl3b3JkczogJ2ltcG9ydGFudCB1cGRhdGUgY2xpZW50IG1lZXRpbmcnLFxuICAgICAgYWZ0ZXJEYXRlOiAnMjAyNC0wMS0wMScsXG4gICAgICBoYXNGaWxlOiB0cnVlLFxuICAgIH07XG4gICAgLy8gT3JkZXIgbWlnaHQgdmFyeSBmb3IgdGV4dEtleXdvcmRzIGlmIG5vdCBoYW5kbGVkIHNwZWNpZmljYWxseSwgYnV0IGFsbCBwYXJ0cyBzaG91bGQgYmUgcHJlc2VudC5cbiAgICAvLyBGb3IgcHJlZGljdGFiaWxpdHkgaW4gdGVzdHMsIGVuc3VyZSBhIGNvbnNpc3RlbnQgb3JkZXIgb3IgdXNlIGEgbWF0Y2hlciB0aGF0IGlnbm9yZXMgb3JkZXIgb2Ygc3BhY2Utc2VwYXJhdGVkIHRlcm1zLlxuICAgIC8vIEN1cnJlbnQgaW1wbGVtZW50YXRpb24gam9pbnMgaW4gYSBzcGVjaWZpYyBvcmRlci5cbiAgICBjb25zdCBleHBlY3RlZFF1ZXJ5ID1cbiAgICAgICdmcm9tOmRhdmlkIGluOiNnZW5lcmFsIGhhczpmaWxlIGFmdGVyOjIwMjQtMDEtMDEgaW1wb3J0YW50IHVwZGF0ZSBjbGllbnQgbWVldGluZyc7XG4gICAgZXhwZWN0KGJ1aWxkU2xhY2tTZWFyY2hRdWVyeShwYXJhbXMpKS50b0VxdWFsKFxuICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2Zyb206ZGF2aWQnKVxuICAgICk7XG4gICAgZXhwZWN0KGJ1aWxkU2xhY2tTZWFyY2hRdWVyeShwYXJhbXMpKS50b0VxdWFsKFxuICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2luOiNnZW5lcmFsJylcbiAgICApO1xuICAgIGV4cGVjdChidWlsZFNsYWNrU2VhcmNoUXVlcnkocGFyYW1zKSkudG9FcXVhbChcbiAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdoYXM6ZmlsZScpXG4gICAgKTtcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtcykpLnRvRXF1YWwoXG4gICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnYWZ0ZXI6MjAyNC0wMS0wMScpXG4gICAgKTtcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtcykpLnRvRXF1YWwoXG4gICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnaW1wb3J0YW50IHVwZGF0ZSBjbGllbnQgbWVldGluZycpXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gYW4gZW1wdHkgc3RyaW5nIGZvciBlbXB0eSBwYXJhbXMnLCAoKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zOiBTdHJ1Y3R1cmVkU2xhY2tRdWVyeSA9IHt9O1xuICAgIGNvbnN0IGV4cGVjdGVkUXVlcnkgPSAnJztcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtcykpLnRvQmUoZXhwZWN0ZWRRdWVyeSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJpbSB3aGl0ZXNwYWNlIGZyb20gcGFyYW1ldGVycycsICgpID0+IHtcbiAgICBjb25zdCBwYXJhbXM6IFN0cnVjdHVyZWRTbGFja1F1ZXJ5ID0ge1xuICAgICAgZnJvbVVzZXI6ICcgIEBib2IgICcsXG4gICAgICB0ZXh0S2V5d29yZHM6ICcgIFExIHJlcG9ydCAgJyxcbiAgICB9O1xuICAgIGNvbnN0IGV4cGVjdGVkUXVlcnkgPSAnZnJvbTpAYm9iIFExIHJlcG9ydCc7XG4gICAgZXhwZWN0KGJ1aWxkU2xhY2tTZWFyY2hRdWVyeShwYXJhbXMpKS50b0JlKGV4cGVjdGVkUXVlcnkpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNvcnJlY3RseSBmb3JtYXQgaGFzUmVhY3Rpb24gYnkgcmVtb3ZpbmcgY29sb25zIGlmIHByZXNlbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zMTogU3RydWN0dXJlZFNsYWNrUXVlcnkgPSB7IGhhc1JlYWN0aW9uOiAnOnNtaWxlOicgfTtcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtczEpKS50b0JlKCdoYXM6OnNtaWxlOicpO1xuXG4gICAgY29uc3QgcGFyYW1zMjogU3RydWN0dXJlZFNsYWNrUXVlcnkgPSB7IGhhc1JlYWN0aW9uOiAndGFkYScgfTtcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtczIpKS50b0JlKCdoYXM6OnRhZGE6Jyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IGluY2x1ZGUgb25EYXRlIGlmIGFmdGVyRGF0ZSBvciBiZWZvcmVEYXRlIGlzIHByZXNlbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zOiBTdHJ1Y3R1cmVkU2xhY2tRdWVyeSA9IHtcbiAgICAgIG9uRGF0ZTogJzIwMjMtMTAtMjYnLFxuICAgICAgYWZ0ZXJEYXRlOiAnMjAyMy0xMC0yNScsXG4gICAgfTtcbiAgICBjb25zdCBleHBlY3RlZFF1ZXJ5ID0gJ2FmdGVyOjIwMjMtMTAtMjUnOyAvLyBvbkRhdGUgc2hvdWxkIGJlIGlnbm9yZWRcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtcykpLnRvQmUoZXhwZWN0ZWRRdWVyeSk7XG5cbiAgICBjb25zdCBwYXJhbXMyOiBTdHJ1Y3R1cmVkU2xhY2tRdWVyeSA9IHtcbiAgICAgIG9uRGF0ZTogJzIwMjMtMTAtMjYnLFxuICAgICAgYmVmb3JlRGF0ZTogJzIwMjMtMTAtMjcnLFxuICAgIH07XG4gICAgY29uc3QgZXhwZWN0ZWRRdWVyeTIgPSAnYmVmb3JlOjIwMjMtMTAtMjcnOyAvLyBvbkRhdGUgc2hvdWxkIGJlIGlnbm9yZWRcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtczIpKS50b0JlKGV4cGVjdGVkUXVlcnkyKTtcblxuICAgIGNvbnN0IHBhcmFtczM6IFN0cnVjdHVyZWRTbGFja1F1ZXJ5ID0ge1xuICAgICAgb25EYXRlOiAnMjAyMy0xMC0yNicsXG4gICAgICBhZnRlckRhdGU6ICcyMDIzLTEwLTI1JyxcbiAgICAgIGJlZm9yZURhdGU6ICcyMDIzLTEwLTI3JyxcbiAgICB9O1xuICAgIGNvbnN0IGV4cGVjdGVkUXVlcnkzID0gJ2FmdGVyOjIwMjMtMTAtMjUgYmVmb3JlOjIwMjMtMTAtMjcnOyAvLyBvbkRhdGUgc2hvdWxkIGJlIGlnbm9yZWRcbiAgICBleHBlY3QoYnVpbGRTbGFja1NlYXJjaFF1ZXJ5KHBhcmFtczMpKS50b0JlKGV4cGVjdGVkUXVlcnkzKTtcbiAgfSk7XG59KTtcbiJdfQ==