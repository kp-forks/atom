"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const router_1 = require("next/router");
const dayjs_1 = __importDefault(require("dayjs"));
const isoWeek_1 = __importDefault(require("dayjs/plugin/isoWeek"));
const duration_1 = __importDefault(require("dayjs/plugin/duration"));
const isBetween_1 = __importDefault(require("dayjs/plugin/isBetween"));
const timezone_1 = __importDefault(require("dayjs/plugin/timezone"));
const utc_1 = __importDefault(require("dayjs/plugin/utc"));
const react_2 = require("@chakra-ui/react");
const axios_1 = __importDefault(require("axios"));
dayjs_1.default.extend(isoWeek_1.default);
dayjs_1.default.extend(duration_1.default);
dayjs_1.default.extend(isBetween_1.default);
dayjs_1.default.extend(timezone_1.default);
dayjs_1.default.extend(utc_1.default);
const MeetingAssistInternalAttendee = (props) => {
    const [primaryEmail, setPrimaryEmail] = (0, react_1.useState)(props?.primaryEmail || '');
    const [oldPrimaryEmail, setOldPrimaryEmail] = (0, react_1.useState)(props?.meetingAssistAttendee?.primaryEmail || '');
    const [name, setName] = (0, react_1.useState)(props?.meetingAssistAttendee?.name || '');
    const [contactPhone, setContactPhone] = (0, react_1.useState)('');
    const [contactEmail, setContactEmail] = (0, react_1.useState)('');
    const [verifiedUser, setVerifiedUser] = (0, react_1.useState)(false);
    const [registeredUser, setRegisteredUser] = (0, react_1.useState)();
    const [meetingAttendee, setMeetingAttendee] = (0, react_1.useState)();
    const [meetingAssist, setMeetingAssist] = (0, react_1.useState)();
    const router = (0, router_1.useRouter)();
    const toast = (0, react_2.useToast)();
    const { isOpen, onOpen, onClose } = (0, react_2.useDisclosure)();
    const cancelRef = (0, react_1.useRef)();
    const hostId = props?.hostId;
    const meetingId = props?.meetingId;
    const userId = props?.meetingAssistAttendee?.userId;
    const attendeeId = props?.attendeeId;
    console.log(props?.primaryEmail, ' props?.primaryEmail');
    // check internal user
    (0, react_1.useEffect)(() => {
        (async () => {
            try {
                // validate
                if (!primaryEmail) {
                    return;
                }
                // const userInfo = await getUserContactInfo(primaryEmail)
                // primaryEmail
                const userInfo = (await axios_1.default.post('/api/internal-attendee', {
                    method: 'getUserContactInfo',
                    variables: { id: primaryEmail },
                }))?.data;
                if (userInfo?.id) {
                    setVerifiedUser(true);
                    setRegisteredUser(userInfo);
                }
            }
            catch (e) {
                console.log(e, ' unable to get user info from primary email');
            }
        })();
    }, [primaryEmail]);
    // get old meeting assist attendee
    (0, react_1.useEffect)(() => {
        (async () => {
            try {
                if (!attendeeId) {
                    console.log('no attendeeId present to get old meeting attendee info');
                }
                // const oldMeetingAttendee = await getMeetingAssistAttendee(attendeeId as string)
                const oldMeetingAttendee = (await axios_1.default.post('/api/external-attendee', { method: 'getMeetingAssistAttendee', variables: { id: attendeeId } }))?.data;
                if (oldMeetingAttendee?.id) {
                    setMeetingAttendee(oldMeetingAttendee);
                    if (oldMeetingAttendee?.primaryEmail) {
                        setOldPrimaryEmail(oldMeetingAttendee?.primaryEmail);
                        setPrimaryEmail(oldMeetingAttendee?.primaryEmail);
                    }
                }
            }
            catch (e) {
                console.log(e, ' unable to get old meeting attendee');
            }
        })();
    }, [attendeeId]);
    // get meetingAssist
    (0, react_1.useEffect)(() => {
        (async () => {
            try {
                // const oldMeetingAssist = await getMeetingAssist(meetingId)
                const oldMeetingAssist = (await axios_1.default.post('/api/external-attendee', { method: 'getMeetingAssist', variables: { id: meetingId } }))?.data;
                setMeetingAssist(oldMeetingAssist);
                if (oldMeetingAssist?.cancelIfAnyRefuse) {
                    toast({
                        title: 'Meeting cancelled',
                        description: 'The meeting has been called',
                        status: 'warning',
                        duration: 9000,
                        isClosable: true
                    });
                }
            }
            catch (e) {
                console.log(e, ' unable to get meeting assist');
            }
        })();
    }, [meetingId, toast]);
    const verifyInternalAttendee = async () => {
        try {
            // validate
            if (!contactPhone && !contactEmail) {
                toast({
                    title: 'Contact info required to verify',
                    description: 'Either registered phone or email is required to verify you are registered with Atomic',
                    status: 'error',
                    duration: 9000,
                    isClosable: true,
                });
                return;
            }
            if (contactPhone) {
                const contactPhoneCleaned = contactPhone.replace(/[^\d]/g, '');
                // const userInfo = await getUserContactInfo(contactPhoneCleaned)
                const userInfo = (await axios_1.default.post('/api/internal-attendee', {
                    method: 'getUserContactInfo',
                    variables: { id: contactPhoneCleaned },
                }))?.data;
                if (userInfo?.id) {
                    setVerifiedUser(true);
                    setRegisteredUser(userInfo);
                    toast({
                        title: 'User verified',
                        description: 'You have been verified as an Atomic user!',
                        status: 'success',
                        duration: 9000,
                        isClosable: true,
                    });
                    return true;
                }
                else {
                    setVerifiedUser(false);
                    toast({
                        title: 'Contact info required to verify',
                        description: 'Either registered phone or email is required to verify you are registered with Atomic',
                        status: 'error',
                        duration: 9000,
                        isClosable: true,
                    });
                    return false;
                }
            }
            else if (contactEmail) {
                // const userInfo = await getUserContactInfo(contactEmail)
                const userInfo = (await axios_1.default.post('/api/internal-attendee', {
                    method: 'getUserContactInfo',
                    variables: { id: contactEmail },
                }))?.data;
                if (userInfo?.id) {
                    setVerifiedUser(true);
                    setRegisteredUser(userInfo);
                    toast({
                        title: 'User verified',
                        description: 'You have been verified as an Atomic user!',
                        status: 'success',
                        duration: 9000,
                        isClosable: true,
                    });
                    return true;
                }
                else {
                    setVerifiedUser(false);
                    toast({
                        title: 'Contact info required to verify',
                        description: 'Either registered phone or email is required to verify you are registered with Atomic',
                        status: 'error',
                        duration: 9000,
                        isClosable: true,
                    });
                    return false;
                }
            }
        }
        catch (e) {
            console.log(e, ' unable to verify if user is internal attendee');
        }
    };
    const updateAttendeeInfo = async () => {
        try {
            // validate
            if (!name) {
                toast({
                    title: 'Name required.',
                    description: "Name is required to confirm attendence.",
                    status: 'error',
                    duration: 9000,
                    isClosable: true,
                });
                return;
            }
            if (!primaryEmail) {
                toast({
                    title: 'Email is required',
                    description: 'Email is required to confirm attendence',
                    status: 'error',
                    duration: 9000,
                    isClosable: true
                });
                return;
            }
            if (!registeredUser?.userId && !userId) {
                toast({
                    title: 'Missing info',
                    description: 'User id is required but missing. Something went wrong somewhere. Let us know',
                    status: 'error',
                    duration: 9000,
                    isClosable: true
                });
                return;
            }
            const newAttendee = (await axios_1.default.post('/api/external-attendee', { method: 'upsertOneMeetingAssistAttendee', variables: { attendee: {
                        id: attendeeId,
                        name,
                        hostId,
                        userId: registeredUser?.userId ?? userId,
                        emails: props?.meetingAssistAttendee
                            ?.emails?.filter(e => (e?.value !== oldPrimaryEmail))
                            ?.filter(e => (!e?.primary))
                            ?.concat([{ primary: true, value: primaryEmail.toLowerCase().trim(), type: 'work', displayName: primaryEmail }])
                            || [{ primary: true, value: primaryEmail.toLowerCase().trim(), type: 'work', displayName: primaryEmail }],
                        meetingId,
                        createdDate: (0, dayjs_1.default)().format(),
                        timezone: dayjs_1.default.tz.guess(),
                        updatedAt: (0, dayjs_1.default)().format(),
                        externalAttendee: false,
                        primaryEmail,
                    } } }))?.data;
            setOldPrimaryEmail(newAttendee?.primaryEmail);
            if (!oldPrimaryEmail) {
                // new attendance count
                const newAttendanceCount = (meetingAssist?.attendeeCount || 0) + 1;
                const newAttendeeRespondedCount = (meetingAssist?.attendeeRespondedCount || 0) + 1;
                // await updateMeetingAssistAttendanceCount(meetingId, newAttendanceCount)
                await axios_1.default.post('/api/external-attendee', { method: 'updateMeetingAssistAttendanceCount', variables: { id: meetingId, attendeeCount: newAttendanceCount, attendeeRespondedCount: newAttendeeRespondedCount } });
                // update invite response
                await axios_1.default.post('/api/external-attendee', {
                    method: 'updateMeetingAssistInviteResponse',
                    variables: { id: attendeeId, response: 'ATTENDING' },
                });
            }
            setMeetingAttendee(newAttendee);
            toast({
                title: 'Successfully updated',
                description: 'You have sucessfully updated attendance information. Please proceed to the next step.',
                status: 'success',
                duration: 9000,
                isClosable: true
            });
        }
        catch (e) {
            toast({
                title: 'Oops...',
                description: 'Something went wrong, let us know so we can work on it',
                status: 'error',
                duration: 9000,
                isClosable: true
            });
            console.log(e, ' unable to update attendee info');
        }
    };
    const cancelConfirmation = async () => {
        try {
            if (!primaryEmail) {
                toast({
                    title: 'No email present',
                    description: 'Seems like there is no email to cancel confirmation',
                    status: 'warning',
                    duration: 9000,
                    isClosable: true
                });
                return;
            }
            // const oldAttendee = await getMeetingAssistAttendee(attendeeId)
            if (!meetingAttendee?.id) {
                toast({
                    title: 'No registration present',
                    description: 'Seems like there is no registration to cancel confirmation',
                    status: 'warning',
                    duration: 9000,
                    isClosable: true
                });
                return;
            }
            // await deleteMeetingAssistAttendee(meetingAttendee?.id)
            await axios_1.default.post('/api/external-attendee', { method: 'deleteMeetingAssistAttendee',
                variables: { id: meetingAttendee?.id }
            });
            toast({
                title: 'Confirmation cancelled',
                description: 'Your confirmation is cancelled succesfully',
                status: 'success',
                duration: 9000,
                isClosable: true
            });
            // new attendance count
            const newAttendanceCount = (meetingAssist?.attendeeCount || 0) - 1 < 0 ? 0 : meetingAssist?.attendeeCount - 1;
            // await updateMeetingAssistAttendanceCount(meetingId, newAttendanceCount)
            await axios_1.default.post('api/external-attendee', {
                method: 'updateMeetingAssistAttendanceCount',
                variables: { id: meetingId, attendeeCount: newAttendanceCount, attendeeRespondedCount: meetingAssist?.attendeeRespondedCount },
            });
            if (meetingAssist?.cancelIfAnyRefuse) {
                // await cancelMeetingAssist(meetingId)
                await axios_1.default.post('api/external-attendee', {
                    method: 'cancelMeetingAssist',
                    variables: { id: meetingId },
                });
            }
            // update invite response
            await axios_1.default.post('/api/external-attendee', {
                method: 'updateMeetingAssistInviteResponse',
                variables: { id: attendeeId, response: 'CANCELLED' },
            });
        }
        catch (e) {
            toast({
                title: 'Oops...',
                description: 'Something went wrong, let us know so we can work on it',
                status: 'error',
                duration: 9000,
                isClosable: true
            });
            console.log(e, ' unable to cancel confirmation');
        }
        onClose();
    };
    const handleChangeContactPhone = (e) => setContactPhone(e.target.value);
    const handleChangeContactEmail = (e) => setContactEmail(e.target.value);
    const handleChangeName = (e) => setName(e.target.value);
    const handleChangeEmail = (e) => setPrimaryEmail(e?.target?.value);
    if (!verifiedUser) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col justify-between items-center h-full w-full", children: [(0, jsx_runtime_1.jsxs)("div", { className: " sm:text-left lg:my-12 sm:my-8", children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-xl font-bold text-gray-900 dark:text-gray-200 sm:text-2xl", children: "Let's confirm you're an Atomic user" }), (0, jsx_runtime_1.jsx)("p", { className: "mt-1.5 text-sm text-gray-500", children: "Submit a phone number or email you registerd with Atomic to confirm! 🎉" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-1", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "ContactPhone", className: "block text-xs font-medium text-gray-700 dark:text-gray-300", children: "Phone Number" }), (0, jsx_runtime_1.jsx)("input", { type: "tel", pattern: "[0-9]{3}-[0-9]{3}-[0-9]{4}", id: "ContactPhone", placeholder: "123-456-7890", className: "peer invalid:border-pink-500 invalid:text-pink-600  mt-1 w-full rounded-md border-gray-200 shadow-sm sm:text-sm", value: contactPhone, onChange: handleChangeContactPhone }), (0, jsx_runtime_1.jsx)("p", { className: "invisible peer-invalid:visible text-pink-700 font-light", children: "Please follow the recommended format" }), (0, jsx_runtime_1.jsx)("p", { className: "mt-1.5 text-sm text-gray-500", children: "Format: 123-456-7890" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-6", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "ContactEmail", className: "block text-xs font-medium text-gray-700 dark:text-gray-300", children: "Email" }), (0, jsx_runtime_1.jsx)("input", { type: "email", id: "ContactEmail", placeholder: "john@email.com", className: "peer invalid:border-pink-500 invalid:text-pink-600  mt-1 w-full rounded-md border-gray-200 shadow-sm sm:text-sm", value: contactEmail, onChange: handleChangeContactEmail }), (0, jsx_runtime_1.jsx)("p", { className: "invisible peer-invalid:visible text-pink-700 font-light dark:text-gray-300", children: "Please enter a valid email address format" })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex justify-center items-center mb-3", children: (0, jsx_runtime_1.jsx)("button", { className: 'btn btn-primary', onClick: verifyInternalAttendee, children: 'Verify Atomic User' }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col justify-center items-center h-full w-full", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col justify-around items-center h-full w-full", children: [(0, jsx_runtime_1.jsxs)("div", { className: "sm:text-left lg:my-12 sm:my-8 lg:h-1/6 lg:w-1/2 lg:mx-3 mx-4", children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-xl font-bold text-gray-900 dark:text-gray-200 sm:text-2xl", children: "Let's confirm your attendance" }), (0, jsx_runtime_1.jsx)("p", { className: "mt-1.5 text-sm text-gray-500", children: "Submit your name and contact information to confirm your attendance! 🎉" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col justify-around items-center h-5/6 lg:w-1/2", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "Name", className: "block text-xs font-medium text-gray-700 dark:text-gray-300", children: "Name" }), (0, jsx_runtime_1.jsx)("input", { type: "text", id: "Name", placeholder: "john", className: "text-gray-900 peer invalid:border-pink-500 invalid:text-pink-600  mt-1 w-full rounded-md border-gray-200 shadow-sm sm:text-sm", value: name, required: true, onChange: handleChangeName }), (0, jsx_runtime_1.jsx)("p", { className: "invisible peer-invalid:visible text-pink-700 font-light", children: "Please enter your name for attendence confirmation" })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "UserEmail", className: "block text-xs font-medium text-gray-700 dark:text-gray-300", children: "Email" }), (0, jsx_runtime_1.jsx)("input", { type: "email", id: "UserEmail", placeholder: "john@rhcp.com", className: "text-gray-900 peer invalid:border-pink-500 invalid:text-pink-600  mt-1 w-full rounded-md border-gray-200 shadow-sm sm:text-sm", value: primaryEmail, onChange: handleChangeEmail, required: true }), (0, jsx_runtime_1.jsx)("p", { className: "invisible peer-invalid:visible text-pink-700 font-light", children: "Please enter a valid email address" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "m-auto my-2 w-1/2 lg:flex lg:justify-center lg:items-center lg:space-x-4 lg:w-full", children: [(0, jsx_runtime_1.jsx)("button", { className: 'btn btn-ghost', onClick: onOpen, children: 'Cancel Confirmation' }), (0, jsx_runtime_1.jsx)("button", { className: 'btn btn-primary', onClick: updateAttendeeInfo, children: 'Confirm Attendance' })] })] })] }), (0, jsx_runtime_1.jsx)(react_2.AlertDialog, { isOpen: isOpen, leastDestructiveRef: cancelRef, onClose: onClose, children: (0, jsx_runtime_1.jsx)(react_2.AlertDialogOverlay, { children: (0, jsx_runtime_1.jsxs)(react_2.AlertDialogContent, { children: [(0, jsx_runtime_1.jsx)(react_2.AlertDialogHeader, { fontSize: 'lg', fontWeight: 'bold', children: "Cancel Confirmation" }), (0, jsx_runtime_1.jsx)(react_2.AlertDialogBody, { children: "Are you sure? Your confirmation will be cancelled" }), (0, jsx_runtime_1.jsxs)(react_2.AlertDialogFooter, { children: [(0, jsx_runtime_1.jsx)("button", { className: 'btn btn-ghost', ref: cancelRef, onClick: onClose, children: "Cancel" }), (0, jsx_runtime_1.jsx)("button", { className: 'btn ml-3', onClick: cancelConfirmation, children: "Delete" })] })] }) }) })] }));
};
exports.default = MeetingAssistInternalAttendee;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJuYWwtYXR0ZW5kZWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbnRlcm5hbC1hdHRlbmRlZS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsaUNBQWdFO0FBRWhFLHdDQUF1QztBQUd2QyxrREFBeUI7QUFDekIsbUVBQTBDO0FBQzFDLHFFQUE0QztBQUM1Qyx1RUFBOEM7QUFDOUMscUVBQTRDO0FBQzVDLDJEQUFrQztBQUVsQyw0Q0FVeUI7QUFDekIsa0RBQXlCO0FBRXpCLGVBQUssQ0FBQyxNQUFNLENBQUMsaUJBQU8sQ0FBQyxDQUFBO0FBQ3JCLGVBQUssQ0FBQyxNQUFNLENBQUMsa0JBQVEsQ0FBQyxDQUFBO0FBQ3RCLGVBQUssQ0FBQyxNQUFNLENBQUMsbUJBQVMsQ0FBQyxDQUFBO0FBQ3ZCLGVBQUssQ0FBQyxNQUFNLENBQUMsa0JBQVEsQ0FBQyxDQUFBO0FBQ3RCLGVBQUssQ0FBQyxNQUFNLENBQUMsYUFBRyxDQUFDLENBQUE7QUFVakIsTUFBTSw2QkFBNkIsR0FBb0IsQ0FBQyxLQUFZLEVBQUUsRUFBRTtJQUNwRSxNQUFNLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBUyxLQUFLLEVBQUUsWUFBWSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ25GLE1BQU0sQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVMsS0FBSyxFQUFFLHFCQUFxQixFQUFFLFlBQVksSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUNoSCxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBUyxLQUFLLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ2xGLE1BQU0sQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFTLEVBQUUsQ0FBQyxDQUFBO0lBQzVELE1BQU0sQ0FBQyxZQUFZ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NEQsc0JBRXpGLEVBRVIsa0NBQ0ksSUFBSSxFQUFDLE9BQU8sRUFDWixFQUFFLEVBQUMsV0FBVyxFQUNkLFdBQVcsRUFBQyxlQUFlLEVBQzNCLFNBQVMsRUFBQywrSEFBK0gsRUFDekksS0FBSyxFQUFFLFlBQVksRUFDbkIsUUFBUSxFQUFFLGlCQUFpQixFQUMzQixRQUFRLFNBQ1YsRUFDRiw4QkFBRyxTQUFTLEVBQUMseURBQXlELG1EQUVsRSxJQUNGLElBQ0osRUFDTixpQ0FBSyxTQUFTLEVBQUMsb0ZBQW9GLGFBQy9GLG1DQUFRLFNBQVMsRUFBQyxlQUFlLEVBQUUsT0FBTyxFQUFFLE1BQU0sWUFDN0MscUJBQXFCLEdBQ2pCLEVBQ1QsbUNBQVEsU0FBUyxFQUFDLGlCQUFpQixFQUFDLE9BQU8sRUFBRSxrQkFBa0IsWUFDMUQsb0JBQW9CLEdBQ2hCLElBQ1AsSUFDSixJQUNKLEVBQ04sdUJBQUMsbUJBQVcsSUFDUixNQUFNLEVBQUUsTUFBTSxFQUNkLG1CQUFtQixFQUFFLFNBQWdCLEVBQ3JDLE9BQU8sRUFBRSxPQUFPLFlBRWhCLHVCQUFDLDBCQUFrQixjQUNmLHdCQUFDLDBCQUFrQixlQUNmLHVCQUFDLHlCQUFpQixJQUFDLFFBQVEsRUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLE1BQU0sb0NBRTlCLEVBRXBCLHVCQUFDLHVCQUFlLGNBQ1gsbURBQW1ELEdBQ3RDLEVBRWxCLHdCQUFDLHlCQUFpQixlQUNsQixtQ0FBUSxTQUFTLEVBQUMsZUFBZSxFQUFDLEdBQUcsRUFBRSxTQUFnQixFQUFFLE9BQU8sRUFBRSxPQUFPLHVCQUVoRSxFQUNULG1DQUFRLFNBQVMsRUFBQyxVQUFVLEVBQUMsT0FBTyxFQUFFLGtCQUFrQix1QkFFL0MsSUFDVyxJQUNILEdBQ0EsR0FDZixJQUNaLENBQ1QsQ0FBQTtBQUNMLENBQUMsQ0FBQTtBQUVELGtCQUFlLDZCQUE2QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRXZlbnQsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgdHlwZSB7IE5leHRQYWdlIH0gZnJvbSAnbmV4dCdcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnXG5pbXBvcnQgeyBFbWFpbFR5cGUsIE1lZXRpbmdBc3Npc3RBdHRlbmRlZVR5cGUsIE1lZXRpbmdBc3Npc3RUeXBlLCBVc2VyQ29udGFjdEluZm9UeXBlIH0gZnJvbSBcIkBsaWIvdHlwZXNcIlxuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJ1xuaW1wb3J0IGlzb1dlZWsgZnJvbSAnZGF5anMvcGx1Z2luL2lzb1dlZWsnXG5pbXBvcnQgZHVyYXRpb24gZnJvbSAnZGF5anMvcGx1Z2luL2R1cmF0aW9uJ1xuaW1wb3J0IGlzQmV0d2VlbiBmcm9tICdkYXlqcy9wbHVnaW4vaXNCZXR3ZWVuJ1xuaW1wb3J0IHRpbWV6b25lIGZyb20gJ2RheWpzL3BsdWdpbi90aW1lem9uZSdcbmltcG9ydCB1dGMgZnJvbSAnZGF5anMvcGx1Z2luL3V0YydcblxuaW1wb3J0IHtcbiAgICBBbGVydERpYWxvZyxcbiAgICBBbGVydERpYWxvZ0JvZHksXG4gICAgQWxlcnREaWFsb2dGb290ZXIsXG4gICAgQWxlcnREaWFsb2dIZWFkZXIsXG4gICAgQWxlcnREaWFsb2dDb250ZW50LFxuICAgIEFsZXJ0RGlhbG9nT3ZlcmxheSxcbiAgICBCdXR0b24sXG4gICAgdXNlRGlzY2xvc3VyZSxcbiAgICB1c2VUb2FzdFxufSBmcm9tICdAY2hha3JhLXVpL3JlYWN0J1xuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiXG5cbmRheWpzLmV4dGVuZChpc29XZWVrKVxuZGF5anMuZXh0ZW5kKGR1cmF0aW9uKVxuZGF5anMuZXh0ZW5kKGlzQmV0d2VlbilcbmRheWpzLmV4dGVuZCh0aW1lem9uZSlcbmRheWpzLmV4dGVuZCh1dGMpXG5cbnR5cGUgUHJvcHMgPSB7XG4gICAgbWVldGluZ0Fzc2lzdEF0dGVuZGVlPzogTWVldGluZ0Fzc2lzdEF0dGVuZGVlVHlwZSxcbiAgICBob3N0SWQ6IHN0cmluZyxcbiAgICBwcmltYXJ5RW1haWw/OiBzdHJpbmcsXG4gICAgbWVldGluZ0lkOiBzdHJpbmcsXG4gICAgYXR0ZW5kZWVJZDogc3RyaW5nLFxufVxuXG5jb25zdCBNZWV0aW5nQXNzaXN0SW50ZXJuYWxBdHRlbmRlZTogTmV4dFBhZ2U8UHJvcHM+ID0gKHByb3BzOiBQcm9wcykgPT4ge1xuICAgIGNvbnN0IFtwcmltYXJ5RW1haWwsIHNldFByaW1hcnlFbWFpbF0gPSB1c2VTdGF0ZTxzdHJpbmc+KHByb3BzPy5wcmltYXJ5RW1haWwgfHwgJycpXG4gICAgY29uc3QgW29sZFByaW1hcnlFbWFpbCwgc2V0T2xkUHJpbWFyeUVtYWlsXSA9IHVzZVN0YXRlPHN0cmluZz4ocHJvcHM/Lm1lZXRpbmdBc3Npc3RBdHRlbmRlZT8ucHJpbWFyeUVtYWlsIHx8ICcnKVxuICAgIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlPHN0cmluZz4ocHJvcHM/Lm1lZXRpbmdBc3Npc3RBdHRlbmRlZT8ubmFtZSB8fCAnJylcbiAgICBjb25zdCBbY29udGFjdFBob25lLCBzZXRDb250YWN0UGhvbmVdID0gdXNlU3RhdGU8c3RyaW5nPignJylcbiAgICBjb25zdCBbY29udGFjdEVtYWlsLCBzZXRDb250YWN0RW1haWxdID0gdXNlU3RhdGU8c3RyaW5nPignJylcbiAgICBjb25zdCBbdmVyaWZpZWRVc2VyLCBzZXRWZXJpZmllZFVzZXJdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gICAgY29uc3QgW3JlZ2lzdGVyZWRVc2VyLCBzZXRSZWdpc3RlcmVkVXNlcl0gPSB1c2VTdGF0ZTxVc2VyQ29udGFjdEluZm9UeXBlPigpXG4gICAgY29uc3QgW21lZXRpbmdBdHRlbmRlZSwgc2V0TWVldGluZ0F0dGVuZGVlXSA9IHVzZVN0YXRlPE1lZXRpbmdBc3Npc3RBdHRlbmRlZVR5cGU+KClcbiAgICBjb25zdCBbbWVldGluZ0Fzc2lzdCwgc2V0TWVldGluZ0Fzc2lzdF0gPSB1c2VTdGF0ZTxNZWV0aW5nQXNzaXN0VHlwZT4oKVxuXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcbiAgICBjb25zdCB0b2FzdCA9IHVzZVRvYXN0KClcbiAgICBjb25zdCB7IGlzT3Blbiwgb25PcGVuLCBvbkNsb3NlIH0gPSB1c2VEaXNjbG9zdXJlKClcbiAgICBjb25zdCBjYW5jZWxSZWYgPSB1c2VSZWYoKVxuXG4gICAgY29uc3QgaG9zdElkID0gcHJvcHM/Lmhvc3RJZFxuICAgIGNvbnN0IG1lZXRpbmdJZCA9IHByb3BzPy5tZWV0aW5nSWRcbiAgICBjb25zdCB1c2VySWQgPSBwcm9wcz8ubWVldGluZ0Fzc2lzdEF0dGVuZGVlPy51c2VySWRcbiAgICBjb25zdCBhdHRlbmRlZUlkID0gcHJvcHM/LmF0dGVuZGVlSWRcbiAgICBjb25zb2xlLmxvZyhwcm9wcz8ucHJpbWFyeUVtYWlsLCAnIHByb3BzPy5wcmltYXJ5RW1haWwnKVxuXG4gICAgLy8gY2hlY2sgaW50ZXJuYWwgdXNlclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIHZhbGlkYXRlXG4gICAgICAgICAgICAgICAgaWYgKCFwcmltYXJ5RW1haWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgdXNlckluZm8gPSBhd2FpdCBnZXRVc2VyQ29udGFjdEluZm8ocHJpbWFyeUVtYWlsKVxuICAgICAgICAgICAgICAgIC8vIHByaW1hcnlFbWFpbFxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJbmZvID0gKGF3YWl0IGF4aW9zLnBvc3Q8VXNlckNvbnRhY3RJbmZvVHlwZT4oJy9hcGkvaW50ZXJuYWwtYXR0ZW5kZWUnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldFVzZXJDb250YWN0SW5mbycsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogeyBpZDogcHJpbWFyeUVtYWlsIH0sXG4gICAgICAgICAgICAgICAgfSkpPy5kYXRhXG5cbiAgICAgICAgICAgICAgICBpZiAodXNlckluZm8/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFZlcmlmaWVkVXNlcih0cnVlKVxuICAgICAgICAgICAgICAgICAgICBzZXRSZWdpc3RlcmVkVXNlcih1c2VySW5mbylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IHVzZXIgaW5mbyBmcm9tIHByaW1hcnkgZW1haWwnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpXG4gICAgfSwgW3ByaW1hcnlFbWFpbF0pXG5cbiAgICAvLyBnZXQgb2xkIG1lZXRpbmcgYXNzaXN0IGF0dGVuZGVlXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhdHRlbmRlZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdubyBhdHRlbmRlZUlkIHByZXNlbnQgdG8gZ2V0IG9sZCBtZWV0aW5nIGF0dGVuZGVlIGluZm8nKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjb25zdCBvbGRNZWV0aW5nQXR0ZW5kZWUgPSBhd2FpdCBnZXRNZWV0aW5nQXNzaXN0QXR0ZW5kZWUoYXR0ZW5kZWVJZCBhcyBzdHJpbmcpXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTWVldGluZ0F0dGVuZGVlOiBNZWV0aW5nQXNzaXN0QXR0ZW5kZWVUeXBlID0gKGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvZXh0ZXJuYWwtYXR0ZW5kZWUnLCB7IG1ldGhvZDogJ2dldE1lZXRpbmdBc3Npc3RBdHRlbmRlZScsIHZhcmlhYmxlczogeyBpZDogYXR0ZW5kZWVJZCB9IH0pKT8uZGF0YVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChvbGRNZWV0aW5nQXR0ZW5kZWU/LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldE1lZXRpbmdBdHRlbmRlZShvbGRNZWV0aW5nQXR0ZW5kZWUpXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRNZWV0aW5nQXR0ZW5kZWU/LnByaW1hcnlFbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAgIHNldE9sZFByaW1hcnlFbWFpbChvbGRNZWV0aW5nQXR0ZW5kZWU/LnByaW1hcnlFbWFpbClcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQcmltYXJ5RW1haWwob2xkTWVldGluZ0F0dGVuZGVlPy5wcmltYXJ5RW1haWwpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBnZXQgb2xkIG1lZXRpbmcgYXR0ZW5kZWUnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpXG4gICAgfSwgW2F0dGVuZGVlSWRdKVxuXG4gICAgLy8gZ2V0IG1lZXRpbmdBc3Npc3RcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBvbGRNZWV0aW5nQXNzaXN0ID0gYXdhaXQgZ2V0TWVldGluZ0Fzc2lzdChtZWV0aW5nSWQpXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTWVldGluZ0Fzc2lzdDogTWVldGluZ0Fzc2lzdFR5cGUgPSAoYXdhaXQgYXhpb3MucG9zdCgnL2FwaS9leHRlcm5hbC1hdHRlbmRlZScsIHsgbWV0aG9kOiAnZ2V0TWVldGluZ0Fzc2lzdCcsIHZhcmlhYmxlczogeyBpZDogbWVldGluZ0lkICB9fSkpPy5kYXRhXG4gICAgICAgICAgICAgICAgc2V0TWVldGluZ0Fzc2lzdChvbGRNZWV0aW5nQXNzaXN0KVxuXG4gICAgICAgICAgICAgICAgaWYgKG9sZE1lZXRpbmdBc3Npc3Q/LmNhbmNlbElmQW55UmVmdXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTWVldGluZyBjYW5jZWxsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgbWVldGluZyBoYXMgYmVlbiBjYWxsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSwgJyB1bmFibGUgdG8gZ2V0IG1lZXRpbmcgYXNzaXN0JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkoKVxuICAgIH0sIFttZWV0aW5nSWQsIHRvYXN0XSlcblxuICAgIGNvbnN0IHZlcmlmeUludGVybmFsQXR0ZW5kZWUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyB2YWxpZGF0ZVxuICAgICAgICAgICAgaWYgKCFjb250YWN0UGhvbmUgJiYgIWNvbnRhY3RFbWFpbCkge1xuICAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDb250YWN0IGluZm8gcmVxdWlyZWQgdG8gdmVyaWZ5JyxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFaXRoZXIgcmVnaXN0ZXJlZCBwaG9uZSBvciBlbWFpbCBpcyByZXF1aXJlZCB0byB2ZXJpZnkgeW91IGFyZSByZWdpc3RlcmVkIHdpdGggQXRvbWljJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb250YWN0UGhvbmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0UGhvbmVDbGVhbmVkID0gY29udGFjdFBob25lLnJlcGxhY2UoL1teXFxkXS9nLCAnJylcbiAgICAgICAgICAgICAgICAvLyBjb25zdCB1c2VySW5mbyA9IGF3YWl0IGdldFVzZXJDb250YWN0SW5mbyhjb250YWN0UGhvbmVDbGVhbmVkKVxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJbmZvID0gKGF3YWl0IGF4aW9zLnBvc3Q8VXNlckNvbnRhY3RJbmZvVHlwZT4oJy9hcGkvaW50ZXJuYWwtYXR0ZW5kZWUnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldFVzZXJDb250YWN0SW5mbycsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogeyBpZDogY29udGFjdFBob25lQ2xlYW5lZCB9LFxuICAgICAgICAgICAgICAgIH0pKT8uZGF0YVxuXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJbmZvPy5pZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRWZXJpZmllZFVzZXIodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVnaXN0ZXJlZFVzZXIodXNlckluZm8pXG4gICAgICAgICAgICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1VzZXIgdmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdZb3UgaGF2ZSBiZWVuIHZlcmlmaWVkIGFzIGFuIEF0b21pYyB1c2VyIScsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRWZXJpZmllZFVzZXIoZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NvbnRhY3QgaW5mbyByZXF1aXJlZCB0byB2ZXJpZnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFaXRoZXIgcmVnaXN0ZXJlZCBwaG9uZSBvciBlbWFpbCBpcyByZXF1aXJlZCB0byB2ZXJpZnkgeW91IGFyZSByZWdpc3RlcmVkIHdpdGggQXRvbWljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb250YWN0RW1haWwpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zdCB1c2VySW5mbyA9IGF3YWl0IGdldFVzZXJDb250YWN0SW5mbyhjb250YWN0RW1haWwpXG4gICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJbmZvID0gKGF3YWl0IGF4aW9zLnBvc3Q8VXNlckNvbnRhY3RJbmZvVHlwZT4oJy9hcGkvaW50ZXJuYWwtYXR0ZW5kZWUnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldFVzZXJDb250YWN0SW5mbycsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogeyBpZDogY29udGFjdEVtYWlsIH0sXG4gICAgICAgICAgICAgICAgIH0pKT8uZGF0YVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh1c2VySW5mbz8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VmVyaWZpZWRVc2VyKHRydWUpXG4gICAgICAgICAgICAgICAgICAgIHNldFJlZ2lzdGVyZWRVc2VyKHVzZXJJbmZvKVxuICAgICAgICAgICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1VzZXIgdmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdZb3UgaGF2ZSBiZWVuIHZlcmlmaWVkIGFzIGFuIEF0b21pYyB1c2VyIScsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRWZXJpZmllZFVzZXIoZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ29udGFjdCBpbmZvIHJlcXVpcmVkIHRvIHZlcmlmeScsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0VpdGhlciByZWdpc3RlcmVkIHBob25lIG9yIGVtYWlsIGlzIHJlcXVpcmVkIHRvIHZlcmlmeSB5b3UgYXJlIHJlZ2lzdGVyZWQgd2l0aCBBdG9taWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHZlcmlmeSBpZiB1c2VyIGlzIGludGVybmFsIGF0dGVuZGVlJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZUF0dGVuZGVlSW5mbyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlXG4gICAgICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTmFtZSByZXF1aXJlZC4nLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJOYW1lIGlzIHJlcXVpcmVkIHRvIGNvbmZpcm0gYXR0ZW5kZW5jZS5cIixcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXByaW1hcnlFbWFpbCkge1xuICAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFbWFpbCBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW1haWwgaXMgcmVxdWlyZWQgdG8gY29uZmlybSBhdHRlbmRlbmNlJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcmVnaXN0ZXJlZFVzZXI/LnVzZXJJZCAmJiAhdXNlcklkKSB7XG4gICAgICAgICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ01pc3NpbmcgaW5mbycsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBpZCBpcyByZXF1aXJlZCBidXQgbWlzc2luZy4gU29tZXRoaW5nIHdlbnQgd3Jvbmcgc29tZXdoZXJlLiBMZXQgdXMga25vdycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIGNvbnN0IG5ld0F0dGVuZGVlOiBNZWV0aW5nQXNzaXN0QXR0ZW5kZWVUeXBlID0gKGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvZXh0ZXJuYWwtYXR0ZW5kZWUnLCB7IG1ldGhvZDogJ3Vwc2VydE9uZU1lZXRpbmdBc3Npc3RBdHRlbmRlZScsIHZhcmlhYmxlczogeyBhdHRlbmRlZToge1xuICAgICAgICAgICAgICAgIGlkOiBhdHRlbmRlZUlkLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgaG9zdElkLFxuICAgICAgICAgICAgICAgIHVzZXJJZDogcmVnaXN0ZXJlZFVzZXI/LnVzZXJJZCBhcyBzdHJpbmcgPz8gdXNlcklkLFxuICAgICAgICAgICAgICAgIGVtYWlsczogcHJvcHM/Lm1lZXRpbmdBc3Npc3RBdHRlbmRlZVxuICAgICAgICAgICAgICAgICAgICA/LmVtYWlscz8uZmlsdGVyKGUgPT4gKGU/LnZhbHVlICE9PSBvbGRQcmltYXJ5RW1haWwpKVxuICAgICAgICAgICAgICAgICAgICA/LmZpbHRlcihlID0+ICghZT8ucHJpbWFyeSkpXG4gICAgICAgICAgICAgICAgICAgID8uY29uY2F0KFt7IHByaW1hcnk6IHRydWUsIHZhbHVlOiBwcmltYXJ5RW1haWwudG9Mb3dlckNhc2UoKS50cmltKCksIHR5cGU6ICd3b3JrJywgZGlzcGxheU5hbWU6IHByaW1hcnlFbWFpbCB9XSkgYXMgRW1haWxUeXBlW11cbiAgICAgICAgICAgICAgICAgICAgfHwgW3sgcHJpbWFyeTogdHJ1ZSwgdmFsdWU6IHByaW1hcnlFbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKSwgdHlwZTogJ3dvcmsnLCBkaXNwbGF5TmFtZTogcHJpbWFyeUVtYWlsIH1dIGFzIEVtYWlsVHlwZVtdLFxuICAgICAgICAgICAgICAgIG1lZXRpbmdJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkRGF0ZTogZGF5anMoKS5mb3JtYXQoKSxcbiAgICAgICAgICAgICAgICB0aW1lem9uZTogZGF5anMudHouZ3Vlc3MoKSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRheWpzKCkuZm9ybWF0KCksXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxBdHRlbmRlZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJpbWFyeUVtYWlsLFxuICAgICAgICAgICAgfX19KSk/LmRhdGFcblxuICAgICAgICAgICAgc2V0T2xkUHJpbWFyeUVtYWlsKG5ld0F0dGVuZGVlPy5wcmltYXJ5RW1haWwgYXMgc3RyaW5nKVxuXG4gICAgICAgICAgICBpZiAoIW9sZFByaW1hcnlFbWFpbCkge1xuICAgICAgICAgICAgICAgIC8vIG5ldyBhdHRlbmRhbmNlIGNvdW50XG5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdBdHRlbmRhbmNlQ291bnQgPSAobWVldGluZ0Fzc2lzdD8uYXR0ZW5kZWVDb3VudCB8fCAwKSArIDFcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdBdHRlbmRlZVJlc3BvbmRlZENvdW50ID0gKG1lZXRpbmdBc3Npc3Q/LmF0dGVuZGVlUmVzcG9uZGVkQ291bnQgfHwgMCkgKyAxXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gYXdhaXQgdXBkYXRlTWVldGluZ0Fzc2lzdEF0dGVuZGFuY2VDb3VudChtZWV0aW5nSWQsIG5ld0F0dGVuZGFuY2VDb3VudClcbiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL2V4dGVybmFsLWF0dGVuZGVlJywgeyBtZXRob2Q6ICd1cGRhdGVNZWV0aW5nQXNzaXN0QXR0ZW5kYW5jZUNvdW50JywgdmFyaWFibGVzOiB7IGlkOiBtZWV0aW5nSWQsIGF0dGVuZGVlQ291bnQ6IG5ld0F0dGVuZGFuY2VDb3VudCwgYXR0ZW5kZWVSZXNwb25kZWRDb3VudDogbmV3QXR0ZW5kZWVSZXNwb25kZWRDb3VudCB9IH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGludml0ZSByZXNwb25zZVxuICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvZXh0ZXJuYWwtYXR0ZW5kZWUnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3VwZGF0ZU1lZXRpbmdBc3Npc3RJbnZpdGVSZXNwb25zZScsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogeyBpZDogYXR0ZW5kZWVJZCwgcmVzcG9uc2U6ICdBVFRFTkRJTkcnIH0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0TWVldGluZ0F0dGVuZGVlKG5ld0F0dGVuZGVlKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzZnVsbHkgdXBkYXRlZCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdZb3UgaGF2ZSBzdWNlc3NmdWxseSB1cGRhdGVkIGF0dGVuZGFuY2UgaW5mb3JtYXRpb24uIFBsZWFzZSBwcm9jZWVkIHRvIHRoZSBuZXh0IHN0ZXAuJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTb21ldGhpbmcgd2VudCB3cm9uZywgbGV0IHVzIGtub3cgc28gd2UgY2FuIHdvcmsgb24gaXQnLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUsICcgdW5hYmxlIHRvIHVwZGF0ZSBhdHRlbmRlZSBpbmZvJylcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2FuY2VsQ29uZmlybWF0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFwcmltYXJ5RW1haWwpIHtcbiAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdObyBlbWFpbCBwcmVzZW50JyxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTZWVtcyBsaWtlIHRoZXJlIGlzIG5vIGVtYWlsIHRvIGNhbmNlbCBjb25maXJtYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDkwMDAsXG4gICAgICAgICAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWVcbiAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNvbnN0IG9sZEF0dGVuZGVlID0gYXdhaXQgZ2V0TWVldGluZ0Fzc2lzdEF0dGVuZGVlKGF0dGVuZGVlSWQpXG5cbiAgICAgICAgICAgIGlmICghbWVldGluZ0F0dGVuZGVlPy5pZCkge1xuICAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdObyByZWdpc3RyYXRpb24gcHJlc2VudCcsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2VlbXMgbGlrZSB0aGVyZSBpcyBubyByZWdpc3RyYXRpb24gdG8gY2FuY2VsIGNvbmZpcm1hdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaXNDbG9zYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGF3YWl0IGRlbGV0ZU1lZXRpbmdBc3Npc3RBdHRlbmRlZShtZWV0aW5nQXR0ZW5kZWU/LmlkKVxuICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgnL2FwaS9leHRlcm5hbC1hdHRlbmRlZScsIHsgbWV0aG9kOiAnZGVsZXRlTWVldGluZ0Fzc2lzdEF0dGVuZGVlJyxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaWQ6IG1lZXRpbmdBdHRlbmRlZT8uaWQgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgICAgIHRpdGxlOiAnQ29uZmlybWF0aW9uIGNhbmNlbGxlZCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdZb3VyIGNvbmZpcm1hdGlvbiBpcyBjYW5jZWxsZWQgc3VjY2VzZnVsbHknLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWVcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC8vIG5ldyBhdHRlbmRhbmNlIGNvdW50XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld0F0dGVuZGFuY2VDb3VudCA9IChtZWV0aW5nQXNzaXN0Py5hdHRlbmRlZUNvdW50IHx8IDApIC0gMSA8IDAgPyAwIDogKG1lZXRpbmdBc3Npc3Q/LmF0dGVuZGVlQ291bnQgYXMgbnVtYmVyKSAtIDFcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXdhaXQgdXBkYXRlTWVldGluZ0Fzc2lzdEF0dGVuZGFuY2VDb3VudChtZWV0aW5nSWQsIG5ld0F0dGVuZGFuY2VDb3VudClcbiAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ2FwaS9leHRlcm5hbC1hdHRlbmRlZScsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICd1cGRhdGVNZWV0aW5nQXNzaXN0QXR0ZW5kYW5jZUNvdW50JyxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaWQ6IG1lZXRpbmdJZCwgYXR0ZW5kZWVDb3VudDogbmV3QXR0ZW5kYW5jZUNvdW50LCBhdHRlbmRlZVJlc3BvbmRlZENvdW50OiBtZWV0aW5nQXNzaXN0Py5hdHRlbmRlZVJlc3BvbmRlZENvdW50IH0sXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAobWVldGluZ0Fzc2lzdD8uY2FuY2VsSWZBbnlSZWZ1c2UpIHtcbiAgICAgICAgICAgICAgICAvLyBhd2FpdCBjYW5jZWxNZWV0aW5nQXNzaXN0KG1lZXRpbmdJZClcbiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCdhcGkvZXh0ZXJuYWwtYXR0ZW5kZWUnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2NhbmNlbE1lZXRpbmdBc3Npc3QnLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaWQ6IG1lZXRpbmdJZCB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBpbnZpdGUgcmVzcG9uc2VcbiAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvZXh0ZXJuYWwtYXR0ZW5kZWUnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAndXBkYXRlTWVldGluZ0Fzc2lzdEludml0ZVJlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaWQ6IGF0dGVuZGVlSWQsIHJlc3BvbnNlOiAnQ0FOQ0VMTEVEJyB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NvbWV0aGluZyB3ZW50IHdyb25nLCBsZXQgdXMga25vdyBzbyB3ZSBjYW4gd29yayBvbiBpdCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA5MDAwLFxuICAgICAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLCAnIHVuYWJsZSB0byBjYW5jZWwgY29uZmlybWF0aW9uJylcbiAgICAgICAgfVxuICAgICAgICBvbkNsb3NlKClcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVDaGFuZ2VDb250YWN0UGhvbmUgPSAoZTogQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHNldENvbnRhY3RQaG9uZShlLnRhcmdldC52YWx1ZSlcblxuICAgIGNvbnN0IGhhbmRsZUNoYW5nZUNvbnRhY3RFbWFpbCA9IChlOiBDaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gc2V0Q29udGFjdEVtYWlsKGUudGFyZ2V0LnZhbHVlKVxuXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlTmFtZSA9IChlOiBDaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gc2V0TmFtZShlLnRhcmdldC52YWx1ZSlcblxuICAgIGNvbnN0IGhhbmRsZUNoYW5nZUVtYWlsID0gKGU6IENoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiBzZXRQcmltYXJ5RW1haWwoZT8udGFyZ2V0Py52YWx1ZSlcblxuICAgIGlmICghdmVyaWZpZWRVc2VyKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgc206dGV4dC1sZWZ0IGxnOm15LTEyIHNtOm15LThcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMjAwIHNtOnRleHQtMnhsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJMZXQncyBjb25maXJtIHlvdSdyZSBhbiBBdG9taWMgdXNlclwifVxuICAgICAgICAgICAgICAgICAgICA8L2gxPlxuXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEuNSB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcIlN1Ym1pdCBhIHBob25lIG51bWJlciBvciBlbWFpbCB5b3UgcmVnaXN0ZXJkIHdpdGggQXRvbWljIHRvIGNvbmZpcm0hIPCfjolcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIkNvbnRhY3RQaG9uZVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFBob25lIE51bWJlclxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuPVwiWzAtOV17M30tWzAtOV17M30tWzAtOV17NH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJDb250YWN0UGhvbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIxMjMtNDU2LTc4OTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicGVlciBpbnZhbGlkOmJvcmRlci1waW5rLTUwMCBpbnZhbGlkOnRleHQtcGluay02MDAgIG10LTEgdy1mdWxsIHJvdW5kZWQtbWQgYm9yZGVyLWdyYXktMjAwIHNoYWRvdy1zbSBzbTp0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb250YWN0UGhvbmV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlQ29udGFjdFBob25lfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiaW52aXNpYmxlIHBlZXItaW52YWxpZDp2aXNpYmxlIHRleHQtcGluay03MDAgZm9udC1saWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgUGxlYXNlIGZvbGxvdyB0aGUgcmVjb21tZW5kZWQgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMS41IHRleHQtc20gdGV4dC1ncmF5LTUwMFwiPkZvcm1hdDogMTIzLTQ1Ni03ODkwPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNlwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIkNvbnRhY3RFbWFpbFwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEVtYWlsXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJDb250YWN0RW1haWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJqb2huQGVtYWlsLmNvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwZWVyIGludmFsaWQ6Ym9yZGVyLXBpbmstNTAwIGludmFsaWQ6dGV4dC1waW5rLTYwMCAgbXQtMSB3LWZ1bGwgcm91bmRlZC1tZCBib3JkZXItZ3JheS0yMDAgc2hhZG93LXNtIHNtOnRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvbnRhY3RFbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VDb250YWN0RW1haWx9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJpbnZpc2libGUgcGVlci1pbnZhbGlkOnZpc2libGUgdGV4dC1waW5rLTcwMCBmb250LWxpZ2h0IGRhcms6dGV4dC1ncmF5LTMwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcyBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5JyBvbkNsaWNrPXt2ZXJpZnlJbnRlcm5hbEF0dGVuZGVlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsnVmVyaWZ5IEF0b21pYyBVc2VyJ31cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgaC1mdWxsIHctZnVsbFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGp1c3RpZnktYXJvdW5kIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbTp0ZXh0LWxlZnQgbGc6bXktMTIgc206bXktOCBsZzpoLTEvNiBsZzp3LTEvMiBsZzpteC0zIG14LTRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMjAwIHNtOnRleHQtMnhsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJMZXQncyBjb25maXJtIHlvdXIgYXR0ZW5kYW5jZVwifVxuICAgICAgICAgICAgICAgICAgICA8L2gxPlxuXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEuNSB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcIlN1Ym1pdCB5b3VyIG5hbWUgYW5kIGNvbnRhY3QgaW5mb3JtYXRpb24gdG8gY29uZmlybSB5b3VyIGF0dGVuZGFuY2UhIPCfjolcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWFyb3VuZCBpdGVtcy1jZW50ZXIgaC01LzYgbGc6dy0xLzJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJOYW1lXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIGRhcms6dGV4dC1ncmF5LTMwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiTmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiam9oblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS05MDAgcGVlciBpbnZhbGlkOmJvcmRlci1waW5rLTUwMCBpbnZhbGlkOnRleHQtcGluay02MDAgIG10LTEgdy1mdWxsIHJvdW5kZWQtbWQgYm9yZGVyLWdyYXktMjAwIHNoYWRvdy1zbSBzbTp0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiaW52aXNpYmxlIHBlZXItaW52YWxpZDp2aXNpYmxlIHRleHQtcGluay03MDAgZm9udC1saWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2UgZW50ZXIgeW91ciBuYW1lIGZvciBhdHRlbmRlbmNlIGNvbmZpcm1hdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIlVzZXJFbWFpbFwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW1haWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiVXNlckVtYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJqb2huQHJoY3AuY29tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTkwMCBwZWVyIGludmFsaWQ6Ym9yZGVyLXBpbmstNTAwIGludmFsaWQ6dGV4dC1waW5rLTYwMCAgbXQtMSB3LWZ1bGwgcm91bmRlZC1tZCBib3JkZXItZ3JheS0yMDAgc2hhZG93LXNtIHNtOnRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJpbWFyeUVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlRW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJpbnZpc2libGUgcGVlci1pbnZhbGlkOnZpc2libGUgdGV4dC1waW5rLTcwMCBmb250LWxpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibS1hdXRvIG15LTIgdy0xLzIgbGc6ZmxleCBsZzpqdXN0aWZ5LWNlbnRlciBsZzppdGVtcy1jZW50ZXIgbGc6c3BhY2UteC00IGxnOnctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9J2J0biBidG4tZ2hvc3QnICBvbkNsaWNrPXtvbk9wZW59PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnQ2FuY2VsIENvbmZpcm1hdGlvbid9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknIG9uQ2xpY2s9e3VwZGF0ZUF0dGVuZGVlSW5mb30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeydDb25maXJtIEF0dGVuZGFuY2UnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8QWxlcnREaWFsb2dcbiAgICAgICAgICAgICAgICBpc09wZW49e2lzT3Blbn1cbiAgICAgICAgICAgICAgICBsZWFzdERlc3RydWN0aXZlUmVmPXtjYW5jZWxSZWYgYXMgYW55fVxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e29uQ2xvc2V9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEFsZXJ0RGlhbG9nT3ZlcmxheT5cbiAgICAgICAgICAgICAgICAgICAgPEFsZXJ0RGlhbG9nQ29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbGVydERpYWxvZ0hlYWRlciBmb250U2l6ZT0nbGcnIGZvbnRXZWlnaHQ9J2JvbGQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbCBDb25maXJtYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQWxlcnREaWFsb2dIZWFkZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbGVydERpYWxvZ0JvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1wiQXJlIHlvdSBzdXJlPyBZb3VyIGNvbmZpcm1hdGlvbiB3aWxsIGJlIGNhbmNlbGxlZFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9BbGVydERpYWxvZ0JvZHk+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbGVydERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4gYnRuLWdob3N0JyByZWY9e2NhbmNlbFJlZiBhcyBhbnl9IG9uQ2xpY2s9e29uQ2xvc2V9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuIG1sLTMnIG9uQ2xpY2s9e2NhbmNlbENvbmZpcm1hdGlvbn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVsZXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQWxlcnREaWFsb2dGb290ZXI+XG4gICAgICAgICAgICAgICAgICAgIDwvQWxlcnREaWFsb2dDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICA8L0FsZXJ0RGlhbG9nT3ZlcmxheT5cbiAgICAgICAgICAgIDwvQWxlcnREaWFsb2c+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVldGluZ0Fzc2lzdEludGVybmFsQXR0ZW5kZWVcbiJdfQ==