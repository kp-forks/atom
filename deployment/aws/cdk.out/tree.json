{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.201.0"},"children":{"AwsStack":{"id":"AwsStack","path":"AwsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"AtomicFunctionsRepo":{"id":"AtomicFunctionsRepo","path":"AwsStack/AtomicFunctionsRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.201.0","metadata":[{"repositoryName":"*","removalPolicy":"destroy","autoDeleteImages":true}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicFunctionsRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"atomic-functions","tags":[{"key":"aws-cdk:auto-delete-images","value":"true"}]}}},"AutoDeleteImagesCustomResource":{"id":"AutoDeleteImagesCustomResource","path":"AwsStack/AtomicFunctionsRepo/AutoDeleteImagesCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"AwsStack/AtomicFunctionsRepo/AutoDeleteImagesCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"Custom::ECRAutoDeleteImagesCustomResourceProvider":{"id":"Custom::ECRAutoDeleteImagesCustomResourceProvider","path":"AwsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.201.0"},"children":{"Staging":{"id":"Staging","path":"AwsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"Role":{"id":"Role","path":"AwsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Handler":{"id":"Handler","path":"AwsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"FunctionsRepoUri":{"id":"FunctionsRepoUri","path":"AwsStack/FunctionsRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AtomicHandshakeRepo":{"id":"AtomicHandshakeRepo","path":"AwsStack/AtomicHandshakeRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.201.0","metadata":[{"repositoryName":"*","removalPolicy":"destroy","autoDeleteImages":true}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicHandshakeRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"atomic-handshake","tags":[{"key":"aws-cdk:auto-delete-images","value":"true"}]}}},"AutoDeleteImagesCustomResource":{"id":"AutoDeleteImagesCustomResource","path":"AwsStack/AtomicHandshakeRepo/AutoDeleteImagesCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"AwsStack/AtomicHandshakeRepo/AutoDeleteImagesCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"HandshakeRepoUri":{"id":"HandshakeRepoUri","path":"AwsStack/HandshakeRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AtomicOauthRepo":{"id":"AtomicOauthRepo","path":"AwsStack/AtomicOauthRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.201.0","metadata":[{"repositoryName":"*","removalPolicy":"destroy","autoDeleteImages":true}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicOauthRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"atomic-oauth","tags":[{"key":"aws-cdk:auto-delete-images","value":"true"}]}}},"AutoDeleteImagesCustomResource":{"id":"AutoDeleteImagesCustomResource","path":"AwsStack/AtomicOauthRepo/AutoDeleteImagesCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"AwsStack/AtomicOauthRepo/AutoDeleteImagesCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"OauthRepoUri":{"id":"OauthRepoUri","path":"AwsStack/OauthRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AtomicAppRepo":{"id":"AtomicAppRepo","path":"AwsStack/AtomicAppRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.201.0","metadata":[{"repositoryName":"*","removalPolicy":"destroy","autoDeleteImages":true}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicAppRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"atomic-app","tags":[{"key":"aws-cdk:auto-delete-images","value":"true"}]}}},"AutoDeleteImagesCustomResource":{"id":"AutoDeleteImagesCustomResource","path":"AwsStack/AtomicAppRepo/AutoDeleteImagesCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"AwsStack/AtomicAppRepo/AutoDeleteImagesCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"AppRepoUri":{"id":"AppRepoUri","path":"AwsStack/AppRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AtomicVpc":{"id":"AtomicVpc","path":"AwsStack/AtomicVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.201.0","metadata":[{"maxAzs":"*","natGateways":"*","subnetConfiguration":[{"cidrMask":"*","name":"*","subnetType":"Public"},{"cidrMask":"*","name":"*","subnetType":"Private"}]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"AwsStack/AtomicVpc"}]}}},"PublicSubnetSubnet1":{"id":"PublicSubnetSubnet1","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.201.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]},"children":{"Subnet":{"id":"Subnet","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"AwsStack/AtomicVpc/PublicSubnetSubnet1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"Acl":{"id":"Acl","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AwsStack/AtomicVpc/PublicSubnetSubnet1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AtomicVpcPublicSubnetSubnet1RouteTable2ADC4781"},"subnetId":{"Ref":"AtomicVpcPublicSubnetSubnet1SubnetA3F000BA"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"AtomicVpcIGW53D98970"},"routeTableId":{"Ref":"AtomicVpcPublicSubnetSubnet1RouteTable2ADC4781"}}}},"EIP":{"id":"EIP","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"AwsStack/AtomicVpc/PublicSubnetSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"AwsStack/AtomicVpc/PublicSubnetSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["AtomicVpcPublicSubnetSubnet1EIP7AEE3E7A","AllocationId"]},"subnetId":{"Ref":"AtomicVpcPublicSubnetSubnet1SubnetA3F000BA"},"tags":[{"key":"Name","value":"AwsStack/AtomicVpc/PublicSubnetSubnet1"}]}}}}},"PublicSubnetSubnet2":{"id":"PublicSubnetSubnet2","path":"AwsStack/AtomicVpc/PublicSubnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.201.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"AwsStack/AtomicVpc/PublicSubnetSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"AwsStack/AtomicVpc/PublicSubnetSubnet2"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"Acl":{"id":"Acl","path":"AwsStack/AtomicVpc/PublicSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AwsStack/AtomicVpc/PublicSubnetSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AwsStack/AtomicVpc/PublicSubnetSubnet2"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AwsStack/AtomicVpc/PublicSubnetSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AtomicVpcPublicSubnetSubnet2RouteTable0A3C697C"},"subnetId":{"Ref":"AtomicVpcPublicSubnetSubnet2Subnet4556046B"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AwsStack/AtomicVpc/PublicSubnetSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"AtomicVpcIGW53D98970"},"routeTableId":{"Ref":"AtomicVpcPublicSubnetSubnet2RouteTable0A3C697C"}}}}}},"PrivateSubnetSubnet1":{"id":"PrivateSubnetSubnet1","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.201.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateSubnet"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"AwsStack/AtomicVpc/PrivateSubnetSubnet1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"Acl":{"id":"Acl","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AwsStack/AtomicVpc/PrivateSubnetSubnet1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AtomicVpcPrivateSubnetSubnet1RouteTable6D554B41"},"subnetId":{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"AtomicVpcPublicSubnetSubnet1NATGateway76048EA8"},"routeTableId":{"Ref":"AtomicVpcPrivateSubnetSubnet1RouteTable6D554B41"}}}}}},"PrivateSubnetSubnet2":{"id":"PrivateSubnetSubnet2","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.201.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateSubnet"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"AwsStack/AtomicVpc/PrivateSubnetSubnet2"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"Acl":{"id":"Acl","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AwsStack/AtomicVpc/PrivateSubnetSubnet2"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AtomicVpcPrivateSubnetSubnet2RouteTable8E7D1813"},"subnetId":{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AwsStack/AtomicVpc/PrivateSubnetSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"AtomicVpcPublicSubnetSubnet1NATGateway76048EA8"},"routeTableId":{"Ref":"AtomicVpcPrivateSubnetSubnet2RouteTable8E7D1813"}}}}}},"IGW":{"id":"IGW","path":"AwsStack/AtomicVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AwsStack/AtomicVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"AwsStack/AtomicVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"AtomicVpcIGW53D98970"},"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"AwsStack/AtomicVpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"AwsStack/AtomicVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"AwsStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.201.0"},"children":{"Staging":{"id":"Staging","path":"AwsStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"Role":{"id":"Role","path":"AwsStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Handler":{"id":"Handler","path":"AwsStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"VpcId":{"id":"VpcId","path":"AwsStack/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"RdsSecurityGroup":{"id":"RdsSecurityGroup","path":"AwsStack/RdsSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*"]},{"addIngressRule":["*",{},"*"]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/RdsSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow inbound traffic to RDS from within VPC","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackSupertokensSGC2B15E92:5432":{"id":"from AwsStackSupertokensSGC2B15E92:5432","path":"AwsStack/RdsSecurityGroup/from AwsStackSupertokensSGC2B15E92:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Supertokens to connect to RDS","fromPort":5432,"groupId":{"Fn::GetAtt":["RdsSecurityGroup632A77E4","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["SupertokensSG8D961012","GroupId"]},"toPort":5432}}},"from AwsStackHasuraSGB75C4017:5432":{"id":"from AwsStackHasuraSGB75C4017:5432","path":"AwsStack/RdsSecurityGroup/from AwsStackHasuraSGB75C4017:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Hasura to connect to RDS","fromPort":5432,"groupId":{"Fn::GetAtt":["RdsSecurityGroup632A77E4","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["HasuraSGF7432EF8","GroupId"]},"toPort":5432}}}}},"AtomicPostgresDB":{"id":"AtomicPostgresDB","path":"AwsStack/AtomicPostgresDB","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.201.0","metadata":[{"engine":{"engineType":"*","singleUserRotationApplication":"*","engineVersion":{"fullVersion":"*","majorVersion":"*"},"parameterGroupFamily":"*","engineFamily":"*","defaultUsername":"*"},"instanceType":"*","vpc":"*","vpcSubnets":{"subnetType":"Private"},"securityGroups":["*"],"credentials":"*","databaseName":"*","removalPolicy":"destroy","publiclyAccessible":false}]},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"AwsStack/AtomicPostgresDB/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.201.0","metadata":[{"description":"*","vpc":"*","vpcSubnets":{"subnetType":"Private"},"removalPolicy":"*"}]},"children":{"Default":{"id":"Default","path":"AwsStack/AtomicPostgresDB/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for AtomicPostgresDB database","subnetIds":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}]}}}}},"Secret":{"id":"Secret","path":"AwsStack/AtomicPostgresDB/Secret","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.201.0","metadata":[{"encryptionKey":"*","secretName":"*","replicaRegions":"*"},{"username":"*","secretName":"*","encryptionKey":"*","excludeCharacters":"*","replaceOnPasswordCriteriaChanges":true,"replicaRegions":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicPostgresDB/Secret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"PostgresAdminCredentials\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"}}}},"Attachment":{"id":"Attachment","path":"AwsStack/AtomicPostgresDB/Secret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.201.0","metadata":[{"secret":"*","target":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicPostgresDB/Secret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"AwsStackAtomicPostgresDBSecret13CD6E0E3fdaad7efa858a3daf9490cf0a702aeb"},"targetId":{"Ref":"AtomicPostgresDB2E9D697F"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"Resource":{"id":"Resource","path":"AwsStack/AtomicPostgresDB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"100","copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.small","dbName":"atomicdb","dbSubnetGroupName":{"Ref":"AtomicPostgresDBSubnetGroup067D56E3"},"engine":"postgres","engineVersion":"15","masterUsername":"PostgresAdminCredentials","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"AwsStackAtomicPostgresDBSecret13CD6E0E3fdaad7efa858a3daf9490cf0a702aeb"},":SecretString:password::}}"]]},"publiclyAccessible":false,"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["RdsSecurityGroup632A77E4","GroupId"]}]}}}}},"DbInstanceEndpoint":{"id":"DbInstanceEndpoint","path":"AwsStack/DbInstanceEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"DbSecretArn":{"id":"DbSecretArn","path":"AwsStack/DbSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AtomicCluster":{"id":"AtomicCluster","path":"AwsStack/AtomicCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.201.0","metadata":[{"vpc":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}}}}},"ClusterName":{"id":"ClusterName","path":"AwsStack/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AlbSecurityGroup":{"id":"AlbSecurityGroup","path":"AwsStack/AlbSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":true},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*"]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AlbSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow HTTP/HTTPS traffic to ALB","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow HTTP from anywhere"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"AtomicAlb":{"id":"AtomicAlb","path":"AwsStack/AtomicAlb","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.201.0","metadata":["*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicAlb/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]}],"subnets":[{"Ref":"AtomicVpcPublicSubnetSubnet1SubnetA3F000BA"},{"Ref":"AtomicVpcPublicSubnetSubnet2Subnet4556046B"}],"type":"application"}}},"HttpListener":{"id":"HttpListener","path":"AwsStack/AtomicAlb/HttpListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.201.0","metadata":["*","*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AtomicAlb/HttpListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"fixed-response","fixedResponseConfig":{"statusCode":"404","contentType":"text/plain","messageBody":"Resource not found"}}],"loadBalancerArn":{"Ref":"AtomicAlbF873927A"},"port":80,"protocol":"HTTP"}}}}}}},"AlbDnsName":{"id":"AlbDnsName","path":"AwsStack/AlbDnsName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"AlbHttpListenerArn":{"id":"AlbHttpListenerArn","path":"AwsStack/AlbHttpListenerArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"ECSTaskRole":{"id":"ECSTaskRole","path":"AwsStack/ECSTaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"description":"*"},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportECSTaskRole":{"id":"ImportECSTaskRole","path":"AwsStack/ECSTaskRole/ImportECSTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"AwsStack/ECSTaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Role for ECS tasks to access other AWS services"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AwsStack/ECSTaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/ECSTaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:secretsmanager:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":secret:AwsStack/*"]]},{"Ref":"ApiTokenSecret3A926DEB"},{"Ref":"AtomicPostgresDBSecretAttachmentDB0B9A31"},{"Ref":"HasuraAdminSecret359C72F3"},{"Ref":"HasuraDbConnStringSecret6DFFC41D"},{"Ref":"OpenAiApiKeySecret05681F66"},{"Ref":"PlaceholderHasuraJwtSecret5A36E06E"},{"Ref":"SupertokensDbConnStringSecretC2E71EE2"}]},{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AppLogGroup7D8CD952","Arn"]},{"Fn::GetAtt":["FunctionsLogGroup0226F429","Arn"]},{"Fn::GetAtt":["HandshakeLogGroup90831F6C","Arn"]},{"Fn::GetAtt":["OAuthLogGroupF9A7E869","Arn"]},{"Fn::Join":["",["arn:aws:logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/*"]]}]},{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AtomicAppRepo2D8E1244","Arn"]},{"Fn::GetAtt":["AtomicFunctionsRepoCA9ADB29","Arn"]},{"Fn::GetAtt":["AtomicHandshakeRepo7FD56D21","Arn"]},{"Fn::GetAtt":["AtomicOauthRepoCAF08457","Arn"]}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":[{"Ref":"ApiTokenSecret3A926DEB"},{"Ref":"HasuraAdminSecret359C72F3"},{"Ref":"OpenAiApiKeySecret05681F66"}]}],"Version":"2012-10-17"},"policyName":"ECSTaskRoleDefaultPolicy82FC9293","roles":[{"Ref":"ECSTaskRoleF2ADB362"}]}}}}}}},"SupertokensDbConnStringSecret":{"id":"SupertokensDbConnStringSecret","path":"AwsStack/SupertokensDbConnStringSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.201.0","metadata":[{"secretName":"*","description":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensDbConnStringSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Manually populate with: postgresql://${DB_USER}:${DB_PASS}@${DB_HOST}:${DB_PORT}/${DB_NAME}","generateSecretString":{},"name":"AwsStack/SupertokensDbConnString"}}}}},"SupertokensDbConnStringSecretArn":{"id":"SupertokensDbConnStringSecretArn","path":"AwsStack/SupertokensDbConnStringSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"HasuraDbConnStringSecret":{"id":"HasuraDbConnStringSecret","path":"AwsStack/HasuraDbConnStringSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.201.0","metadata":[{"secretName":"*","description":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraDbConnStringSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Manually populate with: postgres://${DB_USER}:${DB_PASS}@${DB_HOST}:${DB_PORT}/${DB_NAME}","generateSecretString":{},"name":"AwsStack/HasuraDbConnString"}}}}},"HasuraDbConnStringSecretArn":{"id":"HasuraDbConnStringSecretArn","path":"AwsStack/HasuraDbConnStringSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"PlaceholderHasuraJwtSecret":{"id":"PlaceholderHasuraJwtSecret","path":"AwsStack/PlaceholderHasuraJwtSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.201.0","metadata":[{"secretName":"*","description":"*","secretStringValue":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/PlaceholderHasuraJwtSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Placeholder for HASURA_GRAPHQL_JWT_SECRET. MUST be replaced in AWS Secrets Manager console with a valid JSON containing a strong 256-bit key. Example structure: {\"type\":\"HS256\",\"key\":\"YOUR_STRONG_SECRET_KEY\",\"issuer\":\"supertokens\"}","name":"AwsStack/HasuraJwtSecret","secretString":"{\"type\":\"HS256\",\"key\":\"REPLACE_WITH_A_STRONG_64_CHAR_HEX_SECRET_OR_MIN_32_CHAR_ASCII\",\"issuer\":\"supertokens\"}"}}}}},"PlaceholderHasuraJwtSecretArn":{"id":"PlaceholderHasuraJwtSecretArn","path":"AwsStack/PlaceholderHasuraJwtSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"ApiTokenSecret":{"id":"ApiTokenSecret","path":"AwsStack/ApiTokenSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.201.0","metadata":[{"secretName":"*","description":"*","generateSecretString":{"passwordLength":"*","excludePunctuation":true}}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/ApiTokenSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Generic API token for inter-service communication.","generateSecretString":{"passwordLength":32,"excludePunctuation":true},"name":"AwsStack/InternalApiToken"}}}}},"ApiTokenSecretArn":{"id":"ApiTokenSecretArn","path":"AwsStack/ApiTokenSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"OpenAiApiKeySecret":{"id":"OpenAiApiKeySecret","path":"AwsStack/OpenAiApiKeySecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.201.0","metadata":[{"secretName":"*","description":"*"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/OpenAiApiKeySecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Manually populate with actual OpenAI API Key","generateSecretString":{},"name":"AwsStack/OpenAiApiKey"}}}}},"OpenAiApiKeySecretArn":{"id":"OpenAiApiKeySecretArn","path":"AwsStack/OpenAiApiKeySecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"HasuraAdminSecret":{"id":"HasuraAdminSecret","path":"AwsStack/HasuraAdminSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.201.0","metadata":[{"secretName":"*","description":"*","generateSecretString":{"secretStringTemplate":"*","generateStringKey":"*","passwordLength":"*","excludePunctuation":true}}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraAdminSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Admin secret for Hasura GraphQL engine","generateSecretString":{"secretStringTemplate":"{\"HASURA_GRAPHQL_ADMIN_SECRET\":\"dummyPasswordPlaceholder\"}","generateStringKey":"HASURA_GRAPHQL_ADMIN_SECRET_VALUE","passwordLength":32,"excludePunctuation":true},"name":"AwsStack/HasuraAdminSecret"}}}}},"HasuraAdminSecretOutput":{"id":"HasuraAdminSecretOutput","path":"AwsStack/HasuraAdminSecretOutput","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"SupertokensSG":{"id":"SupertokensSG","path":"AwsStack/SupertokensSG","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensSG/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AwsStack/SupertokensSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackAlbSecurityGroupFEFFD71B:3567":{"id":"from AwsStackAlbSecurityGroupFEFFD71B:3567","path":"AwsStack/SupertokensSG/from AwsStackAlbSecurityGroupFEFFD71B:3567","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow SuperTokens from ALB","fromPort":3567,"groupId":{"Fn::GetAtt":["SupertokensSG8D961012","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":3567}}}}},"SupertokensTaskDef":{"id":"SupertokensTaskDef","path":"AwsStack/SupertokensTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"2.201.0","metadata":["*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"registry.supertokens.io/supertokens/supertokens-postgresql:6.0","name":"SupertokensContainer","portMappings":[{"containerPort":3567,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"SupertokensLogGroup841B0C09"},"awslogs-stream-prefix":"supertokens-ecs","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"POSTGRESQL_TABLE_NAMES_PREFIX","value":"Supertokens"}],"secrets":[{"name":"POSTGRESQL_CONNECTION_URI","valueFrom":{"Ref":"SupertokensDbConnStringSecretC2E71EE2"}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["SupertokensTaskDefExecutionRole30464032","Arn"]},"family":"supertokens-fargate","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]}}}},"SupertokensContainer":{"id":"SupertokensContainer","path":"AwsStack/SupertokensTaskDef/SupertokensContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.201.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"AwsStack/SupertokensTaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"AwsStack/SupertokensTaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"AwsStack/SupertokensTaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AwsStack/SupertokensTaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensTaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SupertokensLogGroup841B0C09","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"SupertokensDbConnStringSecretC2E71EE2"}}],"Version":"2012-10-17"},"policyName":"SupertokensTaskDefExecutionRoleDefaultPolicy9F77350D","roles":[{"Ref":"SupertokensTaskDefExecutionRole30464032"}]}}}}}}}}},"SupertokensLogGroup":{"id":"SupertokensLogGroup","path":"AwsStack/SupertokensLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/supertokens"]]},"retentionInDays":731}}}}},"SupertokensService":{"id":"SupertokensService","path":"AwsStack/SupertokensService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.201.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"AwsStack/SupertokensService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AtomicCluster0DDF655C"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"SupertokensTargetGroupEC539A5A"},"containerName":"SupertokensContainer","containerPort":3567}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}],"securityGroups":[{"Fn::GetAtt":["SupertokensSG8D961012","GroupId"]}]}},"taskDefinition":{"Ref":"SupertokensTaskDef562C1644"}}}}}},"SupertokensTargetGroup":{"id":"SupertokensTargetGroup","path":"AwsStack/SupertokensTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/hello","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":3567,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":2,"vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"SupertokensListenerRule":{"id":"SupertokensListenerRule","path":"AwsStack/SupertokensListenerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/SupertokensListenerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"SupertokensTargetGroupEC539A5A"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/v1/auth/*"]}}],"listenerArn":{"Ref":"AtomicAlbHttpListener370F09B3"},"priority":10}}}}},"HasuraSG":{"id":"HasuraSG","path":"AwsStack/HasuraSG","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraSG/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AwsStack/HasuraSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackAlbSecurityGroupFEFFD71B:8080":{"id":"from AwsStackAlbSecurityGroupFEFFD71B:8080","path":"AwsStack/HasuraSG/from AwsStackAlbSecurityGroupFEFFD71B:8080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Hasura from ALB","fromPort":8080,"groupId":{"Fn::GetAtt":["HasuraSGF7432EF8","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":8080}}},"from AwsStackFunctionsSG4487B393:8080":{"id":"from AwsStackFunctionsSG4487B393:8080","path":"AwsStack/HasuraSG/from AwsStackFunctionsSG4487B393:8080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Functions to connect to Hasura","fromPort":8080,"groupId":{"Fn::GetAtt":["HasuraSGF7432EF8","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["FunctionsSGE05723DC","GroupId"]},"toPort":8080}}},"from AwsStackHandshakeSG021993A2:8080":{"id":"from AwsStackHandshakeSG021993A2:8080","path":"AwsStack/HasuraSG/from AwsStackHandshakeSG021993A2:8080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Handshake to connect to Hasura","fromPort":8080,"groupId":{"Fn::GetAtt":["HasuraSGF7432EF8","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["HandshakeSGAE954E91","GroupId"]},"toPort":8080}}},"from AwsStackOAuthSG55F90F09:8080":{"id":"from AwsStackOAuthSG55F90F09:8080","path":"AwsStack/HasuraSG/from AwsStackOAuthSG55F90F09:8080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow OAuth to connect to Hasura","fromPort":8080,"groupId":{"Fn::GetAtt":["HasuraSGF7432EF8","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["OAuthSGCA2E2DFC","GroupId"]},"toPort":8080}}}}},"HasuraTaskDef":{"id":"HasuraTaskDef","path":"AwsStack/HasuraTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"2.201.0","metadata":["*","*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"hasura/graphql-engine:v2.38.0","name":"HasuraContainer","portMappings":[{"containerPort":8080,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"HasuraLogGroupB47AF772"},"awslogs-stream-prefix":"hasura-ecs","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"HASURA_GRAPHQL_UNAUTHORIZED_ROLE","value":"public"},{"name":"HASURA_GRAPHQL_LOG_LEVEL","value":"debug"},{"name":"HASURA_GRAPHQL_ENABLE_CONSOLE","value":"true"},{"name":"HASURA_GRAPHQL_DEV_MODE","value":"true"}],"secrets":[{"name":"HASURA_GRAPHQL_ADMIN_SECRET","valueFrom":{"Ref":"HasuraAdminSecret359C72F3"}},{"name":"HASURA_GRAPHQL_JWT_SECRET","valueFrom":{"Ref":"PlaceholderHasuraJwtSecret5A36E06E"}},{"name":"HASURA_GRAPHQL_DATABASE_URL","valueFrom":{"Ref":"HasuraDbConnStringSecret6DFFC41D"}}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["HasuraTaskDefExecutionRoleD3078284","Arn"]},"family":"hasura-fargate","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]}}}},"HasuraContainer":{"id":"HasuraContainer","path":"AwsStack/HasuraTaskDef/HasuraContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.201.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"AwsStack/HasuraTaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"AwsStack/HasuraTaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"AwsStack/HasuraTaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AwsStack/HasuraTaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraTaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["HasuraLogGroupB47AF772","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":[{"Ref":"HasuraAdminSecret359C72F3"},{"Ref":"HasuraDbConnStringSecret6DFFC41D"},{"Ref":"PlaceholderHasuraJwtSecret5A36E06E"}]}],"Version":"2012-10-17"},"policyName":"HasuraTaskDefExecutionRoleDefaultPolicy7A47E19B","roles":[{"Ref":"HasuraTaskDefExecutionRoleD3078284"}]}}}}}}}}},"HasuraLogGroup":{"id":"HasuraLogGroup","path":"AwsStack/HasuraLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/hasura"]]},"retentionInDays":731}}}}},"HasuraService":{"id":"HasuraService","path":"AwsStack/HasuraService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.201.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"AwsStack/HasuraService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AtomicCluster0DDF655C"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"HasuraTargetGroup0636F42A"},"containerName":"HasuraContainer","containerPort":8080}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}],"securityGroups":[{"Fn::GetAtt":["HasuraSGF7432EF8","GroupId"]}]}},"taskDefinition":{"Ref":"HasuraTaskDef31ABDC68"}}}}}},"HasuraTargetGroup":{"id":"HasuraTargetGroup","path":"AwsStack/HasuraTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/healthz","port":8080,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"HasuraListenerRule":{"id":"HasuraListenerRule","path":"AwsStack/HasuraListenerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/HasuraListenerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"HasuraTargetGroup0636F42A"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/v1/graphql/*"]}}],"listenerArn":{"Ref":"AtomicAlbHttpListener370F09B3"},"priority":20}}}}},"FunctionsSG":{"id":"FunctionsSG","path":"AwsStack/FunctionsSG","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*",false]},{"addEgressRule":["*",{},"*",true]},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/FunctionsSG/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AwsStack/FunctionsSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackAlbSecurityGroupFEFFD71B:80":{"id":"from AwsStackAlbSecurityGroupFEFFD71B:80","path":"AwsStack/FunctionsSG/from AwsStackAlbSecurityGroupFEFFD71B:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Functions from ALB on its container port","fromPort":80,"groupId":{"Fn::GetAtt":["FunctionsSGE05723DC","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":80}}}}},"FunctionsTaskDef":{"id":"FunctionsTaskDef","path":"AwsStack/FunctionsTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"2.201.0","metadata":["*","*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/FunctionsTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicFunctionsRepoCA9ADB29","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicFunctionsRepoCA9ADB29","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"AtomicFunctionsRepoCA9ADB29"},":latest"]]},"name":"FunctionsContainer","portMappings":[{"containerPort":80,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"FunctionsLogGroup0226F429"},"awslogs-stream-prefix":"functions-ecs","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"HASURA_GRAPHQL_GRAPHQL_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/graphql"]]}},{"name":"FUNCTION_SERVER_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/functions"]]}},{"name":"APP_CLIENT_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]}]]}}],"secrets":[{"name":"HASURA_GRAPHQL_ADMIN_SECRET","valueFrom":{"Ref":"HasuraAdminSecret359C72F3"}},{"name":"OPENAI_API_KEY","valueFrom":{"Ref":"OpenAiApiKeySecret05681F66"}}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]},"family":"functions-fargate","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]}}}},"FunctionsContainer":{"id":"FunctionsContainer","path":"AwsStack/FunctionsTaskDef/FunctionsContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.201.0"}}}},"FunctionsLogGroup":{"id":"FunctionsLogGroup","path":"AwsStack/FunctionsLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/FunctionsLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/functions"]]},"retentionInDays":731}}}}},"FunctionsService":{"id":"FunctionsService","path":"AwsStack/FunctionsService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.201.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"AwsStack/FunctionsService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AtomicCluster0DDF655C"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"FunctionsTargetGroup7D789BB7"},"containerName":"FunctionsContainer","containerPort":80}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}],"securityGroups":[{"Fn::GetAtt":["FunctionsSGE05723DC","GroupId"]}]}},"taskDefinition":{"Ref":"FunctionsTaskDef51ECFDE2"}}}}}},"FunctionsTargetGroup":{"id":"FunctionsTargetGroup","path":"AwsStack/FunctionsTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/FunctionsTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/v1/functions/healthz","healthCheckTimeoutSeconds":5,"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"FunctionsListenerRule":{"id":"FunctionsListenerRule","path":"AwsStack/FunctionsListenerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/FunctionsListenerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"FunctionsTargetGroup7D789BB7"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/v1/functions/*"]}}],"listenerArn":{"Ref":"AtomicAlbHttpListener370F09B3"},"priority":30}}}}},"AppSG":{"id":"AppSG","path":"AwsStack/AppSG","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AppSG/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AwsStack/AppSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackAlbSecurityGroupFEFFD71B:3000":{"id":"from AwsStackAlbSecurityGroupFEFFD71B:3000","path":"AwsStack/AppSG/from AwsStackAlbSecurityGroupFEFFD71B:3000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow App from ALB on its container port","fromPort":3000,"groupId":{"Fn::GetAtt":["AppSG652848D9","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":3000}}}}},"AppTaskDef":{"id":"AppTaskDef","path":"AwsStack/AppTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"2.201.0","metadata":["*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AppTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicAppRepo2D8E1244","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicAppRepo2D8E1244","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"AtomicAppRepo2D8E1244"},":latest"]]},"name":"AppContainer","portMappings":[{"containerPort":3000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"AppLogGroup7D8CD952"},"awslogs-stream-prefix":"app-ecs","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"NEXT_PUBLIC_HASURA_GRAPHQL_GRAPHQL_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/graphql"]]}},{"name":"NEXT_PUBLIC_HASURA_GRAPHQL_GRAPHQL_WS_URL","value":{"Fn::Join":["",["ws://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/graphql"]]}},{"name":"NEXT_PUBLIC_SUPERTOKENS_API_DOMAIN","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/auth"]]}},{"name":"NEXT_PUBLIC_HANDSHAKE_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/handshake/"]]}},{"name":"NEXT_PUBLIC_EVENT_TO_QUEUE_AUTH_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/functions/eventToQueueAuth"]]}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]},"family":"app-fargate","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]}}}},"AppContainer":{"id":"AppContainer","path":"AwsStack/AppTaskDef/AppContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.201.0"}}}},"AppLogGroup":{"id":"AppLogGroup","path":"AwsStack/AppLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/AppLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/app"]]},"retentionInDays":731}}}}},"AppService":{"id":"AppService","path":"AwsStack/AppService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.201.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"AwsStack/AppService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AtomicCluster0DDF655C"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"AppTargetGroup3D716DB6"},"containerName":"AppContainer","containerPort":3000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}],"securityGroups":[{"Fn::GetAtt":["AppSG652848D9","GroupId"]}]}},"taskDefinition":{"Ref":"AppTaskDef32F3E122"}}}}}},"AppTargetGroup":{"id":"AppTargetGroup","path":"AwsStack/AppTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/AppTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/","healthCheckTimeoutSeconds":5,"port":3000,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"AppListenerRule":{"id":"AppListenerRule","path":"AwsStack/AppListenerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/AppListenerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"AppTargetGroup3D716DB6"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/*"]}}],"listenerArn":{"Ref":"AtomicAlbHttpListener370F09B3"},"priority":100}}}}},"HandshakeSG":{"id":"HandshakeSG","path":"AwsStack/HandshakeSG","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*",false]},{"addEgressRule":["*",{},"*",true]},{"addIngressRule":["*",{},"*",false]},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HandshakeSG/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AwsStack/HandshakeSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackAlbSecurityGroupFEFFD71B:80":{"id":"from AwsStackAlbSecurityGroupFEFFD71B:80","path":"AwsStack/HandshakeSG/from AwsStackAlbSecurityGroupFEFFD71B:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Handshake from ALB on its container port","fromPort":80,"groupId":{"Fn::GetAtt":["HandshakeSGAE954E91","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":80}}},"from AwsStackOAuthSG55F90F09:80":{"id":"from AwsStackOAuthSG55F90F09:80","path":"AwsStack/HandshakeSG/from AwsStackOAuthSG55F90F09:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow OAuth to connect to Handshake","fromPort":80,"groupId":{"Fn::GetAtt":["HandshakeSGAE954E91","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["OAuthSGCA2E2DFC","GroupId"]},"toPort":80}}}}},"HandshakeTaskDef":{"id":"HandshakeTaskDef","path":"AwsStack/HandshakeTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"2.201.0","metadata":["*","*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HandshakeTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicHandshakeRepo7FD56D21","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicHandshakeRepo7FD56D21","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"AtomicHandshakeRepo7FD56D21"},":latest"]]},"name":"HandshakeContainer","portMappings":[{"containerPort":80,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"HandshakeLogGroup90831F6C"},"awslogs-stream-prefix":"handshake-ecs","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"HASURA_GRAPHQL_GRAPHQL_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/graphql"]]}},{"name":"MEETING_ASSIST_ADMIN_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/functions/schedule-assist/placeholder"]]}}],"secrets":[{"name":"API_TOKEN","valueFrom":{"Ref":"ApiTokenSecret3A926DEB"}},{"name":"HASURA_GRAPHQL_ADMIN_SECRET","valueFrom":{"Ref":"HasuraAdminSecret359C72F3"}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]},"family":"handshake-fargate","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]}}}},"HandshakeContainer":{"id":"HandshakeContainer","path":"AwsStack/HandshakeTaskDef/HandshakeContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.201.0"}}}},"HandshakeLogGroup":{"id":"HandshakeLogGroup","path":"AwsStack/HandshakeLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/HandshakeLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/handshake"]]},"retentionInDays":731}}}}},"HandshakeService":{"id":"HandshakeService","path":"AwsStack/HandshakeService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.201.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"AwsStack/HandshakeService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AtomicCluster0DDF655C"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"HandshakeTargetGroupB0E5C2E0"},"containerName":"HandshakeContainer","containerPort":80}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}],"securityGroups":[{"Fn::GetAtt":["HandshakeSGAE954E91","GroupId"]}]}},"taskDefinition":{"Ref":"HandshakeTaskDef12148854"}}}}}},"HandshakeTargetGroup":{"id":"HandshakeTargetGroup","path":"AwsStack/HandshakeTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/HandshakeTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/health","port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"HandshakeListenerRule":{"id":"HandshakeListenerRule","path":"AwsStack/HandshakeListenerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/HandshakeListenerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"HandshakeTargetGroupB0E5C2E0"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/v1/handshake/*"]}}],"listenerArn":{"Ref":"AtomicAlbHttpListener370F09B3"},"priority":40}}}}},"OAuthSG":{"id":"OAuthSG","path":"AwsStack/OAuthSG","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.201.0","metadata":[{"vpc":"*","allowAllOutbound":true},{"addIngressRule":["*",{},"*",false]},{"addEgressRule":["*",{},"*",true]},{"addEgressRule":["*",{},"*",true]},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/OAuthSG/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AwsStack/OAuthSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AtomicVpcD404E496"}}}},"from AwsStackAlbSecurityGroupFEFFD71B:80":{"id":"from AwsStackAlbSecurityGroupFEFFD71B:80","path":"AwsStack/OAuthSG/from AwsStackAlbSecurityGroupFEFFD71B:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow OAuth from ALB on its container port","fromPort":80,"groupId":{"Fn::GetAtt":["OAuthSGCA2E2DFC","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":80}}}}},"OAuthTaskDef":{"id":"OAuthTaskDef","path":"AwsStack/OAuthTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"2.201.0","metadata":["*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"AwsStack/OAuthTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicOauthRepoCAF08457","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["AtomicOauthRepoCAF08457","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"AtomicOauthRepoCAF08457"},":latest"]]},"name":"OAuthContainer","portMappings":[{"containerPort":80,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"OAuthLogGroupF9A7E869"},"awslogs-stream-prefix":"oauth-ecs","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"HASURA_GRAPHQL_GRAPHQL_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/graphql"]]}},{"name":"HANDSHAKE_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["AtomicAlbF873927A","DNSName"]},"/v1/handshake"]]}}],"secrets":[{"name":"HASURA_GRAPHQL_ADMIN_SECRET","valueFrom":{"Ref":"HasuraAdminSecret359C72F3"}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]},"family":"oauth-fargate","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["ECSTaskRoleF2ADB362","Arn"]}}}},"OAuthContainer":{"id":"OAuthContainer","path":"AwsStack/OAuthTaskDef/OAuthContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.201.0"}}}},"OAuthLogGroup":{"id":"OAuthLogGroup","path":"AwsStack/OAuthLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*","removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"AwsStack/OAuthLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/ecs/",{"Ref":"AtomicCluster0DDF655C"},"/oauth"]]},"retentionInDays":731}}}}},"OAuthService":{"id":"OAuthService","path":"AwsStack/OAuthService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.201.0","metadata":["*"]},"children":{"Service":{"id":"Service","path":"AwsStack/OAuthService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AtomicCluster0DDF655C"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"OAuthTargetGroup82179AC8"},"containerName":"OAuthContainer","containerPort":80}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"AtomicVpcPrivateSubnetSubnet1SubnetCEF3D184"},{"Ref":"AtomicVpcPrivateSubnetSubnet2Subnet21C2DC90"}],"securityGroups":[{"Fn::GetAtt":["OAuthSGCA2E2DFC","GroupId"]}]}},"taskDefinition":{"Ref":"OAuthTaskDef19B6669A"}}}}}},"OAuthTargetGroup":{"id":"OAuthTargetGroup","path":"AwsStack/OAuthTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/OAuthTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/health","port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"AtomicVpcD404E496"}}}}}},"OAuthListenerRule":{"id":"OAuthListenerRule","path":"AwsStack/OAuthListenerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.201.0"},"children":{"Resource":{"id":"Resource","path":"AwsStack/OAuthListenerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"OAuthTargetGroup82179AC8"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/v1/oauth/*"]}}],"listenerArn":{"Ref":"AtomicAlbHttpListener370F09B3"},"priority":50}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"AwsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"AwsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Condition":{"id":"Condition","path":"AwsStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AwsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AwsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}